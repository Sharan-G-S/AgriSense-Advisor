(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3858],{1215:function(e,t,i){"use strict";i.d(t,{$W:function(){return isStandalone},Dt:function(){return u},G6:function(){return d},MG:function(){return c},Pf:function(){return s},i7:function(){return l},ie:function(){return getZoomFactor},uB:function(){return addMatchMediaChangeListener},vU:function(){return r}});var n=i(58990);let WindowManager=class WindowManager{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){var t;return null!==(t=this.mapWindowIdToZoomFactor.get(this.getWindowId(e)))&&void 0!==t?t:1}getWindowId(e){return e.vscodeWindowId}};function addMatchMediaChangeListener(e,t,i){"string"==typeof t&&(t=e.matchMedia(t)),t.addEventListener("change",i)}function getZoomFactor(e){return WindowManager.INSTANCE.getZoomFactor(e)}WindowManager.INSTANCE=new WindowManager;let o=navigator.userAgent,r=o.indexOf("Firefox")>=0,s=o.indexOf("AppleWebKit")>=0,l=o.indexOf("Chrome")>=0,d=!l&&o.indexOf("Safari")>=0,c=!l&&!d&&s;o.indexOf("Electron/");let u=o.indexOf("Android")>=0,g=!1;if("function"==typeof n.Ex.matchMedia){let e=n.Ex.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=n.Ex.matchMedia("(display-mode: fullscreen)");g=e.matches,addMatchMediaChangeListener(n.Ex,e,({matches:e})=>{g&&t.matches||(g=e)})}function isStandalone(){return g}},32488:function(e,t,i){"use strict";i.d(t,{D:function(){return s}});var n=i(1215),o=i(58990),r=i(88059);let s={clipboard:{writeText:r.tY||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:r.tY||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:r.tY||n.$W()?0:navigator.keyboard||n.G6?1:2,touch:"ontouchstart"in o.Ex||navigator.maxTouchPoints>0,pointerEvents:o.Ex.PointerEvent&&("ontouchstart"in o.Ex||navigator.maxTouchPoints>0)}},41256:function(e,t,i){"use strict";i.d(t,{g:function(){return o}});var n=i(23171);let o={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:n.v.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"}},70687:function(e,t,i){"use strict";let n,o;i.d(t,{$:function(){return $},$Z:function(){return show},Ay:function(){return getShadowRoot},Ce:function(){return prepend},Cp:function(){return hide},D6:function(){return getClientArea},Dx:function(){return getComputedStyle},FK:function(){return getContentWidth},GQ:function(){return addStandardDisposableGenericMouseDownListener},H9:function(){return isActiveElement},I8:function(){return getDomNodeZoomLevel},If:function(){return getContentHeight},Jc:function(){return M},Jj:function(){return L},N5:function(){return isMouseEvent},OO:function(){return isInShadowDOM},PO:function(){return clearNode},R3:function(){return append},Ro:function(){return Dimension},Uh:function(){return computeScreenAwareSize},V3:function(){return windowOpenNoOpener},WN:function(){return getActiveWindow},XT:function(){return asCssValueWithDefault},Xo:function(){return T},ZY:function(){return N},_0:function(){return restoreParentsScrollTop},_F:function(){return hookDomPurifyHrefAndSrcSanitizer},_h:function(){return asCSSPropertyValue},_q:function(){return ModifierKeyEmitter},aU:function(){return createStyleSheet2},b5:function(){return isAncestorOfActiveElement},cl:function(){return isEventLike},dS:function(){return createStyleSheet},dp:function(){return size},e4:function(){return after},ed:function(){return E},eg:function(){return DragAndDropObserver},ey:function(){return R},fk:function(){return createCSSRule},go:function(){return trackFocus},h:function(){return h},i:function(){return getDomNodePagePosition},iJ:function(){return setVisibility},jL:function(){return o},jg:function(){return isAncestor},jt:function(){return animate},lI:function(){return n},mc:function(){return reset},mu:function(){return addStandardDisposableListener},ne:function(){return WindowIntervalTimer},nm:function(){return addDisposableListener},sQ:function(){return V},se:function(){return runWhenWindowIdle},tw:function(){return F},uN:function(){return removeCSSRulesContainingSelector},uP:function(){return getActiveDocument},uU:function(){return hasParentWithClass},vL:function(){return saveParentsScrollTop},vY:function(){return getActiveElement},vd:function(){return isKeyboardEvent},vx:function(){return WindowIdleValue},w:function(){return getTotalWidth},wY:function(){return asCSSUrl},wn:function(){return getTotalHeight},xQ:function(){return getTopLeftOffset},zB:function(){return B}});var r,s,l=i(1215),d=i(32488),c=i(58731),u=i(31498),g=i(66614),m=i(17861),f=i(57605),_=i(20532),v=i(87932),C=i(95998),b=i(88059),S=i(22256),y=i(58990);let{registerWindow:w,getWindow:L,getDocument:k,getWindows:D,getWindowsCount:x,getWindowId:N,getWindowById:E,hasWindow:I,onDidRegisterWindow:T,onWillUnregisterWindow:M,onDidUnregisterWindow:R}=function(){let e=new Map;(0,y.HA)(y.Ex,1);let t={window:y.Ex,disposables:new v.SL};e.set(y.Ex.vscodeWindowId,t);let i=new f.Q5,n=new f.Q5,o=new f.Q5;function getWindowById(i,n){let o="number"==typeof i?e.get(i):void 0;return null!=o?o:n?t:void 0}return{onDidRegisterWindow:i.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(t){if(e.has(t.vscodeWindowId))return v.JT.None;let r=new v.SL,s={window:t,disposables:r.add(new v.SL)};return e.set(t.vscodeWindowId,s),r.add((0,v.OF)(()=>{e.delete(t.vscodeWindowId),n.fire(t)})),r.add(addDisposableListener(t,F.BEFORE_UNLOAD,()=>{o.fire(t)})),i.fire(s),r},getWindows:()=>e.values(),getWindowsCount:()=>e.size,getWindowId:e=>e.vscodeWindowId,hasWindow:t=>e.has(t),getWindowById,getWindow(e){var t;return(null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)?e.ownerDocument.defaultView.window:(null==e?void 0:e.view)?e.view.window:y.Ex},getDocument:e=>L(e).document}}();function clearNode(e){for(;e.firstChild;)e.firstChild.remove()}let DomListener=class DomListener{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function addDisposableListener(e,t,i,n){return new DomListener(e,t,i,n)}function _wrapAsStandardMouseEvent(e,t){return function(i){return t(new u.n(e,i))}}function _wrapAsStandardKeyboardEvent(e){return function(t){return e(new c.y(t))}}let addStandardDisposableListener=function(e,t,i,n){let o=i;return"click"===t||"mousedown"===t?o=_wrapAsStandardMouseEvent(L(e),i):("keydown"===t||"keypress"===t||"keyup"===t)&&(o=_wrapAsStandardKeyboardEvent(i)),addDisposableListener(e,t,o,n)},addStandardDisposableGenericMouseDownListener=function(e,t,i){let n=_wrapAsStandardMouseEvent(L(e),t);return addDisposableGenericMouseDownListener(e,n,i)};function addDisposableGenericMouseDownListener(e,t,i){return addDisposableListener(e,b.gn&&d.D.pointerEvents?F.POINTER_DOWN:F.MOUSE_DOWN,t,i)}function runWhenWindowIdle(e,t,i){return(0,g.y5)(e,t,i)}let WindowIdleValue=class WindowIdleValue extends g.hF{constructor(e,t){super(e,t)}};let WindowIntervalTimer=class WindowIntervalTimer extends g.zh{constructor(e){super(),this.defaultTarget=e&&L(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,null!=i?i:this.defaultTarget)}};let AnimationFrameQueueItem=class AnimationFrameQueueItem{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){(0,m.dL)(e)}}static sort(e,t){return t.priority-e.priority}};function getComputedStyle(e){return L(e).getComputedStyle(e,null)}function getClientArea(e,t){let i=L(e),n=i.document;if(e!==n.body)return new Dimension(e.clientWidth,e.clientHeight);if(b.gn&&(null==i?void 0:i.visualViewport))return new Dimension(i.visualViewport.width,i.visualViewport.height);if((null==i?void 0:i.innerWidth)&&i.innerHeight)return new Dimension(i.innerWidth,i.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Dimension(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Dimension(n.documentElement.clientWidth,n.documentElement.clientHeight);if(t)return getClientArea(t);throw Error("Unable to figure out browser width and height")}!function(){let e=new Map,t=new Map,i=new Map,r=new Map,animationFrameRunner=n=>{var o;i.set(n,!1);let s=null!==(o=e.get(n))&&void 0!==o?o:[];for(t.set(n,s),e.set(n,[]),r.set(n,!0);s.length>0;){s.sort(AnimationFrameQueueItem.sort);let e=s.shift();e.execute()}r.set(n,!1)};o=(t,n,o=0)=>{let r=N(t),s=new AnimationFrameQueueItem(n,o),l=e.get(r);return l||(l=[],e.set(r,l)),l.push(s),i.get(r)||(i.set(r,!0),t.requestAnimationFrame(()=>animationFrameRunner(r))),s},n=(e,i,n)=>{let s=N(e);if(!r.get(s))return o(e,i,n);{let e=new AnimationFrameQueueItem(i,n),o=t.get(s);return o||(o=[],t.set(s,o)),o.push(e),e}}}();let SizeUtils=class SizeUtils{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){let n=getComputedStyle(e),o=n?n.getPropertyValue(t):"0";return SizeUtils.convertToPixels(e,o)}static getBorderLeftWidth(e){return SizeUtils.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return SizeUtils.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return SizeUtils.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return SizeUtils.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return SizeUtils.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return SizeUtils.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return SizeUtils.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return SizeUtils.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return SizeUtils.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return SizeUtils.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return SizeUtils.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return SizeUtils.getDimension(e,"margin-bottom","marginBottom")}};let Dimension=class Dimension{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Dimension(e,t):this}static is(e){return"object"==typeof e&&"number"==typeof e.height&&"number"==typeof e.width}static lift(e){return e instanceof Dimension?e:new Dimension(e.width,e.height)}static equals(e,t){return e===t||!!e&&!!t&&e.width===t.width&&e.height===t.height}};function getTopLeftOffset(e){let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==e.ownerDocument.body&&e!==e.ownerDocument.documentElement;){i-=e.scrollTop;let o=isShadowRoot(e)?null:getComputedStyle(e);o&&(n-="rtl"!==o.direction?e.scrollLeft:-e.scrollLeft),e===t&&(n+=SizeUtils.getBorderLeftWidth(e),i+=SizeUtils.getBorderTopWidth(e)+e.offsetTop,n+=e.offsetLeft,t=e.offsetParent)}return{left:n,top:i}}function size(e,t,i){"number"==typeof t&&(e.style.width=`${t}px`),"number"==typeof i&&(e.style.height=`${i}px`)}function getDomNodePagePosition(e){let t=e.getBoundingClientRect(),i=L(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}function getDomNodeZoomLevel(e){let t=e,i=1;do{let e=getComputedStyle(t).zoom;null!=e&&"1"!==e&&(i*=e),t=t.parentElement}while(null!==t&&t!==t.ownerDocument.documentElement);return i}function getTotalWidth(e){let t=SizeUtils.getMarginLeft(e)+SizeUtils.getMarginRight(e);return e.offsetWidth+t}function getContentWidth(e){let t=SizeUtils.getBorderLeftWidth(e)+SizeUtils.getBorderRightWidth(e),i=SizeUtils.getPaddingLeft(e)+SizeUtils.getPaddingRight(e);return e.offsetWidth-t-i}function getContentHeight(e){let t=SizeUtils.getBorderTopWidth(e)+SizeUtils.getBorderBottomWidth(e),i=SizeUtils.getPaddingTop(e)+SizeUtils.getPaddingBottom(e);return e.offsetHeight-t-i}function getTotalHeight(e){let t=SizeUtils.getMarginTop(e)+SizeUtils.getMarginBottom(e);return e.offsetHeight+t}function isAncestor(e,t){return!!(null==t?void 0:t.contains(e))}function findParentWithClass(e,t,i){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(i){if("string"==typeof i){if(e.classList.contains(i))break}else if(e===i)break}e=e.parentNode}return null}function hasParentWithClass(e,t,i){return!!findParentWithClass(e,t,i)}function isShadowRoot(e){return e&&!!e.host&&!!e.mode}function isInShadowDOM(e){return!!getShadowRoot(e)}function getShadowRoot(e){for(var t;e.parentNode;){if(e===(null===(t=e.ownerDocument)||void 0===t?void 0:t.body))return null;e=e.parentNode}return isShadowRoot(e)?e:null}function getActiveElement(){let e=getActiveDocument().activeElement;for(;null==e?void 0:e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function isActiveElement(e){return getActiveElement()===e}function isAncestorOfActiveElement(e){return isAncestor(getActiveElement(),e)}function getActiveDocument(){var e;if(1>=x())return y.Ex.document;let t=Array.from(D()).map(({window:e})=>e.document);return null!==(e=t.find(e=>e.hasFocus()))&&void 0!==e?e:y.Ex.document}function getActiveWindow(){var e,t;let i=getActiveDocument();return null!==(t=null===(e=i.defaultView)||void 0===e?void 0:e.window)&&void 0!==t?t:y.Ex}Dimension.None=new Dimension(0,0);let A=new Map;function createStyleSheet2(){return new WrappedStyleElement}let WrappedStyleElement=class WrappedStyleElement{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=createStyleSheet(y.Ex.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}};function createStyleSheet(e=y.Ex.document.head,t,i){let n=document.createElement("style");if(n.type="text/css",n.media="screen",null==t||t(n),e.appendChild(n),i&&i.add((0,v.OF)(()=>e.removeChild(n))),e===y.Ex.document.head){let e=new Set;for(let{window:t,disposables:o}of(A.set(n,e),D())){if(t===y.Ex)continue;let r=o.add(cloneGlobalStyleSheet(n,e,t));null==i||i.add(r)}}return n}function cloneGlobalStyleSheet(e,t,i){var n,o;let r=new v.SL,s=e.cloneNode(!0);for(let t of(i.document.head.appendChild(s),r.add((0,v.OF)(()=>i.document.head.removeChild(s))),getDynamicStyleSheetRules(e)))null===(n=s.sheet)||void 0===n||n.insertRule(t.cssText,null===(o=s.sheet)||void 0===o?void 0:o.cssRules.length);return r.add(P.observe(e,r,{childList:!0})(()=>{s.textContent=e.textContent})),t.add(s),r.add((0,v.OF)(()=>t.delete(s))),r}let P=new class{constructor(){this.mutationObservers=new Map}observe(e,t,i){let n=this.mutationObservers.get(e);n||(n=new Map,this.mutationObservers.set(e,n));let o=(0,S.vp)(i),r=n.get(o);if(r)r.users+=1;else{let s=new f.Q5,l=new MutationObserver(e=>s.fire(e));l.observe(e,i);let d=r={users:1,observer:l,onDidMutate:s.event};t.add((0,v.OF)(()=>{d.users-=1,0===d.users&&(s.dispose(),l.disconnect(),null==n||n.delete(o),(null==n?void 0:n.size)===0&&this.mutationObservers.delete(e))})),n.set(o,r)}return r.onDidMutate}},O=null;function getSharedStyleSheet(){return O||(O=createStyleSheet()),O}function getDynamicStyleSheetRules(e){var t,i;return(null===(t=null==e?void 0:e.sheet)||void 0===t?void 0:t.rules)?e.sheet.rules:(null===(i=null==e?void 0:e.sheet)||void 0===i?void 0:i.cssRules)?e.sheet.cssRules:[]}function createCSSRule(e,t,i=getSharedStyleSheet()){var n,o;if(i&&t)for(let r of(null===(n=i.sheet)||void 0===n||n.insertRule(`${e} {${t}}`,0),null!==(o=A.get(i))&&void 0!==o?o:[]))createCSSRule(e,t,r)}function removeCSSRulesContainingSelector(e,t=getSharedStyleSheet()){var i,n;if(!t)return;let o=getDynamicStyleSheetRules(t),r=[];for(let t=0;t<o.length;t++){let i=o[t];isCSSStyleRule(i)&&-1!==i.selectorText.indexOf(e)&&r.push(t)}for(let e=r.length-1;e>=0;e--)null===(i=t.sheet)||void 0===i||i.deleteRule(r[e]);for(let i of null!==(n=A.get(t))&&void 0!==n?n:[])removeCSSRulesContainingSelector(e,i)}function isCSSStyleRule(e){return"string"==typeof e.selectorText}function isMouseEvent(e){return e instanceof MouseEvent||e instanceof L(e).MouseEvent}function isKeyboardEvent(e){return e instanceof KeyboardEvent||e instanceof L(e).KeyboardEvent}let F={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:l.Pf?"webkitAnimationStart":"animationstart",ANIMATION_END:l.Pf?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:l.Pf?"webkitAnimationIteration":"animationiteration"};function isEventLike(e){return!!(e&&"function"==typeof e.preventDefault&&"function"==typeof e.stopPropagation)}let B={stop:(e,t)=>(e.preventDefault(),t&&e.stopPropagation(),e)};function saveParentsScrollTop(e){let t=[];for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)t[i]=e.scrollTop,e=e.parentNode;return t}function restoreParentsScrollTop(e,t){for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)e.scrollTop!==t[i]&&(e.scrollTop=t[i]),e=e.parentNode}let FocusTracker=class FocusTracker extends v.JT{static hasFocusWithin(e){if(!(e instanceof HTMLElement))return isAncestor(e.document.activeElement,e.document);{let t=getShadowRoot(e),i=t?t.activeElement:e.ownerDocument.activeElement;return isAncestor(i,e)}}constructor(e){super(),this._onDidFocus=this._register(new f.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new f.Q5),this.onDidBlur=this._onDidBlur.event;let t=FocusTracker.hasFocusWithin(e),i=!1,onFocus=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},onBlur=()=>{t&&(i=!0,(e instanceof HTMLElement?L(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{let i=FocusTracker.hasFocusWithin(e);i!==t&&(t?onBlur():onFocus())},this._register(addDisposableListener(e,F.FOCUS,onFocus,!0)),this._register(addDisposableListener(e,F.BLUR,onBlur,!0)),e instanceof HTMLElement&&(this._register(addDisposableListener(e,F.FOCUS_IN,()=>this._refreshStateHandler())),this._register(addDisposableListener(e,F.FOCUS_OUT,()=>this._refreshStateHandler())))}};function trackFocus(e){return new FocusTracker(e)}function after(e,t){return e.after(t),t}function append(e,...t){if(e.append(...t),1===t.length&&"string"!=typeof t[0])return t[0]}function prepend(e,t){return e.insertBefore(t,e.firstChild),t}function reset(e,...t){e.innerText="",append(e,...t)}let W=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function _$(e,t,i,...n){let o;let r=W.exec(t);if(!r)throw Error("Bad use of emmet");let l=r[1]||"div";return o=e!==s.HTML?document.createElementNS(e,l):document.createElement(l),r[3]&&(o.id=r[3]),r[4]&&(o.className=r[4].replace(/\./g," ").trim()),i&&Object.entries(i).forEach(([e,t])=>{void 0!==t&&(/^on\w+$/.test(e)?o[e]=t:"selected"===e?t&&o.setAttribute(e,"true"):o.setAttribute(e,t))}),o.append(...n),o}function $(e,t,...i){return _$(s.HTML,e,t,...i)}function setVisibility(e,...t){e?show(...t):hide(...t)}function show(...e){for(let t of e)t.style.display="",t.removeAttribute("aria-hidden")}function hide(...e){for(let t of e)t.style.display="none",t.setAttribute("aria-hidden","true")}function computeScreenAwareSize(e,t){let i=e.devicePixelRatio*t;return Math.max(1,Math.floor(i))/e.devicePixelRatio}function windowOpenNoOpener(e){y.Ex.open(e,"_blank","noopener")}function animate(e,t){let step=()=>{t(),i=o(e,step)},i=o(e,step);return(0,v.OF)(()=>i.dispose())}function asCSSUrl(e){return e?`url('${C.Gi.uriToBrowserUri(e).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function asCSSPropertyValue(e){return`'${e.replace(/'/g,"%27")}'`}function asCssValueWithDefault(e,t){if(void 0!==e){let i=e.match(/^\s*var\((.+)\)$/);if(i){let e=i[1].split(",",2);return 2===e.length&&(t=asCssValueWithDefault(e[1].trim(),t)),`var(${e[0]}, ${t})`}return e}return t}function hookDomPurifyHrefAndSrcSanitizer(e,t=!1){let i=document.createElement("a");return _.v5("afterSanitizeAttributes",n=>{for(let o of["href","src"])if(n.hasAttribute(o)){let r=n.getAttribute(o);if("href"===o&&r.startsWith("#"))continue;if(i.href=r,!e.includes(i.protocol.replace(/:$/,""))){if(t&&"src"===o&&i.href.startsWith("data:"))continue;n.removeAttribute(o)}}}),(0,v.OF)(()=>{_.ok("afterSanitizeAttributes")})}(r=s||(s={})).HTML="http://www.w3.org/1999/xhtml",r.SVG="http://www.w3.org/2000/svg",$.SVG=function(e,t,...i){return _$(s.SVG,e,t,...i)},C.WX.setPreferredWebSchema(/^https:/.test(y.Ex.location.href)?"https":"http");let V=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});let ModifierKeyEmitter=class ModifierKeyEmitter extends f.Q5{constructor(){super(),this._subscriptions=new v.SL,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(f.ju.runAndSubscribe(T,({window:e,disposables:t})=>this.registerListeners(e,t),{window:y.Ex,disposables:this._subscriptions}))}registerListeners(e,t){t.add(addDisposableListener(e,"keydown",e=>{if(e.defaultPrevented)return;let t=new c.y(e);if(6!==t.keyCode||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),t.add(addDisposableListener(e,"keyup",e=>{!e.defaultPrevented&&(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),t.add(addDisposableListener(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(addDisposableListener(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(addDisposableListener(e.document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(addDisposableListener(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ModifierKeyEmitter.instance||(ModifierKeyEmitter.instance=new ModifierKeyEmitter),ModifierKeyEmitter.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};let DragAndDropObserver=class DragAndDropObserver extends v.JT{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(addDisposableListener(this.element,F.DRAG_START,e=>{var t,i;null===(i=(t=this.callbacks).onDragStart)||void 0===i||i.call(t,e)})),this.callbacks.onDrag&&this._register(addDisposableListener(this.element,F.DRAG,e=>{var t,i;null===(i=(t=this.callbacks).onDrag)||void 0===i||i.call(t,e)})),this._register(addDisposableListener(this.element,F.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,null===(i=(t=this.callbacks).onDragEnter)||void 0===i||i.call(t,e)})),this._register(addDisposableListener(this.element,F.DRAG_OVER,e=>{var t,i;e.preventDefault(),null===(i=(t=this.callbacks).onDragOver)||void 0===i||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(addDisposableListener(this.element,F.DRAG_LEAVE,e=>{var t,i;this.counter--,0===this.counter&&(this.dragStartTime=0,null===(i=(t=this.callbacks).onDragLeave)||void 0===i||i.call(t,e))})),this._register(addDisposableListener(this.element,F.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,null===(i=(t=this.callbacks).onDragEnd)||void 0===i||i.call(t,e)})),this._register(addDisposableListener(this.element,F.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,null===(i=(t=this.callbacks).onDrop)||void 0===i||i.call(t,e)}))}};let H=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function h(e,...t){let i,n;Array.isArray(t[0])?(i={},n=t[0]):(i=t[0]||{},n=t[1]);let o=H.exec(e);if(!o||!o.groups)throw Error("Bad use of h");let r=o.groups.tag||"div",s=document.createElement(r);o.groups.id&&(s.id=o.groups.id);let l=[];if(o.groups.class)for(let e of o.groups.class.split("."))""!==e&&l.push(e);if(void 0!==i.className)for(let e of i.className.split("."))""!==e&&l.push(e);l.length>0&&(s.className=l.join(" "));let d={};if(o.groups.name&&(d[o.groups.name]=s),n)for(let e of n)e instanceof HTMLElement?s.appendChild(e):"string"==typeof e?s.append(e):"root"in e&&(Object.assign(d,e),s.appendChild(e.root));for(let[e,t]of Object.entries(i))if("className"!==e){if("style"===e)for(let[e,i]of Object.entries(t))s.style.setProperty(camelCaseToHyphenCase(e),"number"==typeof i?i+"px":""+i);else"tabIndex"===e?s.tabIndex=t:s.setAttribute(camelCaseToHyphenCase(e),t.toString())}return d.root=s,d}function camelCaseToHyphenCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},20532:function(e,t,i){"use strict";i.d(t,{Nw:function(){return Z},ok:function(){return J},v5:function(){return Y}});/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */let{entries:n,setPrototypeOf:o,isFrozen:r,getPrototypeOf:s,getOwnPropertyDescriptor:l}=Object,{freeze:d,seal:c,create:u}=Object,{apply:g,construct:m}="undefined"!=typeof Reflect&&Reflect;g||(g=function(e,t,i){return e.apply(t,i)}),d||(d=function(e){return e}),c||(c=function(e){return e}),m||(m=function(e,t){return new e(...t)});let f=unapply(Array.prototype.forEach),_=unapply(Array.prototype.pop),v=unapply(Array.prototype.push),C=unapply(String.prototype.toLowerCase),b=unapply(String.prototype.toString),S=unapply(String.prototype.match),y=unapply(String.prototype.replace),w=unapply(String.prototype.indexOf),L=unapply(String.prototype.trim),k=unapply(RegExp.prototype.test),D=unconstruct(TypeError);function unapply(e){return function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return g(e,t,n)}}function unconstruct(e){return function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return m(e,i)}}function addToSet(e,t,i){var n;i=null!==(n=i)&&void 0!==n?n:C,o&&o(e,null);let s=t.length;for(;s--;){let n=t[s];if("string"==typeof n){let e=i(n);e!==n&&(r(t)||(t[s]=e),n=e)}e[n]=!0}return e}function clone(e){let t=u(null);for(let[i,o]of n(e))t[i]=o;return t}function lookupGetter(e,t){for(;null!==e;){let i=l(e,t);if(i){if(i.get)return unapply(i.get);if("function"==typeof i.value)return unapply(i.value)}e=s(e)}return function(e){return console.warn("fallback value for",e),null}}let x=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),N=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),E=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=d(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),T=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),M=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R=d(["#text"]),A=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),P=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),O=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=c(/<%[\w\W]*|[\w\W]*%>/gm),V=c(/\${[\w\W]*}/gm),H=c(/^data-[\-\w.\u00B7-\uFFFF]/),z=c(/^aria-[\-\w]+$/),U=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=c(/^(?:\w+script|data):/i),j=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=c(/^html$/i);var G=Object.freeze({__proto__:null,MUSTACHE_EXPR:B,ERB_EXPR:W,TMPLIT_EXPR:V,DATA_ATTR:H,ARIA_ATTR:z,IS_ALLOWED_URI:U,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:j,DOCTYPE_NAME:q});let getGlobal=()=>"undefined"==typeof window?null:window,_createTrustedTypesPolicy=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null,n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));let o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function createDOMPurify(){let e,t,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getGlobal(),DOMPurify=e=>createDOMPurify(e);if(DOMPurify.version="3.0.5",DOMPurify.removed=[],!o||!o.document||9!==o.document.nodeType)return DOMPurify.isSupported=!1,DOMPurify;let r=o.document,s=r.currentScript,{document:l}=o,{DocumentFragment:c,HTMLTemplateElement:u,Node:g,Element:m,NodeFilter:B,NamedNodeMap:W=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:V,DOMParser:H,trustedTypes:z}=o,K=m.prototype,j=lookupGetter(K,"cloneNode"),Q=lookupGetter(K,"nextSibling"),Z=lookupGetter(K,"childNodes"),Y=lookupGetter(K,"parentNode");if("function"==typeof u){let e=l.createElement("template");e.content&&e.content.ownerDocument&&(l=e.content.ownerDocument)}let J="",{implementation:X,createNodeIterator:ee,createDocumentFragment:et,getElementsByTagName:ei}=l,{importNode:en}=r,eo={};DOMPurify.isSupported="function"==typeof n&&"function"==typeof Y&&X&&void 0!==X.createHTMLDocument;let{MUSTACHE_EXPR:er,ERB_EXPR:es,TMPLIT_EXPR:ea,DATA_ATTR:el,ARIA_ATTR:ed,IS_SCRIPT_OR_DATA:eh,ATTR_WHITESPACE:ec}=G,{IS_ALLOWED_URI:eu}=G,eg=null,ep=addToSet({},[...x,...N,...E,...T,...R]),em=null,ef=addToSet({},[...A,...P,...O,...F]),e_=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ev=null,eC=null,eb=!0,eS=!0,ey=!1,ew=!0,eL=!1,ek=!1,eD=!1,ex=!1,eN=!1,eE=!1,eI=!1,eT=!0,eM=!1,eR=!0,eA=!1,eP={},eO=null,eF=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eB=null,eW=addToSet({},["audio","video","img","source","image","track"]),eV=null,eH=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ez="http://www.w3.org/1998/Math/MathML",eU="http://www.w3.org/2000/svg",eK="http://www.w3.org/1999/xhtml",ej=eK,eq=!1,e$=null,eG=addToSet({},[ez,eU,eK],b),eQ=["application/xhtml+xml","text/html"],eZ=null,eY=l.createElement("form"),isRegexOrFunction=function(e){return e instanceof RegExp||e instanceof Function},_parseConfig=function(n){if(!eZ||eZ!==n){if(n&&"object"==typeof n||(n={}),n=clone(n),i="application/xhtml+xml"===(t=t=-1===eQ.indexOf(n.PARSER_MEDIA_TYPE)?"text/html":n.PARSER_MEDIA_TYPE)?b:C,eg="ALLOWED_TAGS"in n?addToSet({},n.ALLOWED_TAGS,i):ep,em="ALLOWED_ATTR"in n?addToSet({},n.ALLOWED_ATTR,i):ef,e$="ALLOWED_NAMESPACES"in n?addToSet({},n.ALLOWED_NAMESPACES,b):eG,eV="ADD_URI_SAFE_ATTR"in n?addToSet(clone(eH),n.ADD_URI_SAFE_ATTR,i):eH,eB="ADD_DATA_URI_TAGS"in n?addToSet(clone(eW),n.ADD_DATA_URI_TAGS,i):eW,eO="FORBID_CONTENTS"in n?addToSet({},n.FORBID_CONTENTS,i):eF,ev="FORBID_TAGS"in n?addToSet({},n.FORBID_TAGS,i):{},eC="FORBID_ATTR"in n?addToSet({},n.FORBID_ATTR,i):{},eP="USE_PROFILES"in n&&n.USE_PROFILES,eb=!1!==n.ALLOW_ARIA_ATTR,eS=!1!==n.ALLOW_DATA_ATTR,ey=n.ALLOW_UNKNOWN_PROTOCOLS||!1,ew=!1!==n.ALLOW_SELF_CLOSE_IN_ATTR,eL=n.SAFE_FOR_TEMPLATES||!1,ek=n.WHOLE_DOCUMENT||!1,eN=n.RETURN_DOM||!1,eE=n.RETURN_DOM_FRAGMENT||!1,eI=n.RETURN_TRUSTED_TYPE||!1,ex=n.FORCE_BODY||!1,eT=!1!==n.SANITIZE_DOM,eM=n.SANITIZE_NAMED_PROPS||!1,eR=!1!==n.KEEP_CONTENT,eA=n.IN_PLACE||!1,eu=n.ALLOWED_URI_REGEXP||U,ej=n.NAMESPACE||eK,e_=n.CUSTOM_ELEMENT_HANDLING||{},n.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(n.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(e_.tagNameCheck=n.CUSTOM_ELEMENT_HANDLING.tagNameCheck),n.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(e_.attributeNameCheck=n.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),n.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(e_.allowCustomizedBuiltInElements=n.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eL&&(eS=!1),eE&&(eN=!0),eP&&(eg=addToSet({},[...R]),em=[],!0===eP.html&&(addToSet(eg,x),addToSet(em,A)),!0===eP.svg&&(addToSet(eg,N),addToSet(em,P),addToSet(em,F)),!0===eP.svgFilters&&(addToSet(eg,E),addToSet(em,P),addToSet(em,F)),!0===eP.mathMl&&(addToSet(eg,T),addToSet(em,O),addToSet(em,F))),n.ADD_TAGS&&(eg===ep&&(eg=clone(eg)),addToSet(eg,n.ADD_TAGS,i)),n.ADD_ATTR&&(em===ef&&(em=clone(em)),addToSet(em,n.ADD_ATTR,i)),n.ADD_URI_SAFE_ATTR&&addToSet(eV,n.ADD_URI_SAFE_ATTR,i),n.FORBID_CONTENTS&&(eO===eF&&(eO=clone(eO)),addToSet(eO,n.FORBID_CONTENTS,i)),eR&&(eg["#text"]=!0),ek&&addToSet(eg,["html","head","body"]),eg.table&&(addToSet(eg,["tbody"]),delete ev.tbody),n.TRUSTED_TYPES_POLICY){if("function"!=typeof n.TRUSTED_TYPES_POLICY.createHTML)throw D('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof n.TRUSTED_TYPES_POLICY.createScriptURL)throw D('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');J=(e=n.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===e&&(e=_createTrustedTypesPolicy(z,s)),null!==e&&"string"==typeof J&&(J=e.createHTML(""));d&&d(n),eZ=n}},eJ=addToSet({},["mi","mo","mn","ms","mtext"]),eX=addToSet({},["foreignobject","desc","title","annotation-xml"]),e0=addToSet({},["title","style","font","a","script"]),e1=addToSet({},N);addToSet(e1,E),addToSet(e1,I);let e2=addToSet({},T);addToSet(e2,M);let _checkValidNamespace=function(e){let i=Y(e);i&&i.tagName||(i={namespaceURI:ej,tagName:"template"});let n=C(e.tagName),o=C(i.tagName);return!!e$[e.namespaceURI]&&(e.namespaceURI===eU?i.namespaceURI===eK?"svg"===n:i.namespaceURI===ez?"svg"===n&&("annotation-xml"===o||eJ[o]):!!e1[n]:e.namespaceURI===ez?i.namespaceURI===eK?"math"===n:i.namespaceURI===eU?"math"===n&&eX[o]:!!e2[n]:e.namespaceURI===eK?(i.namespaceURI!==eU||!!eX[o])&&(i.namespaceURI!==ez||!!eJ[o])&&!e2[n]&&(e0[n]||!e1[n]):"application/xhtml+xml"===t&&!!e$[e.namespaceURI])},_forceRemove=function(e){v(DOMPurify.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},_removeAttribute=function(e,t){try{v(DOMPurify.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){v(DOMPurify.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!em[e]){if(eN||eE)try{_forceRemove(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},_initDocument=function(i){let n,o;if(ex)i="<remove></remove>"+i;else{let e=S(i,/^[\r\n\t ]+/);o=e&&e[0]}"application/xhtml+xml"===t&&ej===eK&&(i='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+i+"</body></html>");let r=e?e.createHTML(i):i;if(ej===eK)try{n=new H().parseFromString(r,t)}catch(e){}if(!n||!n.documentElement){n=X.createDocument(ej,"template",null);try{n.documentElement.innerHTML=eq?J:r}catch(e){}}let s=n.body||n.documentElement;return(i&&o&&s.insertBefore(l.createTextNode(o),s.childNodes[0]||null),ej===eK)?ei.call(n,ek?"html":"body")[0]:ek?n.documentElement:s},_createIterator=function(e){return ee.call(e.ownerDocument||e,e,B.SHOW_ELEMENT|B.SHOW_COMMENT|B.SHOW_TEXT,null,!1)},_isNode=function(e){return"object"==typeof g?e instanceof g:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},_executeHook=function(e,t,i){eo[e]&&f(eo[e],e=>{e.call(DOMPurify,t,i,eZ)})},_sanitizeElements=function(e){let t;if(_executeHook("beforeSanitizeElements",e,null),e instanceof V&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof W)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes))return _forceRemove(e),!0;let n=i(e.nodeName);if(_executeHook("uponSanitizeElement",e,{tagName:n,allowedTags:eg}),e.hasChildNodes()&&!_isNode(e.firstElementChild)&&(!_isNode(e.content)||!_isNode(e.content.firstElementChild))&&k(/<[/\w]/g,e.innerHTML)&&k(/<[/\w]/g,e.textContent))return _forceRemove(e),!0;if(!eg[n]||ev[n]){if(!ev[n]&&_basicCustomElementTest(n)&&(e_.tagNameCheck instanceof RegExp&&k(e_.tagNameCheck,n)||e_.tagNameCheck instanceof Function&&e_.tagNameCheck(n)))return!1;if(eR&&!eO[n]){let t=Y(e)||e.parentNode,i=Z(e)||e.childNodes;if(i&&t){let n=i.length;for(let o=n-1;o>=0;--o)t.insertBefore(j(i[o],!0),Q(e))}}return _forceRemove(e),!0}return e instanceof m&&!_checkValidNamespace(e)||("noscript"===n||"noembed"===n||"noframes"===n)&&k(/<\/no(script|embed|frames)/i,e.innerHTML)?(_forceRemove(e),!0):(eL&&3===e.nodeType&&(t=y(t=e.textContent,er," "),t=y(t,es," "),t=y(t,ea," "),e.textContent!==t&&(v(DOMPurify.removed,{element:e.cloneNode()}),e.textContent=t)),_executeHook("afterSanitizeElements",e,null),!1)},_isValidAttribute=function(e,t,i){if(eT&&("id"===t||"name"===t)&&(i in l||i in eY))return!1;if(eS&&!eC[t]&&k(el,t));else if(eb&&k(ed,t));else if(!em[t]||eC[t]){if(!(_basicCustomElementTest(e)&&(e_.tagNameCheck instanceof RegExp&&k(e_.tagNameCheck,e)||e_.tagNameCheck instanceof Function&&e_.tagNameCheck(e))&&(e_.attributeNameCheck instanceof RegExp&&k(e_.attributeNameCheck,t)||e_.attributeNameCheck instanceof Function&&e_.attributeNameCheck(t))||"is"===t&&e_.allowCustomizedBuiltInElements&&(e_.tagNameCheck instanceof RegExp&&k(e_.tagNameCheck,i)||e_.tagNameCheck instanceof Function&&e_.tagNameCheck(i))))return!1}else if(eV[t]);else if(k(eu,y(i,ec,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===w(i,"data:")&&eB[e]);else if(ey&&!k(eh,y(i,ec,"")));else if(i)return!1;return!0},_basicCustomElementTest=function(e){return e.indexOf("-")>0},_sanitizeAttributes=function(t){let n,o,r,s;_executeHook("beforeSanitizeAttributes",t,null);let{attributes:l}=t;if(!l)return;let d={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:em};for(s=l.length;s--;){n=l[s];let{name:c,namespaceURI:u}=n;if(o="value"===c?n.value:L(n.value),r=i(c),d.attrName=r,d.attrValue=o,d.keepAttr=!0,d.forceKeepAttr=void 0,_executeHook("uponSanitizeAttribute",t,d),o=d.attrValue,d.forceKeepAttr||(_removeAttribute(c,t),!d.keepAttr))continue;if(!ew&&k(/\/>/i,o)){_removeAttribute(c,t);continue}eL&&(o=y(o,er," "),o=y(o,es," "),o=y(o,ea," "));let g=i(t.nodeName);if(_isValidAttribute(g,r,o)){if(eM&&("id"===r||"name"===r)&&(_removeAttribute(c,t),o="user-content-"+o),e&&"object"==typeof z&&"function"==typeof z.getAttributeType){if(u);else switch(z.getAttributeType(g,r)){case"TrustedHTML":o=e.createHTML(o);break;case"TrustedScriptURL":o=e.createScriptURL(o)}}try{u?t.setAttributeNS(u,c,o):t.setAttribute(c,o),_(DOMPurify.removed)}catch(e){}}}_executeHook("afterSanitizeAttributes",t,null)},_sanitizeShadowDOM=function _sanitizeShadowDOM(e){let t;let i=_createIterator(e);for(_executeHook("beforeSanitizeShadowDOM",e,null);t=i.nextNode();)_executeHook("uponSanitizeShadowNode",t,null),_sanitizeElements(t)||(t.content instanceof c&&_sanitizeShadowDOM(t.content),_sanitizeAttributes(t));_executeHook("afterSanitizeShadowDOM",e,null)};return DOMPurify.sanitize=function(t){let n,o,s,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((eq=!t)&&(t="<!-->"),"string"!=typeof t&&!_isNode(t)){if("function"==typeof t.toString){if("string"!=typeof(t=t.toString()))throw D("dirty is not a string, aborting")}else throw D("toString is not a function")}if(!DOMPurify.isSupported)return t;if(eD||_parseConfig(d),DOMPurify.removed=[],"string"==typeof t&&(eA=!1),eA){if(t.nodeName){let e=i(t.nodeName);if(!eg[e]||ev[e])throw D("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof g)1===(o=(n=_initDocument("<!---->")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===o.nodeName?n=o:"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!eN&&!eL&&!ek&&-1===t.indexOf("<"))return e&&eI?e.createHTML(t):t;if(!(n=_initDocument(t)))return eN?null:eI?J:""}n&&ex&&_forceRemove(n.firstChild);let u=_createIterator(eA?t:n);for(;s=u.nextNode();)_sanitizeElements(s)||(s.content instanceof c&&_sanitizeShadowDOM(s.content),_sanitizeAttributes(s));if(eA)return t;if(eN){if(eE)for(l=et.call(n.ownerDocument);n.firstChild;)l.appendChild(n.firstChild);else l=n;return(em.shadowroot||em.shadowrootmode)&&(l=en.call(r,l,!0)),l}let m=ek?n.outerHTML:n.innerHTML;return ek&&eg["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&k(q,n.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+m),eL&&(m=y(m,er," "),m=y(m,es," "),m=y(m,ea," ")),e&&eI?e.createHTML(m):m},DOMPurify.setConfig=function(e){_parseConfig(e),eD=!0},DOMPurify.clearConfig=function(){eZ=null,eD=!1},DOMPurify.isValidAttribute=function(e,t,n){eZ||_parseConfig({});let o=i(e),r=i(t);return _isValidAttribute(o,r,n)},DOMPurify.addHook=function(e,t){"function"==typeof t&&(eo[e]=eo[e]||[],v(eo[e],t))},DOMPurify.removeHook=function(e){if(eo[e])return _(eo[e])},DOMPurify.removeHooks=function(e){eo[e]&&(eo[e]=[])},DOMPurify.removeAllHooks=function(){eo={}},DOMPurify}var Q=createDOMPurify();Q.version,Q.isSupported;let Z=Q.sanitize;Q.setConfig,Q.clearConfig,Q.isValidAttribute;let Y=Q.addHook,J=Q.removeHook;Q.removeHooks,Q.removeAllHooks},53426:function(e,t,i){"use strict";i.d(t,{Y:function(){return DomEmitter}});var n=i(57605);let DomEmitter=class DomEmitter{get event(){return this.emitter.event}constructor(e,t,i){let fn=e=>this.emitter.fire(e);this.emitter=new n.Q5({onWillAddFirstListener:()=>e.addEventListener(t,fn,i),onDidRemoveLastListener:()=>e.removeEventListener(t,fn,i)})}dispose(){this.emitter.dispose()}}},8063:function(e,t,i){"use strict";i.d(t,{X:function(){return createFastDomNode},Z:function(){return FastDomNode}});let FastDomNode=class FastDomNode{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=numberAsPixels(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=numberAsPixels(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=numberAsPixels(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=numberAsPixels(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=numberAsPixels(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=numberAsPixels(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=numberAsPixels(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){let t=numberAsPixels(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=numberAsPixels(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=numberAsPixels(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=numberAsPixels(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function numberAsPixels(e){return"number"==typeof e?`${e}px`:e}function createFastDomNode(e){return new FastDomNode(e)}},60930:function(e,t,i){"use strict";i.d(t,{BO:function(){return renderFormattedText},IY:function(){return renderText},az:function(){return createElement}});var n=i(70687);function renderText(e,t={}){let i=createElement(t);return i.textContent=e,i}function renderFormattedText(e,t={}){let i=createElement(t);return _renderFormattedText(i,parseFormattedText(e,!!t.renderCodeSegments),t.actionHandler,t.renderCodeSegments),i}function createElement(e){let t=e.inline?"span":"div",i=document.createElement(t);return e.className&&(i.className=e.className),i}let StringStream=class StringStream{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function _renderFormattedText(e,t,i,o){let r;if(2===t.type)r=document.createTextNode(t.content||"");else if(3===t.type)r=document.createElement("b");else if(4===t.type)r=document.createElement("i");else if(7===t.type&&o)r=document.createElement("code");else if(5===t.type&&i){let e=document.createElement("a");i.disposables.add(n.mu(e,"click",e=>{i.callback(String(t.index),e)})),r=e}else 8===t.type?r=document.createElement("br"):1===t.type&&(r=e);r&&e!==r&&e.appendChild(r),r&&Array.isArray(t.children)&&t.children.forEach(e=>{_renderFormattedText(r,e,i,o)})}function parseFormattedText(e,t){let i={type:1,children:[]},n=0,o=i,r=[],s=new StringStream(e);for(;!s.eos();){let e=s.next(),i="\\"===e&&0!==formatTagType(s.peek(),t);if(i&&(e=s.next()),!i&&isFormatTag(e,t)&&e===s.peek()){s.advance(),2===o.type&&(o=r.pop());let i=formatTagType(e,t);if(o.type===i||5===o.type&&6===i)o=r.pop();else{let e={type:i,children:[]};5===i&&(e.index=n,n++),o.children.push(e),r.push(o),o=e}}else if("\n"===e)2===o.type&&(o=r.pop()),o.children.push({type:8});else if(2!==o.type){let t={type:2,content:e};o.children.push(t),r.push(o),o=t}else o.content+=e}return 2===o.type&&(o=r.pop()),r.length,i}function isFormatTag(e,t){return 0!==formatTagType(e,t)}function formatTagType(e,t){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return t?7:0;default:return 0}}},14046:function(e,t,i){"use strict";i.d(t,{C:function(){return GlobalPointerMoveMonitor}});var n=i(70687),o=i(87932);let GlobalPointerMoveMonitor=class GlobalPointerMoveMonitor{constructor(){this._hooks=new o.SL,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,r,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=s;let l=e;try{e.setPointerCapture(t),this._hooks.add((0,o.OF)(()=>{try{e.releasePointerCapture(t)}catch(e){}}))}catch(t){l=n.Jj(e)}this._hooks.add(n.nm(l,n.tw.POINTER_MOVE,e=>{if(e.buttons!==i){this.stopMonitoring(!0);return}e.preventDefault(),this._pointerMoveCallback(e)})),this._hooks.add(n.nm(l,n.tw.POINTER_UP,e=>this.stopMonitoring(!0)))}}},58731:function(e,t,i){"use strict";i.d(t,{y:function(){return StandardKeyboardEvent}});var n=i(1215),o=i(27082),r=i(32155),s=i(88059);function extractKeyCode(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return o.kL.fromString(t)}let t=e.keyCode;if(3===t)return 7;if(n.vU)switch(t){case 59:return 85;case 60:if(s.IJ)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(s.dz)return 57}else if(n.Pf&&(s.dz&&93===t||!s.dz&&92===t))return 57;return o.H_[t]||0}let l=s.dz?256:2048,d=s.dz?2048:256;let StandardKeyboardEvent=class StandardKeyboardEvent{constructor(e){this._standardKeyboardEventBrand=!0,this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState("AltGraph"),this.keyCode=extractKeyCode(e),this.code=e.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=l),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=d),t|=e}_computeKeyCodeChord(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new r.$M(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}},7519:function(e,t,i){"use strict";i.d(t,{ap:function(){return renderMarkdown},et:function(){return renderStringAsPlaintext}});var n=i(70687),o=i(20532),r=i(53426),s=i(60930),l=i(58731),d=i(31498),c=i(45776),u=i(17861),g=i(57605),m=i(72914),f=i(42385),_=i(79614),v=i(10612),C=i(87932);let b={};!function(){var e;function define(e,t){t(b)}define.amd=!0,e=this,function(e){function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function _createForOfIteratorHelperLoose(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function changeDefaults(t){e.defaults=t}e.defaults=getDefaults();var t=/[&<>"']/,i=/[&<>"']/g,n=/[<>"']|&(?!#?\w+;)/,o=/[<>"']|&(?!#?\w+;)/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=function(e){return r[e]};function escape(e,r){if(r){if(t.test(e))return e.replace(i,getEscapeReplacement)}else if(n.test(e))return e.replace(o,getEscapeReplacement);return e}var s=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape(e){return e.replace(s,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var l=/(^|[^\[])\^/g;function edit(e,t){e="string"==typeof e?e:e.source,t=t||"";var i={replace:function(t,n){return n=(n=n.source||n).replace(l,"$1"),e=e.replace(t,n),i},getRegex:function(){return new RegExp(e,t)}};return i}var d=/[^\w:]/g,c=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,t,i){if(e){var n;try{n=decodeURIComponent(unescape(i)).replace(d,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!c.test(i)&&(i=resolveUrl(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(e){return null}return i}var u={},g=/^[^:]+:\/*[^/]*$/,m=/^([^:]+:)[\s\S]*$/,f=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,t){u[" "+e]||(g.test(e)?u[" "+e]=e+"/":u[" "+e]=rtrim(e,"/",!0));var i=-1===(e=u[" "+e]).indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(m,"$1")+t:"/"!==t.charAt(0)?e+t:i?t:e.replace(f,"$1")+t}var _={exec:function(){}};function merge(e){for(var t,i,n=1;n<arguments.length;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function splitCells(e,t){var i=e.replace(/\|/g,function(e,t,i){for(var n=!1,o=t;--o>=0&&"\\"===i[o];)n=!n;return n?"|":" |"}).split(/ \|/),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function rtrim(e,t,i){var n=e.length;if(0===n)return"";for(var o=0;o<n;){var r=e.charAt(n-o-1);if(r!==t||i){if(r!==t&&i)o++;else break}else o++}return e.slice(0,n-o)}function findClosingBracket(e,t){if(-1===e.indexOf(t[1]))return -1;for(var i=e.length,n=0,o=0;o<i;o++)if("\\"===e[o])o++;else if(e[o]===t[0])n++;else if(e[o]===t[1]&&--n<0)return o;return -1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(e,t){if(t<1)return"";for(var i="";t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}function outputLink(e,t,i,n){var o=t.href,r=t.title?escape(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;var l={type:"link",raw:i,href:o,title:r,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}return{type:"image",raw:i,href:o,title:r,text:escape(s)}}function indentCodeCompensation(e,t){var i=e.match(/^(\s+)(?:```)/);if(null===i)return t;var n=i[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e}).join("\n")}var v=function(){function Tokenizer(t){this.options=t||e.defaults}var t=Tokenizer.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:rtrim(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var i=t[0],n=indentCodeCompensation(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:n}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var i=t[2].trim();if(/#$/.test(i)){var n=rtrim(i,"#");this.options.pedantic?i=n.trim():(!n||/ $/.test(n))&&(i=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var i=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var i,n,o,r,s,l,d,c,u,g,m,f,_=t[1].trim(),v=_.length>1,C={type:"list",raw:"",ordered:v,start:v?+_.slice(0,-1):"",loose:!1,items:[]};_=v?"\\d{1,9}\\"+_.slice(-1):"\\"+_,this.options.pedantic&&(_=v?_:"[*+-]");for(var b=RegExp("^( {0,3}"+_+")((?:[	 ][^\\n]*)?(?:\\n|$))");e&&(f=!1,!(!(t=b.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),c=t[2].split("\n",1)[0],u=e.split("\n",1)[0],this.options.pedantic?(r=2,m=c.trimLeft()):(r=(r=t[2].search(/[^ ]/))>4?1:r,m=c.slice(r),r+=t[1].length),l=!1,!c&&/^ *$/.test(u)&&(i+=u+"\n",e=e.substring(u.length+1),f=!0),!f)for(var S=RegExp("^ {0,"+Math.min(3,r-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),y=RegExp("^ {0,"+Math.min(3,r-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),w=RegExp("^ {0,"+Math.min(3,r-1)+"}(?:```|~~~)"),L=RegExp("^ {0,"+Math.min(3,r-1)+"}#");e&&(c=g=e.split("\n",1)[0],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(w.test(c)||L.test(c)||S.test(c)||y.test(e)));){if(c.search(/[^ ]/)>=r||!c.trim())m+="\n"+c.slice(r);else if(l)break;else m+="\n"+c;l||c.trim()||(l=!0),i+=g+"\n",e=e.substring(g.length+1)}!C.loose&&(d?C.loose=!0:/\n *\n *$/.test(i)&&(d=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(m))&&(o="[ ] "!==n[0],m=m.replace(/^\[[ xX]\] +/,"")),C.items.push({type:"list_item",raw:i,task:!!n,checked:o,loose:!1,text:m}),C.raw+=i}C.items[C.items.length-1].raw=i.trimRight(),C.items[C.items.length-1].text=m.trimRight(),C.raw=C.raw.trimRight();var k=C.items.length;for(s=0;s<k;s++){this.lexer.state.top=!1,C.items[s].tokens=this.lexer.blockTokens(C.items[s].text,[]);var D=C.items[s].tokens.filter(function(e){return"space"===e.type}),x=D.every(function(e){for(var t,i=e.raw.split(""),n=0,o=_createForOfIteratorHelperLoose(i);!(t=o()).done;)if("\n"===t.value&&(n+=1),n>1)return!0;return!1});!C.loose&&D.length&&x&&(C.loose=!0,C.items[s].loose=!0)}return C}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t){var i={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var n=this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]);i.type="paragraph",i.text=n,i.tokens=this.lexer.inline(n)}return i}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var i={type:"table",header:splitCells(t[1]).map(function(e){return{text:e}}),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];var n,o,r,s,l=i.align.length;for(n=0;n<l;n++)/^ *-+: *$/.test(i.align[n])?i.align[n]="right":/^ *:-+: *$/.test(i.align[n])?i.align[n]="center":/^ *:-+ *$/.test(i.align[n])?i.align[n]="left":i.align[n]=null;for(n=0,l=i.rows.length;n<l;n++)i.rows[n]=splitCells(i.rows[n],i.header.length).map(function(e){return{text:e}});for(o=0,l=i.header.length;o<l;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(o=0,l=i.rows.length;o<l;o++)for(r=0,s=i.rows[o];r<s.length;r++)s[r].tokens=this.lexer.inline(s[r].text);return i}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:escape(t[1])}},t.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]):t[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;var n=rtrim(i.slice(0,-1),"\\");if((i.length-n.length)%2==0)return}else{var o=findClosingBracket(t[2],"()");if(o>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,r).trim(),t[3]=""}}var s=t[2],l="";if(this.options.pedantic){var d=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);d&&(s=d[1],l=d[3])}else l=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(i)?s.slice(1):s.slice(1,-1)),outputLink(t,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:l?l.replace(this.rules.inline._escapes,"$1"):l},t[0],this.lexer)}},t.reflink=function(e,t){var i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){var n=(i[2]||i[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])||!n.href){var o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return outputLink(i,n,i[0],this.lexer)}},t.emStrong=function(e,t,i){void 0===i&&(i="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&!(n[3]&&i.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var o=n[1]||n[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){var r,s,l=n[0].length-1,d=l,c=0,u="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+l);null!=(n=u.exec(t));)if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6]){if(s=r.length,n[3]||n[4]){d+=s;continue}if((n[5]||n[6])&&l%3&&!((l+s)%3)){c+=s;continue}if(!((d-=s)>0)){if(Math.min(l,s=Math.min(s,s+d+c))%2){var g=e.slice(1,l+n.index+s);return{type:"em",raw:e.slice(0,l+n.index+s+1),text:g,tokens:this.lexer.inlineTokens(g)}}var m=e.slice(2,l+n.index+s-1);return{type:"strong",raw:e.slice(0,l+n.index+s+1),text:m,tokens:this.lexer.inlineTokens(m)}}}}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var i=t[2].replace(/\n/g," "),n=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return n&&o&&(i=i.substring(1,i.length-1)),i=escape(i,!0),{type:"codespan",raw:t[0],text:i}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}},t.autolink=function(e,t){var i,n,o=this.rules.inline.autolink.exec(e);if(o)return n="@"===o[2]?"mailto:"+(i=escape(this.options.mangle?t(o[1]):o[1])):i=escape(o[1]),{type:"link",raw:o[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}},t.url=function(e,t){var i,n,o,r;if(i=this.rules.inline.url.exec(e)){if("@"===i[2])o="mailto:"+(n=escape(this.options.mangle?t(i[0]):i[0]));else{do r=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(r!==i[0]);n=escape(i[0]),o="www."===i[1]?"http://"+n:n}return{type:"link",raw:i[0],text:n,href:o,tokens:[{type:"text",raw:n,text:n}]}}},t.inlineText=function(e,t){var i,n=this.rules.inline.text.exec(e);if(n)return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape(n[0]):n[0]:escape(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:i}},Tokenizer}(),C={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:_,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};C._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,C._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,C.def=edit(C.def).replace("label",C._label).replace("title",C._title).getRegex(),C.bullet=/(?:[*+-]|\d{1,9}[.)])/,C.listItemStart=edit(/^( *)(bull) */).replace("bull",C.bullet).getRegex(),C.list=edit(C.list).replace(/bull/g,C.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+C.def.source+")").getRegex(),C._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",C._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,C.html=edit(C.html,"i").replace("comment",C._comment).replace("tag",C._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),C.paragraph=edit(C._paragraph).replace("hr",C.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C._tag).getRegex(),C.blockquote=edit(C.blockquote).replace("paragraph",C.paragraph).getRegex(),C.normal=merge({},C),C.gfm=merge({},C.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),C.gfm.table=edit(C.gfm.table).replace("hr",C.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C._tag).getRegex(),C.gfm.paragraph=edit(C._paragraph).replace("hr",C.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",C.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C._tag).getRegex(),C.pedantic=merge({},C.normal,{html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",C._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_,paragraph:edit(C.normal._paragraph).replace("hr",C.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",C.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var b={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:_,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function smartypants(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(e){var t,i,n="",o=e.length;for(t=0;t<o;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}b._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",b.punctuation=edit(b.punctuation).replace(/punctuation/g,b._punctuation).getRegex(),b.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,b.escapedEmSt=/\\\*|\\_/g,b._comment=edit(C._comment).replace("(?:-->|$)","-->").getRegex(),b.emStrong.lDelim=edit(b.emStrong.lDelim).replace(/punct/g,b._punctuation).getRegex(),b.emStrong.rDelimAst=edit(b.emStrong.rDelimAst,"g").replace(/punct/g,b._punctuation).getRegex(),b.emStrong.rDelimUnd=edit(b.emStrong.rDelimUnd,"g").replace(/punct/g,b._punctuation).getRegex(),b._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,b._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,b._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,b.autolink=edit(b.autolink).replace("scheme",b._scheme).replace("email",b._email).getRegex(),b._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,b.tag=edit(b.tag).replace("comment",b._comment).replace("attribute",b._attribute).getRegex(),b._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,b._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,b._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,b.link=edit(b.link).replace("label",b._label).replace("href",b._href).replace("title",b._title).getRegex(),b.reflink=edit(b.reflink).replace("label",b._label).replace("ref",C._label).getRegex(),b.nolink=edit(b.nolink).replace("ref",C._label).getRegex(),b.reflinkSearch=edit(b.reflinkSearch,"g").replace("reflink",b.reflink).replace("nolink",b.nolink).getRegex(),b.normal=merge({},b),b.pedantic=merge({},b.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",b._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b._label).getRegex()}),b.gfm=merge({},b.normal,{escape:edit(b.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),b.gfm.url=edit(b.gfm.url,"i").replace("email",b.gfm._extended_email).getRegex(),b.breaks=merge({},b.gfm,{br:edit(b.br).replace("{2,}","*").getRegex(),text:edit(b.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var S=function(){function Lexer(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new v,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:C.normal,inline:b.normal};this.options.pedantic?(i.block=C.pedantic,i.inline=b.pedantic):this.options.gfm&&(i.block=C.gfm,this.options.breaks?i.inline=b.breaks:i.inline=b.gfm),this.tokenizer.rules=i}Lexer.lex=function(e,t){return new Lexer(t).lex(e)},Lexer.lexInline=function(e,t){return new Lexer(t).inlineTokens(e)};var t=Lexer.prototype;return t.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},t.blockTokens=function(e,t){var i,n,o,r,s=this;for(void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,function(e,t,i){return t+"    ".repeat(i.length)});e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(n){return!!(i=n.call({lexer:s},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),(n=t[t.length-1])&&("paragraph"===n.type||"text"===n.type)?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);continue}if((i=this.tokenizer.fences(e))||(i=this.tokenizer.heading(e))||(i=this.tokenizer.hr(e))||(i=this.tokenizer.blockquote(e))||(i=this.tokenizer.list(e))||(i=this.tokenizer.html(e))){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),(n=t[t.length-1])&&("paragraph"===n.type||"text"===n.type)?(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if((i=this.tokenizer.table(e))||(i=this.tokenizer.lheading(e))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,i=e.slice(1),n=void 0;s.options.extensions.startBlock.forEach(function(e){"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(t=Math.min(t,n))}),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),this.state.top&&(i=this.tokenizer.paragraph(o))){n=t[t.length-1],r&&"paragraph"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),r=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);continue}if(e){var l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}throw Error(l)}}return this.state.top=!0,t},t.inline=function(e,t){return void 0===t&&(t=[]),this.inlineQueue.push({src:e,tokens:t}),t},t.inlineTokens=function(e,t){var i,n,o,r,s,l,d=this;void 0===t&&(t=[]);var c=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(c));)u.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,r.index)+"["+repeatString("a",r[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,r.index)+"["+repeatString("a",r[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,r.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(l=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(n){return!!(i=n.call({lexer:d},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if((i=this.tokenizer.emStrong(e,c,l))||(i=this.tokenizer.codespan(e))||(i=this.tokenizer.br(e))||(i=this.tokenizer.del(e))||(i=this.tokenizer.autolink(e,mangle))||!this.state.inLink&&(i=this.tokenizer.url(e,mangle))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,i=e.slice(1),n=void 0;d.options.extensions.startInline.forEach(function(e){"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(t=Math.min(t,n))}),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),i=this.tokenizer.inlineText(o,smartypants)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),s=!0,(n=t[t.length-1])&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(e){var g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}throw Error(g)}}return t},_createClass(Lexer,null,[{key:"rules",get:function(){return{block:C,inline:b}}}]),Lexer}(),y=function(){function Renderer(t){this.options=t||e.defaults}var t=Renderer.prototype;return t.code=function(e,t,i){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,n);null!=o&&o!==e&&(i=!0,e=o)}return(e=e.replace(/\n$/,"")+"\n",n)?'<pre><code class="'+this.options.langPrefix+escape(n,!0)+'">'+(i?e:escape(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:escape(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+(this.options.headerPrefix+n.slug(i))+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,i){var n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,i){if(null===(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<a href="'+escape(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>"},t.image=function(e,t,i){if(null===(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},t.text=function(e){return e},Renderer}(),w=function(){function TextRenderer(){}var e=TextRenderer.prototype;return e.strong=function(e){return e},e.em=function(e){return e},e.codespan=function(e){return e},e.del=function(e){return e},e.html=function(e){return e},e.text=function(e){return e},e.link=function(e,t,i){return""+i},e.image=function(e,t,i){return""+i},e.br=function(){return""},TextRenderer}(),L=function(){function Slugger(){this.seen={}}var e=Slugger.prototype;return e.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function(e,t){var i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do i=e+"-"+ ++n;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i},e.slug=function(e,t){void 0===t&&(t={});var i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)},Slugger}(),k=function(){function Parser(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new y,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new w,this.slugger=new L}Parser.parse=function(e,t){return new Parser(t).parse(e)},Parser.parseInline=function(e,t){return new Parser(t).parseInline(e)};var t=Parser.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var i,n,o,r,s,l,d,c,u,g,m,f,_,v,C,b,S,y,w,L="",k=e.length;for(i=0;i<k;i++){if(g=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(!1!==(w=this.options.extensions.renderers[g.type].call({parser:this},g))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type))){L+=w||"";continue}switch(g.type){case"space":continue;case"hr":L+=this.renderer.hr();continue;case"heading":L+=this.renderer.heading(this.parseInline(g.tokens),g.depth,unescape(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue;case"code":L+=this.renderer.code(g.text,g.lang,g.escaped);continue;case"table":for(n=0,c="",d="",r=g.header.length;n<r;n++)d+=this.renderer.tablecell(this.parseInline(g.header[n].tokens),{header:!0,align:g.align[n]});for(c+=this.renderer.tablerow(d),u="",r=g.rows.length,n=0;n<r;n++){for(o=0,l=g.rows[n],d="",s=l.length;o<s;o++)d+=this.renderer.tablecell(this.parseInline(l[o].tokens),{header:!1,align:g.align[o]});u+=this.renderer.tablerow(d)}L+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(g.tokens),L+=this.renderer.blockquote(u);continue;case"list":for(n=0,m=g.ordered,f=g.start,_=g.loose,r=g.items.length,u="";n<r;n++)b=(C=g.items[n]).checked,S=C.task,v="",C.task&&(y=this.renderer.checkbox(b),_?C.tokens.length>0&&"paragraph"===C.tokens[0].type?(C.tokens[0].text=y+" "+C.tokens[0].text,C.tokens[0].tokens&&C.tokens[0].tokens.length>0&&"text"===C.tokens[0].tokens[0].type&&(C.tokens[0].tokens[0].text=y+" "+C.tokens[0].tokens[0].text)):C.tokens.unshift({type:"text",text:y}):v+=y),v+=this.parse(C.tokens,_),u+=this.renderer.listitem(v,S,b);L+=this.renderer.list(u,m,f);continue;case"html":L+=this.renderer.html(g.text);continue;case"paragraph":L+=this.renderer.paragraph(this.parseInline(g.tokens));continue;case"text":for(u=g.tokens?this.parseInline(g.tokens):g.text;i+1<k&&"text"===e[i+1].type;)u+="\n"+((g=e[++i]).tokens?this.parseInline(g.tokens):g.text);L+=t?this.renderer.paragraph(u):u;continue;default:var D='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(D);return}throw Error(D)}}return L},t.parseInline=function(e,t){t=t||this.renderer;var i,n,o,r="",s=e.length;for(i=0;i<s;i++){if(n=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(!1!==(o=this.options.extensions.renderers[n.type].call({parser:this},n))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))){r+=o||"";continue}switch(n.type){case"escape":case"text":r+=t.text(n.text);break;case"html":r+=t.html(n.text);break;case"link":r+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":r+=t.image(n.href,n.title,n.text);break;case"strong":r+=t.strong(this.parseInline(n.tokens,t));break;case"em":r+=t.em(this.parseInline(n.tokens,t));break;case"codespan":r+=t.codespan(n.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(n.tokens,t));break;default:var l='Token with "'+n.type+'" type was not found.';if(this.options.silent){console.error(l);return}throw Error(l)}}return r},Parser}();function marked(e,t,i){if(null==e)throw Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(i=t,t=null),checkSanitizeDeprecation(t=merge({},marked.defaults,t||{})),i){var n,o=t.highlight;try{n=S.lex(e,t)}catch(e){return i(e)}var done=function(e){var r;if(!e)try{t.walkTokens&&marked.walkTokens(n,t.walkTokens),r=k.parse(n,t)}catch(t){e=t}return t.highlight=o,e?i(e):i(null,r)};if(!o||o.length<3||(delete t.highlight,!n.length))return done();var r=0;return marked.walkTokens(n,function(e){"code"===e.type&&(r++,setTimeout(function(){o(e.text,e.lang,function(t,i){if(t)return done(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),0==--r&&done()})},0))}),void(0===r&&done())}function onError(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+escape(e.message+"",!0)+"</pre>";throw e}try{var s=S.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(marked.walkTokens(s,t.walkTokens)).then(function(){return k.parse(s,t)}).catch(onError);marked.walkTokens(s,t.walkTokens)}return k.parse(s,t)}catch(e){onError(e)}}marked.options=marked.setOptions=function(e){return merge(marked.defaults,e),changeDefaults(marked.defaults),marked},marked.getDefaults=getDefaults,marked.defaults=e.defaults,marked.use=function(){for(var e,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var o=merge.apply(void 0,[{}].concat(i)),r=marked.defaults.extensions||{renderers:{},childTokens:{}};i.forEach(function(t){if(t.extensions&&(e=!0,t.extensions.forEach(function(e){if(!e.name)throw Error("extension name required");if(e.renderer){var t=r.renderers?r.renderers[e.name]:null;t?r.renderers[e.name]=function(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];var r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:r.renderers[e.name]=e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");r[e.level]?r[e.level].unshift(e.tokenizer):r[e.level]=[e.tokenizer],e.start&&("block"===e.level?r.startBlock?r.startBlock.push(e.start):r.startBlock=[e.start]:"inline"===e.level&&(r.startInline?r.startInline.push(e.start):r.startInline=[e.start]))}e.childTokens&&(r.childTokens[e.name]=e.childTokens)})),t.renderer&&function(){var e=marked.defaults.renderer||new y,_loop=function(i){var n=e[i];e[i]=function(){for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];var l=t.renderer[i].apply(e,r);return!1===l&&(l=n.apply(e,r)),l}};for(var i in t.renderer)_loop(i);o.renderer=e}(),t.tokenizer&&function(){var e=marked.defaults.tokenizer||new v,_loop2=function(i){var n=e[i];e[i]=function(){for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];var l=t.tokenizer[i].apply(e,r);return!1===l&&(l=n.apply(e,r)),l}};for(var i in t.tokenizer)_loop2(i);o.tokenizer=e}(),t.walkTokens){var i=marked.defaults.walkTokens;o.walkTokens=function(e){var n=[];return n.push(t.walkTokens.call(this,e)),i&&(n=n.concat(i.call(this,e))),n}}e&&(o.extensions=r),marked.setOptions(o)})},marked.walkTokens=function(e,t){for(var i,n=[],o=_createForOfIteratorHelperLoose(e);!(i=o()).done;)!function(){var e=i.value;switch(n=n.concat(t.call(marked,e)),e.type){case"table":for(var o,r=_createForOfIteratorHelperLoose(e.header);!(o=r()).done;){var s=o.value;n=n.concat(marked.walkTokens(s.tokens,t))}for(var l,d=_createForOfIteratorHelperLoose(e.rows);!(l=d()).done;)for(var c,u=l.value,g=_createForOfIteratorHelperLoose(u);!(c=g()).done;){var m=c.value;n=n.concat(marked.walkTokens(m.tokens,t))}break;case"list":n=n.concat(marked.walkTokens(e.items,t));break;default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[e.type]?marked.defaults.extensions.childTokens[e.type].forEach(function(i){n=n.concat(marked.walkTokens(e[i],t))}):e.tokens&&(n=n.concat(marked.walkTokens(e.tokens,t)))}}();return n},marked.parseInline=function(e,t){if(null==e)throw Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");checkSanitizeDeprecation(t=merge({},marked.defaults,t||{}));try{var i=S.lexInline(e,t);return t.walkTokens&&marked.walkTokens(i,t.walkTokens),k.parseInline(i,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+escape(e.message+"",!0)+"</pre>";throw e}},marked.Parser=k,marked.parser=k.parse,marked.Renderer=y,marked.TextRenderer=w,marked.Lexer=S,marked.lexer=S.lex,marked.Tokenizer=v,marked.Slugger=L,marked.parse=marked;var D=marked.options,x=marked.setOptions,N=marked.use,E=marked.walkTokens,I=marked.parseInline,T=marked,M=k.parse,R=S.lex;e.Lexer=S,e.Parser=k,e.Renderer=y,e.Slugger=L,e.TextRenderer=w,e.Tokenizer=v,e.getDefaults=getDefaults,e.lexer=R,e.marked=marked,e.options=D,e.parse=T,e.parseInline=I,e.parser=M,e.setOptions=x,e.use=N,e.walkTokens=E,Object.defineProperty(e,"__esModule",{value:!0})}(define.amd?b:"object"==typeof exports?exports:(e="undefined"!=typeof globalThis?globalThis:e||self).marked={})}(),b.Lexer||exports.Lexer,b.Parser||exports.Parser,b.Renderer||exports.Renderer,b.Slugger||exports.Slugger,b.TextRenderer||exports.TextRenderer,b.Tokenizer||exports.Tokenizer,b.getDefaults||exports.getDefaults,b.lexer||exports.lexer;var S=b.marked||exports.marked;b.options||exports.options,b.parse||exports.parse,b.parseInline||exports.parseInline,b.parser||exports.parser,b.setOptions||exports.setOptions,b.use||exports.use,b.walkTokens||exports.walkTokens;var y=i(42443),w=i(95998),L=i(56660),k=i(67590),D=i(45837),x=i(31568);let N=Object.freeze({image:(e,t,i)=>{let n=[],o=[];return e&&({href:e,dimensions:n}=(0,m.v1)(e),o.push(`src="${(0,m.d9)(e)}"`)),i&&o.push(`alt="${(0,m.d9)(i)}"`),t&&o.push(`title="${(0,m.d9)(t)}"`),n.length&&(o=o.concat(n)),"<img "+o.join(" ")+">"},paragraph:e=>`<p>${e}</p>`,link:(e,t,i)=>"string"!=typeof e?"":(e===i&&(i=(0,m.oR)(i)),t="string"==typeof t?(0,m.d9)((0,m.oR)(t)):"",e=(e=(0,m.oR)(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${e}" title="${t||e}" draggable="false">${i}</a>`)});function renderMarkdown(e,t={},i={}){var o,m;let v;let b=new C.SL,k=!1,E=(0,s.az)(t),_uriMassage=function(t){let i;try{i=(0,y.Qc)(decodeURIComponent(t))}catch(e){}return i?encodeURIComponent(JSON.stringify(i=(0,L.rs)(i,t=>e.uris&&e.uris[t]?x.o.revive(e.uris[t]):void 0))):t},_href=function(t,i){let n=e.uris&&e.uris[t],o=x.o.revive(n);return i?t.startsWith(w.lg.data+":")?t:(o||(o=x.o.parse(t)),w.Gi.uriToBrowserUri(o).toString(!0)):o&&x.o.parse(t).toString()!==o.toString()?(o.query&&(o=o.with({query:_uriMassage(o.query)})),o.toString()):t},I=new S.Renderer;I.image=N.image,I.link=N.link,I.paragraph=N.paragraph;let T=[],M=[];if(t.codeBlockRendererSync?I.code=(e,i)=>{let n=_.a.nextId(),o=t.codeBlockRendererSync(postProcessCodeBlockLanguageId(i),e);return M.push([n,o]),`<div class="code" data-code="${n}">${(0,D.YU)(e)}</div>`}:t.codeBlockRenderer&&(I.code=(e,i)=>{let n=_.a.nextId(),o=t.codeBlockRenderer(postProcessCodeBlockLanguageId(i),e);return T.push(o.then(e=>[n,e])),`<div class="code" data-code="${n}">${(0,D.YU)(e)}</div>`}),t.actionHandler){let _activateLink=function(i){let n=i.target;if("A"===n.tagName||(n=n.parentElement)&&"A"===n.tagName)try{let o=n.dataset.href;o&&(e.baseUri&&(o=resolveWithBaseUri(x.o.from(e.baseUri),o)),t.actionHandler.callback(o,i))}catch(e){(0,u.dL)(e)}finally{i.preventDefault()}},i=t.actionHandler.disposables.add(new r.Y(E,"click")),o=t.actionHandler.disposables.add(new r.Y(E,"auxclick"));t.actionHandler.disposables.add(g.ju.any(i.event,o.event)(e=>{let t=new d.n(n.Jj(E),e);(t.leftButton||t.middleButton)&&_activateLink(t)})),t.actionHandler.disposables.add(n.nm(E,"keydown",e=>{let t=new l.y(e);(t.equals(10)||t.equals(3))&&_activateLink(t)}))}e.supportHtml||(i.sanitizer=t=>{let i=e.isTrusted?t.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0;return i?t:""},i.sanitize=!0,i.silent=!0),i.renderer=I;let R=null!==(o=e.value)&&void 0!==o?o:"";if(R.length>1e5&&(R=`${R.substr(0,1e5)}…`),e.supportThemeIcons&&(R=(0,f.f$)(R)),t.fillInIncompleteTokens){let e={...S.defaults,...i},t=S.lexer(R,e),n=fillInIncompleteTokens(t);v=S.parser(n,e)}else v=S.parse(R,i);if(e.supportThemeIcons){let e=(0,c.T)(v);v=e.map(e=>"string"==typeof e?e:e.outerHTML).join("")}let A=new DOMParser,P=A.parseFromString(sanitizeRenderedMarkdown(e,v),"text/html");if(P.body.querySelectorAll("img").forEach(t=>{let i=t.getAttribute("src");if(i){let n=i;try{e.baseUri&&(n=resolveWithBaseUri(x.o.from(e.baseUri),n))}catch(e){}t.src=_href(n,!0)}}),P.body.querySelectorAll("a").forEach(t=>{let i=t.getAttribute("href");if(t.setAttribute("href",""),!i||/^data:|javascript:/i.test(i)||/^command:/i.test(i)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(i))t.replaceWith(...t.childNodes);else{let n=_href(i,!1);e.baseUri&&(n=resolveWithBaseUri(x.o.from(e.baseUri),i)),t.dataset.href=n}}),E.innerHTML=sanitizeRenderedMarkdown(e,P.body.innerHTML),T.length>0)Promise.all(T).then(e=>{var i,o;if(k)return;let r=new Map(e),s=E.querySelectorAll("div[data-code]");for(let e of s){let t=r.get(null!==(i=e.dataset.code)&&void 0!==i?i:"");t&&n.mc(e,t)}null===(o=t.asyncRenderCallback)||void 0===o||o.call(t)});else if(M.length>0){let e=new Map(M),t=E.querySelectorAll("div[data-code]");for(let i of t){let t=e.get(null!==(m=i.dataset.code)&&void 0!==m?m:"");t&&n.mc(i,t)}}if(t.asyncRenderCallback)for(let e of E.getElementsByTagName("img")){let i=b.add(n.nm(e,"load",()=>{i.dispose(),t.asyncRenderCallback()}))}return{element:E,dispose:()=>{k=!0,b.dispose()}}}function postProcessCodeBlockLanguageId(e){if(!e)return"";let t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function resolveWithBaseUri(e,t){let i=/^\w[\w\d+.-]*:/.test(t);return i?t:e.path.endsWith("/")?(0,k.i3)(e,t).toString():(0,k.i3)((0,k.XX)(e),t).toString()}function sanitizeRenderedMarkdown(e,t){let{config:i,allowedSchemes:r}=getSanitizerOptions(e);o.v5("uponSanitizeAttribute",(e,t)=>{var i;if("style"===t.attrName||"class"===t.attrName){if("SPAN"===e.tagName){if("style"===t.attrName){t.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(t.attrValue);return}if("class"===t.attrName){t.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue);return}}t.keepAttr=!1;return}if("INPUT"===e.tagName&&(null===(i=e.attributes.getNamedItem("type"))||void 0===i?void 0:i.value)==="checkbox"){if("type"===t.attrName&&"checkbox"===t.attrValue||"disabled"===t.attrName||"checked"===t.attrName){t.keepAttr=!0;return}t.keepAttr=!1}}),o.v5("uponSanitizeElement",(e,t)=>{var i,n;"input"===t.tagName&&((null===(i=e.attributes.getNamedItem("type"))||void 0===i?void 0:i.value)==="checkbox"?e.setAttribute("disabled",""):null===(n=e.parentElement)||void 0===n||n.removeChild(e))});let s=n._F(r);try{return o.Nw(t,{...i,RETURN_TRUSTED_TYPE:!0})}finally{o.ok("uponSanitizeAttribute"),s.dispose()}}let E=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function getSanitizerOptions(e){let t=[w.lg.http,w.lg.https,w.lg.mailto,w.lg.data,w.lg.file,w.lg.vscodeFileResource,w.lg.vscodeRemote,w.lg.vscodeRemoteResource];return e.isTrusted&&t.push(w.lg.command),{config:{ALLOWED_TAGS:[...n.sQ],ALLOWED_ATTR:E,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:t}}function renderStringAsPlaintext(e){return"string"==typeof e?e:renderMarkdownAsPlaintext(e)}function renderMarkdownAsPlaintext(e){var t;let i=null!==(t=e.value)&&void 0!==t?t:"";i.length>1e5&&(i=`${i.substr(0,1e5)}…`);let n=S.parse(i,{renderer:T.value}).replace(/&(#\d+|[a-zA-Z]+);/g,e=>{var t;return null!==(t=I.get(e))&&void 0!==t?t:e});return sanitizeRenderedMarkdown({isTrusted:!1},n).toString()}let I=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),T=new v.o(()=>{let e=new S.Renderer;return e.code=e=>e,e.blockquote=e=>e,e.html=e=>"",e.heading=(e,t,i)=>e+"\n",e.hr=()=>"",e.list=(e,t)=>e,e.listitem=e=>e+"\n",e.paragraph=e=>e+"\n",e.table=(e,t)=>e+t+"\n",e.tablerow=e=>e,e.tablecell=(e,t)=>e+" ",e.strong=e=>e,e.em=e=>e,e.codespan=e=>e,e.br=()=>"\n",e.del=e=>e,e.image=(e,t,i)=>"",e.text=e=>e,e.link=(e,t,i)=>i,e});function mergeRawTokenText(e){let t="";return e.forEach(e=>{t+=e.raw}),t}function completeSingleLinePattern(e){var t,i;for(let n=0;n<e.tokens.length;n++){let o=e.tokens[n];if("text"===o.type){let r=o.raw.split("\n"),s=r[r.length-1];if(s.includes("`"))return completeCodespan(e);if(s.includes("**"))return completeDoublestar(e);if(s.match(/\*\w/))return completeStar(e);if(s.match(/(^|\s)__\w/))return completeDoubleUnderscore(e);else if(s.match(/(^|\s)_\w/))return completeUnderscore(e);else if(s.match(/(^|\s)\[.*\]\(\w*/)){let o=e.tokens.slice(n+1);if((null===(t=o[0])||void 0===t?void 0:t.type)==="link"&&(null===(i=o[1])||void 0===i?void 0:i.type)==="text"&&o[1].raw.match(/^ *"[^"]*$/))return completeLinkTargetArg(e);return completeWithString(e,")")}else if(hasStartOfLinkTarget(s))return completeWithString(e,")");else if(s.match(/(^|\s)\[\w/)&&!e.tokens.slice(n+1).some(e=>hasStartOfLinkTarget(e.raw)))return completeLinkText(e)}}}function hasStartOfLinkTarget(e){return!!e.match(/^[^\[]*\]\([^\)]*$/)}function fillInIncompleteTokens(e){let t,i;for(t=0;t<e.length;t++){let n;let o=e[t];if("paragraph"===o.type&&(n=o.raw.match(/(\n|^)(````*)/))){let o=n[2];i=completeCodeBlock(e.slice(t),o);break}if("paragraph"===o.type&&o.raw.match(/(\n|^)\|/)){i=completeTable(e.slice(t));break}if(t===e.length-1&&"paragraph"===o.type){let e=completeSingleLinePattern(o);if(e){i=[e];break}}}if(i){let n=[...e.slice(0,t),...i];return n.links=e.links,n}return e}function completeCodeBlock(e,t){let i=mergeRawTokenText(e);return S.lexer(i+`
${t}`)}function completeCodespan(e){return completeWithString(e,"`")}function completeStar(e){return completeWithString(e,"*")}function completeUnderscore(e){return completeWithString(e,"_")}function completeLinkTargetArg(e){return completeWithString(e,'")')}function completeLinkText(e){return completeWithString(e,"](about:blank)")}function completeDoublestar(e){return completeWithString(e,"**")}function completeDoubleUnderscore(e){return completeWithString(e,"__")}function completeWithString(e,t){let i=mergeRawTokenText(Array.isArray(e)?e:[e]);return S.lexer(i+t)[0]}function completeTable(e){let t;let i=mergeRawTokenText(e),n=i.split("\n"),o=!1;for(let e=0;e<n.length;e++){let i=n[e].trim();if(void 0===t&&i.match(/^\s*\|/)){let e=i.match(/(\|[^\|]+)(?=\||$)/g);e&&(t=e.length)}else if("number"==typeof t){if(!i.match(/^\s*\|/)||e!==n.length-1)return;o=!0}}if("number"==typeof t&&t>0){let e=o?n.slice(0,-1).join("\n"):i,r=!!e.match(/\|\s*$/),s=e+(r?"":"|")+`
|${" --- |".repeat(t)}`;return S.lexer(s)}}},31498:function(e,t,i){"use strict";i.d(t,{n:function(){return StandardMouseEvent},q:function(){return StandardWheelEvent}});var n=i(1215);let o=new WeakMap;function getParentWindowIfSameOrigin(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if("null"!==t.origin&&"null"!==i.origin&&t.origin!==i.origin)return null}catch(e){return null}return e.parent}let IframeUtils=class IframeUtils{static getSameOriginWindowChain(e){let t=o.get(e);if(!t){let i;t=[],o.set(e,t);let n=e;do(i=getParentWindowIfSameOrigin(n))?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){var i,n;if(!t||e===t)return{top:0,left:0};let o=0,r=0,s=this.getSameOriginWindowChain(e);for(let e of s){let s=e.window.deref();if(o+=null!==(i=null==s?void 0:s.scrollY)&&void 0!==i?i:0,r+=null!==(n=null==s?void 0:s.scrollX)&&void 0!==n?n:0,s===t||!e.iframeElement)break;let l=e.iframeElement.getBoundingClientRect();o+=l.top,r+=l.left}return{top:o,left:r}}};var r=i(88059);let StandardMouseEvent=class StandardMouseEvent{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"==typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let i=IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};let StandardWheelEvent=class StandardWheelEvent{constructor(e,t=0,i=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(n.i7){let e=navigator.userAgent.match(/Chrome\/(\d+)/),t=e?parseInt(e[1]):123;s=t<=122}if(e){let t=(null===(o=e.view)||void 0===o?void 0:o.devicePixelRatio)||1;void 0!==e.wheelDeltaY?s?this.deltaY=e.wheelDeltaY/(120*t):this.deltaY=e.wheelDeltaY/120:void 0!==e.VERTICAL_AXIS&&e.axis===e.VERTICAL_AXIS?this.deltaY=-e.detail/3:"wheel"===e.type&&(e.deltaMode===e.DOM_DELTA_LINE?n.vU&&!r.dz?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40),void 0!==e.wheelDeltaX?n.G6&&r.ED?this.deltaX=-(e.wheelDeltaX/120):s?this.deltaX=e.wheelDeltaX/(120*t):this.deltaX=e.wheelDeltaX/120:void 0!==e.HORIZONTAL_AXIS&&e.axis===e.HORIZONTAL_AXIS?this.deltaX=-e.detail/3:"wheel"===e.type&&(e.deltaMode===e.DOM_DELTA_LINE?n.vU&&!r.dz?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40),0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*t):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;null===(e=this.browserEvent)||void 0===e||e.preventDefault()}stopPropagation(){var e;null===(e=this.browserEvent)||void 0===e||e.stopPropagation()}}},35220:function(e,t,i){"use strict";var n;i.d(t,{B:function(){return n}}),function(e){let t={total:0,min:Number.MAX_VALUE,max:0},i={...t},n={...t},o={...t},r=0,s={keydown:0,input:0,render:0};function onKeyDown(){recordIfFinished(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),s.keydown=1,queueMicrotask(markKeyDownEnd)}function markKeyDownEnd(){1===s.keydown&&(performance.mark("keydown/end"),s.keydown=2)}function onBeforeInput(){performance.mark("input/start"),s.input=1,scheduleRecordIfFinishedTask()}function onInput(){0===s.input&&onBeforeInput(),queueMicrotask(markInputEnd)}function markInputEnd(){1===s.input&&(performance.mark("input/end"),s.input=2)}function onKeyUp(){recordIfFinished()}function onSelectionChange(){recordIfFinished()}function onRenderStart(){2===s.keydown&&2===s.input&&0===s.render&&(performance.mark("render/start"),s.render=1,queueMicrotask(markRenderEnd),scheduleRecordIfFinishedTask())}function markRenderEnd(){1===s.render&&(performance.mark("render/end"),s.render=2)}function scheduleRecordIfFinishedTask(){setTimeout(recordIfFinished)}function recordIfFinished(){2===s.keydown&&2===s.input&&2===s.render&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),addMeasure("keydown",t),addMeasure("input",i),addMeasure("render",n),addMeasure("inputlatency",o),r++,reset())}function addMeasure(e,t){let i=performance.getEntriesByName(e)[0].duration;t.total+=i,t.min=Math.min(t.min,i),t.max=Math.max(t.max,i)}function reset(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),s.keydown=0,s.input=0,s.render=0}function getAndClearMeasurements(){if(0===r)return;let e={keydown:cumulativeToFinalMeasurement(t),input:cumulativeToFinalMeasurement(i),render:cumulativeToFinalMeasurement(n),total:cumulativeToFinalMeasurement(o),sampleCount:r};return clearCumulativeMeasurement(t),clearCumulativeMeasurement(i),clearCumulativeMeasurement(n),clearCumulativeMeasurement(o),r=0,e}function cumulativeToFinalMeasurement(e){return{average:e.total/r,max:e.max,min:e.min}}function clearCumulativeMeasurement(e){e.total=0,e.min=Number.MAX_VALUE,e.max=0}e.onKeyDown=onKeyDown,e.onBeforeInput=onBeforeInput,e.onInput=onInput,e.onKeyUp=onKeyUp,e.onSelectionChange=onSelectionChange,e.onRenderStart=onRenderStart,e.getAndClearMeasurements=getAndClearMeasurements}(n||(n={}))},79994:function(e,t,i){"use strict";i.d(t,{T:function(){return s}});var n=i(70687),o=i(57605),r=i(87932);let DevicePixelRatioMonitor=class DevicePixelRatioMonitor extends r.JT{constructor(e){super(),this._onDidChange=this._register(new o.Q5),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;null===(i=this._mediaQueryList)||void 0===i||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}};let PixelRatioMonitorImpl=class PixelRatioMonitorImpl extends r.JT{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new o.Q5),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);let t=this._register(new DevicePixelRatioMonitor(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){let t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}};let PixelRatioMonitorFacade=class PixelRatioMonitorFacade{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){let t=(0,n.ZY)(e),i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=(0,r.dk)(new PixelRatioMonitorImpl(e)),this.mapWindowIdToPixelRatioMonitor.set(t,i),(0,r.dk)(o.ju.once(n.ey)(({vscodeWindowId:e})=>{e===t&&(null==i||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))}))),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}};let s=new PixelRatioMonitorFacade},33482:function(e,t,i){"use strict";i.d(t,{o:function(){return Gesture},t:function(){return o}});var n,o,r=i(70687),s=i(58990),l=i(34794),d=i(40414),c=i(57605),u=i(87932),g=i(68324);(n=o||(o={})).Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu";let Gesture=class Gesture extends u.JT{constructor(){super(),this.dispatched=!1,this.targets=new g.S,this.ignoreTargets=new g.S,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(c.ju.runAndSubscribe(r.Xo,({window:e,disposables:t})=>{t.add(r.nm(e.document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),t.add(r.nm(e.document,"touchend",t=>this.onTouchEnd(e,t))),t.add(r.nm(e.document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))},{window:s.Ex,disposables:this._store}))}static addTarget(e){if(!Gesture.isTouchDevice())return u.JT.None;Gesture.INSTANCE||(Gesture.INSTANCE=(0,u.dk)(new Gesture));let t=Gesture.INSTANCE.targets.push(e);return(0,u.OF)(t)}static ignoreTarget(e){if(!Gesture.isTouchDevice())return u.JT.None;Gesture.INSTANCE||(Gesture.INSTANCE=(0,u.dk)(new Gesture));let t=Gesture.INSTANCE.ignoreTargets.push(e);return(0,u.OF)(t)}static isTouchDevice(){return"ontouchstart"in s.Ex||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){let n=e.targetTouches.item(i);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:t,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[t],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};let r=this.newGestureEvent(o.Start,n.target);r.pageX=n.pageX,r.pageY=n.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){let i=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,s=t.changedTouches.length;r<s;r++){let s=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}let d=this.activeTouches[s.identifier],c=Date.now()-d.initialTimeStamp;if(c<Gesture.HOLD_DELAY&&30>Math.abs(d.initialPageX-l.Gb(d.rollingPageX))&&30>Math.abs(d.initialPageY-l.Gb(d.rollingPageY))){let e=this.newGestureEvent(o.Tap,d.initialTarget);e.pageX=l.Gb(d.rollingPageX),e.pageY=l.Gb(d.rollingPageY),this.dispatchEvent(e)}else if(c>=Gesture.HOLD_DELAY&&30>Math.abs(d.initialPageX-l.Gb(d.rollingPageX))&&30>Math.abs(d.initialPageY-l.Gb(d.rollingPageY))){let e=this.newGestureEvent(o.Contextmenu,d.initialTarget);e.pageX=l.Gb(d.rollingPageX),e.pageY=l.Gb(d.rollingPageY),this.dispatchEvent(e)}else if(1===n){let t=l.Gb(d.rollingPageX),n=l.Gb(d.rollingPageY),o=l.Gb(d.rollingTimestamps)-d.rollingTimestamps[0],r=t-d.rollingPageX[0],s=n-d.rollingPageY[0],c=[...this.targets].filter(e=>d.initialTarget instanceof Node&&e.contains(d.initialTarget));this.inertia(e,c,i,Math.abs(r)/o,r>0?1:-1,t,Math.abs(s)/o,s>0?1:-1,n)}this.dispatchEvent(this.newGestureEvent(o.End,d.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===o.Tap){let t=new Date().getTime(),i=0;i=t-this._lastSetTapCountTime>Gesture.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===o.Change||e.type===o.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let t of this.ignoreTargets)if(t.contains(e.initialTarget))return;for(let t of this.targets)t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}}inertia(e,t,i,n,s,l,d,c,u){this.handle=r.jL(e,()=>{let r=Date.now(),g=r-i,m=0,f=0,_=!0;n+=Gesture.SCROLL_FRICTION*g,d+=Gesture.SCROLL_FRICTION*g,n>0&&(_=!1,m=s*n*g),d>0&&(_=!1,f=c*d*g);let v=this.newGestureEvent(o.Change);v.translationX=m,v.translationY=f,t.forEach(e=>e.dispatchEvent(v)),_||this.inertia(e,t,r,n,s,l+m,d,c,u+f)})}onTouchMove(e){let t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){let n=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}let r=this.activeTouches[n.identifier],s=this.newGestureEvent(o.Change,r.initialTarget);s.translationX=n.pageX-l.Gb(r.rollingPageX),s.translationY=n.pageY-l.Gb(r.rollingPageY),s.pageX=n.pageX,s.pageY=n.pageY,this.dispatchEvent(s),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(n.pageX),r.rollingPageY.push(n.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Gesture.SCROLL_FRICTION=-.005,Gesture.HOLD_DELAY=700,Gesture.CLEAR_TAP_COUNT_TIME=400,function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);r>3&&s&&Object.defineProperty(t,i,s)}([d.H],Gesture,"isTouchDevice",null)},76883:function(e,t,i){"use strict";i.d(t,{Z:function(){return createTrustedTypesPolicy}});var n=i(58990),o=i(17861);function createTrustedTypesPolicy(e,t){var i;let r=globalThis.MonacoEnvironment;if(null==r?void 0:r.createTrustedTypesPolicy)try{return r.createTrustedTypesPolicy(e,t)}catch(e){(0,o.dL)(e);return}try{return null===(i=n.Ex.trustedTypes)||void 0===i?void 0:i.createPolicy(e,t)}catch(e){(0,o.dL)(e);return}}},48953:function(e,t,i){"use strict";i.d(t,{gU:function(){return ActionViewItem},YH:function(){return BaseActionViewItem},Lc:function(){return SelectActionViewItem}});var n=i(1215),o=i(41256),r=i(70687),s=i(33482),l=i(41273),d=i(91502),c=i(53426),u=i(58731),g=i(7519),m=i(88660),f=i(34794),_=i(57605),v=i(27082),C=i(87932),b=i(88059);i(8784);var S=i(46157);let y=r.$,w="selectOption.entry.template";let SelectListRenderer=class SelectListRenderer{get templateId(){return w}renderTemplate(e){let t=Object.create(null);return t.root=e,t.text=r.R3(e,y(".option-text")),t.detail=r.R3(e,y(".option-detail")),t.decoratorRight=r.R3(e,y(".option-decorator-right")),t}renderElement(e,t,i){let n=e.text,o=e.detail,r=e.decoratorRight,s=e.isDisabled;i.text.textContent=n,i.detail.textContent=o||"",i.decoratorRight.innerText=r||"",s?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}};let SelectBoxList=class SelectBoxList extends C.JT{constructor(e,t,i,n,o){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=o||Object.create(null),"number"!=typeof this.selectBoxOptions.minBottomMargin?this.selectBoxOptions.minBottomMargin=SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding","string"==typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"==typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._hover=this._register((0,d.g)((0,l.t)("mouse"),this.selectElement,"")),this._onDidSelect=new _.Q5,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return w}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=r.$(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=r.R3(this.selectDropDownContainer,y(".select-box-details-pane"));let t=r.R3(this.selectDropDownContainer,y(".select-box-dropdown-container-width-control")),i=r.R3(t,y(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",r.R3(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=r.dS(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(r.nm(this.selectDropDownContainer,r.tw.DRAG_START,e=>{r.zB.stop(e,!0)}))}registerListeners(){let e;this._register(r.mu(this.selectElement,"change",e=>{this.selected=e.target.selectedIndex,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this._hover.update(this.options[this.selected].text)})),this._register(r.nm(this.selectElement,r.tw.CLICK,e=>{r.zB.stop(e),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(r.nm(this.selectElement,r.tw.MOUSE_DOWN,e=>{r.zB.stop(e)})),this._register(r.nm(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(r.nm(this.selectElement,"touchend",t=>{r.zB.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(r.nm(this.selectElement,r.tw.KEY_DOWN,e=>{let t=new u.y(e),i=!1;b.dz?(18===t.keyCode||16===t.keyCode||10===t.keyCode||3===t.keyCode)&&(i=!0):(18===t.keyCode&&t.altKey||16===t.keyCode&&t.altKey||10===t.keyCode||3===t.keyCode)&&(i=!0),i&&(this.showSelectDropDown(),r.zB.stop(e,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){f.fS(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled)),"string"==typeof e.description&&(this._hasDetails=!0)})),void 0!==t&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;null===(e=this.selectList)||void 0===e||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this._hover.update(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join("\n")}styleSelectElement(){var e,t,i;let n=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",o=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",r=null!==(i=this.styles.selectBorder)&&void 0!==i?i:"";this.selectElement.style.backgroundColor=n,this.selectElement.style.color=o,this.selectElement.style.borderColor=r}styleList(){var e,t;let i=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",n=r.XT(this.styles.selectListBackground,i);this.selectDropDownListContainer.style.backgroundColor=n,this.selectionDetailsPane.style.backgroundColor=n;let o=null!==(t=this.styles.focusBorder)&&void 0!==t?t:"";this.selectDropDownContainer.style.outlineColor=o,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){let n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch(e){}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout||!this.selectList)return!1;{this.selectDropDownContainer.classList.add("visible");let t=r.Jj(this.selectElement),i=r.i(this.selectElement),n=r.Jj(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),s=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),l=i.top-SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,d=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(d)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let g=this.selectList.contentHeight;this._hasDetails&&void 0===this._cachedMaxDetailsHeight&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let m=this._hasDetails?this._cachedMaxDetailsHeight:0,f=g+o+m,_=Math.floor((s-o-m)/this.getHeight()),v=Math.floor((l-o-m)/this.getHeight());if(e)return!(i.top+i.height>t.innerHeight-22)&&!(i.top<SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN)&&(!(_<1)||!(v<1))&&(_<SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&v>_&&this.options.length>_?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||0===this._dropDownPosition&&_<1||1===this._dropDownPosition&&v<1)return this.hideSelectDropDown(!0),!1;if(0===this._dropDownPosition){if(this._isVisible&&_+v<1)return this.hideSelectDropDown(!0),!1;f>s&&(g=_*this.getHeight())}else f>l&&(g=v*this.getHeight());return this.selectList.layout(g),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=g+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=g+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach((e,t)=>{let o=e.detail?e.detail.length:0,r=e.decoratorRight?e.decoratorRight.length:0,s=e.text.length+o+r;s>n&&(i=t,n=s)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=r.w(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=r.R3(e,y(".select-box-dropdown-list-container")),this.listRenderer=new SelectListRenderer,this.selectList=new m.aV("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:e=>{let t=e.text;return e.detail&&(t+=`. ${e.detail}`),e.decoratorRight&&(t+=`. ${e.decoratorRight}`),e.description&&(t+=`. ${e.description}`),t},getWidgetAriaLabel:()=>(0,S.NC)({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>b.dz?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let t=this._register(new c.Y(this.selectDropDownListContainer,"keydown")),i=_.ju.chain(t.event,e=>e.filter(()=>this.selectList.length>0).map(e=>new u.y(e)));this._register(_.ju.chain(i,e=>e.filter(e=>3===e.keyCode))(this.onEnter,this)),this._register(_.ju.chain(i,e=>e.filter(e=>2===e.keyCode))(this.onEnter,this)),this._register(_.ju.chain(i,e=>e.filter(e=>9===e.keyCode))(this.onEscape,this)),this._register(_.ju.chain(i,e=>e.filter(e=>16===e.keyCode))(this.onUpArrow,this)),this._register(_.ju.chain(i,e=>e.filter(e=>18===e.keyCode))(this.onDownArrow,this)),this._register(_.ju.chain(i,e=>e.filter(e=>12===e.keyCode))(this.onPageDown,this)),this._register(_.ju.chain(i,e=>e.filter(e=>11===e.keyCode))(this.onPageUp,this)),this._register(_.ju.chain(i,e=>e.filter(e=>14===e.keyCode))(this.onHome,this)),this._register(_.ju.chain(i,e=>e.filter(e=>13===e.keyCode))(this.onEnd,this)),this._register(_.ju.chain(i,e=>e.filter(e=>e.keyCode>=21&&e.keyCode<=56||e.keyCode>=85&&e.keyCode<=113))(this.onCharacter,this)),this._register(r.nm(this.selectList.getHTMLElement(),r.tw.POINTER_UP,e=>this.onPointerUp(e))),this._register(this.selectList.onMouseOver(e=>void 0!==e.index&&this.selectList.setFocus([e.index]))),this._register(this.selectList.onDidChangeFocus(e=>this.onListFocus(e))),this._register(r.nm(this.selectDropDownContainer,r.tw.FOCUS_OUT,e=>{!this._isVisible||r.jg(e.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;r.zB.stop(e);let t=e.target;if(!t||t.classList.contains("slider"))return;let i=t.closest(".monaco-list-row");if(!i)return;let n=Number(i.getAttribute("data-index")),o=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!o&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this._hover.update(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){let cleanRenderedMarkdown=e=>{for(let t=0;t<e.childNodes.length;t++){let i=e.childNodes.item(t),n=i.tagName&&i.tagName.toLowerCase();"img"===n?e.removeChild(i):cleanRenderedMarkdown(i)}},i=(0,g.ap)({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),cleanRenderedMarkdown(i.element),i.element}onListFocus(e){this._isVisible&&this._hasDetails&&this.updateDetail(e.indexes[0])}updateDetail(e){var t,i;this.selectionDetailsPane.innerText="";let n=this.options[e],o=null!==(t=null==n?void 0:n.description)&&void 0!==t?t:"",r=null!==(i=null==n?void 0:n.descriptionIsMarkdown)&&void 0!==i&&i;if(o){if(r){let e=n.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(o,e))}else this.selectionDetailsPane.innerText=o;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){r.zB.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){r.zB.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this._hover.update(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){r.zB.stop(e,!0);let t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){if(this.selected>0){r.zB.stop(e,!0);let t=this.options[this.selected-1].isDisabled;t&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onPageUp(e){r.zB.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){r.zB.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){r.zB.stop(e),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){r.zB.stop(e),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){let t=v.kL.toString(e.keyCode),i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),r.zB.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let SelectBoxNative=class SelectBoxNative extends C.JT{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box","string"==typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"==typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new _.Q5),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(s.o.addTarget(this.selectElement)),[s.t.Tap].forEach(e=>{this._register(r.nm(this.selectElement,e,e=>{this.selectElement.focus()}))}),this._register(r.mu(this.selectElement,"click",e=>{r.zB.stop(e,!0)})),this._register(r.mu(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(r.mu(this.selectElement,"keydown",e=>{let t=!1;b.dz?(18===e.keyCode||16===e.keyCode||10===e.keyCode)&&(t=!0):(18===e.keyCode&&e.altKey||10===e.keyCode||3===e.keyCode)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){this.options&&f.fS(this.options,e)||(this.options=e,this.selectElement.options.length=0,this.options.forEach((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled))})),void 0!==t&&this.select(t)}select(e){0===this.options.length?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&"string"==typeof this.options[this.selected].text?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,i;this.selectElement&&(this.selectElement.style.backgroundColor=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",this.selectElement.style.color=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",this.selectElement.style.borderColor=null!==(i=this.styles.selectBorder)&&void 0!==i?i:"")}createOption(e,t,i){let n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}};var L=i(21413);i(65836);let SelectBox=class SelectBox extends L.${constructor(e,t,i,n,o){super(),!b.dz||(null==o?void 0:o.useCustomDrawn)?this.selectBoxDelegate=new SelectBoxList(e,t,i,n,o):this.selectBoxDelegate=new SelectBoxNative(e,t,n,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}};var k=i(9252),D=i(16877);i(56627);let BaseActionViewItem=class BaseActionViewItem extends C.JT{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof k.aU&&this._register(t.onDidChange(e=>{this.element&&this.handleActionChangeEvent(e)}))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new k.Wi)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){let t=this.element=e;this._register(s.o.addTarget(e));let i=this.options&&this.options.draggable;i&&(e.draggable=!0,n.vU&&this._register((0,r.nm)(e,r.tw.DRAG_START,e=>{var t;return null===(t=e.dataTransfer)||void 0===t?void 0:t.setData(o.g.TEXT,this._action.label)}))),this._register((0,r.nm)(t,s.t.Tap,e=>this.onClick(e,!0))),this._register((0,r.nm)(t,r.tw.MOUSE_DOWN,e=>{i||r.zB.stop(e,!0),this._action.enabled&&0===e.button&&t.classList.add("active")})),b.dz&&this._register((0,r.nm)(t,r.tw.CONTEXT_MENU,e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)})),this._register((0,r.nm)(t,r.tw.CLICK,e=>{r.zB.stop(e,!0),this.options&&this.options.isMenu||this.onClick(e)})),this._register((0,r.nm)(t,r.tw.DBLCLICK,e=>{r.zB.stop(e,!0)})),[r.tw.MOUSE_UP,r.tw.MOUSE_OUT].forEach(e=>{this._register((0,r.nm)(t,e,e=>{r.zB.stop(e),t.classList.remove("active")}))})}onClick(e,t=!1){var i;r.zB.stop(e,!0);let n=D.Jp(this._context)?(null===(i=this.options)||void 0===i?void 0:i.useEventAsContext)?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var e,t,i;if(!this.element)return;let n=null!==(e=this.getTooltip())&&void 0!==e?e:"";if(this.updateAriaLabel(),null===(t=this.options.hoverDelegate)||void 0===t?void 0:t.showNativeHover)this.element.title=n;else if(this.customHover)this.customHover.update(n);else{let e=null!==(i=this.options.hoverDelegate)&&void 0!==i?i:(0,l.t)("element");this.customHover=(0,d.g)(e,this.element,n),this._store.add(this.customHover)}}updateAriaLabel(){var e;if(this.element){let t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}};let ActionViewItem=class ActionViewItem extends BaseActionViewItem{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass=""}render(e){super.render(e),D.p_(this.element);let t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){let e=document.createElement("span");e.classList.add("keybinding"),e.textContent=this.options.keybinding,this.element.appendChild(e)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===k.Z0.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=S.NC({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),null!=e?e:void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):null===(e=this.label)||void 0===e||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),null===(e=this.element)||void 0===e||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),null===(t=this.element)||void 0===t||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){let t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(void 0!==this.action.checked?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}};let SelectActionViewItem=class SelectActionViewItem extends BaseActionViewItem{constructor(e,t,i,n,o,r,s){super(e,t),this.selectBox=new SelectBox(i,n,o,r,s),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;null===(e=this.selectBox)||void 0===e||e.focus()}blur(){var e;null===(e=this.selectBox)||void 0===e||e.blur()}render(e){this.selectBox.render(e)}}},83367:function(e,t,i){"use strict";i.d(t,{o:function(){return ActionBar}});var n=i(70687),o=i(58731),r=i(48953),s=i(41273),l=i(9252),d=i(57605),c=i(87932),u=i(16877);i(56627);let ActionBar=class ActionBar extends c.JT{constructor(e,t={}){var i,u,g,m,f,_,v;let C,b;switch(super(),this._actionRunnerDisposables=this._register(new c.SL),this.viewItemDisposables=this._register(new c.b2),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new d.Q5),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new d.Q5({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new d.Q5),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new d.Q5),this.onWillRun=this._onWillRun.event,this.options=t,this._context=null!==(i=t.context)&&void 0!==i?i:null,this._orientation=null!==(u=this.options.orientation)&&void 0!==u?u:0,this._triggerKeys={keyDown:null!==(m=null===(g=this.options.triggerKeys)||void 0===g?void 0:g.keyDown)&&void 0!==m&&m,keys:null!==(_=null===(f=this.options.triggerKeys)||void 0===f?void 0:f.keys)&&void 0!==_?_:[3,10]},this._hoverDelegate=null!==(v=t.hoverDelegate)&&void 0!==v?v:this._register((0,s.t)("element",!0)),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new l.Wi,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e=>this._onWillRun.fire(e))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",this._orientation){case 0:C=[15],b=[17];break;case 1:C=[16],b=[18],this.domNode.className+=" vertical"}this._register(n.nm(this.domNode,n.tw.KEY_DOWN,e=>{let t=new o.y(e),i=!0,n="number"==typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;C&&(t.equals(C[0])||t.equals(C[1]))?i=this.focusPrevious():b&&(t.equals(b[0])||t.equals(b[1]))?i=this.focusNext():t.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(14)?i=this.focusFirst():t.equals(13)?i=this.focusLast():t.equals(2)&&n instanceof r.YH&&n.trapsArrowNavigation?i=this.focusNext():this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:i=!1,i&&(t.preventDefault(),t.stopPropagation())})),this._register(n.nm(this.domNode,n.tw.KEY_UP,e=>{let t=new o.y(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026)||t.equals(16)||t.equals(18)||t.equals(15)||t.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(n.go(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{n.vY()!==this.domNode&&n.jg(n.vY(),this.domNode)||(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){let e=this.viewItems.find(e=>e instanceof r.YH&&e.isEnabled());e instanceof r.YH&&e.setFocusable(!0)}else this.viewItems.forEach(e=>{e instanceof r.YH&&e.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){let o=this.actionsList.children[i];if(n.jg(n.vY(),o)){this.focusedItem=i,null===(t=null===(e=this.viewItems[this.focusedItem])||void 0===e?void 0:e.showHover)||void 0===t||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e=>this._onWillRun.fire(e))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if("number"==typeof e)return null===(t=this.viewItems[e])||void 0===t?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){let i=Array.isArray(e)?e:[e],o=u.hj(t.index)?t.index:null;i.forEach(e=>{let i;let s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation");let l={hoverDelegate:this._hoverDelegate,...t};this.options.actionViewItemProvider&&(i=this.options.actionViewItemProvider(e,l)),i||(i=new r.gU(this.context,e,l)),this.options.allowContextMenu||this.viewItemDisposables.set(i,n.nm(s,n.tw.CONTEXT_MENU,e=>{n.zB.stop(e,!0)})),i.actionRunner=this._actionRunner,i.setActionContext(this.context),i.render(s),this.focusable&&i instanceof r.YH&&0===this.viewItems.length&&i.setFocusable(!0),null===o||o<0||o>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(i)):(this.actionsList.insertBefore(s,this.actionsList.children[o]),this.viewItems.splice(o,0,i),o++)}),"number"==typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=(0,c.B9)(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),n.PO(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return 0===this.viewItems.length}focus(e){let t,i=!1;if(void 0===e?i=!0:"number"==typeof e?t=e:"boolean"==typeof e&&(i=e),i&&void 0===this.focusedItem){let e=this.viewItems.findIndex(e=>e.isEnabled());this.focusedItem=-1===e?void 0:e,this.updateFocus(void 0,void 0,!0)}else void 0!==t&&(this.focusedItem=t),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){let t;if(void 0===this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let i=this.focusedItem;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!t.isEnabled()||t.action.id===l.Z0.ID));return this.updateFocus(),!0}focusPrevious(e){let t;if(void 0===this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let i=this.focusedItem;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=i,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!t.isEnabled()||t.action.id===l.Z0.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var n,o;void 0===this.focusedItem&&this.actionsList.focus({preventScroll:t}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem&&(null===(n=this.viewItems[this.previouslyFocusedItem])||void 0===n||n.blur());let r=void 0!==this.focusedItem?this.viewItems[this.focusedItem]:void 0;if(r){let n=!0;u.mf(r.focus)||(n=!1),this.options.focusOnlyEnabledItems&&u.mf(r.isEnabled)&&!r.isEnabled()&&(n=!1),r.action.id===l.Z0.ID&&(n=!1),n?(i||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),n&&(null===(o=r.showHover)||void 0===o||o.call(r))}}doTrigger(e){if(void 0===this.focusedItem)return;let t=this.viewItems[this.focusedItem];if(t instanceof r.YH){let i=null===t._context||void 0===t._context?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=(0,c.B9)(this.viewItems),this.getContainer().remove(),super.dispose()}}},93864:function(e,t,i){"use strict";let n,o,r,s,l;i.d(t,{Z9:function(){return alert},i7:function(){return status},wW:function(){return setARIAContainer}});var d=i(70687);function setARIAContainer(e){(n=document.createElement("div")).className="monaco-aria-container";let createAlertContainer=()=>{let e=document.createElement("div");return e.className="monaco-alert",e.setAttribute("role","alert"),e.setAttribute("aria-atomic","true"),n.appendChild(e),e};o=createAlertContainer(),r=createAlertContainer();let createStatusContainer=()=>{let e=document.createElement("div");return e.className="monaco-status",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),n.appendChild(e),e};s=createStatusContainer(),l=createStatusContainer(),e.appendChild(n)}function alert(e){n&&(o.textContent!==e?(d.PO(r),insertMessage(o,e)):(d.PO(o),insertMessage(r,e)))}function status(e){n&&(s.textContent!==e?(d.PO(l),insertMessage(s,e)):(d.PO(s),insertMessage(l,e)))}function insertMessage(e,t){d.PO(e),t.length>2e4&&(t=t.substr(0,2e4)),e.textContent=t,e.style.visibility="hidden",e.style.visibility="visible"}i(85140)},49216:function(e,t,i){"use strict";i.d(t,{z:function(){return Button}});var n=i(70687),o=i(20532),r=i(58731),s=i(7519),l=i(33482),d=i(41273),c=i(91502),u=i(45776),g=i(50164),m=i(57605),f=i(72914),_=i(87932),v=i(98847);i(31097),g.Il.white.toString(),g.Il.white.toString();let Button=class Button extends _.JT{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new m.Q5),this._onDidEscape=this._register(new m.Q5),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);let i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,o=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=o||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),"string"==typeof t.ariaLabel&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(l.o.addTarget(this._element)),[n.tw.CLICK,l.t.Tap].forEach(e=>{this._register((0,n.nm)(this._element,e,e=>{if(!this.enabled){n.zB.stop(e);return}this._onDidClick.fire(e)}))}),this._register((0,n.nm)(this._element,n.tw.KEY_DOWN,e=>{let t=new r.y(e),i=!1;this.enabled&&(t.equals(3)||t.equals(10))?(this._onDidClick.fire(e),i=!0):t.equals(9)&&(this._onDidEscape.fire(e),this._element.blur(),i=!0),i&&n.zB.stop(t,!0)})),this._register((0,n.nm)(this._element,n.tw.MOUSE_OVER,e=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register((0,n.nm)(this._element,n.tw.MOUSE_OUT,e=>{this.updateBackground(!1)})),this.focusTracker=this._register((0,n.go)(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let i of(0,u.T)(e))if("string"==typeof i){if(""===(i=i.trim()))continue;let e=document.createElement("span");e.textContent=i,t.push(e)}else t.push(i);return t}updateBackground(e){let t;(t=this.options.secondary?e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:e?this.options.buttonHoverBackground:this.options.buttonBackground)&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||(0,f.Fr)(this._label)&&(0,f.Fr)(e)&&(0,f.g_)(this._label,e))return;this._element.classList.add("monaco-text-button");let i=this.options.supportShortLabel?this._labelElement:this._element;if((0,f.Fr)(e)){let r=(0,s.ap)(e,{inline:!0});r.dispose();let l=null===(t=r.element.querySelector("p"))||void 0===t?void 0:t.innerHTML;if(l){let e=(0,o.Nw)(l,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});i.innerHTML=e}else(0,n.mc)(i)}else this.options.supportIcons?(0,n.mc)(i,...this.getContentElements(e)):i.textContent=e;let r="";"string"==typeof this.options.title?r=this.options.title:this.options.title&&(r=(0,s.et)(e)),this._hover?this._hover.update(r):this._hover=this._register((0,c.g)((0,d.t)("mouse"),this._element,r)),"string"==typeof this.options.ariaLabel?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",this._element.title),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...v.k.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}},18179:function(e,t,i){"use strict";i.d(t,{Z:function(){return CountBadge}});var n=i(70687),o=i(45837);i(12223);let CountBadge=class CountBadge{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=(0,n.R3)(e,(0,n.$)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=(0,o.WU)(this.countFormat,this.count),this.element.title=(0,o.WU)(this.titleFormat,this.count),this.element.style.backgroundColor=null!==(e=this.styles.badgeBackground)&&void 0!==e?e:"",this.element.style.color=null!==(t=this.styles.badgeForeground)&&void 0!==t?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}},24221:function(e,t,i){"use strict";i.d(t,{C:function(){return DropdownMenuActionViewItem}});var n=i(70687),o=i(48953),r=i(58731),s=i(33482),l=i(9252),d=i(57605);i(19166);let BaseDropdown=class BaseDropdown extends l.Wi{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new d.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,n.R3)(e,(0,n.$)(".monaco-dropdown")),this._label=(0,n.R3)(this._element,(0,n.$)(".dropdown-label"));let i=t.labelRenderer;for(let e of(i||(i=e=>(e.textContent=t.label||"",null)),[n.tw.CLICK,n.tw.MOUSE_DOWN,s.t.Tap]))this._register((0,n.nm)(this.element,e,e=>n.zB.stop(e,!0)));for(let e of[n.tw.MOUSE_DOWN,s.t.Tap])this._register((0,n.nm)(this._label,e,e=>{(0,n.N5)(e)&&(e.detail>1||0!==e.button)||(this.visible?this.hide():this.show())}));this._register((0,n.nm)(this._label,n.tw.KEY_UP,e=>{let t=new r.y(e);(t.equals(3)||t.equals(10))&&(n.zB.stop(e,!0),this.visible?this.hide():this.show())}));let o=i(this._label);o&&this._register(o),this._register(s.o.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}};let DropdownMenu=class DropdownMenu extends BaseDropdown{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};var c=i(91502),u=i(41273);let DropdownMenuActionViewItem=class DropdownMenuActionViewItem extends o.YH{constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new d.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:e=>{this.element=(0,n.R3)(e,(0,n.$)("a.action-label"));let t=[];return"string"==typeof this.options.classNames?t=this.options.classNames.split(/\s+/g).filter(e=>!!e):this.options.classNames&&(t=this.options.classNames),t.find(e=>"icon"===e)||t.push("codicon"),this.element.classList.add(...t),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register((0,c.g)((0,u.t)("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:t?this.menuActionsOrProvider:void 0,actionProvider:t?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new DropdownMenu(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(e=>{var t;null===(t=this.element)||void 0===t||t.setAttribute("aria-expanded",`${e}`),this._onDidChangeVisibility.fire(e)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let e=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return e.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),null!=e?e:void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;null===(e=this.dropdownMenu)||void 0===e||e.show()}updateEnabled(){var e,t;let i=!this.action.enabled;null===(e=this.actionItem)||void 0===e||e.classList.toggle("disabled",i),null===(t=this.element)||void 0===t||t.classList.toggle("disabled",i)}}},43811:function(e,t,i){"use strict";i.d(t,{V:function(){return FindInput}});var n=i(70687),o=i(17214),r=i(61313),s=i(21413),l=i(57605);i(39422);var d=i(46157),c=i(87932);let u=d.NC("defaultLabel","input");let FindInput=class FindInput extends s.${constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new c.XK),this.additionalToggles=[],this._onDidOptionChange=this._register(new l.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new l.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new l.Q5),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new l.Q5),this._onKeyUp=this._register(new l.Q5),this._onCaseSensitiveKeyDown=this._register(new l.Q5),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new l.Q5),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||u,this.showCommonFindToggles=!!i.showCommonFindToggles;let s=i.appendCaseSensitiveLabel||"",d=i.appendWholeWordsLabel||"",g=i.appendRegexLabel||"",m=i.history||[],f=!!i.flexibleHeight,_=!!i.flexibleWidth,v=i.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new r.pG(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:m,showHistoryHint:i.showHistoryHint,flexibleHeight:f,flexibleWidth:_,flexibleMaxHeight:v,inputBoxStyles:i.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new o.eH({appendTitle:g,isChecked:!1,...i.toggleStyles})),this._register(this.regex.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(e=>{this._onRegexKeyDown.fire(e)})),this.wholeWords=this._register(new o.Qx({appendTitle:d,isChecked:!1,...i.toggleStyles})),this._register(this.wholeWords.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new o.rk({appendTitle:s,isChecked:!1,...i.toggleStyles})),this._register(this.caseSensitive.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(e=>{this._onCaseSensitiveKeyDown.fire(e)}));let e=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,t=>{if(t.equals(15)||t.equals(17)||t.equals(9)){let i=e.indexOf(this.domNode.ownerDocument.activeElement);if(i>=0){let o=-1;t.equals(17)?o=(i+1)%e.length:t.equals(15)&&(o=0===i?e.length-1:i-1),t.equals(9)?(e[i].blur(),this.inputBox.focus()):o>=0&&e[o].focus(),n.zB.stop(t,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(null==i?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),null==e||e.appendChild(this.domNode),this._register(n.nm(this.inputBox.inputElement,"compositionstart",e=>{this.imeSessionInProgress=!0})),this._register(n.nm(this.inputBox.inputElement,"compositionend",e=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,e=>this._onKeyDown.fire(e)),this.onkeyup(this.inputBox.inputElement,e=>this._onKeyUp.fire(e)),this.oninput(this.inputBox.inputElement,e=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,e=>this._onMouseDown.fire(e))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;for(let n of(this.domNode.classList.remove("disabled"),this.inputBox.enable(),null===(e=this.regex)||void 0===e||e.enable(),null===(t=this.wholeWords)||void 0===t||t.enable(),null===(i=this.caseSensitive)||void 0===i||i.enable(),this.additionalToggles))n.enable()}disable(){var e,t,i;for(let n of(this.domNode.classList.add("disabled"),this.inputBox.disable(),null===(e=this.regex)||void 0===e||e.disable(),null===(t=this.wholeWords)||void 0===t||t.disable(),null===(i=this.caseSensitive)||void 0===i||i.disable(),this.additionalToggles))n.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(let e of this.additionalToggles)e.domNode.remove();for(let t of(this.additionalToggles=[],this.additionalTogglesDisposables.value=new c.SL,null!=e?e:[]))this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,n,o,r,s;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(null!==(i=null===(t=this.caseSensitive)||void 0===t?void 0:t.width())&&void 0!==i?i:0)+(null!==(o=null===(n=this.wholeWords)||void 0===n?void 0:n.width())&&void 0!==o?o:0)+(null!==(s=null===(r=this.regex)||void 0===r?void 0:r.width())&&void 0!==s?s:0)+this.additionalToggles.reduce((e,t)=>e+t.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return null!==(t=null===(e=this.caseSensitive)||void 0===e?void 0:e.checked)&&void 0!==t&&t}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return null!==(t=null===(e=this.wholeWords)||void 0===e?void 0:e.checked)&&void 0!==t&&t}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return null!==(t=null===(e=this.regex)||void 0===e?void 0:e.checked)&&void 0!==t&&t}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;null===(e=this.caseSensitive)||void 0===e||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}},17214:function(e,t,i){"use strict";i.d(t,{Qx:function(){return WholeWordsToggle},eH:function(){return RegexToggle},rk:function(){return CaseSensitiveToggle}});var n=i(24311),o=i(84530),r=i(46157);let s=r.NC("caseDescription","Match Case"),l=r.NC("wordsDescription","Match Whole Word"),d=r.NC("regexDescription","Use Regular Expression");let CaseSensitiveToggle=class CaseSensitiveToggle extends n.Z{constructor(e){super({icon:o.l.caseSensitive,title:s+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};let WholeWordsToggle=class WholeWordsToggle extends n.Z{constructor(e){super({icon:o.l.wholeWord,title:l+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};let RegexToggle=class RegexToggle extends n.Z{constructor(e){super({icon:o.l.regex,title:d+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}},20007:function(e,t,i){"use strict";i.d(t,{q:function(){return HighlightedLabel}});var n=i(70687),o=i(45776),r=i(56660);let HighlightedLabel=class HighlightedLabel{constructor(e,t){var i;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=null!==(i=null==t?void 0:t.supportIcons)&&void 0!==i&&i,this.domNode=n.R3(e,n.$("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=HighlightedLabel.escapeNewLines(e,t)),this.didEverRender&&this.text===e&&this.title===i&&r.fS(this.highlights,t)||(this.text=e,this.title=i,this.highlights=t,this.render())}render(){let e=[],t=0;for(let i of this.highlights){if(i.end===i.start)continue;if(t<i.start){let n=this.text.substring(t,i.start);this.supportIcons?e.push(...(0,o.T)(n)):e.push(n),t=i.start}let r=this.text.substring(t,i.end),s=n.$("span.highlight",void 0,...this.supportIcons?(0,o.T)(r):[r]);i.extraClasses&&s.classList.add(...i.extraClasses),e.push(s),t=i.end}if(t<this.text.length){let i=this.text.substring(t);this.supportIcons?e.push(...(0,o.T)(i)):e.push(i)}n.mc(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(e,o)=>{for(let r of(n="\r\n"===e?-1:0,o+=i,t))!(r.end<=o)&&(r.start>=o&&(r.start+=n),r.end>=o&&(r.end+=n));return i+=n,"⏎"})}}},41273:function(e,t,i){"use strict";i.d(t,{r:function(){return setHoverDelegateFactory},t:function(){return getDefaultHoverDelegate}});var n=i(10612);let hoverDelegateFactory=()=>({get delay(){return -1},dispose:()=>{},showHover:()=>{}}),o=new n.o(()=>hoverDelegateFactory("mouse",!1)),r=new n.o(()=>hoverDelegateFactory("element",!1));function setHoverDelegateFactory(e){hoverDelegateFactory=e}function getDefaultHoverDelegate(e,t){return t?hoverDelegateFactory(e,!0):"element"===e?r.value:o.value}},95678:function(e,t,i){"use strict";i.d(t,{Sr:function(){return HoverAction},c8:function(){return HoverWidget},uX:function(){return getHoverAccessibleViewHint}});var n=i(70687),o=i(58731),r=i(80064),s=i(87932);i(56323);var l=i(46157);let d=n.$;let HoverWidget=class HoverWidget extends s.JT{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new r.s$(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};let HoverAction=class HoverAction extends s.JT{static render(e,t,i){return new HoverAction(e,t,i)}constructor(e,t,i){super(),this.actionContainer=n.R3(e,d("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=n.R3(this.actionContainer,d("a.action")),this.action.setAttribute("role","button"),t.iconClass&&n.R3(this.action,d(`span.icon.${t.iconClass}`));let r=n.R3(this.action,d("span"));r.textContent=i?`${t.label} (${i})`:t.label,this._register(n.nm(this.actionContainer,n.tw.CLICK,e=>{e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer)})),this._register(n.nm(this.actionContainer,n.tw.KEY_DOWN,e=>{let i=new o.y(e);(i.equals(3)||i.equals(10))&&(e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}};function getHoverAccessibleViewHint(e,t){return e&&t?(0,l.NC)("acessibleViewHint","Inspect this in the accessible view with {0}.",t):e?(0,l.NC)("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}},9049:function(e,t,i){"use strict";i.d(t,{g:function(){return IconLabel}}),i(74407);var n=i(70687),o=i(20007),r=i(91502),s=i(87932),l=i(56660),d=i(21301),c=i(41273);let FastLabelNode=class FastLabelNode{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}};let IconLabel=class IconLabel extends s.JT{constructor(e,t){var i;super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new FastLabelNode(n.R3(e,n.$(".monaco-icon-label")))),this.labelContainer=n.R3(this.domNode.element,n.$(".monaco-icon-label-container")),this.nameContainer=n.R3(this.labelContainer,n.$("span.monaco-icon-name-container")),(null==t?void 0:t.supportHighlights)||(null==t?void 0:t.supportIcons)?this.nameNode=new LabelWithHighlights(this.nameContainer,!!t.supportIcons):this.nameNode=new Label(this.nameContainer),this.hoverDelegate=null!==(i=null==t?void 0:t.hoverDelegate)&&void 0!==i?i:(0,c.t)("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){var n;let r=["monaco-icon-label"],s=["monaco-icon-label-container"],l="";if(i&&(i.extraClasses&&r.push(...i.extraClasses),i.italic&&r.push("italic"),i.strikethrough&&r.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&("string"==typeof i.title?l+=i.title:l+=e)),this.domNode.className=r.join(" "),this.domNode.element.setAttribute("aria-label",l),this.labelContainer.className=s.join(" "),this.setupHover((null==i?void 0:i.descriptionTitle)?this.labelContainer:this.element,null==i?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){let e=this.getOrCreateDescriptionNode();e instanceof o.q?(e.set(t||"",i?i.descriptionMatches:void 0,void 0,null==i?void 0:i.labelEscapeNewLines),this.setupHover(e.element,null==i?void 0:i.descriptionTitle)):(e.textContent=t&&(null==i?void 0:i.labelEscapeNewLines)?o.q.escapeNewLines(t,[]):t||"",this.setupHover(e.element,(null==i?void 0:i.descriptionTitle)||""),e.empty=!t)}if((null==i?void 0:i.suffix)||this.suffixNode){let e=this.getOrCreateSuffixNode();e.textContent=null!==(n=null==i?void 0:i.suffix)&&void 0!==n?n:""}}setupHover(e,t){let i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(0,r.O)(e,t);else{let i=(0,r.g)(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){for(let e of(super.dispose(),this.customHovers.values()))e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){let e=this._register(new FastLabelNode(n.e4(this.nameContainer,n.$("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new FastLabelNode(n.R3(e.element,n.$("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){let t=this._register(new FastLabelNode(n.R3(this.labelContainer,n.$("span.monaco-icon-description-container"))));(null===(e=this.creationOptions)||void 0===e?void 0:e.supportDescriptionHighlights)?this.descriptionNode=new o.q(n.R3(t.element,n.$("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new FastLabelNode(n.R3(t.element,n.$("span.label-description"))))}return this.descriptionNode}};let Label=class Label{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&(0,l.fS)(this.options,t))){if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=n.R3(this.container,n.$("a.label-name",{id:null==t?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){let o=e[i],r=(null==t?void 0:t.domId)&&`${null==t?void 0:t.domId}_${i}`;n.R3(this.container,n.$("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},o)),i<e.length-1&&n.R3(this.container,n.$("span.label-separator",void 0,(null==t?void 0:t.separator)||"/"))}}}}};function splitMatches(e,t,i){if(!i)return;let n=0;return e.map(e=>{let o={start:n,end:n+e.length},r=i.map(e=>d.e.intersect(o,e)).filter(e=>!d.e.isEmpty(e)).map(({start:e,end:t})=>({start:e-n,end:t-n}));return n=o.end+t.length,r})}let LabelWithHighlights=class LabelWithHighlights{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&(0,l.fS)(this.options,t))){if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new o.q(n.R3(this.container,n.$("a.label-name",{id:null==t?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,null==t?void 0:t.matches,void 0,null==t?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;let i=(null==t?void 0:t.separator)||"/",r=splitMatches(e,i,null==t?void 0:t.matches);for(let s=0;s<e.length;s++){let l=e[s],d=r?r[s]:void 0,c=(null==t?void 0:t.domId)&&`${null==t?void 0:t.domId}_${s}`,u=n.$("a.label-name",{id:c,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"}),g=new o.q(n.R3(this.container,u),{supportIcons:this.supportIcons});g.set(l,d,void 0,null==t?void 0:t.labelEscapeNewLines),s<e.length-1&&n.R3(u,n.$("span.label-separator",void 0,i))}}}}}},91502:function(e,t,i){"use strict";i.d(t,{O:function(){return setupNativeHover},g:function(){return setupCustomHover}});var n=i(70687),o=i(66614),r=i(45828),s=i(72914),l=i(42385),d=i(87932),c=i(16877),u=i(46157);function setupNativeHover(e,t){(0,c.HD)(t)?e.title=(0,l.x$)(t):(null==t?void 0:t.markdownNotSupportedFallback)?e.title=t.markdownNotSupportedFallback:e.removeAttribute("title")}let UpdatableHoverWidget=class UpdatableHoverWidget{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){var n;let o;if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),!this.isDisposed){if(void 0===e||(0,c.HD)(e)||e instanceof HTMLElement)o=e;else if((0,c.mf)(e.markdown)){this._hoverWidget||this.show((0,u.NC)("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new r.A;let i=this._cancellationTokenSource.token;if(void 0===(o=await e.markdown(i))&&(o=e.markdownNotSupportedFallback),this.isDisposed||i.isCancellationRequested)return}else o=null!==(n=e.markdown)&&void 0!==n?n:e.markdownNotSupportedFallback;this.show(o,t,i)}}show(e,t,i){let n=this._hoverWidget;if(this.hasContent(e)){let o={content:e,target:this.target,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!n},position:{hoverPosition:2},...i};this._hoverWidget=this.hoverDelegate.showHover(o,t)}null==n||n.dispose()}hasContent(e){return!!e&&(!(0,s.Fr)(e)||!!e.value)}get isDisposed(){var e;return null===(e=this._hoverWidget)||void 0===e?void 0:e.isDisposed}dispose(){var e,t;null===(e=this._hoverWidget)||void 0===e||e.dispose(),null===(t=this._cancellationTokenSource)||void 0===t||t.dispose(!0),this._cancellationTokenSource=void 0}};function setupCustomHover(e,t,i,r){let s,l;let hideHover=(t,i)=>{var n;let o=void 0!==l;t&&(null==l||l.dispose(),l=void 0),i&&(null==s||s.dispose(),s=void 0),o&&(null===(n=e.onDidHideHover)||void 0===n||n.call(e),l=void 0)},triggerShowHover=(n,s,d)=>new o._F(async()=>{(!l||l.isDisposed)&&(l=new UpdatableHoverWidget(e,d||t,n>0),await l.update("function"==typeof i?i():i,s,r))},n),c=!1,u=n.nm(t,n.tw.MOUSE_DOWN,()=>{c=!0,hideHover(!0,!0)},!0),g=n.nm(t,n.tw.MOUSE_UP,()=>{c=!1},!0),m=n.nm(t,n.tw.MOUSE_LEAVE,e=>{c=!1,hideHover(!1,e.fromElement===t)},!0),f=n.nm(t,n.tw.MOUSE_OVER,()=>{if(s)return;let i=new d.SL,o={targetElements:[t],dispose:()=>{}};(void 0===e.placement||"mouse"===e.placement)&&i.add(n.nm(t,n.tw.MOUSE_MOVE,e=>{o.x=e.x+10,e.target instanceof HTMLElement&&e.target.classList.contains("action-label")&&hideHover(!0,!0)},!0)),i.add(triggerShowHover(e.delay,!1,o)),s=i},!0),_=n.nm(t,n.tw.FOCUS,()=>{if(c||s)return;let i=new d.SL;i.add(n.nm(t,n.tw.BLUR,()=>hideHover(!0,!0),!0)),i.add(triggerShowHover(e.delay,!1,{targetElements:[t],dispose:()=>{}})),s=i},!0);return{show:e=>{hideHover(!1,!0),triggerShowHover(0,e)},hide:()=>{hideHover(!0,!0)},update:async(e,t)=>{i=e,await (null==l?void 0:l.update(i,void 0,t))},dispose:()=>{f.dispose(),m.dispose(),u.dispose(),g.dispose(),_.dispose(),hideHover(!0,!0)}}}},45776:function(e,t,i){"use strict";i.d(t,{T:function(){return renderLabelWithIcons},h:function(){return renderIcon}});var n=i(70687),o=i(98847);let r=RegExp(`(\\\\)?\\$\\((${o.k.iconNameExpression}(?:${o.k.iconModifierExpression})?)\\)`,"g");function renderLabelWithIcons(e){let t;let i=[],n=0,o=0;for(;null!==(t=r.exec(e));){n<(o=t.index||0)&&i.push(e.substring(n,o)),n=(t.index||0)+t[0].length;let[,r,s]=t;i.push(r?`$(${s})`:renderIcon({id:s}))}return n<e.length&&i.push(e.substring(n)),i}function renderIcon(e){let t=n.$("span");return t.classList.add(...o.k.asClassNameArray(e)),t}},61313:function(e,t,i){"use strict";i.d(t,{pG:function(){return HistoryInputBox},g4:function(){return _}});var n=i(70687),o=i(53426),r=i(60930),s=i(83367),l=i(93864),d=i(80064),c=i(21413),u=i(57605);let ArrayNavigator=class ArrayNavigator{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}};let HistoryNavigator=class HistoryNavigator{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return 0!==this._currentPosition()?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return null===this._navigator.current()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new ArrayNavigator(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){for(let t of(this._history=new Set,e))this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}};var g=i(56660);i(43209);var m=i(46157);let f=n.$,_={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};let InputBox=class InputBox extends c.${constructor(e,t,i){var r;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new u.Q5),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new u.Q5),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=null!==(r=this.options.tooltip)&&void 0!==r?r:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=n.R3(e,f(".monaco-inputbox.idle"));let l=this.options.flexibleHeight?"textarea":"input",c=n.R3(this.element,f(".ibwrapper"));if(this.input=n.R3(c,f(l+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight="number"==typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=n.R3(c,f("div.mirror")),this.mirror.innerText="\xa0",this.scrollableElement=new d.NB(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),n.R3(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(e=>this.input.scrollTop=e.scrollTop));let t=this._register(new o.Y(e.ownerDocument,"selectionchange")),i=u.ju.filter(t.event,()=>{let t=e.ownerDocument.getSelection();return(null==t?void 0:t.anchorNode)===c});this._register(i(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new s.o(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return"number"==typeof this.cachedHeight?this.cachedHeight:n.wn(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return n.H9(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!=typeof this.cachedContentHeight||"number"!=typeof this.cachedHeight||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if("open"===this.state&&(0,g.fS)(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${n.XT(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&((e=this.validation(this.value))?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),null==e?void 0:e.type}stylesForType(e){let t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){let e,t;if(!this.contextViewProvider||!this.message)return;let layout=()=>e.style.width=n.w(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:t=>{var i,o;if(!this.message)return null;e=n.R3(t,f(".monaco-inputbox-container")),layout();let s={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?(0,r.BO)(this.message.content,s):(0,r.IY)(this.message.content,s);l.classList.add(this.classForType(this.message.type));let d=this.stylesForType(this.message.type);return l.style.backgroundColor=null!==(i=d.background)&&void 0!==i?i:"",l.style.color=null!==(o=d.foreground)&&void 0!==o?o:"",l.style.border=d.border?`1px solid ${d.border}`:"",n.R3(e,l),null},onHide:()=>{this.state="closed"},layout:layout}),t=3===this.message.type?m.NC("alertErrorMessage","Error: {0}",this.message.content):2===this.message.type?m.NC("alertWarningMessage","Warning: {0}",this.message.content):m.NC("alertInfoMessage","Info: {0}",this.message.content),l.Z9(t),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,t=e.charCodeAt(e.length-1),i=10===t?" ":"",n=(e+i).replace(/\u000c/g,"");n?this.mirror.textContent=e+i:this.mirror.innerText="\xa0",this.layout()}applyStyles(){var e,t,i;let o=this.options.inputBoxStyles,r=null!==(e=o.inputBackground)&&void 0!==e?e:"",s=null!==(t=o.inputForeground)&&void 0!==t?t:"",l=null!==(i=o.inputBorder)&&void 0!==i?i:"";this.element.style.backgroundColor=r,this.element.style.color=s,this.input.style.backgroundColor="inherit",this.input.style.color=s,this.element.style.border=`1px solid ${n.XT(l,"transparent")}`}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=n.wn(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,o=t.value;null!==i&&null!==n&&(this.value=o.substr(0,i)+e+o.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,null===(e=this.actionbar)||void 0===e||e.dispose(),super.dispose()}};let HistoryInputBox=class HistoryInputBox extends InputBox{constructor(e,t,i){let o=m.NC({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history",`\u21C5`),r=m.NC({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)",`\u21C5`);super(e,t,i),this._onDidFocus=this._register(new u.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new u.Q5),this.onDidBlur=this._onDidBlur.event,this.history=new HistoryNavigator(i.history,100);let addSuffix=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){let e=this.placeholder.endsWith(")")?o:r,t=this.placeholder+e;i.showPlaceholderOnFocus&&!n.H9(this.input)?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver((e,t)=>{e.forEach(e=>{e.target.textContent||addSuffix()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>addSuffix()),this.onblur(this.input,()=>{let resetPlaceholder=e=>{if(!this.placeholder.endsWith(e))return!1;{let t=this.placeholder.slice(0,this.placeholder.length-e.length);return i.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}};resetPlaceholder(r)||resetPlaceholder(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=null!=e?e:"",l.i7(this.value?this.value:m.NC("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,l.i7(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}},835:function(e,t,i){"use strict";i.d(t,{F:function(){return d},e:function(){return KeybindingLabel}});var n=i(70687),o=i(61141),r=i(56660);i(63080);var s=i(46157);let l=n.$,d={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};let KeybindingLabel=class KeybindingLabel{constructor(e,t,i){this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);let o=this.options.keybindingLabelForeground;this.domNode=n.R3(e,l(".monaco-keybinding")),o&&(this.domNode.style.color=o),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&KeybindingLabel.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){let t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let e=1;e<t.length;e++)n.R3(this.domNode,l("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[e],this.matches?this.matches.chordPart:null);let i=null!==(e=this.options.disableTitle)&&void 0!==e&&e?void 0:this.keybinding.getAriaLabel()||void 0;void 0!==i?this.domNode.title=i:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){n.PO(this.domNode),this.keyElements.clear()}renderChord(e,t,i){let n=o.xo.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,!!(null==i?void 0:i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,!!(null==i?void 0:i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,!!(null==i?void 0:i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,!!(null==i?void 0:i.metaKey),n.separator);let r=t.keyLabel;r&&this.renderKey(e,r,!!(null==i?void 0:i.keyCode),"")}renderKey(e,t,i,o){n.R3(e,this.createKeyElement(t,i?".highlight":"")),o&&n.R3(e,l("span.monaco-keybinding-key-separator",void 0,o))}renderUnbound(e){n.R3(e,this.createKeyElement((0,s.NC)("unbound","Unbound")))}createKeyElement(e,t=""){let i=l("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&(0,r.fS)(e.firstPart,t.firstPart)&&(0,r.fS)(e.chordPart,t.chordPart)}}},75365:function(e,t,i){"use strict";i.d(t,{kX:function(){return ElementsDragAndDropData},Bv:function(){return ListView}});var n=i(41256),o=i(70687),r=i(53426),s=i(33482),l=i(80064),d=i(34794),c=i(66614),u=i(40414),g=i(57605),m=i(87932),f=i(21301),_=i(31108);function groupIntersect(e,t){let i=[];for(let n of t){if(e.start>=n.range.end)continue;if(e.end<n.range.start)break;let t=f.e.intersect(e,n.range);f.e.isEmpty(t)||i.push({range:t,size:n.size})}return i}function shift({start:e,end:t},i){return{start:e+i,end:t+i}}function consolidate(e){let t=[],i=null;for(let n of e){let e=n.range.start,o=n.range.end,r=n.size;if(i&&r===i.size){i.range.end=o;continue}i={range:{start:e,end:o},size:r},t.push(i)}return t}function concat(...e){return consolidate(e.reduce((e,t)=>e.concat(t),[]))}let RangeMap=class RangeMap{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=null!=e?e:0,this._size=this._paddingTop}splice(e,t,i=[]){let n=i.length-t,o=groupIntersect({start:0,end:e},this.groups),r=groupIntersect({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(e=>({range:shift(e.range,n),size:e.size})),s=i.map((t,i)=>({range:{start:e+i,end:e+i+1},size:t.size}));this.groups=concat(o,s,r),this._size=this._paddingTop+this.groups.reduce((e,t)=>e+t.size*(t.range.end-t.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return -1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(let n of this.groups){let o=n.range.end-n.range.start,r=i+o*n.size;if(e<r)return t+Math.floor((e-i)/n.size);t+=o,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return -1;let t=0,i=0;for(let n of this.groups){let o=n.range.end-n.range.start,r=i+o;if(e<r)return this._paddingTop+t+(e-i)*n.size;t+=o*n.size,i=r}return -1}};function removeFromParent(e){var t;try{null===(t=e.parentElement)||void 0===t||t.removeChild(e)}catch(e){}}let RowCache=class RowCache{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)(i=this.transactionNodesPendingRemoval.has(t.domNode))&&this.transactionNodesPendingRemoval.delete(t.domNode);else{let i=(0,o.$)(".monaco-list-row"),n=this.getRenderer(e),r=n.renderTemplate(i);t={domNode:i,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let e of this.transactionNodesPendingRemoval)this.doRemoveNode(e);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t));let n=this.getTemplateCache(i);n.push(e)}doRemoveNode(e){e.classList.remove("scrolling"),removeFromParent(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let i of e){let e=this.getRenderer(t);e.disposeTemplate(i.templateData),i.templateData=null}}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw Error(`No renderer found for ${e}`);return t}};var v=i(17861),C=i(78007),__decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};let b={CurrentDragAndDropData:void 0},S={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:e=>[e],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};let ElementsDragAndDropData=class ElementsDragAndDropData{constructor(e){this.elements=e}update(){}getData(){return this.elements}};let ExternalElementsDragAndDropData=class ExternalElementsDragAndDropData{constructor(e){this.elements=e}update(){}getData(){return this.elements}};let NativeDragAndDropData=class NativeDragAndDropData{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}};function equalsDragFeedback(e,t){return Array.isArray(e)&&Array.isArray(t)?(0,d.fS)(e,t):e===t}let ListViewAccessibilityProvider=class ListViewAccessibilityProvider{constructor(e){(null==e?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,i)=>i,(null==e?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,(null==e?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=e=>"listitem",(null==e?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>void 0}};let ListView=class ListView{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,o.FK)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,n=S){var r,d,u,f,v,C,b,y,w,L,k,D,x;if(this.virtualDelegate=t,this.domId=`list_id_${++ListView.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new c.vp(50),this.splicing=!1,this.dragOverAnimationStopDisposable=m.JT.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=m.JT.None,this.onDragLeaveTimeout=m.JT.None,this.disposables=new m.SL,this._onDidChangeContentHeight=new g.Q5,this._onDidChangeContentWidth=new g.Q5,this.onDidChangeContentHeight=g.ju.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw Error("Horizontal scrolling and dynamic heights not supported simultaneously");for(let e of(this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(null!==(r=n.paddingTop)&&void 0!==r?r:0),i))this.renderers.set(e.templateId,e);this.cache=this.disposables.add(new RowCache(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof n.mouseSupport||n.mouseSupport),this._horizontalScrolling=null!==(d=n.horizontalScrolling)&&void 0!==d?d:S.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=void 0===n.paddingBottom?0:n.paddingBottom,this.accessibilityProvider=new ListViewAccessibilityProvider(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";let N=null!==(u=n.transformOptimization)&&void 0!==u?u:S.transformOptimization;N&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(s.o.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new _.Rm({forceIntegerValues:!0,smoothScrollDuration:null!==(f=n.smoothScrolling)&&void 0!==f&&f?125:0,scheduleAtNextAnimationFrame:e=>(0,o.jL)((0,o.Jj)(this.domNode),e)})),this.scrollableElement=this.disposables.add(new l.$Z(this.rowsContainer,{alwaysConsumeMouseWheel:null!==(v=n.alwaysConsumeMouseWheel)&&void 0!==v?v:S.alwaysConsumeMouseWheel,horizontal:1,vertical:null!==(C=n.verticalScrollMode)&&void 0!==C?C:S.verticalScrollMode,useShadows:null!==(b=n.useShadows)&&void 0!==b?b:S.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,o.nm)(this.rowsContainer,s.t.Change,e=>this.onTouchChange(e))),this.disposables.add((0,o.nm)(this.scrollableElement.getDomNode(),"scroll",e=>e.target.scrollTop=0)),this.disposables.add((0,o.nm)(this.domNode,"dragover",e=>this.onDragOver(this.toDragEvent(e)))),this.disposables.add((0,o.nm)(this.domNode,"drop",e=>this.onDrop(this.toDragEvent(e)))),this.disposables.add((0,o.nm)(this.domNode,"dragleave",e=>this.onDragLeave(this.toDragEvent(e)))),this.disposables.add((0,o.nm)(this.domNode,"dragend",e=>this.onDragEnd(e))),this.setRowLineHeight=null!==(y=n.setRowLineHeight)&&void 0!==y?y:S.setRowLineHeight,this.setRowHeight=null!==(w=n.setRowHeight)&&void 0!==w?w:S.setRowHeight,this.supportDynamicHeights=null!==(L=n.supportDynamicHeights)&&void 0!==L?L:S.supportDynamicHeights,this.dnd=null!==(k=n.dnd)&&void 0!==k?k:this.disposables.add(S.dnd),this.layout(null===(D=n.initialSize)||void 0===D?void 0:D.height,null===(x=n.initialSize)||void 0===x?void 0:x.width)}updateOptions(e){let t;if(void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.scrollByPage&&(t={...null!=t?t:{},scrollByPage:e.scrollByPage}),void 0!==e.mouseWheelScrollSensitivity&&(t={...null!=t?t:{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),void 0!==e.fastScrollSensitivity&&(t={...null!=t?t:{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),void 0!==e.paddingTop&&e.paddingTop!==this.rangeMap.paddingTop){let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(t,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new RangeMap(e)}splice(e,t,i=[]){if(this.splicing)throw Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){let n;let o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r=f.e.intersect(o,{start:e,end:e+t}),s=new Map;for(let e=r.end-1;e>=r.start;e--){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let i=s.get(t.templateId);i||(i=[],s.set(t.templateId,i));let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),i.push(t.row)}t.row=null,t.stale=!0}let l={start:e+t,end:this.items.length},d=f.e.intersect(l,o),c=f.e.relativeComplement(l,o),u=i.map(e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:m.JT.None,checkedDisposable:m.JT.None,stale:!1}));0===e&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),n=this.items,this.items=u):(this.rangeMap.splice(e,t,u),n=this.items.splice(e,t,...u));let g=i.length-t,_=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),v=shift(d,g),C=f.e.intersect(_,v);for(let e=C.start;e<C.end;e++)this.updateItemInDOM(this.items[e],e);let b=f.e.relativeComplement(v,_);for(let e of b)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);let S=c.map(e=>shift(e,g)),y={start:e,end:e+i.length},w=[y,...S].map(e=>f.e.intersect(_,e)).reverse();for(let e of w)for(let t=e.end-1;t>=e.start;t--){let e=this.items[t],i=s.get(e.templateId),n=null==i?void 0:i.pop();this.insertItemInDOM(t,n)}for(let e of s.values())for(let t of e)this.cache.release(t);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),n.map(e=>e.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,o.jL)((0,o.Jj)(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)void 0!==t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){let e=this.scrollableElement.getScrollDimensions();return e.height}get firstVisibleIndex(){let e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);return e.start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let i={height:"number"==typeof e?e:(0,o.If)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),void 0!==t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof t?t:(0,o.FK)(this.domNode)})}render(e,t,i,n,o,r=!1){let s=this.getRenderRange(t,i),l=f.e.relativeComplement(s,e).reverse(),d=f.e.relativeComplement(e,s);if(r){let t=f.e.intersect(e,s);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}this.cache.transact(()=>{for(let e of d)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);for(let e of l)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t)}),void 0!==n&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&void 0!==o&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var i,n,r;let s=this.items[e];if(!s.row){if(t)s.row=t,s.stale=!0;else{let e=this.cache.alloc(s.templateId);s.row=e.row,s.stale||(s.stale=e.isReusingConnectedDomNode)}}let l=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",l);let d=this.accessibilityProvider.isChecked(s.element);if("boolean"==typeof d)s.row.domNode.setAttribute("aria-checked",String(!!d));else if(d){let update=e=>s.row.domNode.setAttribute("aria-checked",String(!!e));update(d.value),s.checkedDisposable=d.onDidChange(update)}if(s.stale||!s.row.domNode.parentElement){let t=null!==(r=null===(n=null===(i=this.items.at(e+1))||void 0===i?void 0:i.row)||void 0===n?void 0:n.domNode)&&void 0!==r?r:null;this.rowsContainer.insertBefore(s.row.domNode,t),s.stale=!1}this.updateItemInDOM(s,e);let c=this.renderers.get(s.templateId);if(!c)throw Error(`No renderer found for template id ${s.templateId}`);null==c||c.renderElement(s.element,e,s.row.templateData,s.size);let u=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!u,u&&(s.dragStartDisposable=(0,o.nm)(s.row.domNode,"dragstart",e=>this.onDragStart(s.element,u,e))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=(0,o.FK)(e.row.domNode);let t=(0,o.Jj)(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2==0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){let e=this.scrollableElement.getScrollPosition();return e.scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return g.ju.map(this.disposables.add(new r.Y(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return g.ju.map(this.disposables.add(new r.Y(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return g.ju.filter(g.ju.map(this.disposables.add(new r.Y(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>1===e.browserEvent.button,this.disposables)}get onMouseDown(){return g.ju.map(this.disposables.add(new r.Y(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return g.ju.map(this.disposables.add(new r.Y(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return g.ju.map(this.disposables.add(new r.Y(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return g.ju.any(g.ju.map(this.disposables.add(new r.Y(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),g.ju.map(this.disposables.add(new r.Y(this.domNode,s.t.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return g.ju.map(this.disposables.add(new r.Y(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return g.ju.map(this.disposables.add(new r.Y(this.rowsContainer,s.t.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=void 0===t?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t],n=i&&i.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:n,sector:o}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var r,s;if(!i.dataTransfer)return;let l=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(n.g.TEXT,t),i.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(l,i)),void 0===e&&(e=String(l.length));let t=(0,o.$)(".monaco-drag-image");t.textContent=e;let n=(e=>{for(;e&&!e.classList.contains("monaco-workbench");)e=e.parentElement;return e||this.domNode.ownerDocument})(this.domNode);n.appendChild(t),i.dataTransfer.setDragImage(t,-10,-10),setTimeout(()=>n.removeChild(t),0)}this.domNode.classList.add("dragging"),this.currentDragData=new ElementsDragAndDropData(l),b.CurrentDragAndDropData=new ExternalElementsDragAndDropData(l),null===(s=(r=this.dnd).onDragStart)||void 0===s||s.call(r,this.currentDragData,i)}onDragOver(e){var t,i;let n;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),b.CurrentDragAndDropData&&"vscode-ui"===b.CurrentDragAndDropData.getData()||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData){if(b.CurrentDragAndDropData)this.currentDragData=b.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new NativeDragAndDropData}}let o=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop="boolean"==typeof o?o:o.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect="boolean"!=typeof o&&(null===(t=o.effect)||void 0===t?void 0:t.type)===0?"copy":"move",n="boolean"!=typeof o&&o.feedback?o.feedback:void 0===e.index?[-1]:[e.index],n=-1===(n=(0,d.EB)(n).filter(e=>e>=-1&&e<this.length).sort((e,t)=>e-t))[0]?[-1]:n;let r="boolean"!=typeof o&&o.effect&&o.effect.position?o.effect.position:"drop-target";if(equalsDragFeedback(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===r)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=r,this.currentDragFeedbackDisposable.dispose(),-1===n[0])this.domNode.classList.add(r),this.rowsContainer.classList.add(r),this.currentDragFeedbackDisposable=(0,m.OF)(()=>{this.domNode.classList.remove(r),this.rowsContainer.classList.remove(r)});else{if(n.length>1&&"drop-target"!==r)throw Error("Can't use multiple feedbacks with position different than 'over'");for(let e of("drop-target-after"===r&&n[0]<this.length-1&&(n[0]+=1,r="drop-target-before"),n)){let t=this.items[e];t.dropTarget=!0,null===(i=t.row)||void 0===i||i.domNode.classList.add(r)}this.currentDragFeedbackDisposable=(0,m.OF)(()=>{var e;for(let t of n){let i=this.items[t];i.dropTarget=!1,null===(e=i.row)||void 0===e||e.domNode.classList.remove(r)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,c.Vg)(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&(null===(i=(t=this.dnd).onDragLeave)||void 0===i||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,b.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,b.CurrentDragAndDropData=void 0,null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=m.JT.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let e=(0,o.xQ)(this.domNode).top;this.dragOverAnimationDisposable=(0,o.jt)((0,o.Jj)(this.domNode),this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,c.Vg)(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;let t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(void 0===t)return;let i=e.offsetY/this.items[t].size;return(0,C.uZ)(Math.floor(i/.25),0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){let e=i.getAttribute("data-index");if(e){let t=Number(e);if(!isNaN(t))return t}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){let n,o;let r=this.getRenderRange(e,t);e===this.elementTop(r.start)?(n=r.start,o=0):r.end-r.start>1&&(n=r.start+1,o=this.elementTop(n)-e);let s=0;for(;;){let l=this.getRenderRange(e,t),d=!1;for(let e=l.start;e<l.end;e++){let t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),s+=t,d=d||0!==t}if(!d){0!==s&&this.eventuallyUpdateScrollDimensions();let t=f.e.relativeComplement(r,l);for(let e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);let d=f.e.relativeComplement(l,r).reverse();for(let e of d)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t);for(let e=l.start;e<l.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"==typeof n){let t=this.scrollable.getFutureScrollPosition().scrollTop-e,r=this.elementTop(n)-o+t;this.setScrollTop(r,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,i,n;let o=this.items[e];if(this.virtualDelegate.getDynamicHeight){let e=this.virtualDelegate.getDynamicHeight(o.element);if(null!==e){let t=o.size;return o.size=e,o.lastDynamicHeightWidth=this.renderWidth,e-t}}if(!o.hasDynamicHeight||o.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(o.element))return 0;let r=o.size;if(o.row)return o.row.domNode.style.height="",o.size=o.row.domNode.offsetHeight,o.lastDynamicHeightWidth=this.renderWidth,o.size-r;let{row:s}=this.cache.alloc(o.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);let l=this.renderers.get(o.templateId);if(!l)throw new v.he("Missing renderer for templateId: "+o.templateId);return l.renderElement(o.element,e,s.templateData,void 0),o.size=s.domNode.offsetHeight,null===(t=l.disposeElement)||void 0===t||t.call(l,o.element,e,s.templateData,void 0),null===(n=(i=this.virtualDelegate).setDynamicHeight)||void 0===n||n.call(i,o.element,o.size),o.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(s.domNode),this.cache.release(s),o.size-r}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t;for(let t of this.items)if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let i=this.renderers.get(t.row.templateId);i&&(null===(e=i.disposeElement)||void 0===e||e.call(i,t.element,-1,t.row.templateData,void 0),i.disposeTemplate(t.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),null===(t=this.dragOverAnimationDisposable)||void 0===t||t.dispose(),this.disposables.dispose()}};ListView.InstanceCount=0,__decorate([u.H],ListView.prototype,"onMouseClick",null),__decorate([u.H],ListView.prototype,"onMouseDblClick",null),__decorate([u.H],ListView.prototype,"onMouseMiddleClick",null),__decorate([u.H],ListView.prototype,"onMouseDown",null),__decorate([u.H],ListView.prototype,"onMouseOver",null),__decorate([u.H],ListView.prototype,"onMouseOut",null),__decorate([u.H],ListView.prototype,"onContextMenu",null),__decorate([u.H],ListView.prototype,"onTouchStart",null),__decorate([u.H],ListView.prototype,"onTap",null)},88660:function(e,t,i){"use strict";i.d(t,{wD:function(){return DefaultStyleController},aV:function(){return List},sx:function(){return MouseController},AA:function(){return r},dk:function(){return isActionItem},iK:function(){return isButton},cK:function(){return isInputElement},$B:function(){return isMonacoCustomToggle},hD:function(){return isMonacoEditor},wn:function(){return isSelectionRangeChangeEvent},Zo:function(){return isSelectionSingleChangeEvent},xf:function(){return isStickyScrollContainer},Et:function(){return isStickyScrollElement},uZ:function(){return E}});var n,o,r,s,l=i(70687),d=i(53426),c=i(58731),u=i(33482),g=i(93864);let CombinedSpliceable=class CombinedSpliceable{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}};var m=i(34794),f=i(66614),_=i(50164),v=i(40414),C=i(57605),b=i(61171),S=i(87932),y=i(78007),w=i(88059),L=i(16877);i(50301);let ListError=class ListError extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};var k=i(75365),D=i(31498),__decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};let TraitRenderer=class TraitRenderer{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){let n=this.renderedElements.findIndex(e=>e.templateData===i);if(n>=0){let e=this.renderedElements[n];this.trait.unrender(i),e.index=t}else this.renderedElements.push({index:t,templateData:i});this.trait.renderIndex(t,i)}splice(e,t,i){let n=[];for(let o of this.renderedElements)o.index<e?n.push(o):o.index>=e+t&&n.push({index:o.index+i-t,templateData:o.templateData});this.renderedElements=n}renderIndexes(e){for(let{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){let t=this.renderedElements.findIndex(t=>t.templateData===e);t<0||this.renderedElements.splice(t,1)}};let Trait=class Trait{get name(){return this._trait}get renderer(){return new TraitRenderer(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new C.Q5,this.onChange=this._onChange.event}splice(e,t,i){let n=i.length-t,o=e+t,r=[],s=0;for(;s<this.sortedIndexes.length&&this.sortedIndexes[s]<e;)r.push(this.sortedIndexes[s++]);for(let t=0;t<i.length;t++)i[t]&&r.push(t+e);for(;s<this.sortedIndexes.length&&this.sortedIndexes[s]>=o;)r.push(this.sortedIndexes[s++]+n);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(numericSort),t)}_set(e,t,i){let n=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let r=disjunction(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return(0,m.ry)(this.sortedIndexes,e,numericSort)>=0}dispose(){(0,S.B9)(this._onChange)}};__decorate([v.H],Trait.prototype,"renderer",null);let SelectionTrait=class SelectionTrait extends Trait{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}};let TraitSpliceable=class TraitSpliceable{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,Array(i.length).fill(!1));let n=this.trait.get().map(e=>this.identityProvider.getId(this.view.element(e)).toString());if(0===n.length)return this.trait.splice(e,t,Array(i.length).fill(!1));let o=new Set(n),r=i.map(e=>o.has(this.identityProvider.getId(e).toString()));this.trait.splice(e,t,r)}};function isInputElement(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function isListElementDescendantOfClass(e,t){return!!e.classList.contains(t)||!e.classList.contains("monaco-list")&&!!e.parentElement&&isListElementDescendantOfClass(e.parentElement,t)}function isMonacoEditor(e){return isListElementDescendantOfClass(e,"monaco-editor")}function isMonacoCustomToggle(e){return isListElementDescendantOfClass(e,"monaco-custom-toggle")}function isActionItem(e){return isListElementDescendantOfClass(e,"action-item")}function isStickyScrollElement(e){return isListElementDescendantOfClass(e,"monaco-tree-sticky-row")}function isStickyScrollContainer(e){return e.classList.contains("monaco-tree-sticky-container")}function isButton(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!e.classList.contains("monaco-list")&&!!e.parentElement&&isButton(e.parentElement)}let KeyboardController=class KeyboardController{get onKeyDown(){return C.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keydown")).event,e=>e.filter(e=>!isInputElement(e.target)).map(e=>new c.y(e)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new S.SL,this.multipleSelectionDisposables=new S.SL,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(e=>{switch(e.keyCode){case 3:return this.onEnter(e);case 16:return this.onUpArrow(e);case 18:return this.onDownArrow(e);case 11:return this.onPageUpArrow(e);case 12:return this.onPageDownArrow(e);case 9:return this.onEscape(e);case 31:this.multipleSelectionSupport&&(w.dz?e.metaKey:e.ctrlKey)&&this.onCtrlA(e)}}))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection((0,m.w6)(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};__decorate([v.H],KeyboardController.prototype,"onKeyDown",null),(n=r||(r={}))[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger",(o=s||(s={}))[o.Idle=0]="Idle",o[o.Typing=1]="Typing";let x=new class{mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&!e.altKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=98&&e.keyCode<=107||e.keyCode>=85&&e.keyCode<=95)}};let TypeNavigationController=class TypeNavigationController{constructor(e,t,i,n,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=o,this.enabled=!1,this.state=s.Idle,this.mode=r.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new S.SL,this.disposables=new S.SL,this.updateOptions(e.options)}updateOptions(e){var t,i;null===(t=e.typeNavigationEnabled)||void 0===t||t?this.enable():this.disable(),this.mode=null!==(i=e.typeNavigationMode)&&void 0!==i?i:r.Automatic}enable(){if(this.enabled)return;let e=!1,t=C.ju.chain(this.enabledDisposables.add(new d.Y(this.view.domNode,"keydown")).event,t=>t.filter(e=>!isInputElement(e.target)).filter(()=>this.mode===r.Automatic||this.triggered).map(e=>new c.y(e)).filter(t=>e||this.keyboardNavigationEventFilter(t)).filter(e=>this.delegate.mightProducePrintableCharacter(e)).forEach(e=>l.zB.stop(e,!0)).map(e=>e.browserEvent.key)),i=C.ju.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables),n=C.ju.reduce(C.ju.any(t,i),(e,t)=>null===t?null:(e||"")+t,void 0,this.enabledDisposables);n(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;let t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){let i=null===(e=this.list.options.accessibilityProvider)||void 0===e?void 0:e.getAriaLabel(this.list.element(t[0]));i&&(0,g.Z9)(i)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=s.Idle,this.triggered=!1;return}let t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===s.Idle?1:0;this.state=s.Typing;for(let t=0;t<this.list.length;t++){let o=(i+t+n)%this.list.length,r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),s=r&&r.toString();if(this.list.options.typeNavigationEnabled){if(void 0!==s){if((0,b.Ji)(e,s)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}let t=(0,b.XU)(e,s);if(t){let e=t[0].end-t[0].start;if(e>1&&1===t.length){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}}else if(void 0===s||(0,b.Ji)(e,s)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}};let DOMFocusController=class DOMFocusController{constructor(e,t){this.list=e,this.view=t,this.disposables=new S.SL;let i=C.ju.chain(this.disposables.add(new d.Y(t.domNode,"keydown")).event,e=>e.filter(e=>!isInputElement(e.target)).map(e=>new c.y(e))),n=C.ju.chain(i,e=>e.filter(e=>2===e.keyCode&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey));n(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(0===t.length)return;let i=this.view.domElement(t[0]);if(!i)return;let n=i.querySelector("[tabIndex]");if(!n||!(n instanceof HTMLElement)||-1===n.tabIndex)return;let o=(0,l.Jj)(n).getComputedStyle(n);"hidden"!==o.visibility&&"none"!==o.display&&(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}};function isSelectionSingleChangeEvent(e){return w.dz?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function isSelectionRangeChangeEvent(e){return e.browserEvent.shiftKey}function isMouseRightClick(e){return(0,l.N5)(e)&&2===e.button}let N={isSelectionSingleChangeEvent,isSelectionRangeChangeEvent};let MouseController=class MouseController{constructor(e){this.list=e,this.disposables=new S.SL,this._onPointer=new C.Q5,this.onPointer=this._onPointer.event,!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||N),this.mouseSupport=void 0===e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(u.o.addTarget(e.getHTMLElement()))),C.ju.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||N))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){isMonacoEditor(e.browserEvent.target)||(0,l.vY)()===e.browserEvent.target||this.list.domFocus()}onContextMenu(e){if(isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target))return;let t=void 0===e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(void 0===t){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),isMouseRightClick(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(void 0===i){let e=this.list.getFocus()[0];i=null!=e?e:t,this.list.setAnchor(i)}let n=Math.min(i,t),o=Math.max(i,t),r=(0,m.w6)(n,o+1),s=this.list.getSelection(),l=getContiguousRangeContaining(disjunction(s,[i]),i);if(0===l.length)return;let d=disjunction(r,relativeComplement(s,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let i=this.list.getSelection(),n=i.filter(e=>e!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===n.length?this.list.setSelection([...n,t],e.browserEvent):this.list.setSelection(n,e.browserEvent)}}dispose(){this.disposables.dispose()}};let DefaultStyleController=class DefaultStyleController{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,i;let n=this.selectorSuffix&&`.${this.selectorSuffix}`,o=[];e.listBackground&&o.push(`.monaco-list${n} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(o.push(`.monaco-list${n}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),o.push(`.monaco-list${n}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&o.push(`.monaco-list${n}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(o.push(`.monaco-list${n}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),o.push(`.monaco-list${n}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&o.push(`.monaco-list${n}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&o.push(`.monaco-list${n}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&o.push(`
				.monaco-drag-image,
				.monaco-list${n}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&o.push(`
				.monaco-drag-image,
				.monaco-list${n}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(o.push(`.monaco-list${n} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),o.push(`.monaco-list${n} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&o.push(`.monaco-list${n} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(o.push(`.monaco-list${n} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),o.push(`.monaco-list${n} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(o.push(`.monaco-list${n} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),o.push(`.monaco-list${n} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&o.push(`.monaco-list${n} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&o.push(`.monaco-list${n}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&o.push(`.monaco-list${n}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let r=(0,l.XT)(e.listFocusAndSelectionOutline,(0,l.XT)(e.listSelectionOutline,null!==(t=e.listFocusOutline)&&void 0!==t?t:""));r&&o.push(`.monaco-list${n}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&o.push(`
				.monaco-drag-image,
				.monaco-list${n}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${n}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);let s=(0,l.XT)(e.listSelectionOutline,null!==(i=e.listInactiveFocusOutline)&&void 0!==i?i:"");s&&o.push(`.monaco-list${n} .monaco-list-row.focused.selected { outline: 1px dotted ${s}; outline-offset: -1px; }`),e.listSelectionOutline&&o.push(`.monaco-list${n} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&o.push(`.monaco-list${n} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&o.push(`.monaco-list${n} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&o.push(`
				.monaco-list${n}.drop-target,
				.monaco-list${n} .monaco-list-rows.drop-target,
				.monaco-list${n} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(o.push(`
			.monaco-list${n} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${n} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),o.push(`
			.monaco-list${n} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${n} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&o.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&o.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=o.join("\n")}};let E={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:_.Il.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:_.Il.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:_.Il.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},I={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}}};function getContiguousRangeContaining(e,t){let i=e.indexOf(t);if(-1===i)return[];let n=[],o=i-1;for(;o>=0&&e[o]===t-(i-o);)n.push(e[o--]);for(n.reverse(),o=i;o<e.length&&e[o]===t+(o-i);)n.push(e[o++]);return n}function disjunction(e,t){let i=[],n=0,o=0;for(;n<e.length||o<t.length;)if(n>=e.length)i.push(t[o++]);else if(o>=t.length)i.push(e[n++]);else if(e[n]===t[o]){i.push(e[n]),n++,o++;continue}else e[n]<t[o]?i.push(e[n++]):i.push(t[o++]);return i}function relativeComplement(e,t){let i=[],n=0,o=0;for(;n<e.length||o<t.length;)if(n>=e.length)i.push(t[o++]);else if(o>=t.length)i.push(e[n++]);else if(e[n]===t[o]){n++,o++;continue}else e[n]<t[o]?i.push(e[n++]):o++;return i}let numericSort=(e,t)=>e-t;let PipelineRenderer=class PipelineRenderer{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let o=0;for(let r of this.renderers)r.renderElement(e,t,i[o++],n)}disposeElement(e,t,i,n){var o;let r=0;for(let s of this.renderers)null===(o=s.disposeElement)||void 0===o||o.call(s,e,t,i[r],n),r+=1}disposeTemplate(e){let t=0;for(let i of this.renderers)i.disposeTemplate(e[t++])}};let AccessibiltyRenderer=class AccessibiltyRenderer{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,i){let n=this.accessibilityProvider.getAriaLabel(e);n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label");let o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"==typeof o?i.setAttribute("aria-level",`${o}`):i.removeAttribute("aria-level")}disposeTemplate(e){}};let ListViewDragAndDrop=class ListViewDragAndDrop{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements(),i=t.indexOf(e)>-1?t:[e];return i}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,n;null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,e,t)}onDragOver(e,t,i,n,o){return this.dnd.onDragOver(e,t,i,n,o)}onDragLeave(e,t,i,n){var o,r;null===(r=(o=this.dnd).onDragLeave)||void 0===r||r.call(o,e,t,i,n)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}drop(e,t,i,n,o){this.dnd.drop(e,t,i,n,o)}dispose(){this.dnd.dispose()}};let List=class List{get onDidChangeFocus(){return C.ju.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return C.ju.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=C.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keydown")).event,t=>t.map(e=>new c.y(e)).filter(t=>e=58===t.keyCode||t.shiftKey&&68===t.keyCode).map(e=>l.zB.stop(e,!0)).filter(()=>!1)),i=C.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keyup")).event,t=>t.forEach(()=>e=!1).map(e=>new c.y(e)).filter(e=>58===e.keyCode||e.shiftKey&&68===e.keyCode).map(e=>l.zB.stop(e,!0)).map(({browserEvent:e})=>{let t=this.getFocus(),i=t.length?t[0]:void 0,n=void 0!==i?this.view.element(i):void 0,o=void 0!==i?this.view.domElement(i):this.view.domNode;return{index:i,element:n,anchor:o,browserEvent:e}})),n=C.ju.chain(this.view.onContextMenu,t=>t.filter(t=>!e).map(({element:e,index:t,browserEvent:i})=>({element:e,index:t,anchor:new D.n((0,l.Jj)(this.view.domNode),i),browserEvent:i})));return C.ju.any(t,i,n)}get onKeyDown(){return this.disposables.add(new d.Y(this.view.domNode,"keydown")).event}get onDidFocus(){return C.ju.signal(this.disposables.add(new d.Y(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return C.ju.signal(this.disposables.add(new d.Y(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n,o=I){var r,s,d,c;this.user=e,this._options=o,this.focus=new Trait("focused"),this.anchor=new Trait("anchor"),this.eventBufferer=new C.E7,this._ariaLabel="",this.disposables=new S.SL,this._onDidDispose=new C.Q5,this.onDidDispose=this._onDidDispose.event;let u=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(r=this._options.accessibilityProvider)||void 0===r?void 0:r.getWidgetRole():"list";this.selection=new SelectionTrait("listbox"!==u);let g=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(g.push(new AccessibiltyRenderer(this.accessibilityProvider)),null===(d=(s=this.accessibilityProvider).onDidChangeActiveDescendant)||void 0===d||d.call(s,this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(e=>new PipelineRenderer(e.templateId,[...g,e]));let m={...o,dnd:o.dnd&&new ListViewDragAndDrop(this,o.dnd)};if(this.view=this.createListView(t,i,n,m),this.view.domNode.setAttribute("role",u),o.styleController)this.styleController=o.styleController(this.view.domId);else{let e=(0,l.dS)(this.view.domNode);this.styleController=new DefaultStyleController(e,this.view.domId)}if(this.spliceable=new CombinedSpliceable([new TraitSpliceable(this.focus,this.view,o.identityProvider),new TraitSpliceable(this.selection,this.view,o.identityProvider),new TraitSpliceable(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new DOMFocusController(this,this.view)),("boolean"!=typeof o.keyboardSupport||o.keyboardSupport)&&(this.keyboardController=new KeyboardController(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){let e=o.keyboardNavigationDelegate||x;this.typeNavigationController=new TypeNavigationController(this,this.view,o.keyboardNavigationLabelProvider,null!==(c=o.keyboardNavigationEventFilter)&&void 0!==c?c:()=>!0,e),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new k.Bv(e,t,i,n)}createMouseController(e){return new MouseController(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},null===(t=this.typeNavigationController)||void 0===t||t.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),null===(i=this.keyboardController)||void 0===i||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new ListError(this.user,`Invalid start index: ${e}`);if(t<0)throw new ListError(this.user,`Invalid delete count: ${t}`);(0!==t||0!==i.length)&&this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(let t of e)if(t<0||t>=this.length)throw new ListError(this.user,`Invalid index ${t}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(void 0===e){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return(0,m.Xh)(this.anchor.get(),void 0)}getAnchorElement(){let e=this.getAnchor();return void 0===e?void 0:this.element(e)}setFocus(e,t){for(let t of e)if(t<0||t>=this.length)throw new ListError(this.user,`Invalid index ${t}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(0===this.length)return;let o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,n);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,n){if(0===this.length)return;let o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,n);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=0===i?0:i-1;let n=this.getFocus()[0];if(n!==i&&(void 0===n||i>n)){let o=this.findPreviousIndex(i,!1,t);o>-1&&n!==o?this.setFocus([o],e):this.setFocus([i],e)}else{let o=this.view.getScrollTop(),r=o+this.view.renderHeight;i>n&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),await (0,f.Vs)(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let n;let o=i(),r=this.view.getScrollTop()+o;n=0===r?this.view.indexAt(r):this.view.indexAfter(r-1);let s=this.getFocus()[0];if(s!==n&&(void 0===s||s>=n)){let i=this.findNextIndex(n,!1,t);i>-1&&s!==i?this.setFocus([i],e):this.setFocus([n],e)}else this.view.setScrollTop(r-this.view.renderHeight-o),this.view.getScrollTop()+i()!==r&&(this.setFocus([]),await (0,f.Vs)(0),await this.focusPreviousPage(e,t,i))}focusLast(e,t){if(0===this.length)return;let i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(0===this.length)return;let n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length&&(!(e>=this.length)||t);n++){if(e%=this.length,!i||i(this.element(e)))return e;e++}return -1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length&&(!(e<0)||t);n++){if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return -1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if((0,L.hj)(t)){let e=r-this.view.renderHeight+i;this.view.setScrollTop(e*(0,y.uZ)(t,0,1)+o-i)}else{let e=o+r,t=n+this.view.renderHeight;o<n+i&&e>=t||(o<n+i||e>=t&&r>=this.view.renderHeight?this.view.setScrollTop(o-i):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);let i=this.view.getScrollTop(),n=this.view.elementTop(e),o=this.view.elementHeight(e);if(n<i+t||n+o>i+this.view.renderHeight)return null;let r=o-this.view.renderHeight+t;return Math.abs((i+t-n)/r)}isDOMFocused(){return(0,l.H9)(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(e=>this.view.element(e)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;let t=this.focus.get();if(t.length>0){let i;(null===(e=this.accessibilityProvider)||void 0===e?void 0:e.getActiveDescendantId)&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};__decorate([v.H],List.prototype,"onDidChangeFocus",null),__decorate([v.H],List.prototype,"onDidChangeSelection",null),__decorate([v.H],List.prototype,"onContextMenu",null),__decorate([v.H],List.prototype,"onKeyDown",null),__decorate([v.H],List.prototype,"onDidFocus",null),__decorate([v.H],List.prototype,"onDidBlur",null)},46474:function(e,t,i){"use strict";i.d(t,{g:function(){return Sash},l:function(){return o}});var n,o,r=i(70687),s=i(53426),l=i(33482),d=i(66614),c=i(40414),u=i(57605),g=i(87932),m=i(88059);i(29487);var __decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};(n=o||(o={})).North="north",n.South="south",n.East="east",n.West="west";let f=new u.Q5,_=new u.Q5;let MouseEventFactory=class MouseEventFactory{constructor(e){this.el=e,this.disposables=new g.SL}get onPointerMove(){return this.disposables.add(new s.Y((0,r.Jj)(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new s.Y((0,r.Jj)(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};__decorate([c.H],MouseEventFactory.prototype,"onPointerMove",null),__decorate([c.H],MouseEventFactory.prototype,"onPointerUp",null);let GestureEventFactory=class GestureEventFactory{get onPointerMove(){return this.disposables.add(new s.Y(this.el,l.t.Change)).event}get onPointerUp(){return this.disposables.add(new s.Y(this.el,l.t.End)).event}constructor(e){this.el=e,this.disposables=new g.SL}dispose(){this.disposables.dispose()}};__decorate([c.H],GestureEventFactory.prototype,"onPointerMove",null),__decorate([c.H],GestureEventFactory.prototype,"onPointerUp",null);let OrthogonalPointerEventFactory=class OrthogonalPointerEventFactory{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}};__decorate([c.H],OrthogonalPointerEventFactory.prototype,"onPointerMove",null),__decorate([c.H],OrthogonalPointerEventFactory.prototype,"onPointerUp",null);let v="pointer-events-disabled";let Sash=class Sash extends g.JT{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){let onChange=t=>{this.orthogonalStartDragHandleDisposables.clear(),0!==t&&(this._orthogonalStartDragHandle=(0,r.R3)(this.el,(0,r.$)(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,g.OF)(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new s.Y(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Sash.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new s.Y(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Sash.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(onChange,this)),onChange(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){let onChange=t=>{this.orthogonalEndDragHandleDisposables.clear(),0!==t&&(this._orthogonalEndDragHandle=(0,r.R3)(this.el,(0,r.$)(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,g.OF)(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new s.Y(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Sash.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new s.Y(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Sash.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(onChange,this)),onChange(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){let n;super(),this.hoverDelay=300,this.hoverDelayer=this._register(new d.vp(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new u.Q5),this._onDidStart=this._register(new u.Q5),this._onDidChange=this._register(new u.Q5),this._onDidReset=this._register(new u.Q5),this._onDidEnd=this._register(new u.Q5),this.orthogonalStartSashDisposables=this._register(new g.SL),this.orthogonalStartDragHandleDisposables=this._register(new g.SL),this.orthogonalEndSashDisposables=this._register(new g.SL),this.orthogonalEndDragHandleDisposables=this._register(new g.SL),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=(0,r.R3)(e,(0,r.$)(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),m.dz&&this.el.classList.add("mac");let o=this._register(new s.Y(this.el,"mousedown")).event;this._register(o(t=>this.onPointerStart(t,new MouseEventFactory(e)),this));let c=this._register(new s.Y(this.el,"dblclick")).event;this._register(c(this.onPointerDoublePress,this));let v=this._register(new s.Y(this.el,"mouseenter")).event;this._register(v(()=>Sash.onMouseEnter(this)));let C=this._register(new s.Y(this.el,"mouseleave")).event;this._register(C(()=>Sash.onMouseLeave(this))),this._register(l.o.addTarget(this.el));let b=this._register(new s.Y(this.el,l.t.Start)).event;this._register(b(e=>this.onPointerStart(e,new GestureEventFactory(this.el)),this));let S=this._register(new s.Y(this.el,l.t.Tap)).event;this._register(S(e=>{if(n){clearTimeout(n),n=void 0,this.onPointerDoublePress(e);return}clearTimeout(n),n=setTimeout(()=>n=void 0,250)},this)),"number"==typeof i.size?(this.size=i.size,0===i.orientation?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=4,this._register(f.event(e=>{this.size=e,this.layout()}))),this._register(_.event(e=>this.hoverDelay=e)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,1===this.orientation?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",!1),this.layout()}onPointerStart(e,t){r.zB.stop(e);let i=!1;if(!e.__orthogonalSashEvent){let n=this.getOrthogonalSash(e);n&&(i=!0,e.__orthogonalSashEvent=!0,n.onPointerStart(e,new OrthogonalPointerEventFactory(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new OrthogonalPointerEventFactory(t))),!this.state)return;let n=this.el.ownerDocument.getElementsByTagName("iframe");for(let e of n)e.classList.add(v);let o=e.pageX,s=e.pageY,l=e.altKey;this.el.classList.add("active"),this._onDidStart.fire({startX:o,currentX:o,startY:s,currentY:s,altKey:l});let d=(0,r.dS)(this.el),updateStyle=()=>{let e="";e=i?"all-scroll":1===this.orientation?1===this.state?"s-resize":2===this.state?"n-resize":m.dz?"row-resize":"ns-resize":1===this.state?"e-resize":2===this.state?"w-resize":m.dz?"col-resize":"ew-resize",d.textContent=`* { cursor: ${e} !important; }`},c=new g.SL;updateStyle(),i||this.onDidEnablementChange.event(updateStyle,null,c),t.onPointerMove(e=>{r.zB.stop(e,!1);let t={startX:o,currentX:e.pageX,startY:s,currentY:e.pageY,altKey:l};this._onDidChange.fire(t)},null,c),t.onPointerUp(e=>{for(let t of(r.zB.stop(e,!1),this.el.removeChild(d),this.el.classList.remove("active"),this._onDidEnd.fire(),c.dispose(),n))t.classList.remove(v)},null,c),c.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Sash.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Sash.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Sash.onMouseLeave(this)}layout(){if(0===this.orientation){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;let i=null!==(t=e.initialTarget)&&void 0!==t?t:e.target;if(i&&i instanceof HTMLElement&&i.classList.contains("orthogonal-drag-handle"))return i.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}},80064:function(e,t,i){"use strict";i.d(t,{s$:function(){return DomScrollableElement},Io:function(){return MouseWheelClassifier},NB:function(){return ScrollableElement},$Z:function(){return SmoothScrollableElement}});var n=i(1215),o=i(70687),r=i(8063),s=i(31498),l=i(14046),d=i(21413),c=i(66614),u=i(98847);let ScrollbarArrow=class ScrollbarArrow extends d.${constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",void 0!==e.top&&(this.bgDomNode.style.top="0px"),void 0!==e.left&&(this.bgDomNode.style.left="0px"),void 0!==e.bottom&&(this.bgDomNode.style.bottom="0px"),void 0!==e.right&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...u.k.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px",void 0!==e.top&&(this.domNode.style.top=e.top+"px"),void 0!==e.left&&(this.domNode.style.left=e.left+"px"),void 0!==e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),void 0!==e.right&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new l.C),this._register(o.mu(this.bgDomNode,o.tw.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(o.mu(this.domNode,o.tw.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new o.ne),this._pointerdownScheduleRepeatTimer=this._register(new c._F)}_arrowPointerDown(e){e.target&&e.target instanceof Element&&(this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,o.Jj(e))},200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault())}};var g=i(87932);let ScrollbarVisibilityController=class ScrollbarVisibilityController extends g.JT{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new c._F)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return 2!==this._visibility&&(3===this._visibility||this._rawShouldBeVisible)}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;null===(e=this._domNode)||void 0===e||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,null===(t=this._domNode)||void 0===t||t.setClassName(this._invisibleClassName+(e?" fade":"")))}};var m=i(88059);let AbstractScrollbar=class AbstractScrollbar extends d.${constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new ScrollbarVisibilityController(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new l.C),this._shouldRender=!0,this.domNode=(0,r.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(o.nm(this.domNode.domNode,o.tw.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(e){let t=this._register(new ScrollbarArrow(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=(0,r.X)(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"==typeof i&&this.slider.setWidth(i),"number"==typeof n&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(o.nm(this.slider.domNode,o.tw.POINTER_DOWN,e=>{0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))})),this.onclick(this.slider.domNode,e=>{e.leftButton&&e.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=n?0===e.button&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&"number"==typeof e.offsetX&&"number"==typeof e.offsetY)t=e.offsetX,i=e.offsetY;else{let n=o.i(this.domNode.domNode);t=e.pageX-n.left,i=e.pageY-n.top}let n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>{let o=this._sliderOrthogonalPointerPosition(e);if(m.ED&&Math.abs(o-i)>140){this._setDesiredScrollPositionNow(n.getScrollPosition());return}let r=this._sliderPointerPosition(e);this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(r-t))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var f=i(22601),_=i(84530);let HorizontalScrollbar=class HorizontalScrollbar extends AbstractScrollbar{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new f.M(t.horizontalHasArrows?t.arrowSize:0,2===t.horizontal?0:t.horizontalScrollbarSize,2===t.vertical?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let e=(t.arrowSize-11)/2,i=(t.horizontalScrollbarSize-11)/2;this._createArrow({className:"scra",icon:_.l.scrollbarButtonLeft,top:i,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new s.q(null,1,0))}),this._createArrow({className:"scra",icon:_.l.scrollbarButtonRight,top:i,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new s.q(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(2===e.horizontal?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};let VerticalScrollbar=class VerticalScrollbar extends AbstractScrollbar{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new f.M(t.verticalHasArrows?t.arrowSize:0,2===t.vertical?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let e=(t.arrowSize-11)/2,i=(t.verticalScrollbarSize-11)/2;this._createArrow({className:"scra",icon:_.l.scrollbarButtonUp,top:e,left:i,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new s.q(null,0,1))}),this._createArrow({className:"scra",icon:_.l.scrollbarButtonDown,top:void 0,left:i,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new s.q(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var v=i(57605),C=i(31108);i(89994);let MouseWheelClassifierItem=class MouseWheelClassifierItem{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}};let MouseWheelClassifier=class MouseWheelClassifier{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,t=0,i=1,n=this._rear;for(;;){let o=n===this._front?e:Math.pow(2,-i);if(e-=o,t+=this._memory[n].score*o,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}return t<=.5}acceptStandardWheelEvent(e){if(n.i7){let t=o.Jj(e.browserEvent),i=(0,n.ie)(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=new MouseWheelClassifierItem(e,t,i);n.score=this._computeScore(n),-1===this._front&&-1===this._rear?(this._memory[0]=n,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return -1===this._front&&-1===this._rear||this._memory[this._rear],this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return .01>Math.abs(Math.round(e)-e)}};MouseWheelClassifier.INSTANCE=new MouseWheelClassifier;let AbstractScrollableElement=class AbstractScrollableElement extends d.${get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new v.Q5),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new v.Q5),e.style.overflow="hidden",this._options=resolveOptions(t),this._scrollable=i,this._register(this._scrollable.onScroll(e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)}));let n={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new VerticalScrollbar(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new HorizontalScrollbar(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=(0,r.X)(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=(0,r.X)(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=(0,r.X)(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,e=>this._onMouseOver(e)),this.onmouseleave(this._listenOnDomNode,e=>this._onMouseLeave(e)),this._hideTimeout=this._register(new c._F),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=(0,g.B9)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,m.dz&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){void 0!==e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),void 0!==e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),void 0!==e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),void 0!==e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),void 0!==e.horizontal&&(this._options.horizontal=e.horizontal),void 0!==e.vertical&&(this._options.vertical=e.vertical),void 0!==e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),void 0!==e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),void 0!==e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new s.q(e))}_setListeningToMouseWheel(e){let t=this._mouseWheelToDispose.length>0;t!==e&&(this._mouseWheelToDispose=(0,g.B9)(this._mouseWheelToDispose),e&&this._mouseWheelToDispose.push(o.nm(this._listenOnDomNode,o.tw.MOUSE_WHEEL,e=>{this._onMouseWheel(new s.q(e))},{passive:!1})))}_onMouseWheel(e){var t;if(null===(t=e.browserEvent)||void 0===t?void 0:t.defaultPrevented)return;let i=MouseWheelClassifier.INSTANCE;i.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let t=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&o+t===0?o=t=0:Math.abs(t)>=Math.abs(o)?o=0:t=0),this._options.flipAxes&&([t,o]=[o,t]);let r=!m.dz&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||r)&&!o&&(o=t,t=0),e.browserEvent&&e.browserEvent.altKey&&(o*=this._options.fastScrollSensitivity,t*=this._options.fastScrollSensitivity);let s=this._scrollable.getFutureScrollPosition(),l={};if(t){let e=50*t,i=s.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(l,i)}if(o){let e=50*o,t=s.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(l,t)}if(l=this._scrollable.validateScrollPosition(l),s.scrollLeft!==l.scrollLeft||s.scrollTop!==l.scrollTop){let e=this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel();e?this._scrollable.setScrollPositionSmooth(l):this._scrollable.setScrollPositionNow(l),n=!0}}let o=n;!o&&this._options.alwaysConsumeMouseWheel&&(o=!0),!o&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(o=!0),o&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",o=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet(()=>this._hide(),500)}};let ScrollableElement=class ScrollableElement extends AbstractScrollableElement{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;let i=new C.Rm({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>o.jL(o.Jj(e),t)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}};let SmoothScrollableElement=class SmoothScrollableElement extends AbstractScrollableElement{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};let DomScrollableElement=class DomScrollableElement extends AbstractScrollableElement{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;let i=new C.Rm({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>o.jL(o.Jj(e),t)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function resolveOptions(e){let t={lazyRender:void 0!==e.lazyRender&&e.lazyRender,className:void 0!==e.className?e.className:"",useShadows:void 0===e.useShadows||e.useShadows,handleMouseWheel:void 0===e.handleMouseWheel||e.handleMouseWheel,flipAxes:void 0!==e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:void 0!==e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:void 0!==e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:void 0!==e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:void 0!==e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:void 0!==e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:void 0===e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:void 0===e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:void 0!==e.arrowSize?e.arrowSize:11,listenOnDomNode:void 0!==e.listenOnDomNode?e.listenOnDomNode:null,horizontal:void 0!==e.horizontal?e.horizontal:1,horizontalScrollbarSize:void 0!==e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:void 0!==e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:void 0!==e.horizontalHasArrows&&e.horizontalHasArrows,vertical:void 0!==e.vertical?e.vertical:1,verticalScrollbarSize:void 0!==e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:void 0!==e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:void 0!==e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:void 0!==e.scrollByPage&&e.scrollByPage};return t.horizontalSliderSize=void 0!==e.horizontalSliderSize?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=void 0!==e.verticalSliderSize?e.verticalSliderSize:t.verticalScrollbarSize,m.dz&&(t.className+=" mac"),t}},22601:function(e,t,i){"use strict";i.d(t,{M:function(){return ScrollbarState}});let ScrollbarState=class ScrollbarState{constructor(e,t,i,n,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ScrollbarState(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,o){let r=Math.max(0,i-e),s=Math.max(0,r-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(s),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(i*s/n))),c=(s-d)/(n-i);return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:c,computedSliderPosition:Math.round(o*c)}}_refreshComputedValues(){let e=ScrollbarState._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}},36118:function(e,t,i){"use strict";i.d(t,{M:function(){return r},z:function(){return SplitView}});var n,o,r,s=i(70687),l=i(53426),d=i(46474),c=i(80064),u=i(34794),g=i(50164),m=i(57605),f=i(87932),_=i(78007),v=i(31108),C=i(16877);i(99369);let b={separatorBorder:g.Il.transparent};let ViewItem=class ViewItem{set size(e){this._size=e}get size(){return this._size}get visible(){return void 0===this._cachedVisibleSize}setVisible(e,t){var i,n;if(e!==this.visible){e?(this.size=(0,_.uZ)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"==typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{null===(n=(i=this.view).setVisible)||void 0===n||n.call(i,e)}catch(e){console.error("Splitview: Failed to set visible view"),console.error(e)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return null===(e=this.view.proportionalLayout)||void 0===e||e}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,"number"==typeof i?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(e){console.error("Splitview: Failed to layout view"),console.error(e)}}dispose(){this.disposable.dispose()}};let VerticalViewItem=class VerticalViewItem extends ViewItem{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}};let HorizontalViewItem=class HorizontalViewItem extends ViewItem{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}};(n=o||(o={}))[n.Idle=0]="Idle",n[n.Busy=1]="Busy",function(e){function Split(e){return{type:"split",index:e}}function Auto(e){return{type:"auto",index:e}}function Invisible(e){return{type:"invisible",cachedVisibleSize:e}}e.Distribute={type:"distribute"},e.Split=Split,e.Auto=Auto,e.Invisible=Invisible}(r||(r={}));let SplitView=class SplitView extends f.JT{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var i,n,r,d,u;super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=o.Idle,this._onDidSashChange=this._register(new m.Q5),this._onDidSashReset=this._register(new m.Q5),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=null!==(i=t.orientation)&&void 0!==i?i:0,this.inverseAltBehavior=null!==(n=t.inverseAltBehavior)&&void 0!==n&&n,this.proportionalLayout=null===(r=t.proportionalLayout)||void 0===r||r,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(0===this.orientation?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=(0,s.R3)(this.el,(0,s.$)(".sash-container")),this.viewContainer=(0,s.$)(".split-view-container"),this.scrollable=this._register(new v.Rm({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:e=>(0,s.jL)((0,s.Jj)(this.el),e)})),this.scrollableElement=this._register(new c.$Z(this.viewContainer,{vertical:0===this.orientation?null!==(d=t.scrollbarVisibility)&&void 0!==d?d:1:2,horizontal:1===this.orientation?null!==(u=t.scrollbarVisibility)&&void 0!==u?u:1:2},this.scrollable));let g=this._register(new l.Y(this.viewContainer,"scroll")).event;this._register(g(e=>{let t=this.scrollableElement.getScrollPosition(),i=1>=Math.abs(this.viewContainer.scrollLeft-t.scrollLeft)?void 0:this.viewContainer.scrollLeft,n=1>=Math.abs(this.viewContainer.scrollTop-t.scrollTop)?void 0:this.viewContainer.scrollTop;(void 0!==i||void 0!==n)&&this.scrollableElement.setScrollPosition({scrollLeft:i,scrollTop:n})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(e=>{e.scrollTopChanged&&(this.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this.viewContainer.scrollLeft=e.scrollLeft)})),(0,s.R3)(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||b),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((e,t)=>{let i=C.o8(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},n=e.view;this.doAddView(n,i,t,!0)}),this._contentSize=this.viewItems.reduce((e,t)=>e+t.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){let i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let t=0;for(let i=0;i<this.viewItems.length;i++){let n=this.viewItems[i],o=this.proportions[i];"number"==typeof o?t+=o:e-=n.size}for(let i=0;i<this.viewItems.length;i++){let n=this.viewItems[i],o=this.proportions[i];"number"==typeof o&&t>0&&(n.size=(0,_.uZ)(Math.round(o*e/t),n.minimumSize,n.maximumSize))}}else{let t=(0,u.w6)(this.viewItems.length),n=t.filter(e=>1===this.viewItems[e].priority),o=t.filter(e=>2===this.viewItems[e].priority);this.resize(this.viewItems.length-1,e-i,void 0,n,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(let e of this.viewItems)e.enabled=!1;let n=this.sashItems.findIndex(t=>t.sash===e),o=(0,f.F8)((0,s.nm)(this.el.ownerDocument.body,"keydown",e=>resetSashDragState(this.sashDragState.current,e.altKey)),(0,s.nm)(this.el.ownerDocument.body,"keyup",()=>resetSashDragState(this.sashDragState.current,!1))),resetSashDragState=(e,t)=>{let i,r;let s=this.viewItems.map(e=>e.size),l=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(t=!t),t){let e=n===this.sashItems.length-1;if(e){let e=this.viewItems[n];l=(e.minimumSize-e.size)/2,d=(e.maximumSize-e.size)/2}else{let e=this.viewItems[n+1];l=(e.size-e.maximumSize)/2,d=(e.size-e.minimumSize)/2}}if(!t){let e=(0,u.w6)(n,-1),t=(0,u.w6)(n+1,this.viewItems.length),o=e.reduce((e,t)=>e+(this.viewItems[t].minimumSize-s[t]),0),l=e.reduce((e,t)=>e+(this.viewItems[t].viewMaximumSize-s[t]),0),d=0===t.length?Number.POSITIVE_INFINITY:t.reduce((e,t)=>e+(s[t]-this.viewItems[t].minimumSize),0),c=0===t.length?Number.NEGATIVE_INFINITY:t.reduce((e,t)=>e+(s[t]-this.viewItems[t].viewMaximumSize),0),g=Math.max(o,c),m=Math.min(d,l),f=this.findFirstSnapIndex(e),_=this.findFirstSnapIndex(t);if("number"==typeof f){let e=this.viewItems[f],t=Math.floor(e.viewMinimumSize/2);i={index:f,limitDelta:e.visible?g-t:g+t,size:e.size}}if("number"==typeof _){let e=this.viewItems[_],t=Math.floor(e.viewMinimumSize/2);r={index:_,limitDelta:e.visible?m+t:m-t,size:e.size}}}this.sashDragState={start:e,current:e,index:n,sizes:s,minDelta:l,maxDelta:d,alt:t,snapBefore:i,snapAfter:r,disposable:o}};resetSashDragState(t,i)}onSashChange({current:e}){let{index:t,start:i,sizes:n,alt:o,minDelta:r,maxDelta:s,snapBefore:l,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;let c=this.resize(t,e-i,n,void 0,void 0,r,s,l,d);if(o){let e=t===this.sashItems.length-1,i=this.viewItems.map(e=>e.size),n=e?t:t+1,o=this.viewItems[n],r=o.size-o.maximumSize,s=o.size-o.minimumSize,l=e?t-1:t+1;this.resize(l,-c,i,void 0,void 0,r,s)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){for(let t of(this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions(),this.viewItems))t.enabled=!0}onViewChange(e,t){let i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t="number"==typeof t?t:e.size,t=(0,_.uZ)(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0)&&!(e>=this.viewItems.length)){if(this.state!==o.Idle)throw Error("Cant modify splitview");this.state=o.Busy;try{let i=(0,u.w6)(this.viewItems.length).filter(t=>t!==e),n=[...i.filter(e=>1===this.viewItems[e].priority),e],o=i.filter(e=>2===this.viewItems[e].priority),r=this.viewItems[e];t=Math.round(t),t=(0,_.uZ)(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,o)}finally{this.state=o.Idle}}}distributeViewSizes(){let e=[],t=0;for(let i of this.viewItems)i.maximumSize-i.minimumSize>0&&(e.push(i),t+=i.size);let i=Math.floor(t/e.length);for(let t of e)t.size=(0,_.uZ)(i,t.minimumSize,t.maximumSize);let n=(0,u.w6)(this.viewItems.length),o=n.filter(e=>1===this.viewItems[e].priority),r=n.filter(e=>2===this.viewItems[e].priority);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==o.Idle)throw Error("Cant modify splitview");this.state=o.Busy;try{let o,r;let l=(0,s.$)(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(l):this.viewContainer.insertBefore(l,this.viewContainer.children.item(i));let c=e.onDidChange(e=>this.onViewChange(v,e)),g=(0,f.OF)(()=>this.viewContainer.removeChild(l)),_=(0,f.F8)(c,g);"number"==typeof t?o=t:("auto"===t.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index}),o="split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);let v=0===this.orientation?new VerticalViewItem(l,e,o,_):new HorizontalViewItem(l,e,o,_);if(this.viewItems.splice(i,0,v),this.viewItems.length>1){let e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=0===this.orientation?new d.g(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},{...e,orientation:1}):new d.g(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},{...e,orientation:0}),n=0===this.orientation?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),o=m.ju.map(t.onDidStart,n),r=o(this.onSashStart,this),s=m.ju.map(t.onDidChange,n),l=s(this.onSashChange,this),c=m.ju.map(t.onDidEnd,()=>this.sashItems.findIndex(e=>e.sash===t)),g=c(this.onSashEnd,this),_=t.onDidReset(()=>{let e=this.sashItems.findIndex(e=>e.sash===t),i=(0,u.w6)(e,-1),n=(0,u.w6)(e+1,this.viewItems.length),o=this.findFirstSnapIndex(i),r=this.findFirstSnapIndex(n);("number"!=typeof o||this.viewItems[o].visible)&&("number"!=typeof r||this.viewItems[r].visible)&&this._onDidSashReset.fire(e)}),v=(0,f.F8)(r,l,g,_,t);this.sashItems.splice(i-1,0,{sash:t,disposable:v})}l.appendChild(e.element),"number"!=typeof t&&"split"===t.type&&(r=[t.index]),n||this.relayout([i],r),n||"number"==typeof t||"distribute"!==t.type||this.distributeViewSizes()}finally{this.state=o.Idle}}relayout(e,t){let i=this.viewItems.reduce((e,t)=>e+t.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(e=>e.size),n,o,r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,l,d){if(e<0||e>=this.viewItems.length)return 0;let c=(0,u.w6)(e,-1),g=(0,u.w6)(e+1,this.viewItems.length);if(o)for(let e of o)(0,u.zI)(c,e),(0,u.zI)(g,e);if(n)for(let e of n)(0,u.al)(c,e),(0,u.al)(g,e);let m=c.map(e=>this.viewItems[e]),f=c.map(e=>i[e]),v=g.map(e=>this.viewItems[e]),C=g.map(e=>i[e]),b=c.reduce((e,t)=>e+(this.viewItems[t].minimumSize-i[t]),0),S=c.reduce((e,t)=>e+(this.viewItems[t].maximumSize-i[t]),0),y=0===g.length?Number.POSITIVE_INFINITY:g.reduce((e,t)=>e+(i[t]-this.viewItems[t].minimumSize),0),w=0===g.length?Number.NEGATIVE_INFINITY:g.reduce((e,t)=>e+(i[t]-this.viewItems[t].maximumSize),0),L=Math.max(b,w,r),k=Math.min(y,S,s),D=!1;if(l){let e=this.viewItems[l.index],i=t>=l.limitDelta;D=i!==e.visible,e.setVisible(i,l.size)}if(!D&&d){let e=this.viewItems[d.index],i=t<d.limitDelta;D=i!==e.visible,e.setVisible(i,d.size)}if(D)return this.resize(e,t,i,n,o,r,s);t=(0,_.uZ)(t,L,k);for(let e=0,i=t;e<m.length;e++){let t=m[e],n=(0,_.uZ)(f[e]+i,t.minimumSize,t.maximumSize),o=n-f[e];i-=o,t.size=n}for(let e=0,i=t;e<v.length;e++){let t=v[e],n=(0,_.uZ)(C[e]-i,t.minimumSize,t.maximumSize),o=n-C[e];i+=o,t.size=n}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((e,t)=>e+t.size,0),i=this.size-t,n=(0,u.w6)(this.viewItems.length-1,-1),o=n.filter(e=>1===this.viewItems[e].priority),r=n.filter(e=>2===this.viewItems[e].priority);for(let e of r)(0,u.zI)(n,e);for(let e of o)(0,u.al)(n,e);"number"==typeof e&&(0,u.al)(n,e);for(let e=0;0!==i&&e<n.length;e++){let t=this.viewItems[n[e]],o=(0,_.uZ)(t.size+i,t.minimumSize,t.maximumSize),r=o-t.size;i-=r,t.size=o}}layoutViews(){this._contentSize=this.viewItems.reduce((e,t)=>e+t.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(e=>e.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(t=>e=t.size-t.minimumSize>0||e);e=!1;let i=this.viewItems.map(t=>e=t.maximumSize-t.size>0||e),n=[...this.viewItems].reverse();e=!1;let o=n.map(t=>e=t.size-t.minimumSize>0||e).reverse();e=!1;let r=n.map(t=>e=t.maximumSize-t.size>0||e).reverse(),s=0;for(let e=0;e<this.sashItems.length;e++){let{sash:n}=this.sashItems[e],l=this.viewItems[e];s+=l.size;let d=!(t[e]&&r[e+1]),c=!(i[e]&&o[e+1]);if(d&&c){let i=(0,u.w6)(e,-1),r=(0,u.w6)(e+1,this.viewItems.length),l=this.findFirstSnapIndex(i),d=this.findFirstSnapIndex(r),c="number"==typeof l&&!this.viewItems[l].visible,g="number"==typeof d&&!this.viewItems[d].visible;c&&o[e]&&(s>0||this.startSnappingEnabled)?n.state=1:g&&t[e]&&(s<this._contentSize||this.endSnappingEnabled)?n.state=2:n.state=0}else d&&!c?n.state=1:!d&&c?n.state=2:n.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let e=this.viewItems[t];if(e.visible&&e.snap)return t}for(let t of e){let e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)break;if(!e.visible&&e.snap)return t}}areViewsDistributed(){let e,t;for(let i of this.viewItems)if(e=void 0===e?i.size:Math.min(e,i.size),(t=void 0===t?i.size:Math.max(t,i.size))-e>2)return!1;return!0}dispose(){var e;null===(e=this.sashDragState)||void 0===e||e.disposable.dispose(),(0,f.B9)(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}}},24311:function(e,t,i){"use strict";i.d(t,{D:function(){return d},Z:function(){return Toggle}});var n=i(21413),o=i(98847),r=i(57605);i(36908);var s=i(91502),l=i(41273);let d={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};let Toggle=class Toggle extends n.${constructor(e){super(),this._onChange=this._register(new r.Q5),this.onChange=this._onChange.event,this._onKeyDown=this._register(new r.Q5),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...o.k.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register((0,s.g)((0,l.t)("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,e=>{if(10===e.keyCode||3===e.keyCode){this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),e.stopPropagation();return}this._onKeyDown.fire(e)})}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},21413:function(e,t,i){"use strict";i.d(t,{$:function(){return Widget}});var n=i(70687),o=i(58731),r=i(31498),s=i(33482),l=i(87932);let Widget=class Widget extends l.JT{onclick(e,t){this._register(n.nm(e,n.tw.CLICK,i=>t(new r.n(n.Jj(e),i))))}onmousedown(e,t){this._register(n.nm(e,n.tw.MOUSE_DOWN,i=>t(new r.n(n.Jj(e),i))))}onmouseover(e,t){this._register(n.nm(e,n.tw.MOUSE_OVER,i=>t(new r.n(n.Jj(e),i))))}onmouseleave(e,t){this._register(n.nm(e,n.tw.MOUSE_LEAVE,i=>t(new r.n(n.Jj(e),i))))}onkeydown(e,t){this._register(n.nm(e,n.tw.KEY_DOWN,e=>t(new o.y(e))))}onkeyup(e,t){this._register(n.nm(e,n.tw.KEY_UP,e=>t(new o.y(e))))}oninput(e,t){this._register(n.nm(e,n.tw.INPUT,t))}onblur(e,t){this._register(n.nm(e,n.tw.BLUR,t))}onfocus(e,t){this._register(n.nm(e,n.tw.FOCUS,t))}ignoreGesture(e){return s.o.ignoreTarget(e)}}},58990:function(e,t,i){"use strict";function ensureCodeWindow(e,t){"number"!=typeof e.vscodeWindowId&&Object.defineProperty(e,"vscodeWindowId",{get:()=>t})}i.d(t,{Ex:function(){return n},HA:function(){return ensureCodeWindow},vO:function(){return o}});let n=window,o=n},9252:function(e,t,i){"use strict";i.d(t,{Wi:function(){return ActionRunner},Z0:function(){return Separator},aU:function(){return Action},eZ:function(){return EmptySubmenuAction},wY:function(){return SubmenuAction},xw:function(){return toAction}});var n=i(57605),o=i(87932),r=i(46157);let Action=class Action extends o.JT{constructor(e,t="",i="",o=!0,r){super(),this._onDidChange=this._register(new n.Q5),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=o,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}};let ActionRunner=class ActionRunner extends o.JT{constructor(){super(...arguments),this._onWillRun=this._register(new n.Q5),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new n.Q5),this.onDidRun=this._onDidRun.event}async run(e,t){let i;if(e.enabled){this._onWillRun.fire({action:e});try{await this.runAction(e,t)}catch(e){i=e}this._onDidRun.fire({action:e,error:i})}}async runAction(e,t){await e.run(t)}};let Separator=class Separator{constructor(){this.id=Separator.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(let i of e)i.length&&(t=t.length?[...t,new Separator,...i]:i);return t}async run(){}};Separator.ID="vs.actions.separator";let SubmenuAction=class SubmenuAction{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}};let EmptySubmenuAction=class EmptySubmenuAction extends Action{constructor(){super(EmptySubmenuAction.ID,r.NC("submenu.empty","(empty)"),void 0,!1)}};function toAction(e){var t;return{id:e.id,label:e.label,class:e.class,enabled:null===(t=e.enabled)||void 0===t||t,checked:e.checked,run:async(...t)=>e.run(...t),tooltip:e.label}}EmptySubmenuAction.ID="vs.actions.empty"},34794:function(e,t,i){"use strict";var n;function tail(e,t=0){return e[e.length-(1+t)]}function tail2(e){if(0===e.length)throw Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}function equals(e,t,i=(e,t)=>e===t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let n=0,o=e.length;n<o;n++)if(!i(e[n],t[n]))return!1;return!0}function removeFastWithoutKeepingOrder(e,t){let i=e.length-1;t<i&&(e[t]=e[i]),e.pop()}function binarySearch(e,t,i){return binarySearch2(e.length,n=>i(e[n],t))}function binarySearch2(e,t){let i=0,n=e-1;for(;i<=n;){let e=(i+n)/2|0,o=t(e);if(o<0)i=e+1;else{if(!(o>0))return e;n=e-1}}return-(i+1)}function quickSelect(e,t,i){if((e|=0)>=t.length)throw TypeError("invalid index");let n=t[Math.floor(t.length*Math.random())],o=[],r=[],s=[];for(let e of t){let t=i(e,n);t<0?o.push(e):t>0?r.push(e):s.push(e)}return e<o.length?quickSelect(e,o,i):e<o.length+s.length?s[0]:quickSelect(e-(o.length+s.length),r,i)}function groupBy(e,t){let i;let n=[];for(let o of e.slice(0).sort(t))i&&0===t(i[0],o)?i.push(o):(i=[o],n.push(i));return n}function*groupAdjacentBy(e,t){let i,n;for(let o of e)void 0!==n&&t(n,o)?i.push(o):(i&&(yield i),i=[o]),n=o;i&&(yield i)}function forEachAdjacent(e,t){for(let i=0;i<=e.length;i++)t(0===i?void 0:e[i-1],i===e.length?void 0:e[i])}function forEachWithNeighbors(e,t){for(let i=0;i<e.length;i++)t(0===i?void 0:e[i-1],e[i],i+1===e.length?void 0:e[i+1])}function coalesce(e){return e.filter(e=>!!e)}function coalesceInPlace(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function isFalsyOrEmpty(e){return!Array.isArray(e)||0===e.length}function isNonEmptyArray(e){return Array.isArray(e)&&e.length>0}function distinct(e,t=e=>e){let i=new Set;return e.filter(e=>{let n=t(e);return!i.has(n)&&(i.add(n),!0)})}function firstOrDefault(e,t){return e.length>0?e[0]:t}function range(e,t){let i="number"==typeof t?e:0;"number"==typeof t?i=e:(i=0,t=e);let n=[];if(i<=t)for(let e=i;e<t;e++)n.push(e);else for(let e=i;e>t;e--)n.push(e);return n}function arrayInsert(e,t,i){let n=e.slice(0,t),o=e.slice(t);return n.concat(i,o)}function pushToStart(e,t){let i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))}function pushToEnd(e,t){let i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))}function pushMany(e,t){for(let i of t)e.push(i)}function asArray(e){return Array.isArray(e)?e:[e]}function insertInto(e,t,i){let n=getActualStartIndex(e,t),o=e.length,r=i.length;e.length=o+r;for(let t=o-1;t>=n;t--)e[t+r]=e[t];for(let t=0;t<r;t++)e[t+n]=i[t]}function splice(e,t,i,n){let o=getActualStartIndex(e,t),r=e.splice(o,i);return void 0===r&&(r=[]),insertInto(e,o,n),r}function getActualStartIndex(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}function compareBy(e,t){return(i,n)=>t(e(i),e(n))}function tieBreakComparators(...e){return(t,i)=>{for(let o of e){let e=o(t,i);if(!n.isNeitherLessOrGreaterThan(e))return e}return n.neitherLessOrGreaterThan}}i.d(t,{BV:function(){return reverseOrder},EB:function(){return distinct},Gb:function(){return tail},H9:function(){return ArrayQueue},HW:function(){return quickSelect},JH:function(){return tail2},KO:function(){return forEachWithNeighbors},LS:function(){return removeFastWithoutKeepingOrder},Of:function(){return isNonEmptyArray},Rs:function(){return coalesceInPlace},W$:function(){return CallbackIterable},XY:function(){return isFalsyOrEmpty},Xh:function(){return firstOrDefault},Zv:function(){return arrayInsert},_2:function(){return asArray},al:function(){return pushToEnd},db:function(){return splice},fS:function(){return equals},f_:function(){return tieBreakComparators},fv:function(){return numberComparator},kX:function(){return coalesce},mw:function(){return groupAdjacentBy},nW:function(){return booleanComparator},ry:function(){return binarySearch},tT:function(){return compareBy},vA:function(){return pushMany},vM:function(){return groupBy},w6:function(){return range},zI:function(){return pushToStart},zy:function(){return forEachAdjacent}}),function(e){function isLessThan(e){return e<0}function isLessThanOrEqual(e){return e<=0}function isGreaterThan(e){return e>0}function isNeitherLessOrGreaterThan(e){return 0===e}e.isLessThan=isLessThan,e.isLessThanOrEqual=isLessThanOrEqual,e.isGreaterThan=isGreaterThan,e.isNeitherLessOrGreaterThan=isNeitherLessOrGreaterThan,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(n||(n={}));let numberComparator=(e,t)=>e-t,booleanComparator=(e,t)=>numberComparator(e?1:0,t?1:0);function reverseOrder(e){return(t,i)=>-e(t,i)}let ArrayQueue=class ArrayQueue{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(0!==this.length)return this.items[this.firstIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}};let CallbackIterable=class CallbackIterable{constructor(e){this.iterate=e}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new CallbackIterable(t=>this.iterate(i=>!e(i)||t(i)))}map(e){return new CallbackIterable(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t;let i=!0;return this.iterate(o=>((i||n.isGreaterThan(e(o,t)))&&(i=!1,t=o),!0)),t}};CallbackIterable.empty=new CallbackIterable(e=>{})},34850:function(e,t,i){"use strict";function findLast(e,t,i){let n=findLastIdx(e,t);if(-1!==n)return e[n]}function findLastIdx(e,t,i=e.length-1){for(let n=i;n>=0;n--){let i=e[n];if(t(i))return n}return -1}function findLastMonotonous(e,t){let i=findLastIdxMonotonous(e,t);return -1===i?void 0:e[i]}function findLastIdxMonotonous(e,t,i=0,n=e.length){let o=i,r=n;for(;o<r;){let i=Math.floor((o+r)/2);t(e[i])?o=i+1:r=i}return o-1}function findFirstMonotonous(e,t){let i=findFirstIdxMonotonousOrArrLen(e,t);return i===e.length?void 0:e[i]}function findFirstIdxMonotonousOrArrLen(e,t,i=0,n=e.length){let o=i,r=n;for(;o<r;){let i=Math.floor((o+r)/2);t(e[i])?r=i:o=i+1}return o}i.d(t,{Fr:function(){return mapFindFirst},J_:function(){return findFirstIdxMonotonousOrArrLen},Jw:function(){return findLastIdxMonotonous},Ph:function(){return findFirstMinBy},b1:function(){return MonotonousArray},cn:function(){return findFirstMonotonous},dF:function(){return findLast},dI:function(){return findFirstMaxBy},jV:function(){return findLastMaxBy},tQ:function(){return findMaxIdxBy},ti:function(){return findLastMonotonous}});let MonotonousArray=class MonotonousArray{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(MonotonousArray.assertInvariants){if(this._prevFindLastPredicate){for(let t of this._array)if(this._prevFindLastPredicate(t)&&!e(t))throw Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let t=findLastIdxMonotonous(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,-1===t?void 0:this._array[t]}};function findFirstMaxBy(e,t){if(0===e.length)return;let i=e[0];for(let n=1;n<e.length;n++){let o=e[n];t(o,i)>0&&(i=o)}return i}function findLastMaxBy(e,t){if(0===e.length)return;let i=e[0];for(let n=1;n<e.length;n++){let o=e[n];t(o,i)>=0&&(i=o)}return i}function findFirstMinBy(e,t){return findFirstMaxBy(e,(e,i)=>-t(e,i))}function findMaxIdxBy(e,t){if(0===e.length)return -1;let i=0;for(let n=1;n<e.length;n++){let o=e[n];t(o,e[i])>0&&(i=n)}return i}function mapFindFirst(e,t){for(let i of e){let e=t(i);if(void 0!==e)return e}}MonotonousArray.assertInvariants=!1},77853:function(e,t,i){"use strict";i.d(t,{DM:function(){return checkAdjacentItems},eZ:function(){return assertFn},ok:function(){return ok},vE:function(){return assertNever},wN:function(){return softAssert}});var n=i(17861);function ok(e,t){if(!e)throw Error(t?`Assertion failed (${t})`:"Assertion Failed")}function assertNever(e,t="Unreachable"){throw Error(t)}function softAssert(e){e||(0,n.dL)(new n.he("Soft Assertion Failed"))}function assertFn(e){e()||(e(),(0,n.dL)(new n.he("Assertion Failed")))}function checkAdjacentItems(e,t){let i=0;for(;i<e.length-1;){let n=e[i],o=e[i+1];if(!t(n,o))return!1;i++}return!0}},66614:function(e,t,i){"use strict";let n,o;i.d(t,{Aq:function(){return AsyncIterableObject},CR:function(){return DeferredPromise},J8:function(){return isThenable},PG:function(){return createCancelablePromise},Ps:function(){return first},R5:function(){return GlobalIdleValue},Vg:function(){return disposableTimeout},Vs:function(){return timeout},_F:function(){return TimeoutTimer},eP:function(){return raceCancellation},hF:function(){return AbstractIdleValue},jT:function(){return r},jg:function(){return n},pY:function(){return RunOnceScheduler},rH:function(){return ThrottledDelayer},vp:function(){return Delayer},y5:function(){return o},zS:function(){return createCancelableAsyncIterable},zh:function(){return IntervalTimer}});var r,s=i(45828),l=i(17861),d=i(57605),c=i(87932),u=i(88059),g=i(85852);function isThenable(e){return!!e&&"function"==typeof e.then}function createCancelablePromise(e){let t=new s.A,i=e(t.token),n=new Promise((e,n)=>{let o=t.token.onCancellationRequested(()=>{o.dispose(),n(new l.FU)});Promise.resolve(i).then(i=>{o.dispose(),t.dispose(),e(i)},e=>{o.dispose(),t.dispose(),n(e)})});return new class{cancel(){t.cancel(),t.dispose()}then(e,t){return n.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return n.finally(e)}}}function raceCancellation(e,t,i){return new Promise((n,o)=>{let r=t.onCancellationRequested(()=>{r.dispose(),n(i)});e.then(n,o).finally(()=>r.dispose())})}let Throttler=class Throttler{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let onComplete=()=>{if(this.queuedPromise=null,this.isDisposed)return;let e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(e=>{this.activePromise.then(onComplete,onComplete).then(e)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}dispose(){this.isDisposed=!0}};let timeoutDeferred=(e,t)=>{let i=!0,n=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(n),i=!1}}},microtaskDeferred=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};let Delayer=class Delayer{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let e=this.task;return this.task=null,e()}}));let fn=()=>{var e;this.deferred=null,null===(e=this.doResolve)||void 0===e||e.call(this,null)};return this.deferred=t===g.n?microtaskDeferred(fn):timeoutDeferred(t,fn),this.completionPromise}isTriggered(){var e;return!!(null===(e=this.deferred)||void 0===e?void 0:e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&(null===(e=this.doReject)||void 0===e||e.call(this,new l.FU),this.completionPromise=null)}cancelTimeout(){var e;null===(e=this.deferred)||void 0===e||e.dispose(),this.deferred=null}dispose(){this.cancel()}};let ThrottledDelayer=class ThrottledDelayer{constructor(e){this.delayer=new Delayer(e),this.throttler=new Throttler}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}};function timeout(e,t){return t?new Promise((i,n)=>{let o=setTimeout(()=>{r.dispose(),i()},e),r=t.onCancellationRequested(()=>{clearTimeout(o),r.dispose(),n(new l.FU)})}):createCancelablePromise(t=>timeout(e,t))}function disposableTimeout(e,t=0,i){let n=setTimeout(()=>{e(),i&&o.dispose()},t),o=(0,c.OF)(()=>{clearTimeout(n),null==i||i.deleteAndLeak(o)});return null==i||i.add(o),o}function first(e,t=e=>!!e,i=null){let n=0,o=e.length,loop=()=>{if(n>=o)return Promise.resolve(i);let r=e[n++],s=Promise.resolve(r());return s.then(e=>t(e)?Promise.resolve(e):loop())};return loop()}let TimeoutTimer=class TimeoutTimer{constructor(e,t){this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}};let IntervalTimer=class IntervalTimer{constructor(){this.disposable=void 0}cancel(){var e;null===(e=this.disposable)||void 0===e||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){this.cancel();let n=i.setInterval(()=>{e()},t);this.disposable=(0,c.OF)(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel()}};let RunOnceScheduler=class RunOnceScheduler{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return -1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;null===(e=this.runner)||void 0===e||e.call(this)}};o="function"!=typeof globalThis.requestIdleCallback||"function"!=typeof globalThis.cancelIdleCallback?(e,t)=>{(0,u.fn)(()=>{if(i)return;let e=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining:()=>Math.max(0,e-Date.now())}))});let i=!1;return{dispose(){i||(i=!0)}}}:(e,t,i)=>{let n=e.requestIdleCallback(t,"number"==typeof i?{timeout:i}:void 0),o=!1;return{dispose(){o||(o=!0,e.cancelIdleCallback(n))}}},n=e=>o(globalThis,e);let AbstractIdleValue=class AbstractIdleValue{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=o(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}};let GlobalIdleValue=class GlobalIdleValue extends AbstractIdleValue{constructor(e){super(globalThis,e)}};let DeferredPromise=class DeferredPromise{get isRejected(){var e;return(null===(e=this.outcome)||void 0===e?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new l.FU)}};!function(e){async function settled(e){let t;let i=await Promise.all(e.map(e=>e.then(e=>e,e=>{t||(t=e)})));if(void 0!==t)throw t;return i}function withAsyncBody(e){return new Promise(async(t,i)=>{try{await e(t,i)}catch(e){i(e)}})}e.settled=settled,e.withAsyncBody=withAsyncBody}(r||(r={}));let AsyncIterableObject=class AsyncIterableObject{static fromArray(e){return new AsyncIterableObject(t=>{t.emitMany(e)})}static fromPromise(e){return new AsyncIterableObject(async t=>{t.emitMany(await e)})}static fromPromises(e){return new AsyncIterableObject(async t=>{await Promise.all(e.map(async e=>t.emitOne(await e)))})}static merge(e){return new AsyncIterableObject(async t=>{await Promise.all(e.map(async e=>{for await(let i of e)t.emitOne(i)}))})}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new d.Q5,queueMicrotask(async()=>{let t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{await Promise.resolve(e(t)),this.resolve()}catch(e){this.reject(e)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{for(;;){if(2===this._state)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(1===this._state)return{done:!0,value:void 0};await d.ju.toPromise(this._onStateChanged.event)}}}}static map(e,t){return new AsyncIterableObject(async i=>{for await(let n of e)i.emitOne(t(n))})}map(e){return AsyncIterableObject.map(this,e)}static filter(e,t){return new AsyncIterableObject(async i=>{for await(let n of e)t(n)&&i.emitOne(n)})}filter(e){return AsyncIterableObject.filter(this,e)}static coalesce(e){return AsyncIterableObject.filter(e,e=>!!e)}coalesce(){return AsyncIterableObject.coalesce(this)}static async toPromise(e){let t=[];for await(let i of e)t.push(i);return t}toPromise(){return AsyncIterableObject.toPromise(this)}emitOne(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){0===this._state&&(this._state=1,this._onStateChanged.fire())}reject(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}};AsyncIterableObject.EMPTY=AsyncIterableObject.fromArray([]);let CancelableAsyncIterableObject=class CancelableAsyncIterableObject extends AsyncIterableObject{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}};function createCancelableAsyncIterable(e){let t=new s.A,i=e(t.token);return new CancelableAsyncIterableObject(t,async e=>{let n=t.token.onCancellationRequested(()=>{n.dispose(),t.dispose(),e.reject(new l.FU)});try{for await(let n of i){if(t.token.isCancellationRequested)return;e.emitOne(n)}n.dispose(),t.dispose()}catch(i){n.dispose(),t.dispose(),e.reject(i)}})}},73126:function(e,t,i){"use strict";let n;i.d(t,{Ag:function(){return readUInt32BE},Cg:function(){return writeUInt8},KN:function(){return VSBuffer},Q$:function(){return readUInt8},T4:function(){return writeUInt32BE},mP:function(){return readUInt16LE},oq:function(){return writeUInt16LE}});var o=i(10612),r=i(67850).lW;let s=void 0!==r;new o.o(()=>new Uint8Array(256));let VSBuffer=class VSBuffer{static wrap(e){return s&&!r.isBuffer(e)&&(e=r.from(e.buffer,e.byteOffset,e.byteLength)),new VSBuffer(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return s?this.buffer.toString():(n||(n=new TextDecoder),n.decode(this.buffer))}};function readUInt16LE(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function writeUInt16LE(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t}function readUInt32BE(e,t){return 16777216*e[t]+65536*e[t+1]+256*e[t+2]+e[t+3]}function writeUInt32BE(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function readUInt8(e,t){return e[t]}function writeUInt8(e,t,i){e[i]=t}},1627:function(e,t,i){"use strict";i.d(t,{b:function(){return CachedFunction},t:function(){return LRUCachedFunction}});let LRUCachedFunction=class LRUCachedFunction{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){let t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}};let CachedFunction=class CachedFunction{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);let t=this.fn(e);return this._map.set(e,t),t}}},45828:function(e,t,i){"use strict";i.d(t,{A:function(){return CancellationTokenSource},T:function(){return n}});var n,o=i(57605);let r=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});!function(e){function isCancellationToken(t){return t===e.None||t===e.Cancelled||t instanceof MutableToken||!!t&&"object"==typeof t&&"boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested}e.isCancellationToken=isCancellationToken,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.ju.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r})}(n||(n={}));let MutableToken=class MutableToken{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){!this._isCancelled&&(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?r:(this._emitter||(this._emitter=new o.Q5),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};let CancellationTokenSource=class CancellationTokenSource{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token instanceof MutableToken&&this._token.cancel():this._token=n.Cancelled}dispose(e=!1){var t;e&&this.cancel(),null===(t=this._parentListener)||void 0===t||t.dispose(),this._token?this._token instanceof MutableToken&&this._token.dispose():this._token=n.None}}},84530:function(e,t,i){"use strict";i.d(t,{l:function(){return r},u:function(){return getCodiconFontCharacters}});var n=i(16877);let o=Object.create(null);function register(e,t){if((0,n.HD)(t)){let i=o[t];if(void 0===i)throw Error(`${e} references an unknown codicon: ${t}`);t=i}return o[e]=t,{id:e}}function getCodiconFontCharacters(){return o}let r={add:register("add",6e4),plus:register("plus",6e4),gistNew:register("gist-new",6e4),repoCreate:register("repo-create",6e4),lightbulb:register("lightbulb",60001),lightBulb:register("light-bulb",60001),repo:register("repo",60002),repoDelete:register("repo-delete",60002),gistFork:register("gist-fork",60003),repoForked:register("repo-forked",60003),gitPullRequest:register("git-pull-request",60004),gitPullRequestAbandoned:register("git-pull-request-abandoned",60004),recordKeys:register("record-keys",60005),keyboard:register("keyboard",60005),tag:register("tag",60006),tagAdd:register("tag-add",60006),tagRemove:register("tag-remove",60006),gitPullRequestLabel:register("git-pull-request-label",60006),person:register("person",60007),personFollow:register("person-follow",60007),personOutline:register("person-outline",60007),personFilled:register("person-filled",60007),gitBranch:register("git-branch",60008),gitBranchCreate:register("git-branch-create",60008),gitBranchDelete:register("git-branch-delete",60008),sourceControl:register("source-control",60008),mirror:register("mirror",60009),mirrorPublic:register("mirror-public",60009),star:register("star",60010),starAdd:register("star-add",60010),starDelete:register("star-delete",60010),starEmpty:register("star-empty",60010),comment:register("comment",60011),commentAdd:register("comment-add",60011),alert:register("alert",60012),warning:register("warning",60012),search:register("search",60013),searchSave:register("search-save",60013),logOut:register("log-out",60014),signOut:register("sign-out",60014),logIn:register("log-in",60015),signIn:register("sign-in",60015),eye:register("eye",60016),eyeUnwatch:register("eye-unwatch",60016),eyeWatch:register("eye-watch",60016),circleFilled:register("circle-filled",60017),primitiveDot:register("primitive-dot",60017),closeDirty:register("close-dirty",60017),debugBreakpoint:register("debug-breakpoint",60017),debugBreakpointDisabled:register("debug-breakpoint-disabled",60017),debugBreakpointPending:register("debug-breakpoint-pending",60377),debugHint:register("debug-hint",60017),primitiveSquare:register("primitive-square",60018),edit:register("edit",60019),pencil:register("pencil",60019),info:register("info",60020),issueOpened:register("issue-opened",60020),gistPrivate:register("gist-private",60021),gitForkPrivate:register("git-fork-private",60021),lock:register("lock",60021),mirrorPrivate:register("mirror-private",60021),close:register("close",60022),removeClose:register("remove-close",60022),x:register("x",60022),repoSync:register("repo-sync",60023),sync:register("sync",60023),clone:register("clone",60024),desktopDownload:register("desktop-download",60024),beaker:register("beaker",60025),microscope:register("microscope",60025),vm:register("vm",60026),deviceDesktop:register("device-desktop",60026),file:register("file",60027),fileText:register("file-text",60027),more:register("more",60028),ellipsis:register("ellipsis",60028),kebabHorizontal:register("kebab-horizontal",60028),mailReply:register("mail-reply",60029),reply:register("reply",60029),organization:register("organization",60030),organizationFilled:register("organization-filled",60030),organizationOutline:register("organization-outline",60030),newFile:register("new-file",60031),fileAdd:register("file-add",60031),newFolder:register("new-folder",60032),fileDirectoryCreate:register("file-directory-create",60032),trash:register("trash",60033),trashcan:register("trashcan",60033),history:register("history",60034),clock:register("clock",60034),folder:register("folder",60035),fileDirectory:register("file-directory",60035),symbolFolder:register("symbol-folder",60035),logoGithub:register("logo-github",60036),markGithub:register("mark-github",60036),github:register("github",60036),terminal:register("terminal",60037),console:register("console",60037),repl:register("repl",60037),zap:register("zap",60038),symbolEvent:register("symbol-event",60038),error:register("error",60039),stop:register("stop",60039),variable:register("variable",60040),symbolVariable:register("symbol-variable",60040),array:register("array",60042),symbolArray:register("symbol-array",60042),symbolModule:register("symbol-module",60043),symbolPackage:register("symbol-package",60043),symbolNamespace:register("symbol-namespace",60043),symbolObject:register("symbol-object",60043),symbolMethod:register("symbol-method",60044),symbolFunction:register("symbol-function",60044),symbolConstructor:register("symbol-constructor",60044),symbolBoolean:register("symbol-boolean",60047),symbolNull:register("symbol-null",60047),symbolNumeric:register("symbol-numeric",60048),symbolNumber:register("symbol-number",60048),symbolStructure:register("symbol-structure",60049),symbolStruct:register("symbol-struct",60049),symbolParameter:register("symbol-parameter",60050),symbolTypeParameter:register("symbol-type-parameter",60050),symbolKey:register("symbol-key",60051),symbolText:register("symbol-text",60051),symbolReference:register("symbol-reference",60052),goToFile:register("go-to-file",60052),symbolEnum:register("symbol-enum",60053),symbolValue:register("symbol-value",60053),symbolRuler:register("symbol-ruler",60054),symbolUnit:register("symbol-unit",60054),activateBreakpoints:register("activate-breakpoints",60055),archive:register("archive",60056),arrowBoth:register("arrow-both",60057),arrowDown:register("arrow-down",60058),arrowLeft:register("arrow-left",60059),arrowRight:register("arrow-right",60060),arrowSmallDown:register("arrow-small-down",60061),arrowSmallLeft:register("arrow-small-left",60062),arrowSmallRight:register("arrow-small-right",60063),arrowSmallUp:register("arrow-small-up",60064),arrowUp:register("arrow-up",60065),bell:register("bell",60066),bold:register("bold",60067),book:register("book",60068),bookmark:register("bookmark",60069),debugBreakpointConditionalUnverified:register("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:register("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:register("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:register("debug-breakpoint-data-unverified",60072),debugBreakpointData:register("debug-breakpoint-data",60073),debugBreakpointDataDisabled:register("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:register("debug-breakpoint-log-unverified",60074),debugBreakpointLog:register("debug-breakpoint-log",60075),debugBreakpointLogDisabled:register("debug-breakpoint-log-disabled",60075),briefcase:register("briefcase",60076),broadcast:register("broadcast",60077),browser:register("browser",60078),bug:register("bug",60079),calendar:register("calendar",60080),caseSensitive:register("case-sensitive",60081),check:register("check",60082),checklist:register("checklist",60083),chevronDown:register("chevron-down",60084),dropDownButton:register("drop-down-button",60084),chevronLeft:register("chevron-left",60085),chevronRight:register("chevron-right",60086),chevronUp:register("chevron-up",60087),chromeClose:register("chrome-close",60088),chromeMaximize:register("chrome-maximize",60089),chromeMinimize:register("chrome-minimize",60090),chromeRestore:register("chrome-restore",60091),circle:register("circle",60092),circleOutline:register("circle-outline",60092),debugBreakpointUnverified:register("debug-breakpoint-unverified",60092),circleSlash:register("circle-slash",60093),circuitBoard:register("circuit-board",60094),clearAll:register("clear-all",60095),clippy:register("clippy",60096),closeAll:register("close-all",60097),cloudDownload:register("cloud-download",60098),cloudUpload:register("cloud-upload",60099),code:register("code",60100),collapseAll:register("collapse-all",60101),colorMode:register("color-mode",60102),commentDiscussion:register("comment-discussion",60103),compareChanges:register("compare-changes",60157),creditCard:register("credit-card",60105),dash:register("dash",60108),dashboard:register("dashboard",60109),database:register("database",60110),debugContinue:register("debug-continue",60111),debugDisconnect:register("debug-disconnect",60112),debugPause:register("debug-pause",60113),debugRestart:register("debug-restart",60114),debugStart:register("debug-start",60115),debugStepInto:register("debug-step-into",60116),debugStepOut:register("debug-step-out",60117),debugStepOver:register("debug-step-over",60118),debugStop:register("debug-stop",60119),debug:register("debug",60120),deviceCameraVideo:register("device-camera-video",60121),deviceCamera:register("device-camera",60122),deviceMobile:register("device-mobile",60123),diffAdded:register("diff-added",60124),diffIgnored:register("diff-ignored",60125),diffModified:register("diff-modified",60126),diffRemoved:register("diff-removed",60127),diffRenamed:register("diff-renamed",60128),diff:register("diff",60129),discard:register("discard",60130),editorLayout:register("editor-layout",60131),emptyWindow:register("empty-window",60132),exclude:register("exclude",60133),extensions:register("extensions",60134),eyeClosed:register("eye-closed",60135),fileBinary:register("file-binary",60136),fileCode:register("file-code",60137),fileMedia:register("file-media",60138),filePdf:register("file-pdf",60139),fileSubmodule:register("file-submodule",60140),fileSymlinkDirectory:register("file-symlink-directory",60141),fileSymlinkFile:register("file-symlink-file",60142),fileZip:register("file-zip",60143),files:register("files",60144),filter:register("filter",60145),flame:register("flame",60146),foldDown:register("fold-down",60147),foldUp:register("fold-up",60148),fold:register("fold",60149),folderActive:register("folder-active",60150),folderOpened:register("folder-opened",60151),gear:register("gear",60152),gift:register("gift",60153),gistSecret:register("gist-secret",60154),gist:register("gist",60155),gitCommit:register("git-commit",60156),gitCompare:register("git-compare",60157),gitMerge:register("git-merge",60158),githubAction:register("github-action",60159),githubAlt:register("github-alt",60160),globe:register("globe",60161),grabber:register("grabber",60162),graph:register("graph",60163),gripper:register("gripper",60164),heart:register("heart",60165),home:register("home",60166),horizontalRule:register("horizontal-rule",60167),hubot:register("hubot",60168),inbox:register("inbox",60169),issueClosed:register("issue-closed",60324),issueReopened:register("issue-reopened",60171),issues:register("issues",60172),italic:register("italic",60173),jersey:register("jersey",60174),json:register("json",60175),bracket:register("bracket",60175),kebabVertical:register("kebab-vertical",60176),key:register("key",60177),law:register("law",60178),lightbulbAutofix:register("lightbulb-autofix",60179),linkExternal:register("link-external",60180),link:register("link",60181),listOrdered:register("list-ordered",60182),listUnordered:register("list-unordered",60183),liveShare:register("live-share",60184),loading:register("loading",60185),location:register("location",60186),mailRead:register("mail-read",60187),mail:register("mail",60188),markdown:register("markdown",60189),megaphone:register("megaphone",60190),mention:register("mention",60191),milestone:register("milestone",60192),gitPullRequestMilestone:register("git-pull-request-milestone",60192),mortarBoard:register("mortar-board",60193),move:register("move",60194),multipleWindows:register("multiple-windows",60195),mute:register("mute",60196),noNewline:register("no-newline",60197),note:register("note",60198),octoface:register("octoface",60199),openPreview:register("open-preview",60200),package:register("package",60201),paintcan:register("paintcan",60202),pin:register("pin",60203),play:register("play",60204),run:register("run",60204),plug:register("plug",60205),preserveCase:register("preserve-case",60206),preview:register("preview",60207),project:register("project",60208),pulse:register("pulse",60209),question:register("question",60210),quote:register("quote",60211),radioTower:register("radio-tower",60212),reactions:register("reactions",60213),references:register("references",60214),refresh:register("refresh",60215),regex:register("regex",60216),remoteExplorer:register("remote-explorer",60217),remote:register("remote",60218),remove:register("remove",60219),replaceAll:register("replace-all",60220),replace:register("replace",60221),repoClone:register("repo-clone",60222),repoForcePush:register("repo-force-push",60223),repoPull:register("repo-pull",60224),repoPush:register("repo-push",60225),report:register("report",60226),requestChanges:register("request-changes",60227),rocket:register("rocket",60228),rootFolderOpened:register("root-folder-opened",60229),rootFolder:register("root-folder",60230),rss:register("rss",60231),ruby:register("ruby",60232),saveAll:register("save-all",60233),saveAs:register("save-as",60234),save:register("save",60235),screenFull:register("screen-full",60236),screenNormal:register("screen-normal",60237),searchStop:register("search-stop",60238),server:register("server",60240),settingsGear:register("settings-gear",60241),settings:register("settings",60242),shield:register("shield",60243),smiley:register("smiley",60244),sortPrecedence:register("sort-precedence",60245),splitHorizontal:register("split-horizontal",60246),splitVertical:register("split-vertical",60247),squirrel:register("squirrel",60248),starFull:register("star-full",60249),starHalf:register("star-half",60250),symbolClass:register("symbol-class",60251),symbolColor:register("symbol-color",60252),symbolCustomColor:register("symbol-customcolor",60252),symbolConstant:register("symbol-constant",60253),symbolEnumMember:register("symbol-enum-member",60254),symbolField:register("symbol-field",60255),symbolFile:register("symbol-file",60256),symbolInterface:register("symbol-interface",60257),symbolKeyword:register("symbol-keyword",60258),symbolMisc:register("symbol-misc",60259),symbolOperator:register("symbol-operator",60260),symbolProperty:register("symbol-property",60261),wrench:register("wrench",60261),wrenchSubaction:register("wrench-subaction",60261),symbolSnippet:register("symbol-snippet",60262),tasklist:register("tasklist",60263),telescope:register("telescope",60264),textSize:register("text-size",60265),threeBars:register("three-bars",60266),thumbsdown:register("thumbsdown",60267),thumbsup:register("thumbsup",60268),tools:register("tools",60269),triangleDown:register("triangle-down",60270),triangleLeft:register("triangle-left",60271),triangleRight:register("triangle-right",60272),triangleUp:register("triangle-up",60273),twitter:register("twitter",60274),unfold:register("unfold",60275),unlock:register("unlock",60276),unmute:register("unmute",60277),unverified:register("unverified",60278),verified:register("verified",60279),versions:register("versions",60280),vmActive:register("vm-active",60281),vmOutline:register("vm-outline",60282),vmRunning:register("vm-running",60283),watch:register("watch",60284),whitespace:register("whitespace",60285),wholeWord:register("whole-word",60286),window:register("window",60287),wordWrap:register("word-wrap",60288),zoomIn:register("zoom-in",60289),zoomOut:register("zoom-out",60290),listFilter:register("list-filter",60291),listFlat:register("list-flat",60292),listSelection:register("list-selection",60293),selection:register("selection",60293),listTree:register("list-tree",60294),debugBreakpointFunctionUnverified:register("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:register("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:register("debug-breakpoint-function-disabled",60296),debugStackframeActive:register("debug-stackframe-active",60297),circleSmallFilled:register("circle-small-filled",60298),debugStackframeDot:register("debug-stackframe-dot",60298),debugStackframe:register("debug-stackframe",60299),debugStackframeFocused:register("debug-stackframe-focused",60299),debugBreakpointUnsupported:register("debug-breakpoint-unsupported",60300),symbolString:register("symbol-string",60301),debugReverseContinue:register("debug-reverse-continue",60302),debugStepBack:register("debug-step-back",60303),debugRestartFrame:register("debug-restart-frame",60304),callIncoming:register("call-incoming",60306),callOutgoing:register("call-outgoing",60307),menu:register("menu",60308),expandAll:register("expand-all",60309),feedback:register("feedback",60310),gitPullRequestReviewer:register("git-pull-request-reviewer",60310),groupByRefType:register("group-by-ref-type",60311),ungroupByRefType:register("ungroup-by-ref-type",60312),account:register("account",60313),gitPullRequestAssignee:register("git-pull-request-assignee",60313),bellDot:register("bell-dot",60314),debugConsole:register("debug-console",60315),library:register("library",60316),output:register("output",60317),runAll:register("run-all",60318),syncIgnored:register("sync-ignored",60319),pinned:register("pinned",60320),githubInverted:register("github-inverted",60321),debugAlt:register("debug-alt",60305),serverProcess:register("server-process",60322),serverEnvironment:register("server-environment",60323),pass:register("pass",60324),stopCircle:register("stop-circle",60325),playCircle:register("play-circle",60326),record:register("record",60327),debugAltSmall:register("debug-alt-small",60328),vmConnect:register("vm-connect",60329),cloud:register("cloud",60330),merge:register("merge",60331),exportIcon:register("export",60332),graphLeft:register("graph-left",60333),magnet:register("magnet",60334),notebook:register("notebook",60335),redo:register("redo",60336),checkAll:register("check-all",60337),pinnedDirty:register("pinned-dirty",60338),passFilled:register("pass-filled",60339),circleLargeFilled:register("circle-large-filled",60340),circleLarge:register("circle-large",60341),circleLargeOutline:register("circle-large-outline",60341),combine:register("combine",60342),gather:register("gather",60342),table:register("table",60343),variableGroup:register("variable-group",60344),typeHierarchy:register("type-hierarchy",60345),typeHierarchySub:register("type-hierarchy-sub",60346),typeHierarchySuper:register("type-hierarchy-super",60347),gitPullRequestCreate:register("git-pull-request-create",60348),runAbove:register("run-above",60349),runBelow:register("run-below",60350),notebookTemplate:register("notebook-template",60351),debugRerun:register("debug-rerun",60352),workspaceTrusted:register("workspace-trusted",60353),workspaceUntrusted:register("workspace-untrusted",60354),workspaceUnspecified:register("workspace-unspecified",60355),terminalCmd:register("terminal-cmd",60356),terminalDebian:register("terminal-debian",60357),terminalLinux:register("terminal-linux",60358),terminalPowershell:register("terminal-powershell",60359),terminalTmux:register("terminal-tmux",60360),terminalUbuntu:register("terminal-ubuntu",60361),terminalBash:register("terminal-bash",60362),arrowSwap:register("arrow-swap",60363),copy:register("copy",60364),personAdd:register("person-add",60365),filterFilled:register("filter-filled",60366),wand:register("wand",60367),debugLineByLine:register("debug-line-by-line",60368),inspect:register("inspect",60369),layers:register("layers",60370),layersDot:register("layers-dot",60371),layersActive:register("layers-active",60372),compass:register("compass",60373),compassDot:register("compass-dot",60374),compassActive:register("compass-active",60375),azure:register("azure",60376),issueDraft:register("issue-draft",60377),gitPullRequestClosed:register("git-pull-request-closed",60378),gitPullRequestDraft:register("git-pull-request-draft",60379),debugAll:register("debug-all",60380),debugCoverage:register("debug-coverage",60381),runErrors:register("run-errors",60382),folderLibrary:register("folder-library",60383),debugContinueSmall:register("debug-continue-small",60384),beakerStop:register("beaker-stop",60385),graphLine:register("graph-line",60386),graphScatter:register("graph-scatter",60387),pieChart:register("pie-chart",60388),bracketDot:register("bracket-dot",60389),bracketError:register("bracket-error",60390),lockSmall:register("lock-small",60391),azureDevops:register("azure-devops",60392),verifiedFilled:register("verified-filled",60393),newLine:register("newline",60394),layout:register("layout",60395),layoutActivitybarLeft:register("layout-activitybar-left",60396),layoutActivitybarRight:register("layout-activitybar-right",60397),layoutPanelLeft:register("layout-panel-left",60398),layoutPanelCenter:register("layout-panel-center",60399),layoutPanelJustify:register("layout-panel-justify",60400),layoutPanelRight:register("layout-panel-right",60401),layoutPanel:register("layout-panel",60402),layoutSidebarLeft:register("layout-sidebar-left",60403),layoutSidebarRight:register("layout-sidebar-right",60404),layoutStatusbar:register("layout-statusbar",60405),layoutMenubar:register("layout-menubar",60406),layoutCentered:register("layout-centered",60407),layoutSidebarRightOff:register("layout-sidebar-right-off",60416),layoutPanelOff:register("layout-panel-off",60417),layoutSidebarLeftOff:register("layout-sidebar-left-off",60418),target:register("target",60408),indent:register("indent",60409),recordSmall:register("record-small",60410),errorSmall:register("error-small",60411),arrowCircleDown:register("arrow-circle-down",60412),arrowCircleLeft:register("arrow-circle-left",60413),arrowCircleRight:register("arrow-circle-right",60414),arrowCircleUp:register("arrow-circle-up",60415),heartFilled:register("heart-filled",60420),map:register("map",60421),mapFilled:register("map-filled",60422),circleSmall:register("circle-small",60423),bellSlash:register("bell-slash",60424),bellSlashDot:register("bell-slash-dot",60425),commentUnresolved:register("comment-unresolved",60426),gitPullRequestGoToChanges:register("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:register("git-pull-request-new-changes",60428),searchFuzzy:register("search-fuzzy",60429),commentDraft:register("comment-draft",60430),send:register("send",60431),sparkle:register("sparkle",60432),insert:register("insert",60433),mic:register("mic",60434),thumbsDownFilled:register("thumbsdown-filled",60435),thumbsUpFilled:register("thumbsup-filled",60436),coffee:register("coffee",60437),snake:register("snake",60438),game:register("game",60439),vr:register("vr",60440),chip:register("chip",60441),piano:register("piano",60442),music:register("music",60443),micFilled:register("mic-filled",60444),gitFetch:register("git-fetch",60445),copilot:register("copilot",60446),lightbulbSparkle:register("lightbulb-sparkle",60447),lightbulbSparkleAutofix:register("lightbulb-sparkle-autofix",60447),robot:register("robot",60448),sparkleFilled:register("sparkle-filled",60449),diffSingle:register("diff-single",60450),diffMultiple:register("diff-multiple",60451),surroundWith:register("surround-with",60452),gitStash:register("git-stash",60454),gitStashApply:register("git-stash-apply",60455),gitStashPop:register("git-stash-pop",60456),runAllCoverage:register("run-all-coverage",60461),runCoverage:register("run-all-coverage",60460),coverage:register("coverage",60462),githubProject:register("github-project",60463),dialogError:register("dialog-error","error"),dialogWarning:register("dialog-warning","warning"),dialogInfo:register("dialog-info","info"),dialogClose:register("dialog-close","close"),treeItemExpanded:register("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:register("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:register("tree-filter-on-type-off","list-selection"),treeFilterClear:register("tree-filter-clear","close"),treeItemLoading:register("tree-item-loading","loading"),menuSelection:register("menu-selection","check"),menuSubmenu:register("menu-submenu","chevron-right"),menuBarMore:register("menubar-more","more"),scrollbarButtonLeft:register("scrollbar-button-left","triangle-left"),scrollbarButtonRight:register("scrollbar-button-right","triangle-right"),scrollbarButtonUp:register("scrollbar-button-up","triangle-up"),scrollbarButtonDown:register("scrollbar-button-down","triangle-down"),toolBarMore:register("toolbar-more","more"),quickInputBack:register("quick-input-back","arrow-left")}},67809:function(e,t,i){"use strict";function diffSets(e,t){let i=[],n=[];for(let n of e)t.has(n)||i.push(n);for(let i of t)e.has(i)||n.push(i);return{removed:i,added:n}}function intersection(e,t){let i=new Set;for(let n of t)e.has(n)&&i.add(n);return i}i.d(t,{j:function(){return intersection},q:function(){return diffSets}})},50164:function(e,t,i){"use strict";var n,o;function roundFloat(e,t){let i=Math.pow(10,t);return Math.round(e*i)/i}i.d(t,{Il:function(){return Color},Oz:function(){return HSLA},VS:function(){return RGBA},tx:function(){return HSVA}});let RGBA=class RGBA{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,i)),this.a=roundFloat(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}};let HSLA=class HSLA{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=roundFloat(Math.max(Math.min(1,t),0),3),this.l=roundFloat(Math.max(Math.min(1,i),0),3),this.a=roundFloat(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,i=e.g/255,n=e.b/255,o=e.a,r=Math.max(t,i,n),s=Math.min(t,i,n),l=0,d=0,c=(s+r)/2,u=r-s;if(u>0){switch(d=Math.min(c<=.5?u/(2*c):u/(2-2*c),1),r){case t:l=(i-n)/u+(i<n?6:0);break;case i:l=(n-t)/u+2;break;case n:l=(t-i)/u+4}l*=60,l=Math.round(l)}return new HSLA(l,d,c,o)}static _hue2rgb(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){let t,i,n;let o=e.h/360,{s:r,l:s,a:l}=e;if(0===r)t=i=n=s;else{let e=s<.5?s*(1+r):s+r-s*r,l=2*s-e;t=HSLA._hue2rgb(l,e,o+1/3),i=HSLA._hue2rgb(l,e,o),n=HSLA._hue2rgb(l,e,o-1/3)}return new RGBA(Math.round(255*t),Math.round(255*i),Math.round(255*n),l)}};let HSVA=class HSVA{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=roundFloat(Math.max(Math.min(1,t),0),3),this.v=roundFloat(Math.max(Math.min(1,i),0),3),this.a=roundFloat(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,i=e.g/255,n=e.b/255,o=Math.max(t,i,n),r=Math.min(t,i,n),s=o-r,l=0===o?0:s/o;return new HSVA(Math.round(60*(0===s?0:o===t?((i-n)/s%6+6)%6:o===i?(n-t)/s+2:(t-i)/s+4)),l,o,e.a)}static toRGBA(e){let{h:t,s:i,v:n,a:o}=e,r=n*i,s=r*(1-Math.abs(t/60%2-1)),l=n-r,[d,c,u]=[0,0,0];return t<60?(d=r,c=s):t<120?(d=s,c=r):t<180?(c=r,u=s):t<240?(c=s,u=r):t<300?(d=s,u=r):t<=360&&(d=r,u=s),new RGBA(d=Math.round((d+l)*255),c=Math.round((c+l)*255),u=Math.round((u+l)*255),o)}};let Color=class Color{static fromHex(e){return Color.Format.CSS.parseHex(e)||Color.red}static equals(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}get hsla(){return this._hsla?this._hsla:HSLA.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:HSVA.fromRGBA(this.rgba)}constructor(e){if(e){if(e instanceof RGBA)this.rgba=e;else if(e instanceof HSLA)this._hsla=e,this.rgba=HSLA.toRGBA(e);else if(e instanceof HSVA)this._hsva=e,this.rgba=HSVA.toRGBA(e);else throw Error("Invalid color ctor argument")}else throw Error("Color needs a value")}equals(e){return!!e&&RGBA.equals(this.rgba,e.rgba)&&HSLA.equals(this.hsla,e.hsla)&&HSVA.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=Color._relativeLuminanceForComponent(this.rgba.r),t=Color._relativeLuminanceForComponent(this.rgba.g),i=Color._relativeLuminanceForComponent(this.rgba.b);return roundFloat(.2126*e+.7152*t+.0722*i,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){let e=(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3;return e>=128}isLighterThan(e){let t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){let t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:i,b:n,a:o}=this.rgba;return new Color(new RGBA(t,i,n,o*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new Color(new RGBA(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||1!==e.rgba.a)return this;let{r:t,g:i,b:n,a:o}=this.rgba;return new Color(new RGBA(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-i),e.rgba.b-o*(e.rgba.b-n),1))}toString(){return this._toString||(this._toString=Color.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;let n=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(o-n)/o,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;let n=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(n-o)/n,e.darken(i)}};Color.white=new Color(new RGBA(255,255,255,1)),Color.black=new Color(new RGBA(0,0,0,1)),Color.red=new Color(new RGBA(255,0,0,1)),Color.blue=new Color(new RGBA(0,0,255,1)),Color.green=new Color(new RGBA(0,255,0,1)),Color.cyan=new Color(new RGBA(0,255,255,1)),Color.lightgrey=new Color(new RGBA(211,211,211,1)),Color.transparent=new Color(new RGBA(0,0,0,0)),function(e){function formatRGB(e){return 1===e.rgba.a?`rgb(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b})`:n.Format.CSS.formatRGBA(e)}function formatRGBA(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`}function formatHSL(e){return 1===e.hsla.a?`hsl(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%)`:n.Format.CSS.formatHSLA(e)}function formatHSLA(e){return`hsla(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`}function _toTwoDigitHex(e){let t=e.toString(16);return 2!==t.length?"0"+t:t}function formatHex(e){return`#${_toTwoDigitHex(e.rgba.r)}${_toTwoDigitHex(e.rgba.g)}${_toTwoDigitHex(e.rgba.b)}`}function formatHexA(e,t=!1){return t&&1===e.rgba.a?n.Format.CSS.formatHex(e):`#${_toTwoDigitHex(e.rgba.r)}${_toTwoDigitHex(e.rgba.g)}${_toTwoDigitHex(e.rgba.b)}${_toTwoDigitHex(Math.round(255*e.rgba.a))}`}function format(e){return e.isOpaque()?n.Format.CSS.formatHex(e):n.Format.CSS.formatRGBA(e)}function parseHex(e){let t=e.length;if(0===t||35!==e.charCodeAt(0))return null;if(7===t){let t=16*_parseHexDigit(e.charCodeAt(1))+_parseHexDigit(e.charCodeAt(2)),i=16*_parseHexDigit(e.charCodeAt(3))+_parseHexDigit(e.charCodeAt(4)),o=16*_parseHexDigit(e.charCodeAt(5))+_parseHexDigit(e.charCodeAt(6));return new n(new RGBA(t,i,o,1))}if(9===t){let t=16*_parseHexDigit(e.charCodeAt(1))+_parseHexDigit(e.charCodeAt(2)),i=16*_parseHexDigit(e.charCodeAt(3))+_parseHexDigit(e.charCodeAt(4)),o=16*_parseHexDigit(e.charCodeAt(5))+_parseHexDigit(e.charCodeAt(6)),r=16*_parseHexDigit(e.charCodeAt(7))+_parseHexDigit(e.charCodeAt(8));return new n(new RGBA(t,i,o,r/255))}if(4===t){let t=_parseHexDigit(e.charCodeAt(1)),i=_parseHexDigit(e.charCodeAt(2)),o=_parseHexDigit(e.charCodeAt(3));return new n(new RGBA(16*t+t,16*i+i,16*o+o))}if(5===t){let t=_parseHexDigit(e.charCodeAt(1)),i=_parseHexDigit(e.charCodeAt(2)),o=_parseHexDigit(e.charCodeAt(3)),r=_parseHexDigit(e.charCodeAt(4));return new n(new RGBA(16*t+t,16*i+i,16*o+o,(16*r+r)/255))}return null}function _parseHexDigit(e){switch(e){case 48:break;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}e.formatRGB=formatRGB,e.formatRGBA=formatRGBA,e.formatHSL=formatHSL,e.formatHSLA=formatHSLA,e.formatHex=formatHex,e.formatHexA=formatHexA,e.format=format,e.parseHex=parseHex}((o=(n=Color||(Color={})).Format||(n.Format={})).CSS||(o.CSS={}))},40414:function(e,t,i){"use strict";function memoize(e,t,i){let n=null,o=null;if("function"==typeof i.value?(n="value",0!==(o=i.value).length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",o=i.get),!o)throw Error("not supported");let r=`$memoize$${t}`;i[n]=function(...e){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,e)}),this[r]}}i.d(t,{H:function(){return memoize}})},17405:function(e,t,i){"use strict";i.d(t,{Hs:function(){return LcsDiff},a$:function(){return stringDiff}});let DiffChange=class DiffChange{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};var n=i(22256);let StringDiffSequence=class StringDiffSequence{constructor(e){this.source=e}getElements(){let e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}};function stringDiff(e,t,i){return new LcsDiff(new StringDiffSequence(e),new StringDiffSequence(t)).ComputeDiff(i).changes}let Debug=class Debug{static Assert(e,t){if(!e)throw Error(t)}};let MyArray=class MyArray{static Copy(e,t,i,n,o){for(let r=0;r<o;r++)i[n+r]=e[t+r]}static Copy2(e,t,i,n,o){for(let r=0;r<o;r++)i[n+r]=e[t+r]}};let DiffChangeHelper=class DiffChangeHelper{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}};let LcsDiff=class LcsDiff{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;let[n,o,r]=LcsDiff._getElements(e),[s,l,d]=LcsDiff._getElements(t);this._hasStrings=r&&d,this._originalStringElements=n,this._originalElementsOrHash=o,this._modifiedStringElements=s,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"==typeof e[0]}static _getElements(e){let t=e.getElements();if(LcsDiff._isStringArray(t)){let e=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)e[i]=(0,n.Cv)(t[i],0);return[t,e,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let i=LcsDiff._getStrictElement(this._originalSequence,e),n=LcsDiff._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return"function"==typeof e.getStrictElement?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,o){let r=[!1],s=this.ComputeDiffRecursive(e,t,i,n,r);return o&&(s=this.PrettifyChanges(s)),{quitEarly:r[0],changes:s}}ComputeDiffRecursive(e,t,i,n,o){for(o[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let o;return i<=n?(Debug.Assert(e===t+1,"originalStart should only be one more than originalEnd"),o=[new DiffChange(e,0,i,n-i+1)]):e<=t?(Debug.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),o=[new DiffChange(e,t-e+1,i,0)]):(Debug.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Debug.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),o=[]),o}let r=[0],s=[0],l=this.ComputeRecursionPoint(e,t,i,n,r,s,o),d=r[0],c=s[0];if(null!==l)return l;if(!o[0]){let r=this.ComputeDiffRecursive(e,d,i,c,o),s=[];return s=o[0]?[new DiffChange(d+1,t-(d+1)+1,c+1,n-(c+1)+1)]:this.ComputeDiffRecursive(d+1,t,c+1,n,o),this.ConcatenateChanges(r,s)}return[new DiffChange(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,o,r,s,l,d,c,u,g,m,f,_,v,C,b){let S=null,y=null,w=new DiffChangeHelper,L=t,k=i,D=m[0]-v[0]-n,x=-1073741824,N=this.m_forwardHistory.length-1;do{let t=D+e;t===L||t<k&&d[t-1]<d[t+1]?(f=(u=d[t+1])-D-n,u<x&&w.MarkNextChange(),x=u,w.AddModifiedElement(u+1,f),D=t+1-e):(f=(u=d[t-1]+1)-D-n,u<x&&w.MarkNextChange(),x=u-1,w.AddOriginalElement(u,f+1),D=t-1-e),N>=0&&(e=(d=this.m_forwardHistory[N])[0],L=1,k=d.length-1)}while(--N>=-1);if(S=w.getReverseChanges(),b[0]){let e=m[0]+1,t=v[0]+1;if(null!==S&&S.length>0){let i=S[S.length-1];e=Math.max(e,i.getOriginalEnd()),t=Math.max(t,i.getModifiedEnd())}y=[new DiffChange(e,g-e+1,t,_-t+1)]}else{w=new DiffChangeHelper,L=r,k=s,D=m[0]-v[0]-l,x=1073741824,N=C?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let e=D+o;e===L||e<k&&c[e-1]>=c[e+1]?(f=(u=c[e+1]-1)-D-l,u>x&&w.MarkNextChange(),x=u+1,w.AddOriginalElement(u+1,f+1),D=e+1-o):(f=(u=c[e-1])-D-l,u>x&&w.MarkNextChange(),x=u,w.AddModifiedElement(u+1,f+1),D=e-1-o),N>=0&&(o=(c=this.m_reverseHistory[N])[0],L=1,k=c.length-1)}while(--N>=-1);y=w.getChanges()}return this.ConcatenateChanges(S,y)}ComputeRecursionPoint(e,t,i,n,o,r,s){let l=0,d=0,c=0,u=0,g=0,m=0;e--,i--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=t-e+(n-i),_=f+1,v=new Int32Array(_),C=new Int32Array(_),b=n-i,S=t-e,y=e-i,w=t-n,L=S-b,k=L%2==0;v[b]=e,C[S]=t,s[0]=!1;for(let L=1;L<=f/2+1;L++){let f=0,D=0;c=this.ClipDiagonalBound(b-L,L,b,_),u=this.ClipDiagonalBound(b+L,L,b,_);for(let e=c;e<=u;e+=2){d=(l=e===c||e<u&&v[e-1]<v[e+1]?v[e+1]:v[e-1]+1)-(e-b)-y;let i=l;for(;l<t&&d<n&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(v[e]=l,l+d>f+D&&(f=l,D=d),!k&&Math.abs(e-S)<=L-1&&l>=C[e]){if(o[0]=l,r[0]=d,i<=C[e]&&L<=1448)return this.WALKTRACE(b,c,u,y,S,g,m,w,v,C,l,t,o,d,n,r,k,s);return null}}let x=(f-e+(D-i)-L)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(f,x)){if(s[0]=!0,o[0]=f,r[0]=D,!(x>0)||!(L<=1448))return e++,i++,[new DiffChange(e,t-e+1,i,n-i+1)];break}g=this.ClipDiagonalBound(S-L,L,S,_),m=this.ClipDiagonalBound(S+L,L,S,_);for(let f=g;f<=m;f+=2){d=(l=f===g||f<m&&C[f-1]>=C[f+1]?C[f+1]-1:C[f-1])-(f-S)-w;let _=l;for(;l>e&&d>i&&this.ElementsAreEqual(l,d);)l--,d--;if(C[f]=l,k&&Math.abs(f-b)<=L&&l<=v[f]){if(o[0]=l,r[0]=d,_>=v[f]&&L<=1448)return this.WALKTRACE(b,c,u,y,S,g,m,w,v,C,l,t,o,d,n,r,k,s);return null}}if(L<=1447){let e=new Int32Array(u-c+2);e[0]=b-c+1,MyArray.Copy2(v,c,e,1,u-c+1),this.m_forwardHistory.push(e),(e=new Int32Array(m-g+2))[0]=S-g+1,MyArray.Copy2(C,g,e,1,m-g+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(b,c,u,y,S,g,m,w,v,C,l,t,o,d,n,r,k,s)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,s=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!s||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){let e=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart),t=this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength);if(t&&!e)break;i.originalStart++,i.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let i=e[t],n=0,o=0;if(t>0){let i=e[t-1];n=i.originalStart+i.originalLength,o=i.modifiedStart+i.modifiedLength}let r=i.originalLength>0,s=i.modifiedLength>0,l=0,d=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let e=1;;e++){let t=i.originalStart-e,c=i.modifiedStart-e;if(t<n||c<o||r&&!this.OriginalElementsAreEqual(t,t+i.originalLength)||s&&!this.ModifiedElementsAreEqual(c,c+i.modifiedLength))break;let u=t===n&&c===o,g=(u?5:0)+this._boundaryScore(t,i.originalLength,c,i.modifiedLength);g>d&&(d=g,l=e)}i.originalStart-=l,i.modifiedStart-=l;let c=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],c)){e[t-1]=c[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){let i=e[t-1],n=e[t],o=n.originalStart-i.originalStart-i.originalLength,r=i.originalStart,s=n.originalStart+n.originalLength,l=s-r,d=i.modifiedStart,c=n.modifiedStart+n.modifiedLength,u=c-d;if(o<5&&l<20&&u<20){let e=this._findBetterContiguousSequence(r,l,d,u,o);if(e){let[t,r]=e;(t!==i.originalStart+i.originalLength||r!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=t-i.originalStart,i.modifiedLength=r-i.modifiedStart,n.originalStart=t+o,n.modifiedStart=r+o,n.originalLength=s-n.originalStart,n.modifiedLength=c-n.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,o){if(t<o||n<o)return null;let r=e+t-o+1,s=i+n-o+1,l=0,d=0,c=0;for(let t=e;t<r;t++)for(let e=i;e<s;e++){let i=this._contiguousSequenceScore(t,e,o);i>0&&i>l&&(l=i,d=t,c=e)}return l>0?[d,c]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let o=0;o<i;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;n+=this._originalStringElements[e+o].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){let o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,n)?1:0;return o+r}ConcatenateChanges(e,t){let i=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){let n=Array(e.length+t.length-1);return MyArray.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],MyArray.Copy(t,1,n,e.length,t.length-1),n}{let i=Array(e.length+t.length);return MyArray.Copy(e,0,i,0,e.length),MyArray.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,i){if(Debug.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Debug.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),!(e.originalStart+e.originalLength>=t.originalStart)&&!(e.modifiedStart+e.modifiedLength>=t.modifiedStart))return i[0]=null,!1;{let n=e.originalStart,o=e.originalLength,r=e.modifiedStart,s=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(s=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new DiffChange(n,o,r,s),!0}}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;let o=t%2==0;return e<0?o===(i%2==0)?0:1:o===((n-i-1)%2==0)?n-1:n-2}}},17861:function(e,t,i){"use strict";i.d(t,{B8:function(){return NotSupportedError},Cp:function(){return onUnexpectedExternalError},F0:function(){return canceled},FU:function(){return CancellationError},L6:function(){return illegalState},b1:function(){return illegalArgument},dL:function(){return onUnexpectedError},he:function(){return BugIndicatingError},n2:function(){return isCancellationError},ri:function(){return transformErrorForSerialization}});let ErrorHandler=class ErrorHandler{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{if(e.stack){if(ErrorNoTelemetry.isErrorNoTelemetry(e))throw new ErrorNoTelemetry(e.message+"\n\n"+e.stack);throw Error(e.message+"\n\n"+e.stack)}throw e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};let n=new ErrorHandler;function onUnexpectedError(e){isCancellationError(e)||n.onUnexpectedError(e)}function onUnexpectedExternalError(e){isCancellationError(e)||n.onUnexpectedExternalError(e)}function transformErrorForSerialization(e){if(e instanceof Error){let{name:t,message:i}=e,n=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:n,noTelemetry:ErrorNoTelemetry.isErrorNoTelemetry(e)}}return e}let o="Canceled";function isCancellationError(e){return e instanceof CancellationError||e instanceof Error&&e.name===o&&e.message===o}let CancellationError=class CancellationError extends Error{constructor(){super(o),this.name=this.message}};function canceled(){let e=Error(o);return e.name=e.message,e}function illegalArgument(e){return e?Error(`Illegal argument: ${e}`):Error("Illegal argument")}function illegalState(e){return e?Error(`Illegal state: ${e}`):Error("Illegal state")}let NotSupportedError=class NotSupportedError extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};let ErrorNoTelemetry=class ErrorNoTelemetry extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof ErrorNoTelemetry)return e;let t=new ErrorNoTelemetry;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return"CodeExpectedError"===e.name}};let BugIndicatingError=class BugIndicatingError extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,BugIndicatingError.prototype)}}},57605:function(e,t,i){"use strict";i.d(t,{D0:function(){return DebounceEmitter},E7:function(){return EventBufferer},K3:function(){return PauseableEmitter},Q5:function(){return Emitter},SZ:function(){return MicrotaskEmitter},Sp:function(){return createEventDeliveryQueue},ZD:function(){return Relay},ju:function(){return n},z5:function(){return EventMultiplexer}});var n,o=i(17861),r=i(61080),s=i(87932),l=i(68324),d=i(38345);!function(e){function defer(e,t){return debounce(e,()=>void 0,0,void 0,!0,void 0,t)}function once(e){return(t,i=null,n)=>{let o,r=!1;return o=e(e=>r?void 0:(o?o.dispose():r=!0,t.call(i,e)),null,n),r&&o.dispose(),o}}function map(e,t,i){return snapshot((i,n=null,o)=>e(e=>i.call(n,t(e)),null,o),i)}function forEach(e,t,i){return snapshot((i,n=null,o)=>e(e=>{t(e),i.call(n,e)},null,o),i)}function filter(e,t,i){return snapshot((i,n=null,o)=>e(e=>t(e)&&i.call(n,e),null,o),i)}function signal(e){return e}function any(...e){return(t,i=null,n)=>{let o=(0,s.F8)(...e.map(e=>e(e=>t.call(i,e))));return addAndReturnDisposable(o,n)}}function reduce(e,t,i,n){let o=i;return map(e,e=>o=t(o,e),n)}function snapshot(e,t){let i;let n=new Emitter({onWillAddFirstListener(){i=e(n.fire,n)},onDidRemoveLastListener(){null==i||i.dispose()}});return null==t||t.add(n),n.event}function addAndReturnDisposable(e,t){return t instanceof Array?t.push(e):t&&t.add(e),e}function debounce(e,t,i=100,n=!1,o=!1,r,s){let l,d,c,u;let g=0,m=new Emitter({leakWarningThreshold:r,onWillAddFirstListener(){l=e(e=>{g++,c=t(c,e),n&&!u&&(m.fire(c),c=void 0),d=()=>{let e=c;c=void 0,u=void 0,(!n||g>1)&&m.fire(e),g=0},"number"==typeof i?(clearTimeout(u),u=setTimeout(d,i)):void 0===u&&(u=0,queueMicrotask(d))})},onWillRemoveListener(){o&&g>0&&(null==d||d())},onDidRemoveLastListener(){d=void 0,l.dispose()}});return null==s||s.add(m),m.event}function accumulate(t,i=0,n){return e.debounce(t,(e,t)=>e?(e.push(t),e):[t],i,void 0,!0,void 0,n)}function latch(e,t=(e,t)=>e===t,i){let n,o=!0;return filter(e,e=>{let i=o||!t(e,n);return o=!1,n=e,i},i)}function split(t,i,n){return[e.filter(t,i,n),e.filter(t,e=>!i(e),n)]}function buffer(e,t=!1,i=[],n){let o=i.slice(),r=e(e=>{o?o.push(e):s.fire(e)});n&&n.add(r);let flush=()=>{null==o||o.forEach(e=>s.fire(e)),o=null},s=new Emitter({onWillAddFirstListener(){!r&&(r=e(e=>s.fire(e)),n&&n.add(r))},onDidAddFirstListener(){o&&(t?setTimeout(flush):flush())},onDidRemoveLastListener(){r&&r.dispose(),r=null}});return n&&n.add(s),s.event}function chain(e,i){return(n,o,r)=>{let s=i(new ChainableSynthesis);return e(function(e){let i=s.evaluate(e);i!==t&&n.call(o,i)},void 0,r)}}e.None=()=>s.JT.None,e.defer=defer,e.once=once,e.map=map,e.forEach=forEach,e.filter=filter,e.signal=signal,e.any=any,e.reduce=reduce,e.debounce=debounce,e.accumulate=accumulate,e.latch=latch,e.split=split,e.buffer=buffer,e.chain=chain;let t=Symbol("HaltChainable");let ChainableSynthesis=class ChainableSynthesis{constructor(){this.steps=[]}map(e){return this.steps.push(e),this}forEach(e){return this.steps.push(t=>(e(t),t)),this}filter(e){return this.steps.push(i=>e(i)?i:t),this}reduce(e,t){let i=t;return this.steps.push(t=>i=e(i,t)),this}latch(e=(e,t)=>e===t){let i,n=!0;return this.steps.push(o=>{let r=n||!e(o,i);return n=!1,i=o,r?o:t}),this}evaluate(e){for(let i of this.steps)if((e=i(e))===t)break;return e}};function fromNodeEventEmitter(e,t,i=e=>e){let fn=(...e)=>n.fire(i(...e)),n=new Emitter({onWillAddFirstListener:()=>e.on(t,fn),onDidRemoveLastListener:()=>e.removeListener(t,fn)});return n.event}function fromDOMEventEmitter(e,t,i=e=>e){let fn=(...e)=>n.fire(i(...e)),n=new Emitter({onWillAddFirstListener:()=>e.addEventListener(t,fn),onDidRemoveLastListener:()=>e.removeEventListener(t,fn)});return n.event}function toPromise(e){return new Promise(t=>once(e)(t))}function fromPromise(e){let t=new Emitter;return e.then(e=>{t.fire(e)},()=>{t.fire(void 0)}).finally(()=>{t.dispose()}),t.event}function runAndSubscribe(e,t,i){return t(i),e(e=>t(e))}e.fromNodeEventEmitter=fromNodeEventEmitter,e.fromDOMEventEmitter=fromDOMEventEmitter,e.toPromise=toPromise,e.fromPromise=fromPromise,e.runAndSubscribe=runAndSubscribe;let EmitterObserver=class EmitterObserver{constructor(e,t){this._observable=e,this._counter=0,this._hasChanged=!1;this.emitter=new Emitter({onWillAddFirstListener:()=>{e.addObserver(this)},onDidRemoveLastListener:()=>{e.removeObserver(this)}}),t&&t.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}};function fromObservable(e,t){let i=new EmitterObserver(e,t);return i.emitter.event}function fromObservableLight(e){return(t,i,n)=>{let o=0,r=!1,l={beginUpdate(){o++},endUpdate(){0==--o&&(e.reportChanges(),r&&(r=!1,t.call(i)))},handlePossibleChange(){},handleChange(){r=!0}};e.addObserver(l),e.reportChanges();let d={dispose(){e.removeObserver(l)}};return n instanceof s.SL?n.add(d):Array.isArray(n)&&n.push(d),d}}e.fromObservable=fromObservable,e.fromObservableLight=fromObservableLight}(n||(n={}));let EventProfiling=class EventProfiling{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${EventProfiling._idPool++}`,EventProfiling.all.add(this)}start(e){this._stopWatch=new d.G,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};EventProfiling.all=new Set,EventProfiling._idPool=0;let LeakageMonitor=class LeakageMonitor{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;null===(e=this._stacks)||void 0===e||e.clear()}check(e,t){let i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);let n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){let e;this._warnCountdown=.5*i;let n=0;for(let[t,i]of this._stacks)(!e||n<i)&&(e=t,n=i);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${n}):`),console.warn(e)}return()=>{let t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}};let Stacktrace=class Stacktrace{static create(){var e;return new Stacktrace(null!==(e=Error().stack)&&void 0!==e?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}};let UniqueContainer=class UniqueContainer{constructor(e){this.value=e}};let Emitter=class Emitter{constructor(e){var t,i,n,o,r;this._size=0,this._options=e,this._leakageMon=(null===(t=this._options)||void 0===t?void 0:t.leakWarningThreshold)?new LeakageMonitor(null!==(n=null===(i=this._options)||void 0===i?void 0:i.leakWarningThreshold)&&void 0!==n?n:-1):void 0,this._perfMon=(null===(o=this._options)||void 0===o?void 0:o._profName)?new EventProfiling(this._options._profName):void 0,this._deliveryQueue=null===(r=this._options)||void 0===r?void 0:r.deliveryQueue}dispose(){var e,t,i,n;this._disposed||(this._disposed=!0,(null===(e=this._deliveryQueue)||void 0===e?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null===(i=null===(t=this._options)||void 0===t?void 0:t.onDidRemoveLastListener)||void 0===i||i.call(t),null===(n=this._leakageMon)||void 0===n||n.dispose())}get event(){var e;return null!==(e=this._event)&&void 0!==e||(this._event=(e,t,i)=>{var n,o,r,l,d;let c;if(this._leakageMon&&this._size>3*this._leakageMon.threshold)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),s.JT.None;if(this._disposed)return s.JT.None;t&&(e=e.bind(t));let u=new UniqueContainer(e);this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(u.stack=Stacktrace.create(),c=this._leakageMon.check(u.stack,this._size+1)),this._listeners?this._listeners instanceof UniqueContainer?(null!==(d=this._deliveryQueue)&&void 0!==d||(this._deliveryQueue=new EventDeliveryQueuePrivate),this._listeners=[this._listeners,u]):this._listeners.push(u):(null===(o=null===(n=this._options)||void 0===n?void 0:n.onWillAddFirstListener)||void 0===o||o.call(n,this),this._listeners=u,null===(l=null===(r=this._options)||void 0===r?void 0:r.onDidAddFirstListener)||void 0===l||l.call(r,this)),this._size++;let g=(0,s.OF)(()=>{null==c||c(),this._removeListener(u)});return i instanceof s.SL?i.add(g):Array.isArray(i)&&i.push(g),g}),this._event}_removeListener(e){var t,i,n,o;if(null===(i=null===(t=this._options)||void 0===t?void 0:t.onWillRemoveListener)||void 0===i||i.call(t,this),!this._listeners)return;if(1===this._size){this._listeners=void 0,null===(o=null===(n=this._options)||void 0===n?void 0:n.onDidRemoveLastListener)||void 0===o||o.call(n,this),this._size=0;return}let r=this._listeners,s=r.indexOf(e);if(-1===s)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),Error("Attempted to dispose unknown listener");this._size--,r[s]=void 0;let l=this._deliveryQueue.current===this;if(2*this._size<=r.length){let e=0;for(let t=0;t<r.length;t++)r[t]?r[e++]=r[t]:l&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=e}}_deliver(e,t){var i;if(!e)return;let n=(null===(i=this._options)||void 0===i?void 0:i.onListenerError)||o.dL;if(!n){e.value(t);return}try{e.value(t)}catch(e){n(e)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,n,o;if((null===(t=this._deliveryQueue)||void 0===t?void 0:t.current)&&(this._deliverQueue(this._deliveryQueue),null===(i=this._perfMon)||void 0===i||i.stop()),null===(n=this._perfMon)||void 0===n||n.start(this._size),this._listeners){if(this._listeners instanceof UniqueContainer)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}}null===(o=this._perfMon)||void 0===o||o.stop()}hasListeners(){return this._size>0}};let createEventDeliveryQueue=()=>new EventDeliveryQueuePrivate;let EventDeliveryQueuePrivate=class EventDeliveryQueuePrivate{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};let PauseableEmitter=class PauseableEmitter extends Emitter{constructor(e){super(e),this._isPaused=0,this._eventQueue=new l.S,this._mergeFn=null==e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0==--this._isPaused){if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}}fire(e){this._size&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}};let DebounceEmitter=class DebounceEmitter extends PauseableEmitter{constructor(e){var t;super(e),this._delay=null!==(t=e.delay)&&void 0!==t?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}};let MicrotaskEmitter=class MicrotaskEmitter extends Emitter{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=null==e?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),1===this._queuedEvents.length&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(e=>super.fire(e)),this._queuedEvents=[]}))}};let EventMultiplexer=class EventMultiplexer{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new Emitter({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){let t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),(0,s.OF)((0,r.M)(()=>{this.hasListeners&&this.unhook(t);let e=this.events.indexOf(t);this.events.splice(e,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(e=>this.emitter.fire(e))}unhook(e){var t;null===(t=e.listener)||void 0===t||t.dispose(),e.listener=null}dispose(){var e;for(let t of(this.emitter.dispose(),this.events))null===(e=t.listener)||void 0===e||e.dispose();this.events=[]}};let EventBufferer=class EventBufferer{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e(e=>{let n=this.buffers[this.buffers.length-1];n?n.push(()=>t.call(i,e)):t.call(i,e)},void 0,n)}bufferEvents(e){let t=[];this.buffers.push(t);let i=e();return this.buffers.pop(),t.forEach(e=>e()),i}};let Relay=class Relay{constructor(){this.listening=!1,this.inputEvent=n.None,this.inputEventListener=s.JT.None,this.emitter=new Emitter({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},32019:function(e,t,i){"use strict";i.d(t,{KM:function(){return isEqualOrParent},ej:function(){return toSlashes},fn:function(){return toPosixPath},oP:function(){return hasDriveLetter},yj:function(){return getRoot}});var n=i(51777),o=i(88059),r=i(45837);function isPathSeparator(e){return 47===e||92===e}function toSlashes(e){return e.replace(/[\\/]/g,n.KR.sep)}function toPosixPath(e){return -1===e.indexOf("/")&&(e=toSlashes(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function getRoot(e,t=n.KR.sep){if(!e)return"";let i=e.length,o=e.charCodeAt(0);if(isPathSeparator(o)){if(isPathSeparator(e.charCodeAt(1))&&!isPathSeparator(e.charCodeAt(2))){let n=3,o=n;for(;n<i&&!isPathSeparator(e.charCodeAt(n));n++);if(o!==n&&!isPathSeparator(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if(isPathSeparator(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}if(isWindowsDriveLetter(o)&&58===e.charCodeAt(1))return isPathSeparator(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let r=e.indexOf("://");if(-1!==r){for(r+=3;r<i;r++)if(isPathSeparator(e.charCodeAt(r)))return e.slice(0,r+1)}return""}function isEqualOrParent(e,t,i,o=n.ir){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){let i=(0,r.ok)(e,t);if(!i)return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===o&&n--,e.charAt(n)===o}return t.charAt(t.length-1)!==o&&(t+=o),0===e.indexOf(t)}function isWindowsDriveLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function hasDriveLetter(e,t=o.ED){return!!t&&isWindowsDriveLetter(e.charCodeAt(0))&&58===e.charCodeAt(1)}},61171:function(e,t,i){"use strict";i.d(t,{CL:function(){return n},mX:function(){return FuzzyScoreOptions},jB:function(){return anyScore},mB:function(){return createMatches},EW:function(){return fuzzyScore},l7:function(){return fuzzyScoreGracefulAggressive},ir:function(){return matchesContiguousSubString},Oh:function(){return matchesFuzzy},XU:function(){return matchesFuzzy2},Ji:function(){return m},Sy:function(){return matchesSubString},KZ:function(){return matchesWords},or:function(){return or}});var n,o=i(30619);function getKoreanAltChars(e){let t=disassembleKorean(e);if(t&&t.length>0)return new Uint32Array(t)}let r=0,s=new Uint32Array(10);function disassembleKorean(e){if(r=0,getCodesFromArray(e,l,4352),r>0||(getCodesFromArray(e,d,4449),r>0)||(getCodesFromArray(e,c,4520),r>0)||(getCodesFromArray(e,u,12593),r))return s.subarray(0,r);if(e>=44032&&e<=55203){let t=e-44032,i=t%588,n=Math.floor(t/588),o=Math.floor(i/28),g=i%28-1;if(n<l.length?getCodesFromArray(n,l,0):4352+n-12593<u.length&&getCodesFromArray(4352+n,u,12593),o<d.length?getCodesFromArray(o,d,0):4449+o-12593<u.length&&getCodesFromArray(4449+o-12593,u,12593),g>=0&&(g<c.length?getCodesFromArray(g,c,0):4520+g-12593<u.length&&getCodesFromArray(4520+g-12593,u,12593)),r>0)return s.subarray(0,r)}}function getCodesFromArray(e,t,i){e>=i&&e<i+t.length&&addCodesToBuffer(t[e-i])}function addCodesToBuffer(e){0!==e&&(s[r++]=255&e,e>>8&&(s[r++]=e>>8&255),e>>16&&(s[r++]=e>>16&255))}let l=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),d=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),c=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),u=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);var g=i(45837);function or(...e){return function(t,i){for(let n=0,o=e.length;n<o;n++){let o=e[n](t,i);if(o)return o}return null}}_matchesPrefix.bind(void 0,!1);let m=_matchesPrefix.bind(void 0,!0);function _matchesPrefix(e,t,i){return i&&!(i.length<t.length)&&(e?g.ok(i,t):0===i.indexOf(t))?t.length>0?[{start:0,end:t.length}]:[]:null}function matchesContiguousSubString(e,t){let i=t.toLowerCase().indexOf(e.toLowerCase());return -1===i?null:[{start:i,end:i+e.length}]}function matchesSubString(e,t){return _matchesSubString(e.toLowerCase(),t.toLowerCase(),0,0)}function _matchesSubString(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]===t[n]){let o=null;return(o=_matchesSubString(e,t,i+1,n+1))?join({start:n,end:n+1},o):null}return _matchesSubString(e,t,i,n+1)}function isLower(e){return 97<=e&&e<=122}function isUpper(e){return 65<=e&&e<=90}function isNumber(e){return 48<=e&&e<=57}function isWhitespace(e){return 32===e||9===e||10===e||13===e}let f=new Set;function isWordSeparator(e){return isWhitespace(e)||f.has(e)}function charactersMatch(e,t){return e===t||isWordSeparator(e)&&isWordSeparator(t)}"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>f.add(e.charCodeAt(0)));let _=new Map;function getAlternateCodes(e){let t;if(_.has(e))return _.get(e);let i=getKoreanAltChars(e);return i&&(t=i),_.set(e,t),t}function isAlphanumeric(e){return isLower(e)||isUpper(e)||isNumber(e)}function join(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function nextAnchor(e,t){for(let i=t;i<e.length;i++){let t=e.charCodeAt(i);if(isUpper(t)||isNumber(t)||i>0&&!isAlphanumeric(e.charCodeAt(i-1)))return i}return e.length}function _matchesCamelCase(e,t,i,n){if(i===e.length)return[];if(n===t.length||e[i]!==t[n].toLowerCase())return null;{let o=null,r=n+1;for(o=_matchesCamelCase(e,t,i+1,n+1);!o&&(r=nextAnchor(t,r))<t.length;)o=_matchesCamelCase(e,t,i+1,r),r++;return null===o?null:join({start:n,end:n+1},o)}}function analyzeCamelCaseWord(e){let t=0,i=0,n=0,o=0,r=0;for(let s=0;s<e.length;s++)isUpper(r=e.charCodeAt(s))&&t++,isLower(r)&&i++,isAlphanumeric(r)&&n++,isNumber(r)&&o++;let s=t/e.length,l=i/e.length,d=n/e.length,c=o/e.length;return{upperPercent:s,lowerPercent:l,alphaPercent:d,numericPercent:c}}function isUpperCaseWord(e){let{upperPercent:t,lowerPercent:i}=e;return 0===i&&t>.6}function isCamelCaseWord(e){let{upperPercent:t,lowerPercent:i,alphaPercent:n,numericPercent:o}=e;return i>.2&&t<.8&&n>.6&&o<.2}function isCamelCasePattern(e){let t=0,i=0,n=0,o=0;for(let r=0;r<e.length;r++)isUpper(n=e.charCodeAt(r))&&t++,isLower(n)&&i++,isWhitespace(n)&&o++;return(0===t||0===i)&&0===o?e.length<=30:t<=5}function matchesCamelCase(e,t){if(!t||0===(t=t.trim()).length||!isCamelCasePattern(e))return null;t.length>60&&(t=t.substring(0,60));let i=analyzeCamelCaseWord(t);if(!isCamelCaseWord(i)){if(!isUpperCaseWord(i))return null;t=t.toLowerCase()}let n=null,o=0;for(e=e.toLowerCase();o<t.length&&null===(n=_matchesCamelCase(e,t,0,o));)o=nextAnchor(t,o+1);return n}function matchesWords(e,t,i=!1){if(!t||0===t.length)return null;let n=null,o=0;for(e=e.toLowerCase(),t=t.toLowerCase();o<t.length&&null===(n=_matchesWords(e,t,0,o,i));)o=nextWord(t,o+1);return n}function _matchesWords(e,t,i,n,o){let r=0;if(i===e.length)return[];if(n===t.length)return null;if(!charactersMatch(e.charCodeAt(i),t.charCodeAt(n))){let o=getAlternateCodes(e.charCodeAt(i));if(!o)return null;for(let e=0;e<o.length;e++)if(!charactersMatch(o[e],t.charCodeAt(n+e)))return null;r+=o.length-1}let s=null,l=n+r+1;if(s=_matchesWords(e,t,i+1,l,o),!o)for(;!s&&(l=nextWord(t,l))<t.length;)s=_matchesWords(e,t,i+1,l,o),l++;if(!s)return null;if(e.charCodeAt(i)!==t.charCodeAt(n)){let o=getAlternateCodes(e.charCodeAt(i));if(!o)return s;for(let e=0;e<o.length;e++)if(o[e]!==t.charCodeAt(n+e))return s}return join({start:n,end:n+r+1},s)}function nextWord(e,t){for(let i=t;i<e.length;i++)if(isWordSeparator(e.charCodeAt(i))||i>0&&isWordSeparator(e.charCodeAt(i-1)))return i;return e.length}let v=or(m,matchesCamelCase,matchesContiguousSubString),C=or(m,matchesCamelCase,matchesSubString),b=new o.z6(1e4);function matchesFuzzy(e,t,i=!1){if("string"!=typeof e||"string"!=typeof t)return null;let n=b.get(e);n||(n=RegExp(g.un(e),"i"),b.set(e,n));let o=n.exec(t);return o?[{start:o.index,end:o.index+o[0].length}]:i?C(e,t):v(e,t)}function matchesFuzzy2(e,t){let i=fuzzyScore(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?createMatches(i):null}function anyScore(e,t,i,n,o,r){let s=Math.min(13,e.length);for(;i<s;i++){let s=fuzzyScore(e,t,i,n,o,r,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(s)return s}return[0,r]}function createMatches(e){if(void 0===e)return[];let t=[],i=e[1];for(let n=e.length-1;n>1;n--){let o=e[n]+i,r=t[t.length-1];r&&r.end===o?r.end=o+1:t.push({start:o,end:o+1})}return t}function initTable(){let e=[],t=[];for(let e=0;e<=128;e++)t[e]=0;for(let i=0;i<=128;i++)e.push(t.slice(0));return e}function initArr(e){let t=[];for(let i=0;i<=e;i++)t[i]=0;return t}let S=initArr(256),y=initArr(256),w=initTable(),L=initTable(),k=initTable();function isSeparatorAtPos(e,t){if(t<0||t>=e.length)return!1;let i=e.codePointAt(t);switch(i){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:if(g.C8(i))return!0;return!1}}function isWhitespaceAtPos(e,t){if(t<0||t>=e.length)return!1;let i=e.charCodeAt(t);switch(i){case 32:case 9:return!0;default:return!1}}function isPatternInWord(e,t,i,n,o,r,s=!1){for(;t<i&&o<r;)e[t]===n[o]&&(s&&(S[t]=o),t+=1),o+=1;return t===i}!function(e){function isDefault(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}e.Default=[-100,0],e.isDefault=isDefault}(n||(n={}));let FuzzyScoreOptions=class FuzzyScoreOptions{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};function fuzzyScore(e,t,i,n,o,r,s=FuzzyScoreOptions.default){let l=e.length>128?128:e.length,d=n.length>128?128:n.length;if(i>=l||r>=d||l-i>d-r||!isPatternInWord(t,i,l,o,r,d,!0))return;_fillInMaxWordMatchPos(l,d,i,r,t,o);let c=1,u=1,g=i,m=r,f=[!1];for(c=1,g=i;g<l;c++,g++){let s=S[g],_=y[g],v=g+1<l?y[g+1]:d;for(u=s-r+1,m=s;m<v;u++,m++){let l=Number.MIN_SAFE_INTEGER,v=!1;m<=_&&(l=_doScore(e,t,g,i,n,o,m,d,r,0===w[c-1][u-1],f));let C=0;l!==Number.MAX_SAFE_INTEGER&&(v=!0,C=l+L[c-1][u-1]);let b=m>s,S=b?L[c][u-1]+(w[c][u-1]>0?-5:0):0,y=m>s+1&&w[c][u-1]>0,D=y?L[c][u-2]+(w[c][u-2]>0?-5:0):0;if(y&&(!b||D>=S)&&(!v||D>=C))L[c][u]=D,k[c][u]=3,w[c][u]=0;else if(b&&(!v||S>=C))L[c][u]=S,k[c][u]=2,w[c][u]=0;else if(v)L[c][u]=C,k[c][u]=1,w[c][u]=w[c-1][u-1]+1;else throw Error("not possible")}}if(!f[0]&&!s.firstMatchCanBeWeak)return;c--,u--;let _=[L[c][u],r],v=0,C=0;for(;c>=1;){var b;let e=u;do{let t=k[c][e];if(3===t)e-=2;else if(2===t)e-=1;else break}while(e>=1);v>1&&t[i+c-1]===o[r+u-1]&&n[b=e+r-1]===o[b]&&v+1>w[c][e]&&(e=u),e===u?v++:v=1,C||(C=e),c--,u=e-1,_.push(u)}d===l&&s.boostFullMatch&&(_[0]+=2);let D=C-l;return _[0]-=D,_}function _fillInMaxWordMatchPos(e,t,i,n,o,r){let s=e-1,l=t-1;for(;s>=i&&l>=n;)o[s]===r[l]&&(y[s]=l,s--),l--}function _doScore(e,t,i,n,o,r,s,l,d,c,u){var g;if(t[i]!==r[s])return Number.MIN_SAFE_INTEGER;let m=1,f=!1;return s===i-n?m=e[i]===o[s]?7:5:o[s]===r[s]||0!==s&&o[g=s-1]!==r[g]?isSeparatorAtPos(r,s)&&(0===s||!isSeparatorAtPos(r,s-1))?m=5:(isSeparatorAtPos(r,s-1)||isWhitespaceAtPos(r,s-1))&&(m=5,f=!0):(m=e[i]===o[s]?7:5,f=!0),m>1&&i===n&&(u[0]=!0),f||(f=o[s]!==r[s]||isSeparatorAtPos(r,s-1)||isWhitespaceAtPos(r,s-1)),i===n?s>d&&(m-=f?3:5):c?m+=f?2:0:m+=f?0:1,s+1===l&&(m-=f?3:5),m}function fuzzyScoreGracefulAggressive(e,t,i,n,o,r,s){return fuzzyScoreWithPermutations(e,t,i,n,o,r,!0,s)}function fuzzyScoreWithPermutations(e,t,i,n,o,r,s,l){let d=fuzzyScore(e,t,i,n,o,r,l);if(d&&!s)return d;if(e.length>=3){let t=Math.min(7,e.length-1);for(let s=i+1;s<t;s++){let t=nextTypoPermutation(e,s);if(t){let e=fuzzyScore(t,t.toLowerCase(),i,n,o,r,l);e&&(e[0]-=3,(!d||e[0]>d[0])&&(d=e))}}}return d}function nextTypoPermutation(e,t){if(t+1>=e.length)return;let i=e[t],n=e[t+1];if(i!==n)return e.slice(0,t)+n+i+e.slice(t+2)}FuzzyScoreOptions.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}},61080:function(e,t,i){"use strict";function createSingleCallFunction(e,t){let i;let n=this,o=!1;return function(){if(o)return i;if(o=!0,t)try{i=e.apply(n,arguments)}finally{t()}else i=e.apply(n,arguments);return i}}i.d(t,{M:function(){return createSingleCallFunction}})},42302:function(e,t,i){"use strict";i.d(t,{EQ:function(){return match},Qc:function(){return parse}});var n=i(66614),o=i(32019),r=i(30619),s=i(51777),l=i(88059),d=i(45837);let c="[/\\\\]",u="[^/\\\\]",g=/\//g;function starsToRegExp(e,t){switch(e){case 0:return"";case 1:return`${u}*?`;default:return`(?:${c}|${u}+${c}${t?`|${c}${u}+`:""})*?`}}function splitGlobAware(e,t){if(!e)return[];let i=[],n=!1,o=!1,r="";for(let s of e){switch(s){case t:if(!n&&!o){i.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":o=!0;break;case"]":o=!1}r+=s}return r&&i.push(r),i}function parseRegExp(e){if(!e)return"";let t="",i=splitGlobAware(e,"/");if(i.every(e=>"**"===e))t=".*";else{let e=!1;i.forEach((n,o)=>{if("**"===n){if(e)return;t+=starsToRegExp(2,o===i.length-1)}else{let e=!1,r="",s=!1,l="";for(let i of n){if("}"!==i&&e){r+=i;continue}if(s&&("]"!==i||!l)){let e;e="-"===i?i:"^"!==i&&"!"!==i||l?"/"===i?"":(0,d.ec)(i):"^",l+=e;continue}switch(i){case"{":e=!0;continue;case"[":s=!0;continue;case"}":{let i=splitGlobAware(r,","),n=`(?:${i.map(e=>parseRegExp(e)).join("|")})`;t+=n,e=!1,r="";break}case"]":t+="["+l+"]",s=!1,l="";break;case"?":t+=u;continue;case"*":t+=starsToRegExp(1);continue;default:t+=(0,d.ec)(i)}}o<i.length-1&&("**"!==i[o+1]||o+2<i.length)&&(t+=c)}e="**"===n})}return t}let m=/^\*\*\/\*\.[\w\.-]+$/,f=/^\*\*\/([\w\.-]+)\/?$/,_=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,v=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,C=/^\*\*((\/[\w\.-]+)+)\/?$/,b=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,S=new r.z6(1e4),FALSE=function(){return!1},NULL=function(){return null};function parsePattern(e,t){let i,n;if(!e)return NULL;i=(i="string"!=typeof e?e.pattern:e).trim();let o=`${i}_${!!t.trimForExclusions}`,r=S.get(o);return r||(r=m.test(i)?trivia1(i.substr(4),i):(n=f.exec(trimForExclusions(i,t)))?trivia2(n[1],i):(t.trimForExclusions?v:_).test(i)?trivia3(i,t):(n=C.exec(trimForExclusions(i,t)))?trivia4and5(n[1].substr(1),i,!0):(n=b.exec(trimForExclusions(i,t)))?trivia4and5(n[1],i,!1):toRegExp(i),S.set(o,r)),wrapRelativePattern(r,e)}function wrapRelativePattern(e,t){if("string"==typeof t)return e;let wrappedPattern=function(i,n){return(0,o.KM)(i,t.base,!l.IJ)?e((0,d.j3)(i.substr(t.base.length),s.ir),n):null};return wrappedPattern.allBasenames=e.allBasenames,wrappedPattern.allPaths=e.allPaths,wrappedPattern.basenames=e.basenames,wrappedPattern.patterns=e.patterns,wrappedPattern}function trimForExclusions(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function trivia1(e,t){return function(i,n){return"string"==typeof i&&i.endsWith(e)?t:null}}function trivia2(e,t){let i=`/${e}`,n=`\\${e}`,parsedPattern=function(o,r){return"string"!=typeof o?null:r?r===e?t:null:o===e||o.endsWith(i)||o.endsWith(n)?t:null},o=[e];return parsedPattern.basenames=o,parsedPattern.patterns=[t],parsedPattern.allBasenames=o,parsedPattern}function trivia3(e,t){let i=aggregateBasenameMatches(e.slice(1,-1).split(",").map(e=>parsePattern(e,t)).filter(e=>e!==NULL),e),n=i.length;if(!n)return NULL;if(1===n)return i[0];let parsedPattern=function(t,n){for(let o=0,r=i.length;o<r;o++)if(i[o](t,n))return e;return null},o=i.find(e=>!!e.allBasenames);o&&(parsedPattern.allBasenames=o.allBasenames);let r=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return r.length&&(parsedPattern.allPaths=r),parsedPattern}function trivia4and5(e,t,i){let n;let o=s.ir===s.KR.sep,r=o?e:e.replace(g,s.ir),l=s.ir+r,d=s.KR.sep+e;return(n=i?function(i,n){return"string"==typeof i&&(i===r||i.endsWith(l)||!o&&(i===e||i.endsWith(d)))?t:null}:function(i,n){return"string"!=typeof i||i!==r&&(o||i!==e)?null:t}).allPaths=[(i?"*/":"./")+e],n}function toRegExp(e){try{let t=RegExp(`^${parseRegExp(e)}$`);return function(i){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(e){return NULL}}function match(e,t,i){return!!e&&"string"==typeof t&&parse(e)(t,void 0,i)}function parse(e,t={}){if(!e)return FALSE;if("string"==typeof e||isRelativePattern(e)){let i=parsePattern(e,t);if(i===NULL)return FALSE;let resultPattern=function(e,t){return!!i(e,t)};return i.allBasenames&&(resultPattern.allBasenames=i.allBasenames),i.allPaths&&(resultPattern.allPaths=i.allPaths),resultPattern}return parsedExpression(e,t)}function isRelativePattern(e){return!!e&&"string"==typeof e.base&&"string"==typeof e.pattern}function parsedExpression(e,t){let i=aggregateBasenameMatches(Object.getOwnPropertyNames(e).map(i=>parseExpressionPattern(i,e[i],t)).filter(e=>e!==NULL)),o=i.length;if(!o)return NULL;if(!i.some(e=>!!e.requiresSiblings)){if(1===o)return i[0];let resultExpression=function(e,t){let o;for(let r=0,s=i.length;r<s;r++){let s=i[r](e,t);if("string"==typeof s)return s;(0,n.J8)(s)&&(o||(o=[]),o.push(s))}return o?(async()=>{for(let e of o){let t=await e;if("string"==typeof t)return t}return null})():null},e=i.find(e=>!!e.allBasenames);e&&(resultExpression.allBasenames=e.allBasenames);let t=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return t.length&&(resultExpression.allPaths=t),resultExpression}let resultExpression=function(e,t,o){let r,l;for(let d=0,c=i.length;d<c;d++){let c=i[d];c.requiresSiblings&&o&&(t||(t=(0,s.EZ)(e)),r||(r=t.substr(0,t.length-(0,s.DZ)(e).length)));let u=c(e,t,r,o);if("string"==typeof u)return u;(0,n.J8)(u)&&(l||(l=[]),l.push(u))}return l?(async()=>{for(let e of l){let t=await e;if("string"==typeof t)return t}return null})():null},r=i.find(e=>!!e.allBasenames);r&&(resultExpression.allBasenames=r.allBasenames);let l=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return l.length&&(resultExpression.allPaths=l),resultExpression}function parseExpressionPattern(e,t,i){if(!1===t)return NULL;let o=parsePattern(e,i);if(o===NULL)return NULL;if("boolean"==typeof t)return o;if(t){let i=t.when;if("string"==typeof i){let result=(t,r,s,l)=>{if(!l||!o(t,r))return null;let d=i.replace("$(basename)",()=>s),c=l(d);return(0,n.J8)(c)?c.then(t=>t?e:null):c?e:null};return result.requiresSiblings=!0,result}}return o}function aggregateBasenameMatches(e,t){let i;let n=e.filter(e=>!!e.basenames);if(n.length<2)return e;let o=n.reduce((e,t)=>{let i=t.basenames;return i?e.concat(i):e},[]);if(t){i=[];for(let e=0,n=o.length;e<n;e++)i.push(t)}else i=n.reduce((e,t)=>{let i=t.patterns;return i?e.concat(i):e},[]);let aggregate=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){let t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}let n=o.indexOf(t);return -1!==n?i[n]:null};aggregate.basenames=o,aggregate.patterns=i,aggregate.allBasenames=o;let r=e.filter(e=>!e.basenames);return r.push(aggregate),r}},22256:function(e,t,i){"use strict";i.d(t,{Cv:function(){return stringHash},SP:function(){return doHash},vp:function(){return hash},yP:function(){return StringSHA1}});var n=i(45837);function hash(e){return doHash(e,0)}function doHash(e,t){switch(typeof e){case"object":if(null===e)return numberHash(349,t);if(Array.isArray(e))return arrayHash(e,t);return objectHash(e,t);case"string":return stringHash(e,t);case"boolean":return booleanHash(e,t);case"number":return numberHash(e,t);case"undefined":return numberHash(937,t);default:return numberHash(617,t)}}function numberHash(e,t){return(t<<5)-t+e|0}function booleanHash(e,t){return numberHash(e?433:863,t)}function stringHash(e,t){t=numberHash(149417,t);for(let i=0,n=e.length;i<n;i++)t=numberHash(e.charCodeAt(i),t);return t}function arrayHash(e,t){return t=numberHash(104579,t),e.reduce((e,t)=>doHash(t,e),t)}function objectHash(e,t){return t=numberHash(181387,t),Object.keys(e).sort().reduce((t,i)=>(t=stringHash(i,t),doHash(e[i],t)),t)}function leftRotate(e,t,i=32){let n=i-t;return(e<<t|(~((1<<n)-1)&e)>>>n)>>>0}function fill(e,t=0,i=e.byteLength,n=0){for(let o=0;o<i;o++)e[t+o]=n}function leftPad(e,t,i="0"){for(;e.length<t;)e=i+e;return e}function toHexString(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join(""):leftPad((e>>>0).toString(16),t/4)}let StringSHA1=class StringSHA1{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t,i;let o=e.length;if(0===o)return;let r=this._buff,s=this._buffLen,l=this._leftoverHighSurrogate;for(0!==l?(t=l,i=-1,l=0):(t=e.charCodeAt(0),i=0);;){let d=t;if(n.ZG(t)){if(i+1<o){let o=e.charCodeAt(i+1);n.YK(o)?(i++,d=n.rL(t,o)):d=65533}else{l=t;break}}else n.YK(t)&&(d=65533);if(s=this._push(r,s,d),++i<o)t=e.charCodeAt(i);else break}this._buffLen=s,this._leftoverHighSurrogate=l}_push(e,t,i){return i<128?e[t++]=i:(i<2048?e[t++]=192|(1984&i)>>>6:(i<65536?e[t++]=224|(61440&i)>>>12:(e[t++]=240|(1835008&i)>>>18,e[t++]=128|(258048&i)>>>12),e[t++]=128|(4032&i)>>>6),e[t++]=128|(63&i)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),toHexString(this._h0)+toHexString(this._h1)+toHexString(this._h2)+toHexString(this._h3)+toHexString(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,fill(this._buff,this._buffLen),this._buffLen>56&&(this._step(),fill(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e,t,i;let n=StringSHA1._bigBlock32,o=this._buffDV;for(let e=0;e<64;e+=4)n.setUint32(e,o.getUint32(e,!1),!1);for(let e=64;e<320;e+=4)n.setUint32(e,leftRotate(n.getUint32(e-12,!1)^n.getUint32(e-32,!1)^n.getUint32(e-56,!1)^n.getUint32(e-64,!1),1),!1);let r=this._h0,s=this._h1,l=this._h2,d=this._h3,c=this._h4;for(let o=0;o<80;o++)o<20?(e=s&l|~s&d,t=1518500249):o<40?(e=s^l^d,t=1859775393):o<60?(e=s&l|s&d|l&d,t=2400959708):(e=s^l^d,t=3395469782),i=leftRotate(r,5)+e+c+t+n.getUint32(4*o,!1)&4294967295,c=d,d=l,l=leftRotate(s,30),s=r,r=i;this._h0=this._h0+r&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+l&4294967295,this._h3=this._h3+d&4294967295,this._h4=this._h4+c&4294967295}};StringSHA1._bigBlock32=new DataView(new ArrayBuffer(320))},72914:function(e,t,i){"use strict";i.d(t,{CP:function(){return isEmptyMarkdownString},Fr:function(){return isMarkdownString},W5:function(){return MarkdownString},d9:function(){return escapeDoubleQuotes},g_:function(){return markdownStringEqual},oR:function(){return removeMarkdownEscapes},v1:function(){return parseHrefAndDimensions}});var n=i(17861),o=i(42385),r=i(67590),s=i(45837),l=i(31568);let MarkdownString=class MarkdownString{constructor(e="",t=!1){var i,o,r;if(this.value=e,"string"!=typeof this.value)throw(0,n.b1)("value");"boolean"==typeof t?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=null!==(i=t.isTrusted)&&void 0!==i?i:void 0,this.supportThemeIcons=null!==(o=t.supportThemeIcons)&&void 0!==o&&o,this.supportHtml=null!==(r=t.supportHtml)&&void 0!==r&&r)}appendText(e,t=0){return this.value+=escapeMarkdownSyntaxTokens(this.supportThemeIcons?(0,o.Qo)(e):e).replace(/([ \t]+)/g,(e,t)=>"&nbsp;".repeat(t.length)).replace(/\>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${appendEscapedMarkdownCodeBlockFence(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){let i=RegExp((0,s.ec)(t),"g");return e.replace(i,(t,i)=>"\\"!==e.charAt(i-1)?`\\${t}`:t)}};function isEmptyMarkdownString(e){return isMarkdownString(e)?!e.value:!Array.isArray(e)||e.every(isEmptyMarkdownString)}function isMarkdownString(e){return e instanceof MarkdownString||!!e&&"object"==typeof e&&"string"==typeof e.value&&("boolean"==typeof e.isTrusted||"object"==typeof e.isTrusted||void 0===e.isTrusted)&&("boolean"==typeof e.supportThemeIcons||void 0===e.supportThemeIcons)}function markdownStringEqual(e,t){return e===t||!!e&&!!t&&e.value===t.value&&e.isTrusted===t.isTrusted&&e.supportThemeIcons===t.supportThemeIcons&&e.supportHtml===t.supportHtml&&(e.baseUri===t.baseUri||!!e.baseUri&&!!t.baseUri&&(0,r.Xy)(l.o.from(e.baseUri),l.o.from(t.baseUri)))}function escapeMarkdownSyntaxTokens(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function appendEscapedMarkdownCodeBlockFence(e,t){var i,n;let o=null!==(n=null===(i=e.match(/^`+/gm))||void 0===i?void 0:i.reduce((e,t)=>e.length>t.length?e:t).length)&&void 0!==n?n:0,r=o>=3?o+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join("\n")}function escapeDoubleQuotes(e){return e.replace(/"/g,"&quot;")}function removeMarkdownEscapes(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1"):e}function parseHrefAndDimensions(e){let t=[],i=e.split("|").map(e=>e.trim());e=i[0];let n=i[1];if(n){let e=/height=(\d+)/.exec(n),i=/width=(\d+)/.exec(n),o=e?e[1]:"",r=i?i[1]:"",s=isFinite(parseInt(r)),l=isFinite(parseInt(o));s&&t.push(`width="${r}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}},42385:function(e,t,i){"use strict";i.d(t,{Gt:function(){return matchesFuzzyIconAware},Ho:function(){return parseLabelWithIcons},JL:function(){return getCodiconAriaLabel},Qo:function(){return escapeIcons},f$:function(){return markdownEscapeEscapedIcons},x$:function(){return stripIcons}});var n=i(61171),o=i(45837),r=i(98847);let s=RegExp(`\\$\\(${r.k.iconNameExpression}(?:${r.k.iconModifierExpression})?\\)`,"g"),l=RegExp(`(\\\\)?${s.source}`,"g");function escapeIcons(e){return e.replace(l,(e,t)=>t?e:`\\${e}`)}let d=RegExp(`\\\\${s.source}`,"g");function markdownEscapeEscapedIcons(e){return e.replace(d,e=>`\\${e}`)}let c=RegExp(`(\\s)?(\\\\)?${s.source}(\\s)?`,"g");function stripIcons(e){return -1===e.indexOf("$(")?e:e.replace(c,(e,t,i,n)=>i?e:t||n||"")}function getCodiconAriaLabel(e){return e?e.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}let u=RegExp(`\\$\\(${r.k.iconNameCharacter}+\\)`,"g");function parseLabelWithIcons(e){u.lastIndex=0;let t="",i=[],n=0;for(;;){let o=u.lastIndex,r=u.exec(e),s=e.substring(o,null==r?void 0:r.index);if(s.length>0){t+=s;for(let e=0;e<s.length;e++)i.push(n)}if(!r)break;n+=r[0].length}return{text:t,iconOffsets:i}}function matchesFuzzyIconAware(e,t,i=!1){let{text:r,iconOffsets:s}=t;if(!s||0===s.length)return(0,n.Oh)(e,r,i);let l=(0,o.j3)(r," "),d=r.length-l.length,c=(0,n.Oh)(e,l,i);if(c)for(let e of c){let t=s[e.start+d]+d;e.start+=t,e.end+=t}return c}},79614:function(e,t,i){"use strict";i.d(t,{R:function(){return IdGenerator},a:function(){return n}});let IdGenerator=class IdGenerator{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}};let n=new IdGenerator("id#")},14296:function(e,t,i){"use strict";i.d(t,{F:function(){return o}});var n=i(57605);let IMEImpl=class IMEImpl{constructor(){this._onDidChange=new n.Q5,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}};let o=new IMEImpl},50885:function(e,t,i){"use strict";var n;i.d(t,{$:function(){return n}}),function(e){function is(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=is;let t=Object.freeze([]);function empty(){return t}function*single(e){yield e}function wrap(e){return is(e)?e:single(e)}function from(e){return e||t}function*reverse(e){for(let t=e.length-1;t>=0;t--)yield e[t]}function isEmpty(e){return!e||!0===e[Symbol.iterator]().next().done}function first(e){return e[Symbol.iterator]().next().value}function some(e,t){for(let i of e)if(t(i))return!0;return!1}function find(e,t){for(let i of e)if(t(i))return i}function*filter(e,t){for(let i of e)t(i)&&(yield i)}function*map(e,t){let i=0;for(let n of e)yield t(n,i++)}function*concat(...e){for(let t of e)yield*t}function reduce(e,t,i){let n=i;for(let i of e)n=t(n,i);return n}function*slice(e,t,i=e.length){for(t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]}function consume(t,i=Number.POSITIVE_INFINITY){let n=[];if(0===i)return[n,t];let o=t[Symbol.iterator]();for(let t=0;t<i;t++){let t=o.next();if(t.done)return[n,e.empty()];n.push(t.value)}return[n,{[Symbol.iterator]:()=>o}]}async function asyncToArray(e){let t=[];for await(let i of e)t.push(i);return Promise.resolve(t)}e.empty=empty,e.single=single,e.wrap=wrap,e.from=from,e.reverse=reverse,e.isEmpty=isEmpty,e.first=first,e.some=some,e.find=find,e.filter=filter,e.map=map,e.concat=concat,e.reduce=reduce,e.slice=slice,e.consume=consume,e.asyncToArray=asyncToArray}(n||(n={}))},27082:function(e,t,i){"use strict";var n;i.d(t,{H_:function(){return l},Vd:function(){return m},gx:function(){return KeyChord},kL:function(){return n}});let KeyCodeStrMap=class KeyCodeStrMap{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}};let o=new KeyCodeStrMap,r=new KeyCodeStrMap,s=new KeyCodeStrMap,l=Array(230),d={},c=[],u=Object.create(null),g=Object.create(null),m=[],f=[];for(let e=0;e<=193;e++)m[e]=-1;for(let e=0;e<=132;e++)f[e]=-1;function KeyChord(e,t){return(e|(65535&t)<<16>>>0)>>>0}!function(){let e=[],t=[];for(let i of[[1,0,"None",0,"unknown",0,"VK_UNKNOWN","",""],[1,1,"Hyper",0,"",0,"","",""],[1,2,"Super",0,"",0,"","",""],[1,3,"Fn",0,"",0,"","",""],[1,4,"FnLock",0,"",0,"","",""],[1,5,"Suspend",0,"",0,"","",""],[1,6,"Resume",0,"",0,"","",""],[1,7,"Turbo",0,"",0,"","",""],[1,8,"Sleep",0,"",0,"VK_SLEEP","",""],[1,9,"WakeUp",0,"",0,"","",""],[0,10,"KeyA",31,"A",65,"VK_A","",""],[0,11,"KeyB",32,"B",66,"VK_B","",""],[0,12,"KeyC",33,"C",67,"VK_C","",""],[0,13,"KeyD",34,"D",68,"VK_D","",""],[0,14,"KeyE",35,"E",69,"VK_E","",""],[0,15,"KeyF",36,"F",70,"VK_F","",""],[0,16,"KeyG",37,"G",71,"VK_G","",""],[0,17,"KeyH",38,"H",72,"VK_H","",""],[0,18,"KeyI",39,"I",73,"VK_I","",""],[0,19,"KeyJ",40,"J",74,"VK_J","",""],[0,20,"KeyK",41,"K",75,"VK_K","",""],[0,21,"KeyL",42,"L",76,"VK_L","",""],[0,22,"KeyM",43,"M",77,"VK_M","",""],[0,23,"KeyN",44,"N",78,"VK_N","",""],[0,24,"KeyO",45,"O",79,"VK_O","",""],[0,25,"KeyP",46,"P",80,"VK_P","",""],[0,26,"KeyQ",47,"Q",81,"VK_Q","",""],[0,27,"KeyR",48,"R",82,"VK_R","",""],[0,28,"KeyS",49,"S",83,"VK_S","",""],[0,29,"KeyT",50,"T",84,"VK_T","",""],[0,30,"KeyU",51,"U",85,"VK_U","",""],[0,31,"KeyV",52,"V",86,"VK_V","",""],[0,32,"KeyW",53,"W",87,"VK_W","",""],[0,33,"KeyX",54,"X",88,"VK_X","",""],[0,34,"KeyY",55,"Y",89,"VK_Y","",""],[0,35,"KeyZ",56,"Z",90,"VK_Z","",""],[0,36,"Digit1",22,"1",49,"VK_1","",""],[0,37,"Digit2",23,"2",50,"VK_2","",""],[0,38,"Digit3",24,"3",51,"VK_3","",""],[0,39,"Digit4",25,"4",52,"VK_4","",""],[0,40,"Digit5",26,"5",53,"VK_5","",""],[0,41,"Digit6",27,"6",54,"VK_6","",""],[0,42,"Digit7",28,"7",55,"VK_7","",""],[0,43,"Digit8",29,"8",56,"VK_8","",""],[0,44,"Digit9",30,"9",57,"VK_9","",""],[0,45,"Digit0",21,"0",48,"VK_0","",""],[1,46,"Enter",3,"Enter",13,"VK_RETURN","",""],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE","",""],[1,48,"Backspace",1,"Backspace",8,"VK_BACK","",""],[1,49,"Tab",2,"Tab",9,"VK_TAB","",""],[1,50,"Space",10,"Space",32,"VK_SPACE","",""],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,"",0,"","",""],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL","",""],[1,64,"F1",59,"F1",112,"VK_F1","",""],[1,65,"F2",60,"F2",113,"VK_F2","",""],[1,66,"F3",61,"F3",114,"VK_F3","",""],[1,67,"F4",62,"F4",115,"VK_F4","",""],[1,68,"F5",63,"F5",116,"VK_F5","",""],[1,69,"F6",64,"F6",117,"VK_F6","",""],[1,70,"F7",65,"F7",118,"VK_F7","",""],[1,71,"F8",66,"F8",119,"VK_F8","",""],[1,72,"F9",67,"F9",120,"VK_F9","",""],[1,73,"F10",68,"F10",121,"VK_F10","",""],[1,74,"F11",69,"F11",122,"VK_F11","",""],[1,75,"F12",70,"F12",123,"VK_F12","",""],[1,76,"PrintScreen",0,"",0,"","",""],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL","",""],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE","",""],[1,79,"Insert",19,"Insert",45,"VK_INSERT","",""],[1,80,"Home",14,"Home",36,"VK_HOME","",""],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR","",""],[1,82,"Delete",20,"Delete",46,"VK_DELETE","",""],[1,83,"End",13,"End",35,"VK_END","",""],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT","",""],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",""],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",""],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",""],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",""],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK","",""],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE","",""],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY","",""],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT","",""],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD","",""],[1,94,"NumpadEnter",3,"",0,"","",""],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1","",""],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2","",""],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3","",""],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4","",""],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5","",""],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6","",""],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7","",""],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8","",""],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9","",""],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0","",""],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL","",""],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102","",""],[1,107,"ContextMenu",58,"ContextMenu",93,"","",""],[1,108,"Power",0,"",0,"","",""],[1,109,"NumpadEqual",0,"",0,"","",""],[1,110,"F13",71,"F13",124,"VK_F13","",""],[1,111,"F14",72,"F14",125,"VK_F14","",""],[1,112,"F15",73,"F15",126,"VK_F15","",""],[1,113,"F16",74,"F16",127,"VK_F16","",""],[1,114,"F17",75,"F17",128,"VK_F17","",""],[1,115,"F18",76,"F18",129,"VK_F18","",""],[1,116,"F19",77,"F19",130,"VK_F19","",""],[1,117,"F20",78,"F20",131,"VK_F20","",""],[1,118,"F21",79,"F21",132,"VK_F21","",""],[1,119,"F22",80,"F22",133,"VK_F22","",""],[1,120,"F23",81,"F23",134,"VK_F23","",""],[1,121,"F24",82,"F24",135,"VK_F24","",""],[1,122,"Open",0,"",0,"","",""],[1,123,"Help",0,"",0,"","",""],[1,124,"Select",0,"",0,"","",""],[1,125,"Again",0,"",0,"","",""],[1,126,"Undo",0,"",0,"","",""],[1,127,"Cut",0,"",0,"","",""],[1,128,"Copy",0,"",0,"","",""],[1,129,"Paste",0,"",0,"","",""],[1,130,"Find",0,"",0,"","",""],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE","",""],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP","",""],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN","",""],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR","",""],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1","",""],[1,136,"KanaMode",0,"",0,"","",""],[0,137,"IntlYen",0,"",0,"","",""],[1,138,"Convert",0,"",0,"","",""],[1,139,"NonConvert",0,"",0,"","",""],[1,140,"Lang1",0,"",0,"","",""],[1,141,"Lang2",0,"",0,"","",""],[1,142,"Lang3",0,"",0,"","",""],[1,143,"Lang4",0,"",0,"","",""],[1,144,"Lang5",0,"",0,"","",""],[1,145,"Abort",0,"",0,"","",""],[1,146,"Props",0,"",0,"","",""],[1,147,"NumpadParenLeft",0,"",0,"","",""],[1,148,"NumpadParenRight",0,"",0,"","",""],[1,149,"NumpadBackspace",0,"",0,"","",""],[1,150,"NumpadMemoryStore",0,"",0,"","",""],[1,151,"NumpadMemoryRecall",0,"",0,"","",""],[1,152,"NumpadMemoryClear",0,"",0,"","",""],[1,153,"NumpadMemoryAdd",0,"",0,"","",""],[1,154,"NumpadMemorySubtract",0,"",0,"","",""],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR","",""],[1,156,"NumpadClearEntry",0,"",0,"","",""],[1,0,"",5,"Ctrl",17,"VK_CONTROL","",""],[1,0,"",4,"Shift",16,"VK_SHIFT","",""],[1,0,"",6,"Alt",18,"VK_MENU","",""],[1,0,"",57,"Meta",91,"VK_COMMAND","",""],[1,157,"ControlLeft",5,"",0,"VK_LCONTROL","",""],[1,158,"ShiftLeft",4,"",0,"VK_LSHIFT","",""],[1,159,"AltLeft",6,"",0,"VK_LMENU","",""],[1,160,"MetaLeft",57,"",0,"VK_LWIN","",""],[1,161,"ControlRight",5,"",0,"VK_RCONTROL","",""],[1,162,"ShiftRight",4,"",0,"VK_RSHIFT","",""],[1,163,"AltRight",6,"",0,"VK_RMENU","",""],[1,164,"MetaRight",57,"",0,"VK_RWIN","",""],[1,165,"BrightnessUp",0,"",0,"","",""],[1,166,"BrightnessDown",0,"",0,"","",""],[1,167,"MediaPlay",0,"",0,"","",""],[1,168,"MediaRecord",0,"",0,"","",""],[1,169,"MediaFastForward",0,"",0,"","",""],[1,170,"MediaRewind",0,"",0,"","",""],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK","",""],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK","",""],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP","",""],[1,174,"Eject",0,"",0,"","",""],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE","",""],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT","",""],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL","",""],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2","",""],[1,179,"LaunchApp1",0,"",0,"VK_MEDIA_LAUNCH_APP1","",""],[1,180,"SelectTask",0,"",0,"","",""],[1,181,"LaunchScreenSaver",0,"",0,"","",""],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH","",""],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME","",""],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK","",""],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD","",""],[1,186,"BrowserStop",0,"",0,"VK_BROWSER_STOP","",""],[1,187,"BrowserRefresh",0,"",0,"VK_BROWSER_REFRESH","",""],[1,188,"BrowserFavorites",0,"",0,"VK_BROWSER_FAVORITES","",""],[1,189,"ZoomToggle",0,"",0,"","",""],[1,190,"MailReply",0,"",0,"","",""],[1,191,"MailForward",0,"",0,"","",""],[1,192,"MailSend",0,"",0,"","",""],[1,0,"",114,"KeyInComposition",229,"","",""],[1,0,"",116,"ABNT_C2",194,"VK_ABNT_C2","",""],[1,0,"",96,"OEM_8",223,"VK_OEM_8","",""],[1,0,"",0,"",0,"VK_KANA","",""],[1,0,"",0,"",0,"VK_HANGUL","",""],[1,0,"",0,"",0,"VK_JUNJA","",""],[1,0,"",0,"",0,"VK_FINAL","",""],[1,0,"",0,"",0,"VK_HANJA","",""],[1,0,"",0,"",0,"VK_KANJI","",""],[1,0,"",0,"",0,"VK_CONVERT","",""],[1,0,"",0,"",0,"VK_NONCONVERT","",""],[1,0,"",0,"",0,"VK_ACCEPT","",""],[1,0,"",0,"",0,"VK_MODECHANGE","",""],[1,0,"",0,"",0,"VK_SELECT","",""],[1,0,"",0,"",0,"VK_PRINT","",""],[1,0,"",0,"",0,"VK_EXECUTE","",""],[1,0,"",0,"",0,"VK_SNAPSHOT","",""],[1,0,"",0,"",0,"VK_HELP","",""],[1,0,"",0,"",0,"VK_APPS","",""],[1,0,"",0,"",0,"VK_PROCESSKEY","",""],[1,0,"",0,"",0,"VK_PACKET","",""],[1,0,"",0,"",0,"VK_DBE_SBCSCHAR","",""],[1,0,"",0,"",0,"VK_DBE_DBCSCHAR","",""],[1,0,"",0,"",0,"VK_ATTN","",""],[1,0,"",0,"",0,"VK_CRSEL","",""],[1,0,"",0,"",0,"VK_EXSEL","",""],[1,0,"",0,"",0,"VK_EREOF","",""],[1,0,"",0,"",0,"VK_PLAY","",""],[1,0,"",0,"",0,"VK_ZOOM","",""],[1,0,"",0,"",0,"VK_NONAME","",""],[1,0,"",0,"",0,"VK_PA1","",""],[1,0,"",0,"",0,"VK_OEM_CLEAR","",""]]){let[n,_,v,C,b,S,y,w,L]=i;if(!t[_]&&(t[_]=!0,c[_]=v,u[v]=_,g[v.toLowerCase()]=_,n&&(m[_]=C,0!==C&&3!==C&&5!==C&&4!==C&&6!==C&&57!==C&&(f[C]=_))),!e[C]){if(e[C]=!0,!b)throw Error(`String representation missing for key code ${C} around scan code ${v}`);o.define(C,b),r.define(C,w||b),s.define(C,L||w||b)}S&&(l[S]=C),y&&(d[y]=C)}f[3]=46}(),function(e){function toString(e){return o.keyCodeToStr(e)}function fromString(e){return o.strToKeyCode(e)}function toUserSettingsUS(e){return r.keyCodeToStr(e)}function toUserSettingsGeneral(e){return s.keyCodeToStr(e)}function fromUserSettings(e){return r.strToKeyCode(e)||s.strToKeyCode(e)}function toElectronAccelerator(e){if(e>=98&&e<=113)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return o.keyCodeToStr(e)}e.toString=toString,e.fromString=fromString,e.toUserSettingsUS=toUserSettingsUS,e.toUserSettingsGeneral=toUserSettingsGeneral,e.fromUserSettings=fromUserSettings,e.toElectronAccelerator=toElectronAccelerator}(n||(n={}))},61141:function(e,t,i){"use strict";i.d(t,{X4:function(){return r},jC:function(){return s},r6:function(){return l},xo:function(){return o}});var n=i(46157);let ModifierLabelProvider=class ModifierLabelProvider{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(0===t.length)return null;let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=i(r);if(null===s)return null;n[o]=_simpleAsString(r,s,this.modifierLabels[e])}return n.join(" ")}};let o=new ModifierLabelProvider({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:n.NC({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:n.NC({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:n.NC({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:n.NC({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:n.NC({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:n.NC({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:n.NC({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:n.NC({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),r=new ModifierLabelProvider({ctrlKey:n.NC({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:n.NC({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:n.NC({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:n.NC({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:n.NC({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:n.NC({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:n.NC({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:n.NC({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:n.NC({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:n.NC({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:n.NC({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:n.NC({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),s=new ModifierLabelProvider({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),l=new ModifierLabelProvider({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function _simpleAsString(e,t,i){if(null===t)return"";let n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),""!==t&&n.push(t),n.join(i.separator)}},32155:function(e,t,i){"use strict";i.d(t,{$M:function(){return KeyCodeChord},Z9:function(){return decodeKeybinding},aZ:function(){return ResolvedChord},f1:function(){return ResolvedKeybinding}});var n=i(17861);function decodeKeybinding(e,t){if("number"==typeof e){if(0===e)return null;let i=(65535&e)>>>0,n=(4294901760&e)>>>16;return new Keybinding(0!==n?[createSimpleKeybinding(i,t),createSimpleKeybinding(n,t)]:[createSimpleKeybinding(i,t)])}{let i=[];for(let n=0;n<e.length;n++)i.push(createSimpleKeybinding(e[n],t));return new Keybinding(i)}}function createSimpleKeybinding(e,t){let i=!!(2048&e),n=!!(256&e),o=2===t?n:i,r=2===t?i:n;return new KeyCodeChord(o,!!(1024&e),!!(512&e),r,255&e)}let KeyCodeChord=class KeyCodeChord{constructor(e,t,i,n,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=o}equals(e){return e instanceof KeyCodeChord&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}};let Keybinding=class Keybinding{constructor(e){if(0===e.length)throw(0,n.b1)("chords");this.chords=e}};let ResolvedChord=class ResolvedChord{constructor(e,t,i,n,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=o,this.keyAriaLabel=r}};let ResolvedKeybinding=class ResolvedKeybinding{}},10612:function(e,t,i){"use strict";i.d(t,{o:function(){return Lazy}});let Lazy=class Lazy{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},87932:function(e,t,i){"use strict";i.d(t,{B9:function(){return dispose},F8:function(){return combinedDisposable},JT:function(){return Disposable},Jz:function(){return ImmortalReference},L6:function(){return RefCountedDisposable},Nq:function(){return markAsDisposed},OF:function(){return toDisposable},SL:function(){return DisposableStore},Wf:function(){return isDisposable},XK:function(){return MutableDisposable},b2:function(){return DisposableMap},dk:function(){return markAsSingleton},wi:function(){return trackDisposable}});var n=i(61080),o=i(50885);function trackDisposable(e){return e}function markAsDisposed(e){}function setParentOfDisposable(e,t){}function setParentOfDisposables(e,t){}function markAsSingleton(e){return e}function isDisposable(e){return"function"==typeof e.dispose&&0===e.dispose.length}function dispose(e){if(o.$.is(e)){let t=[];for(let i of e)if(i)try{i.dispose()}catch(e){t.push(e)}if(1===t.length)throw t[0];if(t.length>1)throw AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function combinedDisposable(...e){let t=toDisposable(()=>dispose(e));return setParentOfDisposables(e,t),t}function toDisposable(e){let t=trackDisposable({dispose:(0,n.M)(()=>{markAsDisposed(t),e()})});return t}let DisposableStore=class DisposableStore{constructor(){this._toDispose=new Set,this._isDisposed=!1,trackDisposable(this)}dispose(){this._isDisposed||(markAsDisposed(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{dispose(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw Error("Cannot register a disposable on itself!");return setParentOfDisposable(e,this),this._isDisposed?DisposableStore.DISABLE_DISPOSED_WARNING||console.warn(Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),setParentOfDisposable(e,null))}};DisposableStore.DISABLE_DISPOSED_WARNING=!1;let Disposable=class Disposable{constructor(){this._store=new DisposableStore,trackDisposable(this),setParentOfDisposable(this._store,this)}dispose(){markAsDisposed(this),this._store.dispose()}_register(e){if(e===this)throw Error("Cannot register a disposable on itself!");return this._store.add(e)}};Disposable.None=Object.freeze({dispose(){}});let MutableDisposable=class MutableDisposable{constructor(){this._isDisposed=!1,trackDisposable(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),e&&setParentOfDisposable(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,markAsDisposed(this),null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}};let RefCountedDisposable=class RefCountedDisposable{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return 0==--this._counter&&this._disposable.dispose(),this}};let ImmortalReference=class ImmortalReference{constructor(e){this.object=e}dispose(){}};let DisposableMap=class DisposableMap{constructor(){this._store=new Map,this._isDisposed=!1,trackDisposable(this)}dispose(){markAsDisposed(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{dispose(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var n;this._isDisposed&&console.warn(Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||null===(n=this._store.get(e))||void 0===n||n.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;null===(t=this._store.get(e))||void 0===t||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}},68324:function(e,t,i){"use strict";i.d(t,{S:function(){return LinkedList}});let Node=class Node{constructor(e){this.element=e,this.next=Node.Undefined,this.prev=Node.Undefined}};Node.Undefined=new Node(void 0);let LinkedList=class LinkedList{constructor(){this._first=Node.Undefined,this._last=Node.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Node.Undefined}clear(){let e=this._first;for(;e!==Node.Undefined;){let t=e.next;e.prev=Node.Undefined,e.next=Node.Undefined,e=t}this._first=Node.Undefined,this._last=Node.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new Node(e);if(this._first===Node.Undefined)this._first=i,this._last=i;else if(t){let e=this._last;this._last=i,i.prev=e,e.next=i}else{let e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Node.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Node.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Node.Undefined&&e.next!==Node.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Node.Undefined&&e.next===Node.Undefined?(this._first=Node.Undefined,this._last=Node.Undefined):e.next===Node.Undefined?(this._last=this._last.prev,this._last.next=Node.Undefined):e.prev===Node.Undefined&&(this._first=this._first.next,this._first.prev=Node.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Node.Undefined;)yield e.element,e=e.next}}},30619:function(e,t,i){"use strict";var n,o;i.d(t,{Y9:function(){return ResourceMap},YQ:function(){return BidirectionalMap},ri:function(){return SetMap},z6:function(){return LRUCache}});let ResourceMapEntry=class ResourceMapEntry{constructor(e,t){this.uri=e,this.value=t}};function isEntries(e){return Array.isArray(e)}let ResourceMap=class ResourceMap{constructor(e,t){if(this[n]="ResourceMap",e instanceof ResourceMap)this.map=new Map(e.map),this.toKey=null!=t?t:ResourceMap.defaultToKey;else if(isEntries(e))for(let[i,n]of(this.map=new Map,this.toKey=null!=t?t:ResourceMap.defaultToKey,e))this.set(i,n);else this.map=new Map,this.toKey=null!=e?e:ResourceMap.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new ResourceMapEntry(e,t)),this}get(e){var t;return null===(t=this.map.get(this.toKey(e)))||void 0===t?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){for(let[i,n]of(void 0!==t&&(e=e.bind(t)),this.map))e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(n=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}};ResourceMap.defaultToKey=e=>e.toString();let LinkedMap=class LinkedMap{constructor(){this[o]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){let i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,0!==i&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:case 2:default:this.addItemLast(n);break;case 1:this.addItemFirst(n)}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._state,n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw Error("LinkedMap got modified during iteration.");n=n.next}}keys(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw Error("LinkedMap got modified during iteration.");if(!i)return{value:void 0,done:!0};{let e={value:i.key,done:!1};return i=i.next,e}}};return n}values(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw Error("LinkedMap got modified during iteration.");if(!i)return{value:void 0,done:!0};{let e={value:i.value,done:!1};return i=i.next,e}}};return n}entries(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw Error("LinkedMap got modified during iteration.");if(!i)return{value:void 0,done:!0};{let e={value:[i.key,i.value],done:!1};return i=i.next,e}}};return n}[(o=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(this._head)e.next=this._head,this._head.previous=e;else throw Error("Invalid list")}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error("Invalid list")}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,i=e.previous;if(!t||!i)throw Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error("Invalid list");if(1===t||2===t){if(1===t){if(e===this._head)return;let t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;let t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){for(let[t,i]of(this.clear(),e))this.set(t,i)}};let LRUCache=class LRUCache extends LinkedMap{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};let BidirectionalMap=class BidirectionalMap{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(let[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){let t=this._m1.get(e);return void 0!==t&&(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}};let SetMap=class SetMap{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){let i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){let i=this.map.get(e);i&&i.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}}},42443:function(e,t,i){"use strict";i.d(t,{Pz:function(){return stringify},Qc:function(){return parse}});var n=i(73126),o=i(31568);function stringify(e){return JSON.stringify(e,replacer)}function parse(e){return revive(JSON.parse(e))}function replacer(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function revive(e,t=0){if(!e||t>200)return e;if("object"==typeof e){switch(e.$mid){case 1:return o.o.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof n.KN||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=revive(e[i],t+1);else for(let i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=revive(e[i],t+1))}return e}},23171:function(e,t,i){"use strict";i.d(t,{v:function(){return n}});let n=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"})},95998:function(e,t,i){"use strict";i.d(t,{Gi:function(){return g},Gs:function(){return matchesSomeScheme},WX:function(){return u},lg:function(){return o},xn:function(){return matchesScheme}});var n,o,r,s=i(17861),l=i(88059),d=i(45837),c=i(31568);function matchesScheme(e,t){return c.o.isUri(e)?(0,d.qq)(e.scheme,t):(0,d.ok)(e,t+":")}function matchesSomeScheme(e,...t){return t.some(t=>matchesScheme(e,t))}(n=o||(o={})).inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.codeSetting="code-setting",n.codeFeature="code-feature";let RemoteAuthoritiesImpl=class RemoteAuthoritiesImpl{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${o.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(t){return s.dL(t),e}let t=e.authority,i=this._hosts[t];i&&-1!==i.indexOf(":")&&-1===i.indexOf("[")&&(i=`[${i}]`);let n=this._ports[t],r=this._connectionTokens[t],d=`path=${encodeURIComponent(e.path)}`;return"string"==typeof r&&(d+=`&tkn=${encodeURIComponent(r)}`),c.o.from({scheme:l.$L?this._preferredWebSchema:o.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:d})}};let u=new RemoteAuthoritiesImpl;let FileAccessImpl=class FileAccessImpl{uriToBrowserUri(e){return e.scheme===o.vscodeRemote?u.rewrite(e):e.scheme===o.file&&(l.tY||l.qB===`${o.vscodeFileResource}://${FileAccessImpl.FALLBACK_AUTHORITY}`)?e.with({scheme:o.vscodeFileResource,authority:e.authority||FileAccessImpl.FALLBACK_AUTHORITY,query:null,fragment:null}):e}};FileAccessImpl.FALLBACK_AUTHORITY="vscode-app";let g=new FileAccessImpl;!function(e){let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));let i="vscode-coi";function getHeadersFromQuery(e){let n;"string"==typeof e?n=new URL(e).searchParams:e instanceof URL?n=e.searchParams:c.o.isUri(e)&&(n=new URL(e.toString(!0)).searchParams);let o=null==n?void 0:n.get(i);if(o)return t.get(o)}function addSearchParam(e,t,n){if(!globalThis.crossOriginIsolated)return;let o=t&&n?"3":n?"2":"1";e instanceof URLSearchParams?e.set(i,o):e[i]=o}e.getHeadersFromQuery=getHeadersFromQuery,e.addSearchParam=addSearchParam}(r||(r={}))},78007:function(e,t,i){"use strict";function clamp(e,t,i){return Math.min(Math.max(e,t),i)}i.d(t,{N:function(){return SlidingWindowAverage},nM:function(){return MovingAverage},uZ:function(){return clamp}});let MovingAverage=class MovingAverage{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}};let SlidingWindowAverage=class SlidingWindowAverage{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=Array(e),this._values.fill(0,0,e)}update(e){let t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},56660:function(e,t,i){"use strict";i.d(t,{$E:function(){return getAllMethodNames},I8:function(){return deepClone},IU:function(){return createProxyObject},_A:function(){return deepFreeze},fS:function(){return equals},jB:function(){return mixin},rs:function(){return cloneAndChange}});var n=i(16877);function deepClone(e){if(!e||"object"!=typeof e||e instanceof RegExp)return e;let t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([e,i])=>{t[e]=i&&"object"==typeof i?deepClone(i):i}),t}function deepFreeze(e){if(!e||"object"!=typeof e)return e;let t=[e];for(;t.length>0;){let e=t.shift();for(let i in Object.freeze(e),e)if(o.call(e,i)){let o=e[i];"object"!=typeof o||Object.isFrozen(o)||(0,n.fU)(o)||t.push(o)}}return e}let o=Object.prototype.hasOwnProperty;function cloneAndChange(e,t){return _cloneAndChange(e,t,new Set)}function _cloneAndChange(e,t,i){if((0,n.Jp)(e))return e;let r=t(e);if(void 0!==r)return r;if(Array.isArray(e)){let n=[];for(let o of e)n.push(_cloneAndChange(o,t,i));return n}if((0,n.Kn)(e)){if(i.has(e))throw Error("Cannot clone recursive data-structure");i.add(e);let n={};for(let r in e)o.call(e,r)&&(n[r]=_cloneAndChange(e[r],t,i));return i.delete(e),n}return e}function mixin(e,t,i=!0){return(0,n.Kn)(e)?((0,n.Kn)(t)&&Object.keys(t).forEach(o=>{o in e?i&&((0,n.Kn)(e[o])&&(0,n.Kn)(t[o])?mixin(e[o],t[o],i):e[o]=t[o]):e[o]=t[o]}),e):t}function equals(e,t){let i,n;if(e===t)return!0;if(null==e||null==t||typeof e!=typeof t||"object"!=typeof e||Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!equals(e[i],t[i]))return!1}else{let o=[];for(n in e)o.push(n);o.sort();let r=[];for(n in t)r.push(n);if(r.sort(),!equals(o,r))return!1;for(i=0;i<o.length;i++)if(!equals(e[o[i]],t[o[i]]))return!1}return!0}function getAllPropertyNames(e){let t=[];for(;Object.prototype!==e;)t=t.concat(Object.getOwnPropertyNames(e)),e=Object.getPrototypeOf(e);return t}function getAllMethodNames(e){let t=[];for(let i of getAllPropertyNames(e))"function"==typeof e[i]&&t.push(i);return t}function createProxyObject(e,t){let createProxyMethod=e=>function(){let i=Array.prototype.slice.call(arguments,0);return t(e,i)},i={};for(let t of e)i[t]=createProxyMethod(t);return i}},98557:function(e,t,i){"use strict";i.d(t,{EH:function(){return autorun},nJ:function(){return autorunHandleChanges},UV:function(){return autorunOpts},gp:function(){return autorunWithStore},Dz:function(){return c.Dz},nK:function(){return o.nK},aK:function(){return o.aK},bx:function(){return c.bx},bk:function(){return o.bk},Be:function(){return o.Be},DN:function(){return n.DN},rD:function(){return c.rD},GN:function(){return c.GN},aq:function(){return c.aq},uh:function(){return n.uh},jx:function(){return c.DN},c8:function(){return n.c8},PS:function(){return n.PS},F_:function(){return waitForState}});var n=i(1877),o=i(18601),r=i(77853),s=i(87932),l=i(43406),d=i(29726);function autorun(e){return new AutorunObserver(new l.IZ(void 0,void 0,e),e,void 0,void 0)}function autorunOpts(e,t){var i;return new AutorunObserver(new l.IZ(e.owner,e.debugName,null!==(i=e.debugReferenceFn)&&void 0!==i?i:t),t,void 0,void 0)}function autorunHandleChanges(e,t){var i;return new AutorunObserver(new l.IZ(e.owner,e.debugName,null!==(i=e.debugReferenceFn)&&void 0!==i?i:t),t,e.createEmptyChangeSummary,e.handleChange)}function autorunWithStore(e){let t=new s.SL,i=autorunOpts({owner:void 0,debugName:void 0,debugReferenceFn:e},i=>{t.clear(),e(i,t)});return(0,s.OF)(()=>{i.dispose(),t.dispose()})}let AutorunObserver=class AutorunObserver{get debugName(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"(anonymous)"}constructor(e,t,i,n){var o,r;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=n,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=null===(o=this.createChangeSummary)||void 0===o?void 0:o.call(this),null===(r=(0,d.jl)())||void 0===r||r.handleAutorunCreated(this),this._runIfNeeded(),(0,s.wi)(this)}dispose(){for(let e of(this.disposed=!0,this.dependencies))e.removeObserver(this);this.dependencies.clear(),(0,s.Nq)(this)}_runIfNeeded(){var e,t,i;if(3===this.state)return;let n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n,this.state=3;let o=this.disposed;try{if(!o){null===(e=(0,d.jl)())||void 0===e||e.handleAutorunTriggered(this);let i=this.changeSummary;this.changeSummary=null===(t=this.createChangeSummary)||void 0===t?void 0:t.call(this),this._runFn(this,i)}}finally{for(let e of(o||null===(i=(0,d.jl)())||void 0===i||i.handleAutorunFinished(this),this.dependenciesToBeRemoved))e.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){3===this.state&&(this.state=1),this.updateCount++}endUpdate(){if(1===this.updateCount)do{if(1===this.state){for(let e of(this.state=3,this.dependencies))if(e.reportChanges(),2===this.state)break}this._runIfNeeded()}while(3!==this.state);this.updateCount--,(0,r.eZ)(()=>this.updateCount>=0)}handlePossibleChange(e){3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){let i=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary);i&&(this.state=2)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};(autorun||(autorun={})).Observer=AutorunObserver;var c=i(9454);function waitForState(e,t,i){return new Promise((n,o)=>{let r=!0,s=!1,l=e.map(e=>({isFinished:t(e),error:!!i&&i(e),state:e})),d=autorun(e=>{let{isFinished:t,error:i,state:c}=l.read(e);(t||i)&&(r?s=!0:d.dispose(),i?o(!0===i?c:i):n(c))});r=!1,s&&d.dispose()})}},1877:function(e,t,i){"use strict";let n,o,r;i.d(t,{Bl:function(){return globalTransaction},DN:function(){return disposableObservableValue},Hr:function(){return asyncTransaction},Jn:function(){return _setKeepObserved},MK:function(){return _setRecomputeInitiallyAndOnChange},Nc:function(){return ConvenientObservable},PS:function(){return transaction},c8:function(){return subtransaction},hm:function(){return BaseObservable},mT:function(){return _setDerivedOpts},uh:function(){return observableValue}});var s=i(43406),l=i(29726);function _setRecomputeInitiallyAndOnChange(e){n=e}function _setKeepObserved(e){}function _setDerivedOpts(e){o=e}let ConvenientObservable=class ConvenientObservable{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let i=void 0===t?void 0:e,n=void 0===t?e:t;return o({owner:i,debugName:()=>{let e=(0,s.$P)(n);if(void 0!==e)return e;let t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(n.toString());return t?`${this.debugName}.${t[2]}`:i?void 0:`${this.debugName} (mapped)`}},e=>n(this.read(e),e))}recomputeInitiallyAndOnChange(e,t){return e.add(n(this,t)),this}};let BaseObservable=class BaseObservable extends ConvenientObservable{constructor(){super(...arguments),this.observers=new Set}addObserver(e){let t=this.observers.size;this.observers.add(e),0===t&&this.onFirstObserverAdded()}removeObserver(e){let t=this.observers.delete(e);t&&0===this.observers.size&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};function transaction(e,t){let i=new TransactionImpl(e,t);try{e(i)}finally{i.finish()}}function globalTransaction(e){if(r)e(r);else{let t=new TransactionImpl(e,void 0);r=t;try{e(t)}finally{t.finish(),r=void 0}}}async function asyncTransaction(e,t){let i=new TransactionImpl(e,t);try{await e(i)}finally{i.finish()}}function subtransaction(e,t,i){e?t(e):transaction(t,i)}let TransactionImpl=class TransactionImpl{constructor(e,t){var i;this._fn=e,this._getDebugName=t,this.updatingObservers=[],null===(i=(0,l.jl)())||void 0===i||i.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():(0,s.$P)(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;let t=this.updatingObservers;for(let e=0;e<t.length;e++){let{observer:i,observable:n}=t[e];i.endUpdate(n)}this.updatingObservers=null,null===(e=(0,l.jl)())||void 0===e||e.handleEndTransaction()}};function observableValue(e,t){return"string"==typeof e?new ObservableValue(void 0,e,t):new ObservableValue(e,void 0,t)}let ObservableValue=class ObservableValue extends BaseObservable{get debugName(){var e;return null!==(e=new s.IZ(this._owner,this._debugName,void 0).getDebugName(this))&&void 0!==e?e:"ObservableValue"}constructor(e,t,i){super(),this._owner=e,this._debugName=t,this._value=i}get(){return this._value}set(e,t,i){var n;let o;if(this._value!==e){t||(t=o=new TransactionImpl(()=>{},()=>`Setting ${this.debugName}`));try{let o=this._value;for(let r of(this._setValue(e),null===(n=(0,l.jl)())||void 0===n||n.handleObservableChanged(this,{oldValue:o,newValue:e,change:i,didChange:!0,hadValue:!0}),this.observers))t.updateObserver(r,this),r.handleChange(this,i)}finally{o&&o.finish()}}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}};function disposableObservableValue(e,t){return"string"==typeof e?new DisposableObservableValue(void 0,e,t):new DisposableObservableValue(e,void 0,t)}let DisposableObservableValue=class DisposableObservableValue extends ObservableValue{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;null===(e=this._value)||void 0===e||e.dispose()}}},43406:function(e,t,i){"use strict";i.d(t,{$P:function(){return getFunctionName},IZ:function(){return DebugNameData}});let DebugNameData=class DebugNameData{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return getDebugName(e,this)}};let n=new Map,o=new WeakMap;function getDebugName(e,t){var i;let r=o.get(e);if(r)return r;let s=computeDebugName(e,t);if(s){let t=null!==(i=n.get(s))&&void 0!==i?i:0;t++,n.set(s,t);let r=1===t?s:`${s}#${t}`;return o.set(e,r),r}}function computeDebugName(e,t){let i;let n=o.get(e);if(n)return n;let r=t.owner?formatOwner(t.owner)+".":"",s=t.debugNameSource;if(void 0!==s){if("function"!=typeof s)return r+s;if(void 0!==(i=s()))return r+i}let l=t.referenceFn;if(void 0!==l&&void 0!==(i=getFunctionName(l)))return r+i;if(void 0!==t.owner){let i=findKey(t.owner,e);if(void 0!==i)return r+i}}function findKey(e,t){for(let i in e)if(e[i]===t)return i}let r=new Map,s=new WeakMap;function formatOwner(e){var t;let i=s.get(e);if(i)return i;let n=getClassName(e),o=null!==(t=r.get(n))&&void 0!==t?t:0;o++,r.set(n,o);let l=1===o?n:`${n}#${o}`;return s.set(e,l),l}function getClassName(e){let t=e.constructor;return t?t.name:"Object"}function getFunctionName(e){let t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),n=i?i[1]:void 0;return null==n?void 0:n.trim()}},18601:function(e,t,i){"use strict";i.d(t,{Be:function(){return derivedWithStore},aK:function(){return derivedHandleChanges},bk:function(){return derivedOpts},kA:function(){return derivedDisposable},nK:function(){return derived}});var n=i(77853),o=i(87932),r=i(1877),s=i(43406),l=i(29726);let defaultEqualityComparer=(e,t)=>e===t;function derived(e,t){return void 0!==t?new Derived(new s.IZ(e,void 0,t),t,void 0,void 0,void 0,defaultEqualityComparer):new Derived(new s.IZ(void 0,void 0,e),e,void 0,void 0,void 0,defaultEqualityComparer)}function derivedOpts(e,t){var i;return new Derived(new s.IZ(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,null!==(i=e.equalityComparer)&&void 0!==i?i:defaultEqualityComparer)}function derivedHandleChanges(e,t){var i;return new Derived(new s.IZ(e.owner,e.debugName,void 0),t,e.createEmptyChangeSummary,e.handleChange,void 0,null!==(i=e.equalityComparer)&&void 0!==i?i:defaultEqualityComparer)}function derivedWithStore(e,t){let i,n;void 0===t?(i=e,n=void 0):(n=e,i=t);let r=new o.SL;return new Derived(new s.IZ(n,void 0,i),e=>(r.clear(),i(e,r)),void 0,void 0,()=>r.dispose(),defaultEqualityComparer)}function derivedDisposable(e,t){let i,n;void 0===t?(i=e,n=void 0):(n=e,i=t);let r=new o.SL;return new Derived(new s.IZ(n,void 0,i),e=>{r.clear();let t=i(e);return t&&r.add(t),t},void 0,void 0,()=>r.dispose(),defaultEqualityComparer)}(0,r.mT)(derivedOpts);let Derived=class Derived extends r.hm{get debugName(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"(anonymous)"}constructor(e,t,i,n,o,r){var s,d;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=n,this._handleLastObserverRemoved=o,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=null===(s=this.createChangeSummary)||void 0===s?void 0:s.call(this),null===(d=(0,l.jl)())||void 0===d||d.handleDerivedCreated(this)}onLastObserverRemoved(){var e;for(let e of(this.state=0,this.value=void 0,this.dependencies))e.removeObserver(this);this.dependencies.clear(),null===(e=this._handleLastObserverRemoved)||void 0===e||e.call(this)}get(){var e;if(0===this.observers.size){let t=this._computeFn(this,null===(e=this.createChangeSummary)||void 0===e?void 0:e.call(this));return this.onLastObserverRemoved(),t}do{if(1===this.state){for(let e of this.dependencies)if(e.reportChanges(),2===this.state)break}1===this.state&&(this.state=3),this._recomputeIfNeeded()}while(3!==this.state);return this.value}_recomputeIfNeeded(){var e,t;if(3===this.state)return;let i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i;let n=0!==this.state,o=this.value;this.state=3;let r=this.changeSummary;this.changeSummary=null===(e=this.createChangeSummary)||void 0===e?void 0:e.call(this);try{this.value=this._computeFn(this,r)}finally{for(let e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}let s=n&&!this._equalityComparator(o,this.value);if(null===(t=(0,l.jl)())||void 0===t||t.handleDerivedRecomputed(this,{oldValue:o,newValue:this.value,change:void 0,didChange:s,hadValue:n}),s)for(let e of this.observers)e.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;let t=1===this.updateCount;if(3===this.state&&(this.state=1,!t))for(let e of this.observers)e.handlePossibleChange(this);if(t)for(let e of this.observers)e.beginUpdate(this)}endUpdate(e){if(this.updateCount--,0===this.updateCount){let e=[...this.observers];for(let t of e)t.endUpdate(this)}(0,n.eZ)(()=>this.updateCount>=0)}handlePossibleChange(e){if(3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))for(let e of(this.state=1,this.observers))e.handlePossibleChange(this)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){let i=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary),n=3===this.state;if(i&&(1===this.state||n)&&(this.state=2,n))for(let e of this.observers)e.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){let t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){let t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}},29726:function(e,t,i){"use strict";let n;function setLogger(e){n=e}function getLogger(){return n}i.d(t,{EK:function(){return setLogger},Qy:function(){return ConsoleObservableLogger},jl:function(){return getLogger}});let ConsoleObservableLogger=class ConsoleObservableLogger{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}textToConsoleArgs(e){return consoleTextToArgs([normalText(repeat("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[normalText(" "),styled(formatValue(e.oldValue,70),{color:"red",strikeThrough:!0}),normalText(" "),styled(formatValue(e.newValue,60),{color:"green"})]:[normalText(" (unchanged)")]:[normalText(" "),styled(formatValue(e.newValue,60),{color:"green"}),normalText(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([formatKind("observable value changed"),styled(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}formatChanges(e){if(0!==e.size)return styled(" (changed deps: "+[...e].map(e=>e.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(i,n)=>(this.changedObservablesSets.get(e).add(i),t.apply(e,[i,n]))}handleDerivedRecomputed(e,t){let i=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([formatKind("derived recomputed"),styled(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(i),{data:[{fn:e._computeFn}]}])),i.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([formatKind("observable from event triggered"),styled(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(i,n)=>(this.changedObservablesSets.get(e).add(i),t.apply(e,[i,n]))}handleAutorunTriggered(e){let t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([formatKind("autorun"),styled(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();void 0===t&&(t=""),console.log(...this.textToConsoleArgs([formatKind("transaction"),styled(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function consoleTextToArgs(e){let t=[],i=[],n="";function process(e){if("length"in e)for(let t of e)t&&process(t);else"text"in e?(n+=`%c${e.text}`,t.push(e.style),e.data&&i.push(...e.data)):"data"in e&&i.push(...e.data)}process(e);let o=[n,...t];return o.push(...i),o}function normalText(e){return styled(e,{color:"black"})}function formatKind(e){return styled(padStr(`${e}: `,10),{color:"black",bold:!0})}function styled(e,t={color:"black"}){function objToCss(e){return Object.entries(e).reduce((e,[t,i])=>`${e}${t}:${i};`,"")}let i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:objToCss(i)}}function formatValue(e,t){switch(typeof e){case"number":default:return""+e;case"string":if(e.length+2<=t)return`"${e}"`;return`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":if(null===e)return"null";if(Array.isArray(e))return formatArray(e,t);return formatObject(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`}}function formatArray(e,t){let i="[ ",n=!0;for(let o of e){if(n||(i+=", "),i.length-5>t){i+="...";break}n=!1,i+=`${formatValue(o,t-i.length)}`}return i+" ]"}function formatObject(e,t){let i="{ ",n=!0;for(let[o,r]of Object.entries(e)){if(n||(i+=", "),i.length-5>t){i+="...";break}n=!1,i+=`${o}: ${formatValue(r,t-i.length)}`}return i+" }"}function repeat(e,t){let i="";for(let n=1;n<=t;n++)i+=e;return i}function padStr(e,t){for(;e.length<t;)e+=" ";return e}},9454:function(e,t,i){"use strict";i.d(t,{DN:function(){return recomputeInitiallyAndOnChange},Dz:function(){return constObservable},GN:function(){return observableSignal},Zg:function(){return mapObservableArrayCached},aq:function(){return observableSignalFromEvent},bx:function(){return derivedObservableWithCache},rD:function(){return observableFromEvent}});var n=i(87932),o=i(1877),r=i(43406),s=i(18601),l=i(29726);function constObservable(e){return new ConstObservable(e)}let ConstObservable=class ConstObservable extends o.Nc{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}};function observableFromEvent(e,t){return new FromEventObservable(e,t)}let FromEventObservable=class FromEventObservable extends o.hm{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=e=>{var t;let i=this._getValue(e),n=this.value,r=!this.hasValue||n!==i,s=!1;r&&(this.value=i,this.hasValue&&(s=!0,(0,o.c8)(FromEventObservable.globalTransaction,e=>{var t;for(let o of(null===(t=(0,l.jl)())||void 0===t||t.handleFromEventObservableTriggered(this,{oldValue:n,newValue:i,change:void 0,didChange:r,hadValue:this.hasValue}),this.observers))e.updateObserver(o,this),o.handleChange(this,void 0)},()=>{let e=this.getDebugName();return"Event fired"+(e?`: ${e}`:"")})),this.hasValue=!0),s||null===(t=(0,l.jl)())||void 0===t||t.handleFromEventObservableTriggered(this,{oldValue:n,newValue:i,change:void 0,didChange:r,hadValue:this.hasValue})}}getDebugName(){return(0,r.$P)(this._getValue)}get debugName(){let e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};function observableSignalFromEvent(e,t){return new FromEventObservableSignal(e,t)}!function(e){function batchEventsGlobally(e,t){let i=!1;void 0===FromEventObservable.globalTransaction&&(FromEventObservable.globalTransaction=e,i=!0);try{t()}finally{i&&(FromEventObservable.globalTransaction=void 0)}}e.Observer=FromEventObservable,e.batchEventsGlobally=batchEventsGlobally}(observableFromEvent||(observableFromEvent={}));let FromEventObservableSignal=class FromEventObservableSignal extends o.hm{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{(0,o.PS)(e=>{for(let t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}};function observableSignal(e){return"string"==typeof e?new ObservableSignal(e):new ObservableSignal(void 0,e)}let ObservableSignal=class ObservableSignal extends o.hm{get debugName(){var e;return null!==(e=new r.IZ(this._owner,this._debugName,void 0).getDebugName(this))&&void 0!==e?e:"Observable Signal"}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){(0,o.PS)(e=>{this.trigger(e,t)},()=>`Trigger signal ${this.debugName}`);return}for(let i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}};function keepObserved(e){let t=new KeepAliveObserver(!1,void 0);return e.addObserver(t),(0,n.OF)(()=>{e.removeObserver(t)})}function recomputeInitiallyAndOnChange(e,t){let i=new KeepAliveObserver(!0,t);return e.addObserver(i),t?t(e.get()):e.reportChanges(),(0,n.OF)(()=>{e.removeObserver(i)})}(0,o.Jn)(keepObserved),(0,o.MK)(recomputeInitiallyAndOnChange);let KeepAliveObserver=class KeepAliveObserver{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,0===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}};function derivedObservableWithCache(e){let t;let i=(0,s.nK)(i=>t=e(i,t));return i}function mapObservableArrayCached(e,t,i,n){let o=new ArrayMap(i,n),r=(0,s.bk)({debugReferenceFn:i,owner:e,onLastObserverRemoved:()=>{o.dispose(),o=new ArrayMap(i)}},e=>(o.setItems(t.read(e)),o.getItems()));return r}let ArrayMap=class ArrayMap{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let t=[],i=new Set(this._cache.keys());for(let o of e){let e=this._keySelector?this._keySelector(o):o,r=this._cache.get(e);if(r)i.delete(e);else{let t=new n.SL,i=this._map(o,t);r={out:i,store:t},this._cache.set(e,r)}t.push(r.out)}for(let e of i){let t=this._cache.get(e);t.store.dispose(),this._cache.delete(e)}this._items=t}getItems(){return this._items}}},51777:function(e,t,i){"use strict";i.d(t,{DB:function(){return c},DZ:function(){return f},EZ:function(){return m},Fv:function(){return d},Gf:function(){return u},KR:function(){return l},Ku:function(){return r},XX:function(){return g},ir:function(){return _}});var n=i(2696);let ErrorInvalidArgType=class ErrorInvalidArgType extends Error{constructor(e,t,i){let n;"string"==typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";let o=-1!==e.indexOf(".")?"property":"argument",r=`The "${e}" ${o} ${n} of type ${t}`;super(r+=`. Received type ${typeof i}`),this.code="ERR_INVALID_ARG_TYPE"}};function validateObject(e,t){if(null===e||"object"!=typeof e)throw new ErrorInvalidArgType(t,"Object",e)}function validateString(e,t){if("string"!=typeof e)throw new ErrorInvalidArgType(t,"string",e)}let o="win32"===n.Jv;function isPathSeparator(e){return 47===e||92===e}function isPosixPathSeparator(e){return 47===e}function isWindowsDeviceRoot(e){return e>=65&&e<=90||e>=97&&e<=122}function normalizeString(e,t,i,n){let o="",r=0,s=-1,l=0,d=0;for(let c=0;c<=e.length;++c){if(c<e.length)d=e.charCodeAt(c);else if(n(d))break;else d=47;if(n(d)){if(s===c-1||1===l);else if(2===l){if(o.length<2||2!==r||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2)){if(o.length>2){let e=o.lastIndexOf(i);-1===e?(o="",r=0):r=(o=o.slice(0,e)).length-1-o.lastIndexOf(i),s=c,l=0;continue}if(0!==o.length){o="",r=0,s=c,l=0;continue}}t&&(o+=o.length>0?`${i}..`:"..",r=2)}else o.length>0?o+=`${i}${e.slice(s+1,c)}`:o=e.slice(s+1,c),r=c-s-1;s=c,l=0}else 46===d&&-1!==l?++l:l=-1}return o}function _format(e,t){validateObject(t,"pathObject");let i=t.dir||t.root,n=t.base||`${t.name||""}${t.ext||""}`;return i?i===t.root?`${i}${n}`:`${i}${e}${n}`:n}let r={resolve(...e){let t="",i="",o=!1;for(let r=e.length-1;r>=-1;r--){let s;if(r>=0){if(validateString(s=e[r],"path"),0===s.length)continue}else 0===t.length?s=n.Vj():(void 0===(s=n.OB[`=${t}`]||n.Vj())||s.slice(0,2).toLowerCase()!==t.toLowerCase()&&92===s.charCodeAt(2))&&(s=`${t}\\`);let l=s.length,d=0,c="",u=!1,g=s.charCodeAt(0);if(1===l)isPathSeparator(g)&&(d=1,u=!0);else if(isPathSeparator(g)){if(u=!0,isPathSeparator(s.charCodeAt(1))){let e=2,t=2;for(;e<l&&!isPathSeparator(s.charCodeAt(e));)e++;if(e<l&&e!==t){let i=s.slice(t,e);for(t=e;e<l&&isPathSeparator(s.charCodeAt(e));)e++;if(e<l&&e!==t){for(t=e;e<l&&!isPathSeparator(s.charCodeAt(e));)e++;(e===l||e!==t)&&(c=`\\\\${i}\\${s.slice(t,e)}`,d=e)}}}else d=1}else isWindowsDeviceRoot(g)&&58===s.charCodeAt(1)&&(c=s.slice(0,2),d=2,l>2&&isPathSeparator(s.charCodeAt(2))&&(u=!0,d=3));if(c.length>0){if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c}if(o){if(t.length>0)break}else if(i=`${s.slice(d)}\\${i}`,o=u,u&&t.length>0)break}return i=normalizeString(i,!o,"\\",isPathSeparator),o?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){let t;validateString(e,"path");let i=e.length;if(0===i)return".";let n=0,o=!1,r=e.charCodeAt(0);if(1===i)return isPosixPathSeparator(r)?"\\":e;if(isPathSeparator(r)){if(o=!0,isPathSeparator(e.charCodeAt(1))){let o=2,r=2;for(;o<i&&!isPathSeparator(e.charCodeAt(o));)o++;if(o<i&&o!==r){let s=e.slice(r,o);for(r=o;o<i&&isPathSeparator(e.charCodeAt(o));)o++;if(o<i&&o!==r){for(r=o;o<i&&!isPathSeparator(e.charCodeAt(o));)o++;if(o===i)return`\\\\${s}\\${e.slice(r)}\\`;o!==r&&(t=`\\\\${s}\\${e.slice(r,o)}`,n=o)}}}else n=1}else isWindowsDeviceRoot(r)&&58===e.charCodeAt(1)&&(t=e.slice(0,2),n=2,i>2&&isPathSeparator(e.charCodeAt(2))&&(o=!0,n=3));let s=n<i?normalizeString(e.slice(n),!o,"\\",isPathSeparator):"";return(0!==s.length||o||(s="."),s.length>0&&isPathSeparator(e.charCodeAt(i-1))&&(s+="\\"),void 0===t)?o?`\\${s}`:s:o?`${t}\\${s}`:`${t}${s}`},isAbsolute(e){validateString(e,"path");let t=e.length;if(0===t)return!1;let i=e.charCodeAt(0);return isPathSeparator(i)||t>2&&isWindowsDeviceRoot(i)&&58===e.charCodeAt(1)&&isPathSeparator(e.charCodeAt(2))},join(...e){let t,i;if(0===e.length)return".";for(let n=0;n<e.length;++n){let o=e[n];validateString(o,"path"),o.length>0&&(void 0===t?t=i=o:t+=`\\${o}`)}if(void 0===t)return".";let n=!0,o=0;if("string"==typeof i&&isPathSeparator(i.charCodeAt(0))){++o;let e=i.length;e>1&&isPathSeparator(i.charCodeAt(1))&&(++o,e>2&&(isPathSeparator(i.charCodeAt(2))?++o:n=!1))}if(n){for(;o<t.length&&isPathSeparator(t.charCodeAt(o));)o++;o>=2&&(t=`\\${t.slice(o)}`)}return r.normalize(t)},relative(e,t){if(validateString(e,"from"),validateString(t,"to"),e===t)return"";let i=r.resolve(e),n=r.resolve(t);if(i===n||(e=i.toLowerCase(),t=n.toLowerCase(),e===t))return"";let o=0;for(;o<e.length&&92===e.charCodeAt(o);)o++;let s=e.length;for(;s-1>o&&92===e.charCodeAt(s-1);)s--;let l=s-o,d=0;for(;d<t.length&&92===t.charCodeAt(d);)d++;let c=t.length;for(;c-1>d&&92===t.charCodeAt(c-1);)c--;let u=c-d,g=l<u?l:u,m=-1,f=0;for(;f<g;f++){let i=e.charCodeAt(o+f);if(i!==t.charCodeAt(d+f))break;92===i&&(m=f)}if(f!==g){if(-1===m)return n}else{if(u>g){if(92===t.charCodeAt(d+f))return n.slice(d+f+1);if(2===f)return n.slice(d+f)}l>g&&(92===e.charCodeAt(o+f)?m=f:2===f&&(m=3)),-1===m&&(m=0)}let _="";for(f=o+m+1;f<=s;++f)(f===s||92===e.charCodeAt(f))&&(_+=0===_.length?"..":"\\..");return(d+=m,_.length>0)?`${_}${n.slice(d,c)}`:(92===n.charCodeAt(d)&&++d,n.slice(d,c))},toNamespacedPath(e){if("string"!=typeof e||0===e.length)return e;let t=r.resolve(e);if(t.length<=2)return e;if(92===t.charCodeAt(0)){if(92===t.charCodeAt(1)){let e=t.charCodeAt(2);if(63!==e&&46!==e)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(isWindowsDeviceRoot(t.charCodeAt(0))&&58===t.charCodeAt(1)&&92===t.charCodeAt(2))return`\\\\?\\${t}`;return e},dirname(e){validateString(e,"path");let t=e.length;if(0===t)return".";let i=-1,n=0,o=e.charCodeAt(0);if(1===t)return isPathSeparator(o)?e:".";if(isPathSeparator(o)){if(i=n=1,isPathSeparator(e.charCodeAt(1))){let o=2,r=2;for(;o<t&&!isPathSeparator(e.charCodeAt(o));)o++;if(o<t&&o!==r){for(r=o;o<t&&isPathSeparator(e.charCodeAt(o));)o++;if(o<t&&o!==r){for(r=o;o<t&&!isPathSeparator(e.charCodeAt(o));)o++;if(o===t)return e;o!==r&&(i=n=o+1)}}}}else isWindowsDeviceRoot(o)&&58===e.charCodeAt(1)&&(n=i=t>2&&isPathSeparator(e.charCodeAt(2))?3:2);let r=-1,s=!0;for(let i=t-1;i>=n;--i)if(isPathSeparator(e.charCodeAt(i))){if(!s){r=i;break}}else s=!1;if(-1===r){if(-1===i)return".";r=i}return e.slice(0,r)},basename(e,t){let i;void 0!==t&&validateString(t,"ext"),validateString(e,"path");let n=0,o=-1,r=!0;if(e.length>=2&&isWindowsDeviceRoot(e.charCodeAt(0))&&58===e.charCodeAt(1)&&(n=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,l=-1;for(i=e.length-1;i>=n;--i){let d=e.charCodeAt(i);if(isPathSeparator(d)){if(!r){n=i+1;break}}else -1===l&&(r=!1,l=i+1),s>=0&&(d===t.charCodeAt(s)?-1==--s&&(o=i):(s=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(i=e.length-1;i>=n;--i)if(isPathSeparator(e.charCodeAt(i))){if(!r){n=i+1;break}}else -1===o&&(r=!1,o=i+1);return -1===o?"":e.slice(n,o)},extname(e){validateString(e,"path");let t=0,i=-1,n=0,o=-1,r=!0,s=0;e.length>=2&&58===e.charCodeAt(1)&&isWindowsDeviceRoot(e.charCodeAt(0))&&(t=n=2);for(let l=e.length-1;l>=t;--l){let t=e.charCodeAt(l);if(isPathSeparator(t)){if(!r){n=l+1;break}continue}-1===o&&(r=!1,o=l+1),46===t?-1===i?i=l:1!==s&&(s=1):-1!==i&&(s=-1)}return -1===i||-1===o||0===s||1===s&&i===o-1&&i===n+1?"":e.slice(i,o)},format:_format.bind(null,"\\"),parse(e){validateString(e,"path");let t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let i=e.length,n=0,o=e.charCodeAt(0);if(1===i)return isPathSeparator(o)?t.root=t.dir=e:t.base=t.name=e,t;if(isPathSeparator(o)){if(n=1,isPathSeparator(e.charCodeAt(1))){let t=2,o=2;for(;t<i&&!isPathSeparator(e.charCodeAt(t));)t++;if(t<i&&t!==o){for(o=t;t<i&&isPathSeparator(e.charCodeAt(t));)t++;if(t<i&&t!==o){for(o=t;t<i&&!isPathSeparator(e.charCodeAt(t));)t++;t===i?n=t:t!==o&&(n=t+1)}}}}else if(isWindowsDeviceRoot(o)&&58===e.charCodeAt(1)){if(i<=2)return t.root=t.dir=e,t;if(n=2,isPathSeparator(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;n=3}}n>0&&(t.root=e.slice(0,n));let r=-1,s=n,l=-1,d=!0,c=e.length-1,u=0;for(;c>=n;--c){if(isPathSeparator(o=e.charCodeAt(c))){if(!d){s=c+1;break}continue}-1===l&&(d=!1,l=c+1),46===o?-1===r?r=c:1!==u&&(u=1):-1!==r&&(u=-1)}return -1!==l&&(-1===r||0===u||1===u&&r===l-1&&r===s+1?t.base=t.name=e.slice(s,l):(t.name=e.slice(s,r),t.base=e.slice(s,l),t.ext=e.slice(r,l))),s>0&&s!==n?t.dir=e.slice(0,s-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},s=(()=>{if(o){let e=/\\/g;return()=>{let t=n.Vj().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>n.Vj()})(),l={resolve(...e){let t="",i=!1;for(let n=e.length-1;n>=-1&&!i;n--){let o=n>=0?e[n]:s();validateString(o,"path"),0!==o.length&&(t=`${o}/${t}`,i=47===o.charCodeAt(0))}return(t=normalizeString(t,!i,"/",isPosixPathSeparator),i)?`/${t}`:t.length>0?t:"."},normalize(e){if(validateString(e,"path"),0===e.length)return".";let t=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0===(e=normalizeString(e,!t,"/",isPosixPathSeparator)).length?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(validateString(e,"path"),e.length>0&&47===e.charCodeAt(0)),join(...e){let t;if(0===e.length)return".";for(let i=0;i<e.length;++i){let n=e[i];validateString(n,"path"),n.length>0&&(void 0===t?t=n:t+=`/${n}`)}return void 0===t?".":l.normalize(t)},relative(e,t){if(validateString(e,"from"),validateString(t,"to"),e===t||(e=l.resolve(e),t=l.resolve(t),e===t))return"";let i=e.length,n=i-1,o=t.length-1,r=n<o?n:o,s=-1,d=0;for(;d<r;d++){let i=e.charCodeAt(1+d);if(i!==t.charCodeAt(1+d))break;47===i&&(s=d)}if(d===r){if(o>r){if(47===t.charCodeAt(1+d))return t.slice(1+d+1);if(0===d)return t.slice(1+d)}else n>r&&(47===e.charCodeAt(1+d)?s=d:0===d&&(s=0))}let c="";for(d=1+s+1;d<=i;++d)(d===i||47===e.charCodeAt(d))&&(c+=0===c.length?"..":"/..");return`${c}${t.slice(1+s)}`},toNamespacedPath:e=>e,dirname(e){if(validateString(e,"path"),0===e.length)return".";let t=47===e.charCodeAt(0),i=-1,n=!0;for(let t=e.length-1;t>=1;--t)if(47===e.charCodeAt(t)){if(!n){i=t;break}}else n=!1;return -1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){let i;void 0!==t&&validateString(t,"ext"),validateString(e,"path");let n=0,o=-1,r=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,l=-1;for(i=e.length-1;i>=0;--i){let d=e.charCodeAt(i);if(47===d){if(!r){n=i+1;break}}else -1===l&&(r=!1,l=i+1),s>=0&&(d===t.charCodeAt(s)?-1==--s&&(o=i):(s=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!r){n=i+1;break}}else -1===o&&(r=!1,o=i+1);return -1===o?"":e.slice(n,o)},extname(e){validateString(e,"path");let t=-1,i=0,n=-1,o=!0,r=0;for(let s=e.length-1;s>=0;--s){let l=e.charCodeAt(s);if(47===l){if(!o){i=s+1;break}continue}-1===n&&(o=!1,n=s+1),46===l?-1===t?t=s:1!==r&&(r=1):-1!==t&&(r=-1)}return -1===t||-1===n||0===r||1===r&&t===n-1&&t===i+1?"":e.slice(t,n)},format:_format.bind(null,"/"),parse(e){let t;validateString(e,"path");let i={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return i;let n=47===e.charCodeAt(0);n?(i.root="/",t=1):t=0;let o=-1,r=0,s=-1,l=!0,d=e.length-1,c=0;for(;d>=t;--d){let t=e.charCodeAt(d);if(47===t){if(!l){r=d+1;break}continue}-1===s&&(l=!1,s=d+1),46===t?-1===o?o=d:1!==c&&(c=1):-1!==o&&(c=-1)}if(-1!==s){let t=0===r&&n?1:r;-1===o||0===c||1===c&&o===s-1&&o===r+1?i.base=i.name=e.slice(t,s):(i.name=e.slice(t,o),i.base=e.slice(t,s),i.ext=e.slice(o,s))}return r>0?i.dir=e.slice(0,r-1):n&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};l.win32=r.win32=r,l.posix=r.posix=l;let d=o?r.normalize:l.normalize,c=o?r.resolve:l.resolve,u=o?r.relative:l.relative,g=o?r.dirname:l.dirname,m=o?r.basename:l.basename,f=o?r.extname:l.extname,_=o?r.sep:l.sep},88059:function(e,t,i){"use strict";let n,o;i.d(t,{$L:function(){return D},Dt:function(){return z},ED:function(){return y},G6:function(){return V},IJ:function(){return L},OS:function(){return P},dK:function(){return M},dz:function(){return w},fn:function(){return A},gn:function(){return E},i7:function(){return B},qB:function(){return N},r:function(){return isLittleEndian},tY:function(){return k},tq:function(){return I},un:function(){return H},vU:function(){return W}});var r,s=i(46157),l=i(55406);let d=!1,c=!1,u=!1,g=!1,m=!1,f=!1,_=!1,v="en",C=globalThis;void 0!==C.vscode&&void 0!==C.vscode.process?o=C.vscode.process:void 0!==l&&(o=l);let b="string"==typeof(null===(r=null==o?void 0:o.versions)||void 0===r?void 0:r.electron),S=b&&(null==o?void 0:o.type)==="renderer";if("object"==typeof o){d="win32"===o.platform,c="darwin"===o.platform,(u="linux"===o.platform)&&o.env.SNAP&&o.env.SNAP_REVISION,o.env.CI||o.env.BUILD_ARTIFACTSTAGINGDIRECTORY,v="en";let e=o.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e),i=t.availableLanguages["*"];t.locale,t.osLocale,v=i||"en",t._translationsConfigFile}catch(e){}g=!0}else if("object"!=typeof navigator||S)console.error("Unable to resolve platform.");else{d=(n=navigator.userAgent).indexOf("Windows")>=0,c=n.indexOf("Macintosh")>=0,f=(n.indexOf("Macintosh")>=0||n.indexOf("iPad")>=0||n.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,u=n.indexOf("Linux")>=0,_=(null==n?void 0:n.indexOf("Mobi"))>=0,m=!0;let e=s.aj(s.NC({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"));v=e||"en",navigator.language}let y=d,w=c,L=u,k=g,D=m,x=m&&"function"==typeof C.importScripts,N=x?C.origin:void 0,E=f,I=_,T=n,M=v,R="function"==typeof C.postMessage&&!C.importScripts,A=(()=>{if(R){let e=[];C.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.id===t.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return i=>{let n=++t;e.push({id:n,callback:i}),C.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})(),P=c||f?2:d?1:3,O=!0,F=!1;function isLittleEndian(){if(!F){F=!0;let e=new Uint8Array(2);e[0]=1,e[1]=2;let t=new Uint16Array(e.buffer);O=513===t[0]}return O}let B=!!(T&&T.indexOf("Chrome")>=0),W=!!(T&&T.indexOf("Firefox")>=0),V=!!(!B&&T&&T.indexOf("Safari")>=0),H=!!(T&&T.indexOf("Edg/")>=0),z=!!(T&&T.indexOf("Android")>=0)},2696:function(e,t,i){"use strict";let n;i.d(t,{Jv:function(){return c},OB:function(){return d},Vj:function(){return l}});var o=i(88059),r=i(55406);let s=globalThis.vscode;if(void 0!==s&&void 0!==s.process){let e=s.process;n={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else n=void 0!==r?{get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd:()=>r.env.VSCODE_CWD||r.cwd()}:{get platform(){return o.ED?"win32":o.dz?"darwin":"linux"},get arch(){return},get env(){return{}},cwd:()=>"/"};let l=n.cwd,d=n.env,c=n.platform},21301:function(e,t,i){"use strict";var n;i.d(t,{e:function(){return n}}),function(e){function intersect(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};let i=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return n-i<=0?{start:0,end:0}:{start:i,end:n}}function isEmpty(e){return e.end-e.start<=0}function intersects(e,t){return!isEmpty(intersect(e,t))}function relativeComplement(e,t){let i=[],n={start:e.start,end:Math.min(t.start,e.end)},o={start:Math.max(t.end,e.start),end:e.end};return isEmpty(n)||i.push(n),isEmpty(o)||i.push(o),i}e.intersect=intersect,e.isEmpty=isEmpty,e.intersects=intersects,e.relativeComplement=relativeComplement}(n||(n={}))},67590:function(e,t,i){"use strict";i.d(t,{AH:function(){return b},DZ:function(){return _},EZ:function(){return f},Hx:function(){return m},SF:function(){return u},Vb:function(){return n},Vo:function(){return C},XX:function(){return v},Xy:function(){return g},i3:function(){return y},lX:function(){return S},z_:function(){return originalFSPath}});var n,o=i(32019),r=i(95998),s=i(51777),l=i(88059),d=i(45837),c=i(31568);function originalFSPath(e){return(0,c.q)(e,!0)}let ExtUri=class ExtUri{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:(0,d.qu)(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t||!!e&&!!t&&this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===r.lg.file)return o.KM(originalFSPath(e),originalFSPath(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(w(e.authority,t.authority))return o.KM(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return c.o.joinPath(e,...t)}basenameOrAuthority(e){return f(e)||e.authority}basename(e){return s.KR.basename(e.path)}extname(e){return s.KR.extname(e.path)}dirname(e){let t;return 0===e.path.length?e:(e.scheme===r.lg.file?t=c.o.file(s.XX(originalFSPath(e))).path:(t=s.KR.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t}))}normalizePath(e){let t;return e.path.length?(t=e.scheme===r.lg.file?c.o.file(s.Fv(originalFSPath(e))).path:s.KR.normalize(e.path),e.with({path:t})):e}relativePath(e,t){if(e.scheme!==t.scheme||!w(e.authority,t.authority))return;if(e.scheme===r.lg.file){let i=s.Gf(originalFSPath(e),originalFSPath(t));return l.ED?o.ej(i):i}let i=e.path||"/",n=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(let t=Math.min(i.length,n.length);e<t&&(i.charCodeAt(e)===n.charCodeAt(e)||i.charAt(e).toLowerCase()===n.charAt(e).toLowerCase());e++);i=n.substr(0,e)+i.substr(e)}return s.KR.relative(i,n)}resolvePath(e,t){if(e.scheme===r.lg.file){let i=c.o.file(s.DB(originalFSPath(e),t));return e.with({authority:i.authority,path:i.path})}return t=o.fn(t),e.with({path:s.KR.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&(0,d.qq)(e,t)}hasTrailingPathSeparator(e,t=s.ir){if(e.scheme===r.lg.file){let i=originalFSPath(e);return i.length>o.yj(i).length&&i[i.length-1]===t}{let t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=s.ir){return L(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=s.ir){let i=!1;if(e.scheme===r.lg.file){let n=originalFSPath(e);i=void 0!==n&&n.length===o.yj(n).length&&n[n.length-1]===t}else{t="/";let n=e.path;i=1===n.length&&47===n.charCodeAt(n.length-1)}return i||L(e,t)?e:e.with({path:e.path+"/"})}};let u=new ExtUri(()=>!1);new ExtUri(e=>e.scheme!==r.lg.file||!l.IJ),new ExtUri(e=>!0);let g=u.isEqual.bind(u);u.isEqualOrParent.bind(u),u.getComparisonKey.bind(u);let m=u.basenameOrAuthority.bind(u),f=u.basename.bind(u),_=u.extname.bind(u),v=u.dirname.bind(u),C=u.joinPath.bind(u),b=u.normalizePath.bind(u),S=u.relativePath.bind(u),y=u.resolvePath.bind(u);u.isAbsolutePath.bind(u);let w=u.isEqualAuthority.bind(u),L=u.hasTrailingPathSeparator.bind(u);u.removeTrailingPathSeparator.bind(u),u.addTrailingPathSeparator.bind(u),function(e){function parseMetaData(t){let i=new Map,n=t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";"));n.split(";").forEach(e=>{let[t,n]=e.split(":");t&&n&&i.set(t,n)});let o=t.path.substring(0,t.path.indexOf(";"));return o&&i.set(e.META_DATA_MIME,o),i}e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=parseMetaData}(n||(n={}))},31108:function(e,t,i){"use strict";i.d(t,{Rm:function(){return Scrollable}});var n=i(57605),o=i(87932);let ScrollState=class ScrollState{constructor(e,t,i,n,o,r,s){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t|=0,i|=0,n|=0,o|=0,r|=0,s|=0),this.rawScrollLeft=n,this.rawScrollTop=s,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),o<0&&(o=0),s+o>r&&(s=r-o),s<0&&(s=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=o,this.scrollHeight=r,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new ScrollState(this._forceIntegerValues,void 0!==e.width?e.width:this.width,void 0!==e.scrollWidth?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,void 0!==e.height?e.height:this.height,void 0!==e.scrollHeight?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new ScrollState(this._forceIntegerValues,this.width,this.scrollWidth,void 0!==e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,void 0!==e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,s=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:s,scrollTopChanged:l}}};let Scrollable=class Scrollable extends o.JT{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new n.Q5),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new ScrollState(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),null===(i=this._smoothScrolling)||void 0===i||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){let i;e={scrollLeft:void 0===e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:void 0===e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;i=t?new SmoothScrollingOperation(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let t=this._state.withScrollPosition(e);this._smoothScrolling=SmoothScrollingOperation.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}};let SmoothScrollingUpdate=class SmoothScrollingUpdate{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function createEaseOutCubic(e,t){let i=t-e;return function(t){return e+i*easeOutCubic(t)}}function createComposed(e,t,i){return function(n){return n<i?e(n/i):t((n-i)/(1-i))}}let SmoothScrollingOperation=class SmoothScrollingOperation{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){let n=Math.abs(e-t);if(n>2.5*i){let n,o;return e<t?(n=e+.75*i,o=t-.75*i):(n=e-.75*i,o=t+.75*i),createComposed(createEaseOutCubic(e,n),createEaseOutCubic(o,t),.33)}return createEaseOutCubic(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let e=this.scrollLeft(t),i=this.scrollTop(t);return new SmoothScrollingUpdate(e,i,!1)}return new SmoothScrollingUpdate(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return SmoothScrollingOperation.start(e,t,i)}static start(e,t,i){i+=10;let n=Date.now()-10;return new SmoothScrollingOperation(e,t,n,i)}};function easeInCubic(e){return Math.pow(e,3)}function easeOutCubic(e){return 1-easeInCubic(1-e)}},37466:function(e,t,i){"use strict";var n,o,r=i(45837);(n=o||(o={}))[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",function(e){let t="error",i="warning",n="info";function fromValue(o){return o?r.qq(t,o)?e.Error:r.qq(i,o)||r.qq("warn",o)?e.Warning:r.qq(n,o)?e.Info:e.Ignore:e.Ignore}function toString(o){switch(o){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return"ignore"}}e.fromValue=fromValue,e.toString=toString}(o||(o={})),t.Z=o},38345:function(e,t,i){"use strict";i.d(t,{G:function(){return StopWatch}});let n=globalThis.performance&&"function"==typeof globalThis.performance.now;let StopWatch=class StopWatch{static create(e){return new StopWatch(e)}constructor(e){this._now=n&&!1===e?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return -1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}},45837:function(e,t,i){"use strict";let n;i.d(t,{$i:function(){return isBasicASCII},B4:function(){return g},C8:function(){return isEmojiImprecise},Fw:function(){return splitLinesIncludeSeparators},GF:function(){return createRegExp},HO:function(){return prevCharLength},IO:function(){return regExpLeadsToEndlessLoop},J_:function(){return getCharContainingOffset},K7:function(){return isFullWidthCharacter},Kw:function(){return containsUppercaseCharacter},LC:function(){return firstNonWhitespaceIndex},Mh:function(){return commonPrefixLength},P1:function(){return commonSuffixLength},PJ:function(){return singleLetterHash},Qe:function(){return c},R1:function(){return stripWildcards},T5:function(){return isAsciiDigit},TT:function(){return compareSubstring},Ut:function(){return containsRTL},V8:function(){return getLeadingWhitespace},W1:function(){return GraphemeIterator},WU:function(){return format},YK:function(){return isLowSurrogate},YU:function(){return escape},ZG:function(){return isHighSurrogate},ZH:function(){return getNextCodePoint},ZK:function(){return AmbiguousCharacters},ab:function(){return containsUnusualLineTerminators},c1:function(){return u},df:function(){return isUpperAsciiLetter},ec:function(){return escapeRegExpCharacters},fA:function(){return htmlAttributeEncodeValue},fy:function(){return trim},j3:function(){return ltrim},j_:function(){return compareSubstringIgnoreCase},m5:function(){return isFalsyOrWhitespace},mK:function(){return isLowerAsciiLetter},oH:function(){return getLeftDeleteOffset},oL:function(){return rtrim},ok:function(){return startsWithIgnoreCase},ow:function(){return lastNonWhitespaceIndex},qq:function(){return equalsIgnoreCase},qu:function(){return compare},rL:function(){return computeCodePoint},uS:function(){return startsWithUTF8BOM},un:function(){return convertSimple2RegExpPattern},uq:function(){return splitLines},vH:function(){return nextCharLength},vU:function(){return InvisibleCharacters},zY:function(){return compareIgnoreCase}});var o,r=i(1627),s=i(10612);function isFalsyOrWhitespace(e){return!e||"string"!=typeof e||0===e.trim().length}let l=/{(\d+)}/g;function format(e,...t){return 0===t.length?e:e.replace(l,function(e,i){let n=parseInt(i,10);return isNaN(n)||n<0||n>=t.length?e:t[n]})}function htmlAttributeEncodeValue(e){return e.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function escape(e){return e.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function escapeRegExpCharacters(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function trim(e,t=" "){let i=ltrim(e,t);return rtrim(i,t)}function ltrim(e,t){if(!e||!t)return e;let i=t.length;if(0===i||0===e.length)return e;let n=0;for(;e.indexOf(t,n)===n;)n+=i;return e.substring(n)}function rtrim(e,t){if(!e||!t)return e;let i=t.length,n=e.length;if(0===i||0===n)return e;let o=n,r=-1;for(;-1!==(r=e.lastIndexOf(t,o-1))&&r+i===o;){if(0===r)return"";o=r}return e.substring(0,o)}function convertSimple2RegExpPattern(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function stripWildcards(e){return e.replace(/\*/g,"")}function createRegExp(e,t,i={}){if(!e)throw Error("Cannot create regex from empty string");t||(e=escapeRegExpCharacters(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let n="";return i.global&&(n+="g"),i.matchCase||(n+="i"),i.multiline&&(n+="m"),i.unicode&&(n+="u"),new RegExp(e,n)}function regExpLeadsToEndlessLoop(e){if("^"===e.source||"^$"===e.source||"$"===e.source||"^\\s*$"===e.source)return!1;let t=e.exec("");return!!(t&&0===e.lastIndex)}function splitLines(e){return e.split(/\r\n|\r|\n/)}function splitLinesIncludeSeparators(e){var t;let i=[],n=e.split(/(\r\n|\r|\n)/);for(let e=0;e<Math.ceil(n.length/2);e++)i.push(n[2*e]+(null!==(t=n[2*e+1])&&void 0!==t?t:""));return i}function firstNonWhitespaceIndex(e){for(let t=0,i=e.length;t<i;t++){let i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return -1}function getLeadingWhitespace(e,t=0,i=e.length){for(let n=t;n<i;n++){let i=e.charCodeAt(n);if(32!==i&&9!==i)return e.substring(t,n)}return e.substring(t,i)}function lastNonWhitespaceIndex(e,t=e.length-1){for(let i=t;i>=0;i--){let t=e.charCodeAt(i);if(32!==t&&9!==t)return i}return -1}function compare(e,t){return e<t?-1:e>t?1:0}function compareSubstring(e,t,i=0,n=e.length,o=0,r=t.length){for(;i<n&&o<r;i++,o++){let n=e.charCodeAt(i),r=t.charCodeAt(o);if(n<r)return -1;if(n>r)return 1}let s=n-i,l=r-o;return s<l?-1:s>l?1:0}function compareIgnoreCase(e,t){return compareSubstringIgnoreCase(e,t,0,e.length,0,t.length)}function compareSubstringIgnoreCase(e,t,i=0,n=e.length,o=0,r=t.length){for(;i<n&&o<r;i++,o++){let s=e.charCodeAt(i),l=t.charCodeAt(o);if(s===l)continue;if(s>=128||l>=128)return compareSubstring(e.toLowerCase(),t.toLowerCase(),i,n,o,r);isLowerAsciiLetter(s)&&(s-=32),isLowerAsciiLetter(l)&&(l-=32);let d=s-l;if(0!==d)return d}let s=n-i,l=r-o;return s<l?-1:s>l?1:0}function isAsciiDigit(e){return e>=48&&e<=57}function isLowerAsciiLetter(e){return e>=97&&e<=122}function isUpperAsciiLetter(e){return e>=65&&e<=90}function equalsIgnoreCase(e,t){return e.length===t.length&&0===compareSubstringIgnoreCase(e,t)}function startsWithIgnoreCase(e,t){let i=t.length;return!(t.length>e.length)&&0===compareSubstringIgnoreCase(e,t,0,i)}function commonPrefixLength(e,t){let i;let n=Math.min(e.length,t.length);for(i=0;i<n;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return n}function commonSuffixLength(e,t){let i;let n=Math.min(e.length,t.length),o=e.length-1,r=t.length-1;for(i=0;i<n;i++)if(e.charCodeAt(o-i)!==t.charCodeAt(r-i))return i;return n}function isHighSurrogate(e){return 55296<=e&&e<=56319}function isLowSurrogate(e){return 56320<=e&&e<=57343}function computeCodePoint(e,t){return(e-55296<<10)+(t-56320)+65536}function getNextCodePoint(e,t,i){let n=e.charCodeAt(i);if(isHighSurrogate(n)&&i+1<t){let t=e.charCodeAt(i+1);if(isLowSurrogate(t))return computeCodePoint(n,t)}return n}function getPrevCodePoint(e,t){let i=e.charCodeAt(t-1);if(isLowSurrogate(i)&&t>1){let n=e.charCodeAt(t-2);if(isHighSurrogate(n))return computeCodePoint(n,i)}return i}let CodePointIterator=class CodePointIterator{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=getPrevCodePoint(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=getNextCodePoint(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}};let GraphemeIterator=class GraphemeIterator{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new CodePointIterator(e,t)}nextGraphemeLength(){let e=GraphemeBreakTree.getInstance(),t=this._iterator,i=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let i=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(breakBetweenGraphemeBreakType(n,o)){t.setOffset(i);break}n=o}return t.offset-i}prevGraphemeLength(){let e=GraphemeBreakTree.getInstance(),t=this._iterator,i=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let i=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(breakBetweenGraphemeBreakType(o,n)){t.setOffset(i);break}n=o}return i-t.offset}eol(){return this._iterator.eol()}};function nextCharLength(e,t){let i=new GraphemeIterator(e,t);return i.nextGraphemeLength()}function prevCharLength(e,t){let i=new GraphemeIterator(e,t);return i.prevGraphemeLength()}function getCharContainingOffset(e,t){t>0&&isLowSurrogate(e.charCodeAt(t))&&t--;let i=t+nextCharLength(e,t),n=i-prevCharLength(e,i);return[n,i]}function makeContainsRtl(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function containsRTL(e){return n||(n=makeContainsRtl()),n.test(e)}let d=/^[\t\n\r\x20-\x7E]*$/;function isBasicASCII(e){return d.test(e)}let c=/[\u2028\u2029]/;function containsUnusualLineTerminators(e){return c.test(e)}function isFullWidthCharacter(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function isEmojiImprecise(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}let u=String.fromCharCode(65279);function startsWithUTF8BOM(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function containsUppercaseCharacter(e,t=!1){return!!e&&(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)}function singleLetterHash(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function breakBetweenGraphemeBreakType(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&(11!==e&&9!==e||9!==t&&10!==t)&&(12!==e&&10!==e||10!==t)&&5!==t&&13!==t&&7!==t&&1!==e&&(13!==e||14!==t)&&(6!==e||6!==t))}let GraphemeBreakTree=class GraphemeBreakTree{static getInstance(){return GraphemeBreakTree._INSTANCE||(GraphemeBreakTree._INSTANCE=new GraphemeBreakTree),GraphemeBreakTree._INSTANCE}constructor(){this._data=getGraphemeBreakRawData()}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;let t=this._data,i=t.length/3,n=1;for(;n<=i;)if(e<t[3*n])n*=2;else{if(!(e>t[3*n+1]))return t[3*n+2];n=2*n+1}return 0}};function getGraphemeBreakRawData(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function getLeftDeleteOffset(e,t){if(0===e)return 0;let i=getOffsetBeforeLastEmojiComponent(e,t);if(void 0!==i)return i;let n=new CodePointIterator(t,e);return n.prevCodePoint(),n.offset}function getOffsetBeforeLastEmojiComponent(e,t){let i=new CodePointIterator(t,e),n=i.prevCodePoint();for(;isEmojiModifier(n)||65039===n||8419===n;){if(0===i.offset)return;n=i.prevCodePoint()}if(!isEmojiImprecise(n))return;let o=i.offset;if(o>0){let e=i.prevCodePoint();8205===e&&(o=i.offset)}return o}function isEmojiModifier(e){return 127995<=e&&e<=127999}GraphemeBreakTree._INSTANCE=null;let g="\xa0";let AmbiguousCharacters=class AmbiguousCharacters{static getInstance(e){return o.cache.get(Array.from(e))}static getLocales(){return o._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};o=AmbiguousCharacters,AmbiguousCharacters.ambiguousCharacterData=new s.o(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),AmbiguousCharacters.cache=new r.t(e=>{let t;function arrayToMap(e){let t=new Map;for(let i=0;i<e.length;i+=2)t.set(e[i],e[i+1]);return t}function mergeMaps(e,t){let i=new Map(e);for(let[e,n]of t)i.set(e,n);return i}function intersectMaps(e,t){if(!e)return t;let i=new Map;for(let[n,o]of e)t.has(n)&&i.set(n,o);return i}let i=o.ambiguousCharacterData.value,n=e.filter(e=>!e.startsWith("_")&&e in i);for(let e of(0===n.length&&(n=["_default"]),n)){let n=arrayToMap(i[e]);t=intersectMaps(t,n)}let r=arrayToMap(i._common),s=mergeMaps(r,t);return new o(s)}),AmbiguousCharacters._locales=new s.o(()=>Object.keys(o.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let InvisibleCharacters=class InvisibleCharacters{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(InvisibleCharacters.getRawData())),this._data}static isInvisibleCharacter(e){return InvisibleCharacters.getData().has(e)}static get codePoints(){return InvisibleCharacters.getData()}};InvisibleCharacters._data=void 0},85852:function(e,t,i){"use strict";i.d(t,{n:function(){return n}});let n=Symbol("MicrotaskDelay")},74286:function(e,t,i){"use strict";i.d(t,{Id:function(){return TernarySearchTree}});var n=i(45837);let StringIterator=class StringIterator{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){let t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}};let ConfigKeysIterator=class ConfigKeysIterator{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){let t=this._value.charCodeAt(this._to);if(46===t){if(e)this._from++;else break}else e=!1}return this}cmp(e){return this._caseSensitive?(0,n.TT)(e,this._value,0,e.length,this._from,this._to):(0,n.j_)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};let PathIterator=class PathIterator{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){let e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){let t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(e)this._from++;else break}else e=!1}return this}cmp(e){return this._caseSensitive?(0,n.TT)(e,this._value,0,e.length,this._from,this._to):(0,n.j_)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};let UriIterator=class UriIterator{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new PathIterator(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),!this._ignoreQueryAndFragment(e)&&(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return(0,n.zY)(e,this._value.scheme);if(2===this._states[this._stateIdx])return(0,n.zY)(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return(0,n.qu)(e,this._value.query);if(5===this._states[this._stateIdx])return(0,n.qu)(e,this._value.fragment);throw Error()}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw Error()}};let TernarySearchTreeNode=class TernarySearchTreeNode{constructor(){this.height=1}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return null!==(t=null===(e=this.left)||void 0===e?void 0:e.height)&&void 0!==t?t:0}get heightRight(){var e,t;return null!==(t=null===(e=this.right)||void 0===e?void 0:e.height)&&void 0!==t?t:0}};let TernarySearchTree=class TernarySearchTree{static forUris(e=()=>!1,t=()=>!1){return new TernarySearchTree(new UriIterator(e,t))}static forStrings(){return new TernarySearchTree(new StringIterator)}static forConfigKeys(){return new TernarySearchTree(new ConfigKeysIterator)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){let i;let n=this._iter.reset(e);this._root||(this._root=new TernarySearchTreeNode,this._root.segment=n.value());let o=[];for(i=this._root;;){let e=n.cmp(i.segment);if(e>0)i.left||(i.left=new TernarySearchTreeNode,i.left.segment=n.value()),o.push([-1,i]),i=i.left;else if(e<0)i.right||(i.right=new TernarySearchTreeNode,i.right.segment=n.value()),o.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new TernarySearchTreeNode,i.mid.segment=n.value()),o.push([0,i]),i=i.mid;else break}let r=i.value;i.value=t,i.key=e;for(let e=o.length-1;e>=0;e--){let t=o[e][1];t.updateHeight();let i=t.balanceFactor();if(i<-1||i>1){let i=o[e][0],n=o[e+1][0];if(1===i&&1===n)o[e][1]=t.rotateLeft();else if(-1===i&&-1===n)o[e][1]=t.rotateRight();else if(1===i&&-1===n)t.right=o[e+1][1]=o[e+1][1].rotateRight(),o[e][1]=t.rotateLeft();else if(-1===i&&1===n)t.left=o[e+1][1]=o[e+1][1].rotateLeft(),o[e][1]=t.rotateRight();else throw Error();if(e>0)switch(o[e-1][0]){case -1:o[e-1][1].left=o[e][1];break;case 1:o[e-1][1].right=o[e][1];break;case 0:o[e-1][1].mid=o[e][1]}else this._root=o[0][1]}}return r}get(e){var t;return null===(t=this._getNode(e))||void 0===t?void 0:t.value}_getNode(e){let t=this._iter.reset(e),i=this._root;for(;i;){let e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){let t=this._getNode(e);return!((null==t?void 0:t.value)===void 0&&(null==t?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;let n=this._iter.reset(e),o=[],r=this._root;for(;r;){let e=n.cmp(r.segment);if(e>0)o.push([-1,r]),r=r.left;else if(e<0)o.push([1,r]),r=r.right;else if(n.hasNext())n.next(),o.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value){if(r.left&&r.right){let e=this._min(r.right);if(e.key){let{key:t,value:i,segment:n}=e;this._delete(e.key,!1),r.key=t,r.value=i,r.segment=n}}else{let e=null!==(i=r.left)&&void 0!==i?i:r.right;if(o.length>0){let[t,i]=o[o.length-1];switch(t){case -1:i.left=e;break;case 0:i.mid=e;break;case 1:i.right=e}}else this._root=e}}for(let e=o.length-1;e>=0;e--){let t=o[e][1];t.updateHeight();let i=t.balanceFactor();if(i>1?(t.right.balanceFactor()>=0||(t.right=t.right.rotateRight()),o[e][1]=t.rotateLeft()):i<-1&&(0>=t.left.balanceFactor()||(t.left=t.left.rotateLeft()),o[e][1]=t.rotateRight()),e>0)switch(o[e-1][0]){case -1:o[e-1][1].left=o[e][1];break;case 1:o[e-1][1].right=o[e][1];break;case 0:o[e-1][1].mid=o[e][1]}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){let t;let i=this._iter.reset(e),n=this._root;for(;n;){let e=i.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(i.hasNext())i.next(),t=n.value||t,n=n.mid;else break}return n&&n.value||t}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){let i=this._iter.reset(e),n=this._root;for(;n;){let e=i.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else if(i.hasNext())i.next(),n=n.mid;else{if(n.mid)return this._entries(n.mid);if(t)return n.value;break}}}forEach(e){for(let[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){let t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}},98847:function(e,t,i){"use strict";i.d(t,{k:function(){return o}});var n,o,r=i(84530);!function(e){function isThemeColor(e){return e&&"object"==typeof e&&"string"==typeof e.id}e.isThemeColor=isThemeColor}(n||(n={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";let t=RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function asClassNameArray(e){let i=t.exec(e.id);if(!i)return asClassNameArray(r.l.error);let[,n,o]=i,s=["codicon","codicon-"+n];return o&&s.push("codicon-modifier-"+o.substring(1)),s}function asClassName(e){return asClassNameArray(e).join(" ")}function asCSSSelector(e){return"."+asClassNameArray(e).join(".")}function isThemeIcon(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(void 0===e.color||n.isThemeColor(e.color))}e.asClassNameArray=asClassNameArray,e.asClassName=asClassName,e.asCSSSelector=asCSSSelector,e.isThemeIcon=isThemeIcon;let i=RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function fromString(e){let t=i.exec(e);if(!t)return;let[,n]=t;return{id:n}}function fromId(e){return{id:e}}function modify(e,t){let i=e.id,n=i.lastIndexOf("~");return -1!==n&&(i=i.substring(0,n)),t&&(i=`${i}~${t}`),{id:i}}function getModifier(e){let t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)}function isEqual(e,t){var i,n;return e.id===t.id&&(null===(i=e.color)||void 0===i?void 0:i.id)===(null===(n=t.color)||void 0===n?void 0:n.id)}e.fromString=fromString,e.fromId=fromId,e.modify=modify,e.getModifier=getModifier,e.isEqual=isEqual}(o||(o={}))},16877:function(e,t,i){"use strict";function isString(e){return"string"==typeof e}function isObject(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function isTypedArray(e){let t=Object.getPrototypeOf(Uint8Array);return"object"==typeof e&&e instanceof t}function isNumber(e){return"number"==typeof e&&!isNaN(e)}function isIterable(e){return!!e&&"function"==typeof e[Symbol.iterator]}function isBoolean(e){return!0===e||!1===e}function isUndefined(e){return void 0===e}function isDefined(e){return!isUndefinedOrNull(e)}function isUndefinedOrNull(e){return isUndefined(e)||null===e}function assertType(e,t){if(!e)throw Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function assertIsDefined(e){if(isUndefinedOrNull(e))throw Error("Assertion Failed: argument is undefined or null");return e}function isFunction(e){return"function"==typeof e}function validateConstraints(e,t){let i=Math.min(e.length,t.length);for(let n=0;n<i;n++)validateConstraint(e[n],t[n])}function validateConstraint(e,t){if(isString(t)){if(typeof e!==t)throw Error(`argument does not match constraint: typeof ${t}`)}else if(isFunction(t)){try{if(e instanceof t)return}catch(e){}if(!isUndefinedOrNull(e)&&e.constructor===t||1===t.length&&!0===t.call(void 0,e))return;throw Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}i.d(t,{$K:function(){return isDefined},D8:function(){return validateConstraints},HD:function(){return isString},Jp:function(){return isUndefinedOrNull},Kn:function(){return isObject},TW:function(){return isIterable},cW:function(){return assertIsDefined},fU:function(){return isTypedArray},hj:function(){return isNumber},jn:function(){return isBoolean},mf:function(){return isFunction},o8:function(){return isUndefined},p_:function(){return assertType}})},30800:function(e,t,i){"use strict";function toUint8(e){return e<0?0:e>255?255:0|e}function toUint32(e){return e<0?0:e>4294967295?4294967295:0|e}i.d(t,{A:function(){return toUint32},K:function(){return toUint8}})},31568:function(e,t,i){"use strict";i.d(t,{o:function(){return URI},q:function(){return uriToFsPath}});var n=i(51777),o=i(88059);let r=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function _validateUri(e,t){if(!e.scheme&&t)throw Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!r.test(e.scheme))throw Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!s.test(e.path))throw Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(e.path))throw Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function _schemeFix(e,t){return e||t?e:"file"}function _referenceResolution(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}let d="/",c=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;let URI=class URI{static isUri(e){return e instanceof URI||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}constructor(e,t,i,n,o,r=!1){"object"==typeof e?(this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||""):(this.scheme=_schemeFix(e,r),this.authority=t||"",this.path=_referenceResolution(this.scheme,i||""),this.query=n||"",this.fragment=o||"",_validateUri(this,r))}get fsPath(){return uriToFsPath(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:o,fragment:r}=e;return(void 0===t?t=this.scheme:null===t&&(t=""),void 0===i?i=this.authority:null===i&&(i=""),void 0===n?n=this.path:null===n&&(n=""),void 0===o?o=this.query:null===o&&(o=""),void 0===r?r=this.fragment:null===r&&(r=""),t===this.scheme&&i===this.authority&&n===this.path&&o===this.query&&r===this.fragment)?this:new Uri(t,i,n,o,r)}static parse(e,t=!1){let i=c.exec(e);return i?new Uri(i[2]||"",percentDecode(i[4]||""),percentDecode(i[5]||""),percentDecode(i[7]||""),percentDecode(i[9]||""),t):new Uri("","","","","")}static file(e){let t="";if(o.ED&&(e=e.replace(/\\/g,d)),e[0]===d&&e[1]===d){let i=e.indexOf(d,2);-1===i?(t=e.substring(2),e=d):(t=e.substring(2,i),e=e.substring(i)||d)}return new Uri("file",t,e,"","")}static from(e,t){let i=new Uri(e.scheme,e.authority,e.path,e.query,e.fragment,t);return i}static joinPath(e,...t){let i;if(!e.path)throw Error("[UriError]: cannot call joinPath on URI without path");return i=o.ED&&"file"===e.scheme?URI.file(n.Ku.join(uriToFsPath(e,!0),...t)).path:n.KR.join(e.path,...t),e.with({path:i})}toString(e=!1){return _asFormatted(this,e)}toJSON(){return this}static revive(e){var t,i;if(!e||e instanceof URI)return e;{let n=new Uri(e);return n._formatted=null!==(t=e.external)&&void 0!==t?t:null,n._fsPath=e._sep===u&&null!==(i=e.fsPath)&&void 0!==i?i:null,n}}};let u=o.ED?1:void 0;let Uri=class Uri extends URI{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=uriToFsPath(this,!1)),this._fsPath}toString(e=!1){return e?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=u),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};let g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function encodeURIComponentFast(e,t,i){let n;let o=-1;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||t&&47===s||i&&91===s||i&&93===s||i&&58===s)-1!==o&&(n+=encodeURIComponent(e.substring(o,r)),o=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));let t=g[s];void 0!==t?(-1!==o&&(n+=encodeURIComponent(e.substring(o,r)),o=-1),n+=t):-1===o&&(o=r)}}return -1!==o&&(n+=encodeURIComponent(e.substring(o))),void 0!==n?n:e}function encodeURIComponentMinimal(e){let t;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);35===n||63===n?(void 0===t&&(t=e.substr(0,i)),t+=g[n]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}function uriToFsPath(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&90>=e.path.charCodeAt(1)||e.path.charCodeAt(1)>=97&&122>=e.path.charCodeAt(1))&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,o.ED&&(i=i.replace(/\//g,"\\")),i}function _asFormatted(e,t){let i=t?encodeURIComponentMinimal:encodeURIComponentFast,n="",{scheme:o,authority:r,path:s,query:l,fragment:c}=e;if(o&&(n+=o+":"),(r||"file"===o)&&(n+=d+d),r){let e=r.indexOf("@");if(-1!==e){let t=r.substr(0,e);r=r.substr(e+1),-1===(e=t.lastIndexOf(":"))?n+=i(t,!1,!1):n+=i(t.substr(0,e),!1,!1)+":"+i(t.substr(e+1),!1,!0),n+="@"}-1===(e=(r=r.toLowerCase()).lastIndexOf(":"))?n+=i(r,!1,!0):n+=i(r.substr(0,e),!1,!0)+r.substr(e)}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2)){let e=s.charCodeAt(1);e>=65&&e<=90&&(s=`/${String.fromCharCode(e+32)}:${s.substr(3)}`)}else if(s.length>=2&&58===s.charCodeAt(1)){let e=s.charCodeAt(0);e>=65&&e<=90&&(s=`${String.fromCharCode(e+32)}:${s.substr(2)}`)}n+=i(s,!0,!1)}return l&&(n+="?"+i(l,!1,!1)),c&&(n+="#"+(t?c:encodeURIComponentFast(c,!1,!1))),n}function decodeURIComponentGraceful(e){try{return decodeURIComponent(e)}catch(t){if(e.length>3)return e.substr(0,3)+decodeURIComponentGraceful(e.substr(3));return e}}let m=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function percentDecode(e){return e.match(m)?e.replace(m,e=>decodeURIComponentGraceful(e)):e}},38679:function(e,t,i){"use strict";i.d(t,{N:function(){return applyFontInfo}});var n=i(8063);function applyFontInfo(e,t){e instanceof n.Z?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}},88036:function(e,t,i){"use strict";i.d(t,{I:function(){return ElementSizeObserver}});var n=i(87932),o=i(57605),r=i(70687);let ElementSizeObserver=class ElementSizeObserver extends n.JT{constructor(e,t){super(),this._onDidChange=this._register(new o.Q5),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null,observeNow=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},t=!1,i=!1,update=()=>{if(t&&!i)try{t=!1,i=!0,observeNow()}finally{(0,r.jL)((0,r.Jj)(this._referenceDomElement),()=>{i=!1,update()})}};this._resizeObserver=new ResizeObserver(i=>{e=i&&i[0]&&i[0].contentRect?{width:i[0].contentRect.width,height:i[0].contentRect.height}:null,t=!0,update()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this._width!==i||this._height!==n)&&(this._width=i,this._height=n,e&&this._onDidChange.fire())}}},98855:function(e,t,i){"use strict";i.d(t,{g:function(){return u}});var n=i(70687),o=i(79994),r=i(57605),s=i(87932),l=i(38679);let CharWidthRequest=class CharWidthRequest{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}};let DomCharWidthReader=class DomCharWidthReader{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),e.document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";let t=document.createElement("div");(0,l.N)(t,this._bareFontInfo),e.appendChild(t);let i=document.createElement("div");(0,l.N)(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);let n=document.createElement("div");(0,l.N)(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);let o=[];for(let e of this._requests){let r;0===e.type&&(r=t),2===e.type&&(r=i),1===e.type&&(r=n),r.appendChild(document.createElement("br"));let s=document.createElement("span");DomCharWidthReader._render(s,e),r.appendChild(s),o.push(s)}this._container=e,this._testElements=o}static _render(e,t){if(" "===t.chr){let t="\xa0";for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let i=t.chr;for(let e=0;e<8;e++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let t=this._requests[e],i=this._testElements[e];t.fulfill(i.offsetWidth/256)}}};function readCharWidths(e,t,i){let n=new DomCharWidthReader(t,i);n.read(e)}var d=i(69350),c=i(77408);let FontMeasurementsImpl=class FontMeasurementsImpl extends s.JT{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new r.Q5),this.onDidChange=this._onDidChange.event}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){let t=(0,n.ZY)(e),i=this._cache.get(t);return i||(i=new FontMeasurementsCache,this._cache.set(t,i)),i}_writeToCache(e,t,i){let n=this._ensureCache(e);n.put(t,i),i.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){let t=this._ensureCache(e),i=t.getValues(),n=!1;for(let e of i)e.isTrusted||(n=!0,t.remove(e));n&&this._onDidChange.fire()}readFontInfo(e,t){let i=this._ensureCache(e);if(!i.has(t)){let i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new c.pR({pixelRatio:o.T.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return i.get(t)}_createRequest(e,t,i,n){let o=new CharWidthRequest(e,t);return i.push(o),null==n||n.push(o),o}_actualReadFontInfo(e,t){let i=[],n=[],r=this._createRequest("n",0,i,n),s=this._createRequest("ｍ",0,i,null),l=this._createRequest(" ",0,i,n),u=this._createRequest("0",0,i,n),g=this._createRequest("1",0,i,n),m=this._createRequest("2",0,i,n),f=this._createRequest("3",0,i,n),_=this._createRequest("4",0,i,n),v=this._createRequest("5",0,i,n),C=this._createRequest("6",0,i,n),b=this._createRequest("7",0,i,n),S=this._createRequest("8",0,i,n),y=this._createRequest("9",0,i,n),w=this._createRequest("→",0,i,n),L=this._createRequest("￫",0,i,null),k=this._createRequest("\xb7",0,i,n),D=this._createRequest(String.fromCharCode(11825),0,i,null),x="|/-_ilm%";for(let e=0,t=x.length;e<t;e++)this._createRequest(x.charAt(e),0,i,n),this._createRequest(x.charAt(e),1,i,n),this._createRequest(x.charAt(e),2,i,n);readCharWidths(e,t,i);let N=Math.max(u.width,g.width,m.width,f.width,_.width,v.width,C.width,b.width,S.width,y.width),E=t.fontFeatureSettings===d.n0.OFF,I=n[0].width;for(let e=1,t=n.length;E&&e<t;e++){let t=I-n[e].width;if(t<-.001||t>.001){E=!1;break}}let T=!0;return E&&L.width!==I&&(T=!1),L.width>w.width&&(T=!1),new c.pR({pixelRatio:o.T.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:E,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:T,spaceWidth:l.width,middotWidth:k.width,wsmiddotWidth:D.width,maxDigitWidth:N},!0)}};let FontMeasurementsCache=class FontMeasurementsCache{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}};let u=new FontMeasurementsImpl},32884:function(e,t,i){"use strict";i.d(t,{n:function(){return o}});var n=i(57605);let TabFocusImpl=class TabFocusImpl{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new n.Q5,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}};let o=new TabFocusImpl},60309:function(e,t,i){"use strict";i.d(t,{Fz:function(){return y},Nl:function(){return InMemoryClipboardMetadataManager},RA:function(){return S},Tj:function(){return TextAreaWrapper},b6:function(){return w},pd:function(){return n}});var n,o=i(1215),r=i(70687),s=i(53426),l=i(58731),d=i(35220),c=i(66614),u=i(57605),g=i(87932),m=i(23171),f=i(45837),_=i(30146),v=i(45841),C=i(39938),b=i(96927),__param=function(e,t){return function(i,n){t(i,n,e)}};(n||(n={})).Tap="-monaco-textarea-synthetic-tap";let S={forceCopyWithSyntaxHighlighting:!1};let InMemoryClipboardMetadataManager=class InMemoryClipboardMetadataManager{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};InMemoryClipboardMetadataManager.INSTANCE=new InMemoryClipboardMetadataManager;let CompositionContext=class CompositionContext{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";let t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}};let y=class extends g.JT{get textAreaState(){return this._textAreaState}constructor(e,t,i,n,o,r){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._accessibilityService=o,this._logService=r,this._onFocus=this._register(new u.Q5),this.onFocus=this._onFocus.event,this._onBlur=this._register(new u.Q5),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new u.Q5),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new u.Q5),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new u.Q5),this.onCut=this._onCut.event,this._onPaste=this._register(new u.Q5),this.onPaste=this._onPaste.event,this._onType=this._register(new u.Q5),this.onType=this._onType.event,this._onCompositionStart=this._register(new u.Q5),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new u.Q5),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new u.Q5),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new u.Q5),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new g.XK),this._asyncTriggerCut=this._register(new c.pY(()=>this._onCut.fire(),0)),this._textAreaState=_.un.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(u.ju.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new c.pY(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown(e=>{let t=new l.y(e);(114===t.keyCode||this._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),s=t,this._onKeyDown.fire(t)})),this._register(this._textArea.onKeyUp(e=>{let t=new l.y(e);this._onKeyUp.fire(t)})),this._register(this._textArea.onCompositionStart(e=>{_.al&&console.log("[compositionstart]",e);let t=new CompositionContext;if(this._currentComposition){this._currentComposition=t;return}if(this._currentComposition=t,2===this._OS&&s&&s.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===s.code||"ArrowLeft"===s.code)){_.al&&console.log("[compositionstart] Handling long press case on macOS + arrow key",e),t.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:e.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:e.data});return}this._onCompositionStart.fire({data:e.data})})),this._register(this._textArea.onCompositionUpdate(e=>{_.al&&console.log("[compositionupdate]",e);let t=this._currentComposition;if(!t)return;if(this._browser.isAndroid){let t=_.un.readFromTextArea(this._textArea,this._textAreaState),i=_.un.deduceAndroidCompositionInput(this._textAreaState,t);this._textAreaState=t,this._onType.fire(i),this._onCompositionUpdate.fire(e);return}let i=t.handleCompositionUpdate(e.data);this._textAreaState=_.un.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionUpdate.fire(e)})),this._register(this._textArea.onCompositionEnd(e=>{_.al&&console.log("[compositionend]",e);let t=this._currentComposition;if(!t)return;if(this._currentComposition=null,this._browser.isAndroid){let e=_.un.readFromTextArea(this._textArea,this._textAreaState),t=_.un.deduceAndroidCompositionInput(this._textAreaState,e);this._textAreaState=e,this._onType.fire(t),this._onCompositionEnd.fire();return}let i=t.handleCompositionUpdate(e.data);this._textAreaState=_.un.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(e=>{if(_.al&&console.log("[input]",e),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;let t=_.un.readFromTextArea(this._textArea,this._textAreaState),i=_.un.deduceInput(this._textAreaState,t,2===this._OS);0===i.replacePrevCharCnt&&1===i.text.length&&(f.ZG(i.text.charCodeAt(0))||127===i.text.charCodeAt(0))||(this._textAreaState=t,(""!==i.text||0!==i.replacePrevCharCnt||0!==i.replaceNextCharCnt||0!==i.positionDelta)&&this._onType.fire(i))})),this._register(this._textArea.onCut(e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(e=>{this._ensureClipboardGetsEditorSelection(e)})),this._register(this._textArea.onPaste(e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),!e.clipboardData)return;let[t,i]=w.getTextData(e.clipboardData);t&&(i=i||InMemoryClipboardMetadataManager.INSTANCE.get(t),this._onPaste.fire({text:t,metadata:i}))})),this._register(this._textArea.onFocus(()=>{let e=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!e&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new c.pY(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return r.nm(this._textArea.ownerDocument,"selectionchange",t=>{if(d.B.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;let i=Date.now(),n=i-e;if(e=i,n<5)return;let o=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selection)return;let r=this._textArea.getValue();if(this._textAreaState.value!==r)return;let s=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===s&&this._textAreaState.selectionEnd===l)return;let c=this._textAreaState.deduceEditorPosition(s),u=this._host.deduceModelPosition(c[0],c[1],c[2]),g=this._textAreaState.deduceEditorPosition(l),m=this._host.deduceModelPosition(g[0],g[1],g[2]),f=new v.Y(u.lineNumber,u.column,m.lineNumber,m.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){(this._accessibilityService.isScreenReaderOptimized()||"render"!==e)&&!this._currentComposition&&(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){let t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};InMemoryClipboardMetadataManager.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,i),e.preventDefault(),e.clipboardData&&w.setTextData(e.clipboardData,t.text,t.html,i)}};y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(4,C.F),__param(5,b.VZ)],y);let w={getTextData(e){let t=e.getData(m.v.text),i=null,n=e.getData("vscode-editor-data");if("string"==typeof n)try{i=JSON.parse(n),1!==i.version&&(i=null)}catch(e){}if(0===t.length&&null===i&&e.files.length>0){let t=Array.prototype.slice.call(e.files,0);return[t.map(e=>e.name).join("\n"),null]}return[t,i]},setTextData(e,t,i,n){e.setData(m.v.text,t),"string"==typeof i&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(n))}};let TextAreaWrapper=class TextAreaWrapper extends g.JT{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new s.Y(this._actual,"keydown")).event,this.onKeyUp=this._register(new s.Y(this._actual,"keyup")).event,this.onCompositionStart=this._register(new s.Y(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new s.Y(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new s.Y(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new s.Y(this._actual,"beforeinput")).event,this.onInput=this._register(new s.Y(this._actual,"input")).event,this.onCut=this._register(new s.Y(this._actual,"cut")).event,this.onCopy=this._register(new s.Y(this._actual,"copy")).event,this.onPaste=this._register(new s.Y(this._actual,"paste")).event,this.onFocus=this._register(new s.Y(this._actual,"focus")).event,this.onBlur=this._register(new s.Y(this._actual,"blur")).event,this._onSyntheticTap=this._register(new u.Q5),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>d.B.onKeyDown())),this._register(this.onBeforeInput(()=>d.B.onBeforeInput())),this._register(this.onInput(()=>d.B.onInput())),this._register(this.onKeyUp(()=>d.B.onKeyUp())),this._register(r.nm(this._actual,n.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){let e=r.Ay(this._actual);return e?e.activeElement===this._actual:!!this._actual.isConnected&&r.vY()===this._actual}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){let i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){let n=this._actual,s=null,l=r.Ay(n);s=l?l.activeElement:r.vY();let d=r.Jj(s),c=s===n,u=n.selectionStart,g=n.selectionEnd;if(c&&u===t&&g===i){o.vU&&d.parent!==d&&n.focus();return}if(c){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),o.vU&&d.parent!==d&&n.focus();return}try{let e=r.vL(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),r._0(n,e)}catch(e){}}}},30146:function(e,t,i){"use strict";i.d(t,{al:function(){return r},ee:function(){return PagedScreenReaderStrategy},un:function(){return TextAreaState}});var n=i(45837),o=i(30822);let r=!1;let TextAreaState=class TextAreaState{constructor(e,t,i,n,o){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=n,this.newlineCountBeforeSelection=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){let i;let n=e.getValue(),o=e.getSelectionStart(),r=e.getSelectionEnd();if(t){let e=n.substring(0,o),r=t.value.substring(0,t.selectionStart);e===r&&(i=t.newlineCountBeforeSelection)}return new TextAreaState(n,o,r,null,i)}collapseSelection(){return this.selectionStart===this.value.length?this:new TextAreaState(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){r&&console.log(`writeToTextArea ${e}: ${this.toString()}`),t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,i,n,o,r,s,l,d;if(e<=this.selectionStart){let n=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(null!==(i=null===(t=this.selection)||void 0===t?void 0:t.getStartPosition())&&void 0!==i?i:null,n,-1)}if(e>=this.selectionEnd){let t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(null!==(o=null===(n=this.selection)||void 0===n?void 0:n.getEndPosition())&&void 0!==o?o:null,t,1)}let c=this.value.substring(this.selectionStart,e);if(-1===c.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(null!==(s=null===(r=this.selection)||void 0===r?void 0:r.getStartPosition())&&void 0!==s?s:null,c,1);let u=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(null!==(d=null===(l=this.selection)||void 0===l?void 0:l.getEndPosition())&&void 0!==d?d:null,u,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,o=-1;for(;-1!==(o=t.indexOf("\n",o+1));)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};r&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${t.toString()}`));let o=Math.min(n.Mh(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(n.P1(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),l=e.value.substring(o,e.value.length-s),d=t.value.substring(o,t.value.length-s),c=e.selectionStart-o,u=e.selectionEnd-o,g=t.selectionStart-o,m=t.selectionEnd-o;if(r&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${l}>, selectionStart: ${c}, selectionEnd: ${u}`),console.log(`AFTER DIFFING CURRENT STATE: <${d}>, selectionStart: ${g}, selectionEnd: ${m}`)),g===m){let t=e.selectionStart-o;return r&&console.log(`REMOVE PREVIOUS: ${t} chars`),{text:d,replacePrevCharCnt:t,replaceNextCharCnt:0,positionDelta:0}}return{text:d,replacePrevCharCnt:u-c,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(r&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${t.toString()}`)),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};let i=Math.min(n.Mh(e.value,t.value),e.selectionEnd),o=Math.min(n.P1(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-o),l=t.value.substring(i,t.value.length-o),d=e.selectionStart-i,c=e.selectionEnd-i,u=t.selectionStart-i,g=t.selectionEnd-i;return r&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${s}>, selectionStart: ${d}, selectionEnd: ${c}`),console.log(`AFTER DIFFING CURRENT STATE: <${l}>, selectionStart: ${u}, selectionEnd: ${g}`)),{text:l,replacePrevCharCnt:c,replaceNextCharCnt:s.length-c,positionDelta:g-l.length}}};TextAreaState.EMPTY=new TextAreaState("",0,0,null,void 0);let PagedScreenReaderStrategy=class PagedScreenReaderStrategy{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){let i=e*t;return new o.e(i+1,1,i+t+1,1)}static fromEditorSelection(e,t,i,n){let r;let s=PagedScreenReaderStrategy._getPageOfLine(t.startLineNumber,i),l=PagedScreenReaderStrategy._getRangeForPage(s,i),d=PagedScreenReaderStrategy._getPageOfLine(t.endLineNumber,i),c=PagedScreenReaderStrategy._getRangeForPage(d,i),u=l.intersectRanges(new o.e(1,1,t.startLineNumber,t.startColumn));if(n&&e.getValueLengthInRange(u,1)>500){let t=e.modifyPosition(u.getEndPosition(),-500);u=o.e.fromPositions(t,u.getEndPosition())}let g=e.getValueInRange(u,1),m=e.getLineCount(),f=e.getLineMaxColumn(m),_=c.intersectRanges(new o.e(t.endLineNumber,t.endColumn,m,f));if(n&&e.getValueLengthInRange(_,1)>500){let t=e.modifyPosition(_.getStartPosition(),500);_=o.e.fromPositions(_.getStartPosition(),t)}let v=e.getValueInRange(_,1);if(s===d||s+1===d)r=e.getValueInRange(t,1);else{let i=l.intersectRanges(t),n=c.intersectRanges(t);r=e.getValueInRange(i,1)+String.fromCharCode(8230)+e.getValueInRange(n,1)}return n&&r.length>1e3&&(r=r.substring(0,500)+String.fromCharCode(8230)+r.substring(r.length-500,r.length)),new TextAreaState(g+r+v,g.length,g.length+r.length,t,u.endLineNumber-u.startLineNumber)}}},36986:function(e,t,i){"use strict";i.d(t,{wk:function(){return l},Ox:function(){return s}});var n,o,r,s,l,d=i(46157),c=i(1215),u=i(16877),g=i(93864),m=i(38981),f=i(86992),_=i(67949),v=i(11953),C=i(30822);let ColumnSelection=class ColumnSelection{static columnSelect(e,t,i,n,o,r){let s=Math.abs(o-i)+1,l=i>o,d=n>r,c=n<r,u=[];for(let o=0;o<s;o++){let s=i+(l?-o:o),g=e.columnFromVisibleColumn(t,s,n),m=e.columnFromVisibleColumn(t,s,r),f=e.visibleColumnFromColumn(t,new v.L(s,g)),b=e.visibleColumnFromColumn(t,new v.L(s,m));c&&(f>r||b<n)||d&&(b>n||f<r)||u.push(new _.rS(new C.e(s,g,s,g),0,0,new v.L(s,m),0))}if(0===u.length)for(let e=0;e<s;e++){let n=i+(l?-e:e),o=t.getLineMaxColumn(n);u.push(new _.rS(new C.e(n,o,n,o),0,0,new v.L(n,o),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,ColumnSelection.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0,o=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let i=o;i<=r;i++){let o=t.getLineMaxColumn(i),r=e.visibleColumnFromColumn(t,new v.L(i,o));n=Math.max(n,r)}let s=i.toViewVisualColumn;return s<n&&s++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectUp(e,t,i,n){let o=n?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){let o=n?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}};var b=i(6700),S=i(21384),y=i(75907),w=i(97240),L=i(7193),k=i(37139),D=i(70687);let CoreEditorCommand=class CoreEditorCommand extends m._l{runEditorCommand(e,t,i){let n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}};!function(e){function parse(t){let i,n;switch(t.to){case e.RawDirection.Up:i=1;break;case e.RawDirection.Right:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.Left:i=4;break;default:return null}switch(t.by){case e.RawUnit.Line:n=1;break;case e.RawUnit.WrappedLine:n=2;break;case e.RawUnit.Page:n=3;break;case e.RawUnit.HalfPage:n=4;break;case e.RawUnit.Editor:n=5;break;case e.RawUnit.Column:n=6;break;default:n=2}let o=Math.floor(t.value||1),r=!!t.revealCursor;return{direction:i,unit:n,value:o,revealCursor:r,select:!!t.select}}e.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory direction value.
						\`\`\`
						'up', 'down'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'page', 'halfPage', 'editor'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.
				`,constraint:function(e){return!!u.Kn(e)&&!!(u.HD(e.to)&&(u.o8(e.by)||u.HD(e.by))&&(u.o8(e.value)||u.hj(e.value))&&(u.o8(e.revealCursor)||u.jn(e.revealCursor)))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=parse}(o||(o={})),(n=r||(r={})).metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:`Property-value pairs that can be passed through this argument:
					* 'lineNumber': A mandatory line number value.
					* 'at': Logical position at which line has to be revealed.
						\`\`\`
						'top', 'center', 'bottom'
						\`\`\`
				`,constraint:function(e){return!!u.Kn(e)&&!!((u.hj(e.lineNumber)||u.HD(e.lineNumber))&&(u.o8(e.at)||u.HD(e.at)))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"};let EditorOrNativeTextInputCommand=class EditorOrNativeTextInputCommand{constructor(e){e.addImplementation(1e4,"code-editor",(e,t)=>{let i=e.get(f.$).getFocusedCodeEditor();return!!(i&&i.hasTextFocus())&&this._runEditorCommand(e,i,t)}),e.addImplementation(1e3,"generic-dom-input-textarea",(e,t)=>{let i=(0,D.vY)();return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(i),!0)}),e.addImplementation(0,"generic-dom",(e,t)=>{let i=e.get(f.$).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(e,i,t))})}_runEditorCommand(e,t,i){let n=this.runEditorCommand(e,t,i);return!n||n}};!function(e){let BaseMoveToCommand=class BaseMoveToCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;e.model.pushStackElement();let i=e.setCursorStates(t.source,3,[S.P.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]);i&&2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0)}};e.MoveTo=(0,m.fK)(new BaseMoveToCommand({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=(0,m.fK)(new BaseMoveToCommand({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));let ColumnSelectCommand=class ColumnSelectCommand extends CoreEditorCommand{runCoreEditorCommand(e,t){e.model.pushStackElement();let i=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==i&&(e.setCursorStates(t.source,3,i.viewStates.map(e=>_.Vi.fromViewState(e))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}};e.ColumnSelect=(0,m.fK)(new class extends ColumnSelectCommand{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,i,n){if(void 0===n.position||void 0===n.viewPosition||void 0===n.mouseColumn)return null;let o=e.model.validatePosition(n.position),r=e.coordinatesConverter.validateViewPosition(new v.L(n.viewPosition.lineNumber,n.viewPosition.column),o),s=n.doColumnSelect?i.fromViewLineNumber:r.lineNumber,l=n.doColumnSelect?i.fromViewVisualColumn:n.mouseColumn-1;return ColumnSelection.columnSelect(e.cursorConfig,e,s,l,r.lineNumber,n.mouseColumn-1)}}),e.CursorColumnSelectLeft=(0,m.fK)(new class extends ColumnSelectCommand{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,n){return ColumnSelection.columnSelectLeft(e.cursorConfig,e,i)}}),e.CursorColumnSelectRight=(0,m.fK)(new class extends ColumnSelectCommand{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,n){return ColumnSelection.columnSelectRight(e.cursorConfig,e,i)}});let ColumnSelectUpCommand=class ColumnSelectUpCommand extends ColumnSelectCommand{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,n){return ColumnSelection.columnSelectUp(e.cursorConfig,e,i,this._isPaged)}};e.CursorColumnSelectUp=(0,m.fK)(new ColumnSelectUpCommand({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=(0,m.fK)(new ColumnSelectUpCommand({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3595,linux:{primary:0}}}));let ColumnSelectDownCommand=class ColumnSelectDownCommand extends ColumnSelectCommand{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,n){return ColumnSelection.columnSelectDown(e.cursorConfig,e,i,this._isPaged)}};e.CursorColumnSelectDown=(0,m.fK)(new ColumnSelectDownCommand({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=(0,m.fK)(new ColumnSelectDownCommand({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3596,linux:{primary:0}}}));let CursorMoveImpl=class CursorMoveImpl extends CoreEditorCommand{constructor(){super({id:"cursorMove",precondition:void 0,metadata:S.N.metadata})}runCoreEditorCommand(e,t){let i=S.N.parse(t);i&&this._runCursorMove(e,t.source,i)}_runCursorMove(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,CursorMoveImpl._move(e,e.getCursorStates(),i)),e.revealPrimaryCursor(t,!0)}static _move(e,t,i){let n=i.select,o=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return S.P.simpleMove(e,t,i.direction,n,o,i.unit);case 11:case 13:case 12:case 14:return S.P.viewportMove(e,t,i.direction,n,o);default:return null}}};e.CursorMoveImpl=CursorMoveImpl,e.CursorMove=(0,m.fK)(new CursorMoveImpl);let CursorMoveBasedCommand=class CursorMoveBasedCommand extends CoreEditorCommand{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,S.P.simpleMove(e,e.getCursorStates(),i.direction,i.select,i.value,i.unit)),e.revealPrimaryCursor(t.source,!0)}};e.CursorLeft=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1039}})),e.CursorRight=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1041}})),e.CursorUp=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:11}})),e.CursorPageUpSelect=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1035}})),e.CursorDown=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:12}})),e.CursorPageDownSelect=(0,m.fK)(new CursorMoveBasedCommand({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1036}})),e.CreateCursor=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){let i;if(!t.position)return;i=t.wholeLine?S.P.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):S.P.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);let n=e.getCursorStates();if(n.length>1){let o=i.modelState?i.modelState.position:null,r=i.viewState?i.viewState.position:null;for(let i=0,s=n.length;i<s;i++){let s=n[i];if((!o||s.modelState.selection.containsPosition(o))&&(!r||s.viewState.selection.containsPosition(r))){n.splice(i,1),e.model.pushStackElement(),e.setCursorStates(t.source,3,n);return}}}n.push(i),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}}),e.LastCursorMoveToSelect=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;let i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),o=n.slice(0);o[i]=S.P.moveTo(e,n[i],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}});let HomeCommand=class HomeCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,S.P.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}};e.CursorHome=(0,m.fK)(new HomeCommand({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=(0,m.fK)(new HomeCommand({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));let LineStartCommand=class LineStartCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i],o=n.modelState.position.lineNumber;t[i]=_.Vi.fromModelState(n.modelState.move(this._inSelectionMode,o,1,0))}return t}};e.CursorLineStart=(0,m.fK)(new LineStartCommand({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=(0,m.fK)(new LineStartCommand({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:0,mac:{primary:1311}}}));let EndCommand=class EndCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,S.P.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}};e.CursorEnd=(0,m.fK)(new EndCommand({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:w.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:d.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=(0,m.fK)(new EndCommand({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:w.u.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:d.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));let LineEndCommand=class LineEndCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){let i=[];for(let n=0,o=t.length;n<o;n++){let o=t[n],r=o.modelState.position.lineNumber,s=e.model.getLineMaxColumn(r);i[n]=_.Vi.fromModelState(o.modelState.move(this._inSelectionMode,r,s,0))}return i}};e.CursorLineEnd=(0,m.fK)(new LineEndCommand({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=(0,m.fK)(new LineEndCommand({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:0,mac:{primary:1315}}}));let TopCommand=class TopCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,S.P.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}};e.CursorTop=(0,m.fK)(new TopCommand({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=(0,m.fK)(new TopCommand({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3086,mac:{primary:3088}}}));let BottomCommand=class BottomCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,S.P.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}};e.CursorBottom=(0,m.fK)(new BottomCommand({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=(0,m.fK)(new BottomCommand({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:3085,mac:{primary:3090}}}));let EditorScrollImpl=class EditorScrollImpl extends CoreEditorCommand{constructor(){super({id:"editorScroll",precondition:void 0,metadata:o.metadata})}determineScrollMethod(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(e,t){let i=o.parse(t);if(!i)return;let n=this.determineScrollMethod(i);n&&n(e,t.source,i)}_runVerticalEditorScroll(e,t,i){let n=this._computeDesiredScrollTop(e,i);if(i.revealCursor){let o=e.getCompletelyVisibleViewRangeAtScrollTop(n);e.setCursorStates(t,3,[S.P.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),o,i.select)])}e.viewLayout.setScrollPosition({scrollTop:n},0)}_computeDesiredScrollTop(e,t){let i;if(1===t.unit){let i;let n=e.viewLayout.getFutureViewport(),o=e.getCompletelyVisibleViewRangeAtScrollTop(n.top),r=e.coordinatesConverter.convertViewRangeToModelRange(o);i=1===t.direction?Math.max(1,r.startLineNumber-t.value):Math.min(e.model.getLineCount(),r.startLineNumber+t.value);let s=e.coordinatesConverter.convertModelPositionToViewPosition(new v.L(i,1));return e.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)}if(5===t.unit){let i=0;return 3===t.direction&&(i=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(i)}i=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;let n=(1===t.direction?-1:1)*i;return e.viewLayout.getCurrentScrollTop()+n*e.cursorConfig.lineHeight}_runHorizontalEditorScroll(e,t,i){let n=this._computeDesiredScrollLeft(e,i);e.viewLayout.setScrollPosition({scrollLeft:n},0)}_computeDesiredScrollLeft(e,t){let i=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+i*e.cursorConfig.typicalHalfwidthCharacterWidth}};e.EditorScrollImpl=EditorScrollImpl,e.EditorScroll=(0,m.fK)(new EditorScrollImpl),e.ScrollLineUp=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Up,by:o.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageUp=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Up,by:o.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorTop=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Up,by:o.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLineDown=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Down,by:o.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageDown=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Down,by:o.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorBottom=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Down,by:o.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLeft=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Left,by:o.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollRight=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:o.RawDirection.Right,by:o.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}});let WordCommand=class WordCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[S.P.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0))}};e.WordSelect=(0,m.fK)(new WordCommand({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=(0,m.fK)(new WordCommand({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;let i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),o=n.slice(0),r=n[i];o[i]=S.P.word(e,r,r.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}});let LineCommand=class LineCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[S.P.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!1,!0))}};e.LineSelect=(0,m.fK)(new LineCommand({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=(0,m.fK)(new LineCommand({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));let LastCursorLineCommand=class LastCursorLineCommand extends CoreEditorCommand{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;let i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),o=n.slice(0);o[i]=S.P.line(e,n[i],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}};e.LastCursorLineSelect=(0,m.fK)(new LastCursorLineCommand({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=(0,m.fK)(new LastCursorLineCommand({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"cancelSelection",precondition:w.u.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[S.P.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"removeSecondaryCursors",precondition:w.u.hasMultipleSelections,kbOpts:{weight:1,kbExpr:w.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),(0,g.i7)(d.NC("removedCursor","Removed secondary cursors"))}}),e.RevealLine=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"revealLine",precondition:void 0,metadata:r.metadata})}runCoreEditorCommand(e,t){let i=t.lineNumber||0,n="number"==typeof i?i+1:parseInt(i)+1;n<1&&(n=1);let o=e.model.getLineCount();n>o&&(n=o);let s=new C.e(n,1,n,e.model.getLineMaxColumn(n)),l=0;if(t.at)switch(t.at){case r.RawAtArgument.Top:l=3;break;case r.RawAtArgument.Center:l=1;break;case r.RawAtArgument.Bottom:l=4}let d=e.coordinatesConverter.convertModelRangeToViewRange(s);e.revealRange(t.source,!1,d,l,0)}}),e.SelectAll=new class extends EditorOrNativeTextInputCommand{constructor(){super(m.Sq)}runDOMCommand(e){c.vU&&(e.focus(),e.select()),e.ownerDocument.execCommand("selectAll")}runEditorCommand(e,t,i){let n=t._getViewModel();n&&this.runCoreEditorCommand(n,i)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[S.P.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=(0,m.fK)(new class extends CoreEditorCommand{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[_.Vi.fromModelSelection(t.selection)]))}})}(s||(s={}));let x=L.Ao.and(w.u.textInputFocus,w.u.columnSelection);function registerColumnSelection(e,t){k.W.registerKeybindingRule({id:e,primary:t,when:x,weight:1})}function registerCommand(e){return e.register(),e}registerColumnSelection(s.CursorColumnSelectLeft.id,1039),registerColumnSelection(s.CursorColumnSelectRight.id,1041),registerColumnSelection(s.CursorColumnSelectUp.id,1040),registerColumnSelection(s.CursorColumnSelectPageUp.id,1035),registerColumnSelection(s.CursorColumnSelectDown.id,1042),registerColumnSelection(s.CursorColumnSelectPageDown.id,1036),function(e){let CoreEditingCommand=class CoreEditingCommand extends m._l{runEditorCommand(e,t,i){let n=t._getViewModel();n&&this.runCoreEditingCommand(t,n,i||{})}};e.CoreEditingCommand=CoreEditingCommand,e.LineBreakInsert=(0,m.fK)(new class extends CoreEditingCommand{constructor(){super({id:"lineBreakInsert",precondition:w.u.writable,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,y.u6.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection)))}}),e.Outdent=(0,m.fK)(new class extends CoreEditingCommand{constructor(){super({id:"outdent",precondition:w.u.writable,kbOpts:{weight:0,kbExpr:L.Ao.and(w.u.editorTextFocus,w.u.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,y.u6.outdent(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection))),e.pushUndoStop()}}),e.Tab=(0,m.fK)(new class extends CoreEditingCommand{constructor(){super({id:"tab",precondition:w.u.writable,kbOpts:{weight:0,kbExpr:L.Ao.and(w.u.editorTextFocus,w.u.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,y.u6.tab(t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection))),e.pushUndoStop()}}),e.DeleteLeft=(0,m.fK)(new class extends CoreEditingCommand{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,i){let[n,o]=b.A.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection),t.getCursorAutoClosedCharacters());n&&e.pushUndoStop(),e.executeCommands(this.id,o),t.setPrevEditOperationType(2)}}),e.DeleteRight=(0,m.fK)(new class extends CoreEditingCommand{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:w.u.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,i){let[n,o]=b.A.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map(e=>e.modelState.selection));n&&e.pushUndoStop(),e.executeCommands(this.id,o),t.setPrevEditOperationType(3)}}),e.Undo=new class extends EditorOrNativeTextInputCommand{constructor(){super(m.n_)}runDOMCommand(e){e.ownerDocument.execCommand("undo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(91))return t.getModel().undo()}},e.Redo=new class extends EditorOrNativeTextInputCommand{constructor(){super(m.kz)}runDOMCommand(e){e.ownerDocument.execCommand("redo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(91))return t.getModel().redo()}}}(l||(l={}));let EditorHandlerCommand=class EditorHandlerCommand extends m.mY{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){let i=e.get(f.$).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}};function registerOverwritableCommand(e,t){registerCommand(new EditorHandlerCommand("default:"+e,e)),registerCommand(new EditorHandlerCommand(e,e,t))}registerOverwritableCommand("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),registerOverwritableCommand("replacePreviousChar"),registerOverwritableCommand("compositionType"),registerOverwritableCommand("compositionStart"),registerOverwritableCommand("compositionEnd"),registerOverwritableCommand("paste"),registerOverwritableCommand("cut")},64676:function(e,t,i){"use strict";i.d(t,{CL:function(){return isCodeEditor},Pi:function(){return getCodeEditor},QI:function(){return isDiffEditor}});var n=i(97292);function isCodeEditor(e){return!!e&&"function"==typeof e.getEditorType&&e.getEditorType()===n.g.ICodeEditor}function isDiffEditor(e){return!!e&&"function"==typeof e.getEditorType&&e.getEditorType()===n.g.IDiffEditor}function isCompositeEditor(e){return!!e&&"object"==typeof e&&"function"==typeof e.onDidChangeActiveEditor}function getCodeEditor(e){return isCodeEditor(e)?e:isDiffEditor(e)?e.getModifiedEditor():isCompositeEditor(e)&&isCodeEditor(e.activeCodeEditor)?e.activeCodeEditor:null}},82410:function(e,t,i){"use strict";i.d(t,{AL:function(){return GlobalEditorPointerMoveMonitor},N5:function(){return EditorMouseEventFactory},Pp:function(){return createCoordinatesRelativeToEditor},YN:function(){return PageCoordinates},gy:function(){return EditorMouseEvent},kG:function(){return createEditorPagePosition},rU:function(){return ClientCoordinates},t7:function(){return DynamicCssRules},tC:function(){return EditorPointerEventFactory}});var n=i(70687),o=i(14046),r=i(31498),s=i(66614),l=i(87932),d=i(45815);let PageCoordinates=class PageCoordinates{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new ClientCoordinates(this.x-e.scrollX,this.y-e.scrollY)}};let ClientCoordinates=class ClientCoordinates{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new PageCoordinates(this.clientX+e.scrollX,this.clientY+e.scrollY)}};let EditorPagePosition=class EditorPagePosition{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}};let CoordinatesRelativeToEditor=class CoordinatesRelativeToEditor{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}};function createEditorPagePosition(e){let t=n.i(e);return new EditorPagePosition(t.left,t.top,t.width,t.height)}function createCoordinatesRelativeToEditor(e,t,i){let n=t.width/e.offsetWidth,o=t.height/e.offsetHeight,r=(i.x-t.x)/n,s=(i.y-t.y)/o;return new CoordinatesRelativeToEditor(r,s)}let EditorMouseEvent=class EditorMouseEvent extends r.n{constructor(e,t,i){super(n.Jj(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new PageCoordinates(this.posx,this.posy),this.editorPos=createEditorPagePosition(i),this.relativePos=createCoordinatesRelativeToEditor(i,this.editorPos,this.pos)}};let EditorMouseEventFactory=class EditorMouseEventFactory{constructor(e){this._editorViewDomNode=e}_create(e){return new EditorMouseEvent(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return n.nm(e,"contextmenu",e=>{t(this._create(e))})}onMouseUp(e,t){return n.nm(e,"mouseup",e=>{t(this._create(e))})}onMouseDown(e,t){return n.nm(e,n.tw.MOUSE_DOWN,e=>{t(this._create(e))})}onPointerDown(e,t){return n.nm(e,n.tw.POINTER_DOWN,e=>{t(this._create(e),e.pointerId)})}onMouseLeave(e,t){return n.nm(e,n.tw.MOUSE_LEAVE,e=>{t(this._create(e))})}onMouseMove(e,t){return n.nm(e,"mousemove",e=>t(this._create(e)))}};let EditorPointerEventFactory=class EditorPointerEventFactory{constructor(e){this._editorViewDomNode=e}_create(e){return new EditorMouseEvent(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return n.nm(e,"pointerup",e=>{t(this._create(e))})}onPointerDown(e,t){return n.nm(e,n.tw.POINTER_DOWN,e=>{t(this._create(e),e.pointerId)})}onPointerLeave(e,t){return n.nm(e,n.tw.POINTER_LEAVE,e=>{t(this._create(e))})}onPointerMove(e,t){return n.nm(e,"pointermove",e=>t(this._create(e)))}};let GlobalEditorPointerMoveMonitor=class GlobalEditorPointerMoveMonitor extends l.JT{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new o.C),this._keydownListener=null}startMonitoring(e,t,i,o,r){this._keydownListener=n.mu(e.ownerDocument,"keydown",e=>{let t=e.toKeyCodeChord();t.isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,e.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,e=>{o(new EditorMouseEvent(e,!0,this._editorViewDomNode))},e=>{this._keydownListener.dispose(),r(e)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}};let DynamicCssRules=class DynamicCssRules{constructor(e){this._editor=e,this._instanceId=++DynamicCssRules._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new s.pY(()=>this.garbageCollect(),1e3)}createClassNameRef(e){let t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){let t=this.computeUniqueKey(e),i=this._rules.get(t);if(!i){let o=this._counter++;i=new RefCountedCssRule(t,`dyn-rule-${this._instanceId}-${o}`,n.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(let e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};DynamicCssRules._idPool=0;let RefCountedCssRule=class RefCountedCssRule{constructor(e,t,i,o){this.key=e,this.className=t,this.properties=o,this._referenceCount=0,this._styleElementDisposables=new l.SL,this._styleElement=n.dS(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(let e in t){let n;let o=t[e];n="object"==typeof o?(0,d.n_1)(o.id):o;let r=camelToDashes(e);i+=`
	${r}: ${n};`}return i+`
}`}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}};function camelToDashes(e){return e.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}},38981:function(e,t,i){"use strict";i.d(t,{AJ:function(){return MultiCommand},QG:function(){return registerInstantiatedEditorAction},Qr:function(){return registerEditorAction},R6:function(){return EditorAction},Sq:function(){return k},Uc:function(){return n},_K:function(){return registerEditorContribution},_l:function(){return EditorCommand},fK:function(){return registerEditorCommand},jY:function(){return MultiEditorAction},kz:function(){return L},mY:function(){return Command},n_:function(){return w},rn:function(){return registerMultiEditorAction},sb:function(){return registerModelAndPositionCommand},x1:function(){return EditorAction2}});var n,o=i(46157),r=i(31568),s=i(86992),l=i(11953),d=i(52025),c=i(72403),u=i(31798),g=i(56143),m=i(7193),f=i(27989),_=i(37139),v=i(76924),C=i(85363),b=i(16877),S=i(96927),y=i(70687);let Command=class Command{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let e=t.kbExpr;this.precondition&&(e=e?m.Ao.and(e,this.precondition):this.precondition);let i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};_.W.registerKeybindingRule(i)}}g.P.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){u.BH.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}};let MultiCommand=class MultiCommand extends Command{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((e,t)=>t.priority-e.priority),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i){this._implementations.splice(e,1);return}}}}runCommand(e,t){let i=e.get(S.VZ),n=e.get(m.i6);for(let o of(i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`),this._implementations)){if(o.when){let e=n.getContext((0,y.vY)()),t=o.when.evaluate(e);if(!t)continue}let r=o.implementation(e,t);if(r){if(i.trace(`Command '${this.id}' was handled by '${o.name}'.`),"boolean"==typeof r)return;return r}}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}};let ProxyCommand=class ProxyCommand extends Command{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}};let EditorCommand=class EditorCommand extends Command{static bindToContribution(e){return class extends EditorCommand{constructor(e){super(e),this._callback=e.handler}runEditorCommand(t,i,n){let o=e(i);o&&this._callback(o,n)}}}static runEditorCommand(e,t,i,n){let o=e.get(s.$),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(r)return r.invokeWithinContext(e=>{let o=e.get(m.i6);if(o.contextMatchesRules(null!=i?i:void 0))return n(e,r,t)})}runCommand(e,t){return EditorCommand.runEditorCommand(e,t,this.precondition,(e,t,i)=>this.runEditorCommand(e,t,i))}};let EditorAction=class EditorAction extends EditorCommand{static convertOptions(e){let t;function withDefaults(t){return t.menuId||(t.menuId=u.eH.EditorContext),t.title||(t.title=e.label),t.when=m.Ao.and(e.precondition,t.when),t}return t=Array.isArray(e.menuOpts)?e.menuOpts:e.menuOpts?[e.menuOpts]:[],Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(withDefaults)):e.contextMenuOpts&&t.push(withDefaults(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(EditorAction.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(C.b).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};let MultiEditorAction=class MultiEditorAction extends EditorAction{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((e,t)=>t[0]-e[0]),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e][1]===t){this._implementations.splice(e,1);return}}}}run(e,t,i){for(let n of this._implementations){let o=n[1](e,t,i);if(o){if("boolean"==typeof o)return;return o}}}};let EditorAction2=class EditorAction2 extends u.Ke{run(e,...t){let i=e.get(s.$),n=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(n)return n.invokeWithinContext(e=>{var i,o;let r=e.get(m.i6),s=e.get(S.VZ),l=r.contextMatchesRules(null!==(i=this.desc.precondition)&&void 0!==i?i:void 0);if(!l){s.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,null===(o=this.desc.precondition)||void 0===o?void 0:o.serialize());return}return this.runEditorCommand(e,n,...t)})}};function registerModelAndPositionCommand(e,t){g.P.registerCommand(e,function(e,...i){let n=e.get(f.TG),[o,s]=i;(0,b.p_)(r.o.isUri(o)),(0,b.p_)(l.L.isIPosition(s));let u=e.get(d.q).getModel(o);if(u){let e=l.L.lift(s);return n.invokeFunction(t,u,e,...i.slice(2))}return e.get(c.S).createModelReference(o).then(e=>new Promise((o,r)=>{try{let r=n.invokeFunction(t,e.object.textEditorModel,l.L.lift(s),i.slice(2));o(r)}catch(e){r(e)}}).finally(()=>{e.dispose()}))})}function registerEditorCommand(e){return EditorContributionRegistry.INSTANCE.registerEditorCommand(e),e}function registerEditorAction(e){let t=new e;return EditorContributionRegistry.INSTANCE.registerEditorAction(t),t}function registerMultiEditorAction(e){return EditorContributionRegistry.INSTANCE.registerEditorAction(e),e}function registerInstantiatedEditorAction(e){EditorContributionRegistry.INSTANCE.registerEditorAction(e)}function registerEditorContribution(e,t,i){EditorContributionRegistry.INSTANCE.registerEditorContribution(e,t,i)}!function(e){function getEditorCommand(e){return EditorContributionRegistry.INSTANCE.getEditorCommand(e)}function getEditorActions(){return EditorContributionRegistry.INSTANCE.getEditorActions()}function getEditorContributions(){return EditorContributionRegistry.INSTANCE.getEditorContributions()}function getSomeEditorContributions(e){return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(t=>e.indexOf(t.id)>=0)}function getDiffEditorContributions(){return EditorContributionRegistry.INSTANCE.getDiffEditorContributions()}e.getEditorCommand=getEditorCommand,e.getEditorActions=getEditorActions,e.getEditorContributions=getEditorContributions,e.getSomeEditorContributions=getSomeEditorContributions,e.getDiffEditorContributions=getDiffEditorContributions}(n||(n={}));let EditorContributionRegistry=class EditorContributionRegistry{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};function registerCommand(e){return e.register(),e}EditorContributionRegistry.INSTANCE=new EditorContributionRegistry,v.B.add("editor.contributions",EditorContributionRegistry.INSTANCE);let w=registerCommand(new MultiCommand({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:u.eH.MenubarEditMenu,group:"1_do",title:o.NC({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:u.eH.CommandPalette,group:"",title:o.NC("undo","Undo"),order:1}]}));registerCommand(new ProxyCommand(w,{id:"default:undo",precondition:void 0}));let L=registerCommand(new MultiCommand({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:u.eH.MenubarEditMenu,group:"1_do",title:o.NC({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:u.eH.CommandPalette,group:"",title:o.NC("redo","Redo"),order:1}]}));registerCommand(new ProxyCommand(L,{id:"default:redo",precondition:void 0}));let k=registerCommand(new MultiCommand({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:u.eH.MenubarSelectionMenu,group:"1_basic",title:o.NC({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:u.eH.CommandPalette,group:"",title:o.NC("selectAll","Select All"),order:1}]}))},65496:function(e,t,i){"use strict";i.d(t,{Gl:function(){return ResourceTextEdit},fo:function(){return ResourceEdit},vu:function(){return s}});var n=i(27989),o=i(31568),r=i(16877);let s=(0,n.yh)("IWorkspaceEditService");let ResourceEdit=class ResourceEdit{constructor(e){this.metadata=e}static convert(e){return e.edits.map(e=>{if(ResourceTextEdit.is(e))return ResourceTextEdit.lift(e);if(ResourceFileEdit.is(e))return ResourceFileEdit.lift(e);throw Error("Unsupported edit")})}};let ResourceTextEdit=class ResourceTextEdit extends ResourceEdit{static is(e){return e instanceof ResourceTextEdit||(0,r.Kn)(e)&&o.o.isUri(e.resource)&&(0,r.Kn)(e.textEdit)}static lift(e){return e instanceof ResourceTextEdit?e:new ResourceTextEdit(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}};let ResourceFileEdit=class ResourceFileEdit extends ResourceEdit{static is(e){return e instanceof ResourceFileEdit||(0,r.Kn)(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof ResourceFileEdit?e:new ResourceFileEdit(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}},86992:function(e,t,i){"use strict";i.d(t,{$:function(){return o}});var n=i(27989);let o=(0,n.yh)("codeEditorService")},92241:function(e,t,i){"use strict";i.d(t,{Q8:function(){return EditorWorkerClient},eu:function(){return U}});var n=i(66614),o=i(87932),r=i(17861),s=i(57605),l=i(56660),d=i(88059),c=i(45837);let u=!1;function logOnceWebWorkerWarning(e){d.$L&&(u||(u=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}let RequestMessage=class RequestMessage{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.method=i,this.args=n,this.type=0}};let ReplyMessage=class ReplyMessage{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}};let SubscribeEventMessage=class SubscribeEventMessage{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=n,this.type=2}};let EventMessage=class EventMessage{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}};let UnsubscribeEventMessage=class UnsubscribeEventMessage{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}};let SimpleWorkerProtocol=class SimpleWorkerProtocol{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){let i=String(++this._lastSentReq);return new Promise((n,o)=>{this._pendingReplies[i]={resolve:n,reject:o},this._send(new RequestMessage(this._workerId,i,e,t))})}listen(e,t){let i=null,n=new s.Q5({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,n),this._send(new SubscribeEventMessage(this._workerId,i,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new UnsubscribeEventMessage(this._workerId,i)),i=null}});return n.event}handleMessage(e){e&&e.vsWorker&&(-1===this._workerId||e.vsWorker===this._workerId)&&this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&((i=Error()).name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req,i=this._handler.handleMessage(e.method,e.args);i.then(e=>{this._send(new ReplyMessage(this._workerId,t,e,void 0))},e=>{e.detail instanceof Error&&(e.detail=(0,r.ri)(e.detail)),this._send(new ReplyMessage(this._workerId,t,void 0,(0,r.ri)(e)))})}_handleSubscribeEventMessage(e){let t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(e=>{this._send(new EventMessage(this._workerId,t,e))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(0===e.type)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else 1===e.type&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}};let SimpleWorkerClient=class SimpleWorkerClient extends o.JT{constructor(e,t,i){super();let n=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",e=>{this._protocol.handleMessage(e)},e=>{null==n||n(e)})),this._protocol=new SimpleWorkerProtocol({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t)=>{if("function"!=typeof i[e])return Promise.reject(Error("Missing method "+e+" on main thread host."));try{return Promise.resolve(i[e].apply(i,t))}catch(e){return Promise.reject(e)}},handleEvent:(e,t)=>{if(propertyIsDynamicEvent(e)){let n=i[e].call(i,t);if("function"!=typeof n)throw Error(`Missing dynamic event ${e} on main thread host.`);return n}if(propertyIsEvent(e)){let t=i[e];if("function"!=typeof t)throw Error(`Missing event ${e} on main thread host.`);return t}throw Error(`Malformed event name ${e}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null,r=globalThis.require;void 0!==r&&"function"==typeof r.getConfig?o=r.getConfig():void 0!==globalThis.requirejs&&(o=globalThis.requirejs.s.contexts._.config);let s=(0,l.$E)(i);this._onModuleLoaded=this._protocol.sendMessage("$initialize",[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,s]);let proxyMethodRequest=(e,t)=>this._request(e,t),proxyListen=(e,t)=>this._protocol.listen(e,t);this._lazyProxy=new Promise((e,i)=>{n=i,this._onModuleLoaded.then(t=>{e(createProxyObject(t,proxyMethodRequest,proxyListen))},e=>{i(e),this._onError("Worker failed to load "+t,e)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,n)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,n)},n)})}_onError(e,t){console.error(e),console.info(t)}};function propertyIsEvent(e){return"o"===e[0]&&"n"===e[1]&&c.df(e.charCodeAt(2))}function propertyIsDynamicEvent(e){return/^onDynamic/.test(e)&&c.df(e.charCodeAt(9))}function createProxyObject(e,t,i){let createProxyMethod=e=>function(){let i=Array.prototype.slice.call(arguments,0);return t(e,i)},createProxyDynamicEvent=e=>function(t){return i(e,t)},n={};for(let t of e){if(propertyIsDynamicEvent(t)){n[t]=createProxyDynamicEvent(t);continue}if(propertyIsEvent(t)){n[t]=i(t,void 0);continue}n[t]=createProxyMethod(t)}return n}var g=i(76883);let m=(0,g.Z)("defaultWorkerFactory",{createScriptURL:e=>e});function getWorker(e){let t=globalThis.MonacoEnvironment;if(t){if("function"==typeof t.getWorker)return t.getWorker("workerMain.js",e);if("function"==typeof t.getWorkerUrl){let i=t.getWorkerUrl("workerMain.js",e);return new Worker(m?m.createScriptURL(i):i,{name:e})}}throw Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function isPromiseLike(e){return"function"==typeof e.then}let WebWorker=class WebWorker extends o.JT{constructor(e,t,i,n,r){super(),this.id=t,this.label=i;let s=getWorker(i);isPromiseLike(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(e=>{e.onmessage=function(e){n(e.data)},e.onmessageerror=r,"function"==typeof e.addEventListener&&e.addEventListener("error",r)}),this._register((0,o.OF)(()=>{var e;null===(e=this.worker)||void 0===e||e.then(e=>{e.onmessage=null,e.onmessageerror=null,e.removeEventListener("error",r),e.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;null===(i=this.worker)||void 0===i||i.then(i=>{try{i.postMessage(e,t)}catch(e){(0,r.dL)(e),(0,r.dL)(Error(`FAILED to post message to '${this.label}'-worker`,{cause:e}))}})}};let DefaultWorkerFactory=class DefaultWorkerFactory{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){let n=++DefaultWorkerFactory.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new WebWorker(e,n,this._label||"anonymous"+n,t,e=>{logOnceWebWorkerWarning(e),this._webWorkerFailedBeforeError=e,i(e)})}};DefaultWorkerFactory.LAST_WORKER_ID=0;var f=i(30822),_=i(68903),v=i(17405),C=i(31568),b=i(11953),S=i(53500);let MirrorTextModel=class MirrorTextModel{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);let t=e.changes;for(let e of t)this._acceptDeleteRange(e.range),this._acceptInsertText(new b.L(e.range.startLineNumber,e.range.startColumn),e.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new S.oQ(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(0===t.length)return;let i=(0,c.uq)(t);if(1===i.length){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);let n=new Uint32Array(i.length-1);for(let t=1;t<i.length;t++)this._lines.splice(e.lineNumber+t-1,0,i[t]),n[t-1]=i[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}};var y=i(83783),w=i(33848);let Uint8Matrix=class Uint8Matrix{constructor(e,t,i){let n=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)n[o]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}};let StateMachine=class StateMachine{constructor(e){let t=0,i=0;for(let n=0,o=e.length;n<o;n++){let[o,r,s]=e[n];r>t&&(t=r),o>i&&(i=o),s>i&&(i=s)}t++,i++;let n=new Uint8Matrix(i,t,0);for(let t=0,i=e.length;t<i;t++){let[i,o,r]=e[t];n.set(i,o,r)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}};let L=null;function getStateMachine(){return null===L&&(L=new StateMachine([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),L}let k=null;function getClassifier(){if(null===k){k=new w.N(0);let e=" 	<>'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…";for(let t=0;t<e.length;t++)k.set(e.charCodeAt(t),1);let t=".,;:";for(let e=0;e<t.length;e++)k.set(t.charCodeAt(e),2)}return k}let LinkComputer=class LinkComputer{static _createLink(e,t,i,n,o){let r=o-1;do{let i=t.charCodeAt(r),n=e.get(i);if(2!==n)break;r--}while(r>n);if(n>0){let e=t.charCodeAt(n-1),i=t.charCodeAt(r);(40===e&&41===i||91===e&&93===i||123===e&&125===i)&&r--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:r+2},url:t.substring(n,r+1)}}static computeLinks(e,t=getStateMachine()){let i=getClassifier(),n=[];for(let o=1,r=e.getLineCount();o<=r;o++){let r=e.getLineContent(o),s=r.length,l=0,d=0,c=0,u=1,g=!1,m=!1,f=!1,_=!1;for(;l<s;){let e=!1,s=r.charCodeAt(l);if(13===u){let t;switch(s){case 40:g=!0,t=0;break;case 41:t=g?0:1;break;case 91:f=!0,m=!0,t=0;break;case 93:f=!1,t=m?0:1;break;case 123:_=!0,t=0;break;case 125:t=_?0:1;break;case 39:case 34:case 96:t=c===s?1:39===c||34===c||96===c?0:1;break;case 42:t=42===c?1:0;break;case 124:t=124===c?1:0;break;case 32:t=f?0:1;break;default:t=i.get(s)}1===t&&(n.push(LinkComputer._createLink(i,r,o,d,l)),e=!0)}else if(12===u){let t;91===s?(m=!0,t=0):t=i.get(s),1===t?e=!0:u=13}else 0===(u=t.nextState(u,s))&&(e=!0);e&&(u=1,g=!1,m=!1,_=!1,d=l+1,c=s),l++}13===u&&n.push(LinkComputer._createLink(i,r,o,d,s))}return n}};function computeLinks(e){return e&&"function"==typeof e.getLineCount&&"function"==typeof e.getLineContent?LinkComputer.computeLinks(e):[]}let BasicInplaceReplace=class BasicInplaceReplace{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,o){if(e&&t){let i=this.doNavigateValueSet(t,o);if(i)return{range:e,value:i}}if(i&&n){let e=this.doNavigateValueSet(n,o);if(e)return{range:i,value:e}}return null}doNavigateValueSet(e,t){let i=this.numberReplace(e,t);return null!==i?i:this.textReplace(e,t)}numberReplace(e,t){let i=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),n=Number(e),o=parseFloat(e);return isNaN(n)||isNaN(o)||n!==o||0===n&&!t?null:String((n=Math.floor(n*i)+(t?i:-i))/i)}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let o=0,r=e.length;null===n&&o<r;o++)n=this.valueSetReplace(e[o],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?((n+=i?1:-1)<0?n=e.length-1:n%=e.length,e[n]):null}};BasicInplaceReplace.INSTANCE=new BasicInplaceReplace;var D=i(23747),x=i(38345),N=i(92459),E=i(83581),I=i(64808),T=i(77853),M=i(4261);let LegacyLinesDiffComputer=class LegacyLinesDiffComputer{computeDiff(e,t,i){var n;let o=new DiffComputer(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}),r=o.computeDiff(),s=[],l=null;for(let e of r.changes){let t,i;t=0===e.originalEndLineNumber?new M.z(e.originalStartLineNumber+1,e.originalStartLineNumber+1):new M.z(e.originalStartLineNumber,e.originalEndLineNumber+1),i=0===e.modifiedEndLineNumber?new M.z(e.modifiedStartLineNumber+1,e.modifiedStartLineNumber+1):new M.z(e.modifiedStartLineNumber,e.modifiedEndLineNumber+1);let o=new I.gB(t,i,null===(n=e.charChanges)||void 0===n?void 0:n.map(e=>new I.iy(new f.e(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),new f.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn))));l&&(l.modified.endLineNumberExclusive===o.modified.startLineNumber||l.original.endLineNumberExclusive===o.original.startLineNumber)&&(o=new I.gB(l.original.join(o.original),l.modified.join(o.modified),l.innerChanges&&o.innerChanges?l.innerChanges.concat(o.innerChanges):void 0),s.pop()),s.push(o),l=o}return(0,T.eZ)(()=>(0,T.DM)(s,(e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive==t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber)),new E.h(s,[],r.quitEarly)}};function computeDiff(e,t,i,n){let o=new v.Hs(e,t,i);return o.ComputeDiff(n)}let LineSequence=class LineSequence{constructor(e){let t=[],i=[];for(let n=0,o=e.length;n<o;n++)t[n]=getFirstNonBlankColumn(e[n],1),i[n]=getLastNonBlankColumn(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){let e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){let n=[],o=[],r=[],s=0;for(let l=t;l<=i;l++){let t=this.lines[l],d=e?this._startColumns[l]:1,c=e?this._endColumns[l]:t.length+1;for(let e=d;e<c;e++)n[s]=t.charCodeAt(e-1),o[s]=l+1,r[s]=e,s++;!e&&l<i&&(n[s]=10,o[s]=l+1,r[s]=t.length+1,s++)}return new CharSequence(n,o,r)}};let CharSequence=class CharSequence{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(10===e?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return -1===e?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),10===this._charCodes[e])?this._lineNumbers[e]+1:this._lineNumbers[e]}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return -1===e?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),10===this._charCodes[e])?1:this._columns[e]+1}};let CharChange=class CharChange{constructor(e,t,i,n,o,r,s,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=s,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){let n=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),s=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),d=i.getStartColumn(e.modifiedStart),c=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new CharChange(n,o,r,s,l,d,c,u)}};function postProcessCharChanges(e){if(e.length<=1)return e;let t=[e[0]],i=t[0];for(let n=1,o=e.length;n<o;n++){let o=e[n],r=o.originalStart-(i.originalStart+i.originalLength),s=o.modifiedStart-(i.modifiedStart+i.modifiedLength),l=Math.min(r,s);l<3?(i.originalLength=o.originalStart+o.originalLength-i.originalStart,i.modifiedLength=o.modifiedStart+o.modifiedLength-i.modifiedStart):(t.push(o),i=o)}return t}let LineChange=class LineChange{constructor(e,t,i,n,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=o}static createFromDiffResult(e,t,i,n,o,r,s){let l,d,c,u,g;if(0===t.originalLength?(l=i.getStartLineNumber(t.originalStart)-1,d=0):(l=i.getStartLineNumber(t.originalStart),d=i.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(c=n.getStartLineNumber(t.modifiedStart)-1,u=0):(c=n.getStartLineNumber(t.modifiedStart),u=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){let r=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),l=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(r.getElements().length>0&&l.getElements().length>0){let e=computeDiff(r,l,o,!0).changes;s&&(e=postProcessCharChanges(e)),g=[];for(let t=0,i=e.length;t<i;t++)g.push(CharChange.createFromDiffChange(e[t],r,l))}}return new LineChange(l,d,c,u,g)}};let DiffComputer=class DiffComputer{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new LineSequence(e),this.modified=new LineSequence(t),this.continueLineDiff=createContinueProcessingPredicate(i.maxComputationTime),this.continueCharDiff=createContinueProcessingPredicate(0===i.maxComputationTime?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};let e=computeDiff(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){let e=[];for(let i=0,n=t.length;i<n;i++)e.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[i],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:e}}let n=[],o=0,r=0;for(let e=-1,i=t.length;e<i;e++){let s=e+1<i?t[e+1]:null,l=s?s.originalStart:this.originalLines.length,d=s?s.modifiedStart:this.modifiedLines.length;for(;o<l&&r<d;){let e=this.originalLines[o],t=this.modifiedLines[r];if(e!==t){{let i=getFirstNonBlankColumn(e,1),s=getFirstNonBlankColumn(t,1);for(;i>1&&s>1;){let n=e.charCodeAt(i-2),o=t.charCodeAt(s-2);if(n!==o)break;i--,s--}(i>1||s>1)&&this._pushTrimWhitespaceCharChange(n,o+1,1,i,r+1,1,s)}{let i=getLastNonBlankColumn(e,1),s=getLastNonBlankColumn(t,1),l=e.length+1,d=t.length+1;for(;i<l&&s<d;){let t=e.charCodeAt(i-1),n=e.charCodeAt(s-1);if(t!==n)break;i++,s++}(i<l||s<d)&&this._pushTrimWhitespaceCharChange(n,o+1,i,l,r+1,s,d)}}o++,r++}s&&(n.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,s,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=s.originalLength,r+=s.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,o,r,s){let l;this._mergeTrimWhitespaceCharChange(e,t,i,n,o,r,s)||(this.shouldComputeCharChanges&&(l=[new CharChange(t,i,t,n,o,r,o,s)]),e.push(new LineChange(t,t,o,o,l)))}_mergeTrimWhitespaceCharChange(e,t,i,n,o,r,s){let l=e.length;if(0===l)return!1;let d=e[l-1];return 0!==d.originalEndLineNumber&&0!==d.modifiedEndLineNumber&&(d.originalEndLineNumber===t&&d.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new CharChange(t,i,t,n,o,r,o,s)),!0):d.originalEndLineNumber+1===t&&d.modifiedEndLineNumber+1===o&&(d.originalEndLineNumber=t,d.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new CharChange(t,i,t,n,o,r,o,s)),!0))}};function getFirstNonBlankColumn(e,t){let i=c.LC(e);return -1===i?t:i+1}function getLastNonBlankColumn(e,t){let i=c.ow(e);return -1===i?t:i+2}function createContinueProcessingPredicate(e){if(0===e)return()=>!0;let t=Date.now();return()=>Date.now()-t<e}var R=i(53182);let A={getLegacy:()=>new LegacyLinesDiffComputer,getDefault:()=>new R.DW};var P=i(50164);function _parseCaptureGroups(e){let t=[];for(let i of e){let e=Number(i);(e||0===e&&""!==i.replace(/\s/g,""))&&t.push(e)}return t}function _toIColor(e,t,i,n){return{red:e/255,blue:i/255,green:t/255,alpha:n}}function _findRange(e,t){let i=t.index,n=t[0].length;if(!i)return;let o=e.positionAt(i),r={startLineNumber:o.lineNumber,startColumn:o.column,endLineNumber:o.lineNumber,endColumn:o.column+n};return r}function _findHexColorInformation(e,t){if(!e)return;let i=P.Il.Format.CSS.parseHex(t);if(i)return{range:e,color:_toIColor(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a)}}function _findRGBColorInformation(e,t,i){if(!e||1!==t.length)return;let n=t[0],o=n.values(),r=_parseCaptureGroups(o);return{range:e,color:_toIColor(r[0],r[1],r[2],i?r[3]:1)}}function _findHSLColorInformation(e,t,i){if(!e||1!==t.length)return;let n=t[0],o=n.values(),r=_parseCaptureGroups(o),s=new P.Il(new P.Oz(r[0],r[1]/100,r[2]/100,i?r[3]:1));return{range:e,color:_toIColor(s.rgba.r,s.rgba.g,s.rgba.b,s.rgba.a)}}function _findMatches(e,t){return"string"==typeof e?[...e.matchAll(t)]:e.findMatches(t)}function computeColors(e){let t=[],i=_findMatches(e,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(let n of i){let i;let o=n.filter(e=>void 0!==e),r=o[1],s=o[2];if(s){if("rgb"===r){let t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;i=_findRGBColorInformation(_findRange(e,n),_findMatches(s,t),!1)}else if("rgba"===r){let t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;i=_findRGBColorInformation(_findRange(e,n),_findMatches(s,t),!0)}else if("hsl"===r){let t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;i=_findHSLColorInformation(_findRange(e,n),_findMatches(s,t),!1)}else if("hsla"===r){let t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;i=_findHSLColorInformation(_findRange(e,n),_findMatches(s,t),!0)}else"#"===r&&(i=_findHexColorInformation(_findRange(e,n),r+s));i&&t.push(i)}}return t}function computeDefaultDocumentColors(e){return e&&"function"==typeof e.getValue&&"function"==typeof e.positionAt?computeColors(e):[]}let MirrorModel=class MirrorModel extends MirrorTextModel{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){let t=[];for(let i=0;i<this._lines.length;i++){let n=this._lines[i],o=this.offsetAt(new b.L(i+1,1)),r=n.matchAll(e);for(let e of r)(e.index||0===e.index)&&(e.index=e.index+o),t.push(e)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let i=(0,y.t2)(e.column,(0,y.eq)(t),this._lines[e.lineNumber-1],0);return i?new f.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){let t=this._lines,i=this._wordenize.bind(this),n=0,o="",r=0,s=[];return{*[Symbol.iterator](){for(;;)if(r<s.length){let e=o.substring(s[r].start,s[r].end);r+=1,yield e}else if(n<t.length)s=i(o=t[n],e),r=0,n+=1;else break}}}getLineWords(e,t){let i=this._lines[e-1],n=this._wordenize(i,t),o=[];for(let e of n)o.push({word:i.substring(e.start,e.end),startColumn:e.start+1,endColumn:e.end+1});return o}_wordenize(e,t){let i;let n=[];for(t.lastIndex=0;(i=t.exec(e))&&0!==i[0].length;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if((e=this._validateRange(e)).startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,o=[];o.push(this._lines[i].substring(e.startColumn-1));for(let e=i+1;e<n;e++)o.push(this._lines[e]);return o.push(this._lines[n].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.max(0,e=Math.floor(e)),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){let t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!b.L.isIPosition(e))throw Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{let e=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>e&&(i=e,n=!0)}return n?{lineNumber:t,column:i}:e}};let EditorSimpleWorker=class EditorSimpleWorker{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new MirrorModel(C.o.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;let i=this._models[e];i.onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}async computeUnicodeHighlights(e,t,i){let n=this._getModel(e);return n?N.a.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async computeDiff(e,t,i,n){let o=this._getModel(e),r=this._getModel(t);if(!o||!r)return null;let s=EditorSimpleWorker.computeDiff(o,r,i,n);return s}static computeDiff(e,t,i,n){let o="advanced"===n?A.getDefault():A.getLegacy(),r=e.getLinesContent(),s=t.getLinesContent(),l=o.computeDiff(r,s,i),d=!(l.changes.length>0)&&this._modelsAreIdentical(e,t);function getLineChanges(e){return e.map(e=>{var t;return[e.original.startLineNumber,e.original.endLineNumberExclusive,e.modified.startLineNumber,e.modified.endLineNumberExclusive,null===(t=e.innerChanges)||void 0===t?void 0:t.map(e=>[e.originalRange.startLineNumber,e.originalRange.startColumn,e.originalRange.endLineNumber,e.originalRange.endColumn,e.modifiedRange.startLineNumber,e.modifiedRange.startColumn,e.modifiedRange.endLineNumber,e.modifiedRange.endColumn])]})}return{identical:d,quitEarly:l.hitTimeout,changes:getLineChanges(l.changes),moves:l.moves.map(e=>[e.lineRangeMapping.original.startLineNumber,e.lineRangeMapping.original.endLineNumberExclusive,e.lineRangeMapping.modified.startLineNumber,e.lineRangeMapping.modified.endLineNumberExclusive,getLineChanges(e.changes)])}}static _modelsAreIdentical(e,t){let i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let n=1;n<=i;n++){let i=e.getLineContent(n),o=t.getLineContent(n);if(i!==o)return!1}return!0}async computeMoreMinimalEdits(e,t,i){let n;let o=this._getModel(e);if(!o)return t;let r=[];t=t.slice(0).sort((e,t)=>{if(e.range&&t.range)return f.e.compareRangesUsingStarts(e.range,t.range);let i=e.range?0:1,n=t.range?0:1;return i-n});let s=0;for(let e=1;e<t.length;e++)f.e.getEndPosition(t[s].range).equals(f.e.getStartPosition(t[e].range))?(t[s].range=f.e.fromPositions(f.e.getStartPosition(t[s].range),f.e.getEndPosition(t[e].range)),t[s].text+=t[e].text):t[++s]=t[e];for(let{range:e,text:l,eol:d}of(t.length=s+1,t)){if("number"==typeof d&&(n=d),f.e.isEmpty(e)&&!l)continue;let t=o.getValueInRange(e);if(t===(l=l.replace(/\r\n|\n|\r/g,o.eol)))continue;if(Math.max(l.length,t.length)>EditorSimpleWorker._diffLimit){r.push({range:e,text:l});continue}let s=(0,v.a$)(t,l,i),c=o.offsetAt(f.e.lift(e).getStartPosition());for(let e of s){let t=o.positionAt(c+e.originalStart),i=o.positionAt(c+e.originalStart+e.originalLength),n={text:l.substr(e.modifiedStart,e.modifiedLength),range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}};o.getValueInRange(n.range)!==n.text&&r.push(n)}}return"number"==typeof n&&r.push({eol:n,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async computeLinks(e){let t=this._getModel(e);return t?computeLinks(t):null}async computeDefaultDocumentColors(e){let t=this._getModel(e);return t?computeDefaultDocumentColors(t):null}async textualSuggest(e,t,i,n){let o=new x.G,r=new RegExp(i,n),s=new Set;e:for(let i of e){let e=this._getModel(i);if(e){for(let i of e.words(r))if(i!==t&&isNaN(Number(i))&&(s.add(i),s.size>EditorSimpleWorker._suggestionsLimit))break e}}return{words:Array.from(s),duration:o.elapsed()}}async computeWordRanges(e,t,i,n){let o=this._getModel(e);if(!o)return Object.create(null);let r=new RegExp(i,n),s=Object.create(null);for(let e=t.startLineNumber;e<t.endLineNumber;e++){let t=o.getLineWords(e,r);for(let i of t){if(!isNaN(Number(i.word)))continue;let t=s[i.word];t||(t=[],s[i.word]=t),t.push({startLineNumber:e,startColumn:i.startColumn,endLineNumber:e,endColumn:i.endColumn})}}return s}async navigateValueSet(e,t,i,n,o){let r=this._getModel(e);if(!r)return null;let s=new RegExp(n,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=r.getValueInRange(t),d=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},s);if(!d)return null;let c=r.getValueInRange(d),u=BasicInplaceReplace.INSTANCE.navigateValueSet(t,l,d,c,i);return u}loadForeignModule(e,t,i){let n=(0,l.IU)(i,(e,t)=>this._host.fhr(e,t));return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory({host:n,getMirrorModels:()=>this._getModels()},t),Promise.resolve((0,l.$E)(this._foreignModule))):Promise.reject(Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||"function"!=typeof this._foreignModule[e])return Promise.reject(Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(e){return Promise.reject(e)}}};EditorSimpleWorker._diffLimit=1e5,EditorSimpleWorker._suggestionsLimit=1e4,"function"==typeof importScripts&&(globalThis.monaco=(0,D.O)());var O=i(52025),F=i(39478),B=i(34794),W=i(96927),V=i(67379),H=i(58990),z=i(70687),__param=function(e,t){return function(i,n){t(i,n,e)}};function canSyncModel(e,t){let i=e.getModel(t);return!(!i||i.isTooLargeForSyncing())}let U=class extends o.JT{constructor(e,t,i,n,o){super(),this._modelService=e,this._workerManager=this._register(new WorkerManager(this._modelService,n)),this._logService=i,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(e,t)=>canSyncModel(this._modelService,e.uri)?this._workerManager.withWorker().then(t=>t.computeLinks(e.uri)).then(e=>e&&{links:e}):Promise.resolve({links:[]})})),this._register(o.completionProvider.register("*",new WordBasedCompletionItemProvider(this._workerManager,t,this._modelService,n)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return canSyncModel(this._modelService,e)}computedUnicodeHighlights(e,t,i){return this._workerManager.withWorker().then(n=>n.computedUnicodeHighlights(e,t,i))}async computeDiff(e,t,i,n){let o=await this._workerManager.withWorker().then(o=>o.computeDiff(e,t,i,n));if(!o)return null;let r={identical:o.identical,quitEarly:o.quitEarly,changes:toLineRangeMappings(o.changes),moves:o.moves.map(e=>new E.y(new I.f0(new M.z(e[0],e[1]),new M.z(e[2],e[3])),toLineRangeMappings(e[4])))};return r;function toLineRangeMappings(e){return e.map(e=>{var t;return new I.gB(new M.z(e[0],e[1]),new M.z(e[2],e[3]),null===(t=e[4])||void 0===t?void 0:t.map(e=>new I.iy(new f.e(e[0],e[1],e[2],e[3]),new f.e(e[4],e[5],e[6],e[7]))))})}}computeMoreMinimalEdits(e,t,i=!1){if(!(0,B.Of)(t))return Promise.resolve(void 0);{if(!canSyncModel(this._modelService,e))return Promise.resolve(t);let o=x.G.create(),r=this._workerManager.withWorker().then(n=>n.computeMoreMinimalEdits(e,t,i));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),o.elapsed())),Promise.race([r,(0,n.Vs)(1e3).then(()=>t)])}}canNavigateValueSet(e){return canSyncModel(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(n=>n.navigateValueSet(e,t,i))}canComputeWordRanges(e){return canSyncModel(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}};U=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(0,O.q),__param(1,F.V),__param(2,W.VZ),__param(3,_.c_),__param(4,V.p)],U);let WordBasedCompletionItemProvider=class WordBasedCompletionItemProvider{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){let i=this._configurationService.getValue(e.uri,t,"editor");if("off"===i.wordBasedSuggestions)return;let n=[];if("currentDocument"===i.wordBasedSuggestions)canSyncModel(this._modelService,e.uri)&&n.push(e.uri);else for(let t of this._modelService.getModels())canSyncModel(this._modelService,t.uri)&&(t===e?n.unshift(t.uri):("allDocuments"===i.wordBasedSuggestions||t.getLanguageId()===e.getLanguageId())&&n.push(t.uri));if(0===n.length)return;let o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),s=r?new f.e(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):f.e.fromPositions(t),l=s.setEndPosition(t.lineNumber,t.column),d=await this._workerManager.withWorker(),c=await d.textualSuggest(n,null==r?void 0:r.word,o);if(c)return{duration:c.duration,suggestions:c.words.map(e=>({kind:18,label:e,insertText:e,range:{insert:l,replace:s}}))}}};let WorkerManager=class WorkerManager extends o.JT{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime();let i=this._register(new z.ne);i.cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(15e4),H.vO),this._register(this._modelService.onModelRemoved(e=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;let e=this._modelService.getModels();0===e.length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;let e=new Date().getTime()-this._lastWorkerUsedTime;e>3e5&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new EditorWorkerClient(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}};let EditorModelManager=class EditorModelManager extends o.JT{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){let e=new n.zh;e.cancelAndSet(()=>this._checkStopModelSync(),Math.round(3e4)),this._register(e)}}dispose(){for(let e in this._syncedModels)(0,o.B9)(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(let i of e){let e=i.toString();this._syncedModels[e]||this._beginModelSync(i,t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let i in this._syncedModelsLastUsedTime){let n=e-this._syncedModelsLastUsedTime[i];n>6e4&&t.push(i)}for(let e of t)this._stopModelSync(e)}_beginModelSync(e,t){let i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;let n=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});let r=new o.SL;r.add(i.onDidChangeContent(e=>{this._proxy.acceptModelChanged(n.toString(),e)})),r.add(i.onWillDispose(()=>{this._stopModelSync(n)})),r.add((0,o.OF)(()=>{this._proxy.acceptRemovedModel(n)})),this._syncedModels[n]=r}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],(0,o.B9)(t)}};let SynchronousWorkerClient=class SynchronousWorkerClient{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}};let EditorWorkerHost=class EditorWorkerHost{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}};let EditorWorkerClient=class EditorWorkerClient extends o.JT{constructor(e,t,i,n){super(),this.languageConfigurationService=n,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new DefaultWorkerFactory(i),this._worker=null,this._modelManager=null}fhr(e,t){throw Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new SimpleWorkerClient(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new EditorWorkerHost(this)))}catch(e){logOnceWebWorkerWarning(e),this._worker=new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(logOnceWebWorkerWarning(e),this._worker=new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new EditorModelManager(e,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(e,t=!1){return this._disposed?Promise.reject((0,r.F0)()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))}computedUnicodeHighlights(e,t,i){return this._withSyncedResources([e]).then(n=>n.computeUnicodeHighlights(e.toString(),t,i))}computeDiff(e,t,i,n){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),i,n))}computeMoreMinimalEdits(e,t,i){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t,i))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then(t=>t.computeDefaultDocumentColors(e.toString()))}async textualSuggest(e,t,i){let n=await this._withSyncedResources(e),o=i.source,r=i.flags;return n.textualSuggest(e.map(e=>e.toString()),t,o,r)}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{let n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);let o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=o.source,s=o.flags;return i.computeWordRanges(e.toString(),t,r,s)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(n=>{let o=this._modelService.getModel(e);if(!o)return null;let r=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),s=r.source,l=r.flags;return n.navigateValueSet(e.toString(),t,i,s,l)})}dispose(){super.dispose(),this._disposed=!0}}},6162:function(e,t,i){"use strict";i.d(t,{Z:function(){return StableEditorScrollState}});let StableEditorScrollState=class StableEditorScrollState{static capture(e){if(0===e.getScrollTop()||e.hasPendingScrollAnimation())return new StableEditorScrollState(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0,n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();let o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}return new StableEditorScrollState(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,n,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=o}restore(e){if((this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop())&&this._visiblePosition){let t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;let t=e.getPosition();if(!this._cursorPosition||!t)return;let i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}},21330:function(e,t,i){"use strict";i.d(t,{CH:function(){return VisibleRanges},CR:function(){return FloatHorizontalRange},D4:function(){return HorizontalPosition},u7:function(){return LineVisibleRanges},xh:function(){return RenderingContext},yu:function(){return HorizontalRange}});let RestrictedRenderingContext=class RestrictedRenderingContext{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}};let RenderingContext=class RenderingContext extends RestrictedRenderingContext{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}};let LineVisibleRanges=class LineVisibleRanges{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}};let HorizontalRange=class HorizontalRange{static from(e){let t=Array(e.length);for(let i=0,n=e.length;i<n;i++){let n=e[i];t[i]=new HorizontalRange(n.left,n.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}};let FloatHorizontalRange=class FloatHorizontalRange{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}};let HorizontalPosition=class HorizontalPosition{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}};let VisibleRanges=class VisibleRanges{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}},65982:function(e,t,i){"use strict";i.d(t,{Nt:function(){return ViewLine},ob:function(){return ViewLineOptions},dL:function(){return getColumnOfNodeOffset}});var n=i(1215),o=i(8063),r=i(88059),s=i(21330);let RangeUtil=class RangeUtil{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,o){let r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch(e){return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(1===e.length)return e;e.sort(s.CR.compare);let t=[],i=0,n=e[0];for(let o=1,r=e.length;o<r;o++){let r=e[o];n.left+n.width+.9>=r.left?n.width=Math.max(n.width,r.left+r.width-n.left):(t[i++]=n,n=r)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||0===e.length)return null;let n=[];for(let o=0,r=e.length;o<r;o++){let r=e[o];n[o]=new s.CR(Math.max(0,(r.left-t)/i),r.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,o,r){let s=e.children.length-1;if(0>s)return null;if((t=Math.min(s,Math.max(0,t)))===(n=Math.min(s,Math.max(0,n)))&&i===o&&0===i&&!e.children[t].firstChild){let i=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(i,r.clientRectDeltaLeft,r.clientRectScale)}t!==n&&n>0&&0===o&&(n--,o=1073741824);let l=e.children[t].firstChild,d=e.children[n].firstChild;if(l&&d||(!l&&0===i&&t>0&&(l=e.children[t-1].firstChild,i=1073741824),d||0!==o||!(n>0)||(d=e.children[n-1].firstChild,o=1073741824)),!l||!d)return null;i=Math.min(l.textContent.length,Math.max(0,i)),o=Math.min(d.textContent.length,Math.max(0,o));let c=this._readClientRects(l,i,d,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(c,r.clientRectDeltaLeft,r.clientRectScale)}};var l=i(76320),d=i(50296),c=i(21799),u=i(69350);let g=!!r.tY||!r.IJ&&!n.vU&&!n.G6,m=!0;let ViewLineOptions=class ViewLineOptions{constructor(e,t){this.themeType=t;let i=e.options,n=i.get(50),o=i.get(38);"off"===o?this.renderWhitespace=i.get(99):this.renderWhitespace="none",this.renderControlCharacters=i.get(94),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(117),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}};let ViewLine=class ViewLine{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=(0,o.X)(e);else throw Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return(!!(0,c.c3)(this._options.themeType)||"selection"===this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}renderLine(e,t,i,n){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;let o=i.getViewLineRenderingData(e),r=this._options,s=l.Kp.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn),_=null;if((0,c.c3)(r.themeType)||"selection"===this._options.renderWhitespace){let t=i.selections;for(let i of t){if(i.endLineNumber<e||i.startLineNumber>e)continue;let t=i.startLineNumber===e?i.startColumn:o.minColumn,n=i.endLineNumber===e?i.endColumn:o.maxColumn;t<n&&((0,c.c3)(r.themeType)&&s.push(new l.Kp(t,n,"inline-selected-text",0)),"selection"===this._options.renderWhitespace&&(_||(_=[]),_.push(new d.zG(t-1,n-1))))}}let v=new d.IJ(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,s,o.tabSize,o.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==u.n0.OFF,_);if(this._renderedViewLine&&this._renderedViewLine.input.equals(v))return!1;n.appendString('<div style="top:'),n.appendString(String(t)),n.appendString("px;height:"),n.appendString(String(this._options.lineHeight)),n.appendString('px;" class="'),n.appendString(ViewLine.CLASS_NAME),n.appendString('">');let C=(0,d.d1)(v,n);n.appendString("</div>");let b=null;return m&&g&&o.isBasicASCII&&r.useMonospaceOptimizations&&0===C.containsForeignElements&&(b=new FastRenderedViewLine(this._renderedViewLine?this._renderedViewLine.domNode:null,v,C.characterMapping)),b||(b=f(this._renderedViewLine?this._renderedViewLine.domNode:null,v,C.characterMapping,C.containsRTL,C.containsForeignElements)),this._renderedViewLine=b,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine?this._renderedViewLine.monospaceAssumptionsAreValid():m}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));let o=this._renderedViewLine.input.stopRenderingLineAfter;if(-1!==o&&t>o+1&&i>o+1)return new s.CH(!0,[new s.CR(this.getWidth(n),0)]);-1!==o&&t>o+1&&(t=o+1),-1!==o&&i>o+1&&(i=o+1);let r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return r&&r.length>0?new s.CH(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};ViewLine.CLASS_NAME="view-line";let FastRenderedViewLine=class FastRenderedViewLine{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;let n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let e=0;e<n;e++)this._keyColumnPixelOffsetCache[e]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){let e=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*e)}return -1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null==e||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||-1!==this._cachedWidth}monospaceAssumptionsAreValid(){if(!this.domNode)return m;if(this.input.lineContent.length<300){let e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),m=!1)}return m}toSlowRenderedLine(){return f(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){let o=this._getColumnPixelOffset(e,t,n),r=this._getColumnPixelOffset(e,i,n);return[new s.CR(o,r-o)]}_getColumnPixelOffset(e,t,i){if(t<=300){let e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}let n=Math.floor((t-1)/300)-1,o=(n+1)*300+1,r=-1;if(this._keyColumnPixelOffsetCache&&-1===(r=this._keyColumnPixelOffsetCache[n])&&(r=this._actualReadPixelOffset(e,o,i),this._keyColumnPixelOffsetCache[n]=r),-1===r){let e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}let s=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-s)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return -1;let n=this._characterMapping.getDomPosition(t),o=RangeUtil.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return o&&0!==o.length?o[0].left:-1}getColumnOfNodeOffset(e,t){return getColumnOfNodeOffset(this._characterMapping,e,t)}};let RenderedViewLine=class RenderedViewLine{constructor(e,t,i,n,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,t=this._characterMapping.length;e<=t;e++)this._pixelOffsetCache[e]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null==e||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return -1!==this._cachedWidth}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){let o=this._readPixelOffset(this.domNode,e,t,n);if(-1===o)return null;let r=this._readPixelOffset(this.domNode,e,i,n);return -1===r?null:[new s.CR(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,o){if(i!==n)return this._readRawVisibleRangesForRange(e,i,n,o);{let n=this._readPixelOffset(e,t,i,o);return -1===n?null:[new s.CR(n,0)]}}_readPixelOffset(e,t,i,n){if(0===this._characterMapping.length){if(0===this._containsForeignElements||2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth(n);let t=this._getReadingTarget(e);return t.firstChild?(n.markDidDomLayout(),t.firstChild.offsetWidth):0}if(null!==this._pixelOffsetCache){let o=this._pixelOffsetCache[i];if(-1!==o)return o;let r=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(0===this._characterMapping.length){let t=RangeUtil.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return t&&0!==t.length?t[0].left:-1}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth(n);let o=this._characterMapping.getDomPosition(i),r=RangeUtil.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,n);if(!r||0===r.length)return -1;let s=r[0].left;if(this.input.isBasicASCII){let e=this._characterMapping.getHorizontalOffset(i),t=Math.round(this.input.spaceWidth*e);if(1>=Math.abs(t-s))return t}return s}_readRawVisibleRangesForRange(e,t,i,n){if(1===t&&i===this._characterMapping.length)return[new s.CR(0,this.getWidth(n))];let o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return RangeUtil.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,n)}getColumnOfNodeOffset(e,t){return getColumnOfNodeOffset(this._characterMapping,e,t)}};let WebKitRenderedViewLine=class WebKitRenderedViewLine extends RenderedViewLine{_readVisibleRangesForRange(e,t,i,n,o){let r=super._readVisibleRangesForRange(e,t,i,n,o);if(!r||0===r.length||i===n||1===i&&n===this._characterMapping.length)return r;if(!this.input.containsRTL){let i=this._readPixelOffset(e,t,n,o);if(-1!==i){let e=r[r.length-1];e.left<i&&(e.width=i-e.left)}}return r}};let f=n.Pf?createWebKitRenderedLine:createNormalRenderedLine;function createWebKitRenderedLine(e,t,i,n,o){return new WebKitRenderedViewLine(e,t,i,n,o)}function createNormalRenderedLine(e,t,i,n,o){return new RenderedViewLine(e,t,i,n,o)}function getColumnOfNodeOffset(e,t,i){let n=t.textContent.length,o=-1;for(;t;)t=t.previousSibling,o++;return e.getColumn(new d.Nd(o,i),n)}},10419:function(e,t,i){"use strict";i.d(t,{Gm:function(){return e8}});var n,o,r,s,l,d=i(1039),c=i(38981);let u=class{constructor(e,t){}dispose(){}};u.ID="editor.contrib.markerDecorations",u=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(n=d.i,function(e,t){n(e,t,1)})],u),(0,c._K)(u.ID,u,0);var g=i(70687),m=i(17861),f=i(57605),_=i(87932),v=i(95998);i(65117);var C=i(38679),b=i(1215),S=i(34794),y=i(56660),w=i(88059),L=i(88036),k=i(98855);let EditorSettingMigration=class EditorSettingMigration{constructor(e,t){this.key=e,this.migrate=t}apply(e){let t=EditorSettingMigration._read(e,this.key);this.migrate(t,t=>EditorSettingMigration._read(e,t),(t,i)=>EditorSettingMigration._write(e,t,i))}static _read(e,t){if(void 0===e)return;let i=t.indexOf(".");if(i>=0){let n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){let n=t.indexOf(".");if(n>=0){let o=t.substring(0,n);e[o]=e[o]||{},this._write(e[o],t.substring(n+1),i);return}e[t]=i}};function registerEditorSettingMigration(e,t){EditorSettingMigration.items.push(new EditorSettingMigration(e,t))}function registerSimpleEditorSettingMigration(e,t){registerEditorSettingMigration(e,(i,n,o)=>{if(void 0!==i){for(let[n,r]of t)if(i===n){o(e,r);return}}})}function migrateOptions(e){EditorSettingMigration.items.forEach(t=>t.apply(e))}EditorSettingMigration.items=[],registerSimpleEditorSettingMigration("wordWrap",[[!0,"on"],[!1,"off"]]),registerSimpleEditorSettingMigration("lineNumbers",[[!0,"on"],[!1,"off"]]),registerSimpleEditorSettingMigration("cursorBlinking",[["visible","solid"]]),registerSimpleEditorSettingMigration("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),registerSimpleEditorSettingMigration("renderLineHighlight",[[!0,"line"],[!1,"none"]]),registerSimpleEditorSettingMigration("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),registerSimpleEditorSettingMigration("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),registerSimpleEditorSettingMigration("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),registerSimpleEditorSettingMigration("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),registerSimpleEditorSettingMigration("autoIndent",[[!1,"advanced"],[!0,"full"]]),registerSimpleEditorSettingMigration("matchBrackets",[[!0,"always"],[!1,"never"]]),registerSimpleEditorSettingMigration("renderFinalNewline",[[!0,"on"],[!1,"off"]]),registerSimpleEditorSettingMigration("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),registerSimpleEditorSettingMigration("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),registerSimpleEditorSettingMigration("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),registerEditorSettingMigration("autoClosingBrackets",(e,t,i)=>{!1===e&&(i("autoClosingBrackets","never"),void 0===t("autoClosingQuotes")&&i("autoClosingQuotes","never"),void 0===t("autoSurround")&&i("autoSurround","never"))}),registerEditorSettingMigration("renderIndentGuides",(e,t,i)=>{void 0!==e&&(i("renderIndentGuides",void 0),void 0===t("guides.indentation")&&i("guides.indentation",!!e))}),registerEditorSettingMigration("highlightActiveIndentGuide",(e,t,i)=>{void 0!==e&&(i("highlightActiveIndentGuide",void 0),void 0===t("guides.highlightActiveIndentation")&&i("guides.highlightActiveIndentation",!!e))});let D={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};registerEditorSettingMigration("suggest.filteredTypes",(e,t,i)=>{if(e&&"object"==typeof e){for(let n of Object.entries(D)){let o=e[n[0]];!1===o&&void 0===t(`suggest.${n[1]}`)&&i(`suggest.${n[1]}`,!1)}i("suggest.filteredTypes",void 0)}}),registerEditorSettingMigration("quickSuggestions",(e,t,i)=>{if("boolean"==typeof e){let t=e?"on":"off";i("quickSuggestions",{comments:t,strings:t,other:t})}}),registerEditorSettingMigration("experimental.stickyScroll.enabled",(e,t,i)=>{"boolean"==typeof e&&(i("experimental.stickyScroll.enabled",void 0),void 0===t("stickyScroll.enabled")&&i("stickyScroll.enabled",e))}),registerEditorSettingMigration("experimental.stickyScroll.maxLineCount",(e,t,i)=>{"number"==typeof e&&(i("experimental.stickyScroll.maxLineCount",void 0),void 0===t("stickyScroll.maxLineCount")&&i("stickyScroll.maxLineCount",e))}),registerEditorSettingMigration("codeActionsOnSave",(e,t,i)=>{if(e&&"object"==typeof e){let t=!1,n={};for(let i of Object.entries(e))"boolean"==typeof i[1]?(t=!0,n[i[0]]=i[1]?"explicit":"never"):n[i[0]]=i[1];t&&i("codeActionsOnSave",n)}}),registerEditorSettingMigration("codeActionWidget.includeNearbyQuickfixes",(e,t,i)=>{"boolean"==typeof e&&(i("codeActionWidget.includeNearbyQuickfixes",void 0),void 0===t("codeActionWidget.includeNearbyQuickFixes")&&i("codeActionWidget.includeNearbyQuickFixes",e))}),registerEditorSettingMigration("lightbulb.enabled",(e,t,i)=>{"boolean"==typeof e&&i("lightbulb.enabled",e?void 0:"off")});var x=i(32884),N=i(69350),E=i(22903),I=i(77408),T=i(39938),M=i(79994);let R=class extends _.JT{constructor(e,t,i,n){super(),this._accessibilityService=n,this._onDidChange=this._register(new f.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new f.Q5),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new N.LJ,this.isSimpleWidget=e,this._containerObserver=this._register(new L.I(i,t.dimension)),this._targetWindowId=(0,g.Jj)(i).vscodeWindowId,this._rawOptions=deepCloneAndMigrateOptions(t),this._validatedOptions=EditorOptionsUtil.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(E.C.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(x.n.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(k.g.onDidChange(()=>this._recomputeOptions())),this._register(M.T.getInstance((0,g.Jj)(i)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){let e=this._computeOptions(),t=EditorOptionsUtil.checkEquals(this.options,e);null!==t&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){let e=this._readEnvConfiguration(),t=I.E4.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:x.n.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return EditorOptionsUtil.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:getExtraEditorClassName(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:b.Pf||b.vU,pixelRatio:M.T.getInstance((0,g.ed)(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return k.g.readFontInfo((0,g.ed)(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){let t=deepCloneAndMigrateOptions(e),i=EditorOptionsUtil.applyUpdate(this._rawOptions,t);i&&(this._validatedOptions=EditorOptionsUtil.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){let t=digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};function digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}function getExtraEditorClassName(){let e="";return b.G6||b.MG||(e+="no-user-select "),b.G6&&(e+="no-minimap-shadow enable-user-select "),w.dz&&(e+="mac "),e}R=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(o=T.F,function(e,t){o(e,t,3)})],R);let ValidatedEditorOptions=class ValidatedEditorOptions{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}};let ComputedEditorOptions=class ComputedEditorOptions{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}};let EditorOptionsUtil=class EditorOptionsUtil{static validateOptions(e){let t=new ValidatedEditorOptions;for(let i of N.Bc){let n="_never_"===i.name?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){let i=new ComputedEditorOptions;for(let n of N.Bc)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if("object"!=typeof e||"object"!=typeof t||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return!!(Array.isArray(e)&&Array.isArray(t))&&S.fS(e,t);if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(!EditorOptionsUtil._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){let i=[],n=!1;for(let o of N.Bc){let r=!EditorOptionsUtil._deepEquals(e._read(o.id),t._read(o.id));i[o.id]=r,r&&(n=!0)}return n?new N.Bb(i):null}static applyUpdate(e,t){let i=!1;for(let n of N.Bc)if(t.hasOwnProperty(n.name)){let o=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=o.newValue,i=i||o.didChange}return i}};function deepCloneAndMigrateOptions(e){let t=y.I8(e);return migrateOptions(t),t}var A=i(86992),P=i(8063),O=i(35220),F=i(82410);let ViewEventHandler=class ViewEventHandler extends _.JT{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){let n=e[i];switch(n.type){case 0:this.onCompositionStart(n)&&(t=!0);break;case 1:this.onCompositionEnd(n)&&(t=!0);break;case 2:this.onConfigurationChanged(n)&&(t=!0);break;case 3:this.onCursorStateChanged(n)&&(t=!0);break;case 4:this.onDecorationsChanged(n)&&(t=!0);break;case 5:this.onFlushed(n)&&(t=!0);break;case 6:this.onFocusChanged(n)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(n)&&(t=!0);break;case 8:this.onLineMappingChanged(n)&&(t=!0);break;case 9:this.onLinesChanged(n)&&(t=!0);break;case 10:this.onLinesDeleted(n)&&(t=!0);break;case 11:this.onLinesInserted(n)&&(t=!0);break;case 12:this.onRevealRangeRequest(n)&&(t=!0);break;case 13:this.onScrollChanged(n)&&(t=!0);break;case 15:this.onTokensChanged(n)&&(t=!0);break;case 14:this.onThemeChanged(n)&&(t=!0);break;case 16:this.onTokensColorsChanged(n)&&(t=!0);break;case 17:this.onZonesChanged(n)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(n)}}t&&(this._shouldRender=!0)}};let ViewPart=class ViewPart extends ViewEventHandler{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}};let PartFingerprints=class PartFingerprints{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){let t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){let i=[],n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;let o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=i[n-e-1];return o}};var B=i(65982),W=i(11953),V=i(30822),H=i(77393),z=i(84750);let UnknownHitTestResult=class UnknownHitTestResult{constructor(e=null){this.hitTarget=e,this.type=0}};let ContentHitTestResult=class ContentHitTestResult{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}};!function(e){function createFromDOMInfo(e,t,i){let n=e.getPositionFromDOMInfo(t,i);return n?new ContentHitTestResult(n,t,null):new UnknownHitTestResult(t)}e.createFromDOMInfo=createFromDOMInfo}(s||(s={}));let PointerHandlerLastRenderData=class PointerHandlerLastRenderData{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}};let MouseTarget=class MouseTarget{static _deduceRage(e,t=null){return!t&&e?new V.e(e.lineNumber,e.column,e.lineNumber,e.column):null!=t?t:null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,o,r){return{type:e,element:t,mouseColumn:i,position:n,range:o,detail:r}}static createViewZone(e,t,i,n,o){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:o}}static createContentText(e,t,i,n,o){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:o}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,n){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:n}}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}};let ElementPath=class ElementPath{static isTextArea(e){return 2===e.length&&3===e[0]&&7===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&8===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&8===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&6===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&9===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowGuard(e){return e.length>=1&&3===e[0]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&5===e[0]}};let HitTestContext=class HitTestContext{constructor(e,t,i){this.viewModel=e.viewModel;let n=e.configuration.options;this.layoutInfo=n.get(144),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(67),this.stickyTabStops=n.get(116),this.typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return HitTestContext.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){let i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){let n;let o=i.verticalOffset+i.height/2,r=e.viewModel.getLineCount(),s=null,l=null;return i.afterLineNumber!==r&&(l=new W.L(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(s=new W.L(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),n=null===l?s:null===s?l:t<o?s:l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:s,positionAfter:l,position:n}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){let e=this._context.viewModel.getLineCount(),t=this._context.viewModel.getLineMaxColumn(e);return{range:new V.e(e,t,e,t),isAfterLines:!0}}let t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new V.e(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return HitTestContext._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)break;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}};let BareHitTestRequest=class BareHitTestRequest{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,MouseTargetFactory._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}};let HitTestRequest=class HitTestRequest extends BareHitTestRequest{constructor(e,t,i,n,o){super(e,t,i,n),this._ctx=e,o?(this.target=o,this.targetPath=PartFingerprints.collect(o,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?H.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return MouseTarget.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return MouseTarget.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return MouseTarget.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return MouseTarget.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return MouseTarget.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return MouseTarget.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return MouseTarget.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return MouseTarget.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return MouseTarget.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new HitTestRequest(this._ctx,this.editorPos,this.pos,this.relativePos,e)}};let U={isAfterLines:!0};function createEmptyContentDataInLines(e){return{isAfterLines:!1,horizontalDistanceToText:e}}let MouseTargetFactory=class MouseTargetFactory{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){let t=e.target,i=PartFingerprints.collect(t,this._viewHelper.viewDomNode);return!!(ElementPath.isChildOfContentWidgets(i)||ElementPath.isChildOfOverflowingContentWidgets(i)||ElementPath.isChildOfOverlayWidgets(i)||ElementPath.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,n,o){let r=new HitTestContext(this._context,this._viewHelper,e),s=new HitTestRequest(r,t,i,n,o);try{let e=MouseTargetFactory._createMouseTarget(r,s,!1);if(6===e.type&&r.stickyTabStops&&null!==e.position){let t=MouseTargetFactory._snapToSoftTabBoundary(e.position,r.viewModel),i=V.e.fromPositions(t,t).plusRange(e.range);return s.fulfillContentText(t,i,e.detail)}return e}catch(e){return s.fulfillUnknown()}}static _createMouseTarget(e,t,i){if(null===t.target){if(i)return t.fulfillUnknown();let n=MouseTargetFactory._doHitTest(e,t);return 1===n.type?MouseTargetFactory.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):this._createMouseTarget(e,t.withTarget(n.hitTarget),!0)}let n=null;return ElementPath.isChildOfOverflowGuard(t.targetPath)||ElementPath.isChildOfOverflowingContentWidgets(t.targetPath)||ElementPath.isChildOfOverflowingOverlayWidgets(t.targetPath)||(n=n||t.fulfillUnknown()),(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n||MouseTargetFactory._hitTestContentWidget(e,t))||MouseTargetFactory._hitTestOverlayWidget(e,t))||MouseTargetFactory._hitTestMinimap(e,t))||MouseTargetFactory._hitTestScrollbarSlider(e,t))||MouseTargetFactory._hitTestViewZone(e,t))||MouseTargetFactory._hitTestMargin(e,t))||MouseTargetFactory._hitTestViewCursor(e,t))||MouseTargetFactory._hitTestTextArea(e,t))||MouseTargetFactory._hitTestViewLines(e,t,i))||MouseTargetFactory._hitTestScrollbar(e,t))||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(ElementPath.isChildOfContentWidgets(t.targetPath)||ElementPath.isChildOfOverflowingContentWidgets(t.targetPath)){let i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(ElementPath.isChildOfOverlayWidgets(t.targetPath)||ElementPath.isChildOfOverflowingOverlayWidgets(t.targetPath)){let i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){let i=e.lastRenderData.lastViewCursorsRenderData;for(let e of i)if(t.target===e.domNode)return t.fulfillContentText(e.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){let i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(let r of i){if(n<r.contentLeft||n>r.contentLeft+r.width)continue;let i=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(i<=o&&o<=i+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){let i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){let e=t.isInContentArea?8:5;return t.fulfillViewZone(e,i.position,i)}return null}static _hitTestTextArea(e,t){return ElementPath.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){let i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition(),o=Math.abs(t.relativePos.x),r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};if((o-=e.layoutInfo.glyphMarginLeft)<=e.layoutInfo.glyphMarginWidth){let s=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(s.lineNumber);return r.glyphMarginLane=l[Math.floor(o/e.lineHeight)],t.fulfillMargin(2,n,i.range,r)}return(o-=e.layoutInfo.glyphMarginWidth)<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,r))}return null}static _hitTestViewLines(e,t,i){if(!ElementPath.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new W.L(1,1),U);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){let i=e.viewModel.getLineCount(),n=e.viewModel.getLineMaxColumn(i);return t.fulfillContentEmpty(new W.L(i,n),U)}if(i){if(ElementPath.isStrictChildOfViewLines(t.targetPath)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(0===e.viewModel.getLineLength(i)){let n=e.getLineWidth(i),o=createEmptyContentDataInLines(t.mouseContentHorizontalOffset-n);return t.fulfillContentEmpty(new W.L(i,1),o)}let n=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=n){let o=createEmptyContentDataInLines(t.mouseContentHorizontalOffset-n),r=new W.L(i,e.viewModel.getLineMaxColumn(i));return t.fulfillContentEmpty(r,o)}}return t.fulfillUnknown()}let n=MouseTargetFactory._doHitTest(e,t);return 1===n.type?MouseTargetFactory.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):this._createMouseTarget(e,t.withTarget(n.hitTarget),!0)}static _hitTestMinimap(e,t){if(ElementPath.isChildOfMinimap(t.targetPath)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new W.L(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(ElementPath.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){let i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new W.L(i,n))}}return null}static _hitTestScrollbar(e,t){if(ElementPath.isChildOfScrollableElement(t.targetPath)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new W.L(i,n))}return null}getMouseColumn(e){let t=this._context.configuration.options,i=t.get(144),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return MouseTargetFactory._getMouseColumn(n,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,o){let r=n.lineNumber,s=n.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){let e=createEmptyContentDataInLines(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(n,e)}let d=e.visibleRangeForPosition(r,s);if(!d)return t.fulfillUnknown(n);let c=d.left;if(1>Math.abs(t.mouseContentHorizontalOffset-c))return t.fulfillContentText(n,null,{mightBeForeignElement:!!o,injectedText:o});let u=[];if(u.push({offset:d.left,column:s}),s>1){let t=e.visibleRangeForPosition(r,s-1);t&&u.push({offset:t.left,column:s-1})}let m=e.viewModel.getLineMaxColumn(r);if(s<m){let t=e.visibleRangeForPosition(r,s+1);t&&u.push({offset:t.left,column:s+1})}u.sort((e,t)=>e.offset-t.offset);let f=t.pos.toClientCoordinates(g.Jj(e.viewDomNode)),_=i.getBoundingClientRect(),v=_.left<=f.clientX&&f.clientX<=_.right,C=null;for(let e=1;e<u.length;e++){let i=u[e-1],o=u[e];if(i.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=o.offset){C=new V.e(r,i.column,r,o.column);let e=Math.abs(i.offset-t.mouseContentHorizontalOffset),s=Math.abs(o.offset-t.mouseContentHorizontalOffset);n=e<s?new W.L(r,i.column):new W.L(r,o.column);break}}return t.fulfillContentText(n,C,{mightBeForeignElement:!v||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i),o=n+e.lineHeight,r=i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o;if(!r){let i=t.pos.y+(Math.floor((n+o)/2)-t.mouseVerticalOffset);i<=t.editorPos.y&&(i=t.editorPos.y+1),i>=t.editorPos.y+t.editorPos.height&&(i=t.editorPos.y+t.editorPos.height-1);let r=new F.YN(t.pos.x,i),s=this._actualDoHitTestWithCaretRangeFromPoint(e,r.toClientCoordinates(g.Jj(e.viewDomNode)));if(1===s.type)return s}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(g.Jj(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){let i;let n=g.Ay(e.viewDomNode);if(!(i=n?void 0===n.caretRangeFromPoint?shadowCaretRangeFromPoint(n,t.clientX,t.clientY):n.caretRangeFromPoint(t.clientX,t.clientY):e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY))||!i.startContainer)return new UnknownHitTestResult;let o=i.startContainer;if(o.nodeType===o.TEXT_NODE){let t=o.parentNode,n=t?t.parentNode:null,r=n?n.parentNode:null,l=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;return l===B.Nt.CLASS_NAME?s.createFromDOMInfo(e,t,i.startOffset):new UnknownHitTestResult(o.parentNode)}if(o.nodeType===o.ELEMENT_NODE){let t=o.parentNode,i=t?t.parentNode:null,n=i&&i.nodeType===i.ELEMENT_NODE?i.className:null;return n===B.Nt.CLASS_NAME?s.createFromDOMInfo(e,o,o.textContent.length):new UnknownHitTestResult(o)}return new UnknownHitTestResult}static _doHitTestWithCaretPositionFromPoint(e,t){let i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){let t=i.offsetNode.parentNode,n=t?t.parentNode:null,o=n?n.parentNode:null,r=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;return r===B.Nt.CLASS_NAME?s.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new UnknownHitTestResult(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){let t=i.offsetNode.parentNode,n=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,o=t?t.parentNode:null,r=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(n===B.Nt.CLASS_NAME){let t=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(t)return s.createFromDOMInfo(e,t,0)}else if(r===B.Nt.CLASS_NAME)return s.createFromDOMInfo(e,i.offsetNode,0)}return new UnknownHitTestResult(i.offsetNode)}static _snapToSoftTabBoundary(e,t){let i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),o=z.l.atomicPosition(i,e.column-1,n,2);return -1!==o?new W.L(e.lineNumber,o+1):e}static _doHitTest(e,t){let i=new UnknownHitTestResult;if("function"==typeof e.viewDomNode.ownerDocument.caretRangeFromPoint?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(g.Jj(e.viewDomNode)))),1===i.type){let t=e.viewModel.getInjectedTextAt(i.position),n=e.viewModel.normalizePosition(i.position,2);(t||!n.equals(i.position))&&(i=new ContentHitTestResult(n,i.spanNode,t))}return i}};function shadowCaretRangeFromPoint(e,t,i){let n=document.createRange(),o=e.elementFromPoint(t,i);if(null!==o){let e;for(;o&&o.firstChild&&o.firstChild.nodeType!==o.firstChild.TEXT_NODE&&o.lastChild&&o.lastChild.firstChild;)o=o.lastChild;let i=o.getBoundingClientRect(),r=g.Jj(o),s=r.getComputedStyle(o,null).getPropertyValue("font-style"),l=r.getComputedStyle(o,null).getPropertyValue("font-variant"),d=r.getComputedStyle(o,null).getPropertyValue("font-weight"),c=r.getComputedStyle(o,null).getPropertyValue("font-size"),u=r.getComputedStyle(o,null).getPropertyValue("line-height"),m=r.getComputedStyle(o,null).getPropertyValue("font-family"),f=`${s} ${l} ${d} ${c}/${u} ${m}`,_=o.innerText,v=i.left,C=0;if(t>i.left+i.width)C=_.length;else{let i=CharWidthReader.getInstance();for(let n=0;n<_.length+1;n++){if(t<(v+=e=i.getCharWidth(_.charAt(n),f)/2)){C=n;break}v+=e}}n.setStart(o.firstChild,C),n.setEnd(o.firstChild,C)}return n}let CharWidthReader=class CharWidthReader{static getInstance(){return CharWidthReader._INSTANCE||(CharWidthReader._INSTANCE=new CharWidthReader),CharWidthReader._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){let i=e+t;if(this._cache[i])return this._cache[i];let n=this._canvas.getContext("2d");n.font=t;let o=n.measureText(e),r=o.width;return this._cache[i]=r,r}};CharWidthReader._INSTANCE=null;var K=i(32488),j=i(33482),q=i(58990),G=i(31498),Q=i(45841),Z=i(80064);let MouseHandler=class MouseHandler extends ViewEventHandler{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new MouseTargetFactory(this._context,i),this._mouseDownOperation=this._register(new MouseDownOperation(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(e,t)=>this._createMouseTarget(e,t),e=>this._getMouseColumn(e))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(144).height;let n=new F.N5(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,e=>this._onContextMenu(e,!0))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,e=>{this._onMouseMove(e),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=g.nm(this.viewHelper.viewDomNode.ownerDocument,"mousemove",e=>{this.viewHelper.viewDomNode.contains(e.target)||this._onMouseLeave(new F.gy(e,!1,this.viewHelper.viewDomNode))}))})),this._register(n.onMouseUp(this.viewHelper.viewDomNode,e=>this._onMouseUp(e))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,e=>this._onMouseLeave(e)));let o=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,(e,t)=>{o=t})),this._register(g.nm(this.viewHelper.viewDomNode,g.tw.POINTER_UP,e=>{this._mouseDownOperation.onPointerUp()})),this._register(n.onMouseDown(this.viewHelper.viewDomNode,e=>this._onMouseDown(e,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){let e=Z.Io.INSTANCE,t=0,i=E.C.getZoomLevel(),n=!1,o=0;function hasMouseWheelZoomModifiers(e){return w.dz?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey}this._register(g.nm(this.viewHelper.viewDomNode,g.tw.MOUSE_WHEEL,r=>{if(this.viewController.emitMouseWheel(r),!this._context.configuration.options.get(76))return;let s=new G.q(r);if(e.acceptStandardWheelEvent(s),e.isPhysicalMouseWheel()){if(hasMouseWheelZoomModifiers(r)){let e=E.C.getZoomLevel(),t=s.deltaY>0?1:-1;E.C.setZoomLevel(e+t),s.preventDefault(),s.stopPropagation()}}else Date.now()-t>50&&(i=E.C.getZoomLevel(),n=hasMouseWheelZoomModifiers(r),o=0),t=Date.now(),o+=s.deltaY,n&&(E.C.setZoomLevel(i+o/5),s.preventDefault(),s.stopPropagation())},{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(144)){let e=this._context.configuration.options.get(144).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){let i=new F.rU(e,t),n=i.toPageCoordinates(g.Jj(this.viewHelper.viewDomNode)),o=(0,F.kG)(this.viewHelper.viewDomNode);if(n.y<o.y||n.y>o.y+o.height||n.x<o.x||n.x>o.x+o.width)return null;let r=(0,F.Pp)(this.viewHelper.viewDomNode,o,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,n,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){let t=g.Ay(this.viewHelper.viewDomNode);t&&(i=t.elementsFromPoint(e.posx,e.posy).find(e=>this.viewHelper.viewDomNode.contains(e)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){let t=this.mouseTargetFactory.mouseTargetIsWidget(e);if(t||e.preventDefault(),this._mouseDownOperation.isActive())return;let i=e.timestamp;i<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){let i=this._createMouseTarget(e,!0),n=6===i.type||7===i.type,o=2===i.type||3===i.type||4===i.type,r=3===i.type,s=this._context.configuration.options.get(109),l=8===i.type||5===i.type,d=9===i.type,c=e.leftButton||e.middleButton;w.dz&&e.leftButton&&e.ctrlKey&&(c=!1);let focus=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(n||r&&s))focus(),this._mouseDownOperation.start(i.type,e,t);else if(o)e.preventDefault();else if(l){let n=i.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(n.viewZoneId)&&(focus(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else d&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(focus(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}};let MouseDownOperation=class MouseDownOperation extends _.JT{constructor(e,t,i,n,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=n,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new F.AL(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new TopBottomDragScrolling(this._context,this._viewHelper,this._mouseTargetFactory,(e,t,i)=>this._dispatchMouse(e,t,i))),this._mouseState=new MouseDownState,this._currentSelection=new Q.Y(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);let t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):13===t.type&&("above"===t.outsidePosition||"below"===t.outsidePosition)?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);let n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;let o=this._context.configuration.options;if(!o.get(91)&&o.get(35)&&!o.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===n.type&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,e=>this._onMouseDownThenMove(e),e=>{let t=this._findMousePosition(this._lastMouseEvent,!1);g.vd(e)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,e=>this._onMouseDownThenMove(e),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){let t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){let i=t.y-e.posy,r=Math.max(n.getCurrentScrollTop()-i,0),s=HitTestContext.getZoneAtCoord(this._context,r);if(s){let e=this._helpPositionJumpOverViewZone(s);if(e)return MouseTarget.createOutsideEditor(o,e,"above",i)}let l=n.getLineNumberAtVerticalOffset(r);return MouseTarget.createOutsideEditor(o,new W.L(l,1),"above",i)}if(e.posy>t.y+t.height){let r=e.posy-t.y-t.height,s=n.getCurrentScrollTop()+e.relativePos.y,l=HitTestContext.getZoneAtCoord(this._context,s);if(l){let e=this._helpPositionJumpOverViewZone(l);if(e)return MouseTarget.createOutsideEditor(o,e,"below",r)}let d=n.getLineNumberAtVerticalOffset(s);return MouseTarget.createOutsideEditor(o,new W.L(d,i.getLineMaxColumn(d)),"below",r)}let r=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){let i=t.x-e.posx;return MouseTarget.createOutsideEditor(o,new W.L(r,1),"left",i)}if(e.posx>t.x+t.width){let n=e.posx-t.x-t.width;return MouseTarget.createOutsideEditor(o,new W.L(r,i.getLineMaxColumn(r)),"right",n)}return null}_findMousePosition(e,t){let i=this._getPositionOutsideEditor(e);if(i)return i;let n=this._createMouseTarget(e,t),o=n.position;if(!o)return null;if(8===n.type||5===n.type){let e=this._helpPositionJumpOverViewZone(n.detail);if(e)return MouseTarget.createViewZone(n.type,n.element,n.mouseColumn,e,n.detail)}return n}_helpPositionJumpOverViewZone(e){let t=new W.L(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}};let TopBottomDragScrolling=class TopBottomDragScrolling extends _.JT{constructor(e,t,i,n){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new TopBottomDragScrollingOperation(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}};let TopBottomDragScrollingOperation=class TopBottomDragScrollingOperation extends _.JT{constructor(e,t,i,n,o,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=o,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=g.jL(g.Jj(r.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){let e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){let e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(144).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){let e;let t=this._context.configuration.options.get(67),i=this._getScrollSpeed(),n=this._tick(),o=i*(n/1e3)*t,r="above"===this._position.outsidePosition?-o:o;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();let s=this._context.viewLayout.getLinesViewportData(),l="above"===this._position.outsidePosition?s.startLineNumber:s.endLineNumber;{let t=(0,F.kG)(this._viewHelper.viewDomNode),i=this._context.configuration.options.get(144).horizontalScrollbarHeight,n=new F.YN(this._mouseEvent.pos.x,t.y+t.height-i-.1),o=(0,F.Pp)(this._viewHelper.viewDomNode,t,n);e=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),t,n,o,null)}e.position&&e.position.lineNumber===l||(e="above"===this._position.outsidePosition?MouseTarget.createOutsideEditor(this._position.mouseColumn,new W.L(l,1),"above",this._position.outsideDistance):MouseTarget.createOutsideEditor(this._position.mouseColumn,new W.L(l,this._context.viewModel.getLineMaxColumn(l)),"below",this._position.outsideDistance)),this._dispatchMouse(e,!0,2),this._animationFrameDisposable=g.jL(g.Jj(e.element),()=>this._execute())}};let MouseDownState=class MouseDownState{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){let i=new Date().getTime();i-this._lastSetMouseDownCountTime>MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Y=i(60309);let PointerEventHandler=class PointerEventHandler extends MouseHandler{constructor(e,t,i){super(e,t,i),this._register(j.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(g.nm(this.viewHelper.linesContentDomNode,j.t.Tap,e=>this.onTap(e))),this._register(g.nm(this.viewHelper.linesContentDomNode,j.t.Change,e=>this.onChange(e))),this._register(g.nm(this.viewHelper.linesContentDomNode,j.t.Contextmenu,e=>this._onContextMenu(new F.gy(e,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(g.nm(this.viewHelper.linesContentDomNode,"pointerdown",e=>{let t=e.pointerType;if("mouse"===t){this._lastPointerType="mouse";return}"touch"===t?this._lastPointerType="touch":this._lastPointerType="pen"}));let n=new F.tC(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,e=>this._onMouseMove(e))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,e=>this._onMouseUp(e))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,e=>this._onMouseLeave(e))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(e,t)=>this._onMouseDown(e,t)))}onTap(e){e.initialTarget&&this.viewHelper.linesContentDomNode.contains(e.initialTarget)&&(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),"pen"===this._lastPointerType&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){let i=this._createMouseTarget(new F.gy(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===i.type&&null!==i.detail.injectedText})}_onMouseDown(e,t){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e,t)}};let TouchHandler=class TouchHandler extends MouseHandler{constructor(e,t,i){super(e,t,i),this._register(j.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(g.nm(this.viewHelper.linesContentDomNode,j.t.Tap,e=>this.onTap(e))),this._register(g.nm(this.viewHelper.linesContentDomNode,j.t.Change,e=>this.onChange(e))),this._register(g.nm(this.viewHelper.linesContentDomNode,j.t.Contextmenu,e=>this._onContextMenu(new F.gy(e,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new F.gy(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){let e=document.createEvent("CustomEvent");e.initEvent(Y.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}};let PointerHandler=class PointerHandler extends _.JT{constructor(e,t,i){super();let n=w.gn||w.Dt&&w.tq;n&&K.D.pointerEvents?this.handler=this._register(new PointerEventHandler(e,t,i)):q.Ex.TouchEvent?this.handler=this._register(new TouchHandler(e,t,i)):this.handler=this._register(new MouseHandler(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}};i(85333);var J=i(46157),X=i(45837),ee=i(30146);i(2125);let DynamicViewOverlay=class DynamicViewOverlay extends ViewEventHandler{};var et=i(93672),ei=i(1173);let LineNumbersOverlay=class LineNumbersOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new W.L(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(67);let t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(95);let i=e.get(144);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(2===this._renderLineNumbers||3===this._renderLineNumbers)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){let t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W.L(e,1));if(1!==t.column)return"";let i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(2===this._renderLineNumbers){let e=Math.abs(this._lastCursorModelPosition.lineNumber-i);return 0===e?'<span class="relative-current-line-number">'+i+"</span>":String(e)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===i||i%10==0?String(i):"":String(i)}prepareRender(e){if(0===this._renderLineNumbers){this._renderResult=null;return}let t=w.IJ?this._lineHeight%2==0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(e=>!!e.options.lineNumberClassName);o.sort((e,t)=>V.e.compareRangesUsingEnds(e.range,t.range));let r=0,s=this._context.viewModel.getLineCount(),l=[];for(let e=i;e<=n;e++){let n=e-i,d=this._getLineRenderLineNumber(e),c="";for(;r<o.length&&o[r].range.endLineNumber<e;)r++;for(let t=r;t<o.length;t++){let{range:i,options:n}=o[t];i.startLineNumber<=e&&(c+=" "+n.lineNumberClassName)}if(!d&&!c){l[n]="";continue}e===s&&0===this._context.viewModel.getLineLength(e)&&("off"===this._renderFinalNewline&&(d=""),"dimmed"===this._renderFinalNewline&&(c+=" dimmed-line-number")),e===this._activeLineNumber&&(c+=" active-line-number"),l[n]=`<div class="${LineNumbersOverlay.CLASS_NAME}${t}${c}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${d}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};LineNumbersOverlay.CLASS_NAME="line-numbers",(0,et.Ic)((e,t)=>{let i=e.getColor(ei.hw),n=e.getColor(ei.Bj);n?t.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):i&&t.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i.transparent(.4)}; }`)}),i(88790);let Margin=class Margin extends ViewPart{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(144);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setClassName(Margin.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,P.X)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Margin.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);let i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};Margin.CLASS_NAME="glyph-margin",Margin.OUTER_CLASS_NAME="margin";var en=i(50673);i(48505);let eo="monaco-mouse-cursor-text";var er=i(7530),es=i(50164),ea=i(14296),el=i(18333),ed=i(27989),textAreaHandler_param=function(e,t){return function(i,n){t(i,n,e)}};let VisibleTextAreaData=class VisibleTextAreaData{constructor(e,t,i,n,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){let t=new W.L(this.modelLineNumber,this.distanceToModelLineStart+1),i=new W.L(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}};let eh=b.vU,ec=class extends ViewPart{constructor(e,t,i,n,o){super(e),this._keybindingService=n,this._instantiationService=o,this._primaryCursorPosition=new W.L(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;let r=this._context.configuration.options,s=r.get(144);this._setAccessibilityOptions(r),this._contentLeft=s.contentLeft,this._contentWidth=s.contentWidth,this._contentHeight=s.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new Q.Y(1,1,1,1)],this._modelSelections=[new Q.Y(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,P.X)(document.createElement("textarea")),PartFingerprints.write(this.textArea,7),this.textArea.setClassName(`inputarea ${eo}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(124))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",J.NC("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(91)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,P.X)(document.createElement("div")),this.textAreaCover.setPosition("absolute");let d={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:e=>this._context.viewModel.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.viewModel.getValueInRange(e,t),getValueLengthInRange:(e,t)=>this._context.viewModel.getValueLengthInRange(e,t),modifyPosition:(e,t)=>this._context.viewModel.modifyPosition(e,t)},c=this._register(new Y.Tj(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(Y.Fz,{getDataToCopy:()=>{let e;let t=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,w.ED),i=this._context.viewModel.model.getEOL(),n=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),o=Array.isArray(t)?t:null,r=Array.isArray(t)?t.join(i):t,s=null;if(Y.RA.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&r.length<65536){let t=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);t&&(e=t.html,s=t.mode)}return{isFromEmptySelection:n,multicursorText:o,text:r,html:e,mode:s}},getScreenReaderContent:()=>{if(1===this._accessibilitySupport){let e=this._selections[0];if(w.dz&&e.isEmpty()){let t=e.getStartPosition(),i=this._getWordBeforePosition(t);if(0===i.length&&(i=this._getCharacterBeforePosition(t)),i.length>0)return new ee.un(i,i.length,i.length,V.e.fromPositions(t),0)}if(w.dz&&!e.isEmpty()&&500>d.getValueLengthInRange(e,0)){let t=d.getValueInRange(e,0);return new ee.un(t,0,t.length,e,0)}if(b.G6&&!e.isEmpty()){let e="vscode-placeholder";return new ee.un(e,0,e.length,null,void 0)}return ee.un.EMPTY}if(b.Dt){let e=this._selections[0];if(e.isEmpty()){let t=e.getStartPosition(),[i,n]=this._getAndroidWordAtPosition(t);if(i.length>0)return new ee.un(i,n,n,V.e.fromPositions(t),0)}return ee.un.EMPTY}return ee.ee.fromEditorSelection(d,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,i)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,i)},c,w.OS,{isAndroid:b.Dt,isChrome:b.i7,isFirefox:b.vU,isSafari:b.G6})),this._register(this._textAreaInput.onKeyDown(e=>{this._viewController.emitKeyDown(e)})),this._register(this._textAreaInput.onKeyUp(e=>{this._viewController.emitKeyUp(e)})),this._register(this._textAreaInput.onPaste(e=>{let t=!1,i=null,n=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,i=void 0!==e.metadata.multicursorText?e.metadata.multicursorText:null,n=e.metadata.mode),this._viewController.paste(e.text,t,i,n)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?(ee.al&&console.log(` => compositionType: <<${e.text}>>, ${e.replacePrevCharCnt}, ${e.replaceNextCharCnt}, ${e.positionDelta}`),this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta)):(ee.al&&console.log(` => type: <<${e.text}>>`),this._viewController.type(e.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(e=>{this._viewController.setSelection(e)})),this._register(this._textAreaInput.onCompositionStart(e=>{let t=this.textArea.domNode,i=this._modelSelections[0],{distanceToModelLineStart:n,widthOfHiddenTextBefore:o}=(()=>{let e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),n=e.lastIndexOf("\n"),o=e.substring(n+1),r=o.lastIndexOf("	"),s=o.length-r-1,l=i.getStartPosition(),d=Math.min(l.column-1,s),c=l.column-1-d,u=o.substring(0,o.length-d),{tabSize:g}=this._context.viewModel.model.getOptions(),m=measureText(this.textArea.domNode.ownerDocument,u,this._fontInfo,g);return{distanceToModelLineStart:c,widthOfHiddenTextBefore:m}})(),{distanceToModelLineEnd:r}=(()=>{let e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),n=e.indexOf("\n"),o=-1===n?e:e.substring(0,n),r=o.indexOf("	"),s=-1===r?o.length:o.length-r-1,l=i.getEndPosition(),d=Math.min(this._context.viewModel.model.getLineMaxColumn(l.lineNumber)-l.column,s),c=this._context.viewModel.model.getLineMaxColumn(l.lineNumber)-l.column-d;return{distanceToModelLineEnd:c}})();this._context.viewModel.revealRange("keyboard",!0,V.e.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new VisibleTextAreaData(this._context,i.startLineNumber,n,o,r),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${eo} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(e=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${eo}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(ea.F.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){let t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,en.u)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?'),n=!0,o=e.column,r=!0,s=e.column,l=0;for(;l<50&&(n||r);){if(n&&o<=1&&(n=!1),n){let e=t.charCodeAt(o-2),r=i.get(e);0!==r?n=!1:o--}if(r&&s>t.length&&(r=!1),r){let e=t.charCodeAt(s-1),n=i.get(e);0!==n?r=!1:s++}l++}return[t.substring(o-1,s-1),e.column-o]}_getWordBeforePosition(e){let t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,en.u)(this._context.configuration.options.get(130)),n=e.column,o=0;for(;n>1;){let r=t.charCodeAt(n-2),s=i.get(r);if(0!==s||o>50)return t.substring(n-1,e.column-1);o++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){let t=this._context.viewModel.getLineContent(e.lineNumber),i=t.charAt(e.column-2);if(!X.ZG(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var t,i,n;let o=e.get(2);if(1===o){let e=null===(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))||void 0===t?void 0:t.getAriaLabel(),o=null===(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))||void 0===i?void 0:i.getAriaLabel(),r=null===(n=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))||void 0===n?void 0:n.getAriaLabel(),s=J.NC("accessibilityModeOff","The editor is not accessible at this time.");return e?J.NC("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",s,e):o?J.NC("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",s,o):r?J.NC("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",s,r):s}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);let t=e.get(3);2===this._accessibilitySupport&&t===N.BH.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;let i=e.get(144),n=i.wrappingColumn;if(-1!==n&&1!==this._accessibilitySupport){let t=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*t.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=eh?0:1}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${n*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(124))),(e.hasChanged(34)||e.hasChanged(91))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){let e=this._context.configuration.options,t=!ea.F.enabled||e.get(34)&&e.get(91);t?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new W.L(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),null===(t=this._visibleTextArea)||void 0===t||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){let e=this._visibleTextArea.visibleTextareaStart,t=this._visibleTextArea.visibleTextareaEnd,i=this._visibleTextArea.startPosition,n=this._visibleTextArea.endPosition;if(i&&n&&e&&t&&t.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){let o=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,r=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),s=this._visibleTextArea.widthOfHiddenLineTextBefore,l=this._contentLeft+e.left-this._scrollLeft,d=t.left-e.left+1;if(l<this._contentLeft){let e=this._contentLeft-l;l+=e,s+=e,d-=e}d>this._contentWidth&&(d=this._contentWidth);let c=this._context.viewModel.getViewLineData(i.lineNumber),u=c.tokens.findTokenIndexAtOffset(i.column-1),g=c.tokens.findTokenIndexAtOffset(n.column-1),m=u===g,f=this._visibleTextArea.definePresentation(m?c.tokens.getPresentation(u):null);this.textArea.domNode.scrollTop=r*this._lineHeight,this.textArea.domNode.scrollLeft=s,this._doRender({lastRenderPosition:null,top:o,left:l,width:d,height:this._lineHeight,useCover:!1,color:(er.RW.getColorMap()||[])[f.foreground],italic:f.italic,bold:f.bold,underline:f.underline,strikethrough:f.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}let t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}let i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight){this._renderAtTopLeft();return}if(w.dz||2===this._accessibilitySupport){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;let n=null!==(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)&&void 0!==e?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:eh?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;for(;-1!==(i=e.indexOf("\n",i+1));)t++;return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:eh?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;let t=this.textArea,i=this.textAreaCover;(0,C.N)(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?es.Il.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);let n=this._context.configuration.options;n.get(57)?i.setClassName("monaco-editor-background textAreaCover "+Margin.OUTER_CLASS_NAME):0!==n.get(68).renderType?i.setClassName("monaco-editor-background textAreaCover "+LineNumbersOverlay.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};function measureText(e,t,i,n){if(0===t.length)return 0;let o=e.createElement("div");o.style.position="absolute",o.style.top="-50000px",o.style.width="50000px";let r=e.createElement("span");(0,C.N)(r,i),r.style.whiteSpace="pre",r.style.tabSize=`${n*i.spaceWidth}px`,r.append(t),o.appendChild(r),e.body.appendChild(o);let s=r.offsetWidth;return e.body.removeChild(o),s}ec=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([textAreaHandler_param(3,el.d),textAreaHandler_param(4,ed.TG)],ec);var eu=i(21330),eg=i(36986);let ViewController=class ViewController{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){eg.Ox.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){let t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new W.L(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let t=this.configuration.options,i=w.IJ&&t.get(107),n=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){eg.Ox.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){eg.Ox.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),eg.Ox.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),eg.Ox.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){eg.Ox.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){eg.Ox.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){eg.Ox.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){eg.Ox.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){eg.Ox.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){eg.Ox.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){eg.Ox.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){eg.Ox.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){eg.Ox.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}};var ep=i(76883),em=i(53778);let RenderedLinesCollection=class RenderedLinesCollection{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new m.he("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;let i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i)return this._rendLineNumberStart-=t-e+1,null;if(e>n)return null;let o=0,r=0;for(let s=i;s<=n;s++){let i=s-this._rendLineNumberStart;e<=s&&s<=t&&(0===r?(o=i,r=1):r++)}if(e<i){let n=0;n=t<i?t-e+1:i-e,this._rendLineNumberStart-=n}let s=this._lines.splice(o,r);return s}onLinesChanged(e,t){let i=e+t-1;if(0===this.getCount())return!1;let n=this.getStartLineNumber(),o=this.getEndLineNumber(),r=!1;for(let t=e;t<=i;t++)t>=n&&t<=o&&(this._lines[t-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(0===this.getCount())return null;let i=t-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o){let t=this._lines.splice(e-this._rendLineNumberStart,o-e+1);return t}let r=[];for(let e=0;e<i;e++)r[e]=this._createLine();let s=e-this._rendLineNumberStart,l=this._lines.slice(0,s),d=this._lines.slice(s,this._lines.length-i),c=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(d),c}onTokensChanged(e){if(0===this.getCount())return!1;let t=this.getStartLineNumber(),i=this.getEndLineNumber(),n=!1;for(let o=0,r=e.length;o<r;o++){let r=e[o];if(r.toLineNumber<t||r.fromLineNumber>i)continue;let s=Math.max(t,r.fromLineNumber),l=Math.min(i,r.toLineNumber);for(let e=s;e<=l;e++){let t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),n=!0}}return n}};let VisibleLinesCollection=class VisibleLinesCollection{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new RenderedLinesCollection(()=>this._host.createVisibleLine())}_createDomNode(){let e=(0,P.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(144)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){let t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){let i=t[e].getDomNode();i&&this.domNode.domNode.removeChild(i)}return!0}onLinesInserted(e){let t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let e=0,i=t.length;e<i;e++){let i=t[e].getDomNode();i&&this.domNode.domNode.removeChild(i)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let t=this._linesCollection._get(),i=new ViewLayerRenderer(this.domNode.domNode,this._host,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}};let ViewLayerRenderer=class ViewLayerRenderer{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,n){let o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let e=t;e<=i;e++)o.lines[e-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),n,t),o.rendLineNumberStart>t){let e=Math.min(i,o.rendLineNumberStart-1);t<=e&&(this._insertLinesBefore(o,t,e,n,t),o.linesLength+=e-t+1)}else if(o.rendLineNumberStart<t){let e=Math.min(o.linesLength,t-o.rendLineNumberStart);e>0&&(this._removeLinesBefore(o,e),o.linesLength-=e)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){let e=o.rendLineNumberStart+o.linesLength;e<=i&&(this._insertLinesAfter(o,e,i,n,t),o.linesLength+=i-e+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){let e=Math.max(0,i-o.rendLineNumberStart+1),t=o.linesLength-1,n=t-e+1;n>0&&(this._removeLinesAfter(o,n),o.linesLength-=n)}return this._finishRendering(o,!1,n),o}_renderUntouchedLines(e,t,i,n,o){let r=e.rendLineNumberStart,s=e.lines;for(let e=t;e<=i;e++){let t=r+e;s[e].layoutLine(t,n[t-o])}}_insertLinesBefore(e,t,i,n,o){let r=[],s=0;for(let e=t;e<=i;e++)r[s++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){let t=e.lines[i].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,o){let r=[],s=0;for(let e=t;e<=i;e++)r[s++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){let i=e.linesLength-t;for(let n=0;n<t;n++){let t=e.lines[i+n].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){ViewLayerRenderer._ttPolicy&&(i=ViewLayerRenderer._ttPolicy.createHTML(i));let o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let r=this.domNode.lastChild;for(let t=e.linesLength-1;t>=0;t--){let i=e.lines[t];n[t]&&(i.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){let n=document.createElement("div");ViewLayerRenderer._ttPolicy&&(t=ViewLayerRenderer._ttPolicy.createHTML(t)),n.innerHTML=t;for(let t=0;t<e.linesLength;t++){let o=e.lines[t];if(i[t]){let e=n.firstChild,t=o.getDomNode();t.parentNode.replaceChild(e,t),o.setDomNode(e)}}}_finishRendering(e,t,i){let n=ViewLayerRenderer._sb,o=e.linesLength,r=e.lines,s=e.rendLineNumberStart,l=[];{n.reset();let d=!1;for(let e=0;e<o;e++){let t=r[e];l[e]=!1;let o=t.getDomNode();if(o)continue;let c=t.renderLine(e+s,i[e],this.viewportData,n);c&&(l[e]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let t=!1,d=[];for(let e=0;e<o;e++){let o=r[e];if(d[e]=!1,l[e])continue;let c=o.renderLine(e+s,i[e],this.viewportData,n);c&&(d[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,n.build(),d)}}};ViewLayerRenderer._ttPolicy=(0,ep.Z)("editorViewLayer",{createHTML:e=>e}),ViewLayerRenderer._sb=new em.HT(1e5);let ViewOverlays=class ViewOverlays extends ViewPart{constructor(e){super(e),this._visibleLines=new VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode;let t=this._context.configuration.options,i=t.get(50);(0,C.N)(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++){let t=this._dynamicOverlays[e];if(t.shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++){let t=this._dynamicOverlays[e];t.dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new ViewOverlayLine(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){let t=this._visibleLines.getVisibleLine(n);t.onConfigurationChanged(e)}let n=this._context.configuration.options,o=n.get(50);return(0,C.N)(this.domNode,o),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let t=this._dynamicOverlays.filter(e=>e.shouldRender());for(let i=0,n=t.length;i<n;i++){let n=t[i];n.prepareRender(e),n.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}};let ViewOverlayLine=class ViewOverlayLine{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(67),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,P.X)(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(67)}renderLine(e,t,i,n){let o="";for(let t=0,n=this._dynamicOverlays.length;t<n;t++){let n=this._dynamicOverlays[t];o+=n.render(i.startLineNumber,e)}return this._renderedContent!==o&&(this._renderedContent=o,n.appendString('<div style="position:absolute;top:'),n.appendString(String(t)),n.appendString("px;width:100%;height:"),n.appendString(String(this._lineHeight)),n.appendString('px;">'),n.appendString(o),n.appendString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}};let ContentViewOverlays=class ContentViewOverlays extends ViewOverlays{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(144);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}};let MarginViewOverlays=class MarginViewOverlays extends ViewOverlays{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(144);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,C.N)(this.domNode,t.get(50))}onConfigurationChanged(e){let t=this._context.configuration.options;(0,C.N)(this.domNode,t.get(50));let i=t.get(144);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}};let ViewUserInputEvents=class ViewUserInputEvents{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;null===(t=this.onKeyDown)||void 0===t||t.call(this,e)}emitKeyUp(e){var t;null===(t=this.onKeyUp)||void 0===t||t.call(this,e)}emitContextMenu(e){var t;null===(t=this.onContextMenu)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;null===(t=this.onMouseMove)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;null===(t=this.onMouseLeave)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;null===(t=this.onMouseDown)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;null===(t=this.onMouseUp)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;null===(t=this.onMouseDrag)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;null===(t=this.onMouseDrop)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}emitMouseWheel(e){var t;null===(t=this.onMouseWheel)||void 0===t||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return ViewUserInputEvents.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){let i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(5===i.type||8===i.type)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new W.L(e.afterLineNumber,1)).lineNumber}}};i(87782);let BlockDecorations=class BlockDecorations extends ViewPart{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1,t=this._context.configuration.options,i=t.get(144),n=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);let o=i.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let i=0,n=e.getDecorationsInViewport();for(let o of n){let n,r;if(!o.options.blockClassName)continue;let s=this.blocks[i];s||(s=this.blocks[i]=(0,P.X)(document.createElement("div")),this.domNode.appendChild(s)),o.options.blockIsAfterEnd?(n=e.getVerticalOffsetAfterLineNumber(o.range.endLineNumber,!1),r=e.getVerticalOffsetAfterLineNumber(o.range.endLineNumber,!0)):(n=e.getVerticalOffsetForLineNumber(o.range.startLineNumber,!0),r=o.range.isEmpty()&&!o.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(o.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(o.range.endLineNumber,!0));let[l,d,c,u]=null!==(t=o.options.blockPadding)&&void 0!==t?t:[0,0,0,0];s.setClassName("blockDecorations-block "+o.options.blockClassName),s.setLeft(this.contentLeft-u),s.setWidth(this.contentWidth+u+d),s.setTop(n-e.scrollTop-l),s.setHeight(r-n+l+c),i++}for(let e=i;e<this.blocks.length;e++)this.blocks[e].domNode.remove();this.blocks.length=i}};let ViewContentWidgets=class ViewContentWidgets extends ViewPart{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){let e=Object.keys(this._widgets);for(let t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){let t=new Widget(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,o){let r=this._widgets[e.getId()];r.setPosition(t,i,n,o),this.setShouldRender()}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let e=this._widgets[t];delete this._widgets[t];let i=e.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].prepareRender(e)}render(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].render(e)}};let Widget=class Widget{constructor(e,t,i){this._primaryAnchor=new PositionPair(null,null),this._secondaryAnchor=new PositionPair(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=(0,P.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let n=this._context.configuration.options,o=n.get(144);this._fixedOverflowWidgets=n.get(42),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=n.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){let t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(144)){let e=t.get(144);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){function getValidPositionPair(e,t,i){if(!e)return new PositionPair(null,null);let n=t.model.validatePosition(e);if(t.coordinatesConverter.modelPositionIsVisible(n)){let o=t.coordinatesConverter.convertModelPositionToViewPosition(n,null!=i?i:void 0);return new PositionPair(e,o)}return new PositionPair(e,null)}this._affinity=e,this._primaryAnchor=getValidPositionPair(t,this._context.viewModel,this._affinity),this._secondaryAnchor=getValidPositionPair(i,this._context.viewModel,this._affinity)}_getMaxWidth(){let e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(null==t?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){let o=e.top,r=e.top+e.height,s=n.viewportHeight-r,l=e.left;return l+t>n.scrollLeft+n.viewportWidth&&(l=n.scrollLeft+n.viewportWidth-t),l<n.scrollLeft&&(l=n.scrollLeft),{fitsAbove:o>=i,aboveTop:o-i,fitsBelow:s>=i,belowTop:r,left:l}}_layoutHorizontalSegmentInPage(e,t,i,n){var o;let r=Math.max(15,t.left-n),s=Math.min(t.left+t.width+n,e.width-15),l=this._viewDomNode.domNode.ownerDocument,d=l.defaultView,c=t.left+i-(null!==(o=null==d?void 0:d.scrollX)&&void 0!==o?o:0);if(c+n>s){let e=c-(s-n);c-=e,i-=e}if(c<r){let e=c-r;c-=e,i-=e}return[i,c]}_layoutBoxInPage(e,t,i,n){var o,r;let s=e.top-i,l=e.top+e.height,d=g.i(this._viewDomNode.domNode),c=this._viewDomNode.domNode.ownerDocument,u=c.defaultView,m=d.top+s-(null!==(o=null==u?void 0:u.scrollY)&&void 0!==o?o:0),f=d.top+l-(null!==(r=null==u?void 0:u.scrollY)&&void 0!==r?r:0),_=g.D6(c.body),[v,C]=this._layoutHorizontalSegmentInPage(_,d,e.left-n.scrollLeft+this._contentLeft,t),b=m>=22,S=f+i<=_.height-22;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(m,22),fitsBelow:S,belowTop:f,left:C}:{fitsAbove:b,aboveTop:s,fitsBelow:S,belowTop:l,left:v}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Coordinate(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,i;let n=getCoordinates(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),o=(null===(t=this._secondaryAnchor.viewPosition)||void 0===t?void 0:t.lineNumber)===(null===(i=this._primaryAnchor.viewPosition)||void 0===i?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,r=getCoordinates(o,this._affinity,this._lineHeight);return{primary:n,secondary:r};function getCoordinates(t,i,n){if(!t)return null;let o=e.visibleRangeForPosition(t);if(!o)return null;let r=1===t.column&&3===i?0:o.left,s=e.getVerticalOffsetForLineNumber(t.lineNumber)-e.scrollTop;return new AnchorCoordinate(s,r,n)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;let n=this._context.configuration.options.get(50),o=t.left;return o=o<e.left?Math.max(o,e.left-i+n.typicalFullwidthCharacterWidth):Math.min(o,e.left+i-n.typicalFullwidthCharacterWidth),new AnchorCoordinate(e.top,o,e.height)}_prepareRenderWidget(e){let t;if(!this._preference||0===this._preference.length)return null;let{primary:i,secondary:n}=this._getAnchorsCoordinates(e);if(!i)return null;if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){let e=null;if("function"==typeof this._actual.beforeRender&&(e=safeInvoke(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeOffsetWidth=e.width,this._cachedDomNodeOffsetHeight=e.height;else{let e=this.domNode.domNode,t=e.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(t.width),this._cachedDomNodeOffsetHeight=Math.round(t.height)}}let o=this._reduceAnchorCoordinates(i,n,this._cachedDomNodeOffsetWidth);t=this.allowEditorOverflow?this._layoutBoxInPage(o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let e=1;e<=2;e++)for(let i of this._preference)if(1===i){if(!t)return null;if(2===e||t.fitsAbove)return{coordinate:new Coordinate(t.aboveTop,t.left),position:1}}else if(2===i){if(!t)return null;if(2===e||t.fitsBelow)return{coordinate:new Coordinate(t.belowTop,t.left),position:2}}else{if(this.allowEditorOverflow)return{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Coordinate(o.top,o.left)),position:0};return{coordinate:new Coordinate(o.top,o.left),position:0}}return null}onBeforeRender(e){this._primaryAnchor.viewPosition&&this._preference&&!(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber)&&!(this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber)&&this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),"function"==typeof this._actual.afterRender&&safeInvoke(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?this.domNode.setTop(this._renderData.coordinate.top):this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"==typeof this._actual.afterRender&&safeInvoke(this._actual.afterRender,this._actual,this._renderData.position)}};let PositionPair=class PositionPair{constructor(e,t){this.modelPosition=e,this.viewPosition=t}};let Coordinate=class Coordinate{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}};let AnchorCoordinate=class AnchorCoordinate{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}};function safeInvoke(e,t,...i){try{return e.call(t,...i)}catch(e){return null}}i(79709);var ef=i(21799);let AbstractLineHighlightOverlay=class AbstractLineHighlightOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e;let t=this._context.configuration.options,i=t.get(144);this._lineHeight=t.get(67),this._renderLineHighlight=t.get(96),this._renderLineHighlightOnlyWhenFocus=t.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Q.Y(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,t=new Set;for(let e of this._selections)t.add(e.positionLineNumber);let i=Array.from(t);i.sort((e,t)=>e-t),S.fS(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);let n=this._selections.every(e=>e.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._lineHeight=t.get(67),this._renderLineHighlight=t.get(96),this._renderLineHighlightOnlyWhenFocus=t.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let e=t;e<=i;e++){let i=e-t;n[i]=""}if(this._wordWrap){let o=this._renderOne(e,!1);for(let e of this._cursorLineNumbers){let r=this._context.viewModel.coordinatesConverter,s=r.convertViewPositionToModelPosition(new W.L(e,1)).lineNumber,l=r.convertModelPositionToViewPosition(new W.L(s,1)).lineNumber,d=r.convertModelPositionToViewPosition(new W.L(s,this._context.viewModel.model.getLineMaxColumn(s))).lineNumber,c=Math.max(l,t),u=Math.min(d,i);for(let e=c;e<=u;e++){let i=e-t;n[i]=o}}}let o=this._renderOne(e,!0);for(let e of this._cursorLineNumbers){if(e<t||e>i)continue;let r=e-t;n[r]=o}this._renderData=n}render(e,t){if(!this._renderData)return"";let i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}};let CurrentLineHighlightOverlay=class CurrentLineHighlightOverlay extends AbstractLineHighlightOverlay{_renderOne(e,t){let i="current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"");return`<div class="${i}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}};let CurrentLineMarginHighlightOverlay=class CurrentLineMarginHighlightOverlay extends AbstractLineHighlightOverlay{_renderOne(e,t){let i="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"");return`<div class="${i}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}};(0,et.Ic)((e,t)=>{let i=e.getColor(ei.Kh);if(i&&(t.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${i}; border: none; }`)),!i||i.isTransparent()||e.defines(ei.Mm)){let i=e.getColor(ei.Mm);i&&(t.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),(0,ef.c3)(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}),i(24797);let DecorationsOverlay=class DecorationsOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let e=0,o=t.length;e<o;e++){let o=t[e];o.options.className&&(i[n++]=o)}i=i.sort((e,t)=>{if(e.options.zIndex<t.options.zIndex)return -1;if(e.options.zIndex>t.options.zIndex)return 1;let i=e.options.className,n=t.options.className;return i<n?-1:i>n?1:V.e.compareRangesUsingStarts(e.range,t.range)});let o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,s=[];for(let e=o;e<=r;e++){let t=e-o;s[t]=""}this._renderWholeLineDecorations(e,i,s),this._renderNormalDecorations(e,i,s),this._renderResult=s}_renderWholeLineDecorations(e,t,i){let n=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(!s.options.isWholeLine)continue;let l='<div class="cdr '+s.options.className+'" style="left:0;width:100%;height:'+n+'px;"></div>',d=Math.max(s.range.startLineNumber,o),c=Math.min(s.range.endLineNumber,r);for(let e=d;e<=c;e++){let t=e-o;i[t]+=l}}}_renderNormalDecorations(e,t,i){var n;let o=String(this._lineHeight),r=e.visibleRange.startLineNumber,s=null,l=!1,d=null,c=!1;for(let u=0,g=t.length;u<g;u++){let g=t[u];if(g.options.isWholeLine)continue;let m=g.options.className,f=!!g.options.showIfCollapsed,_=g.range;if(f&&1===_.endColumn&&_.endLineNumber!==_.startLineNumber&&(_=new V.e(_.startLineNumber,_.startColumn,_.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_.endLineNumber-1))),s===m&&l===f&&V.e.areIntersectingOrTouching(d,_)){d=V.e.plusRange(d,_);continue}null!==s&&this._renderNormalDecoration(e,d,s,c,l,o,r,i),s=m,l=f,d=_,c=null!==(n=g.options.shouldFillLineOnLineBreak)&&void 0!==n&&n}null!==s&&this._renderNormalDecoration(e,d,s,c,l,o,r,i)}_renderNormalDecoration(e,t,i,n,o,r,s,l){let d=e.linesVisibleRangesForRange(t,"findMatch"===i);if(d)for(let e=0,t=d.length;e<t;e++){let t=d[e];if(t.outsideRenderedLine)continue;let c=t.lineNumber-s;if(o&&1===t.ranges.length){let e=t.ranges[0];if(e.width<this._typicalHalfwidthCharacterWidth){let i=Math.round(e.left+e.width/2),n=Math.max(0,Math.round(i-this._typicalHalfwidthCharacterWidth/2));t.ranges[0]=new eu.yu(n,this._typicalHalfwidthCharacterWidth)}}for(let e=0,o=t.ranges.length;e<o;e++){let s=n&&t.continuesOnNextLine&&1===o,d=t.ranges[e],u='<div class="cdr '+i+'" style="left:'+String(d.left)+(s?"px;width:100%;height:":"px;width:"+String(d.width)+"px;height:")+r+'px;"></div>';l[c]+=u}}}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};let EditorScrollbar=class EditorScrollbar extends ViewPart{constructor(e,t,i,n){super(e);let o=this._context.configuration.options,r=o.get(103),s=o.get(75),l=o.get(40),d=o.get(106),c={listenOnDomNode:i.domNode,className:"editor-scrollable "+(0,et.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:s,fastScrollSensitivity:l,scrollPredominantAxis:d,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new Z.$Z(t.domNode,c,this._context.viewLayout.getScrollable())),PartFingerprints.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=(0,P.X)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let onBrowserDesperateReveal=(e,t,i)=>{let n={};if(t){let t=e.scrollTop;t&&(n.scrollTop=this._context.viewLayout.getCurrentScrollTop()+t,e.scrollTop=0)}if(i){let t=e.scrollLeft;t&&(n.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+t,e.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(n,1)};this._register(g.nm(i.domNode,"scroll",e=>onBrowserDesperateReveal(i.domNode,!0,!0))),this._register(g.nm(t.domNode,"scroll",e=>onBrowserDesperateReveal(t.domNode,!0,!1))),this._register(g.nm(n.domNode,"scroll",e=>onBrowserDesperateReveal(n.domNode,!0,!1))),this._register(g.nm(this.scrollbarDomNode.domNode,"scroll",e=>onBrowserDesperateReveal(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,t=e.get(144);this.scrollbarDomNode.setLeft(t.contentLeft);let i=e.get(73),n=i.side;"right"===n?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(103)||e.hasChanged(75)||e.hasChanged(40)){let e=this._context.configuration.options,t=e.get(103),i=e.get(75),n=e.get(40),o=e.get(106),r={vertical:t.vertical,horizontal:t.horizontal,verticalScrollbarSize:t.verticalScrollbarSize,horizontalScrollbarSize:t.horizontalScrollbarSize,scrollByPage:t.scrollByPage,handleMouseWheel:t.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:n,scrollPredominantAxis:o};this.scrollbar.updateOptions(r)}return e.hasChanged(144)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,et.m6)(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}};i(85736);var e_=i(86809);let DecorationToRender=class DecorationToRender{constructor(e,t,i,n,o){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=null!=o?o:0}};let LineDecorationToRender=class LineDecorationToRender{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}};let VisibleLineDecorationsToRender=class VisibleLineDecorationsToRender{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}};let DedupOverlay=class DedupOverlay extends DynamicViewOverlay{_render(e,t,i){let n=[];for(let i=e;i<=t;i++){let t=i-e;n[t]=new VisibleLineDecorationsToRender}if(0===i.length)return n;i.sort((e,t)=>e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1);let o=null,r=0;for(let s=0,l=i.length;s<l;s++){let l=i[s],d=l.className,c=l.zIndex,u=Math.max(l.startLineNumber,e)-e,g=Math.min(l.endLineNumber,t)-e;o===d?(u=Math.max(r+1,u),r=Math.max(r,g)):(o=d,r=g);for(let e=u;e<=r;e++)n[e].add(new LineDecorationToRender(d,c,l.tooltip))}return n}};let GlyphMarginWidgets=class GlyphMarginWidgets extends ViewPart{constructor(e){super(e),this._widgets={},this._context=e;let t=this._context.configuration.options,i=t.get(144);this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){let t=(0,P.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){let i=this._widgets[e.getId()];return!(i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&V.e.equalsRange(i.preference.range,t.range))&&(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;let i=e.getId();if(this._widgets[i]){let e=this._widgets[i],n=e.domNode.domNode;delete this._widgets[i],null===(t=n.parentNode)||void 0===t||t.removeChild(n),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var i,n,o;let r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,l=e.getDecorationsInViewport();for(let e of l){let l=e.options.glyphMarginClassName;if(!l)continue;let d=Math.max(e.range.startLineNumber,r),c=Math.min(e.range.endLineNumber,s),u=null!==(n=null===(i=e.options.glyphMargin)||void 0===i?void 0:i.position)&&void 0!==n?n:e_.U.Center,g=null!==(o=e.options.zIndex)&&void 0!==o?o:0;for(let e=d;e<=c;e++){let i=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W.L(e,0)),n=this._context.viewModel.glyphLanes.getLanesAtLine(i.lineNumber).indexOf(u);t.push(new DecorationBasedGlyphRenderRequest(e,n,g,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){let i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let e of Object.values(this._widgets)){let o=e.preference.range,{startLineNumber:r,endLineNumber:s}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(V.e.lift(o));if(!r||!s||s<i||r>n)continue;let l=Math.max(r,i),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W.L(l,0)),c=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(e.preference.lane);t.push(new WidgetBasedGlyphRenderRequest(l,c,e.preference.zIndex,e))}}_collectSortedGlyphRenderRequests(e){let t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((e,t)=>{if(e.lineNumber===t.lineNumber){if(e.laneIndex===t.laneIndex)return e.zIndex===t.zIndex?t.type===e.type?0===e.type&&0===t.type?e.className<t.className?-1:1:0:t.type-e.type:t.zIndex-e.zIndex;return e.laneIndex-t.laneIndex}return e.lineNumber-t.lineNumber}),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(let e of Object.values(this._widgets))e.renderInfo=null;let t=new S.H9(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){let e=t.peek();if(!e)break;let n=t.takeWhile(t=>t.lineNumber===e.lineNumber&&t.laneIndex===e.laneIndex);if(!n||0===n.length)break;let o=n[0];if(0===o.type){let e=[];for(let t of n){if(t.zIndex!==o.zIndex||t.type!==o.type)break;(0===e.length||e[e.length-1]!==t.className)&&e.push(t.className)}i.push(o.accept(e.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(let e of Object.values(this._widgets))e.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){let e=this._managedDomNodes.pop();null==e||e.domNode.remove()}return}let t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(let i of Object.values(this._widgets))if(i.renderInfo){let n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(o),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}else i.domNode.setDisplay("none");for(let i=0;i<this._decorationGlyphsToRender.length;i++){let n;let o=this._decorationGlyphsToRender[i],r=e.viewportData.relativeVerticalOffset[o.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+o.laneIndex*this._lineHeight;i<this._managedDomNodes.length?n=this._managedDomNodes[i]:(n=(0,P.X)(document.createElement("div")),this._managedDomNodes.push(n),this.domNode.appendChild(n)),n.setClassName("cgmr codicon "+o.combinedClassName),n.setPosition("absolute"),n.setTop(r),n.setLeft(s),n.setWidth(t),n.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){let e=this._managedDomNodes.pop();null==e||e.domNode.remove()}}};let DecorationBasedGlyphRenderRequest=class DecorationBasedGlyphRenderRequest{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}accept(e){return new DecorationBasedGlyph(this.lineNumber,this.laneIndex,e)}};let WidgetBasedGlyphRenderRequest=class WidgetBasedGlyphRenderRequest{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}};let DecorationBasedGlyph=class DecorationBasedGlyph{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}};i(76141);var ev=i(16877),eC=i(21378),eb=i(66850);let IndentGuidesOverlay=class IndentGuidesOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._primaryPosition=null;let t=this._context.configuration.options,i=t.get(145),n=t.get(50);this._lineHeight=t.get(67),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(145),n=t.get(50);return this._lineHeight=t.get(67),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var t;let i=e.selections[0],n=i.getPosition();return(null===(t=this._primaryPosition)||void 0===t||!t.equals(n))&&(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,n,o;if(!this._bracketPairGuideOptions.indentation&&!1===this._bracketPairGuideOptions.bracketPairs){this._renderResult=null;return}let r=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,l=e.scrollWidth,d=this._lineHeight,c=this._primaryPosition,u=this.getGuidesByLine(r,Math.min(s+1,this._context.viewModel.getLineCount()),c),g=[];for(let c=r;c<=s;c++){let s=c-r,m=u[s],f="",_=null!==(i=null===(t=e.visibleRangeForPosition(new W.L(c,1)))||void 0===t?void 0:t.left)&&void 0!==i?i:0;for(let t of m){let i=-1===t.column?_+(t.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new W.L(c,t.column)).left;if(i>l||this._maxIndentLeft>0&&i>this._maxIndentLeft)break;let r=t.horizontalLine?t.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",s=t.horizontalLine?(null!==(o=null===(n=e.visibleRangeForPosition(new W.L(c,t.horizontalLine.endColumn)))||void 0===n?void 0:n.left)&&void 0!==o?o:i+this._spaceWidth)-i:this._spaceWidth;f+=`<div class="core-guide ${t.className} ${r}" style="left:${i}px;height:${d}px;width:${s}px"></div>`}g[s]=f}this._renderResult=g}getGuidesByLine(e,t,i){let n=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?eb.s6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?eb.s6.EnabledForActive:eb.s6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,r=0,s=0,l=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&i){let n=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=n.startLineNumber,s=n.endLineNumber,l=n.indent}let{indentSize:d}=this._context.viewModel.model.getOptions(),c=[];for(let i=e;i<=t;i++){let t=[];c.push(t);let u=n?n[i-e]:[],g=new S.H9(u),m=o?o[i-e]:0;for(let e=1;e<=m;e++){let n=(e-1)*d+1,o=("always"===this._bracketPairGuideOptions.highlightActiveIndentation||0===u.length)&&r<=i&&i<=s&&e===l;t.push(...g.takeWhile(e=>e.visibleColumn<n)||[]);let c=g.peek();(!c||c.visibleColumn!==n||c.horizontalLine)&&t.push(new eb.UO(n,-1,`core-guide-indent lvl-${(e-1)%30}`+(o?" indent-active":""),null,-1,-1))}t.push(...g.takeWhile(e=>!0)||[])}return c}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};function transparentToUndefined(e){if(!(e&&e.isTransparent()))return e}(0,et.Ic)((e,t)=>{let i=[{bracketColor:ei.zJ,guideColor:ei.oV,guideColorActive:ei.Qb},{bracketColor:ei.Vs,guideColor:ei.m$,guideColorActive:ei.m3},{bracketColor:ei.CE,guideColor:ei.DS,guideColorActive:ei.To},{bracketColor:ei.UP,guideColor:ei.lS,guideColorActive:ei.L7},{bracketColor:ei.r0,guideColor:ei.Jn,guideColorActive:ei.HV},{bracketColor:ei.m1,guideColor:ei.YF,guideColorActive:ei.f9}],n=new eC.W,o=[{indentColor:ei.gS,indentColorActive:ei.qe},{indentColor:ei.Tf,indentColorActive:ei.Xy},{indentColor:ei.H_,indentColorActive:ei.cK},{indentColor:ei.h1,indentColorActive:ei.N8},{indentColor:ei.vP,indentColorActive:ei.zd},{indentColor:ei.e9,indentColorActive:ei.ll}],r=i.map(t=>{var i,n;let o=e.getColor(t.bracketColor),r=e.getColor(t.guideColor),s=e.getColor(t.guideColorActive),l=transparentToUndefined(null!==(i=transparentToUndefined(r))&&void 0!==i?i:null==o?void 0:o.transparent(.3)),d=transparentToUndefined(null!==(n=transparentToUndefined(s))&&void 0!==n?n:o);if(l&&d)return{guideColor:l,guideColorActive:d}}).filter(ev.$K),s=o.map(t=>{let i=e.getColor(t.indentColor),n=e.getColor(t.indentColorActive),o=transparentToUndefined(i),r=transparentToUndefined(n);if(o&&r)return{indentColor:o,indentColorActive:r}}).filter(ev.$K);if(r.length>0){for(let e=0;e<30;e++){let i=r[e%r.length];t.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(e).replace(/ /g,".")} { --guide-color: ${i.guideColor}; --guide-color-active: ${i.guideColorActive}; }`)}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),t.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),t.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(s.length>0){for(let e=0;e<30;e++){let i=s[e%s.length];t.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${e} { --indent-color: ${i.indentColor}; --indent-color-active: ${i.indentColorActive}; }`)}t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),t.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});var eS=i(66614);i(97591);let DomReadingContext=class DomReadingContext{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;let e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}};let LastRenderedData=class LastRenderedData{constructor(){this._currentVisibleRange=new V.e(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}};let HorizontalRevealRangeRequest=class HorizontalRevealRangeRequest{constructor(e,t,i,n,o,r,s){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=s,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}};let HorizontalRevealSelectionsRequest=class HorizontalRevealSelectionsRequest{constructor(e,t,i,n,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,s=t[0].endLineNumber;for(let e=1,i=t.length;e<i;e++){let i=t[e];r=Math.min(r,i.startLineNumber),s=Math.max(s,i.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=s}};let ViewLines=class ViewLines extends ViewPart{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode;let i=this._context.configuration,n=this._context.configuration.options,o=n.get(50),r=n.get(145);this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=n.get(100),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._viewLineOptions=new B.ob(i,this._context.theme.type),PartFingerprints.write(this.domNode,8),this.domNode.setClassName(`view-lines ${eo}`),(0,C.N)(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new eS.pY(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new eS.pY(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new LastRenderedData,this._horizontalRevealRequest=null,this._stickyScrollEnabled=n.get(115).enabled,this._maxNumberStickyLines=n.get(115).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new B.Nt(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(145)&&(this._maxLineWidth=0);let t=this._context.configuration.options,i=t.get(50),n=t.get(145);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(100),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(115).enabled,this._maxNumberStickyLines=t.get(115).maxLineCount,(0,C.N)(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(144)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,t=new B.ob(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;let e=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let t=e;t<=i;t++){let e=this._visibleLines.getVisibleLine(t);e.onOptionsChanged(this._viewLineOptions)}return!0}return!1}onCursorStateChanged(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=!1;for(let e=t;e<=i;e++)n=this._visibleLines.getVisibleLine(e).onSelectionChanged()||n;return n}onDecorationsChanged(e){{let e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){let t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new HorizontalRevealRangeRequest(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new HorizontalRevealSelectionsRequest(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop),o=n<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){let i=this._getViewLineDomNode(e);if(null===i)return null;let n=this._getLineNumberFor(i);if(-1===n||n<1||n>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(n))return new W.L(n,1);let o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<o||n>r)return null;let s=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t),l=this._context.viewModel.getLineMinColumn(n);return s<l&&(s=l),new W.L(n,s)}_getViewLineDomNode(e){for(;e&&1===e.nodeType;){if(e.className===B.Nt.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){let t=this._visibleLines.getVisibleLine(n);if(e===t.getDomNode())return n}return -1}getLineWidth(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return -1;let n=new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;let i=e.endLineNumber,n=V.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;let o=[],r=0,s=new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot),l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W.L(n.startLineNumber,1)).lineNumber);let d=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let e=n.startLineNumber;e<=n.endLineNumber;e++){if(e<d||e>c)continue;let u=e===n.startLineNumber?n.startColumn:1,g=e!==n.endLineNumber,m=g?this._context.viewModel.getLineMaxColumn(e):n.endColumn,f=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,u,m,s);if(f){if(t&&e<i){let t=l;t!==(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W.L(e+1,1)).lineNumber)&&(f.ranges[f.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new eu.u7(f.outsideRenderedLine,e,eu.yu.from(f.ranges),g)}}return(this._updateLineWidthsSlowIfDomDidLayout(s),0===r)?null:o}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;let n=new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),o}visibleRangeForPosition(e){let t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new eu.D4(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){!e.didDomLayout||this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow())}_updateLineWidths(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=1,o=!0;for(let r=t;r<=i;r++){let t=this._visibleLines.getVisibleLine(r);if(e&&!t.getWidthIsFast()){o=!1;continue}n=Math.max(n,t.getWidth(null))}return o&&1===t&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1,i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++){let i=this._visibleLines.getVisibleLine(o);if(i.needsMonospaceFontCheck()){let n=i.getWidth(null);n>t&&(t=n,e=o)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let e=i;e<=n;e++){let t=this._visibleLines.getVisibleLine(e);t.onMonospaceAssumptionsInvalidated()}}prepareRender(){throw Error("Not supported")}render(){throw Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let e=this._computeScrollLeftToReveal(t);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),w.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++){let e=this._visibleLines.getVisibleLine(i);if(e.needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,o,r){let s,l,d,c;let u=e.top,g=e.height,m=u+g;if(o&&o.length>0){let e=o[0].startLineNumber,t=o[0].endLineNumber;for(let i=1,n=o.length;i<n;i++){let n=o[i];e=Math.min(e,n.startLineNumber),t=Math.max(t,n.endLineNumber)}s=!1,l=this._context.viewLayout.getVerticalOffsetForLineNumber(e),d=this._context.viewLayout.getVerticalOffsetForLineNumber(t)+this._lineHeight}else{if(!n)return -1;s=!0,l=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),d=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight}let f=("mouse"===t||i)&&"default"===this._cursorSurroundingLinesStyle,_=0,v=0;if(f)i||(_=this._lineHeight);else{let e=Math.min(g/this._lineHeight/2,this._cursorSurroundingLines);_=this._stickyScrollEnabled?Math.max(e,this._maxNumberStickyLines)*this._lineHeight:e*this._lineHeight,v=Math.max(0,e-1)*this._lineHeight}if(i||0!==r&&4!==r||(v+=this._lineHeight),l-=_,(d+=v)-l>g){if(!s)return -1;c=l}else if(5===r||6===r){if(6===r&&u<=l&&d<=m)c=u;else{let e=Math.max(5*this._lineHeight,.2*g),t=l-e,i=d-g;c=Math.max(i,t)}}else if(1===r||2===r){if(2===r&&u<=l&&d<=m)c=u;else{let e=(l+d)/2;c=Math.max(0,e-g/2)}}else c=this._computeMinimumScrolling(u,m,l,d,3===r,4===r);return c}_computeScrollLeftToReveal(e){let t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(144),n=t.left,o=n+t.width-i.verticalScrollbarWidth,r=1073741824,s=0;if("range"===e.type){let t=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!t)return null;for(let e of t.ranges)r=Math.min(r,Math.round(e.left)),s=Math.max(s,Math.round(e.left+e.width))}else for(let t of e.selections){if(t.startLineNumber!==t.endLineNumber)return null;let e=this._visibleRangesForLineRange(t.startLineNumber,t.startColumn,t.endColumn);if(!e)return null;for(let t of e.ranges)r=Math.min(r,Math.round(t.left)),s=Math.max(s,Math.round(t.left+t.width))}if(e.minimalReveal||(r=Math.max(0,r-ViewLines.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding),"selections"===e.type&&s-r>t.width)return null;let l=this._computeMinimumScrolling(n,o,r,s);return{scrollLeft:l,maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,i,n,o,r){e|=0,t|=0,i|=0,n|=0,o=!!o,r=!!r;let s=t-e,l=n-i;return!(l<s)||o?i:r?Math.max(0,n-s):i<e?i:n>t?Math.max(0,n-s):e}};ViewLines.HORIZONTAL_EXTRA_PX=30,i(57992);let LinesDecorationsOverlay=class LinesDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e;let t=this._context.configuration.options,i=t.get(144);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){var t,i;let n=e.getDecorationsInViewport(),o=[],r=0;for(let e=0,s=n.length;e<s;e++){let s=n[e],l=s.options.linesDecorationsClassName,d=s.options.zIndex;l&&(o[r++]=new DecorationToRender(s.range.startLineNumber,s.range.endLineNumber,l,null!==(t=s.options.linesDecorationsTooltip)&&void 0!==t?t:null,d));let c=s.options.firstLineDecorationClassName;c&&(o[r++]=new DecorationToRender(s.range.startLineNumber,s.range.startLineNumber,c,null!==(i=s.options.linesDecorationsTooltip)&&void 0!==i?i:null,d))}return o}prepareRender(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),s='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let e=t;e<=i;e++){let i=e-t,o=n[i].getDecorations(),r="";for(let e of o){let t='<div class="cldr '+e.className;null!==e.tooltip&&(t+='" title="'+e.tooltip),t+=s,r+=t}l[i]=r}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};i(81038);let MarginViewLineDecorationsOverlay=class MarginViewLineDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let e=0,o=t.length;e<o;e++){let o=t[e],r=o.options.marginClassName,s=o.options.zIndex;r&&(i[n++]=new DecorationToRender(o.range.startLineNumber,o.range.endLineNumber,r,null,s))}return i}prepareRender(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=[];for(let e=t;e<=i;e++){let i=e-t,r=n[i].getDecorations(),s="";for(let e of r)s+='<div class="cmdr '+e.className+'" style=""></div>';o[i]=s}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};i(13901);var ey=i(14046);let RGBA8=class RGBA8{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=RGBA8._clamp(e),this.g=RGBA8._clamp(t),this.b=RGBA8._clamp(i),this.a=RGBA8._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}};RGBA8.Empty=new RGBA8(0,0,0,0);let MinimapTokensColorTracker=class MinimapTokensColorTracker extends _.JT{static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,_.dk)(new MinimapTokensColorTracker)),this._INSTANCE}constructor(){super(),this._onDidChange=new f.Q5,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(er.RW.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){let e=er.RW.getColorMap();if(!e){this._colors=[RGBA8.Empty],this._backgroundIsLight=!0;return}this._colors=[RGBA8.Empty];for(let t=1;t<e.length;t++){let i=e[t].rgba;this._colors[t]=new RGBA8(i.r,i.g,i.b,Math.round(255*i.a))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};MinimapTokensColorTracker._INSTANCE=null;var ew=i(50263),eL=i(45815);let ek=(()=>{let e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})(),getCharIndex=(e,t)=>(e-=32)<0||e>96?t<=2?(e+96)%96:95:e;var eD=i(30800);let MinimapCharRenderer=class MinimapCharRenderer{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=MinimapCharRenderer.soften(e,.8),this.charDataLight=MinimapCharRenderer.soften(e,50/60)}static soften(e,t){let i=new Uint8ClampedArray(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=(0,eD.K)(e[n]*t);return i}renderChar(e,t,i,n,o,r,s,l,d,c,u){let g=1*this.scale,m=2*this.scale,f=u?1:m;if(t+g>e.width||i+f>e.height){console.warn("bad render request outside image data");return}let _=c?this.charDataLight:this.charDataNormal,v=getCharIndex(n,d),C=4*e.width,b=s.r,S=s.g,y=s.b,w=o.r-b,L=o.g-S,k=o.b-y,D=Math.max(r,l),x=e.data,N=v*g*m,E=i*C+4*t;for(let e=0;e<f;e++){let e=E;for(let t=0;t<g;t++){let t=_[N++]/255*(r/255);x[e++]=b+w*t,x[e++]=S+L*t,x[e++]=y+k*t,x[e++]=D}E+=C}}blockRenderChar(e,t,i,n,o,r,s,l){let d=1*this.scale,c=2*this.scale,u=l?1:c;if(t+d>e.width||i+u>e.height){console.warn("bad render request outside image data");return}let g=4*e.width,m=.5*(o/255),f=r.r,_=r.g,v=r.b,C=n.r-f,b=n.g-_,S=n.b-v,y=f+C*m,w=_+b*m,L=v+S*m,k=Math.max(o,s),D=e.data,x=i*g+4*t;for(let e=0;e<u;e++){let e=x;for(let t=0;t<d;t++)D[e++]=y,D[e++]=w,D[e++]=L,D[e++]=k;x+=g}}};var ex=i(61080);let eN={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},decodeData=e=>{let t=new Uint8ClampedArray(e.length/2);for(let i=0;i<e.length;i+=2)t[i>>1]=eN[e[i]]<<4|15&eN[e[i+1]];return t},eE={1:(0,ex.M)(()=>decodeData("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:(0,ex.M)(()=>decodeData("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};let MinimapCharRendererFactory=class MinimapCharRendererFactory{static create(e,t){let i;return this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily?this.lastCreated:(i=eE[e]?new MinimapCharRenderer(eE[e](),e):MinimapCharRendererFactory.createFromSampleData(MinimapCharRendererFactory.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i)}static createSampleData(e){let t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(let e of ek)i.fillText(String.fromCharCode(e),n,8),n+=10;return i.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(61440!==e.length)throw Error("Unexpected source in MinimapCharRenderer");let i=MinimapCharRendererFactory._downsample(e,t);return new MinimapCharRenderer(i,t)}static _downsampleChar(e,t,i,n,o){let r=1*o,s=2*o,l=n,d=0;for(let n=0;n<s;n++){let o=n/s*16,c=(n+1)/s*16;for(let n=0;n<r;n++){let s=n/r*10,u=(n+1)/r*10,g=0,m=0;for(let i=o;i<c;i++){let n=t+3840*Math.floor(i),o=1-(i-Math.floor(i));for(let t=s;t<u;t++){let i=1-(t-Math.floor(t)),r=n+4*Math.floor(t),s=i*o;m+=s,g+=e[r]*e[r+3]/255*s}}let f=g/m;d=Math.max(d,f),i[l++]=(0,eD.K)(f)}}return d}static _downsample(e,t){let i=2*t*1*t,n=96*i,o=new Uint8ClampedArray(n),r=0,s=0,l=0;for(let n=0;n<96;n++)l=Math.max(l,this._downsampleChar(e,s,o,r,t)),r+=i,s+=40;if(l>0){let e=255/l;for(let t=0;t<n;t++)o[t]*=e}return o}};let MinimapOptions=class MinimapOptions{constructor(e,t,i){let n=e.options,o=n.get(142),r=n.get(144),s=r.minimap,l=n.get(50),d=n.get(73);this.renderMinimap=s.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=s.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(105),this.paddingTop=n.get(84).top,this.paddingBottom=n.get(84).bottom,this.showSlider=d.showSlider,this.autohide=d.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(67),this.minimapLeft=s.minimapLeft,this.minimapWidth=s.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=s.minimapCanvasInnerWidth,this.canvasInnerHeight=s.minimapCanvasInnerHeight,this.canvasOuterWidth=s.minimapCanvasOuterWidth,this.canvasOuterHeight=s.minimapCanvasOuterHeight,this.isSampling=s.minimapIsSampling,this.editorHeight=r.height,this.fontScale=s.minimapScale,this.minimapLineHeight=s.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,ex.M)(()=>MinimapCharRendererFactory.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=MinimapOptions._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=MinimapOptions._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){let i=e.getColor(eL.kVY);return i?new RGBA8(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){let t=e.getColor(eL.Itd);return t?RGBA8._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}};let MinimapLayout=class MinimapLayout{constructor(e,t,i,n,o,r,s,l,d){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=o,this.sliderHeight=r,this.topPaddingLineCount=s,this.startLineNumber=l,this.endLineNumber=d}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){let t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,o,r,s,l,d,c,u){let g,m;let f=e.pixelRatio,_=e.minimapLineHeight,v=Math.floor(e.canvasInnerHeight/_),C=e.lineHeight;if(e.minimapHeightIsEditorHeight){let t=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(t+=Math.max(0,o-e.lineHeight-e.paddingBottom));let i=Math.max(1,Math.floor(o*o/t)),n=Math.max(0,e.minimapHeight-i),r=n/(c-o),u=d*r,g=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),m=Math.floor(e.paddingTop/e.lineHeight);return new MinimapLayout(d,c,n>0,r,u,i,m,1,Math.min(s,g))}g=r&&i!==s?Math.floor((i-t+1)*_/f):Math.floor(o/C*_/f);let b=Math.floor(e.paddingTop/C),S=Math.floor(e.paddingBottom/C);e.scrollBeyondLastLine&&(S=Math.max(S,o/C-1)),m=S>0?(b+s+S-o/C-1)*_/f:Math.max(0,(b+s)*_/f-g),m=Math.min(e.minimapHeight-g,m);let y=m/(c-o),w=d*y;if(v>=b+s+S){let e=m>0;return new MinimapLayout(d,c,e,y,w,g,b,1,s)}{let i,o;let r=Math.max(1,Math.floor((t>1?t+b:Math.max(1,d/C))-w*f/_));r<b?(i=b-r+1,r=1):(i=0,r=Math.max(1,r-b)),u&&u.scrollHeight===c&&(u.scrollTop>d&&(r=Math.min(r,u.startLineNumber),i=Math.max(i,u.topPaddingLineCount)),u.scrollTop<d&&(r=Math.max(r,u.startLineNumber),i=Math.min(i,u.topPaddingLineCount)));let l=Math.min(s,r-i+v-1),m=(d-n)/C;return o=d>=e.paddingTop?(t-r+i+m)*_/f:d/e.paddingTop*(i+m)*_/f,new MinimapLayout(d,c,!0,y,o,g,i,r,l)}}};let MinimapLine=class MinimapLine{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};MinimapLine.INVALID=new MinimapLine(-1);let RenderData=class RenderData{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new RenderedLinesCollection(()=>MinimapLine.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;let t=this._renderedLines._get(),i=t.lines;for(let e=0,t=i.length;e<t;e++)if(-1===i[e].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}};let MinimapBuffers=class MinimapBuffers{constructor(e,t,i,n){this._backgroundFillData=MinimapBuffers._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){let n=i.r,o=i.g,r=i.b,s=i.a,l=new Uint8ClampedArray(e*t*4),d=0;for(let i=0;i<t;i++)for(let t=0;t<e;t++)l[d]=n,l[d+1]=o,l[d+2]=r,l[d+3]=s,d+=4;return l}};let MinimapSamplingState=class MinimapSamplingState{static compute(e,t,i){if(0===e.renderMinimap||!e.isSampling)return[null,[]];let{minimapLineCount:n}=N.gk.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/n,r=o/2;if(!i||0===i.minimapLines.length){let e=[];if(e[0]=1,n>1){for(let t=0,i=n-1;t<i;t++)e[t]=Math.round(t*o+r);e[n-1]=t}return[new MinimapSamplingState(o,e),[]]}let s=i.minimapLines,l=s.length,d=[],c=0,u=0,g=1,m=[],f=null;for(let e=0;e<n;e++){let i;let _=Math.max(g,Math.round(e*o)),v=Math.max(_,Math.round((e+1)*o));for(;c<l&&s[c]<_;){if(m.length<10){let e=c+1+u;f&&"deleted"===f.type&&f._oldIndex===c-1?f.deleteToLineNumber++:(f={type:"deleted",_oldIndex:c,deleteFromLineNumber:e,deleteToLineNumber:e},m.push(f)),u--}c++}if(c<l&&s[c]<=v)i=s[c],c++;else if(i=0===e?1:e+1===n?t:Math.round(e*o+r),m.length<10){let t=c+1+u;f&&"inserted"===f.type&&f._i===e-1?f.insertToLineNumber++:(f={type:"inserted",_i:e,insertFromLineNumber:t,insertToLineNumber:t},m.push(f)),u++}d[e]=i,g=i}if(m.length<10)for(;c<l;){let e=c+1+u;f&&"deleted"===f.type&&f._oldIndex===c-1?f.deleteToLineNumber++:(f={type:"deleted",_oldIndex:c,deleteFromLineNumber:e,deleteToLineNumber:e},m.push(f)),u--,c++}else m=[{type:"flush"}];return[new MinimapSamplingState(o,d),m]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){let n=this.minimapLines[i];if(n<e||n>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){let t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length,n=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),n=Math.max(n,o)):this.minimapLines[o]-=t;return[i,n]}onLinesInserted(e){let t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}};let Minimap=class Minimap extends ViewPart{constructor(e){super(e),this.tokensColorTracker=MinimapTokensColorTracker.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);let[t]=MinimapSamplingState.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new InnerMinimap(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(!this._samplingState)return this._actual.onLinesChanged(e.fromLineNumber,e.count);{let t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}}onLinesDeleted(e){if(!this._samplingState)return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber);{let[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(!this._samplingState)return this._actual.onTokensChanged(e.ranges);{let t=[];for(let i of e.ranges){let e=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!t.length&&this._actual.onTokensChanged(t)}}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));let n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;let e=!!this._samplingState,[t,i]=MinimapSamplingState.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(let e of i)switch(e.type){case"deleted":this._actual.onLinesDeleted(e.deleteFromLineNumber,e.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(e.insertFromLineNumber,e.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){let n=[];for(let o=0,r=t-e+1;o<r;o++)i[o]?n[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):n[o]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(null===this._minimapSelections){if(this._samplingState)for(let e of(this._minimapSelections=[],this._selections)){let[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Q.Y(t,e.startColumn,i,e.endColumn))}else this._minimapSelections=this._selections}return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){let n=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];i=new V.e(n,1,o,this._context.viewModel.getLineMaxColumn(o))}else i=new V.e(e,1,t,this._context.viewModel.getLineMaxColumn(t));let n=this._context.viewModel.getMinimapDecorationsInRange(i);if(this._samplingState){let e=[];for(let t of n){if(!t.options.minimap)continue;let i=t.range,n=this._samplingState.modelLineToMinimapLine(i.startLineNumber),o=this._samplingState.modelLineToMinimapLine(i.endLineNumber);e.push(new ew.$l(new V.e(n,i.startColumn,o,i.endColumn),t.options))}return e}return n}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new V.e(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}};let InnerMinimap=class InnerMinimap extends _.JT{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(eL.ov3),this._domNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,P.X)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,P.X)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,P.X)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,P.X)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,P.X)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=g.mu(this._domNode.domNode,g.tw.POINTER_DOWN,e=>{e.preventDefault();let t=this._model.options.renderMinimap;if(0===t||!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(0===e.button&&this._lastRenderData){let t=g.i(this._slider.domNode),i=t.top+t.height/2;this._startSliderDragging(e,i,this._lastRenderData.renderedLayout)}return}let i=this._model.options.minimapLineHeight,n=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.offsetY,o=Math.floor(n/i)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;o=Math.min(o,this._model.getLineCount()),this._model.revealLineNumber(o)}),this._sliderPointerMoveMonitor=new ey.C,this._sliderPointerDownListener=g.mu(this._slider.domNode,g.tw.POINTER_DOWN,e=>{e.preventDefault(),e.stopPropagation(),0===e.button&&this._lastRenderData&&this._startSliderDragging(e,e.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=j.o.addTarget(this._domNode.domNode),this._sliderTouchStartListener=g.nm(this._domNode.domNode,j.t.Start,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))},{passive:!1}),this._sliderTouchMoveListener=g.nm(this._domNode.domNode,j.t.Change,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)},{passive:!1}),this._sliderTouchEndListener=g.mu(this._domNode.domNode,j.t.End,e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;let n=e.pageX;this._slider.toggleClassName("active",!0);let handlePointerMove=(e,o)=>{let r=g.i(this._domNode.domNode),s=Math.min(Math.abs(o-n),Math.abs(o-r.left),Math.abs(o-r.left-r.width));if(w.ED&&s>140){this._model.setScrollTop(i.scrollTop);return}this._model.setScrollTop(i.getDesiredScrollTopFromDelta(e-t))};e.pageY!==t&&handlePointerMove(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>handlePointerMove(e.pageY,e.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){let t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){let e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return!this._buffers&&this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new MinimapBuffers(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}onLinesDeleted(e,t){var i;return null===(i=this._lastRenderData)||void 0===i||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return null===(i=this._lastRenderData)||void 0===i||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(eL.ov3),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){let t=this._model.options.renderMinimap;if(0===t){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");let i=MinimapLayout.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let t=this._model.getSelections();t.sort(V.e.compareRangesUsingStarts);let i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((e,t)=>(e.options.zIndex||0)-(t.options.zIndex||0));let{canvasInnerWidth:n,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,s=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,n,o);let c=new ContiguousLineMap(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,c,e,r),this._renderDecorationsLineHighlights(d,i,c,e,r);let u=new ContiguousLineMap(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,u,e,r,l,s,n),this._renderDecorationsHighlights(d,i,u,e,r,l,s,n)}}_renderSelectionLineHighlights(e,t,i,n,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,s=0;for(let l of t){let t=n.intersectWithViewport(l);if(!t)continue;let[d,c]=t;for(let e=d;e<=c;e++)i.set(e,!0);let u=n.getYForLineNumber(d,o),g=n.getYForLineNumber(c,o);s>=u||(s>r&&e.fillRect(N.y0,r,e.canvas.width,s-r),r=u),s=g}s>r&&e.fillRect(N.y0,r,e.canvas.width,s-r)}_renderDecorationsLineHighlights(e,t,i,n,o){let r=new Map;for(let s=t.length-1;s>=0;s--){let l=t[s],d=l.options.minimap;if(!d||d.position!==e_.F5.Inline)continue;let c=n.intersectWithViewport(l.range);if(!c)continue;let[u,g]=c,m=d.getColor(this._theme.value);if(!m||m.isTransparent())continue;let f=r.get(m.toString());f||(f=m.transparent(.5).toString(),r.set(m.toString(),f)),e.fillStyle=f;for(let t=u;t<=g;t++){if(i.has(t))continue;i.set(t,!0);let r=n.getYForLineNumber(u,o);e.fillRect(N.y0,r,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,n,o,r,s,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(let d of t){let t=n.intersectWithViewport(d);if(!t)continue;let[c,u]=t;for(let t=c;t<=u;t++)this.renderDecorationOnLine(e,i,d,this._selectionColor,n,t,o,o,r,s,l)}}_renderDecorationsHighlights(e,t,i,n,o,r,s,l){for(let d of t){let t=d.options.minimap;if(!t)continue;let c=n.intersectWithViewport(d.range);if(!c)continue;let[u,g]=c,m=t.getColor(this._theme.value);if(!(!m||m.isTransparent()))for(let c=u;c<=g;c++)switch(t.position){case e_.F5.Inline:this.renderDecorationOnLine(e,i,d.range,m,n,c,o,o,r,s,l);continue;case e_.F5.Gutter:{let t=n.getYForLineNumber(c,o);this.renderDecoration(e,m,2,t,2,o);continue}}}}renderDecorationOnLine(e,t,i,n,o,r,s,l,d,c,u){let g=o.getYForLineNumber(r,l);if(g+s<0||g>this._model.options.canvasInnerHeight)return;let{startLineNumber:m,endLineNumber:f}=i,_=m===r?i.startColumn:1,v=f===r?i.endColumn:this._model.getLineMaxColumn(r),C=this.getXOffsetForPosition(t,r,_,d,c,u),b=this.getXOffsetForPosition(t,r,v,d,c,u);this.renderDecoration(e,n,C,g,b-C,s)}getXOffsetForPosition(e,t,i,n,o,r){if(1===i)return N.y0;if((i-1)*o>=r)return r;let s=e.get(t);if(!s){let i=this._model.getLineContent(t);s=[N.y0];let l=N.y0;for(let e=1;e<i.length+1;e++){let t=i.charCodeAt(e-1),d=9===t?n*o:X.K7(t)?2*o:o,c=l+d;if(c>=r){s[e]=r;break}s[e]=c,l=c}e.set(t,s)}return i-1<s.length?s[i-1]:r}renderDecoration(e,t,i,n,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,o,r)}renderLines(e){let t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){let t=this._lastRenderData._get();return new RenderData(e,t.imageData,t.lines)}let o=this._getBuffer();if(!o)return null;let[r,s,l]=InnerMinimap._renderUntouchedLines(o,e.topPaddingLineCount,t,i,n,this._lastRenderData),d=this._model.getMinimapLinesRenderingData(t,i,l),c=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,f=this._model.tokensColorTracker,_=f.backgroundIsLight(),v=this._model.options.renderMinimap,C=this._model.options.charRenderer(),b=this._model.options.fontScale,S=this._model.options.minimapCharWidth,y=1===v?2:3,w=y*b,L=n>w?Math.floor((n-w)/2):0,k=g.a/255,D=new RGBA8(Math.round((g.r-u.r)*k+u.r),Math.round((g.g-u.g)*k+u.g),Math.round((g.b-u.b)*k+u.b),255),x=e.topPaddingLineCount*n,N=[];for(let e=0,r=i-t+1;e<r;e++)l[e]&&InnerMinimap._renderLine(o,D,g.a,_,v,S,f,m,C,x,L,c,d[e],b,n),N[e]=new MinimapLine(x),x+=n;let E=-1===r?0:r,I=-1===s?o.height:s,T=I-E,M=this._canvas.domNode.getContext("2d");return M.putImageData(o,0,0,0,E,o.width,T),new RenderData(e,o,N)}static _renderUntouchedLines(e,t,i,n,o,r){let s=[];if(!r){for(let e=0,t=n-i+1;e<t;e++)s[e]=!0;return[-1,-1,s]}let l=r._get(),d=l.imageData.data,c=l.rendLineNumberStart,u=l.lines,g=u.length,m=e.width,f=e.data,_=(n-i+1)*o*m*4,v=-1,C=-1,b=-1,S=-1,y=-1,w=-1,L=t*o;for(let e=i;e<=n;e++){let t=e-i,n=e-c,r=n>=0&&n<g?u[n].dy:-1;if(-1===r){s[t]=!0,L+=o;continue}let l=r*m*4,k=(r+o)*m*4,D=L*m*4,x=(L+o)*m*4;S===l&&w===D?S=k:(-1!==b&&(f.set(d.subarray(b,S),y),-1===v&&0===b&&b===y&&(v=S),-1===C&&S===_&&b===y&&(C=b)),b=l,S=k,y=D),w=x,s[t]=!1,L+=o}-1!==b&&(f.set(d.subarray(b,S),y),-1===v&&0===b&&b===y&&(v=S),-1===C&&S===_&&b===y&&(C=b));let k=-1===v?-1:v/(4*m),D=-1===C?-1:C/(4*m);return[k,D,s]}static _renderLine(e,t,i,n,o,r,s,l,d,c,u,g,m,f,_){let v=m.content,C=m.tokens,b=e.width-r,S=1===_,y=N.y0,w=0,L=0;for(let m=0,_=C.getCount();m<_;m++){let _=C.getEndOffset(m),k=C.getForeground(m),D=s.getColor(k);for(;w<_;w++){if(y>b)return;let s=v.charCodeAt(w);if(9===s){let e=g-(w+L)%g;L+=e-1,y+=e*r}else if(32===s)y+=r;else{let g=X.K7(s)?2:1;for(let m=0;m<g;m++)if(2===o?d.blockRenderChar(e,y,c+u,D,l,t,i,S):d.renderChar(e,y,c+u,s,D,l,t,i,f,n,S),(y+=r)>b)return}}}}};let ContiguousLineMap=class ContiguousLineMap{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let e=0,t=this._endLineNumber-this._startLineNumber+1;e<t;e++)this._values[e]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}};i(95698);let ViewOverlayWidgets=class ViewOverlayWidgets extends ViewPart{constructor(e,t){super(e),this._viewDomNode=t;let i=this._context.configuration.options,n=i.get(144);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=(0,P.X)(document.createElement("div")),PartFingerprints.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){let t=(0,P.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){let i=this._widgets[e.getId()];return i.preference===t?(this._updateMaxMinWidth(),!1):(i.preference=t,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let e=this._widgets[t],i=e.domNode.domNode;delete this._widgets[t],i.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let i=0,n=Object.keys(this._widgets);for(let o=0,r=n.length;o<r;o++){let r=n[o],s=this._widgets[r],l=null===(t=(e=s.widget).getMinContentWidthInPx)||void 0===t?void 0:t.call(e);void 0!==l&&(i=Math.max(i,l))}this._context.viewLayout.setOverlayWidgetsMinWidth(i)}_renderWidget(e){let t=e.domNode;if(null===e.preference){t.setTop("");return}if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){let e=t.domNode.clientHeight;t.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else if(2===e.preference)t.setTop(0),t.domNode.style.right="50%";else{let{top:i,left:n}=e.preference,o=this._context.configuration.options.get(42);if(o&&e.widget.allowEditorOverflow){let e=this._viewDomNodeRect;t.setTop(i+e.top),t.setLeft(n+e.left),t.setPosition("fixed")}else t.setTop(i),t.setLeft(n),t.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=g.i(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);let t=Object.keys(this._widgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];this._renderWidget(this._widgets[i])}}};let Settings=class Settings{constructor(e,t){let i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(142),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);let n=t.getColor(ei.zw);this.borderColor=n?n.toString():null,this.hideCursor=i.get(59);let o=t.getColor(ei.n0);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;let r=i.get(73),s=r.enabled,l=r.side,d=t.getColor(ei.e_),c=er.RW.getDefaultBackground();d?this.backgroundColor=d:s&&"right"===l?this.backgroundColor=c:this.backgroundColor=null;let u=i.get(144),g=u.overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[m,f]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=m,this.w=f}_initLanes(e,t,i){let n=t-e;if(i>=3){let t=Math.floor(n/3),i=Math.floor(n/3),o=n-t-i,r=e+t;return[[0,e,r,e,e+t+o,e,r,e],[0,t,o,t+o,i,t+o+i,o+i,t+o+i]]}if(2!==i)return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]];{let t=Math.floor(n/2),i=n-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,i,t+i,t+i,t+i]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&es.Il.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}};let DecorationsOverviewRuler=class DecorationsOverviewRuler extends ViewPart{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=(0,P.X)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=er.RW.onDidChange(e=>{e.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[new W.L(1,1)]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let t=new Settings(this._context.configuration,this._context.theme);return!(this._settings&&this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(W.L.compare),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return!!e.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return!!e.scrollHeightChanged&&this._markRenderingIsNeeded()}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){let e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes){this._domNode.setBackgroundColor(e?es.Il.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}let t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(ew.SQ.compareByRenderingProps),1!==this._actualShouldRender||ew.SQ.equalsArr(this._renderedDecorations,t)||(this._actualShouldRender=2),1!==this._actualShouldRender||(0,S.fS)(this._renderedCursorPositions,this._cursorPositions,(e,t)=>e.lineNumber===t.lineNumber)||(this._actualShouldRender=2),1===this._actualShouldRender)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");let i=this._settings.canvasWidth,n=this._settings.canvasHeight,o=this._settings.lineHeight,r=this._context.viewLayout,s=this._context.viewLayout.getScrollHeight(),l=n/s,d=6*this._settings.pixelRatio|0,c=d/2|0,u=this._domNode.domNode.getContext("2d");e?(e.isOpaque()||u.clearRect(0,0,i,n),u.fillStyle=es.Il.Format.CSS.formatHexA(e),u.fillRect(0,0,i,n)):u.clearRect(0,0,i,n);let g=this._settings.x,m=this._settings.w;for(let e of t){let t=e.color,i=e.data;u.fillStyle=t;let s=0,f=0,_=0;for(let e=0,t=i.length/3;e<t;e++){let t=i[3*e],v=i[3*e+1],C=i[3*e+2],b=r.getVerticalOffsetForLineNumber(v)*l|0,S=(r.getVerticalOffsetForLineNumber(C)+o)*l|0,y=S-b;if(y<d){let e=(b+S)/2|0;e<c?e=c:e+c>n&&(e=n-c),b=e-c,S=e+c}b>_+1||t!==s?(0!==e&&u.fillRect(g[s],f,m[s],_-f),s=t,f=b,_=S):S>_&&(_=S)}u.fillRect(g[s],f,m[s],_-f)}if(!this._settings.hideCursor&&this._settings.cursorColor){let e=2*this._settings.pixelRatio|0,t=e/2|0,i=this._settings.x[7],o=this._settings.w[7];u.fillStyle=this._settings.cursorColor;let s=-100,d=-100;for(let c=0,g=this._cursorPositions.length;c<g;c++){let g=this._cursorPositions[c],m=r.getVerticalOffsetForLineNumber(g.lineNumber)*l|0;m<t?m=t:m+t>n&&(m=n-t);let f=m-t,_=f+e;f>d+1?(0!==c&&u.fillRect(i,s,o,d-s),s=f,d=_):_>d&&(d=_)}u.fillRect(i,s,o,d-s)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,n),u.stroke(),u.moveTo(0,0),u.lineTo(i,0),u.stroke())}};var eI=i(52271);let OverviewRuler=class OverviewRuler extends ViewEventHandler{constructor(e,t){super(),this._context=e;let i=this._context.configuration.options;this._domNode=(0,P.X)(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new eI.Tj(e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(142)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(142)&&(this._zoneManager.setPixelRatio(t.get(142)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,(t=this._zoneManager.setDOMHeight(e.height)||t)&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;let e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,n,e),!0}_renderOneLane(e,t,i,n){let o=0,r=0,s=0;for(let l of t){let t=l.colorId,d=l.from,c=l.to;t!==o?(e.fillRect(0,r,n,s-r),o=t,e.fillStyle=i[o],r=d,s=c):s>=d?s=Math.max(s,c):(e.fillRect(0,r,n,s-r),r=d,s=c)}e.fillRect(0,r,n,s-r)}};i(90285);let Rulers=class Rulers extends ViewPart{constructor(e){super(e),this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let t=this._context.configuration.options;this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){let{tabSize:i}=this._context.viewModel.model.getOptions(),n=t-e;for(;n>0;){let e=(0,P.X)(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(i),this.domNode.appendChild(e),this._renderedRulers.push(e),n--}return}let i=e-t;for(;i>0;){let e=this._renderedRulers.pop();this.domNode.removeChild(e),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){let i=this._renderedRulers[t],n=this._rulers[t];i.setBoxShadow(n.color?`1px 0 0 0 ${n.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(n.column*this._typicalHalfwidthCharacterWidth)}}};i(77983);let ScrollDecorationViewPart=class ScrollDecorationViewPart extends ViewPart{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let t=this._context.configuration.options,i=t.get(103);this._useShadows=i.useShadows,this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){let e=this._context.configuration.options,t=e.get(144);0===t.minimap.renderMinimap||t.minimap.minimapWidth>0&&0===t.minimap.minimapLeft?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(103);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}};i(50566);let HorizontalRangeWithStyle=class HorizontalRangeWithStyle{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}};let LineVisibleRangesWithStyle=class LineVisibleRangesWithStyle{constructor(e,t){this.lineNumber=e,this.ranges=t}};function toStyledRange(e){return new HorizontalRangeWithStyle(e)}function toStyled(e){return new LineVisibleRangesWithStyle(e.lineNumber,e.ranges.map(toStyledRange))}let SelectionsOverlay=class SelectionsOverlay extends DynamicViewOverlay{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(67),this._roundedSelection=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(67),this._roundedSelection=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];if(i.ranges.length>1)return!0}return!1}_enrichVisibleRangesWithStyle(e,t,i){let n=this._typicalHalfwidthCharacterWidth/4,o=null,r=null;if(i&&i.length>0&&t.length>0){let n=t[0].lineNumber;if(n===e.startLineNumber)for(let e=0;!o&&e<i.length;e++)i[e].lineNumber===n&&(o=i[e].ranges[0]);let s=t[t.length-1].lineNumber;if(s===e.endLineNumber)for(let e=i.length-1;!r&&e>=0;e--)i[e].lineNumber===s&&(r=i[e].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let e=0,i=t.length;e<i;e++){let s=t[e].ranges[0],l=s.left,d=s.left+s.width,c={top:0,bottom:0},u={top:0,bottom:0};if(e>0){let i=t[e-1].ranges[0].left,o=t[e-1].ranges[0].left+t[e-1].ranges[0].width;abs(l-i)<n?c.top=2:l>i&&(c.top=1),abs(d-o)<n?u.top=2:i<d&&d<o&&(u.top=1)}else o&&(c.top=o.startStyle.top,u.top=o.endStyle.top);if(e+1<i){let i=t[e+1].ranges[0].left,o=t[e+1].ranges[0].left+t[e+1].ranges[0].width;abs(l-i)<n?c.bottom=2:i<l&&l<o&&(c.bottom=1),abs(d-o)<n?u.bottom=2:d<o&&(u.bottom=1)}else r&&(c.bottom=r.startStyle.bottom,u.bottom=r.endStyle.bottom);s.startStyle=c,s.endStyle=u}}_getVisibleRangesWithStyle(e,t,i){let n=t.linesVisibleRangesForRange(e,!0)||[],o=n.map(toStyled),r=this._visibleRangesHaveGaps(o);return!r&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,i),o}_createSelectionPiece(e,t,i,n,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(0===n.length)return;let o=!!n[0].ranges[0].startStyle,r=this._lineHeight.toString(),s=(this._lineHeight-1).toString(),l=n[0].lineNumber,d=n[n.length-1].lineNumber;for(let c=0,u=n.length;c<u;c++){let u=n[c],g=u.lineNumber,m=g-t,f=i&&(g===d||g===l)?s:r,_=i&&g===l?1:0,v="",C="";for(let e=0,t=u.ranges.length;e<t;e++){let t=u.ranges[e];if(o){let e=t.startStyle,i=t.endStyle;if(1===e.top||1===e.bottom){v+=this._createSelectionPiece(_,f,SelectionsOverlay.SELECTION_CLASS_NAME,t.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH);let i=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(i+=" "+SelectionsOverlay.SELECTION_TOP_RIGHT),1===e.bottom&&(i+=" "+SelectionsOverlay.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(_,f,i,t.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH)}if(1===i.top||1===i.bottom){v+=this._createSelectionPiece(_,f,SelectionsOverlay.SELECTION_CLASS_NAME,t.left+t.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH);let e=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;1===i.top&&(e+=" "+SelectionsOverlay.SELECTION_TOP_LEFT),1===i.bottom&&(e+=" "+SelectionsOverlay.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(_,f,e,t.left+t.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH)}}let i=SelectionsOverlay.SELECTION_CLASS_NAME;if(o){let e=t.startStyle,n=t.endStyle;0===e.top&&(i+=" "+SelectionsOverlay.SELECTION_TOP_LEFT),0===e.bottom&&(i+=" "+SelectionsOverlay.SELECTION_BOTTOM_LEFT),0===n.top&&(i+=" "+SelectionsOverlay.SELECTION_TOP_RIGHT),0===n.bottom&&(i+=" "+SelectionsOverlay.SELECTION_BOTTOM_RIGHT)}C+=this._createSelectionPiece(_,f,i,t.left,t.width)}e[m][0]+=v,e[m][1]+=C}}prepareRender(e){let t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let e=i;e<=n;e++){let n=e-i;t[n]=["",""]}let o=[];for(let n=0,r=this._selections.length;n<r;n++){let r=this._selections[n];if(r.isEmpty()){o[n]=null;continue}let s=this._getVisibleRangesWithStyle(r,e,this._previousFrameVisibleRangesWithStyle[n]);o[n]=s,this._actualRenderOneSelection(t,i,this._selections.length>1,s)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([e,t])=>e+t)}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};function abs(e){return e<0?-e:e}SelectionsOverlay.SELECTION_CLASS_NAME="selected-text",SelectionsOverlay.SELECTION_TOP_LEFT="top-left-radius",SelectionsOverlay.SELECTION_BOTTOM_LEFT="bottom-left-radius",SelectionsOverlay.SELECTION_TOP_RIGHT="top-right-radius",SelectionsOverlay.SELECTION_BOTTOM_RIGHT="bottom-right-radius",SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",SelectionsOverlay.ROUNDED_PIECE_WIDTH=10,(0,et.Ic)((e,t)=>{let i=e.getColor(eL.yb5);i&&!i.isTransparent()&&t.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)}),i(34117);let ViewCursorRenderData=class ViewCursorRenderData{constructor(e,t,i,n,o,r,s){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=o,this.textContent=r,this.textContentClassName=s}};let ViewCursor=class ViewCursor{constructor(e){this._context=e;let t=this._context.configuration.options,i=t.get(50);this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setClassName(`cursor ${eo}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,C.N)(this._domNode,i),this._domNode.setDisplay("none"),this._position=new W.L(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),(0,C.N)(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){let{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,o]=X.J_(i,t-1);return[new W.L(e,n+1),i.substring(n,o)]}_prepareRender(e){let t="",i="",[n,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===N.d2.Line||this._cursorStyle===N.d2.LineThin){let r;let s=e.visibleRangeForPosition(n);if(!s||s.outsideRenderedLine)return null;let l=g.Jj(this._domNode.domNode);this._cursorStyle===N.d2.Line?(r=g.Uh(l,this._lineCursorWidth>0?this._lineCursorWidth:2))>2&&(t=o,i=this._getTokenClassName(n)):r=g.Uh(l,1);let d=s.left,c=0;r>=2&&d>=1&&(d-=c=1);let u=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new ViewCursorRenderData(u,d,c,r,this._lineHeight,t,i)}let r=e.linesVisibleRangesForRange(new V.e(n.lineNumber,n.column,n.lineNumber,n.column+o.length),!1);if(!r||0===r.length)return null;let s=r[0];if(s.outsideRenderedLine||0===s.ranges.length)return null;let l=s.ranges[0],d="	"===o?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===N.d2.Block&&(t=o,i=this._getTokenClassName(n));let c=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===N.d2.Underline||this._cursorStyle===N.d2.UnderlineThin)&&(c+=this._lineHeight-2,u=2),new ViewCursorRenderData(c,l.left,0,d,u,t,i)}_getTokenClassName(e){let t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${eo} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}};let ViewCursors=class ViewCursors extends ViewPart{constructor(e){super(e);let t=this._context.configuration.options;this._readOnly=t.get(91),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new ViewCursor(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,P.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new eS._F,this._cursorFlatBlinkInterval=new g.ne,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let t=this._context.configuration.options;this._readOnly=t.get(91),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){let n=this._secondaryCursors.length!==t.length||"explicit"===this._cursorSmoothCaretAnimation&&3!==i;if(this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){let e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){let e=new ViewCursor(this._context);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){let e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let e=0;e<t.length;e++)this._secondaryCursors[e].onCursorPositionChanged(t[e],n)}onCursorStateChanged(e){let t=[];for(let i=0,n=e.selections.length;i<n;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);let i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let shouldRender=t=>{for(let i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(shouldRender(this._primaryCursor.getPosition()))return!0;for(let e of this._secondaryCursors)if(shouldRender(e.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let e=this._getCursorBlinking(),t=0===e;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),t||5===e||(1===e?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},ViewCursors.BLINK_INTERVAL,(0,g.Jj)(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},ViewCursors.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case N.d2.Line:e+=" cursor-line-style";break;case N.d2.Block:e+=" cursor-block-style";break;case N.d2.Underline:e+=" cursor-underline-style";break;case N.d2.LineThin:e+=" cursor-line-thin-style";break;case N.d2.BlockOutline:e+=" cursor-block-outline-style";break;case N.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return("on"===this._cursorSmoothCaretAnimation||"explicit"===this._cursorSmoothCaretAnimation)&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],i=0,n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let n=0,o=this._secondaryCursors.length;n<o;n++){let o=this._secondaryCursors[n].render(e);o&&(t[i++]=o)}this._renderData=t}getLastRenderData(){return this._renderData}};ViewCursors.BLINK_INTERVAL=500,(0,et.Ic)((e,t)=>{let i=e.getColor(ei.n0);if(i){let n=e.getColor(ei.fY);n||(n=i.opposite()),t.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${i}; border-color: ${i}; color: ${n}; }`),(0,ef.c3)(e.type)&&t.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});let invalidFunc=()=>{throw Error("Invalid change accessor")};let ViewZones=class ViewZones extends ViewPart{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(144);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,P.X)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),t=new Map;for(let i of e)t.set(i.id,i);let i=!1;return this._context.viewModel.changeWhitespace(e=>{let n=Object.keys(this._zones);for(let o=0,r=n.length;o<r;o++){let r=n[o],s=this._zones[r],l=this._computeWhitespaceProps(s.delegate);s.isInHiddenArea=l.isInHiddenArea;let d=t.get(r);d&&(d.afterLineNumber!==l.afterViewLineNumber||d.height!==l.heightInPx)&&(e.changeOneWhitespace(r,l.afterViewLineNumber,l.heightInPx),this._safeCallOnComputedHeight(s.delegate,l.heightInPx),i=!0)}}),i}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(144);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,i;return null!==(i=null!==(t=e.ordinal)&&void 0!==t?t:e.afterColumn)&&void 0!==i?i:1e4}_computeWhitespaceProps(e){let t,i;if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};if(void 0!==e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let i=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new W.L(i,this._context.viewModel.model.getLineMaxColumn(i))}i=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});let n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:n.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{let n={addZone:e=>(t=!0,this._addZone(i,e)),removeZone:e=>{e&&(t=this._removeZone(i,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(i,e)||t)}};safeInvoke1Arg(e,n),n.addZone=invalidFunc,n.removeZone=invalidFunc,n.layoutZone=invalidFunc}),t}_addZone(e,t){let i=this._computeWhitespaceProps(t),n=e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),o={whitespaceId:n,delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:(0,P.X)(t.domNode),marginDomNode:t.marginDomNode?(0,P.X)(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,i.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){let i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){let i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){let t=this._zones[e];return!!t.delegate.suppressMouseDown}return!1}_heightInPixels(e){return"number"==typeof e.heightInPx?e.heightInPx:"number"==typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"==typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if("function"==typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(e){(0,m.dL)(e)}}_safeCallOnDomNodeTop(e,t){if("function"==typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(e){(0,m.dL)(e)}}prepareRender(e){}render(e){let t=e.viewportData.whitespaceViewportData,i={},n=!1;for(let e of t)this._zones[e.id].isInHiddenArea||(i[e.id]=e,n=!0);let o=Object.keys(this._zones);for(let t=0,n=o.length;t<n;t++){let n=o[t],r=this._zones[n],s=0,l=0,d="none";i.hasOwnProperty(n)?(s=i[n].verticalOffset-e.bigNumbersDelta,l=i[n].height,d="block",r.isVisible||(r.domNode.setAttribute("monaco-visible-view-zone","true"),r.isVisible=!0),this._safeCallOnDomNodeTop(r.delegate,e.getScrolledTopFromAbsoluteTop(i[n].verticalOffset))):(r.isVisible&&(r.domNode.removeAttribute("monaco-visible-view-zone"),r.isVisible=!1),this._safeCallOnDomNodeTop(r.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),r.domNode.setTop(s),r.domNode.setHeight(l),r.domNode.setDisplay(d),r.marginDomNode&&(r.marginDomNode.setTop(s),r.marginDomNode.setHeight(l),r.marginDomNode.setDisplay(d))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}};function safeInvoke1Arg(e,t){try{return e(t)}catch(e){(0,m.dL)(e)}}i(54591);var eT=i(50296);let WhitespaceOverlay=class WhitespaceOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._options=new WhitespaceOptions(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=new WhitespaceOptions(this._context.configuration);return this._options.equals(t)?e.hasChanged(144):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if("none"===this._options.renderWhitespace){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=i-t+1,o=Array(n);for(let e=0;e<n;e++)o[e]=!0;let r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let t=e.viewportData.startLineNumber;t<=e.viewportData.endLineNumber;t++){let i=t-e.viewportData.startLineNumber,n=r.data[i],o=null;if("selection"===this._options.renderWhitespace){let e=this._selection;for(let i of e){if(i.endLineNumber<t||i.startLineNumber>t)continue;let e=i.startLineNumber===t?i.startColumn:n.minColumn,r=i.endLineNumber===t?i.endColumn:n.maxColumn;e<r&&(o||(o=[]),o.push(new eT.zG(e-1,r-1)))}}this._renderResult[i]=this._applyRenderWhitespace(e,t,o,n)}}_applyRenderWhitespace(e,t,i,n){let o;if("selection"===this._options.renderWhitespace&&!i||"trailing"===this._options.renderWhitespace&&n.continuesWithWrappedLine)return"";let r=this._context.theme.getColor(ei.dI),s=this._options.renderWithSVG,l=n.content,d=-1===this._options.stopRenderingLineAfter?l.length:Math.min(this._options.stopRenderingLineAfter,l.length),c=n.continuesWithWrappedLine,u=n.minColumn-1,g="boundary"===this._options.renderWhitespace,m="trailing"===this._options.renderWhitespace,f=this._options.lineHeight,_=this._options.middotWidth,v=this._options.wsmiddotWidth,C=this._options.spaceWidth,b=Math.abs(v-C),S=Math.abs(_-C),y=b<S?11825:183,w=this._options.canUseHalfwidthRightwardsArrow,L="",k=!1,D=X.LC(l);-1===D?(k=!0,D=d,o=d):o=X.ow(l);let x=0,N=i&&i[x],E=0;for(let n=u;n<d;n++){let r=l.charCodeAt(n);if(N&&n>=N.endOffset&&(x++,N=i&&i[x]),9!==r&&32!==r||m&&!k&&n<=o)continue;if(g&&n>=D&&n<=o&&32===r){let e=n-1>=0?l.charCodeAt(n-1):0,t=n+1<d?l.charCodeAt(n+1):0;if(32!==e&&32!==t)continue}if(g&&c&&n===d-1){let e=n-1>=0?l.charCodeAt(n-1):0,t=32===r&&32!==e&&9!==e;if(t)continue}if(i&&(!N||N.startOffset>n||N.endOffset<=n))continue;let u=e.visibleRangeForPosition(new W.L(t,n+1));u&&(s?(E=Math.max(E,u.left),9===r?L+=this._renderArrow(f,C,u.left):L+=`<circle cx="${(u.left+C/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(C/7).toFixed(2)}" />`):9===r?L+=`<div class="mwh" style="left:${u.left}px;height:${f}px;">${w?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:L+=`<div class="mwh" style="left:${u.left}px;height:${f}px;">${String.fromCharCode(y)}</div>`)}return s?(E=Math.round(E+C),`<svg style="position:absolute;width:${E}px;height:${f}px" viewBox="0 0 ${E} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+L+"</svg>"):L}_renderArrow(e,t,i){let n=e/2,o={x:0,y:t/7/2},r={x:.8*t,y:o.y},s={x:r.x-.2*r.x,y:r.y+.2*r.x},l={x:s.x+.1*r.x,y:s.y+.1*r.x},d={x:l.x+.35*r.x,y:l.y-.35*r.x},c={x:d.x,y:-d.y},u={x:l.x,y:-l.y},g={x:s.x,y:-s.y},m={x:r.x,y:-r.y},f={x:o.x,y:-o.y},_=[o,r,s,l,d,c,u,g,m,f].map(e=>`${(i+e.x).toFixed(2)} ${(n+e.y).toFixed(2)}`).join(" L ");return`<path d="M ${_}" />`}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};let WhitespaceOptions=class WhitespaceOptions{constructor(e){let t=e.options,i=t.get(50),n=t.get(38);"off"===n?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===n?(this.renderWhitespace=t.get(99),this.renderWithSVG=!0):(this.renderWhitespace=t.get(99),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(117)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}};let ViewportData=class ViewportData{constructor(e,t,i,n){this.selections=e,this.startLineNumber=0|t.startLineNumber,this.endLineNumber=0|t.endLineNumber,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=0|t.bigNumbersDelta,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new V.e(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}};let EditorTheme=class EditorTheme{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}};let ViewContext=class ViewContext{constructor(e,t,i){this.configuration=e,this.theme=new EditorTheme(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}};let eM=class extends ViewEventHandler{constructor(e,t,i,n,o,r,s){super(),this._instantiationService=s,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Q.Y(1,1,1,1)],this._renderAnimationFrame=null;let l=new ViewController(t,n,o,e);this._context=new ViewContext(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(ec,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,P.X)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,P.X)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,P.X)(document.createElement("div")),PartFingerprints.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new EditorScrollbar(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new ViewLines(this._context,this._linesContent),this._viewZones=new ViewZones(this._context),this._viewParts.push(this._viewZones);let d=new DecorationsOverviewRuler(this._context);this._viewParts.push(d);let c=new ScrollDecorationViewPart(this._context);this._viewParts.push(c);let u=new ContentViewOverlays(this._context);this._viewParts.push(u),u.addDynamicOverlay(new CurrentLineHighlightOverlay(this._context)),u.addDynamicOverlay(new SelectionsOverlay(this._context)),u.addDynamicOverlay(new IndentGuidesOverlay(this._context)),u.addDynamicOverlay(new DecorationsOverlay(this._context)),u.addDynamicOverlay(new WhitespaceOverlay(this._context));let g=new MarginViewOverlays(this._context);this._viewParts.push(g),g.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(this._context)),g.addDynamicOverlay(new MarginViewLineDecorationsOverlay(this._context)),g.addDynamicOverlay(new LinesDecorationsOverlay(this._context)),g.addDynamicOverlay(new LineNumbersOverlay(this._context)),this._glyphMarginWidgets=new GlyphMarginWidgets(this._context),this._viewParts.push(this._glyphMarginWidgets);let m=new Margin(this._context);m.getDomNode().appendChild(this._viewZones.marginDomNode),m.getDomNode().appendChild(g.getDomNode()),m.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(m),this._contentWidgets=new ViewContentWidgets(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new ViewCursors(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new ViewOverlayWidgets(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);let f=new Rulers(this._context);this._viewParts.push(f);let _=new BlockDecorations(this._context);this._viewParts.push(_);let v=new Minimap(this._context);if(this._viewParts.push(v),d){let e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(d.getDomNode(),e.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(m.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(v.getDomNode()),this._overflowGuardContainer.appendChild(_.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new PointerHandler(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){let e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes,i=[],n=0;for(let o of((i=(i=i.concat(e.getAllMarginDecorations().map(e=>{var t,i,o;let r=null!==(i=null===(t=e.options.glyphMargin)||void 0===t?void 0:t.position)&&void 0!==i?i:e_.U.Center;return n=Math.max(n,e.range.endLineNumber),{range:e.range,lane:r,persist:null===(o=e.options.glyphMargin)||void 0===o?void 0:o.persistLane}}))).concat(this._glyphMarginWidgets.getWidgets().map(t=>{let i=e.validateRange(t.preference.range);return n=Math.max(n,i.endLineNumber),{range:i,lane:t.preference.lane}}))).sort((e,t)=>V.e.compareRangesUsingStarts(e.range,t.range)),t.reset(n),i))t.push(o.lane,o.range,o.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{let e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new PointerHandlerLastRenderData(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new W.L(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){let e=this._context.configuration.options,t=e.get(144);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){let e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(141)+" "+(0,et.m6)(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){for(let e of(null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose(),this._viewParts))e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new m.he;if(null===this._renderAnimationFrame){let e=this._createCoordinatedRendering();this._renderAnimationFrame=EditorRenderingCoordinator.INSTANCE.scheduleCoordinatedRendering({window:g.Jj(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new m.he;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new m.he;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new m.he;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new m.he;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){let e=this._createCoordinatedRendering();safeInvokeNoArg(()=>e.prepareRenderText());let t=safeInvokeNoArg(()=>e.renderText());if(t){let[i,n]=t;safeInvokeNoArg(()=>e.prepareRender(i,n)),safeInvokeNoArg(()=>e.render(i,n))}}_getViewPartsToRender(){let e=[],t=0;for(let i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;let e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}O.B.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return null;let t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);let i=new ViewportData(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new eu.xh(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(let i of e)i.prepareRender(t)},render:(e,t)=>{for(let i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){let i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();let o=this._viewLines.visibleRangeForPosition(new W.L(n.lineNumber,n.column));return o?o.left:-1}getTargetAtClientPoint(e,t){let i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?ViewUserInputEvents.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new OverviewRuler(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t)for(let e of(this._viewLines.forceShouldRender(),this._viewParts))e.forceShouldRender();e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,n,o,r,s,l,d;this._contentWidgets.setWidgetPosition(e.widget,null!==(i=null===(t=e.position)||void 0===t?void 0:t.position)&&void 0!==i?i:null,null!==(o=null===(n=e.position)||void 0===n?void 0:n.secondaryPosition)&&void 0!==o?o:null,null!==(s=null===(r=e.position)||void 0===r?void 0:r.preference)&&void 0!==s?s:null,null!==(d=null===(l=e.position)||void 0===l?void 0:l.positionAffinity)&&void 0!==d?d:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){let t=e.position?e.position.preference:null,i=this._overlayWidgets.setWidgetPosition(e.widget,t);i&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){let t=e.position,i=this._glyphMarginWidgets.setWidgetPosition(e.widget,t);i&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};function safeInvokeNoArg(e){try{return e()}catch(e){return(0,m.dL)(e),null}}eM=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(r=ed.TG,function(e,t){r(e,t,6)})],eM);let EditorRenderingCoordinator=class EditorRenderingCoordinator{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{let t=this._coordinatedRenderings.indexOf(e);if(-1!==t&&(this._coordinatedRenderings.splice(t,1),0===this._coordinatedRenderings.length)){for(let[e,t]of this._animationFrameRunners)t.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){this._animationFrameRunners.has(e)||this._animationFrameRunners.set(e,g.lI(e,()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()},100))}_onRenderScheduled(){let e=this._coordinatedRenderings.slice(0);for(let t of(this._coordinatedRenderings=[],e))safeInvokeNoArg(()=>t.prepareRenderText());let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];t[i]=safeInvokeNoArg(()=>n.renderText())}for(let i=0,n=e.length;i<n;i++){let n=e[i],o=t[i];if(!o)continue;let[r,s]=o;safeInvokeNoArg(()=>n.prepareRender(r,s))}for(let i=0,n=e.length;i<n;i++){let n=e[i],o=t[i];if(!o)continue;let[r,s]=o;safeInvokeNoArg(()=>n.render(r,s))}}};EditorRenderingCoordinator.INSTANCE=new EditorRenderingCoordinator;var eR=i(77853);let ModelLineProjectionData=class ModelLineProjectionData{constructor(e,t,i,n,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){let t=e>0?this.breakOffsets[e-1]:0,i=this.breakOffsets[e],n=i-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=0===e?t:this.breakOffsets[e-1]+t,n=i;if(null!==this.injectionOffsets)for(let e=0;e<this.injectionOffsets.length;e++)if(n>this.injectionOffsets[e])n<this.injectionOffsets[e]+this.injectionOptions[e].content.length?n=this.injectionOffsets[e]:n-=this.injectionOptions[e].content.length;else break;return n}translateToOutputPosition(e,t=2){let i=e;if(null!==this.injectionOffsets)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n])&&(1===t||e!==this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,n=this.breakOffsets.length-1,o=0,r=0;for(;i<=n;){o=i+(n-i)/2|0;let s=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,0===t){if(e<=r)n=o-1;else if(e>s)i=o+1;else break}else if(e<r)n=o-1;else if(e>=s)i=o+1;else break}let s=e-r;return o>0&&(s+=this.wrappedTextIndentLength),new OutputPosition(o,s)}normalizeOutputPosition(e,t,i){if(null!==this.injectionOffsets){let n=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(o!==n)return this.offsetInInputWithInjectionsToOutputPosition(o,i)}if(0===i){if(e>0&&t===this.getMinOutputOffset(e))return new OutputPosition(e-1,this.getMaxOutputOffset(e-1))}else if(1===i){let i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new OutputPosition(e+1,this.getMinOutputOffset(e+1))}return new OutputPosition(e,t)}outputPositionToOffsetInInputWithInjections(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=(e>0?this.breakOffsets[e-1]:0)+t;return i}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){let i=this.getInjectedTextAtOffset(e);if(!i)return e;if(2===t){if(e===i.offsetInInputWithInjections+i.length&&hasRightCursorStop(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let e=i.offsetInInputWithInjections;if(hasLeftCursorStop(this.injectionOptions[i.injectedTextIndex].cursorStops))return e;let t=i.injectedTextIndex-1;for(;t>=0&&this.injectionOffsets[t]===this.injectionOffsets[i.injectedTextIndex]&&!hasRightCursorStop(this.injectionOptions[t].cursorStops)&&(e-=this.injectionOptions[t].content.length,!hasLeftCursorStop(this.injectionOptions[t].cursorStops));)t--;return e}}if(1===t||4===t){let e=i.offsetInInputWithInjections+i.length,t=i.injectedTextIndex;for(;t+1<this.injectionOffsets.length&&this.injectionOffsets[t+1]===this.injectionOffsets[t];)e+=this.injectionOptions[t+1].content.length,t++;return e}if(0===t||3===t){let e=i.offsetInInputWithInjections,t=i.injectedTextIndex;for(;t-1>=0&&this.injectionOffsets[t-1]===this.injectionOffsets[t];)e-=this.injectionOptions[t-1].content.length,t--;return e}(0,eR.vE)(t)}getInjectedText(e,t){let i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){let t=this.injectionOffsets,i=this.injectionOptions;if(null!==t){let n=0;for(let o=0;o<t.length;o++){let r=i[o].content.length,s=t[o]+n,l=t[o]+n+r;if(s>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:s,length:r};n+=r}}}};function hasRightCursorStop(e){return null==e||e===e_.RM.Right||e===e_.RM.Both}function hasLeftCursorStop(e){return null==e||e===e_.RM.Left||e===e_.RM.Both}let OutputPosition=class OutputPosition{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new W.L(e+this.outputLineIndex,this.outputOffset+1)}};var eA=i(32462);let eP=(0,ep.Z)("domLineBreaksComputer",{createHTML:e=>e});let DOMLineBreaksComputerFactory=class DOMLineBreaksComputerFactory{static create(e){return new DOMLineBreaksComputerFactory(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,n,o){let r=[],s=[];return{addRequest:(e,t,i)=>{r.push(e),s.push(t)},finalize:()=>createLineBreaks((0,ev.cW)(this.targetWindow.deref()),r,e,t,i,n,o,s)}}};function createLineBreaks(e,t,i,n,o,r,s,l){var d;function createEmptyLineBreakWithPossiblyInjectedText(e){let i=l[e];if(!i)return null;{let n=eA.gk.applyInjectedText(t[e],i),o=i.map(e=>e.options),r=i.map(e=>e.column-1);return new ModelLineProjectionData(r,o,[n.length],[],0)}}if(-1===o){let e=[];for(let i=0,n=t.length;i<n;i++)e[i]=createEmptyLineBreakWithPossiblyInjectedText(i);return e}let c=Math.round(o*i.typicalHalfwidthCharacterWidth),u=Math.round(n*(3===r?2:2===r?1:0)),g=Math.ceil(i.spaceWidth*u),m=document.createElement("div");(0,C.N)(m,i);let f=new em.HT(1e4),_=[],v=[],b=[],S=[],y=[];for(let e=0;e<t.length;e++){let o=eA.gk.applyInjectedText(t[e],l[e]),s=0,d=0,u=c;if(0!==r){if(-1===(s=X.LC(o)))s=0;else{for(let e=0;e<s;e++){let t=9===o.charCodeAt(e)?n-d%n:1;d+=t}let e=Math.ceil(i.spaceWidth*d);e+i.typicalFullwidthCharacterWidth>c?(s=0,d=0):u=c-e}}let m=o.substr(s),C=renderLine(m,d,n,u,f,g);_[e]=s,v[e]=d,b[e]=m,S[e]=C[0],y[e]=C[1]}let w=f.build(),L=null!==(d=null==eP?void 0:eP.createHTML(w))&&void 0!==d?d:w;m.innerHTML=L,m.style.position="absolute",m.style.top="10000","keepAll"===s?(m.style.wordBreak="keep-all",m.style.overflowWrap="anywhere"):(m.style.wordBreak="inherit",m.style.overflowWrap="break-word"),e.document.body.appendChild(m);let k=document.createRange(),D=Array.prototype.slice.call(m.children,0),x=[];for(let e=0;e<t.length;e++){let t,i;let n=D[e],o=readLineBreaks(k,n,b[e],S[e]);if(null===o){x[e]=createEmptyLineBreakWithPossiblyInjectedText(e);continue}let r=_[e],s=v[e]+u,d=y[e],c=[];for(let e=0,t=o.length;e<t;e++)c[e]=d[o[e]];if(0!==r)for(let e=0,t=o.length;e<t;e++)o[e]+=r;let g=l[e];g?(t=g.map(e=>e.options),i=g.map(e=>e.column-1)):(t=null,i=null),x[e]=new ModelLineProjectionData(i,t,o,c,s)}return e.document.body.removeChild(m),x}function renderLine(e,t,i,n,o,r){if(0!==r){let e=String(r);o.appendString('<div style="text-indent: -'),o.appendString(e),o.appendString("px; padding-left: "),o.appendString(e),o.appendString("px; box-sizing: border-box; width:")}else o.appendString('<div style="width:');o.appendString(String(n)),o.appendString('px;">');let s=e.length,l=t,d=0,c=[],u=[],g=0<s?e.charCodeAt(0):0;o.appendString("<span>");for(let t=0;t<s;t++){0!==t&&t%16384==0&&o.appendString("</span><span>"),c[t]=d,u[t]=l;let n=g;g=t+1<s?e.charCodeAt(t+1):0;let r=1,m=1;switch(n){case 9:m=r=i-l%i;for(let e=1;e<=r;e++)e<r?o.appendCharCode(160):o.appendASCIICharCode(32);break;case 32:32===g?o.appendCharCode(160):o.appendASCIICharCode(32);break;case 60:o.appendString("&lt;");break;case 62:o.appendString("&gt;");break;case 38:o.appendString("&amp;");break;case 0:o.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:o.appendCharCode(65533);break;default:X.K7(n)&&m++,n<32?o.appendCharCode(9216+n):o.appendCharCode(n)}d+=r,l+=m}return o.appendString("</span>"),c[e.length]=d,u[e.length]=l,o.appendString("</div>"),[c,u]}function readLineBreaks(e,t,i,n){if(i.length<=1)return null;let o=Array.prototype.slice.call(t.children,0),r=[];try{discoverBreaks(e,o,n,0,null,i.length-1,null,r)}catch(e){return console.log(e),null}return 0===r.length?null:(r.push(i.length),r)}function discoverBreaks(e,t,i,n,o,r,s,l){if(n===r||(o=o||readClientRect(e,t,i[n],i[n+1]),s=s||readClientRect(e,t,i[r],i[r+1]),.1>=Math.abs(o[0].top-s[0].top)))return;if(n+1===r){l.push(r);return}let d=n+(r-n)/2|0,c=readClientRect(e,t,i[d],i[d+1]);discoverBreaks(e,t,i,n,o,d,c,l),discoverBreaks(e,t,i,d,c,r,s,l)}function readClientRect(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}let CodeEditorContributions=class CodeEditorContributions extends _.JT{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new _.b2),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){for(let n of(this._editor=e,this._instantiationService=i,t)){if(this._pending.has(n.id)){(0,m.dL)(Error(`Cannot have two contributions with the same id ${n.id}`));continue}this._pending.set(n.id,n)}this._instantiateSome(0),this._register((0,g.se)((0,g.Jj)(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register((0,g.se)((0,g.Jj)(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register((0,g.se)((0,g.Jj)(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){let e={};for(let[t,i]of this._instances)"function"==typeof i.saveViewState&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(let[t,i]of this._instances)"function"==typeof i.restoreViewState&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return(0,g.se)((0,g.Jj)(null===(e=this._editor)||void 0===e?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;let t=this._findPendingContributionsByInstantiation(e);for(let e of t)this._instantiateById(e.id)}_findPendingContributionsByInstantiation(e){let t=[];for(let[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){let t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw Error("Cannot instantiate contributions before being initialized!");try{let e=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,e),"function"==typeof e.restoreViewState&&0!==t.instantiation&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(e){(0,m.dL)(e)}}}};var eO=i(66072),eF=i(42999),eB=i(97292),eW=i(97240),eV=i(68903),eH=i(26792),ez=i(67379),eU=i(33848);let MonospaceLineBreaksComputerFactory=class MonospaceLineBreaksComputerFactory{static create(e){return new MonospaceLineBreaksComputerFactory(e.get(133),e.get(132))}constructor(e,t){this.classifier=new WrappingCharacterClassifier(e,t)}createLineBreaksComputer(e,t,i,n,o){let r=[],s=[],l=[];return{addRequest:(e,t,i)=>{r.push(e),s.push(t),l.push(i)},finalize:()=>{let d=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let e=0,u=r.length;e<u;e++){let u=s[e],g=l[e];!g||g.injectionOptions||u?c[e]=monospaceLineBreaksComputer_createLineBreaks(this.classifier,r[e],u,t,i,d,n,o):c[e]=createLineBreaksFromPreviousLineBreaks(this.classifier,g,r[e],t,i,d,n,o)}return eK.length=0,ej.length=0,c}}}};let WrappingCharacterClassifier=class WrappingCharacterClassifier extends eU.N{constructor(e,t){super(0);for(let t=0;t<e.length;t++)this.set(e.charCodeAt(t),1);for(let e=0;e<t.length;e++)this.set(t.charCodeAt(e),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}};let eK=[],ej=[];function createLineBreaksFromPreviousLineBreaks(e,t,i,n,o,r,s,l){if(-1===o)return null;let d=i.length;if(d<=1)return null;let c="keepAll"===l,u=t.breakOffsets,g=t.breakOffsetsVisibleColumn,m=computeWrappedTextIndentLength(i,n,o,r,s),f=o-m,_=eK,v=ej,C=0,b=0,S=0,y=o,w=u.length,L=0;{let e=Math.abs(g[L]-y);for(;L+1<w;){let t=Math.abs(g[L+1]-y);if(t>=e)break;e=t,L++}}for(;L<w;){let t=L<0?0:u[L],o=L<0?0:g[L];b>t&&(t=b,o=S);let s=0,l=0,m=0,k=0;if(o<=y){let S=o,w=0===t?0:i.charCodeAt(t-1),L=0===t?0:e.get(w),D=!0;for(let o=t;o<d;o++){let t,d;let u=o,g=i.charCodeAt(o);if(X.ZG(g)?(o++,t=0,d=2):(t=e.get(g),d=computeCharWidth(g,S,n,r)),u>b&&canBreak(w,L,g,t,c)&&(s=u,l=S),(S+=d)>y){u>b?(m=u,k=S-d):(m=o+1,k=S),S-l>f&&(s=0),D=!1;break}w=g,L=t}if(D){C>0&&(_[C]=u[u.length-1],v[C]=g[u.length-1],C++);break}}if(0===s){let d=o,u=i.charCodeAt(t),g=e.get(u),_=!1;for(let n=t-1;n>=b;n--){let t,o;let v=n+1,C=i.charCodeAt(n);if(9===C){_=!0;break}if(X.YK(C)?(n--,t=0,o=2):(t=e.get(C),o=X.K7(C)?r:1),d<=y){if(0===m&&(m=v,k=d),d<=y-f)break;if(canBreak(C,t,u,g,c)){s=v,l=d;break}}d-=o,u=C,g=t}if(0!==s){let e=f-(k-l);if(e<=n){let t=i.charCodeAt(m);e-(X.ZG(t)?2:computeCharWidth(t,k,n,r))<0&&(s=0)}}if(_){L--;continue}}if(0===s&&(s=m,l=k),s<=b){let e=i.charCodeAt(b);X.ZG(e)?(s=b+2,l=S+2):(s=b+1,l=S+computeCharWidth(e,S,n,r))}for(b=s,_[C]=s,S=l,v[C]=l,C++,y=l+f;L<0||L<w&&g[L]<l;)L++;let D=Math.abs(g[L]-y);for(;L+1<w;){let e=Math.abs(g[L+1]-y);if(e>=D)break;D=e,L++}}return 0===C?null:(_.length=C,v.length=C,eK=t.breakOffsets,ej=t.breakOffsetsVisibleColumn,t.breakOffsets=_,t.breakOffsetsVisibleColumn=v,t.wrappedTextIndentLength=m,t)}function monospaceLineBreaksComputer_createLineBreaks(e,t,i,n,o,r,s,l){let d,c;let u=eA.gk.applyInjectedText(t,i);if(i&&i.length>0?(d=i.map(e=>e.options),c=i.map(e=>e.column-1)):(d=null,c=null),-1===o)return d?new ModelLineProjectionData(c,d,[u.length],[],0):null;let g=u.length;if(g<=1)return d?new ModelLineProjectionData(c,d,[u.length],[],0):null;let m="keepAll"===l,f=computeWrappedTextIndentLength(u,n,o,r,s),_=o-f,v=[],C=[],b=0,S=0,y=0,w=o,L=u.charCodeAt(0),k=e.get(L),D=computeCharWidth(L,0,n,r),x=1;X.ZG(L)&&(D+=1,L=u.charCodeAt(1),k=e.get(L),x++);for(let t=x;t<g;t++){let i,o;let s=t,l=u.charCodeAt(t);X.ZG(l)?(t++,i=0,o=2):(i=e.get(l),o=computeCharWidth(l,D,n,r)),canBreak(L,k,l,i,m)&&(S=s,y=D),(D+=o)>w&&((0===S||D-y>_)&&(S=s,y=D-o),v[b]=S,C[b]=y,b++,w=y+_,S=0),L=l,k=i}return 0!==b||i&&0!==i.length?(v[b]=g,C[b]=D,new ModelLineProjectionData(c,d,v,C,f)):null}function computeCharWidth(e,t,i,n){return 9===e?i-t%i:X.K7(e)||e<32?n:1}function canBreak(e,t,i,n,o){return 32!==i&&(2===t&&2!==n||1!==t&&1===n||!o&&3===t&&2!==n||!o&&3===n&&1!==t)}function computeWrappedTextIndentLength(e,t,i,n,o){let r=0;if(0!==o){let s=X.LC(e);if(-1!==s){for(let i=0;i<s;i++){let n=9===e.charCodeAt(i)?t-r%t:1;r+=n}let l=3===o?2:2===o?1:0;for(let e=0;e<l;e++){let e=t-r%t;r+=e}r+n>i&&(r=0)}}return r}var eq=i(34850),e$=i(67949);let Cursor=class Cursor{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new e$.rS(new V.e(1,1,1,1),0,0,new W.L(1,1),0),new e$.rS(new V.e(1,1,1,1),0,0,new W.L(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new e$.Vi(this.modelState,this.viewState)}readSelectionFromMarkers(e){let t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Q.Y.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Q.Y.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){let i=t.position,n=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),s=this._validatePositionWithCache(e,n,i,r),l=this._validatePositionWithCache(e,o,n,s);return i.equals(r)&&n.equals(s)&&o.equals(l)?t:new e$.rS(V.e.fromPositions(s,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-s.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=Cursor._validateViewState(e.viewModel,i)),t){let i=e.model.validateRange(t.selectionStart),n=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),r=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new e$.rS(i,t.selectionStartKind,n,o,r)}else{if(!i)return;let n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new e$.rS(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){let n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new e$.rS(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{let n=e.coordinatesConverter.convertModelPositionToViewPosition(new W.L(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new W.L(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new V.e(n.lineNumber,n.column,o.lineNumber,o.column),s=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new e$.rS(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}};let CursorCollection=class CursorCollection{constructor(e){this.context=e,this.cursors=[new Cursor(e)],this.lastAddedCursorIndex=0}dispose(){for(let e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(let e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(let e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(let e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return(0,eq.Ph)(this.cursors,(0,S.tT)(e=>e.viewState.position,W.L.compare)).viewState.position}getBottomMostViewPosition(){return(0,eq.jV)(this.cursors,(0,S.tT)(e=>e.viewState.position,W.L.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(e$.Vi.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let t=this.cursors.length-1,i=e.length;if(t<i){let e=i-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>i){let e=t-i;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.cursors.length-2)}for(let t=0;t<i;t++)this.cursors[t+1].setState(this.context,e[t].modelState,e[t].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Cursor(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;let e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort((0,S.tT)(e=>e.selection,V.e.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){let n=t[i],o=t[i+1],r=n.selection,s=o.selection;if(this.context.cursorConfig.multiCursorMergeOverlapping&&(s.isEmpty()||r.isEmpty()?s.getStartPosition().isBeforeOrEqual(r.getEndPosition()):s.getStartPosition().isBefore(r.getEndPosition()))){let r=n.index<o.index?i:i+1,s=n.index<o.index?i+1:i,l=t[s].index,d=t[r].index,c=t[s].selection,u=t[r].selection;if(!c.equalsSelection(u)){let i,n;let o=c.plusRange(u),s=c.selectionStartLineNumber===c.startLineNumber&&c.selectionStartColumn===c.startColumn,g=u.selectionStartLineNumber===u.startLineNumber&&u.selectionStartColumn===u.startColumn;l===this.lastAddedCursorIndex?(i=s,this.lastAddedCursorIndex=d):i=g,n=i?new Q.Y(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn):new Q.Y(o.endLineNumber,o.endColumn,o.startLineNumber,o.startColumn),t[r].selection=n;let m=e$.Vi.fromModelSelection(n);e[d].setState(this.context,m.modelState,m.viewState)}for(let e of t)e.index>l&&e.index--;e.splice(l,1),t.splice(s,1),this._removeSecondaryCursor(l-1),i--}}}};let CursorContext=class CursorContext{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}};var eG=i(6700),eQ=i(75907);let ViewCompositionStartEvent=class ViewCompositionStartEvent{constructor(){this.type=0}};let ViewCompositionEndEvent=class ViewCompositionEndEvent{constructor(){this.type=1}};let ViewConfigurationChangedEvent=class ViewConfigurationChangedEvent{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}};let ViewCursorStateChangedEvent=class ViewCursorStateChangedEvent{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}};let ViewDecorationsChangedEvent=class ViewDecorationsChangedEvent{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}};let ViewFlushedEvent=class ViewFlushedEvent{constructor(){this.type=5}};let ViewFocusChangedEvent=class ViewFocusChangedEvent{constructor(e){this.type=6,this.isFocused=e}};let ViewLanguageConfigurationEvent=class ViewLanguageConfigurationEvent{constructor(){this.type=7}};let ViewLineMappingChangedEvent=class ViewLineMappingChangedEvent{constructor(){this.type=8}};let ViewLinesChangedEvent=class ViewLinesChangedEvent{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}};let ViewLinesDeletedEvent=class ViewLinesDeletedEvent{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}};let ViewLinesInsertedEvent=class ViewLinesInsertedEvent{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}};let ViewRevealRangeRequestEvent=class ViewRevealRangeRequestEvent{constructor(e,t,i,n,o,r,s){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=o,this.revealHorizontal=r,this.scrollType=s,this.type=12}};let ViewScrollChangedEvent=class ViewScrollChangedEvent{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}};let ViewThemeChangedEvent=class ViewThemeChangedEvent{constructor(e){this.theme=e,this.type=14}};let ViewTokensChangedEvent=class ViewTokensChangedEvent{constructor(e){this.type=15,this.ranges=e}};let ViewTokensColorsChangedEvent=class ViewTokensColorsChangedEvent{constructor(){this.type=16}};let ViewZonesChangedEvent=class ViewZonesChangedEvent{constructor(){this.type=17}};let ViewModelEventDispatcher=class ViewModelEventDispatcher extends _.JT{constructor(){super(),this._onEvent=this._register(new f.Q5),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){let i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;let e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new ViewModelEventsCollector),this._collector}endEmitViewEvents(){if(this._collectorCnt--,0===this._collectorCnt){let e=this._collector.outgoingEvents,t=this._collector.viewEvents;for(let t of(this._collector=null,e))this._addOutgoingEvent(t);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{let t=this.beginEmitViewEvents();t.emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){let e=this._viewEventQueue;this._viewEventQueue=null;let t=this._eventHandlers.slice(0);for(let i of t)i.handleEvents(e)}}};let ViewModelEventsCollector=class ViewModelEventsCollector{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}};let ContentSizeChangedEvent=class ContentSizeChangedEvent{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new ContentSizeChangedEvent(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}};let FocusChangedEvent=class FocusChangedEvent{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new FocusChangedEvent(this.oldHasFocus,e.hasFocus)}};let ScrollChangedEvent=class ScrollChangedEvent{constructor(e,t,i,n,o,r,s,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=s,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new ScrollChangedEvent(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}};let viewModelEventDispatcher_ViewZonesChangedEvent=class viewModelEventDispatcher_ViewZonesChangedEvent{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}};let HiddenAreasChangedEvent=class HiddenAreasChangedEvent{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}};let CursorStateChangedEvent=class CursorStateChangedEvent{constructor(e,t,i,n,o,r,s){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=o,this.reason=r,this.reachedMaxCursorCount=s}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let i=e.length,n=t.length;if(i!==n)return!1;for(let n=0;n<i;n++)if(!e[n].equalsSelection(t[n]))return!1;return!0}isNoOp(){return CursorStateChangedEvent._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new CursorStateChangedEvent(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}};let ReadOnlyEditAttemptEvent=class ReadOnlyEditAttemptEvent{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}};let ModelDecorationsChangedEvent=class ModelDecorationsChangedEvent{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}};let ModelLanguageChangedEvent=class ModelLanguageChangedEvent{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}};let ModelLanguageConfigurationChangedEvent=class ModelLanguageConfigurationChangedEvent{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}};let ModelContentChangedEvent=class ModelContentChangedEvent{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}};let ModelOptionsChangedEvent=class ModelOptionsChangedEvent{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}};let ModelTokensChangedEvent=class ModelTokensChangedEvent{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}};let CursorsController=class CursorsController extends _.JT{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new CursorContext(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new CursorCollection(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,_.B9)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new CursorContext(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){let i=this._autoClosedActions[t];!i.isValid(e)&&(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let o=!1,r=this.context.cursorConfig.multiCursorLimit;null!==n&&n.length>r&&(n=n.slice(0,r),o=!0);let s=CursorModelState.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,i,n,o,r){let s=this._cursors.getViewPositions(),l=null,d=null;s.length>1?d=this._cursors.getViewSelections():l=V.e.fromPositions(s[0],s[0]),e.emitViewEvent(new ViewRevealRangeRequestEvent(t,i,l,d,n,o,r))}saveState(){let e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){let n=t[i];e.push({inSelectionMode:!n.isEmpty(),selectionStart:{lineNumber:n.selectionStartLineNumber,column:n.selectionStartColumn},position:{lineNumber:n.positionLineNumber,column:n.positionColumn}})}return e}restoreState(e,t){let i=[];for(let e=0,n=t.length;e<n;e++){let n=t[e],o=1,r=1;n.position&&n.position.lineNumber&&(o=n.position.lineNumber),n.position&&n.position.column&&(r=n.position.column);let s=o,l=r;n.selectionStart&&n.selectionStart.lineNumber&&(s=n.selectionStart.lineNumber),n.selectionStart&&n.selectionStart.column&&(l=n.selectionStart.column),i.push({selectionStartLineNumber:s,selectionStartColumn:l,positionLineNumber:o,positionColumn:r})}this.setStates(e,"restoreState",0,e$.Vi.fromModelSelections(i)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof eA.D8){if(!this._isHandling){this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}}else{let i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;let n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new CursorCollection(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){let t=e$.Vi.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,t)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{let t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,e$.Vi.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,e$.Vi.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let i=[],n=[];for(let o=0,r=e.length;o<r;o++)i.push({range:e[o],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[o],options:{description:"auto-closed-enclosing",stickiness:1}});let o=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],n);this._autoClosedActions.push(new AutoClosedAction(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let t=CommandExecutor.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let i=[],n=[];for(let t=0;t<e.commands.length;t++){let o=e.commands[t];o instanceof eQ.g_&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),n.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,o){let r=CursorModelState.from(this._model,this);if(r.equals(n))return!1;let s=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new ViewCursorStateChangedEvent(l,s,i)),!n||n.cursorState.length!==r.cursorState.length||r.cursorState.some((e,t)=>!e.modelState.equals(n.cursorState[t].modelState))){let l=n?n.cursorState.map(e=>e.modelState.selection):null,d=n?n.modelVersionId:0;e.emitOutgoingEvent(new CursorStateChangedEvent(l,s,d,r.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n.text||n.text.indexOf("\n")>=0)return null;let o=n.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;let r=o[1],s=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(r);if(!s||1!==s.length)return null;let l=s[0].open,d=n.text.length-o[2].length-1,c=n.text.lastIndexOf(l,d-1);if(-1===c)return null;t.push([c,d])}return t}executeEdits(e,t,i,n){let o=null;"snippet"===t&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);let r=[],s=[],l=this._model.pushEditOperations(this.getSelections(),i,e=>{if(o)for(let t=0,i=o.length;t<i;t++){let[i,n]=o[t],l=e[t],d=l.range.startLineNumber,c=l.range.startColumn-1+i,u=l.range.startColumn-1+n;r.push(new V.e(d,u+1,d,u+2)),s.push(new V.e(d,c+1,d,u+2))}let t=n(e);return t&&(this._isHandling=!0),t});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,s)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;let o=CursorModelState.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(e){(0,m.dL)(e)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,o,!1)&&this.revealPrimary(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return AutoClosedAction.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new CompositionState(this._model,this.getSelections())}endComposition(e,t){let i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{"keyboard"===t&&this._executeEditOperation(eQ.u6.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if("keyboard"===i){let e=t.length,i=0;for(;i<e;){let e=X.vH(t,i),n=t.substr(i,e);this._executeEditOperation(eQ.u6.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),n)),i+=e}}else this._executeEditOperation(eQ.u6.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,o,r){if(0===t.length&&0===i&&0===n){if(0!==o){let t=this.getSelections().map(e=>{let t=e.getPosition();return new Q.Y(t.lineNumber,t.column+o,t.lineNumber,t.column+o)});this.setSelections(e,r,t,0)}return}this._executeEdit(()=>{this._executeEditOperation(eQ.u6.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,o))},e,r)}paste(e,t,i,n,o){this._executeEdit(()=>{this._executeEditOperation(eQ.u6.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(eG.A.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new e$.Tp(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new e$.Tp(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}};let CursorModelState=class CursorModelState{static from(e,t){return new CursorModelState(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}};let AutoClosedAction=class AutoClosedAction{static getAllAutoClosedCharacters(e){let t=[];for(let i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){let i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){let t=[];for(let e=0;e<this._autoClosedEnclosingDecorations.length;e++){let i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[e]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(V.e.compareRangesUsingStarts),e.sort(V.e.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}};let CommandExecutor=class CommandExecutor{static executeCommands(e,t,i){let n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(n,i);for(let e=0,t=n.trackedRanges.length;e<t;e++)n.model._setTrackedRange(n.trackedRanges[e],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;let i=this._getEditOperations(e,t);if(0===i.operations.length)return null;let n=i.operations,o=this._getLoserCursorMap(n);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let r=[];for(let e=0,t=n.length;e<t;e++)o.hasOwnProperty(n[e].identifier.major.toString())||r.push(n[e]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let s=e.model.pushEditOperations(e.selectionsBefore,r,i=>{let n=[];for(let t=0;t<e.selectionsBefore.length;t++)n[t]=[];for(let e of i)e.identifier&&n[e.identifier.major].push(e);let minorBasedSorter=(e,t)=>e.identifier.minor-t.identifier.minor,o=[];for(let i=0;i<e.selectionsBefore.length;i++)n[i].length>0?(n[i].sort(minorBasedSorter),o[i]=t[i].computeCursorState(e.model,{getInverseEditOperations:()=>n[i],getTrackedSelection:t=>{let i=parseInt(t,10),n=e.model._getTrackedRange(e.trackedRanges[i]);return 0===e.trackedRangesDirection[i]?new Q.Y(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new Q.Y(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn)}})):o[i]=e.selectionsBefore[i];return o});s||(s=e.selectionsBefore);let l=[];for(let e in o)o.hasOwnProperty(e)&&l.push(parseInt(e,10));for(let e of(l.sort((e,t)=>t-e),l))s.splice(e,1);return s}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let o=0,r=t.length;o<r;o++){let r=t[o];if(r){let t=this._getEditOperationsFromCommand(e,o,r);i=i.concat(t.operations),n=n||t.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){let n=[],o=0,addEditOperation=(e,r,s=!1)=>{V.e.isEmpty(e)&&""===r||n.push({identifier:{major:t,minor:o++},range:e,text:r,forceMoveMarkers:s,isAutoWhitespaceEdit:i.insertsAutoWhitespace})},r=!1;try{i.getEditOperations(e.model,{addEditOperation:addEditOperation,addTrackedEditOperation:(e,t,i)=>{r=!0,addEditOperation(e,t,i)},trackSelection:(t,i)=>{let n;let o=Q.Y.liftSelection(t);if(o.isEmpty()){if("boolean"==typeof i)n=i?2:3;else{let t=e.model.getLineMaxColumn(o.startLineNumber);n=o.startColumn===t?2:3}}else n=1;let r=e.trackedRanges.length,s=e.model._setTrackedRange(null,o,n);return e.trackedRanges[r]=s,e.trackedRangesDirection[r]=o.getDirection(),r.toString()}})}catch(e){return(0,m.dL)(e),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:r}}static _getLoserCursorMap(e){(e=e.slice(0)).sort((e,t)=>-V.e.compareRangesUsingEnds(e.range,t.range));let t={};for(let i=1;i<e.length;i++){let n=e[i-1],o=e[i];if(V.e.getStartPosition(n.range).isBefore(V.e.getEndPosition(o.range))){let r;t[(r=n.identifier.major>o.identifier.major?n.identifier.major:o.identifier.major).toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===r&&(e.splice(t,1),t<i&&i--,t--);i>0&&i--}}return t}};let CompositionLineState=class CompositionLineState{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}};let CompositionState=class CompositionState{static _capture(e,t){let i=[];for(let n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new CompositionLineState(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}constructor(e,t){this._original=CompositionState._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;let i=CompositionState._capture(e,t);if(!i||this._original.length!==i.length)return null;let n=[];for(let e=0,t=this._original.length;e<t;e++)n.push(CompositionState._deduceOutcome(this._original[e],i[e]));return n}static _deduceOutcome(e,t){let i=Math.min(e.startSelection,t.startSelection,X.Mh(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,X.P1(e.text,t.text)),o=e.text.substring(i,e.text.length-n),r=t.text.substring(i,t.text.length-n);return new eQ.Nu(o,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}};var eZ=i(36281),eY=i(5328),eJ=i(31108);let PendingChanges=class PendingChanges{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;let t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}};let EditorWhitespace=class EditorWhitespace{constructor(e,t,i,n,o){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=o,this.prefixSum=0}};let LinesLayout=class LinesLayout{constructor(e,t,i,n){this._instanceId=X.PJ(++LinesLayout.INSTANCE_COUNT),this._pendingChanges=new PendingChanges,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,o=e.length;for(;n<o;){let r=n+o>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?o=r:n=r+1:t<e[r].afterLineNumber?o=r:n=r+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{let i={insertWhitespace:(e,i,n,o)=>{t=!0,e|=0,i|=0,n|=0,o|=0;let r=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new EditorWhitespace(r,e,i,n,o)),r},changeOneWhitespace:(e,i,n)=>{t=!0,i|=0,n|=0,this._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:n})},removeWhitespace:e=>{t=!0,this._pendingChanges.remove({id:e})}};e(i)}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(let t of e)this._insertWhitespace(t);for(let e of t)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(let e of i){let t=this._findWhitespaceIndex(e.id);-1!==t&&this._removeWhitespace(t)}return}let n=new Set;for(let e of i)n.add(e.id);let o=new Map;for(let e of t)o.set(e.id,e);let applyRemoveAndChange=e=>{let t=[];for(let i of e)if(!n.has(i.id)){if(o.has(i.id)){let e=o.get(i.id);i.afterLineNumber=e.newAfterLineNumber,i.height=e.newHeight}t.push(i)}return t},r=applyRemoveAndChange(this._arr).concat(applyRemoveAndChange(e));r.sort((e,t)=>e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber),this._arr=r,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){let t=LinesLayout.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){let t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return -1}_changeOneWhitespace(e,t,i){let n=this._findWhitespaceIndex(e);if(-1!==n&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){let e=this._arr[n];this._removeWhitespace(n),e.afterLineNumber=t,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){let n=this._arr[i].afterLineNumber;e<=n&&n<=t?this._arr[i].afterLineNumber=e-1:n>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){let n=this._arr[i].afterLineNumber;e<=n&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return(this._checkPendingChanges(),0===this._arr.length)?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();let e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;let t=this._findLastWhitespaceBeforeLineNumber(e);return -1===t?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e|=0;let t=this._arr,i=0,n=t.length-1;for(;i<=n;){let o=n-i|0,r=o/2|0,s=i+r|0;if(t[s].afterLineNumber<e){if(s+1>=t.length||t[s+1].afterLineNumber>=e)return s;i=s+1|0}else n=s-1|0}return -1}_findFirstWhitespaceAfterLineNumber(e){e|=0;let t=this._findLastWhitespaceBeforeLineNumber(e),i=t+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){let i;this._checkPendingChanges(),e|=0,i=e>1?this._lineHeight*(e-1):0;let n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+n+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e|=0;let i=this._lineHeight*e,n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),-1===this._minWidth){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(0===this._paddingBottom)return!1;this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;let t=0|this._lineCount,i=this._lineHeight,n=1,o=t;for(;n<o;){let t=(n+o)/2|0,r=0|this.getVerticalOffsetForLineNumber(t);if(e>=r+i)n=t+1;else{if(e>=r)return t;o=t}}return n>t?t:n}getLinesViewportData(e,t){let i,n;this._checkPendingChanges(),e|=0,t|=0;let o=this._lineHeight,r=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(r),l=0|this._lineCount,d=0|this.getFirstWhitespaceIndexAfterLineNumber(r),c=0|this.getWhitespacesCount();-1===d?(d=c,n=l+1,i=0):(n=0|this.getAfterLineNumberForWhitespaceIndex(d),i=0|this.getHeightForWhitespaceIndex(d));let u=s,g=u,m=0;s>=5e5&&(g-=m=Math.floor((m=5e5*Math.floor(s/5e5))/o)*o);let f=[],_=e+(t-e)/2,v=-1;for(let e=r;e<=l;e++){if(-1===v){let t=u,i=u+o;(t<=_&&_<i||t>_)&&(v=e)}for(u+=o,f[e-r]=g,g+=o;n===e;)g+=i,u+=i,++d>=c?n=l+1:(n=0|this.getAfterLineNumberForWhitespaceIndex(d),i=0|this.getHeightForWhitespaceIndex(d));if(u>=t){l=e;break}}-1===v&&(v=l);let C=0|this.getVerticalOffsetForLineNumber(l),b=r,S=l;return b<S&&s<e&&b++,b<S&&C+o>t&&S--,{bigNumbersDelta:m,startLineNumber:r,endLineNumber:l,relativeVerticalOffset:f,centeredLineNumber:v,completelyVisibleStartLineNumber:b,completelyVisibleEndLineNumber:S}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;let t=this.getAfterLineNumberForWhitespaceIndex(e);return(t>=1?this._lineHeight*t:0)+(e>0?this.getWhitespacesAccumulatedHeight(e-1):0)+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return -1;let n=this.getVerticalOffsetForWhitespaceIndex(i),o=this.getHeightForWhitespaceIndex(i);if(e>=n+o)return -1;for(;t<i;){let n=Math.floor((t+i)/2),o=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=o+r)t=n+1;else{if(e>=o)return n;i=n}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;let t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;let i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;let n=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;let i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];let o=[];for(let e=i;e<=n;e++){let i=this.getVerticalOffsetForWhitespaceIndex(e),n=this.getHeightForWhitespaceIndex(e);if(i>=t)break;o.push({id:this.getIdForWhitespaceIndex(e),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(e),verticalOffset:i,height:n})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}};LinesLayout.INSTANCE_COUNT=0;let EditorScrollDimensions=class EditorScrollDimensions{constructor(e,t,i,n){(e|=0)<0&&(e=0),(t|=0)<0&&(t=0),(i|=0)<0&&(i=0),(n|=0)<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}};let EditorScrollable=class EditorScrollable extends _.JT{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new f.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new EditorScrollDimensions(0,0,0,0),this._scrollable=this._register(new eJ.Rm({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;let t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);let i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new ContentSizeChangedEvent(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}};let ViewLayout=class ViewLayout extends _.JT{constructor(e,t,i){super(),this._configuration=e;let n=this._configuration.options,o=n.get(144),r=n.get(84);this._linesLayout=new LinesLayout(t,n.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new EditorScrollable(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new EditorScrollDimensions(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(114)?125:0)}onConfigurationChanged(e){let t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){let e=t.get(84);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(144)){let e=t.get(144),i=e.contentWidth,n=e.height,o=this._scrollable.getScrollDimensions(),r=o.contentWidth;this._scrollable.setScrollDimensions(new EditorScrollDimensions(i,o.contentWidth,n,this._getContentHeight(i,n,r)))}else this._updateHeight();e.hasChanged(114)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){let i=this._configuration.options,n=i.get(103);return 2===n.horizontal||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){let n=this._configuration.options,o=this._linesLayout.getLinesTotalHeight();return n.get(105)?o+=Math.max(0,t-n.get(67)-n.get(84).bottom):n.get(103).ignoreHorizontalScrollbarInContentHeight||(o+=this._getHorizontalScrollbarHeight(e,i)),o}_updateHeight(){let e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new EditorScrollDimensions(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new ew.l_(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new ew.l_(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){let e=this._configuration.options,t=this._maxLineWidth,i=e.get(145),n=e.get(50),o=e.get(144);if(i.isViewportWrapping){let i=e.get(73);return t>o.contentWidth+n.typicalHalfwidthCharacterWidth&&i.enabled&&"right"===i.side?t+o.verticalScrollbarWidth:t}{let i=e.get(104)*n.typicalHalfwidthCharacterWidth,r=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+i+o.verticalScrollbarWidth,r,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){let e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new EditorScrollDimensions(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){let e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){let t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){let t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){let e=this._scrollable.getScrollDimensions();return e.contentWidth}getScrollWidth(){let e=this._scrollable.getScrollDimensions();return e.scrollWidth}getContentHeight(){let e=this._scrollable.getScrollDimensions();return e.contentHeight}getScrollHeight(){let e=this._scrollable.getScrollDimensions();return e.scrollHeight}getCurrentScrollLeft(){let e=this._scrollable.getCurrentScrollPosition();return e.scrollLeft}getCurrentScrollTop(){let e=this._scrollable.getCurrentScrollPosition();return e.scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){let i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}};var eX=i(37186),e0=i(46338);function createModelLineProjection(e,t){return null!==e?new ModelLineProjection(e,t):t?IdentityModelLineProjection.INSTANCE:HiddenModelLineProjection.INSTANCE}let ModelLineProjection=class ModelLineProjection{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){let n;this._assertVisible();let o=i>0?this._projectionData.breakOffsets[i-1]:0,r=this._projectionData.breakOffsets[i];if(null!==this._projectionData.injectionOffsets){let i=this._projectionData.injectionOffsets.map((e,t)=>new eA.gk(0,0,e+1,this._projectionData.injectionOptions[t],0)),s=eA.gk.applyInjectedText(e.getLineContent(t),i);n=s.substring(o,r)}else n=e.getValueInRange({startLineNumber:t,startColumn:o+1,endLineNumber:t,endColumn:r+1});return i>0&&(n=spaces(this._projectionData.wrappedTextIndentLength)+n),n}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){let n=[];return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,o,r,s){let l;this._assertVisible();let d=this._projectionData,c=d.injectionOffsets,u=d.injectionOptions,g=null;if(c){g=[];let e=0,t=0;for(let i=0;i<d.getOutputLineCount();i++){let n=[];g[i]=n;let o=i>0?d.breakOffsets[i-1]:0,r=d.breakOffsets[i];for(;t<c.length;){let s=u[t].content.length,l=c[t]+e,g=l+s;if(l>r)break;if(o<g){let e=u[t];if(e.inlineClassName){let t=i>0?d.wrappedTextIndentLength:0,s=t+Math.max(l-o,0),c=t+Math.min(g-o,r-o);s!==c&&n.push(new ew.Wx(s,c,e.inlineClassName,e.inlineClassNameAffectsLetterSpacing))}}if(g<=r)e+=s,t++;else break}}}l=c?e.tokenization.getLineTokens(t).withInserted(c.map((e,t)=>({offset:e,text:u[t].content,tokenMetadata:e0.A.defaultTokenMetadata}))):e.tokenization.getLineTokens(t);for(let e=i;e<i+n;e++){let t=o+e-i;if(!r[t]){s[t]=null;continue}s[t]=this._getViewLineData(l,g?g[e]:null,e)}}_getViewLineData(e,t,i){this._assertVisible();let n=this._projectionData,o=i>0?n.wrappedTextIndentLength:0,r=i>0?n.breakOffsets[i-1]:0,s=n.breakOffsets[i],l=e.sliceAndInflate(r,s,o),d=l.getLineContent();i>0&&(d=spaces(n.wrappedTextIndentLength)+d);let c=this._projectionData.getMinOutputOffset(i)+1,u=d.length+1,g=i+1<this.getViewLineCount(),m=0===i?0:n.breakOffsetsVisibleColumn[i-1];return new ew.IP(d,g,c,u,m,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){this._assertVisible();let n=this._projectionData.translateToOutputPosition(t-1,i);return n.toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();let i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){let n=t.lineNumber-e,o=this._projectionData.normalizeOutputPosition(e,t.column-1,i),r=o.toPosition(n);return r}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw Error("Not supported")}};let IdentityModelLineProjection=class IdentityModelLineProjection{constructor(){}isVisible(){return!0}setVisible(e){return e?this:HiddenModelLineProjection.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){let n=e.tokenization.getLineTokens(t),o=n.getLineContent();return new ew.IP(o,!1,1,o.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,o,r,s){if(!r[o]){s[o]=null;return}s[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new W.L(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};IdentityModelLineProjection.INSTANCE=new IdentityModelLineProjection;let HiddenModelLineProjection=class HiddenModelLineProjection{constructor(){}isVisible(){return!1}setVisible(e){return e?IdentityModelLineProjection.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw Error("Not supported")}getViewLineLength(e,t,i){throw Error("Not supported")}getViewLineMinColumn(e,t,i){throw Error("Not supported")}getViewLineMaxColumn(e,t,i){throw Error("Not supported")}getViewLineData(e,t,i){throw Error("Not supported")}getViewLinesData(e,t,i,n,o,r,s){throw Error("Not supported")}getModelColumnOfViewPosition(e,t){throw Error("Not supported")}getViewPositionOfModelPosition(e,t){throw Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw Error("Not supported")}normalizePosition(e,t,i){throw Error("Not supported")}getInjectedTextAt(e,t){throw Error("Not supported")}};HiddenModelLineProjection.INSTANCE=new HiddenModelLineProjection;let e1=[""];function spaces(e){if(e>=e1.length)for(let t=1;t<=e;t++)e1[t]=_makeSpaces(t);return e1[e]}function _makeSpaces(e){return Array(e+1).join(" ")}var e2=i(53500);let ViewModelLinesFromProjectedModel=class ViewModelLinesFromProjectedModel{constructor(e,t,i,n,o,r,s,l,d,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=s,this.wrappingColumn=l,this.wrappingIndent=d,this.wordBreak=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new CoordinatesConverter(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));let i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),o=i.length,r=this.createLineBreaksComputer(),s=new S.H9(eA.gk.fromDecorations(n));for(let e=0;e<o;e++){let n=s.takeWhile(t=>t.lineNumber===e+1);r.addRequest(i[e],n,t?t[e]:null)}let l=r.finalize(),d=[],c=this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e)).sort(V.e.compareRangesUsingStarts),u=1,g=0,m=-1,f=0<c.length?g+1:o+2;for(let e=0;e<o;e++){let t=e+1;t===f&&(u=c[++m].startLineNumber,g=c[m].endLineNumber,f=m+1<c.length?g+1:o+2);let i=t>=u&&t<=g,n=createModelLineProjection(l[e],!i);d[e]=n.getViewLineCount(),this.modelLineProjections[e]=n}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new e2.Ck(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){let t=e.map(e=>this.model.validateRange(e)),i=normalizeLineRanges(t),n=this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e)).sort(V.e.compareRangesUsingStarts);if(i.length===n.length){let e=!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(n[t])){e=!0;break}if(!e)return!1}let o=i.map(e=>({range:e,options:eH.qx.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);let r=1,s=0,l=-1,d=0<i.length?s+1:this.modelLineProjections.length+2,c=!1;for(let e=0;e<this.modelLineProjections.length;e++){let t=e+1;t===d&&(r=i[++l].startLineNumber,s=i[l].endLineNumber,d=l+1<i.length?s+1:this.modelLineProjections.length+2);let n=!1;if(t>=r&&t<=s?this.modelLineProjections[e].isVisible()&&(this.modelLineProjections[e]=this.modelLineProjections[e].setVisible(!1),n=!0):(c=!0,this.modelLineProjections[e].isVisible()||(this.modelLineProjections[e]=this.modelLineProjections[e].setVisible(!0),n=!0)),n){let t=this.modelLineProjections[e].getViewLineCount();this.projectedModelLineLineCounts.setValue(e,t)}}return c||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return!(e<1)&&!(e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n,o){let r=this.fontInfo.equals(e),s=this.wrappingStrategy===t,l=this.wrappingColumn===i,d=this.wrappingIndent===n,c=this.wordBreak===o;if(r&&s&&l&&d&&c)return!1;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n,this.wordBreak=o;let u=null;if(r&&s&&!l&&d&&c){u=[];for(let e=0,t=this.modelLineProjections.length;e<t;e++)u[e]=this.modelLineProjections[e].getProjectionData()}return this._constructLines(!1,u),!0}createLineBreaksComputer(){let e="advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory;return e.createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;let n=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new ViewLinesDeletedEvent(n,o)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;let o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=0,l=[],d=[];for(let e=0,t=n.length;e<t;e++){let t=createModelLineProjection(n[e],!o);l.push(t);let i=t.getViewLineCount();s+=i,d[e]=i}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new ViewLinesInsertedEvent(r,r+s-1)}onModelLineChanged(e,t,i){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];let n=t-1,o=this.modelLineProjections[n].getViewLineCount(),r=this.modelLineProjections[n].isVisible(),s=createModelLineProjection(i,r);this.modelLineProjections[n]=s;let l=this.modelLineProjections[n].getViewLineCount(),d=!1,c=0,u=-1,g=0,m=-1,f=0,_=-1;o>l?(_=(f=(u=(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+l-1)+1)+(o-l)-1,d=!0):o<l?(m=(g=(u=(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+o-1)+1)+(l-o)-1,d=!0):u=(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1)+l-1,this.projectedModelLineLineCounts.setValue(n,l);let v=c<=u?new ViewLinesChangedEvent(c,u-c+1):null,C=g<=m?new ViewLinesInsertedEvent(g,m):null,b=f<=_?new ViewLinesDeletedEvent(f,_):null;return[d,v,C,b]}acceptVersionId(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;let t=this.getViewLineCount();return e>t?t:0|e}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);let n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),s=this.model.guides.getActiveIndentGuide(n.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(s.startLineNumber,1),d=this.convertModelPositionToViewPosition(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:d.lineNumber,indent:s.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new ViewLineInfo(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){let t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new W.L(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){let t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new W.L(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){let i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),o=[],r=this.getModelStartPositionOfViewLine(i),s=[];for(let e=i.modelLineNumber;e<=n.modelLineNumber;e++){let t=this.modelLineProjections[e-1];if(t.isVisible()){let o=e===i.modelLineNumber?i.modelLineWrappedLineIdx:0,r=e===n.modelLineNumber?n.modelLineWrappedLineIdx+1:t.getViewLineCount();for(let t=o;t<r;t++)s.push(new ViewLineInfo(e,t))}if(!t.isVisible()&&r){let t=new W.L(e-1,this.model.getLineMaxColumn(e-1)+1),i=V.e.fromPositions(r,t);o.push(new ViewLineInfoGroupedByModelRange(i,s)),s=[],r=null}else t.isVisible()&&!r&&(r=new W.L(e,1))}if(r){let e=V.e.fromPositions(r,this.getModelEndPositionOfViewLine(n));o.push(new ViewLineInfoGroupedByModelRange(e,s))}return o}getViewLinesBracketGuides(e,t,i,n){let o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(let i of this.getViewLineInfosGroupedByModelRanges(e,t)){let e=i.modelRange.startLineNumber,t=this.model.guides.getLinesBracketGuides(e,i.modelRange.endLineNumber,o,n);for(let n of i.viewLines){let i=t[n.modelLineNumber-e],o=i.map(e=>{if(-1!==e.forWrappedLinesAfterColumn){let t=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesAfterColumn);if(t.lineNumber>=n.modelLineWrappedLineIdx)return}if(-1!==e.forWrappedLinesBeforeOrAtColumn){let t=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesBeforeOrAtColumn);if(t.lineNumber<n.modelLineWrappedLineIdx)return}if(!e.horizontalLine)return e;let t=-1;if(-1!==e.column){let i=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.column);if(i.lineNumber===n.modelLineWrappedLineIdx)t=i.column;else if(i.lineNumber<n.modelLineWrappedLineIdx)t=this.getMinColumnOfViewLine(n);else if(i.lineNumber>n.modelLineWrappedLineIdx)return}let i=this.convertModelPositionToViewPosition(n.modelLineNumber,e.horizontalLine.endColumn),o=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.horizontalLine.endColumn);return o.lineNumber===n.modelLineWrappedLineIdx?new eb.UO(e.visibleColumn,t,e.className,new eb.vW(e.horizontalLine.top,i.column),-1,-1):o.lineNumber<n.modelLineWrappedLineIdx?void 0:-1===e.visibleColumn?new eb.UO(e.visibleColumn,t,e.className,new eb.vW(e.horizontalLine.top,this.getMaxColumnOfViewLine(n)),-1,-1):void 0});r.push(o.filter(e=>!!e))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),o=[],r=[],s=[],l=i.lineNumber-1,d=n.lineNumber-1,c=null;for(let e=l;e<=d;e++){let t=this.modelLineProjections[e];if(t.isVisible()){let n=t.getViewLineNumberOfModelPosition(0,e===l?i.column:1),o=t.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(e+1)),d=o-n+1,u=0;d>1&&1===t.getViewLineMinColumn(this.model,e+1,o)&&(u=0===n?1:2),r.push(d),s.push(u),null===c&&(c=new W.L(e+1,0))}else null!==c&&(o=o.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,e)),c=null)}null!==c&&(o=o.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,n.lineNumber)),c=null);let u=t-e+1,g=Array(u),m=0;for(let e=0,t=o.length;e<t;e++){let t,i=o[e],n=Math.min(u-m,r[e]),l=s[e];t=2===l?0:1===l?1:n;for(let e=0;e<n;e++)e===t&&(i=0),g[m++]=i}return g}getViewLineContent(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let n=this.projectedModelLineLineCounts.getIndexOf(e-1),o=e,r=n.index,s=n.remainder,l=[];for(let n=r,d=this.model.getLineCount();n<d;n++){let d=this.modelLineProjections[n];if(!d.isVisible())continue;let c=n===r?s:0,u=d.getViewLineCount()-c,g=!1;if(o+u>t&&(g=!0,u=t-o+1),d.getViewLinesData(this.model,n+1,c,u,o-e,i,l),o+=u,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);let n=this.projectedModelLineLineCounts.getIndexOf(e-1),o=n.index,r=n.remainder,s=this.modelLineProjections[o],l=s.getViewLineMinColumn(this.model,o+1,r),d=s.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>d&&(t=d);let c=s.getModelColumnOfViewPosition(r,t),u=this.model.validatePosition(new W.L(o+1,c));return u.equals(i)?new W.L(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){let i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new V.e(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){let i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new W.L(i.modelLineNumber,n))}convertViewRangeToModelRange(e){let t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new V.e(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,n=!1,o=!1){let r=this.model.validatePosition(new W.L(e,t)),s=r.lineNumber,l=r.column,d=s-1,c=!1;if(o)for(;d<this.modelLineProjections.length&&!this.modelLineProjections[d].isVisible();)d++,c=!0;else for(;d>0&&!this.modelLineProjections[d].isVisible();)d--,c=!0;if(0===d&&!this.modelLineProjections[d].isVisible())return new W.L(n?0:1,1);let u=1+this.projectedModelLineLineCounts.getPrefixSum(d);return c?o?this.modelLineProjections[d].getViewPositionOfModelPosition(u,1,i):this.modelLineProjections[d].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(d+1),i):this.modelLineProjections[s-1].getViewPositionOfModelPosition(u,l,i)}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){let i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return V.e.fromPositions(i)}{let t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new V.e(t.lineNumber,t.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){let e=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(e,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(0===i&&!this.modelLineProjections[i].isVisible())return 1;let n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,n,o){let r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),s=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(s.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new V.e(r.lineNumber,1,s.lineNumber,s.column),t,i,n,o);let l=[],d=r.lineNumber-1,c=s.lineNumber-1,u=null;for(let e=d;e<=c;e++){let o=this.modelLineProjections[e];if(o.isVisible())null===u&&(u=new W.L(e+1,e===d?r.column:1));else if(null!==u){let o=this.model.getLineMaxColumn(e);l=l.concat(this.model.getDecorationsInRange(new V.e(u.lineNumber,u.column,e,o),t,i,n)),u=null}}null!==u&&(l=l.concat(this.model.getDecorationsInRange(new V.e(u.lineNumber,u.column,s.lineNumber,s.column),t,i,n)),u=null),l.sort((e,t)=>{let i=V.e.compareRangesUsingStarts(e.range,t.range);return 0===i?e.id<t.id?-1:e.id>t.id?1:0:i});let g=[],m=0,f=null;for(let e of l){let t=e.id;f!==t&&(f=t,g[m++]=e)}return g}getInjectedTextAt(e){let t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){let i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){let t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}};function normalizeLineRanges(e){if(0===e.length)return[];let t=e.slice();t.sort(V.e.compareRangesUsingStarts);let i=[],n=t[0].startLineNumber,o=t[0].endLineNumber;for(let e=1,r=t.length;e<r;e++){let r=t[e];r.startLineNumber>o+1?(i.push(new V.e(n,1,o,1)),n=r.startLineNumber,o=r.endLineNumber):r.endLineNumber>o&&(o=r.endLineNumber)}return i.push(new V.e(n,1,o,1)),i}let ViewLineInfo=class ViewLineInfo{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}};let ViewLineInfoGroupedByModelRange=class ViewLineInfoGroupedByModelRange{constructor(e,t){this.modelRange=e,this.viewLines=t}};let CoordinatesConverter=class CoordinatesConverter{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,n){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,n)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}};let ViewModelLinesFromModelAsIs=class ViewModelLinesFromModelAsIs{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new IdentityCoordinatesConverter(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new ViewLinesDeletedEvent(t,i)}onModelLinesInserted(e,t,i,n){return new ViewLinesInsertedEvent(t,i)}onModelLineChanged(e,t,i){return[!1,new ViewLinesChangedEvent(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){let i=t-e+1,n=Array(i);for(let e=0;e<i;e++)n[e]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new ew.IP(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){let n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);let o=[];for(let n=e;n<=t;n++){let t=n-e;o[t]=i[t]?this.getViewLineData(n):null}return o}getDecorationsInRange(e,t,i,n,o){return this.model.getDecorationsInRange(e,t,i,n,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}};let IdentityCoordinatesConverter=class IdentityCoordinatesConverter{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){let t=this._lines.model.getLineCount();return!(e.lineNumber<1)&&!(e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}};let e5=e_.U.Right;let GlyphMarginLanesModel=class GlyphMarginLanesModel{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*e5/8))}reset(e){let t=Math.ceil((e+1)*e5/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let i=t.startLineNumber;i<=t.endLineNumber;i++){let t=e5*i+(e-1);this.lanes[t>>>3]|=1<<t%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(i))}}getLanesAtLine(e){let t=[],i=e5*e;for(let e=0;e<e5;e++)(this.persist&1<<e||this.lanes[i>>>3]&1<<i%8)&&t.push(e+1),i++;return t.length?t:[e_.U.Center]}countAtLine(e){let t=e5*e,i=0;for(let e=0;e<e5;e++)(this.persist&1<<e||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}};let ViewModel=class ViewModel extends _.JT{constructor(e,t,i,n,o,r,s,l,d){if(super(),this.languageConfigurationService=s,this._themeService=l,this._attachedView=d,this.hiddenAreasModel=new HiddenAreasModel,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new ViewModelEventDispatcher,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new e$.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new eS.pY(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=ViewportStart.create(this.model),this.glyphLanes=new GlyphMarginLanesModel(0),this.model.isTooLargeForTokenization())this._lines=new ViewModelLinesFromModelAsIs(this.model);else{let e=this._configuration.options,t=e.get(50),i=e.get(138),r=e.get(145),s=e.get(137),l=e.get(129);this._lines=new ViewModelLinesFromProjectedModel(this._editorId,this.model,n,o,t,this.model.getOptions().tabSize,i,r.wrappingColumn,s,l)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new CursorsController(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new ViewLayout(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(e=>{e.scrollTopChanged&&this._handleVisibleLinesChanged(),e.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ViewScrollChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new ScrollChangedEvent(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(e=>{this._eventDispatcher.emitOutgoingEvent(e)})),this._decorations=new eX.CU(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(e=>{try{let t=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(MinimapTokensColorTracker.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new ViewTokensColorsChangedEvent)})),this._register(this._themeService.onDidColorThemeChange(e=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new ViewThemeChangedEvent(e))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){let e=this.viewLayout.getLinesViewportData(),t=new V.e(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),i=this._toModelVisibleRanges(t);return i}visibleLinesStabilized(){let e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){let e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new ViewFocusChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new FocusChangedEvent(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ViewCompositionStartEvent)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new ViewCompositionEndEvent)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){let e=new W.L(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new StableViewport(t,this._viewportStart.startLineDelta)}return new StableViewport(null,0)}_onConfigurationChanged(e,t){let i=this._captureStableViewport(),n=this._configuration.options,o=n.get(50),r=n.get(138),s=n.get(145),l=n.get(137),d=n.get(129);this._lines.setWrappingSettings(o,r,s.wrappingColumn,l,d)&&(e.emitViewEvent(new ViewFlushedEvent),e.emitViewEvent(new ViewLineMappingChangedEvent),e.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(91)&&(this._decorations.reset(),e.emitViewEvent(new ViewDecorationsChangedEvent(null))),t.hasChanged(98)&&(this._decorations.reset(),e.emitViewEvent(new ViewDecorationsChangedEvent(null))),e.emitViewEvent(new ViewConfigurationChangedEvent(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),e$.LM.shouldRecreate(t)&&(this.cursorConfig=new e$.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{let t=this._eventDispatcher.beginEmitViewEvents(),i=!1,n=!1,o=e instanceof eA.fV?e.rawContentChangedEvent.changes:e.changes,r=e instanceof eA.fV?e.rawContentChangedEvent.versionId:null,s=this._lines.createLineBreaksComputer();for(let e of o)switch(e.changeType){case 4:for(let t=0;t<e.detail.length;t++){let i=e.detail[t],n=e.injectedTexts[t];n&&(n=n.filter(e=>!e.ownerId||e.ownerId===this._editorId)),s.addRequest(i,n,null)}break;case 2:{let t=null;e.injectedText&&(t=e.injectedText.filter(e=>!e.ownerId||e.ownerId===this._editorId)),s.addRequest(e.detail,t,null)}}let l=s.finalize(),d=new S.H9(l);for(let e of o)switch(e.changeType){case 1:this._lines.onModelFlushed(),t.emitViewEvent(new ViewFlushedEvent),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break;case 3:{let n=this._lines.onModelLinesDeleted(r,e.fromLineNumber,e.toLineNumber);null!==n&&(t.emitViewEvent(n),this.viewLayout.onLinesDeleted(n.fromLineNumber,n.toLineNumber)),i=!0;break}case 4:{let n=d.takeCount(e.detail.length),o=this._lines.onModelLinesInserted(r,e.fromLineNumber,e.toLineNumber,n);null!==o&&(t.emitViewEvent(o),this.viewLayout.onLinesInserted(o.fromLineNumber,o.toLineNumber)),i=!0;break}case 2:{let i=d.dequeue(),[o,s,l,c]=this._lines.onModelLineChanged(r,e.lineNumber,i);n=o,s&&t.emitViewEvent(s),l&&(t.emitViewEvent(l),this.viewLayout.onLinesInserted(l.fromLineNumber,l.toLineNumber)),c&&(t.emitViewEvent(c),this.viewLayout.onLinesDeleted(c.fromLineNumber,c.toLineNumber))}}null!==r&&this._lines.acceptVersionId(r),this.viewLayout.onHeightMaybeChanged(),!i&&n&&(t.emitViewEvent(new ViewLineMappingChangedEvent),t.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}let t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){let e=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(e){let t=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(t.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStart.startLineDelta},1)}}try{let t=this._eventDispatcher.beginEmitViewEvents();e instanceof eA.fV&&t.emitOutgoingEvent(new ModelContentChangedEvent(e.contentChangedEvent)),this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let i=0,n=e.ranges.length;i<n;i++){let n=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new W.L(n.fromLineNumber,1)).lineNumber,r=this.coordinatesConverter.convertModelPositionToViewPosition(new W.L(n.toLineNumber,this.model.getLineMaxColumn(n.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:r}}this._eventDispatcher.emitSingleViewEvent(new ViewTokensChangedEvent(t)),this._eventDispatcher.emitOutgoingEvent(new ModelTokensChangedEvent(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new ViewLanguageConfigurationEvent),this.cursorConfig=new e$.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ModelLanguageConfigurationChangedEvent(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new e$.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ModelLanguageChangedEvent(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new ViewFlushedEvent),e.emitViewEvent(new ViewLineMappingChangedEvent),e.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new e$.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ModelOptionsChangedEvent(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new ViewDecorationsChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new ModelDecorationsChangedEvent(e))}))}setHiddenAreas(e,t){var i;this.hiddenAreasModel.setHiddenAreas(t,e);let n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;let o=this._captureStableViewport(),r=!1;try{let e=this._eventDispatcher.beginEmitViewEvents();(r=this._lines.setHiddenAreas(n))&&(e.emitViewEvent(new ViewFlushedEvent),e.emitViewEvent(new ViewLineMappingChangedEvent),e.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());let t=null===(i=o.viewportStartModelPosition)||void 0===i?void 0:i.lineNumber,s=t&&n.some(e=>e.startLineNumber<=t&&t<=e.endLineNumber);s||o.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new HiddenAreasChangedEvent)}getVisibleRangesPlusViewportAboveBelow(){let e=this._configuration.options.get(144),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),o=Math.max(1,n.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new V.e(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){let e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){let t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(0===i.length)return[t];let n=[],o=0,r=t.startLineNumber,s=t.startColumn,l=t.endLineNumber,d=t.endColumn;for(let e=0,t=i.length;e<t;e++){let t=i[e].startLineNumber,d=i[e].endLineNumber;d<r||t>l||(r<t&&(n[o++]=new V.e(r,s,t-1,this.model.getLineMaxColumn(t-1))),r=d+1,s=1)}return(r<l||r===l&&s<d)&&(n[o++]=new V.e(r,s,l,d)),n}getCompletelyVisibleViewRange(){let e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new V.e(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){let t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new V.e(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){let e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new W.L(i,this.getLineMinColumn(i))),o=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:o}}reduceRestoreState(e){if(void 0===e.firstPosition)return this._reduceRestoreStateCompatibility(e);let t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){let t=X.LC(this.getLineContent(e));return -1===t?0:t+1}getLineLastNonWhitespaceColumn(e){let t=X.ow(this.getLineContent(e));return -1===t?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){let i=this._decorations.getDecorationsViewportData(e).inlineDecorations,n=i[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){let t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){let i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(t=>t.toInlineDecoration(e))]),new ew.wA(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,n,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){let n=this._lines.getViewLinesData(e,t,i);return new ew.ud(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){let t=this.model.getOverviewRulerDecorations(this._editorId,(0,N.$J)(this._configuration.options)),i=new OverviewRulerDecorations;for(let n of t){let t=n.options,o=t.overviewRuler;if(!o)continue;let r=o.position;if(0===r)continue;let s=o.getColor(e.value),l=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(s,t.zIndex,l,d,r)}return i.asArray}_invalidateDecorationsColorCache(){let e=this.model.getOverviewRulerDecorations();for(let t of e){let e=t.options.overviewRuler;null==e||e.invalidateCachedColor();let i=t.options.minimap;null==i||i.invalidateCachedColor()}}getValueInRange(e,t){let i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){let i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){let i=this.coordinatesConverter.convertViewPositionToModelPosition(e),n=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(n)}deduceModelPositionRelativeToViewPosition(e,t,i){let n=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=i:t+=i);let o=this.model.getOffsetAt(n),r=o+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){let n=i?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(V.e.compareRangesUsingStarts);let o=!1,r=!1;for(let t of e)t.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";let i=e.map(e=>e.startLineNumber),o="";for(let e=0;e<i.length;e++)e>0&&i[e-1]===i[e]||(o+=this.model.getLineContent(i[e])+n);return o}if(o&&t){let t=[],n=0;for(let o of e){let e=o.startLineNumber;o.isEmpty()?e!==n&&t.push(this.model.getLineContent(e)):t.push(this.model.getValueInRange(o,i?2:0)),n=e}return 1===t.length?t[0]:t}let s=[];for(let t of e)t.isEmpty()||s.push(this.model.getValueInRange(t,i?2:0));return 1===s.length?s[0]:s}getRichTextToCopy(e,t){let i;let n=this.model.getLanguageId();if(n===eZ.bd||1!==e.length)return null;let o=e[0];if(o.isEmpty()){if(!t)return null;let e=o.startLineNumber;o=new V.e(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}let r=this._configuration.options.get(50),s=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily),d=l||r.fontFamily===N.hL.fontFamily;if(d)i=N.hL.fontFamily;else{i=(i=r.fontFamily).replace(/"/g,"'");let e=/[,']/.test(i);if(!e){let e=/[+ ]/.test(i);e&&(i=`'${i}'`)}i=`${i}, ${N.hL.fontFamily}`}return{mode:n,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${i};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(o,s)+"</div>"}}_getHTMLToCopy(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,r=e.endColumn,s=this.getTabSize(),l="";for(let e=i;e<=o;e++){let d=this.model.tokenization.getLineTokens(e),c=d.getLineContent(),u=e===i?n-1:0,g=e===o?r-1:c.length;""===c?l+="<br>":l+=(0,eY.Fq)(c,d.inflate(),t,u,g,s,w.ED)}return l}_getColorMap(){let e=er.RW.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=es.Il.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new ReadOnlyEditAttemptEvent);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(n=>this._cursor.executeEdits(n,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,n,o))}paste(e,t,i,n){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,i,0,t,0))}revealTopMostCursor(e){let t=this._cursor.getTopMostViewPosition(),i=new V.e(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(t=>t.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){let t=this._cursor.getBottomMostViewPosition(),i=new V.e(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(t=>t.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,n,o){this._withViewEventsCollector(r=>r.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,i,null,n,t,o)))}changeWhitespace(e){let t=this.viewLayout.changeWhitespace(e);t&&(this._eventDispatcher.emitSingleViewEvent(new ViewZonesChangedEvent),this._eventDispatcher.emitOutgoingEvent(new viewModelEventDispatcher_ViewZonesChangedEvent))}_withViewEventsCollector(e){try{let t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};let ViewportStart=class ViewportStart{static create(e){let t=e._setTrackedRange(null,new V.e(1,1,1,1),1);return new ViewportStart(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,n,o){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=o}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){let i=e.coordinatesConverter.convertViewPositionToModelPosition(new W.L(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new V.e(i.lineNumber,i.column,i.lineNumber,i.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=r-o}invalidate(){this._isValid=!1}};let OverviewRulerDecorations=class OverviewRulerDecorations{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,o){let r=this._asMap[e];if(r){let e=r.data,t=e[e.length-3],s=e[e.length-1];if(t===o&&s+1>=i){n>s&&(e[e.length-1]=n);return}e.push(o,i,n)}else{let r=new ew.SQ(e,t,[o,i,n]);this._asMap[e]=r,this.asArray.push(r)}}};let HiddenAreasModel=class HiddenAreasModel{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){let i=this.hiddenAreas.get(e);i&&rangeArraysEqual(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;let e=Array.from(this.hiddenAreas.values()).reduce((e,t)=>mergeLineRangeArray(e,t),[]);return rangeArraysEqual(this.ranges,e)||(this.ranges=e),this.ranges}};function mergeLineRangeArray(e,t){let i=[],n=0,o=0;for(;n<e.length&&o<t.length;){let r=e[n],s=t[o];if(r.endLineNumber<s.startLineNumber-1)i.push(e[n++]);else if(s.endLineNumber<r.startLineNumber-1)i.push(t[o++]);else{let e=Math.min(r.startLineNumber,s.startLineNumber),t=Math.max(r.endLineNumber,s.endLineNumber);i.push(new V.e(e,1,t,1)),n++,o++}}for(;n<e.length;)i.push(e[n++]);for(;o<t.length;)i.push(t[o++]);return i}function rangeArraysEqual(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].equalsRange(t[i]))return!1;return!0}let StableViewport=class StableViewport{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;let i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),n=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:n+this.startLineDelta},1)}};var e4=i(56143),e3=i(7193),e6=i(3488),e7=i(1480),codeEditorWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let e9=0;let ModelData=class ModelData{constructor(e,t,i,n,o,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=o,this.attachedView=r}dispose(){(0,_.B9)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}};let e8=l=class extends _.JT{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,i,n,o,r,s,l,d,u,_,v){var C;let b;super(),this.languageConfigurationService=_,this._deliveryQueue=(0,f.Sp)(),this._contributions=this._register(new CodeEditorContributions),this._onDidDispose=this._register(new f.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new BooleanEventEmitter({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new BooleanEventEmitter({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new InteractionEmitter(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),o.willCreateCodeEditor();let S={...t};for(let t of(this._domElement=e,this._overflowWidgetsDomNode=S.overflowWidgetsDomNode,delete S.overflowWidgetsDomNode,this._id=++e9,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,S,u)),this._register(this._configuration.onDidChange(e=>{this._onDidChangeConfiguration.fire(e);let t=this._configuration.options;if(e.hasChanged(144)){let e=t.get(144);this._onDidLayoutChange.fire(e)}})),this._contextKeyService=this._register(s.createScoped(this._domElement)),this._notificationService=d,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new EditorContextKeysManager(this,this._contextKeyService)),this._register(new EditorModeContext(this,this._contextKeyService,v)),this._instantiationService=n.createChild(new e6.y([e3.i6,this._contextKeyService])),this._modelData=null,this._focusTracker=new CodeEditorWidgetFocusTracker(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},b=Array.isArray(i.contributions)?i.contributions:c.Uc.getEditorContributions(),this._contributions.initialize(this,b,this._instantiationService),c.Uc.getEditorActions())){if(this._actions.has(t.id)){(0,m.dL)(Error(`Cannot have two actions with the same id ${t.id}`));continue}let e=new eF.p(t.id,t.label,t.alias,t.metadata,null!==(C=t.precondition)&&void 0!==C?C:void 0,e=>this._instantiationService.invokeFunction(i=>Promise.resolve(t.runEditorCommand(i,this,e))),this._contextKeyService);this._actions.set(e.id,e)}let isDropIntoEnabled=()=>!this._configuration.options.get(91)&&this._configuration.options.get(36).enabled;this._register(new g.eg(this._domElement,{onDragOver:e=>{if(!isDropIntoEnabled())return;let t=this.getTargetAtClientPoint(e.clientX,e.clientY);(null==t?void 0:t.position)&&this.showDropIndicatorAt(t.position)},onDrop:async e=>{if(!isDropIntoEnabled()||(this.removeDropIndicator(),!e.dataTransfer))return;let t=this.getTargetAtClientPoint(e.clientX,e.clientY);(null==t?void 0:t.position)&&this._onDropIntoEditor.fire({position:t.position,event:e})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;null===(t=this._modelData)||void 0===t||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i){return new R(e,t,this._domElement,i)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return eB.g.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?eO.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(130),e):null}getValue(e=null){if(!this._modelData)return"";let t=!!e&&!!e.preserveBOM,i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;if(null===this._modelData&&null===e||this._modelData&&this._modelData.model===e)return;let i={oldModelUrl:(null===(t=this._modelData)||void 0===t?void 0:t.model.uri)||null,newModelUrl:(null==e?void 0:e.uri)||null};this._onWillChangeModel.fire(i);let n=this.hasTextFocus(),o=this._detachModel();this._attachModel(e),n&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){let t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){let o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}getTopForLineNumber(e,t=!1){return this._modelData?l._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?l._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,n=!1){let o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}getBottomForLineNumber(e,t=!1){return this._modelData?l._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var i;null===(i=this._modelData)||void 0===i||i.viewModel.setHiddenAreas(e.map(e=>V.e.lift(e)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;let t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return H.i.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!W.L.isIPosition(e))throw Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!V.e.isIRange(e))throw Error("Invalid arguments");let o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,r,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if("number"!=typeof e)throw Error("Invalid arguments");this._sendRevealRange(new V.e(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!W.L.isIPosition(e))throw Error("Invalid arguments");this._sendRevealRange(new V.e(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){let i=Q.Y.isISelection(e),n=V.e.isIRange(e);if(!i&&!n)throw Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){let i={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(i,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;let i=new Q.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if("number"!=typeof e||"number"!=typeof t)throw Error("Invalid arguments");this._sendRevealRange(new V.e(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!V.e.isIRange(e))throw Error("Invalid arguments");this._sendRevealRange(V.e.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||0===e.length)throw Error("Invalid arguments");for(let t=0,i=e.length;t<i;t++)if(!Q.Y.isISelection(e[t]))throw Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if("number"!=typeof e)throw Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if("number"!=typeof e)throw Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;let e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(this._modelData&&this._modelData.hasRealView&&e&&e.cursorState&&e.viewState){let t=e.cursorState;Array.isArray(t)?t.length>0&&this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]),this._contributions.restoreViewState(e.contributionsState||{});let i=this._modelData.viewModel.reduceRestoreState(e.viewState);this._modelData.view.restoreState(i)}}handleInitialized(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){return this.getActions().filter(e=>e.isSupported())}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{let t=i;this._type(e,t.text||"");return}case"replacePreviousChar":{let t=i;this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0);return}case"compositionType":{let t=i;this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0);return}case"paste":{let t=i;this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null);return}case"cut":this._cut(e);return}let n=this.getAction(t);if(n){Promise.resolve(n.run(i)).then(void 0,m.dL);return}!this._modelData||this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i)}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,i,n,o){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,o,e)}_paste(e,t,i,n,o){if(!this._modelData||0===t.length)return;let r=this._modelData.viewModel,s=r.getSelection().getStartPosition();r.paste(t,i,n,e);let l=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new V.e(s.lineNumber,s.column,l.lineNumber,l.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){let n=c.Uc.getEditorCommand(t);return!!n&&((i=i||{}).source=e,this._instantiationService.invokeFunction(e=>{Promise.resolve(n.runEditorCommand(e,this,i)).then(void 0,m.dL)}),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!(!this._modelData||this._configuration.options.get(91))&&(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!(!this._modelData||this._configuration.options.get(91))&&(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){let n;return!(!this._modelData||this._configuration.options.get(91))&&(n=i?Array.isArray(i)?()=>i:i:()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0)}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new EditorDecorationsCollection(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,N.$J)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,N.$J)(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){let t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(e=>e.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){let e=this._configuration.options,t=e.get(144);return t}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!!this._modelData&&!!this._modelData.hasRealView&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){let t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){let t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}addGlyphMarginWidget(e){let t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){let t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){let i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){let t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){let e=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;let t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(144),o=l._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:i.get(67)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,C.N)(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}let t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());let i=e.onBeforeAttached(),n=new ViewModel(this._id,this._configuration,e,DOMLineBreaksComputerFactory.create(g.Jj(this._domElement)),MonospaceLineBreaksComputerFactory.create(this._configuration.options),e=>g.jL(g.Jj(this._domElement),e),this.languageConfigurationService,this._themeService,i);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(t=>{switch(t.kind){case 0:this._onDidContentSizeChange.fire(t);break;case 1:this._editorTextFocus.setValue(t.hasFocus);break;case 2:this._onDidScrollChange.fire(t);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(t.reachedMaxCursorCount){let e=this.getOption(80),t=J.NC("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",e);this._notificationService.prompt(e7.zb.Warning,t,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:J.NC("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}let e=[];for(let i=0,n=t.selections.length;i<n;i++)e[i]=t.selections[i].getPosition();let i={position:e[0],secondaryPositions:e.slice(1),reason:t.reason,source:t.source};this._onDidChangeCursorPosition.fire(i);let n={selection:t.selections[0],secondarySelections:t.selections.slice(1),modelVersionId:t.modelVersionId,oldSelections:t.oldSelections,oldModelVersionId:t.oldModelVersionId,source:t.source,reason:t.reason};this._onDidChangeCursorSelection.fire(n);break}case 7:this._onDidChangeModelDecorations.fire(t.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(t.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(t.event);break;case 10:this._onDidChangeModelContent.fire(t.event);break;case 11:this._onDidChangeModelOptions.fire(t.event);break;case 12:this._onDidChangeModelTokens.fire(t.event)}}));let[o,r]=this._createView(n);if(r){this._domElement.appendChild(o.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];o.addContentWidget(this._contentWidgets[i])}t=Object.keys(this._overlayWidgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];o.addOverlayWidget(this._overlayWidgets[i])}t=Object.keys(this._glyphMarginWidgets);for(let e=0,i=t.length;e<i;e++){let i=t[e];o.addGlyphMarginWidget(this._glyphMarginWidgets[i])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ModelData(e,n,o,r,t,i)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,i,n)=>{this._paste("keyboard",e,t,i,n)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,i,n)=>{this._compositionType("keyboard",e,t,i,n)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,i,n)=>{this._commandService.executeCommand("paste",{text:e,pasteOnNewLine:t,multicursorText:i,mode:n})},type:e=>{this._commandService.executeCommand("type",{text:e})},compositionType:(e,t,i,n)=>{i||n?this._commandService.executeCommand("compositionType",{text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:n}):this._commandService.executeCommand("replacePreviousChar",{text:e,replaceCharCnt:t})},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let i=new ViewUserInputEvents(e.coordinatesConverter);i.onKeyDown=e=>this._onKeyDown.fire(e),i.onKeyUp=e=>this._onKeyUp.fire(e),i.onContextMenu=e=>this._onContextMenu.fire(e),i.onMouseMove=e=>this._onMouseMove.fire(e),i.onMouseLeave=e=>this._onMouseLeave.fire(e),i.onMouseDown=e=>this._onMouseDown.fire(e),i.onMouseUp=e=>this._onMouseUp.fire(e),i.onMouseDrag=e=>this._onMouseDrag.fire(e),i.onMouseDrop=e=>this._onMouseDrop.fire(e),i.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),i.onMouseWheel=e=>this._onMouseWheel.fire(e);let n=new eM(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService);return[n,!0]}_postDetachModelCleanup(e){null==e||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var e;if(null===(e=this._contributionsDisposable)||void 0===e||e.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;let t=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),t}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(e){let t=[{range:new V.e(e.lineNumber,e.column,e.lineNumber,e.column),options:l.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}};e8.dropIntoEditorDecorationOptions=eH.qx.register({description:"workbench-dnd-target",className:"dnd-target"}),e8=l=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([codeEditorWidget_param(3,ed.TG),codeEditorWidget_param(4,A.$),codeEditorWidget_param(5,e4.H),codeEditorWidget_param(6,e3.i6),codeEditorWidget_param(7,et.XE),codeEditorWidget_param(8,e7.lT),codeEditorWidget_param(9,T.F),codeEditorWidget_param(10,eV.c_),codeEditorWidget_param(11,ez.p)],e8);let BooleanEventEmitter=class BooleanEventEmitter extends _.JT{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new f.Q5(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new f.Q5(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){let t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}};let InteractionEmitter=class InteractionEmitter extends f.Q5{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}};let EditorContextKeysManager=class EditorContextKeysManager extends _.JT{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=eW.u.editorSimpleInput.bindTo(t),this._editorFocus=eW.u.focus.bindTo(t),this._textInputFocus=eW.u.textInputFocus.bindTo(t),this._editorTextFocus=eW.u.editorTextFocus.bindTo(t),this._tabMovesFocus=eW.u.tabMovesFocus.bindTo(t),this._editorReadonly=eW.u.readOnly.bindTo(t),this._inDiffEditor=eW.u.inDiffEditor.bindTo(t),this._editorColumnSelection=eW.u.columnSelection.bindTo(t),this._hasMultipleSelections=eW.u.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=eW.u.hasNonEmptySelection.bindTo(t),this._canUndo=eW.u.canUndo.bindTo(t),this._canRedo=eW.u.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(x.n.onDidChangeTabFocus(e=>this._tabMovesFocus.set(e))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let e=this._editor.getOptions();this._tabMovesFocus.set(x.n.getTabFocusMode()),this._editorReadonly.set(e.get(91)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(e=>!e.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}};let EditorModeContext=class EditorModeContext extends _.JT{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=eW.u.languageId.bindTo(t),this._hasCompletionItemProvider=eW.u.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=eW.u.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=eW.u.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=eW.u.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=eW.u.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=eW.u.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=eW.u.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=eW.u.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=eW.u.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=eW.u.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=eW.u.hasReferenceProvider.bindTo(t),this._hasRenameProvider=eW.u.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=eW.u.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=eW.u.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=eW.u.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=eW.u.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=eW.u.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=eW.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=eW.u.isInEmbeddedEditor.bindTo(t);let update=()=>this._update();this._register(e.onDidChangeModel(update)),this._register(e.onDidChangeModelLanguage(update)),this._register(i.completionProvider.onDidChange(update)),this._register(i.codeActionProvider.onDidChange(update)),this._register(i.codeLensProvider.onDidChange(update)),this._register(i.definitionProvider.onDidChange(update)),this._register(i.declarationProvider.onDidChange(update)),this._register(i.implementationProvider.onDidChange(update)),this._register(i.typeDefinitionProvider.onDidChange(update)),this._register(i.hoverProvider.onDidChange(update)),this._register(i.documentHighlightProvider.onDidChange(update)),this._register(i.documentSymbolProvider.onDidChange(update)),this._register(i.referenceProvider.onDidChange(update)),this._register(i.renameProvider.onDidChange(update)),this._register(i.documentFormattingEditProvider.onDidChange(update)),this._register(i.documentRangeFormattingEditProvider.onDidChange(update)),this._register(i.signatureHelpProvider.onDidChange(update)),this._register(i.inlayHintsProvider.onDidChange(update)),update()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){let e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===v.lg.walkThroughSnippet||e.uri.scheme===v.lg.vscodeChatCodeBlock)})}};let CodeEditorWidgetFocusTracker=class CodeEditorWidgetFocusTracker extends _.JT{constructor(e,t){super(),this._onChange=this._register(new f.Q5),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(g.go(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(g.go(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){let e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){var e;return null!==(e=this._hadFocus)&&void 0!==e&&e}};let EditorDecorationsCollection=class EditorDecorationsCollection{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];let e=this._editor.getModel(),t=[];for(let i of this._decorationIds){let n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}};let te=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),tt=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function getSquigglySVGData(e){return te+encodeURIComponent(e.toString())+tt}let ti=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),tn=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function getDotDotDotSVGData(e){return ti+encodeURIComponent(e.toString())+tn}(0,et.Ic)((e,t)=>{let i=e.getColor(eL.lXJ);i&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${getSquigglySVGData(i)}") repeat-x bottom left; }`);let n=e.getColor(eL.uoC);n&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${getSquigglySVGData(n)}") repeat-x bottom left; }`);let o=e.getColor(eL.c63);o&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${getSquigglySVGData(o)}") repeat-x bottom left; }`);let r=e.getColor(eL.Dut);r&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${getDotDotDotSVGData(r)}") no-repeat bottom left; }`);let s=e.getColor(ei.zu);s&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${s.rgba.a}; }`)})},73800:function(e,t,i){"use strict";i.d(t,{p:function(){return eH}});var n,o,r,s,l,d=i(70687),c=i(34850),u=i(17861),g=i(57605),m=i(87932),f=i(98557),_=i(18601);i(43);var v=i(38981),C=i(86992),b=i(6162),S=i(10419),y=i(76883),w=i(83367),L=i(80064),k=i(9252),D=i(34794),x=i(84530),N=i(98847),E=i(38679),I=i(98051),T=i(69350),M=i(4261),R=i(84761),A=i(11953),P=i(30822),O=i(64808),F=i(84634),B=i(46338),W=i(50296),V=i(50263),H=i(46157),z=i(54316),U=i(27989),K=i(96440);i(56831);var __decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},__param=function(e,t){return function(i,n){t(i,n,e)}};let j=(0,K.q5)("diff-review-insert",x.l.add,(0,H.NC)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),q=(0,K.q5)("diff-review-remove",x.l.remove,(0,H.NC)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),G=(0,K.q5)("diff-review-close",x.l.close,(0,H.NC)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer.")),Q=class extends m.JT{constructor(e,t,i,n,o,r,s,l,d){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=o,this._height=r,this._diffs=s,this._models=l,this._instantiationService=d,this._state=(0,f.Be)(this,(e,t)=>{let i=this._visible.read(e);if(this._parentNode.style.visibility=i?"visible":"hidden",!i)return null;let n=t.add(this._instantiationService.createInstance(Z,this._diffs,this._models,this._setVisible,this._canClose)),o=t.add(this._instantiationService.createInstance(Y,this._parentNode,n,this._width,this._height,this._models));return{model:n,view:o}}).recomputeInitiallyAndOnChange(this._store)}next(){(0,f.PS)(e=>{let t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){(0,f.PS)(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){(0,f.PS)(e=>{this._setVisible(!1,e)})}};Q._ttPolicy=(0,y.Z)("diffReview",{createHTML:e=>e}),Q=__decorate([__param(8,U.TG)],Q);let Z=class extends m.JT{constructor(e,t,i,n,o){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=o,this._groups=(0,f.uh)(this,[]),this._currentGroupIdx=(0,f.uh)(this,0),this._currentElementIdx=(0,f.uh)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((e,t)=>this._groups.read(t)[e]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((e,t)=>{var i;return null===(i=this.currentGroup.read(t))||void 0===i?void 0:i.lines[e]}),this._register((0,f.EH)(e=>{let t=this._diffs.read(e);if(!t){this._groups.set([],void 0);return}let i=computeViewElementGroups(t,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,f.PS)(e=>{let t=this._models.getModifiedPosition();if(t){let n=i.findIndex(e=>(null==t?void 0:t.lineNumber)<e.range.modified.endLineNumberExclusive);-1!==n&&this._currentGroupIdx.set(n,e)}this._groups.set(i,e)})})),this._register((0,f.EH)(e=>{let t=this.currentElement.read(e);(null==t?void 0:t.type)===r.Deleted?this._accessibilitySignalService.playSignal(z.iP.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null==t?void 0:t.type)===r.Added&&this._accessibilitySignalService.playSignal(z.iP.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register((0,f.EH)(e=>{var t;let i=this.currentElement.read(e);if(i&&i.type!==r.Header){let e=null!==(t=i.modifiedLineNumber)&&void 0!==t?t:i.diff.modified.startLineNumber;this._models.modifiedSetSelection(P.e.fromPositions(new A.L(e,1)))}}))}_goToGroupDelta(e,t){let i=this.groups.get();i&&!(i.length<=1)&&(0,f.c8)(t,t=>{this._currentGroupIdx.set(R.q.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),t),this._currentElementIdx.set(0,t)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){let t=this.currentGroup.get();t&&!(t.lines.length<=1)&&(0,f.PS)(i=>{this._currentElementIdx.set(R.q.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){let t=this.currentGroup.get();if(!t)return;let i=t.lines.indexOf(e);-1!==i&&(0,f.PS)(e=>{this._currentElementIdx.set(i,e)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);let e=this.currentElement.get();e&&(e.type===r.Deleted?this._models.originalReveal(P.e.fromPositions(new A.L(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==r.Header?P.e.fromPositions(new A.L(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};function computeViewElementGroups(e,t,i){let n=[];for(let o of(0,D.mw)(e,(e,t)=>t.modified.startLineNumber-e.modified.endLineNumberExclusive<6)){let e=[];e.push(new HeaderViewElement);let r=new M.z(Math.max(1,o[0].original.startLineNumber-3),Math.min(o[o.length-1].original.endLineNumberExclusive+3,t+1)),s=new M.z(Math.max(1,o[0].modified.startLineNumber-3),Math.min(o[o.length-1].modified.endLineNumberExclusive+3,i+1));(0,D.zy)(o,(t,i)=>{let n=new M.z(t?t.original.endLineNumberExclusive:r.startLineNumber,i?i.original.startLineNumber:r.endLineNumberExclusive),o=new M.z(t?t.modified.endLineNumberExclusive:s.startLineNumber,i?i.modified.startLineNumber:s.endLineNumberExclusive);n.forEach(t=>{e.push(new UnchangedLineViewElement(t,o.startLineNumber+(t-n.startLineNumber)))}),i&&(i.original.forEach(t=>{e.push(new DeletedLineViewElement(i,t))}),i.modified.forEach(t=>{e.push(new AddedLineViewElement(i,t))}))});let l=o[0].modified.join(o[o.length-1].modified),d=o[0].original.join(o[o.length-1].original);n.push(new ViewElementGroup(new O.f0(l,d),e))}return n}Z=__decorate([__param(4,z.IV)],Z),(n=r||(r={}))[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added";let ViewElementGroup=class ViewElementGroup{constructor(e,t){this.range=e,this.lines=t}};let HeaderViewElement=class HeaderViewElement{constructor(){this.type=r.Header}};let DeletedLineViewElement=class DeletedLineViewElement{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=r.Deleted,this.modifiedLineNumber=void 0}};let AddedLineViewElement=class AddedLineViewElement{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=r.Added,this.originalLineNumber=void 0}};let UnchangedLineViewElement=class UnchangedLineViewElement{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=r.Unchanged}};let Y=class extends m.JT{constructor(e,t,i,n,o,r){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=o,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";let s=document.createElement("div");s.className="diff-review-actions",this._actionBar=this._register(new w.o(s)),this._register((0,f.EH)(e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new k.aU("diffreview.close",(0,H.NC)("label.close","Close"),"close-diff-review "+N.k.asClassName(G),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new L.s$(this._content,{})),(0,d.mc)(this.domNode,this._scrollbar.getDomNode(),s),this._register((0,f.EH)(e=>{this._height.read(e),this._width.read(e),this._scrollbar.scanDomNode()})),this._register((0,m.OF)(()=>{(0,d.mc)(this.domNode)})),this._register((0,I.bg)(this.domNode,{width:this._width,height:this._height})),this._register((0,I.bg)(this._content,{width:this._width,height:this._height})),this._register((0,f.gp)((e,t)=>{this._model.currentGroup.read(e),this._render(t)})),this._register((0,d.mu)(this.domNode,"keydown",e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){let t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",(0,H.NC)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,E.N)(n,i.get(50)),(0,d.mc)(this._content,n);let o=this._models.getOriginalModel(),s=this._models.getModifiedModel();if(!o||!s)return;let l=o.getOptions(),c=s.getOptions(),u=i.get(67),g=this._model.currentGroup.get();for(let m of(null==g?void 0:g.lines)||[]){let _;if(!g)break;if(m.type===r.Header){let e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");let t=g.range,i=this._model.currentGroupIndex.get(),n=this._model.groups.get().length,getAriaLines=e=>0===e?(0,H.NC)("no_lines_changed","no lines changed"):1===e?(0,H.NC)("one_line_changed","1 line changed"):(0,H.NC)("more_lines_changed","{0} lines changed",e),o=getAriaLines(t.original.length),r=getAriaLines(t.modified.length);e.setAttribute("aria-label",(0,H.NC)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",i+1,n,t.original.startLineNumber,o,t.modified.startLineNumber,r));let s=document.createElement("div");s.className="diff-review-cell diff-review-summary",s.appendChild(document.createTextNode(`${i+1}/${n}: @@ -${t.original.startLineNumber},${t.original.length} +${t.modified.startLineNumber},${t.modified.length} @@`)),e.appendChild(s),_=e}else _=this._createRow(m,u,this._width.get(),t,o,l,i,s,c);n.appendChild(_);let v=(0,f.nK)(e=>this._model.currentElement.read(e)===m);e.add((0,f.EH)(e=>{let t=v.read(e);_.tabIndex=t?0:-1,t&&_.focus()})),e.add((0,d.nm)(_,"focus",()=>{this._model.goToLine(m)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,o,s,l,d,c){let u;let g=n.get(144),m=g.glyphMarginWidth+g.lineNumbersWidth,f=l.get(144),_=10+f.glyphMarginWidth+f.lineNumbersWidth,v="diff-review-row",C="",b=null;switch(e.type){case r.Added:v="diff-review-row line-insert",C=" char-insert",b=j;break;case r.Deleted:v="diff-review-row line-delete",C=" char-delete",b=q}let S=document.createElement("div");S.style.minWidth=i+"px",S.className=v,S.setAttribute("role","listitem"),S.ariaLevel="";let y=document.createElement("div");y.className="diff-review-cell",y.style.height=`${t}px`,S.appendChild(y);let w=document.createElement("span");w.style.width=m+"px",w.style.minWidth=m+"px",w.className="diff-review-line-number"+C,void 0!==e.originalLineNumber?w.appendChild(document.createTextNode(String(e.originalLineNumber))):w.innerText="\xa0",y.appendChild(w);let L=document.createElement("span");L.style.width=_+"px",L.style.minWidth=_+"px",L.style.paddingRight="10px",L.className="diff-review-line-number"+C,void 0!==e.modifiedLineNumber?L.appendChild(document.createTextNode(String(e.modifiedLineNumber))):L.innerText="\xa0",y.appendChild(L);let k=document.createElement("span");if(k.className="diff-review-spacer",b){let e=document.createElement("span");e.className=N.k.asClassName(b),e.innerText="\xa0\xa0",k.appendChild(e)}else k.innerText="\xa0\xa0";if(y.appendChild(k),void 0!==e.modifiedLineNumber){let t=this._getLineHtml(d,l,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Q._ttPolicy&&(t=Q._ttPolicy.createHTML(t)),y.insertAdjacentHTML("beforeend",t),u=d.getLineContent(e.modifiedLineNumber)}else{let t=this._getLineHtml(o,n,s.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Q._ttPolicy&&(t=Q._ttPolicy.createHTML(t)),y.insertAdjacentHTML("beforeend",t),u=o.getLineContent(e.originalLineNumber)}0===u.length&&(u=(0,H.NC)("blankLine","blank"));let D="";switch(e.type){case r.Unchanged:D=e.originalLineNumber===e.modifiedLineNumber?(0,H.NC)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",u,e.originalLineNumber):(0,H.NC)("equalLine","{0} original line {1} modified line {2}",u,e.originalLineNumber,e.modifiedLineNumber);break;case r.Added:D=(0,H.NC)("insertLine","+ {0} modified line {1}",u,e.modifiedLineNumber);break;case r.Deleted:D=(0,H.NC)("deleteLine","- {0} original line {1}",u,e.originalLineNumber)}return S.setAttribute("aria-label",D),S}_getLineHtml(e,t,i,n,o){let r=e.getLineContent(n),s=t.get(50),l=B.A.createEmpty(r,o),d=V.wA.isBasicASCII(r,e.mightContainNonBasicASCII()),c=V.wA.containsRTL(r,d,e.mightContainRTL()),u=(0,W.tF)(new W.IJ(s.isMonospace&&!t.get(33),s.canUseHalfwidthRightwardsArrow,r,!1,d,c,0,l,[],i,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,t.get(117),t.get(99),t.get(94),t.get(51)!==T.n0.OFF,null));return u.html}};Y=__decorate([__param(5,F.O)],Y);let AccessibleDiffViewerModelFromEditors=class AccessibleDiffViewerModelFromEditors{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){var e;return null!==(e=this.editors.modified.getPosition())&&void 0!==e?e:void 0}};let MovedBlocksLinesFeature=class MovedBlocksLinesFeature extends m.JT{constructor(e,t,i,n,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=o,this._originalScrollTop=(0,f.rD)(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,f.rD)(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=(0,f.aq)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,f.uh)(this,0),this._modifiedViewZonesChangedSignal=(0,f.aq)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,f.aq)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,f.Be)(this,(e,t)=>{var i;this._element.replaceChildren();let n=this._diffModel.read(e),o=null===(i=null==n?void 0:n.diff.read(e))||void 0===i?void 0:i.movedTexts;if(!o||0===o.length){this.width.set(0,void 0);return}this._viewZonesChanged.read(e);let r=this._originalEditorLayoutInfo.read(e),s=this._modifiedEditorLayoutInfo.read(e);if(!r||!s){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);let l=o.map(t=>{function computeLineStart(e,t){let i=t.getTopForLineNumber(e.startLineNumber,!0),n=t.getTopForLineNumber(e.endLineNumberExclusive,!0);return(i+n)/2}let i=computeLineStart(t.lineRangeMapping.original,this._editors.original),n=this._originalScrollTop.read(e),o=computeLineStart(t.lineRangeMapping.modified,this._editors.modified),r=this._modifiedScrollTop.read(e),s=i-n,l=o-r,d=Math.min(i,o),c=Math.max(i,o);return{range:new R.q(d,c),from:s,to:l,fromWithoutScroll:i,toWithoutScroll:o,move:t}});l.sort((0,D.f_)((0,D.tT)(e=>e.fromWithoutScroll>e.toWithoutScroll,D.nW),(0,D.tT)(e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll,D.fv)));let d=LinesLayout.compute(l.map(e=>e.range)),c=r.verticalScrollbarWidth,u=(d.getTrackCount()-1)*10+20,g=c+u+(s.contentLeft-MovedBlocksLinesFeature.movedCodeBlockPadding),m=0;for(let e of l){let i=d.getTrack(m),o=c+10+10*i,r=s.glyphMarginWidth+s.lineNumbersWidth,l=document.createElementNS("http://www.w3.org/2000/svg","rect");l.classList.add("arrow-rectangle"),l.setAttribute("x",`${g-r}`),l.setAttribute("y",`${e.to-9}`),l.setAttribute("width",`${r}`),l.setAttribute("height","18"),this._element.appendChild(l);let u=document.createElementNS("http://www.w3.org/2000/svg","g"),_=document.createElementNS("http://www.w3.org/2000/svg","path");_.setAttribute("d",`M 0 ${e.from} L ${o} ${e.from} L ${o} ${e.to} L ${g-15} ${e.to}`),_.setAttribute("fill","none"),u.appendChild(_);let v=document.createElementNS("http://www.w3.org/2000/svg","polygon");v.classList.add("arrow"),t.add((0,f.EH)(t=>{_.classList.toggle("currentMove",e.move===n.activeMovedText.read(t)),v.classList.toggle("currentMove",e.move===n.activeMovedText.read(t))})),v.setAttribute("points",`${g-15},${e.to-7.5} ${g},${e.to} ${g-15},${e.to+7.5}`),u.appendChild(v),this._element.appendChild(u),m++}this.width.set(u,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,m.OF)(()=>this._element.remove())),this._register((0,f.EH)(e=>{let t=this._originalEditorLayoutInfo.read(e),i=this._modifiedEditorLayoutInfo.read(e);t&&i&&(this._element.style.left=`${t.width-t.verticalScrollbarWidth}px`,this._element.style.height=`${t.height}px`,this._element.style.width=`${t.verticalScrollbarWidth+t.contentLeft-MovedBlocksLinesFeature.movedCodeBlockPadding+this.width.read(e)}px`)})),this._register((0,f.jx)(this._state));let r=(0,f.nK)(e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);return i?i.movedTexts.map(e=>({move:e,original:new I.GD((0,f.Dz)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new I.GD((0,f.Dz)(e.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register((0,I.Sv)(this._editors.original,r.map(e=>e.map(e=>e.original)))),this._register((0,I.Sv)(this._editors.modified,r.map(e=>e.map(e=>e.modified)))),this._register((0,f.gp)((e,t)=>{let i=r.read(e);for(let e of i)t.add(new MovedBlockOverlayWidget(this._editors.original,e.original,e.move,"original",this._diffModel.get())),t.add(new MovedBlockOverlayWidget(this._editors.modified,e.modified,e.move,"modified",this._diffModel.get()))}));let s=(0,f.aq)("original.onDidFocusEditorWidget",e=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>e(void 0),0))),l=(0,f.aq)("modified.onDidFocusEditorWidget",e=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>e(void 0),0))),d="modified";this._register((0,f.nJ)({createEmptyChangeSummary:()=>void 0,handleChange:(e,t)=>(e.didChange(s)&&(d="original"),e.didChange(l)&&(d="modified"),!0)},e=>{let t;s.read(e),l.read(e);let i=this._diffModel.read(e);if(!i)return;let n=i.diff.read(e);if(n&&"original"===d){let i=this._editors.originalCursor.read(e);i&&(t=n.movedTexts.find(e=>e.lineRangeMapping.original.contains(i.lineNumber)))}if(n&&"modified"===d){let i=this._editors.modifiedCursor.read(e);i&&(t=n.movedTexts.find(e=>e.lineRangeMapping.modified.contains(i.lineNumber)))}t!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(t)}))}};MovedBlocksLinesFeature.movedCodeBlockPadding=4;let LinesLayout=class LinesLayout{static compute(e){let t=[],i=[];for(let n of e){let e=t.findIndex(e=>!e.intersectsStrict(n));-1===e&&(t.length>=6?e=(0,c.tQ)(t,(0,D.tT)(e=>e.intersectWithRangeLength(n),D.fv)):(e=t.length,t.push(new R.M))),t[e].addRange(n),i.push(e)}return new LinesLayout(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}};let MovedBlockOverlayWidget=class MovedBlockOverlayWidget extends I.N9{constructor(e,t,i,n,o){let r;let s=(0,d.h)("div.diff-hidden-lines-widget");super(e,t,s.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=o,this._nodes=(0,d.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,d.h)("div.text-content@textContent"),(0,d.h)("div.action-bar@actionBar")]),s.root.appendChild(this._nodes.root);let l=(0,f.rD)(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register((0,I.bg)(this._nodes.root,{paddingRight:l.map(e=>e.verticalScrollbarWidth)})),r=i.changes.length>0?"original"===this._kind?(0,H.NC)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,H.NC)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?(0,H.NC)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,H.NC)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);let c=this._register(new w.o(this._nodes.actionBar,{highlightToggledItems:!0})),u=new k.aU("",r,"",!1);c.push(u,{icon:!1,label:!0});let g=new k.aU("","Compare",N.k.asClassName(x.l.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register((0,f.EH)(e=>{let t=this._diffModel.movedTextToCompare.read(e)===i;g.checked=t})),c.push(g,{icon:!1,label:!0})}};var J=i(89476);let DiffEditorDecorations=class DiffEditorDecorations extends m.JT{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=(0,f.nK)(this,e=>{var t;let i=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.diff.read(e);if(!i)return null;let n=this._diffModel.read(e).movedTextToCompare.read(e),o=this._options.renderIndicators.read(e),r=this._options.showEmptyDecorations.read(e),s=[],l=[];if(!n)for(let e of i.mappings)if(e.lineRangeMapping.original.isEmpty||s.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:o?J.iq:J.i_}),e.lineRangeMapping.modified.isEmpty||l.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:o?J.vv:J.rd}),e.lineRangeMapping.modified.isEmpty||e.lineRangeMapping.original.isEmpty)e.lineRangeMapping.original.isEmpty||s.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:J.W3}),e.lineRangeMapping.modified.isEmpty||l.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:J.Jv});else for(let t of e.lineRangeMapping.innerChanges||[])e.lineRangeMapping.original.contains(t.originalRange.startLineNumber)&&s.push({range:t.originalRange,options:t.originalRange.isEmpty()&&r?J.$F:J.rq}),e.lineRangeMapping.modified.contains(t.modifiedRange.startLineNumber)&&l.push({range:t.modifiedRange,options:t.modifiedRange.isEmpty()&&r?J.n_:J.LE});if(n)for(let e of n.changes){let t=e.original.toInclusiveRange();t&&s.push({range:t,options:o?J.iq:J.i_});let i=e.modified.toInclusiveRange();for(let t of(i&&l.push({range:i,options:o?J.vv:J.rd}),e.innerChanges||[]))s.push({range:t.originalRange,options:J.rq}),l.push({range:t.modifiedRange,options:J.LE})}let d=this._diffModel.read(e).activeMovedText.read(e);for(let e of i.movedTexts)s.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(e===d?" currentMove":""),blockPadding:[MovedBlocksLinesFeature.movedCodeBlockPadding,0,MovedBlocksLinesFeature.movedCodeBlockPadding,MovedBlocksLinesFeature.movedCodeBlockPadding]}}),l.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(e===d?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:s,modifiedDecorations:l}}),this._register((0,I.RP)(this._editors.original,this._decorations.map(e=>(null==e?void 0:e.originalDecorations)||[]))),this._register((0,I.RP)(this._editors.modified,this._decorations.map(e=>(null==e?void 0:e.modifiedDecorations)||[])))}};var X=i(46474);let DiffEditorSash=class DiffEditorSash extends m.JT{constructor(e,t,i,n){super(),this._options=e,this._domNode=t,this._dimensions=i,this._sashes=n,this._sashRatio=(0,f.uh)(this,void 0),this.sashLeft=(0,f.nK)(this,e=>{var t;let i=null!==(t=this._sashRatio.read(e))&&void 0!==t?t:this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(i,e)}),this._sash=this._register(new X.g(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(e=>{let t=this._dimensions.width.get(),i=this._computeSashLeft((this._startSashPosition+(e.currentX-e.startX))/t,void 0);this._sashRatio.set(i/t,void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._sashRatio.set(void 0,void 0))),this._register((0,f.EH)(e=>{let t=this._sashes.read(e);t&&(this._sash.orthogonalEndSash=t.bottom)})),this._register((0,f.EH)(e=>{let t=this._options.enableSplitViewResizing.read(e);this._sash.state=t?3:0,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()}))}_computeSashLeft(e,t){let i=this._dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n;return i<=200?n:o<100?100:o>i-100?i-100:o}};var ee=i(41212),et=i(66614),ei=i(16877),en=i(45828),eo=i(95026),er=i(38345),es=i(2068),ea=i(85363),diffProviderFactoryService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},diffProviderFactoryService_param=function(e,t){return function(i,n){t(i,n,e)}};let el=(0,U.yh)("diffProviderFactoryService"),ed=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(eh,e)}};ed=diffProviderFactoryService_decorate([diffProviderFactoryService_param(0,U.TG)],ed),(0,eo.z)(el,ed,1);let eh=s=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new g.Q5,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}async computeDiff(e,t,i,n){var o,r;if("string"!=typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,t,i,n);if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===t.getLineCount()&&1===t.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new O.gB(new M.z(1,2),new M.z(1,t.getLineCount()+1),[new O.iy(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};let l=JSON.stringify([e.uri.toString(),t.uri.toString()]),d=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),c=s.diffCache.get(l);if(c&&c.context===d)return c.result;let u=er.G.create(),g=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),m=u.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:m,timedOut:null===(o=null==g?void 0:g.quitEarly)||void 0===o||o,detectedMoves:i.computeMoves?null!==(r=null==g?void 0:g.moves.length)&&void 0!==r?r:0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!g)throw Error("no diff result available");return s.diffCache.size>10&&s.diffCache.delete(s.diffCache.keys().next().value),s.diffCache.set(l,{result:g,context:d}),g}setOptions(e){var t;let i=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(null===(t=this.diffAlgorithmOnDidChangeSubscription)||void 0===t||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!=typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),i=!0),i&&this.onDidChangeEventEmitter.fire()}};eh.diffCache=new Map,eh=s=diffProviderFactoryService_decorate([diffProviderFactoryService_param(1,es.p),diffProviderFactoryService_param(2,ea.b)],eh);var ec=i(53182),eu=i(12144),eg=i(61232),ep=i(36330),em=i(77853);let ef=class extends m.JT{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=(0,f.uh)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,f.uh)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,f.uh)(this,void 0),this.unchangedRegions=(0,f.nK)(this,e=>{var t,i;return this._options.hideUnchangedRegions.read(e)?null!==(i=null===(t=this._unchangedRegions.read(e))||void 0===t?void 0:t.regions)&&void 0!==i?i:[]:((0,f.PS)(e=>{var t;for(let i of(null===(t=this._unchangedRegions.get())||void 0===t?void 0:t.regions)||[])i.collapseAll(e)}),[])}),this.movedTextToCompare=(0,f.uh)(this,void 0),this._activeMovedText=(0,f.uh)(this,void 0),this._hoveredMovedText=(0,f.uh)(this,void 0),this.activeMovedText=(0,f.nK)(this,e=>{var t,i;return null!==(i=null!==(t=this.movedTextToCompare.read(e))&&void 0!==t?t:this._hoveredMovedText.read(e))&&void 0!==i?i:this._activeMovedText.read(e)}),this._cancellationTokenSource=new en.A,this._diffProvider=(0,f.nK)(this,e=>{let t=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(e)}),i=(0,f.aq)("onDidChange",t.onDidChange);return{diffProvider:t,onChangeSignal:i}}),this._register((0,m.OF)(()=>this._cancellationTokenSource.cancel()));let n=(0,f.GN)("contentChangedSignal"),o=this._register(new et.pY(()=>n.trigger(void 0),200));this._register((0,f.EH)(t=>{let i=this._unchangedRegions.read(t);if(!i||i.regions.some(e=>e.isDragged.read(t)))return;let n=i.originalDecorationIds.map(t=>e.original.getDecorationRange(t)).map(e=>e?M.z.fromRangeInclusive(e):void 0),o=i.modifiedDecorationIds.map(t=>e.modified.getDecorationRange(t)).map(e=>e?M.z.fromRangeInclusive(e):void 0),r=i.regions.map((e,i)=>n[i]&&o[i]?new UnchangedRegion(n[i].startLineNumber,o[i].startLineNumber,n[i].length,e.visibleLineCountTop.read(t),e.visibleLineCountBottom.read(t)):void 0).filter(ei.$K),s=[],l=!1;for(let e of(0,D.mw)(r,(e,i)=>e.getHiddenModifiedRange(t).endLineNumberExclusive===i.getHiddenModifiedRange(t).startLineNumber))if(e.length>1){l=!0;let t=e.reduce((e,t)=>e+t.lineCount,0),i=new UnchangedRegion(e[0].originalLineNumber,e[0].modifiedLineNumber,t,e[0].visibleLineCountTop.get(),e[e.length-1].visibleLineCountBottom.get());s.push(i)}else s.push(e[0]);if(l){let t=e.original.deltaDecorations(i.originalDecorationIds,s.map(e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),n=e.modified.deltaDecorations(i.modifiedDecorationIds,s.map(e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));(0,f.PS)(e=>{this._unchangedRegions.set({regions:s,originalDecorationIds:t,modifiedDecorationIds:n},e)})}}));let updateUnchangedRegions=(t,i,n)=>{let o;let r=UnchangedRegion.fromDiffs(t.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(n),this._options.hideUnchangedRegionsContextLineCount.read(n)),s=this._unchangedRegions.get();if(s){let t=s.originalDecorationIds.map(t=>e.original.getDecorationRange(t)).map(e=>e?M.z.fromRangeInclusive(e):void 0),i=s.modifiedDecorationIds.map(t=>e.modified.getDecorationRange(t)).map(e=>e?M.z.fromRangeInclusive(e):void 0),r=(0,I.W7)(s.regions.map((e,n)=>{if(!t[n]||!i[n])return;let o=t[n].length;return new UnchangedRegion(t[n].startLineNumber,i[n].startLineNumber,o,Math.min(e.visibleLineCountTop.get(),o),Math.min(e.visibleLineCountBottom.get(),o-e.visibleLineCountTop.get()))}).filter(ei.$K),(e,t)=>!t||e.modifiedLineNumber>=t.modifiedLineNumber+t.lineCount&&e.originalLineNumber>=t.originalLineNumber+t.lineCount),l=r.map(e=>new O.f0(e.getHiddenOriginalRange(n),e.getHiddenModifiedRange(n)));l=O.f0.clip(l,M.z.ofLength(1,e.original.getLineCount()),M.z.ofLength(1,e.modified.getLineCount())),o=O.f0.inverse(l,e.original.getLineCount(),e.modified.getLineCount())}let l=[];if(o)for(let e of r){let t=o.filter(t=>t.original.intersectsStrict(e.originalUnchangedRange)&&t.modified.intersectsStrict(e.modifiedUnchangedRange));l.push(...e.setVisibleRanges(t,i))}else l.push(...r);let d=e.original.deltaDecorations((null==s?void 0:s.originalDecorationIds)||[],l.map(e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),c=e.modified.deltaDecorations((null==s?void 0:s.modifiedDecorationIds)||[],l.map(e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:l,originalDecorationIds:d,modifiedDecorationIds:c},i)};this._register(e.modified.onDidChangeContent(t=>{let i=this._diff.get();if(i){let i=eu.Q.fromModelContentChanges(t.changes),n=applyModifiedEdits(this._lastDiff,i,e.original,e.modified);n&&(this._lastDiff=n,(0,f.PS)(e=>{this._diff.set(DiffState.fromDiffResult(this._lastDiff),e),updateUnchangedRegions(n,e);let t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find(e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified)):void 0,e)}))}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(e.original.onDidChangeContent(t=>{let i=this._diff.get();if(i){let i=eu.Q.fromModelContentChanges(t.changes),n=applyOriginalEdits(this._lastDiff,i,e.original,e.modified);n&&(this._lastDiff=n,(0,f.PS)(e=>{this._diff.set(DiffState.fromDiffResult(this._lastDiff),e),updateUnchangedRegions(n,e);let t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find(e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified)):void 0,e)}))}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register((0,f.gp)(async(t,i)=>{var r,s;this._options.hideUnchangedRegionsMinimumLineCount.read(t),this._options.hideUnchangedRegionsContextLineCount.read(t),o.cancel(),n.read(t);let l=this._diffProvider.read(t);l.onChangeSignal.read(t),(0,I.NW)(ec.DW,t),(0,I.NW)(ep.xG,t),this._isDiffUpToDate.set(!1,void 0);let d=[];i.add(e.original.onDidChangeContent(e=>{let t=eu.Q.fromModelContentChanges(e.changes);d=(0,eg.o)(d,t)}));let c=[];i.add(e.modified.onDidChangeContent(e=>{let t=eu.Q.fromModelContentChanges(e.changes);c=(0,eg.o)(c,t)}));let u=await l.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(t),maxComputationTimeMs:this._options.maxComputationTimeMs.read(t),computeMoves:this._options.showMoves.read(t)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||(u=null!==(s=applyModifiedEdits(u=null!==(r=applyOriginalEdits(u=normalizeDocumentDiff(u,e.original,e.modified),d,e.original,e.modified))&&void 0!==r?r:u,c,e.original,e.modified))&&void 0!==s?s:u,(0,f.PS)(e=>{updateUnchangedRegions(u,e),this._lastDiff=u;let t=DiffState.fromDiffResult(u);this._diff.set(t,e),this._isDiffUpToDate.set(!0,e);let i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find(e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified)):void 0,e)}))}))}ensureModifiedLineIsVisible(e,t,i){var n,o;if((null===(n=this.diff.get())||void 0===n?void 0:n.mappings.length)===0)return;let r=(null===(o=this._unchangedRegions.get())||void 0===o?void 0:o.regions)||[];for(let n of r)if(n.getHiddenModifiedRange(void 0).contains(e)){n.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var n,o;if((null===(n=this.diff.get())||void 0===n?void 0:n.mappings.length)===0)return;let r=(null===(o=this._unchangedRegions.get())||void 0===o?void 0:o.regions)||[];for(let n of r)if(n.getHiddenOriginalRange(void 0).contains(e)){n.showOriginalLine(e,t,i);return}}async waitForDiff(){await (0,f.F_)(this.isDiffUpToDate,e=>e)}serializeState(){let e=this._unchangedRegions.get();return{collapsedRegions:null==e?void 0:e.regions.map(e=>({range:e.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var t;let i=null===(t=e.collapsedRegions)||void 0===t?void 0:t.map(e=>M.z.deserialize(e.range)),n=this._unchangedRegions.get();n&&i&&(0,f.PS)(e=>{for(let t of n.regions)for(let n of i)if(t.modifiedUnchangedRange.intersect(n)){t.setHiddenModifiedRange(n,e);break}})}};function normalizeDocumentDiff(e,t,i){return{changes:e.changes.map(e=>new O.gB(e.original,e.modified,e.innerChanges?e.innerChanges.map(e=>normalizeRangeMapping(e,t,i)):void 0)),moves:e.moves,identical:e.identical,quitEarly:e.quitEarly}}function normalizeRangeMapping(e,t,i){let n=e.originalRange,o=e.modifiedRange;return(1!==n.endColumn||1!==o.endColumn)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&o.endColumn===i.getLineMaxColumn(o.endLineNumber)&&n.endLineNumber<t.getLineCount()&&o.endLineNumber<i.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),o=o.setEndPosition(o.endLineNumber+1,1)),new O.iy(n,o)}ef=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([function(e,t){el(e,t,2)}],ef);let DiffState=class DiffState{static fromDiffResult(e){return new DiffState(e.changes.map(e=>new DiffMapping(e)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}};let DiffMapping=class DiffMapping{constructor(e){this.lineRangeMapping=e}};let UnchangedRegion=class UnchangedRegion{static fromDiffs(e,t,i,n,o){let r=O.gB.inverse(e,t,i),s=[];for(let e of r){let r=e.original.startLineNumber,l=e.modified.startLineNumber,d=e.original.length,c=1===r&&1===l,u=r+d===t+1&&l+d===i+1;(c||u)&&d>=o+n?(c&&!u&&(d-=o),u&&!c&&(r+=o,l+=o,d-=o),s.push(new UnchangedRegion(r,l,d,0,0))):d>=2*o+n&&(r+=o,l+=o,d-=2*o,s.push(new UnchangedRegion(r,l,d,0,0)))}return s}get originalUnchangedRange(){return M.z.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return M.z.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,n,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=(0,f.uh)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,f.uh)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,f.nK)(this,e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e)),this.isDragged=(0,f.uh)(this,void 0);let r=Math.max(Math.min(n,this.lineCount),0),s=Math.max(Math.min(o,this.lineCount-n),0);(0,em.wN)(n===r),(0,em.wN)(o===s),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(s,void 0)}setVisibleRanges(e,t){let i=[],n=new M.i(e.map(e=>e.modified)).subtractFrom(this.modifiedUnchangedRange),o=this.originalLineNumber,r=this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount;if(0===n.ranges.length)this.showAll(t),i.push(this);else{let e=0;for(let l of n.ranges){let d=e===n.ranges.length-1;e++;let c=(d?s:l.endLineNumberExclusive)-r,u=new UnchangedRegion(o,r,c,0,0);u.setHiddenModifiedRange(l,t),i.push(u),o=u.originalUnchangedRange.endLineNumberExclusive,r=u.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return M.z.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return M.z.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){let i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){let i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){let i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){let n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===t&&n<o||1===t?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,i)}showOriginalLine(e,t,i){let n=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;0===t&&n<o||1===t?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-o,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}};function applyOriginalEdits(e,t,i,n){}function applyModifiedEdits(e,t,i,n){}var e_=i(88059);let InlineDiffDeletedCodeMargin=class InlineDiffDeletedCodeMargin extends m.JT{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,n,o,r,s,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=o,this._viewLineCounts=r,this._originalTextModel=s,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=N.k.asClassName(x.l.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";let u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let g=0,m=i.getOption(127)&&!e_.gn,showContextMenu=(e,t)=>{var o;this._contextMenuService.showContextMenu({domForShadowRoot:m&&null!==(o=i.getDomNode())&&void 0!==o?o:void 0,getAnchor:()=>({x:e,y:t}),getActions:()=>{let e=[],t=n.modified.isEmpty;e.push(new k.aU("diff.clipboard.copyDeletedContent",t?n.original.length>1?(0,H.NC)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,H.NC)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?(0,H.NC)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,H.NC)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{let e=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(e)})),n.original.length>1&&e.push(new k.aU("diff.clipboard.copyDeletedLineContent",t?(0,H.NC)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+g):(0,H.NC)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+g),void 0,!0,async()=>{let e=this._originalTextModel.getLineContent(n.original.startLineNumber+g);if(""===e){let t=this._originalTextModel.getEndOfLineSequence();e=0===t?"\n":"\r\n"}await this._clipboardService.writeText(e)}));let o=i.getOption(91);return o||e.push(new k.aU("diff.inline.revertChange",(0,H.NC)("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),e},autoSelectFirstItem:!0})};this._register((0,d.mu)(this._diffActions,"mousedown",e=>{if(!e.leftButton)return;let{top:t,height:i}=(0,d.i)(this._diffActions),n=Math.floor(u/3);e.preventDefault(),showContextMenu(e.posx,t+i+n)})),this._register(i.onMouseMove(e=>{(8===e.target.type||5===e.target.type)&&e.target.detail.viewZoneId===this._getViewZoneId()?(g=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(e=>{if(e.event.leftButton&&(8===e.target.type||5===e.target.type)){let t=e.target.detail.viewZoneId;t===this._getViewZoneId()&&(e.event.preventDefault(),g=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,u),showContextMenu(e.event.posx,e.event.posy+u))}}))}_updateLightBulbPosition(e,t,i){let{top:n}=(0,d.i)(e),o=Math.floor((t-n)/i);if(this._diffActions.style.top=`${o*i}px`,this._viewLineCounts){let e=0;for(let t=0;t<this._viewLineCounts.length;t++)if(o<(e+=this._viewLineCounts[t]))return t}return o}};var ev=i(53778),eC=i(76320);let eb=(0,y.Z)("diffEditorWidget",{createHTML:e=>e});function renderLines(e,t,i,n){(0,E.N)(n,t.fontInfo);let o=i.length>0,r=new ev.HT(1e4),s=0,l=0,d=[];for(let n=0;n<e.lineTokens.length;n++){let c=n+1,u=e.lineTokens[n],g=e.lineBreakData[n],m=eC.Kp.filter(i,c,1,Number.MAX_SAFE_INTEGER);if(g){let i=0;for(let n of g.breakOffsets){let d=u.sliceAndInflate(i,n,0);s=Math.max(s,renderOriginalLine(l,d,eC.Kp.extractWrapped(m,i,n),o,e.mightContainNonBasicASCII,e.mightContainRTL,t,r)),l++,i=n}d.push(g.breakOffsets.length)}else d.push(1),s=Math.max(s,renderOriginalLine(l,u,m,o,e.mightContainNonBasicASCII,e.mightContainRTL,t,r)),l++}s+=t.scrollBeyondLastColumn;let c=r.build(),u=eb?eb.createHTML(c):c;n.innerHTML=u;let g=s*t.typicalHalfwidthCharacterWidth;return{heightInLines:l,minWidthInPx:g,viewLineCounts:d}}let LineSource=class LineSource{constructor(e,t,i,n){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}};let RenderOptions=class RenderOptions{static fromEditor(e){var t;let i=e.getOptions(),n=i.get(50),o=i.get(144);return new RenderOptions((null===(t=e.getModel())||void 0===t?void 0:t.getOptions().tabSize)||0,n,i.get(33),n.typicalHalfwidthCharacterWidth,i.get(104),i.get(67),o.decorationsWidth,i.get(117),i.get(99),i.get(94),i.get(51))}constructor(e,t,i,n,o,r,s,l,d,c,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=o,this.lineHeight=r,this.lineDecorationsWidth=s,this.stopRenderingLineAfter=l,this.renderWhitespace=d,this.renderControlCharacters=c,this.fontLigatures=u}};function renderOriginalLine(e,t,i,n,o,r,s,l){l.appendString('<div class="view-line'),n||l.appendString(" char-delete"),l.appendString('" style="top:'),l.appendString(String(e*s.lineHeight)),l.appendString('px;width:1000000px;">');let d=t.getLineContent(),c=V.wA.isBasicASCII(d,o),u=V.wA.containsRTL(d,c,r),g=(0,W.d1)(new W.IJ(s.fontInfo.isMonospace&&!s.disableMonospaceOptimizations,s.fontInfo.canUseHalfwidthRightwardsArrow,d,!1,c,u,0,t,i,s.tabSize,0,s.fontInfo.spaceWidth,s.fontInfo.middotWidth,s.fontInfo.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==T.n0.OFF,null),l);return l.appendString("</div>"),g.characterMapping.getHorizontalOffset(g.characterMapping.length)}var eS=i(19695),ey=i(64252),diffEditorViewZones_param=function(e,t){return function(i,n){t(i,n,e)}};let ew=class extends m.JT{constructor(e,t,i,n,o,r,s,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=o,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=s,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=(0,f.uh)(this,0),this._originalScrollOffset=(0,f.uh)(this,0),this._originalScrollOffsetAnimated=(0,I.Vm)(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,f.uh)(this,0),this._modifiedScrollOffset=(0,f.uh)(this,0),this._modifiedScrollOffsetAnimated=(0,I.Vm)(this._targetWindow,this._modifiedScrollOffset,this._store);let g=(0,f.uh)("invalidateAlignmentsState",0),_=this._register(new et.pY(()=>{g.set(g.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(e=>{this._canIgnoreViewZoneUpdateEvent()||_.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(e=>{this._canIgnoreViewZoneUpdateEvent()||_.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(e=>{(e.hasChanged(145)||e.hasChanged(67))&&_.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(e=>{(e.hasChanged(145)||e.hasChanged(67))&&_.schedule()}));let v=this._diffModel.map(e=>e?(0,f.rD)(e.model.original.onDidChangeTokens,()=>2===e.model.original.tokenization.backgroundTokenizationState):void 0).map((e,t)=>null==e?void 0:e.read(t)),C=(0,f.nK)(e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);if(!t||!i)return null;g.read(e);let n=this._options.renderSideBySide.read(e);return computeRangeAlignment(this._editors.original,this._editors.modified,i.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,n)}),b=(0,f.nK)(e=>{var t;let i=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e);if(!i)return null;g.read(e);let n=i.changes.map(e=>new DiffMapping(e));return computeRangeAlignment(this._editors.original,this._editors.modified,n,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function createFakeLinesDiv(){let e=document.createElement("div");return e.className="diagonal-fill",e}let S=this._register(new m.SL);this.viewZones=(0,f.Be)(this,(e,t)=>{var i,n,r,s,l,c,u,g;S.clear();let m=C.read(e)||[],f=[],_=[],y=this._modifiedTopPadding.read(e);y>0&&_.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:y,showInHiddenAreas:!0,suppressMouseDown:!0});let w=this._originalTopPadding.read(e);w>0&&f.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:w,showInHiddenAreas:!0,suppressMouseDown:!0});let L=this._options.renderSideBySide.read(e),k=L?void 0:null===(i=this._editors.modified._getViewModel())||void 0===i?void 0:i.createLineBreaksComputer();if(k){let e=this._editors.original.getModel();for(let t of m)if(t.diff)for(let i=t.originalRange.startLineNumber;i<t.originalRange.endLineNumberExclusive;i++){if(i>e.getLineCount())return{orig:f,mod:_};null==k||k.addRequest(e.getLineContent(i),null,null)}}let D=null!==(n=null==k?void 0:k.finalize())&&void 0!==n?n:[],I=0,T=this._editors.modified.getOption(67),M=null===(r=this._diffModel.read(e))||void 0===r?void 0:r.movedTextToCompare.read(e),R=null!==(l=null===(s=this._editors.original.getModel())||void 0===s?void 0:s.mightContainNonBasicASCII())&&void 0!==l&&l,A=null!==(u=null===(c=this._editors.original.getModel())||void 0===c?void 0:c.mightContainRTL())&&void 0!==u&&u,P=RenderOptions.fromEditor(this._editors.modified);for(let i of m)if(i.diff&&!L){if(!i.originalRange.isEmpty){let t;v.read(e);let n=document.createElement("div");n.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");let o=this._editors.original.getModel();if(i.originalRange.endLineNumberExclusive-1>o.getLineCount())return{orig:f,mod:_};let r=new LineSource(i.originalRange.mapToLineArray(e=>o.tokenization.getLineTokens(e)),i.originalRange.mapToLineArray(e=>D[I++]),R,A),s=[];for(let e of i.diff.innerChanges||[])s.push(new V.$t(e.originalRange.delta(-(i.diff.original.startLineNumber-1)),J.rq.className,0));let l=renderLines(r,P,s,n),d=document.createElement("div");if(d.className="inline-deleted-margin-view-zone",(0,E.N)(d,P.fontInfo),this._options.renderIndicators.read(e))for(let e=0;e<l.heightInLines;e++){let t=document.createElement("div");t.className=`delete-sign ${N.k.asClassName(J.fO)}`,t.setAttribute("style",`position:absolute;top:${e*T}px;width:${P.lineDecorationsWidth}px;height:${T}px;right:0;`),d.appendChild(t)}S.add(new InlineDiffDeletedCodeMargin(()=>(0,ei.cW)(t),d,this._editors.modified,i.diff,this._diffEditorWidget,l.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let e=0;e<l.viewLineCounts.length;e++){let t=l.viewLineCounts[e];t>1&&f.push({afterLineNumber:i.originalRange.startLineNumber+e,domNode:createFakeLinesDiv(),heightInPx:(t-1)*T,showInHiddenAreas:!0,suppressMouseDown:!0})}_.push({afterLineNumber:i.modifiedRange.startLineNumber-1,domNode:n,heightInPx:l.heightInLines*T,minWidthInPx:l.minWidthInPx,marginDomNode:d,setZoneId(e){t=e},showInHiddenAreas:!0,suppressMouseDown:!0})}let t=document.createElement("div");t.className="gutter-delete",f.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:createFakeLinesDiv(),heightInPx:i.modifiedHeightInPx,marginDomNode:t,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let n=i.modifiedHeightInPx-i.originalHeightInPx;if(n>0){if(null==M?void 0:M.lineRangeMapping.original.delta(-1).deltaLength(2).contains(i.originalRange.endLineNumberExclusive-1))continue;f.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:createFakeLinesDiv(),heightInPx:n,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let r;if(null==M?void 0:M.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(i.modifiedRange.endLineNumberExclusive-1))continue;function createViewZoneMarginArrow(){let e=document.createElement("div");return e.className="arrow-revert-change "+N.k.asClassName(x.l.arrowRight),t.add((0,d.nm)(e,"mousedown",e=>e.stopPropagation())),t.add((0,d.nm)(e,"click",e=>{e.stopPropagation(),o.revert(i.diff)})),(0,d.$)("div",{},e)}i.diff&&i.diff.modified.isEmpty&&this._options.shouldRenderRevertArrows.read(e)&&(r=createViewZoneMarginArrow()),_.push({afterLineNumber:i.modifiedRange.endLineNumberExclusive-1,domNode:createFakeLinesDiv(),heightInPx:-n,marginDomNode:r,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(let t of null!==(g=b.read(e))&&void 0!==g?g:[]){if(!(null==M?void 0:M.lineRangeMapping.original.intersect(t.originalRange))||!(null==M?void 0:M.lineRangeMapping.modified.intersect(t.modifiedRange)))continue;let e=t.modifiedHeightInPx-t.originalHeightInPx;e>0?f.push({afterLineNumber:t.originalRange.endLineNumberExclusive-1,domNode:createFakeLinesDiv(),heightInPx:e,showInHiddenAreas:!0,suppressMouseDown:!0}):_.push({afterLineNumber:t.modifiedRange.endLineNumberExclusive-1,domNode:createFakeLinesDiv(),heightInPx:-e,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:f,mod:_}});let y=!1;this._register(this._editors.original.onDidScrollChange(e=>{e.scrollLeftChanged&&!y&&(y=!0,this._editors.modified.setScrollLeft(e.scrollLeft),y=!1)})),this._register(this._editors.modified.onDidScrollChange(e=>{e.scrollLeftChanged&&!y&&(y=!0,this._editors.original.setScrollLeft(e.scrollLeft),y=!1)})),this._originalScrollTop=(0,f.rD)(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,f.rD)(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register((0,f.EH)(e=>{let t=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));t!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(t,1)})),this._register((0,f.EH)(e=>{let t=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));t!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(t,1)})),this._register((0,f.EH)(e=>{var t;let i=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e),n=0;if(i){let e=this._editors.original.getTopForLineNumber(i.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get(),t=this._editors.modified.getTopForLineNumber(i.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get();n=t-e}n>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(n,void 0)):n<0?(this._modifiedTopPadding.set(-n,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-n,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+n,void 0,!0)}))}};function computeRangeAlignment(e,t,i,n,o,r){let s=new D.H9(getAdditionalLineHeights(e,n)),l=new D.H9(getAdditionalLineHeights(t,o)),d=e.getOption(67),c=t.getOption(67),u=[],g=0,m=0;function handleAlignmentsOutsideOfDiffs(e,t){for(;;){let i=s.peek(),n=l.peek();if(i&&i.lineNumber>=e&&(i=void 0),n&&n.lineNumber>=t&&(n=void 0),!i&&!n)break;let o=i?i.lineNumber-g:Number.MAX_VALUE,r=n?n.lineNumber-m:Number.MAX_VALUE;o<r?(s.dequeue(),n={lineNumber:i.lineNumber-g+m,heightInPx:0}):o>r?(l.dequeue(),i={lineNumber:n.lineNumber-m+g,heightInPx:0}):(s.dequeue(),l.dequeue()),u.push({originalRange:M.z.ofLength(i.lineNumber,1),modifiedRange:M.z.ofLength(n.lineNumber,1),originalHeightInPx:d+i.heightInPx,modifiedHeightInPx:c+n.heightInPx,diff:void 0})}}for(let t of i){let i=t.lineRangeMapping;handleAlignmentsOutsideOfDiffs(i.original.startLineNumber,i.modified.startLineNumber);let n=!0,o=i.modified.startLineNumber,f=i.original.startLineNumber;function emitAlignment(e,i){var r,g,m,_;if(e<f||i<o)return;if(n)n=!1;else if(e===f||i===o)return;let v=new M.z(f,e),C=new M.z(o,i);if(v.isEmpty&&C.isEmpty)return;let b=null!==(g=null===(r=s.takeWhile(t=>t.lineNumber<e))||void 0===r?void 0:r.reduce((e,t)=>e+t.heightInPx,0))&&void 0!==g?g:0,S=null!==(_=null===(m=l.takeWhile(e=>e.lineNumber<i))||void 0===m?void 0:m.reduce((e,t)=>e+t.heightInPx,0))&&void 0!==_?_:0;u.push({originalRange:v,modifiedRange:C,originalHeightInPx:v.length*d+b,modifiedHeightInPx:C.length*c+S,diff:t.lineRangeMapping}),f=e,o=i}if(r)for(let t of i.innerChanges||[]){t.originalRange.startColumn>1&&t.modifiedRange.startColumn>1&&emitAlignment(t.originalRange.startLineNumber,t.modifiedRange.startLineNumber);let i=e.getModel(),n=t.originalRange.endLineNumber<=i.getLineCount()?i.getLineMaxColumn(t.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;t.originalRange.endColumn<n&&emitAlignment(t.originalRange.endLineNumber,t.modifiedRange.endLineNumber)}emitAlignment(i.original.endLineNumberExclusive,i.modified.endLineNumberExclusive),g=i.original.endLineNumberExclusive,m=i.modified.endLineNumberExclusive}return handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE,Number.MAX_VALUE),u}function getAdditionalLineHeights(e,t){let i=[],n=[],o=-1!==e.getOption(145).wrappingColumn,r=e._getViewModel().coordinatesConverter,s=e.getOption(67);if(o)for(let t=1;t<=e.getModel().getLineCount();t++){let e=r.getModelLineViewLineCount(t);e>1&&n.push({lineNumber:t,heightInPx:s*(e-1)})}for(let n of e.getWhitespaces()){if(t.has(n.id))continue;let e=0===n.afterLineNumber?0:r.convertViewPositionToModelPosition(new A.L(n.afterLineNumber,1)).lineNumber;i.push({lineNumber:e,heightInPx:n.height})}let l=(0,I.Ap)(i,n,e=>e.lineNumber,(e,t)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+t.heightInPx}));return l}ew=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([diffEditorViewZones_param(8,eS.p),diffEditorViewZones_param(9,ey.i)],ew);var eL=i(8063),ek=i(22601),eD=i(52271),ex=i(45815),eN=i(93672);let eE=l=class extends m.JT{constructor(e,t,i,n,o,r,s){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=o,this._modifiedEditorLayoutInfo=r,this._themeService=s,this.width=l.ENTIRE_DIFF_OVERVIEW_WIDTH;let c=(0,f.rD)(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),u=(0,f.nK)(e=>{let t=c.read(e),i=t.getColor(ex.P6Y)||(t.getColor(ex.ypS)||ex.CzK).transparent(2),n=t.getColor(ex.F9q)||(t.getColor(ex.P4M)||ex.keg).transparent(2);return{insertColor:i,removeColor:n}}),g=(0,eL.X)(document.createElement("div"));g.setClassName("diffViewport"),g.setPosition("absolute");let m=(0,d.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:l.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register((0,I.xx)(m,g.domNode)),this._register((0,d.mu)(m,d.tw.POINTER_DOWN,e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)})),this._register((0,d.nm)(m,d.tw.MOUSE_WHEEL,e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)},{passive:!1})),this._register((0,I.xx)(this._rootElement,m)),this._register((0,f.gp)((e,t)=>{let i=this._diffModel.read(e),n=this._editors.original.createOverviewRuler("original diffOverviewRuler");n&&(t.add(n),t.add((0,I.xx)(m,n.getDomNode())));let o=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(o&&(t.add(o),t.add((0,I.xx)(m,o.getDomNode()))),!n||!o)return;let r=(0,f.aq)("viewZoneChanged",this._editors.original.onDidChangeViewZones),s=(0,f.aq)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),d=(0,f.aq)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),c=(0,f.aq)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);t.add((0,f.EH)(e=>{var t;r.read(e),s.read(e),d.read(e),c.read(e);let l=u.read(e),g=null===(t=null==i?void 0:i.diff.read(e))||void 0===t?void 0:t.mappings;function createZones(e,t,i){let n=i._getViewModel();return n?e.filter(e=>e.length>0).map(e=>{let i=n.coordinatesConverter.convertModelPositionToViewPosition(new A.L(e.startLineNumber,1)),o=n.coordinatesConverter.convertModelPositionToViewPosition(new A.L(e.endLineNumberExclusive,1)),r=o.lineNumber-i.lineNumber;return new eD.EY(i.lineNumber,o.lineNumber,r,t.toString())}):[]}let m=createZones((g||[]).map(e=>e.lineRangeMapping.original),l.removeColor,this._editors.original),f=createZones((g||[]).map(e=>e.lineRangeMapping.modified),l.insertColor,this._editors.modified);null==n||n.setZones(m),null==o||o.setZones(f)})),t.add((0,f.EH)(e=>{let t=this._rootHeight.read(e),i=this._rootWidth.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(r){let i=l.ENTIRE_DIFF_OVERVIEW_WIDTH-2*l.ONE_OVERVIEW_WIDTH;n.setLayout({top:0,height:t,right:i+l.ONE_OVERVIEW_WIDTH,width:l.ONE_OVERVIEW_WIDTH}),o.setLayout({top:0,height:t,right:0,width:l.ONE_OVERVIEW_WIDTH});let s=this._editors.modifiedScrollTop.read(e),d=this._editors.modifiedScrollHeight.read(e),c=this._editors.modified.getOption(103),u=new ek.M(c.verticalHasArrows?c.arrowSize:0,c.verticalScrollbarSize,0,r.height,d,s);g.setTop(u.getSliderPosition()),g.setHeight(u.getSliderSize())}else g.setTop(0),g.setHeight(0);m.style.height=t+"px",m.style.left=i-l.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",g.setWidth(l.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}};eE.ONE_OVERVIEW_WIDTH=15,eE.ENTIRE_DIFF_OVERVIEW_WIDTH=2*l.ONE_OVERVIEW_WIDTH,eE=l=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(o=eN.XE,function(e,t){o(e,t,6)})],eE);var eI=i(97292),eT=i(97240),eM=i(7193),eR=i(3488),eA=i(26248);let DelegatingEditor=class DelegatingEditor extends m.JT{constructor(){super(...arguments),this._id=++DelegatingEditor.idCounter,this._onDidDispose=this._register(new g.Q5),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};DelegatingEditor.idCounter=0;var eP=i(18333),diffEditorEditors_param=function(e,t){return function(i,n){t(i,n,e)}};let eO=class extends m.JT{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,n,o,r,s){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._createInnerEditor=o,this._instantiationService=r,this._keybindingService=s,this._onDidContentSizeChange=this._register(new g.Q5),this.original=this._register(this._createLeftHandSideEditor(i.editorOptions.get(),n.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(i.editorOptions.get(),n.modifiedEditor||{})),this.modifiedModel=(0,f.rD)(this.modified.onDidChangeModel,()=>this.modified.getModel()),this.modifiedScrollTop=(0,f.rD)(this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=(0,f.rD)(this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedSelections=(0,f.rD)(this.modified.onDidChangeCursorSelection,()=>{var e;return null!==(e=this.modified.getSelections())&&void 0!==e?e:[]}),this.modifiedCursor=(0,f.bk)({owner:this,equalityComparer:A.L.equals},e=>{var t,i;return null!==(i=null===(t=this.modifiedSelections.read(e)[0])||void 0===t?void 0:t.getPosition())&&void 0!==i?i:new A.L(1,1)}),this.originalCursor=(0,f.rD)(this.original.onDidChangeCursorPosition,()=>{var e;return null!==(e=this.original.getPosition())&&void 0!==e?e:new A.L(1,1)}),this._register((0,f.nJ)({createEmptyChangeSummary:()=>({}),handleChange:(e,t)=>(e.didChange(i.editorOptions)&&Object.assign(t,e.change.changedOptions),!0)},(e,t)=>{i.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,t)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,t))}))}_createLeftHandSideEditor(e,t){let i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,t){let i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,t,i,n){let o=this._createInnerEditor(e,t,i,n);return this._register(o.onDidContentSizeChange(e=>{let t=this.original.getContentWidth()+this.modified.getContentWidth()+eE.ENTIRE_DIFF_OVERVIEW_WIDTH,i=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:i,contentWidth:t,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})})),o}_adjustOptionsForLeftHandSide(e,t){let i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){let i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=T.BH.revealHorizontalRightPadding.defaultValue+eE.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){let t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");let i=(0,H.NC)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===t?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+i:e?e.replaceAll(i,""):""}};eO=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([diffEditorEditors_param(5,U.TG),diffEditorEditors_param(6,eP.d)],eO);var eF=i(92809);let DiffEditorOptions=class DiffEditorOptions{get editorOptions(){return this._options}constructor(e){this._diffEditorWidth=(0,f.uh)(this,0),this.couldShowInlineViewBecauseOfSize=(0,f.nK)(this,e=>this._options.read(e).renderSideBySide&&this._diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=(0,f.nK)(this,e=>this._options.read(e).renderOverviewRuler),this.renderSideBySide=(0,f.nK)(this,e=>this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e))),this.readOnly=(0,f.nK)(this,e=>this._options.read(e).readOnly),this.shouldRenderRevertArrows=(0,f.nK)(this,e=>!(!this._options.read(e).renderMarginRevertIcon||!this.renderSideBySide.read(e)||this.readOnly.read(e))),this.renderIndicators=(0,f.nK)(this,e=>this._options.read(e).renderIndicators),this.enableSplitViewResizing=(0,f.nK)(this,e=>this._options.read(e).enableSplitViewResizing),this.splitViewDefaultRatio=(0,f.nK)(this,e=>this._options.read(e).splitViewDefaultRatio),this.ignoreTrimWhitespace=(0,f.nK)(this,e=>this._options.read(e).ignoreTrimWhitespace),this.maxComputationTimeMs=(0,f.nK)(this,e=>this._options.read(e).maxComputationTime),this.showMoves=(0,f.nK)(this,e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e)),this.isInEmbeddedEditor=(0,f.nK)(this,e=>this._options.read(e).isInEmbeddedEditor),this.diffWordWrap=(0,f.nK)(this,e=>this._options.read(e).diffWordWrap),this.originalEditable=(0,f.nK)(this,e=>this._options.read(e).originalEditable),this.diffCodeLens=(0,f.nK)(this,e=>this._options.read(e).diffCodeLens),this.accessibilityVerbose=(0,f.nK)(this,e=>this._options.read(e).accessibilityVerbose),this.diffAlgorithm=(0,f.nK)(this,e=>this._options.read(e).diffAlgorithm),this.showEmptyDecorations=(0,f.nK)(this,e=>this._options.read(e).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=(0,f.nK)(this,e=>this._options.read(e).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=(0,f.nK)(this,e=>this._options.read(e).hideUnchangedRegions.minimumLineCount);let t={...e,...validateDiffEditorOptions(e,eF.k)};this._options=(0,f.uh)(this,t)}updateOptions(e){let t=validateDiffEditorOptions(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}};function validateDiffEditorOptions(e,t){var i,n,o,r,s,l,d,c;return{enableSplitViewResizing:(0,T.O7)(e.enableSplitViewResizing,t.enableSplitViewResizing),splitViewDefaultRatio:(0,T.L_)(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,T.O7)(e.renderSideBySide,t.renderSideBySide),renderMarginRevertIcon:(0,T.O7)(e.renderMarginRevertIcon,t.renderMarginRevertIcon),maxComputationTime:(0,T.Zc)(e.maxComputationTime,t.maxComputationTime,0,1073741824),maxFileSize:(0,T.Zc)(e.maxFileSize,t.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,T.O7)(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:(0,T.O7)(e.renderIndicators,t.renderIndicators),originalEditable:(0,T.O7)(e.originalEditable,t.originalEditable),diffCodeLens:(0,T.O7)(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:(0,T.O7)(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:(0,T.NY)(e.diffWordWrap,t.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,T.NY)(e.diffAlgorithm,t.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,T.O7)(e.accessibilityVerbose,t.accessibilityVerbose),experimental:{showMoves:(0,T.O7)(null===(i=e.experimental)||void 0===i?void 0:i.showMoves,t.experimental.showMoves),showEmptyDecorations:(0,T.O7)(null===(n=e.experimental)||void 0===n?void 0:n.showEmptyDecorations,t.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:(0,T.O7)(null!==(r=null===(o=e.hideUnchangedRegions)||void 0===o?void 0:o.enabled)&&void 0!==r?r:null===(s=e.experimental)||void 0===s?void 0:s.collapseUnchangedRegions,t.hideUnchangedRegions.enabled),contextLineCount:(0,T.Zc)(null===(l=e.hideUnchangedRegions)||void 0===l?void 0:l.contextLineCount,t.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,T.Zc)(null===(d=e.hideUnchangedRegions)||void 0===d?void 0:d.minimumLineCount,t.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,T.Zc)(null===(c=e.hideUnchangedRegions)||void 0===c?void 0:c.revealLineCount,t.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,T.O7)(e.isInEmbeddedEditor,t.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,T.O7)(e.onlyShowAccessibleDiffViewer,t.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,T.Zc)(e.renderSideBySideInlineBreakpoint,t.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,T.O7)(e.useInlineViewWhenSpaceIsLimited,t.useInlineViewWhenSpaceIsLimited)}}var eB=i(45776),eW=i(86809);let eV=[];let RevertButtonsFeature=class RevertButtonsFeature extends m.JT{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=(0,f.nK)(this,e=>{let t=this._diffModel.read(e),i=null==t?void 0:t.diff.read(e);if(!i)return eV;let n=this._editors.modifiedSelections.read(e);if(n.every(e=>e.isEmpty()))return eV;let o=new M.i(n.map(e=>M.z.fromRangeInclusive(e))),r=i.mappings.filter(e=>e.lineRangeMapping.innerChanges&&o.intersects(e.lineRangeMapping.modified)),s=r.map(e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter(e=>n.some(t=>P.e.areIntersecting(e.modifiedRange,t)))}));return 0===s.length||s.every(e=>0===e.rangeMappings.length)?eV:s}),this._register((0,f.gp)((e,t)=>{if(!this._options.shouldRenderRevertArrows.read(e))return;let i=this._diffModel.read(e),n=null==i?void 0:i.diff.read(e);if(!i||!n||i.movedTextToCompare.read(e))return;let o=[],r=this._selectedDiffs.read(e),s=new Set(r.map(e=>e.mapping));if(r.length>0){let i=this._editors.modifiedSelections.read(e),n=t.add(new RevertButton(i[i.length-1].positionLineNumber,this._widget,r.flatMap(e=>e.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(n),o.push(n)}for(let e of n.mappings)if(!s.has(e)&&!e.lineRangeMapping.modified.isEmpty&&e.lineRangeMapping.innerChanges){let i=t.add(new RevertButton(e.lineRangeMapping.modified.startLineNumber,this._widget,e.lineRangeMapping.innerChanges,!1));this._editors.modified.addGlyphMarginWidget(i),o.push(i)}t.add((0,m.OF)(()=>{for(let e of o)this._editors.modified.removeGlyphMarginWidget(e)}))}))}};let RevertButton=class RevertButton extends m.JT{getId(){return this._id}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id=`revertButton${RevertButton.counter++}`,this._domNode=(0,d.h)("div.revertButton",{title:this._revertSelection?(0,H.NC)("revertSelectedChanges","Revert Selected Changes"):(0,H.NC)("revertChange","Revert Change")},[(0,eB.h)(x.l.arrowRight)]).root,this._register((0,d.nm)(this._domNode,d.tw.MOUSE_DOWN,e=>{2!==e.button&&(e.stopPropagation(),e.preventDefault())})),this._register((0,d.nm)(this._domNode,d.tw.MOUSE_UP,e=>{e.stopPropagation(),e.preventDefault()})),this._register((0,d.nm)(this._domNode,d.tw.CLICK,e=>{this._widget.revertRangeMappings(this._diffs),e.stopPropagation(),e.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:eW.U.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};RevertButton.counter=0;var diffEditorWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let eH=class extends DelegatingEditor{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,n,o,r,s,l){var c;let u;super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=o,this._accessibilitySignalService=s,this._editorProgressService=l,this.elements=(0,d.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,d.h)("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[(0,d.$)("span",{},"No Changes")]),(0,d.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,d.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,d.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=(0,f.uh)(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=g.ju.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new eR.y([eM.i6,this._contextKeyService])),this._boundarySashes=(0,f.uh)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,f.uh)(this,!1),this._accessibleDiffViewerVisible=(0,f.nK)(this,e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e)),this._movedBlocksLinesPart=(0,f.uh)(this,void 0),this._layoutInfo=(0,f.nK)(this,e=>{var t,i,n,o,r;let s=this._rootSizeObserver.width.read(e),l=this._rootSizeObserver.height.read(e),d=null===(t=this._sash.read(e))||void 0===t?void 0:t.sashLeft.read(e),c=null!=d?d:Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),u=s-c-(null!==(n=null===(i=this._overviewRulerPart.read(e))||void 0===i?void 0:i.width)&&void 0!==n?n:0),g=null!==(r=null===(o=this._movedBlocksLinesPart.read(e))||void 0===o?void 0:o.width.read(e))&&void 0!==r?r:0,m=c-g;return this.elements.original.style.width=m+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=u+"px",this.elements.modified.style.left=c+"px",this._editors.original.layout({width:m,height:l},!0),this._editors.modified.layout({width:u,height:l},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((e,t)=>null==e?void 0:e.diff.read(t)),this.onDidUpdateDiff=g.ju.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,m.OF)(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new I.DU(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(null!==(c=t.automaticLayout)&&void 0!==c&&c),this._options=new DiffEditorOptions(t),this._register((0,f.EH)(e=>{this._options.setWidth(this._rootSizeObserver.width.read(e))})),this._contextKeyService.createKey(eT.u.isEmbeddedDiffEditor.key,!1),this._register((0,I.GU)(eT.u.isEmbeddedDiffEditor,this._contextKeyService,e=>this._options.isInEmbeddedEditor.read(e))),this._register((0,I.GU)(eT.u.comparingMovedCode,this._contextKeyService,e=>{var t;return!!(null===(t=this._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e))})),this._register((0,I.GU)(eT.u.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,e=>this._options.couldShowInlineViewBecauseOfSize.read(e))),this._register((0,I.GU)(eT.u.hasChanges,this._contextKeyService,e=>{var t,i,n;return(null!==(n=null===(i=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.diff.read(e))||void 0===i?void 0:i.mappings.length)&&void 0!==n?n:0)>0})),this._editors=this._register(this._instantiationService.createInstance(eO,this.elements.original,this.elements.modified,this._options,i,(e,t,i,n)=>this._createInnerEditor(e,t,i,n))),this._overviewRulerPart=(0,_.kA)(this,e=>this._options.renderOverviewRuler.read(e)?this._instantiationService.createInstance((0,I.NW)(eE,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(e=>e.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store),this._sash=(0,_.kA)(this,e=>{let t=this._options.renderSideBySide.read(e);return this.elements.root.classList.toggle("side-by-side",t),t?new DiffEditorSash(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((e,t)=>{var i,n;return e-(null!==(n=null===(i=this._overviewRulerPart.read(t))||void 0===i?void 0:i.width)&&void 0!==n?n:0)})},this._boundarySashes):void 0}).recomputeInitiallyAndOnChange(this._store);let v=(0,_.kA)(this,e=>this._instantiationService.createInstance((0,I.NW)(ee.O,e),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);(0,_.kA)(this,e=>this._instantiationService.createInstance((0,I.NW)(DiffEditorDecorations,e),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);let C=new Set,S=new Set,y=!1,w=(0,_.kA)(this,e=>this._instantiationService.createInstance((0,I.NW)(ew,e),(0,d.Jj)(this._domElement),this._editors,this._diffModel,this._options,this,()=>y||v.get().isUpdatingHiddenAreas,C,S)).recomputeInitiallyAndOnChange(this._store),L=(0,f.nK)(this,e=>{let t=w.read(e).viewZones.read(e).orig,i=v.read(e).viewZones.read(e).origViewZones;return t.concat(i)}),k=(0,f.nK)(this,e=>{let t=w.read(e).viewZones.read(e).mod,i=v.read(e).viewZones.read(e).modViewZones;return t.concat(i)});this._register((0,I.Sv)(this._editors.original,L,e=>{y=e},C)),this._register((0,I.Sv)(this._editors.modified,k,e=>{(y=e)?u=b.Z.capture(this._editors.modified):(null==u||u.restore(this._editors.modified),u=void 0)},S)),this._accessibleDiffViewer=(0,_.kA)(this,e=>this._instantiationService.createInstance((0,I.NW)(Q,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(e,t)=>this._accessibleDiffViewerShouldBeVisible.set(e,t),this._options.onlyShowAccessibleDiffViewer.map(e=>!e),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((e,t)=>{var i;return null===(i=null==e?void 0:e.diff.read(t))||void 0===i?void 0:i.mappings.map(e=>e.lineRangeMapping)}),new AccessibleDiffViewerModelFromEditors(this._editors))).recomputeInitiallyAndOnChange(this._store);let D=this._accessibleDiffViewerVisible.map(e=>e?"hidden":"visible");this._register((0,I.bg)(this.elements.modified,{visibility:D})),this._register((0,I.bg)(this.elements.original,{visibility:D})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._register((0,f.jx)(this._layoutInfo)),(0,_.kA)(this,e=>new((0,I.NW)(MovedBlocksLinesFeature,e))(this.elements.root,this._diffModel,this._layoutInfo.map(e=>e.originalEditor),this._layoutInfo.map(e=>e.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,e=>{this._movedBlocksLinesPart.set(e,void 0)}),this._register((0,I.bg)(this.elements.overlay,{width:this._layoutInfo.map((e,t)=>e.originalEditor.width+(this._options.renderSideBySide.read(t)?0:e.modifiedEditor.width)),visibility:(0,f.nK)(e=>{var t,i;return this._options.hideUnchangedRegions.read(e)&&(null===(i=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.diff.read(e))||void 0===i?void 0:i.mappings.length)===0?"visible":"hidden"})})),this._register(g.ju.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,e=>{var t,i;if((null==e?void 0:e.reason)===3){let n=null===(i=null===(t=this._diffModel.get())||void 0===t?void 0:t.diff.get())||void 0===i?void 0:i.mappings.find(t=>t.lineRangeMapping.modified.contains(e.position.lineNumber));(null==n?void 0:n.lineRangeMapping.modified.isEmpty)?this._accessibilitySignalService.playSignal(z.iP.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null==n?void 0:n.lineRangeMapping.original.isEmpty)?this._accessibilitySignalService.playSignal(z.iP.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):n&&this._accessibilitySignalService.playSignal(z.iP.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}));let x=this._diffModel.map(this,(e,t)=>{if(e)return void 0===e.diff.read(t)&&!e.isDiffUpToDate.read(t)});this._register((0,f.gp)((e,t)=>{if(!0===x.read(e)){let e=this._editorProgressService.show(!0,1e3);t.add((0,m.OF)(()=>e.done()))}})),this._register((0,m.OF)(()=>{var e;this._shouldDisposeDiffModel&&(null===(e=this._diffModel.get())||void 0===e||e.dispose())})),this._register(new RevertButtonsFeature(this._editors,this._diffModel,this._options,this))}_createInnerEditor(e,t,i,n){let o=e.createInstance(S.Gm,t,i,n);return o}_createDiffEditorContributions(){let e=v.Uc.getDiffEditorContributions();for(let t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(e){(0,u.dL)(e)}}get _targetEditor(){return this._editors.modified}getEditorType(){return eI.g.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;let t=this._editors.original.saveViewState(),i=this._editors.modified.saveViewState();return{original:t,modified:i,modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}restoreViewState(e){var t;e&&e.original&&e.modified&&(this._editors.original.restoreViewState(e.original),this._editors.modified.restoreViewState(e.modified),e.modelState&&(null===(t=this._diffModel.get())||void 0===t||t.restoreSerializedState(e.modelState)))}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(ef,e,this._options)}getModel(){var e,t;return null!==(t=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==t?t:null}setModel(e,t){!e&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();let i=e?"model"in e?{model:e,shouldDispose:!1}:{model:this.createViewModel(e),shouldDispose:!0}:void 0;this._diffModel.get()!==(null==i?void 0:i.model)&&(0,f.c8)(t,e=>{var t;f.rD.batchEventsGlobally(e,()=>{this._editors.original.setModel(i?i.model.model.original:null),this._editors.modified.setModel(i?i.model.model.modified:null)});let n=this._diffModel.get(),o=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=null!==(t=null==i?void 0:i.shouldDispose)&&void 0!==t&&t,this._diffModel.set(null==i?void 0:i.model,e),o&&(null==n||n.dispose())})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;let t=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return t?toLineChanges(t):null}revert(e){if(e.innerChanges){this.revertRangeMappings(e.innerChanges);return}let t=this._diffModel.get();t&&t.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){let t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;let i=e.map(e=>({range:e.modifiedRange,text:t.model.original.getValueInRange(e.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new A.L(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var t,i,n,o;let r;let s=null===(i=null===(t=this._diffModel.get())||void 0===t?void 0:t.diff.get())||void 0===i?void 0:i.mappings;if(!s||0===s.length)return;let l=this._editors.modified.getPosition().lineNumber;r="next"===e?null!==(n=s.find(e=>e.lineRangeMapping.modified.startLineNumber>l))&&void 0!==n?n:s[0]:null!==(o=(0,c.dF)(s,e=>e.lineRangeMapping.modified.startLineNumber<l))&&void 0!==o?o:s[s.length-1],this._goTo(r),r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(z.iP.diffLineDeleted,{source:"diffEditor.goToDiff"}):r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(z.iP.diffLineInserted,{source:"diffEditor.goToDiff"}):r&&this._accessibilitySignalService.playSignal(z.iP.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){let e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var t;let i=null===(t=e.diff.get())||void 0===t?void 0:t.mappings;i&&0!==i.length&&this._goTo(i[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){let e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var e,t;let i;let n=this._editors.modified.hasWidgetFocus(),o=n?this._editors.modified:this._editors.original,r=n?this._editors.original:this._editors.modified,s=o.getSelection();if(s){let o=null===(t=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get())||void 0===t?void 0:t.mappings.map(e=>n?e.lineRangeMapping.flip():e.lineRangeMapping);if(o){let e=(0,I.cV)(s.getStartPosition(),o),t=(0,I.cV)(s.getEndPosition(),o);i=P.e.plusRange(e,t)}}return{destination:r,destinationSelection:i}}switchSide(){let{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){let e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;let t=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();t&&(0,f.PS)(e=>{for(let i of t)i.collapseAll(e)})}showAllUnchangedRegions(){var e;let t=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();t&&(0,f.PS)(e=>{for(let i of t)i.showAll(e)})}};function toLineChanges(e){return e.mappings.map(e=>{let t,i,n,o;let r=e.lineRangeMapping,s=r.innerChanges;return r.original.isEmpty?(t=r.original.startLineNumber-1,i=0,s=void 0):(t=r.original.startLineNumber,i=r.original.endLineNumberExclusive-1),r.modified.isEmpty?(n=r.modified.startLineNumber-1,o=0,s=void 0):(n=r.modified.startLineNumber,o=r.modified.endLineNumberExclusive-1),{originalStartLineNumber:t,originalEndLineNumber:i,modifiedStartLineNumber:n,modifiedEndLineNumber:o,charChanges:null==s?void 0:s.map(e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn}))}})}eH=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([diffEditorWidget_param(3,eM.i6),diffEditorWidget_param(4,U.TG),diffEditorWidget_param(5,C.$),diffEditorWidget_param(6,z.IV),diffEditorWidget_param(7,eA.ek)],eH)},41212:function(e,t,i){"use strict";i.d(t,{O:function(){return L}});var n,o,r=i(70687),s=i(45776),l=i(84530),d=i(72914),c=i(87932),u=i(98557),g=i(18601),m=i(98847),f=i(16877),_=i(98051),v=i(4261),C=i(11953),b=i(30822),S=i(7530),y=i(46157),w=i(27989);let L=o=class extends c.JT{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=(0,g.kA)(this,e=>{let t=this._editors.modifiedModel.read(e),i=o._breadcrumbsSourceFactory.read(e);return t&&i?i(t,this._instantiationService):void 0}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(e=>{if(3===e.reason){let e=this._diffModel.get();(0,u.PS)(t=>{for(let i of this._editors.original.getSelections()||[])null==e||e.ensureOriginalLineIsVisible(i.getStartPosition().lineNumber,0,t),null==e||e.ensureOriginalLineIsVisible(i.getEndPosition().lineNumber,0,t)})}})),this._register(this._editors.modified.onDidChangeCursorPosition(e=>{if(3===e.reason){let e=this._diffModel.get();(0,u.PS)(t=>{for(let i of this._editors.modified.getSelections()||[])null==e||e.ensureModifiedLineIsVisible(i.getStartPosition().lineNumber,0,t),null==e||e.ensureModifiedLineIsVisible(i.getEndPosition().lineNumber,0,t)})}}));let r=this._diffModel.map((e,t)=>{var i,n;let o=null!==(i=null==e?void 0:e.unchangedRegions.read(t))&&void 0!==i?i:[];return 1===o.length&&1===o[0].modifiedLineNumber&&o[0].lineCount===(null===(n=this._editors.modifiedModel.read(t))||void 0===n?void 0:n.getLineCount())?[]:o});this.viewZones=(0,u.Be)(this,(e,t)=>{let i=this._modifiedOutlineSource.read(e);if(!i)return{origViewZones:[],modViewZones:[]};let n=[],o=[],s=this._options.renderSideBySide.read(e),l=r.read(e);for(let r of l)if(!r.shouldHideControls(e)){{let e=(0,u.nK)(this,e=>r.getHiddenOriginalRange(e).startLineNumber-1),o=new _.GD(e,24);n.push(o),t.add(new CollapsedCodeOverlayWidget(this._editors.original,o,r,r.originalUnchangedRange,!s,i,e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0),this._options))}{let e=(0,u.nK)(this,e=>r.getHiddenModifiedRange(e).startLineNumber-1),n=new _.GD(e,24);o.push(n),t.add(new CollapsedCodeOverlayWidget(this._editors.modified,n,r,r.modifiedUnchangedRange,!1,i,e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0),this._options))}}return{origViewZones:n,modViewZones:o}});let s={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},c={description:"Fold Unchanged",glyphMarginHoverMessage:new d.W5(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,y.NC)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+m.k.asClassName(l.l.fold),zIndex:10001};this._register((0,_.RP)(this._editors.original,(0,u.nK)(this,e=>{let t=r.read(e),i=t.map(e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:s}));for(let n of t)n.shouldHideControls(e)&&i.push({range:b.e.fromPositions(new C.L(n.originalLineNumber,1)),options:c});return i}))),this._register((0,_.RP)(this._editors.modified,(0,u.nK)(this,e=>{let t=r.read(e),i=t.map(e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:s}));for(let n of t)n.shouldHideControls(e)&&i.push({range:v.z.ofLength(n.modifiedLineNumber,1).toInclusiveRange(),options:c});return i}))),this._register((0,u.EH)(e=>{let t=r.read(e);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(t.map(t=>t.getHiddenOriginalRange(e).toInclusiveRange()).filter(f.$K)),this._editors.modified.setHiddenAreas(t.map(t=>t.getHiddenModifiedRange(e).toInclusiveRange()).filter(f.$K))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(e=>{var t;if(!e.event.rightButton&&e.target.position&&(null===(t=e.target.element)||void 0===t?void 0:t.className.includes("fold-unchanged"))){let t=e.target.position.lineNumber,i=this._diffModel.get();if(!i)return;let n=i.unchangedRegions.get().find(e=>e.modifiedUnchangedRange.includes(t));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(e=>{var t;if(!e.event.rightButton&&e.target.position&&(null===(t=e.target.element)||void 0===t?void 0:t.className.includes("fold-unchanged"))){let t=e.target.position.lineNumber,i=this._diffModel.get();if(!i)return;let n=i.unchangedRegions.get().find(e=>e.originalUnchangedRange.includes(t));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))}};L._breadcrumbsSourceFactory=(0,u.uh)("breadcrumbsSourceFactory",void 0),L=o=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(n=w.TG,function(e,t){n(e,t,3)})],L);let CollapsedCodeOverlayWidget=class CollapsedCodeOverlayWidget extends _.N9{constructor(e,t,i,n,o,d,c,g){let m=(0,r.h)("div.diff-hidden-lines-widget");super(e,t,m.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=o,this._modifiedOutlineSource=d,this._revealModifiedHiddenLine=c,this._options=g,this._nodes=(0,r.h)("div.diff-hidden-lines",[(0,r.h)("div.top@top",{title:(0,y.NC)("diff.hiddenLines.top","Click or drag to show more above")}),(0,r.h)("div.center@content",{style:{display:"flex"}},[(0,r.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,r.$)("a",{title:(0,y.NC)("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,s.T)("$(unfold)"))]),(0,r.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,r.h)("div.bottom@bottom",{title:(0,y.NC)("diff.bottom","Click or drag to show more below"),role:"button"})]),m.root.appendChild(this._nodes.root);let f=(0,u.rD)(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._hide?(0,r.mc)(this._nodes.first):this._register((0,_.bg)(this._nodes.first,{width:f.map(e=>e.contentLeft)})),this._register((0,u.EH)(e=>{let t=this._unchangedRegion.visibleLineCountTop.read(e)+this._unchangedRegion.visibleLineCountBottom.read(e)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!t),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),this._nodes.top.classList.toggle("canMoveBottom",!t);let i=this._unchangedRegion.isDragged.read(e),n=this._editor.getDomNode();n&&(n.classList.toggle("draggingUnchangedRegion",!!i),"top"===i?(n.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),n.classList.toggle("canMoveBottom",!t)):"bottom"===i?(n.classList.toggle("canMoveTop",!t),n.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0)):(n.classList.toggle("canMoveTop",!1),n.classList.toggle("canMoveBottom",!1)))}));let v=this._editor;this._register((0,r.nm)(this._nodes.top,"mousedown",e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();let t=e.clientY,i=!1,n=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);let o=(0,r.Jj)(this._nodes.top),s=(0,r.nm)(o,"mousemove",e=>{let o=e.clientY,r=o-t;i=i||Math.abs(r)>2;let s=Math.round(r/v.getOption(67)),l=Math.max(0,Math.min(n+s,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(l,void 0)}),l=(0,r.nm)(o,"mouseup",e=>{i||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),s.dispose(),l.dispose()})})),this._register((0,r.nm)(this._nodes.bottom,"mousedown",e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();let t=e.clientY,i=!1,n=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);let o=(0,r.Jj)(this._nodes.bottom),s=(0,r.nm)(o,"mousemove",e=>{let o=e.clientY,r=o-t;i=i||Math.abs(r)>2;let s=Math.round(r/v.getOption(67)),l=Math.max(0,Math.min(n-s,this._unchangedRegion.getMaxVisibleLineCountBottom())),d=v.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(l,void 0);let c=v.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);v.setScrollTop(v.getScrollTop()+(c-d))}),l=(0,r.nm)(o,"mouseup",e=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!i){let e=v.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);let t=v.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);v.setScrollTop(v.getScrollTop()+(t-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),s.dispose(),l.dispose()})})),this._register((0,u.EH)(e=>{let t=[];if(!this._hide){let n=i.getHiddenModifiedRange(e).length,o=(0,y.NC)("hiddenLines","{0} hidden lines",n),d=(0,r.$)("span",{title:(0,y.NC)("diff.hiddenLines.expandAll","Double click to unfold")},o);d.addEventListener("dblclick",e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))}),t.push(d);let c=this._unchangedRegion.getHiddenModifiedRange(e),u=this._modifiedOutlineSource.getBreadcrumbItems(c,e);if(u.length>0){t.push((0,r.$)("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let e=0;e<u.length;e++){let i=u[e],n=S.uZ.toIcon(i.kind),o=(0,r.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,s.h)(n),"\xa0",i.name,...e===u.length-1?[]:[(0,s.h)(l.l.chevronRight)]]).root;t.push(o),o.onclick=()=>{this._revealModifiedHiddenLine(i.startLineNumber)}}}}(0,r.mc)(this._nodes.others,...t)}))}}},89476:function(e,t,i){"use strict";i.d(t,{$F:function(){return w},Jv:function(){return C},LE:function(){return v},W3:function(){return y},fO:function(){return u},i_:function(){return _},iq:function(){return m},n_:function(){return b},rd:function(){return f},rq:function(){return S},vv:function(){return g}});var n=i(84530),o=i(98847),r=i(26792),s=i(46157),l=i(45815),d=i(96440);(0,l.P6G)("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},(0,s.NC)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,l.P6G)("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},(0,s.NC)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),(0,l.P6G)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,s.NC)("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));let c=(0,d.q5)("diff-insert",n.l.add,(0,s.NC)("diffInsertIcon","Line decoration for inserts in the diff editor.")),u=(0,d.q5)("diff-remove",n.l.remove,(0,s.NC)("diffRemoveIcon","Line decoration for removals in the diff editor.")),g=r.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+o.k.asClassName(c),marginClassName:"gutter-insert"}),m=r.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+o.k.asClassName(u),marginClassName:"gutter-delete"}),f=r.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),_=r.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),v=r.qx.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),C=r.qx.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),b=r.qx.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),S=r.qx.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),y=r.qx.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),w=r.qx.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})},98051:function(e,t,i){"use strict";let n;i.d(t,{t2:function(){return DisposableCancellationTokenSource},DU:function(){return ObservableElementSizeObserver},GD:function(){return PlaceholderViewZone},N9:function(){return ViewZoneOverlayWidget},Vm:function(){return animatedObservable},xx:function(){return appendRemoveOnDispose},RP:function(){return applyObservableDecorations},bg:function(){return applyStyle},Sv:function(){return applyViewZones},GU:function(){return bindContextKey},W7:function(){return filterWithPrevious},Ap:function(){return joinCombine},NW:function(){return readHotReloadableExport},cV:function(){return translatePosition}});var o=i(34850),r=i(45828),s=i(2696);function isHotReloadEnabled(){return s.OB&&!!s.OB.VSCODE_DEV}function registerHotReloadHandler(e){if(!isHotReloadEnabled())return{dispose(){}};{let t=registerGlobalHotReloadHandler();return t.add(e),{dispose(){t.delete(e)}}}}function registerGlobalHotReloadHandler(){n||(n=new Set);let e=globalThis;return e.$hotReload_applyNewExports||(e.$hotReload_applyNewExports=e=>{let t={config:{mode:void 0},...e};for(let e of n){let i=e(t);if(i)return i}}),n}isHotReloadEnabled()&&registerHotReloadHandler(({oldExports:e,newSrc:t,config:i})=>{if("patch-prototype"===i.mode)return t=>{var i,n;for(let o in t){let r=t[o];if(console.log(`[hot-reload] Patching prototype methods of '${o}'`,{exportedItem:r}),"function"==typeof r&&r.prototype){let s=e[o];if(s){for(let e of Object.getOwnPropertyNames(r.prototype)){let t=Object.getOwnPropertyDescriptor(r.prototype,e),l=Object.getOwnPropertyDescriptor(s.prototype,e);(null===(i=null==t?void 0:t.value)||void 0===i?void 0:i.toString())!==(null===(n=null==l?void 0:l.value)||void 0===n?void 0:n.toString())&&console.log(`[hot-reload] Patching prototype method '${o}.${e}'`),Object.defineProperty(s.prototype,e,t)}t[o]=s}}}return!0}});var l=i(87932),d=i(98557),c=i(88036),u=i(11953),g=i(30822),m=i(1511);function joinCombine(e,t,i,n){if(0===e.length)return t;if(0===t.length)return e;let o=[],r=0,s=0;for(;r<e.length&&s<t.length;){let l=e[r],d=t[s],c=i(l),u=i(d);c<u?(o.push(l),r++):(c>u?o.push(d):(o.push(n(l,d)),r++),s++)}for(;r<e.length;)o.push(e[r]),r++;for(;s<t.length;)o.push(t[s]),s++;return o}function applyObservableDecorations(e,t){let i=new l.SL,n=e.createDecorationsCollection();return i.add((0,d.UV)({debugName:()=>`Apply decorations from ${t.debugName}`},e=>{let i=t.read(e);n.set(i)})),i.add({dispose:()=>{n.clear()}}),i}function appendRemoveOnDispose(e,t){return e.appendChild(t),(0,l.OF)(()=>{e.removeChild(t)})}let ObservableElementSizeObserver=class ObservableElementSizeObserver extends l.JT{get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.elementSizeObserver=this._register(new c.I(e,t)),this._width=(0,d.uh)(this,this.elementSizeObserver.getWidth()),this._height=(0,d.uh)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(e=>(0,d.PS)(e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}};function animatedObservable(e,t,i){let n,o=t.get(),r=o,s=o,l=(0,d.uh)("animatedValue",o),c=-1;function update(){let t=Date.now()-c;s=Math.floor(easeOutExpo(t,r,o-r,300)),t<300?n=e.requestAnimationFrame(update):s=o,l.set(s,void 0)}return i.add((0,d.nJ)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(e,i)=>(e.didChange(t)&&(i.animate=i.animate||e.change),!0)},(i,l)=>{void 0!==n&&(e.cancelAnimationFrame(n),n=void 0),r=s,o=t.read(i),c=Date.now()-(l.animate?0:300),update()})),l}function easeOutExpo(e,t,i,n){return e===n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t}let ViewZoneOverlayWidget=class ViewZoneOverlayWidget extends l.JT{constructor(e,t,i){super(),this._register(new ManagedOverlayWidget(e,i)),this._register(applyStyle(i,{height:t.actualHeight,top:t.actualTop}))}};let PlaceholderViewZone=class PlaceholderViewZone{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=(0,d.uh)(this,void 0),this._actualHeight=(0,d.uh)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}};let ManagedOverlayWidget=class ManagedOverlayWidget{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${ManagedOverlayWidget._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};function applyStyle(e,t){return(0,d.EH)(i=>{for(let[n,o]of Object.entries(t))o&&"object"==typeof o&&"read"in o&&(o=o.read(i)),"number"==typeof o&&(o=`${o}px`),n=n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),e.style[n]=o})}function readHotReloadableExport(e,t){return observeHotReloadableExports([e],t),e}function observeHotReloadableExports(e,t){if(isHotReloadEnabled()){let i=(0,d.aq)("reload",t=>registerHotReloadHandler(({oldExports:i})=>{if([...Object.values(i)].some(t=>e.includes(t)))return e=>(t(void 0),!0)}));i.read(t)}}function applyViewZones(e,t,i,n){let o=new l.SL,r=[];return o.add((0,d.gp)((o,s)=>{let l=t.read(o),c=new Map,u=new Map;i&&i(!0),e.changeViewZones(e=>{for(let t of r)e.removeZone(t),null==n||n.delete(t);for(let t of(r.length=0,l)){let i=e.addZone(t);t.setZoneId&&t.setZoneId(i),r.push(i),null==n||n.add(i),c.set(t,i)}}),i&&i(!1),s.add((0,d.nJ)({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(e,t){let i=u.get(e.changedObservable);return void 0!==i&&t.zoneIds.push(i),!0}},(t,n)=>{for(let e of l)e.onChange&&(u.set(e.onChange,c.get(e)),e.onChange.read(t));i&&i(!0),e.changeViewZones(e=>{for(let t of n.zoneIds)e.layoutZone(t)}),i&&i(!1)}))})),o.add({dispose(){i&&i(!0),e.changeViewZones(e=>{for(let t of r)e.removeZone(t)}),null==n||n.clear(),i&&i(!1)}}),o}ManagedOverlayWidget._counter=0;let DisposableCancellationTokenSource=class DisposableCancellationTokenSource extends r.A{dispose(){super.dispose(!0)}};function translatePosition(e,t){let i=(0,o.dF)(t,t=>t.original.startLineNumber<=e.lineNumber);if(!i)return g.e.fromPositions(e);if(i.original.endLineNumberExclusive<=e.lineNumber){let t=e.lineNumber-i.original.endLineNumberExclusive+i.modified.endLineNumberExclusive;return g.e.fromPositions(new u.L(t,e.column))}if(!i.innerChanges)return g.e.fromPositions(new u.L(i.modified.startLineNumber,1));let n=(0,o.dF)(i.innerChanges,t=>t.originalRange.getStartPosition().isBeforeOrEqual(e));if(!n){let t=e.lineNumber-i.original.startLineNumber+i.modified.startLineNumber;return g.e.fromPositions(new u.L(t,e.column))}if(n.originalRange.containsPosition(e))return n.modifiedRange;{let t=lengthBetweenPositions(n.originalRange.getEndPosition(),e);return g.e.fromPositions(addLength(n.modifiedRange.getEndPosition(),t))}}function lengthBetweenPositions(e,t){return e.lineNumber===t.lineNumber?new m.OE(0,t.column-e.column):new m.OE(t.lineNumber-e.lineNumber,t.column-1)}function addLength(e,t){return 0===t.lineCount?new u.L(e.lineNumber,e.column+t.columnCount):new u.L(e.lineNumber+t.lineCount,t.columnCount+1)}function bindContextKey(e,t,i){let n=e.bindTo(t);return(0,d.UV)({debugName:()=>`Set Context Key "${e.key}"`},e=>{n.set(i(e))})}function filterWithPrevious(e,t){let i;return e.filter(e=>{let n=t(e,i);return i=e,n})}},7927:function(e,t,i){"use strict";i.d(t,{$:function(){return _},N:function(){return openLinkFromMarkdown}});var n,o=i(7519),r=i(76883),s=i(17861),l=i(57605),d=i(87932);i(51032);var c=i(38679),u=i(84634),g=i(36281),m=i(5328),f=i(60048),__param=function(e,t){return function(i,n){t(i,n,e)}};let _=n=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new l.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){let e=document.createElement("span");return{element:e,dispose:()=>{}}}let n=new d.SL,r=n.add((0,o.ap)(e,{...this._getRenderOptions(e,n),...t},i));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(e,t)=>{var i,o,r;let s;e?s=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(s=null===(i=this._options.editor.getModel())||void 0===i?void 0:i.getLanguageId()),s||(s=g.bd);let l=await (0,m.C2)(this._languageService,t,s),d=document.createElement("span");if(d.innerHTML=null!==(r=null===(o=n._ttpTokenizer)||void 0===o?void 0:o.createHTML(l))&&void 0!==r?r:l,this._options.editor){let e=this._options.editor.getOption(50);(0,c.N)(d,e)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(d.style.fontSize=this._options.codeBlockFontSize),d},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>openLinkFromMarkdown(this._openerService,t,e.isTrusted),disposables:t}}}};async function openLinkFromMarkdown(e,t,i){try{return await e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:toAllowCommandsOption(i)})}catch(e){return(0,s.dL)(e),!1}}function toAllowCommandsOption(e){return!0===e||!!(e&&Array.isArray(e.enabledCommands))&&e.enabledCommands}_._ttpTokenizer=(0,r.Z)("tokenizeToString",{createHTML:e=>e}),_=n=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(1,u.O),__param(2,f.v)],_)},71708:function(e,t,i){"use strict";i.d(t,{OY:function(){return ReplaceCommandThatSelectsText},Sj:function(){return ReplaceCommandWithoutChangingPosition},T4:function(){return ReplaceCommand},Uo:function(){return ReplaceCommandWithOffsetCursorState},hP:function(){return ReplaceCommandThatPreservesSelection}});var n=i(45841);let ReplaceCommand=class ReplaceCommand{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations(),o=i[0].range;return n.Y.fromPositions(o.getEndPosition())}};let ReplaceCommandThatSelectsText=class ReplaceCommandThatSelectsText{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations(),o=i[0].range;return n.Y.fromRange(o,0)}};let ReplaceCommandWithoutChangingPosition=class ReplaceCommandWithoutChangingPosition{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations(),o=i[0].range;return n.Y.fromPositions(o.getStartPosition())}};let ReplaceCommandWithOffsetCursorState=class ReplaceCommandWithOffsetCursorState{constructor(e,t,i,n,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations(),o=i[0].range;return n.Y.fromPositions(o.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}};let ReplaceCommandThatPreservesSelection=class ReplaceCommandThatPreservesSelection{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}},93230:function(e,t,i){"use strict";i.d(t,{U:function(){return m}});var n,o,r=i(45837),s=i(77393),l=i(30822),d=i(45841),c=i(28151),u=i(68903);let g=Object.create(null);function cachedStringRepeat(e,t){if(t<=0)return"";g[e]||(g[e]=["",e]);let i=g[e];for(let n=i.length;n<=t;n++)i[n]=i[n-1]+e;return i[t]}let m=o=class{static unshiftIndent(e,t,i,n,o){let r=s.i.visibleColumnFromColumn(e,t,i);if(o){let e=cachedStringRepeat(" ",n),t=s.i.prevIndentTabStop(r,n),i=t/n;return cachedStringRepeat(e,i)}{let e=s.i.prevRenderTabStop(r,i),t=e/i;return cachedStringRepeat("	",t)}}static shiftIndent(e,t,i,n,o){let r=s.i.visibleColumnFromColumn(e,t,i);if(o){let e=cachedStringRepeat(" ",n),t=s.i.nextIndentTabStop(r,n),i=t/n;return cachedStringRepeat(e,i)}{let e=s.i.nextRenderTabStop(r,i),t=e/i;return cachedStringRepeat("	",t)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){let i=this._selection.startLineNumber,n=this._selection.endLineNumber;1===this._selection.endColumn&&i!==n&&(n-=1);let{tabSize:d,indentSize:u,insertSpaces:g}=this._opts,m=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let f=0,_=0;for(let v=i;v<=n;v++,f=_){let n;_=0;let C=e.getLineContent(v),b=r.LC(C);if((!this._opts.isUnshift||0!==C.length&&0!==b)&&(m||this._opts.isUnshift||0!==C.length)){if(-1===b&&(b=C.length),v>1){let t=s.i.visibleColumnFromColumn(C,b+1,d);if(t%u!=0&&e.tokenization.isCheapToTokenize(v-1)){let t=(0,c.A)(this._opts.autoIndent,e,new l.e(v-1,e.getLineMaxColumn(v-1),v-1,e.getLineMaxColumn(v-1)),this._languageConfigurationService);if(t){if(_=f,t.appendText)for(let e=0,i=t.appendText.length;e<i&&_<u;e++)if(32===t.appendText.charCodeAt(e))_++;else break;t.removeText&&(_=Math.max(0,_-t.removeText));for(let e=0;e<_&&0!==b&&32===C.charCodeAt(b-1);e++)b--}}}(!this._opts.isUnshift||0!==b)&&(n=this._opts.isUnshift?o.unshiftIndent(C,b+1,d,u,g):o.shiftIndent(C,b+1,d,u,g),this._addEditOperation(t,new l.e(v,1,v,b+1),n),v!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=b+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(i)&&(this._useLastEditRangeForCursorEndPosition=!0);let o=g?cachedStringRepeat(" ",u):"	";for(let s=i;s<=n;s++){let n=e.getLineContent(s),d=r.LC(n);if((!this._opts.isUnshift||0!==n.length&&0!==d)&&(m||this._opts.isUnshift||0!==n.length)&&(-1===d&&(d=n.length),!this._opts.isUnshift||0!==d)){if(this._opts.isUnshift){d=Math.min(d,u);for(let e=0;e<d;e++){let t=n.charCodeAt(e);if(9===t){d=e+1;break}}this._addEditOperation(t,new l.e(s,1,s,d+1),"")}else this._addEditOperation(t,new l.e(s,1,s,1),o),s!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let e=t.getInverseEditOperations()[0];return new d.Y(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}let i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let e=this._selection.startColumn,t=i.startColumn;return t<=e?i:0===i.getDirection()?new d.Y(i.startLineNumber,e,i.endLineNumber,i.endColumn):new d.Y(i.endLineNumber,i.endColumn,i.startLineNumber,e)}return i}};m=o=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(n=u.c_,function(e,t){n(e,t,2)})],m)},92809:function(e,t,i){"use strict";i.d(t,{k:function(){return n}});let n={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0}},76058:function(e,t,i){"use strict";i.d(t,{Pe:function(){return isDiffEditorConfigurationKey},ei:function(){return isEditorConfigurationKey},wk:function(){return c}});var n=i(92809),o=i(69350),r=i(49655),s=i(46157),l=i(61529),d=i(76924);let c=Object.freeze({id:"editor",order:5,type:"object",title:s.NC("editorConfigurationTitle","Editor"),scope:5}),u={...c,properties:{"editor.tabSize":{type:"number",default:r.D.tabSize,minimum:1,markdownDescription:s.NC("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:s.NC("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:r.D.insertSpaces,markdownDescription:s.NC("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:r.D.detectIndentation,markdownDescription:s.NC("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:r.D.trimAutoWhitespace,description:s.NC("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:r.D.largeFileOptimizations,description:s.NC("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[s.NC("wordBasedSuggestions.off","Turn off Word Based Suggestions."),s.NC("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),s.NC("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),s.NC("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:s.NC("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[s.NC("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),s.NC("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),s.NC("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:s.NC("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:s.NC("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:s.NC("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:s.NC("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:s.NC("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:s.NC("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:s.NC("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:s.NC("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:s.NC("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:s.NC("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:s.NC("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:s.NC("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:n.k.maxComputationTime,description:s.NC("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:n.k.maxFileSize,description:s.NC("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:n.k.renderSideBySide,description:s.NC("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:n.k.renderSideBySideInlineBreakpoint,description:s.NC("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:n.k.useInlineViewWhenSpaceIsLimited,description:s.NC("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:n.k.renderMarginRevertIcon,description:s.NC("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:n.k.ignoreTrimWhitespace,description:s.NC("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:n.k.renderIndicators,description:s.NC("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:n.k.diffCodeLens,description:s.NC("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:n.k.diffWordWrap,markdownEnumDescriptions:[s.NC("wordWrap.off","Lines will never wrap."),s.NC("wordWrap.on","Lines will wrap at the viewport width."),s.NC("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:n.k.diffAlgorithm,markdownEnumDescriptions:[s.NC("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),s.NC("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:n.k.hideUnchangedRegions.enabled,markdownDescription:s.NC("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:n.k.hideUnchangedRegions.revealLineCount,markdownDescription:s.NC("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:n.k.hideUnchangedRegions.minimumLineCount,markdownDescription:s.NC("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:n.k.hideUnchangedRegions.contextLineCount,markdownDescription:s.NC("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:n.k.experimental.showMoves,markdownDescription:s.NC("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:n.k.experimental.showEmptyDecorations,description:s.NC("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};function isConfigurationPropertySchema(e){return void 0!==e.type||void 0!==e.anyOf}for(let e of o.Bc){let t=e.schema;if(void 0!==t){if(isConfigurationPropertySchema(t))u.properties[`editor.${e.name}`]=t;else for(let e in t)Object.hasOwnProperty.call(t,e)&&(u.properties[e]=t[e])}}let g=null;function getEditorConfigurationKeys(){return null===g&&(g=Object.create(null),Object.keys(u.properties).forEach(e=>{g[e]=!0})),g}function isEditorConfigurationKey(e){let t=getEditorConfigurationKeys();return t[`editor.${e}`]||!1}function isDiffEditorConfigurationKey(e){let t=getEditorConfigurationKeys();return t[`diffEditor.${e}`]||!1}let m=d.B.as(l.IP.Configuration);m.registerConfiguration(u)},22903:function(e,t,i){"use strict";i.d(t,{C:function(){return o}});var n=i(57605);let o=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new n.Q5,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}},77408:function(e,t,i){"use strict";i.d(t,{E4:function(){return BareFontInfo},pR:function(){return FontInfo}});var n=i(88059),o=i(69350),r=i(22903);let s=n.dz?1.5:1.35;let BareFontInfo=class BareFontInfo{static createFromValidatedSettings(e,t,i){let n=e.get(49),o=e.get(53),r=e.get(52),s=e.get(51),l=e.get(54),d=e.get(67),c=e.get(64);return BareFontInfo._create(n,o,r,s,l,d,c,t,i)}static _create(e,t,i,n,l,d,c,u,g){0===d?d=s*i:d<8&&(d*=i),(d=Math.round(d))<8&&(d=8);let m=1+(g?0:.1*r.C.getZoomLevel());if(i*=m,d*=m,l===o.Bo.TRANSLATE){if("normal"===t||"bold"===t)l=o.Bo.OFF;else{let e=parseInt(t,10);l=`'wght' ${e}`,t="normal"}}return new BareFontInfo({pixelRatio:u,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:l,lineHeight:d,letterSpacing:c})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=o.hL.fontFamily,t=BareFontInfo._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}};let FontInfo=class FontInfo extends BareFontInfo{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}},33848:function(e,t,i){"use strict";i.d(t,{N:function(){return CharacterClassifier},q:function(){return CharacterSet}});var n=i(30800);let CharacterClassifier=class CharacterClassifier{constructor(e){let t=(0,n.K)(e);this._defaultValue=t,this._asciiMap=CharacterClassifier._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let i=(0,n.K)(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};let CharacterSet=class CharacterSet{constructor(){this._actual=new CharacterClassifier(0)}add(e){this._actual.set(e,1)}has(e){return 1===this._actual.get(e)}clear(){return this._actual.clear()}}},77393:function(e,t,i){"use strict";i.d(t,{i:function(){return CursorColumns}});var n=i(45837);let CursorColumns=class CursorColumns{static _nextVisibleColumn(e,t,i){return 9===e?CursorColumns.nextRenderTabStop(t,i):n.K7(e)||n.C8(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){let o=Math.min(t-1,e.length),r=e.substring(0,o),s=new n.W1(r),l=0;for(;!s.eol();){let e=n.ZH(r,o,s.offset);s.nextGraphemeLength(),l=this._nextVisibleColumn(e,l,i)}return l}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;let o=e.length,r=new n.W1(e),s=0,l=1;for(;!r.eol();){let d=n.ZH(e,o,r.offset);r.nextGraphemeLength();let c=this._nextVisibleColumn(d,s,i),u=r.offset+1;if(c>=t){let e=t-s,i=c-t;if(i<e)return u;return l}s=c,l=u}return o+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}},78659:function(e,t,i){"use strict";i.d(t,{h:function(){return EditOperation}});var n=i(30822);let EditOperation=class EditOperation{static insert(e,t){return{range:new n.e(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}},1173:function(e,t,i){"use strict";i.d(t,{Bj:function(){return T},CE:function(){return z},DS:function(){return Z},HV:function(){return eo},H_:function(){return b},Jn:function(){return J},Kh:function(){return l},L7:function(){return en},Mm:function(){return d},N8:function(){return x},Qb:function(){return ee},Re:function(){return B},Tf:function(){return C},To:function(){return ei},UP:function(){return U},Vs:function(){return H},Xy:function(){return k},YF:function(){return X},cK:function(){return D},dI:function(){return g},e9:function(){return w},eS:function(){return W},e_:function(){return R},f9:function(){return er},fY:function(){return u},gS:function(){return v},h1:function(){return S},hw:function(){return m},lK:function(){return F},lS:function(){return Y},ll:function(){return E},m$:function(){return Q},m1:function(){return j},m3:function(){return et},m9:function(){return O},n0:function(){return c},oV:function(){return G},qe:function(){return L},r0:function(){return K},ts:function(){return q},vP:function(){return y},zJ:function(){return V},zd:function(){return N},zu:function(){return A},zw:function(){return M}});var n=i(46157),o=i(50164),r=i(45815),s=i(93672);let l=(0,r.P6G)("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},n.NC("lineHighlight","Background color for the highlight of line at the cursor position.")),d=(0,r.P6G)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:r.lRK},n.NC("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));(0,r.P6G)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},n.NC("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.P6G)("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:r.xL1,hcLight:r.xL1},n.NC("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),(0,r.P6G)("editor.symbolHighlightBackground",{dark:r.MUv,light:r.MUv,hcDark:null,hcLight:null},n.NC("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.P6G)("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:r.xL1,hcLight:r.xL1},n.NC("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0);let c=(0,r.P6G)("editorCursor.foreground",{dark:"#AEAFAD",light:o.Il.black,hcDark:o.Il.white,hcLight:"#0F4A85"},n.NC("caret","Color of the editor cursor.")),u=(0,r.P6G)("editorCursor.background",null,n.NC("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),g=(0,r.P6G)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},n.NC("editorWhitespaces","Color of whitespace characters in the editor.")),m=(0,r.P6G)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:o.Il.white,hcLight:"#292929"},n.NC("editorLineNumbers","Color of editor line numbers.")),f=(0,r.P6G)("editorIndentGuide.background",{dark:g,light:g,hcDark:g,hcLight:g},n.NC("editorIndentGuides","Color of the editor indentation guides."),!1,n.NC("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),_=(0,r.P6G)("editorIndentGuide.activeBackground",{dark:g,light:g,hcDark:g,hcLight:g},n.NC("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,n.NC("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),v=(0,r.P6G)("editorIndentGuide.background1",{dark:f,light:f,hcDark:f,hcLight:f},n.NC("editorIndentGuides1","Color of the editor indentation guides (1).")),C=(0,r.P6G)("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorIndentGuides2","Color of the editor indentation guides (2).")),b=(0,r.P6G)("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorIndentGuides3","Color of the editor indentation guides (3).")),S=(0,r.P6G)("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorIndentGuides4","Color of the editor indentation guides (4).")),y=(0,r.P6G)("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorIndentGuides5","Color of the editor indentation guides (5).")),w=(0,r.P6G)("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorIndentGuides6","Color of the editor indentation guides (6).")),L=(0,r.P6G)("editorIndentGuide.activeBackground1",{dark:_,light:_,hcDark:_,hcLight:_},n.NC("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),k=(0,r.P6G)("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),D=(0,r.P6G)("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),x=(0,r.P6G)("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),N=(0,r.P6G)("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),E=(0,r.P6G)("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),I=(0,r.P6G)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:r.xL1,hcLight:r.xL1},n.NC("editorActiveLineNumber","Color of editor active line number"),!1,n.NC("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));(0,r.P6G)("editorLineNumber.activeForeground",{dark:I,light:I,hcDark:I,hcLight:I},n.NC("editorActiveLineNumber","Color of editor active line number"));let T=(0,r.P6G)("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},n.NC("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));(0,r.P6G)("editorRuler.foreground",{dark:"#5A5A5A",light:o.Il.lightgrey,hcDark:o.Il.white,hcLight:"#292929"},n.NC("editorRuler","Color of the editor rulers.")),(0,r.P6G)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},n.NC("editorCodeLensForeground","Foreground color of editor CodeLens")),(0,r.P6G)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},n.NC("editorBracketMatchBackground","Background color behind matching brackets")),(0,r.P6G)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:r.lRK,hcLight:r.lRK},n.NC("editorBracketMatchBorder","Color for matching brackets boxes"));let M=(0,r.P6G)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},n.NC("editorOverviewRulerBorder","Color of the overview ruler border.")),R=(0,r.P6G)("editorOverviewRuler.background",null,n.NC("editorOverviewRulerBackground","Background color of the editor overview ruler."));(0,r.P6G)("editorGutter.background",{dark:r.cvW,light:r.cvW,hcDark:r.cvW,hcLight:r.cvW},n.NC("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),(0,r.P6G)("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:o.Il.fromHex("#fff").transparent(.8),hcLight:r.lRK},n.NC("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));let A=(0,r.P6G)("editorUnnecessaryCode.opacity",{dark:o.Il.fromHex("#000a"),light:o.Il.fromHex("#0007"),hcDark:null,hcLight:null},n.NC("unnecessaryCodeOpacity","Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."));(0,r.P6G)("editorGhostText.border",{dark:null,light:null,hcDark:o.Il.fromHex("#fff").transparent(.8),hcLight:o.Il.fromHex("#292929").transparent(.8)},n.NC("editorGhostTextBorder","Border color of ghost text in the editor.")),(0,r.P6G)("editorGhostText.foreground",{dark:o.Il.fromHex("#ffffff56"),light:o.Il.fromHex("#0007"),hcDark:null,hcLight:null},n.NC("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),(0,r.P6G)("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},n.NC("editorGhostTextBackground","Background color of the ghost text in the editor."));let P=new o.Il(new o.VS(0,122,204,.6)),O=(0,r.P6G)("editorOverviewRuler.rangeHighlightForeground",{dark:P,light:P,hcDark:P,hcLight:P},n.NC("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),F=(0,r.P6G)("editorOverviewRuler.errorForeground",{dark:new o.Il(new o.VS(255,18,18,.7)),light:new o.Il(new o.VS(255,18,18,.7)),hcDark:new o.Il(new o.VS(255,50,50,1)),hcLight:"#B5200D"},n.NC("overviewRuleError","Overview ruler marker color for errors.")),B=(0,r.P6G)("editorOverviewRuler.warningForeground",{dark:r.uoC,light:r.uoC,hcDark:r.pW3,hcLight:r.pW3},n.NC("overviewRuleWarning","Overview ruler marker color for warnings.")),W=(0,r.P6G)("editorOverviewRuler.infoForeground",{dark:r.c63,light:r.c63,hcDark:r.T83,hcLight:r.T83},n.NC("overviewRuleInfo","Overview ruler marker color for infos.")),V=(0,r.P6G)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},n.NC("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),H=(0,r.P6G)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},n.NC("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),z=(0,r.P6G)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},n.NC("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),U=(0,r.P6G)("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),K=(0,r.P6G)("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),j=(0,r.P6G)("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),q=(0,r.P6G)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new o.Il(new o.VS(255,18,18,.8)),light:new o.Il(new o.VS(255,18,18,.8)),hcDark:new o.Il(new o.VS(255,50,50,1)),hcLight:""},n.NC("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),G=(0,r.P6G)("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Q=(0,r.P6G)("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Z=(0,r.P6G)("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Y=(0,r.P6G)("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),J=(0,r.P6G)("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),X=(0,r.P6G)("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),ee=(0,r.P6G)("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),et=(0,r.P6G)("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),ei=(0,r.P6G)("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),en=(0,r.P6G)("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),eo=(0,r.P6G)("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),er=(0,r.P6G)("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},n.NC("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));(0,r.P6G)("editorUnicodeHighlight.border",{dark:r.uoC,light:r.uoC,hcDark:r.uoC,hcLight:r.uoC},n.NC("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),(0,r.P6G)("editorUnicodeHighlight.background",{dark:r.gpD,light:r.gpD,hcDark:r.gpD,hcLight:r.gpD},n.NC("editorUnicodeHighlight.background","Background color used to highlight unicode characters.")),(0,s.Ic)((e,t)=>{let i=e.getColor(r.cvW),n=e.getColor(l),o=n&&!n.isTransparent()?n:i;o&&t.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${o}; }`)})},98883:function(e,t,i){"use strict";function countEOL(e){let t=0,i=0,n=0,o=0;for(let r=0,s=e.length;r<s;r++){let l=e.charCodeAt(r);13===l?(0===t&&(i=r),t++,r+1<s&&10===e.charCodeAt(r+1)?(o|=2,r++):o|=3,n=r+1):10===l&&(o|=1,0===t&&(i=r),t++,n=r+1)}return 0===t&&(i=e.length),[t,i,e.length-n,o]}i.d(t,{Q:function(){return countEOL}})},99129:function(e,t,i){"use strict";i.d(t,{x:function(){return normalizeIndentation}});var n=i(45837),o=i(77393);function _normalizeIndentationFromWhitespace(e,t,i){let n=0;for(let i=0;i<e.length;i++)"	"===e.charAt(i)?n=o.i.nextIndentTabStop(n,t):n++;let r="";if(!i){let e=Math.floor(n/t);n%=t;for(let t=0;t<e;t++)r+="	"}for(let e=0;e<n;e++)r+=" ";return r}function normalizeIndentation(e,t,i){let o=n.LC(e);return -1===o&&(o=e.length),_normalizeIndentationFromWhitespace(e.substring(0,o),t,i)+e.substring(o)}},4261:function(e,t,i){"use strict";i.d(t,{i:function(){return LineRangeSet},z:function(){return LineRange}});var n=i(17861),o=i(84761),r=i(30822),s=i(34850);let LineRange=class LineRange{static fromRangeInclusive(e){return new LineRange(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(0===e.length)return[];let t=new LineRangeSet(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new LineRangeSet(e[i].slice()));return t.ranges}static ofLength(e,t){return new LineRange(e,e+t)}static deserialize(e){return new LineRange(e[0],e[1])}constructor(e,t){if(e>t)throw new n.he(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new LineRange(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new LineRange(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new LineRange(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new LineRange(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new r.e(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new r.e(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new o.q(this.startLineNumber-1,this.endLineNumberExclusive-1)}};let LineRangeSet=class LineRangeSet{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(0===e.length)return;let t=(0,s.J_)(this._normalizedRanges,t=>t.endLineNumberExclusive>=e.startLineNumber),i=(0,s.Jw)(this._normalizedRanges,t=>t.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){let t=(0,s.ti)(this._normalizedRanges,t=>t.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=(0,s.ti)(this._normalizedRanges,t=>t.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(0===this._normalizedRanges.length)return e;if(0===e._normalizedRanges.length)return this;let t=[],i=0,n=0,o=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let r=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){let t=this._normalizedRanges[i],o=e._normalizedRanges[n];t.startLineNumber<o.startLineNumber?(r=t,i++):(r=o,n++)}else i<this._normalizedRanges.length?(r=this._normalizedRanges[i],i++):(r=e._normalizedRanges[n],n++);null===o?o=r:o.endLineNumberExclusive>=r.startLineNumber?o=new LineRange(o.startLineNumber,Math.max(o.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(o),o=r)}return null!==o&&t.push(o),new LineRangeSet(t)}subtractFrom(e){let t=(0,s.J_)(this._normalizedRanges,t=>t.endLineNumberExclusive>=e.startLineNumber),i=(0,s.Jw)(this._normalizedRanges,t=>t.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new LineRangeSet([e]);let n=[],o=e.startLineNumber;for(let e=t;e<i;e++){let t=this._normalizedRanges[e];t.startLineNumber>o&&n.push(new LineRange(o,t.startLineNumber)),o=t.endLineNumberExclusive}return o<e.endLineNumberExclusive&&n.push(new LineRange(o,e.endLineNumberExclusive)),new LineRangeSet(n)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){let o=this._normalizedRanges[i],r=e._normalizedRanges[n],s=o.intersect(r);s&&!s.isEmpty&&t.push(s),o.endLineNumberExclusive<r.endLineNumberExclusive?i++:n++}return new LineRangeSet(t)}getWithDelta(e){return new LineRangeSet(this._normalizedRanges.map(t=>t.delta(e)))}}},84761:function(e,t,i){"use strict";i.d(t,{M:function(){return OffsetRangeSet},q:function(){return OffsetRange}});var n=i(17861);let OffsetRange=class OffsetRange{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{let o=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new OffsetRange(o,r))}}static ofLength(e){return new OffsetRange(0,e)}static ofStartAndLength(e,t){return new OffsetRange(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new n.he(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new OffsetRange(this.start+e,this.endExclusive+e)}deltaStart(e){return new OffsetRange(this.start+e,this.endExclusive)}deltaEnd(e){return new OffsetRange(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new OffsetRange(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new OffsetRange(t,i)}intersects(e){let t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new n.he(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new n.he(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}};let OffsetRangeSet=class OffsetRangeSet{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{let n=Math.min(e.start,this._sortedRanges[t].start),o=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new OffsetRange(n,o))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){let t=new OffsetRangeSet;for(let i of this._sortedRanges){let n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}},11953:function(e,t,i){"use strict";i.d(t,{L:function(){return Position}});let Position=class Position{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Position(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Position.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Position.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return Position.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){let i=0|e.lineNumber,n=0|t.lineNumber;if(i===n){let i=0|e.column,n=0|t.column;return i-n}return i-n}clone(){return new Position(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Position(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}},30822:function(e,t,i){"use strict";i.d(t,{e:function(){return Range}});var n=i(11953);let Range=class Range{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return Range.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Range.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber)&&!(t.lineNumber>e.endLineNumber)&&(t.lineNumber!==e.startLineNumber||!(t.column<e.startColumn))&&(t.lineNumber!==e.endLineNumber||!(t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber)&&!(t.lineNumber>e.endLineNumber)&&(t.lineNumber!==e.startLineNumber||!(t.column<=e.startColumn))&&(t.lineNumber!==e.endLineNumber||!(t.column>=e.endColumn))}containsRange(e){return Range.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber)&&!(t.endLineNumber<e.startLineNumber)&&!(t.startLineNumber>e.endLineNumber)&&!(t.endLineNumber>e.endLineNumber)&&(t.startLineNumber!==e.startLineNumber||!(t.startColumn<e.startColumn))&&(t.endLineNumber!==e.endLineNumber||!(t.endColumn>e.endColumn))}strictContainsRange(e){return Range.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber)&&!(t.endLineNumber<e.startLineNumber)&&!(t.startLineNumber>e.endLineNumber)&&!(t.endLineNumber>e.endLineNumber)&&(t.startLineNumber!==e.startLineNumber||!(t.startColumn<=e.startColumn))&&(t.endLineNumber!==e.endLineNumber||!(t.endColumn>=e.endColumn))}plusRange(e){return Range.plusRange(this,e)}static plusRange(e,t){let i,n,o,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new Range(i,n,o,r)}intersectRanges(e){return Range.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,r=e.endColumn,s=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,c=t.endColumn;return(i<s?(i=s,n=l):i===s&&(n=Math.max(n,l)),o>d?(o=d,r=c):o===d&&(r=Math.min(r,c)),i>o||i===o&&n>r)?null:new Range(i,n,o,r)}equalsRange(e){return Range.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Range.getEndPosition(this)}static getEndPosition(e){return new n.L(e.endLineNumber,e.endColumn)}getStartPosition(){return Range.getStartPosition(this)}static getStartPosition(e){return new n.L(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Range(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Range(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Range.collapseToStart(this)}static collapseToStart(e){return new Range(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Range.collapseToEnd(this)}static collapseToEnd(e){return new Range(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Range(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Range(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber)&&(e.endLineNumber!==t.startLineNumber||!(e.endColumn<t.startColumn))&&!(t.endLineNumber<e.startLineNumber)&&(t.endLineNumber!==e.startLineNumber||!(t.endColumn<e.startColumn))}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber)&&(e.endLineNumber!==t.startLineNumber||!(e.endColumn<=t.startColumn))&&!(t.endLineNumber<e.startLineNumber)&&(t.endLineNumber!==e.startLineNumber||!(t.endColumn<=e.startColumn))}static compareRangesUsingStarts(e,t){if(e&&t){let i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){let i=0|e.startColumn,n=0|t.startColumn;if(i===n){let i=0|e.endLineNumber,n=0|t.endLineNumber;if(i===n){let i=0|e.endColumn,n=0|t.endColumn;return i-n}return i-n}return i-n}return i-n}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}},45841:function(e,t,i){"use strict";i.d(t,{Y:function(){return Selection}});var n=i(11953),o=i(30822);let Selection=class Selection extends o.e{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Selection.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new Selection(this.startLineNumber,this.startColumn,e,t):new Selection(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new n.L(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new n.L(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new Selection(e,t,this.endLineNumber,this.endColumn):new Selection(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Selection(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new Selection(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Selection(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Selection(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(e,t,i,n,o){return 0===o?new Selection(e,t,i,n):new Selection(i,n,e,t)}}},53778:function(e,t,i){"use strict";let n,o,r;i.d(t,{HT:function(){return StringBuilder},kH:function(){return decodeUTF16LE},oe:function(){return getPlatformTextDecoder}});var s=i(45837),l=i(88059),d=i(73126);function getUTF16LE_TextDecoder(){return n||(n=new TextDecoder("UTF-16LE")),n}function getUTF16BE_TextDecoder(){return o||(o=new TextDecoder("UTF-16BE")),o}function getPlatformTextDecoder(){return r||(r=l.r()?getUTF16LE_TextDecoder():getUTF16BE_TextDecoder()),r}function decodeUTF16LE(e,t,i){let n=new Uint16Array(e.buffer,t,i);return i>0&&(65279===n[0]||65534===n[0])?compatDecodeUTF16LE(e,t,i):getUTF16LE_TextDecoder().decode(n)}function compatDecodeUTF16LE(e,t,i){let n=[],o=0;for(let r=0;r<i;r++){let i=d.mP(e,t);t+=2,n[o++]=String.fromCharCode(i)}return n.join("")}let StringBuilder=class StringBuilder{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";let e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return getPlatformTextDecoder().decode(e)}_flushBuffer(){let e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){let t=this._capacity-this._bufferLength;t<=1&&(0===t||s.ZG(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){let t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}},28862:function(e,t,i){"use strict";i.d(t,{b:function(){return compressConsecutiveTextChanges},q:function(){return TextChange}});var n=i(73126),o=i(53778);function escapeNewLine(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}let TextChange=class TextChange{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${escapeNewLine(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${escapeNewLine(this.oldText)}")`:`(replace@${this.oldPosition} "${escapeNewLine(this.oldText)}" with "${escapeNewLine(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){let o=t.length;n.T4(e,o,i),i+=4;for(let r=0;r<o;r++)n.oq(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){let i=n.Ag(e,t);return t+=4,(0,o.kH)(e,t,i)}writeSize(){return 8+TextChange._writeStringSize(this.oldText)+TextChange._writeStringSize(this.newText)}write(e,t){return n.T4(e,this.oldPosition,t),t+=4,n.T4(e,this.newPosition,t),t+=4,t=TextChange._writeString(e,this.oldText,t),t=TextChange._writeString(e,this.newText,t)}static read(e,t,i){let o=n.Ag(e,t);t+=4;let r=n.Ag(e,t);t+=4;let s=TextChange._readString(e,t);t+=TextChange._writeStringSize(s);let l=TextChange._readString(e,t);return t+=TextChange._writeStringSize(l),i.push(new TextChange(o,s,r,l)),t}};function compressConsecutiveTextChanges(e,t){if(null===e||0===e.length)return t;let i=new TextChangeCompressor(e,t);return i.compress()}let TextChangeCompressor=class TextChangeCompressor{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){let o,r;if(null===i){this._acceptCurr(n),n=this._getCurr(++t);continue}if(null===n){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){let[e,t]=TextChangeCompressor._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(e),n=t;continue}if(i.newPosition<n.oldPosition){let[e,t]=TextChangeCompressor._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(e),i=t;continue}if(n.oldEnd===i.newEnd)o=i,r=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){let[e,s]=TextChangeCompressor._splitPrev(i,n.oldLength);o=e,r=n,i=s,n=this._getCurr(++t)}else{let[t,s]=TextChangeCompressor._splitCurr(n,i.newLength);o=i,r=t,i=this._getPrev(++e),n=s}this._result[this._resultLen++]=new TextChange(o.oldPosition,o.oldText,r.newPosition,r.newText),this._prevDeltaOffset+=o.newLength-o.oldLength,this._currDeltaOffset+=r.newLength-r.oldLength}let o=TextChangeCompressor._merge(this._result),r=TextChangeCompressor._removeNoOps(o);return r}_acceptCurr(e){this._result[this._resultLen++]=TextChangeCompressor._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=TextChangeCompressor._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new TextChange(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new TextChange(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let i=e.newText.substr(0,t),n=e.newText.substr(t);return[new TextChange(e.oldPosition,e.oldText,e.newPosition,i),new TextChange(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){let i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new TextChange(e.oldPosition,i,e.newPosition,e.newText),new TextChange(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;let t=[],i=0,n=e[0];for(let o=1;o<e.length;o++){let r=e[o];n.oldEnd===r.oldPosition?n=new TextChange(n.oldPosition,n.oldText+r.oldText,n.newPosition,n.newText+r.newText):(t[i++]=n,n=r)}return t[i++]=n,t}static _removeNoOps(e){if(0===e.length)return e;let t=[],i=0;for(let n=0;n<e.length;n++){let o=e[n];o.oldText!==o.newText&&(t[i++]=o)}return t}}},49655:function(e,t,i){"use strict";i.d(t,{D:function(){return n}});let n={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}},50673:function(e,t,i){"use strict";i.d(t,{u:function(){return o}});var n=i(33848);let WordCharacterClassifier=class WordCharacterClassifier extends n.N{constructor(e){super(0);for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}};function once(e){let t={};return i=>(t.hasOwnProperty(i)||(t[i]=e(i)),t[i])}let o=once(e=>new WordCharacterClassifier(e))},83783:function(e,t,i){"use strict";i.d(t,{Af:function(){return s},eq:function(){return ensureValidWordDefinition},t2:function(){return getWordAtText},vu:function(){return r}});var n=i(50885),o=i(68324);let r="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function createWordRegExp(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(let i of r)e.indexOf(i)>=0||(t+="\\"+i);return RegExp(t+="\\s]+)","g")}let s=createWordRegExp();function ensureValidWordDefinition(e){let t=s;if(e&&e instanceof RegExp){if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}}return t.lastIndex=0,t}let l=new o.S;function getWordAtText(e,t,i,o,r){if(t=ensureValidWordDefinition(t),r||(r=n.$.first(l)),i.length>r.maxLen){let n=e-r.maxLen/2;return n<0?n=0:o+=n,i=i.substring(n,e+r.maxLen/2),getWordAtText(e,t,i,o,r)}let s=Date.now(),d=e-1-o,c=-1,u=null;for(let e=1;!(Date.now()-s>=r.timeBudget);e++){let n=d-r.windowSize*e;t.lastIndex=Math.max(0,n);let o=_findRegexMatchEnclosingPosition(t,i,d,c);if(!o&&u||(u=o,n<=0))break;c=n}if(u){let e={word:u[0],startColumn:o+1+u.index,endColumn:o+1+u.index+u[0].length};return t.lastIndex=0,e}return null}function _findRegexMatchEnclosingPosition(e,t,i,n){let o;for(;o=e.exec(t);){let t=o.index||0;if(t<=i&&e.lastIndex>=i)return o;if(n>0&&t>n)break}return null}l.unshift({maxLen:1e3,windowSize:15,timeBudget:150})},84750:function(e,t,i){"use strict";i.d(t,{l:function(){return AtomicTabMoveOperations}});var n=i(77393);let AtomicTabMoveOperations=class AtomicTabMoveOperations{static whitespaceVisibleColumn(e,t,i){let o=e.length,r=0,s=-1,l=-1;for(let d=0;d<o;d++){if(d===t)return[s,l,r];r%i==0&&(s=d,l=r);let o=e.charCodeAt(d);switch(o){case 32:r+=1;break;case 9:r=n.i.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===o?[s,l,r]:[-1,-1,-1]}static atomicPosition(e,t,i,o){let r;let s=e.length,[l,d,c]=AtomicTabMoveOperations.whitespaceVisibleColumn(e,t,i);if(-1===c)return -1;switch(o){case 0:r=!0;break;case 1:r=!1;break;case 2:if(c%i==0)return t;r=c%i<=i/2}if(r){if(-1===l)return -1;let t=d;for(let o=l;o<s;++o){if(t===d+i)return l;let r=e.charCodeAt(o);switch(r){case 32:t+=1;break;case 9:t=n.i.nextRenderTabStop(t,i);break;default:return -1}}return t===d+i?l:-1}let u=n.i.nextRenderTabStop(c,i),g=c;for(let o=t;o<s;o++){if(g===u)return o;let t=e.charCodeAt(o);switch(t){case 32:g+=1;break;case 9:g=n.i.nextRenderTabStop(g,i);break;default:return -1}}return g===u?s:-1}}},6700:function(e,t,i){"use strict";i.d(t,{A:function(){return DeleteOperations}});var n=i(45837),o=i(71708),r=i(67949),s=i(77393),l=i(42040),d=i(30822),c=i(11953);let DeleteOperations=class DeleteOperations{static deleteRight(e,t,i,n){let r=[],s=3!==e;for(let e=0,c=n.length;e<c;e++){let c=n[e],u=c;if(u.isEmpty()){let e=c.getPosition(),n=l.o.right(t,i,e);u=new d.e(n.lineNumber,n.column,e.lineNumber,e.column)}if(u.isEmpty()){r[e]=null;continue}u.startLineNumber!==u.endLineNumber&&(s=!0),r[e]=new o.T4(u,"")}return[s,r]}static isAutoClosingPairDelete(e,t,i,n,o,s,l){if("never"===t&&"never"===i||"never"===e)return!1;for(let d=0,c=s.length;d<c;d++){let c=s[d],u=c.getPosition();if(!c.isEmpty())return!1;let g=o.getLineContent(u.lineNumber);if(u.column<2||u.column>=g.length+1)return!1;let m=g.charAt(u.column-2),f=n.get(m);if(!f)return!1;if((0,r.LN)(m)){if("never"===i)return!1}else if("never"===t)return!1;let _=g.charAt(u.column-1),v=!1;for(let e of f)e.open===m&&e.close===_&&(v=!0);if(!v)return!1;if("auto"===e){let e=!1;for(let t=0,i=l.length;t<i;t++){let i=l[t];if(u.lineNumber===i.startLineNumber&&u.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){let n=[];for(let e=0,t=i.length;e<t;e++){let t=i[e].getPosition(),r=new d.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1);n[e]=new o.T4(r,"")}return[!0,n]}static deleteLeft(e,t,i,n,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,r))return this._runAutoClosingPairDelete(t,i,n);let s=[],l=2!==e;for(let e=0,r=n.length;e<r;e++){let r=DeleteOperations.getDeleteRange(n[e],i,t);if(r.isEmpty()){s[e]=null;continue}r.startLineNumber!==r.endLineNumber&&(l=!0),s[e]=new o.T4(r,"")}return[l,s]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;let o=e.getPosition();if(i.useTabStops&&o.column>1){let e=t.getLineContent(o.lineNumber),r=n.LC(e),l=-1===r?e.length+1:r+1;if(o.column<=l){let e=i.visibleColumnFromColumn(t,o),n=s.i.prevIndentTabStop(e,i.indentSize),r=i.columnFromVisibleColumn(t,o.lineNumber,n);return new d.e(o.lineNumber,r,o.lineNumber,o.column)}}return d.e.fromPositions(DeleteOperations.getPositionAfterDeleteLeft(o,t),o)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let i=n.oH(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}if(!(e.lineNumber>1))return e;{let i=e.lineNumber-1;return new c.L(i,t.getLineMaxColumn(i))}}static cut(e,t,i){let n=[],s=null;i.sort((e,t)=>c.L.compare(e.getStartPosition(),t.getEndPosition()));for(let r=0,l=i.length;r<l;r++){let l=i[r];if(l.isEmpty()){if(e.emptySelectionClipboard){let e,i,c,u;let g=l.getPosition();g.lineNumber<t.getLineCount()?(e=g.lineNumber,i=1,c=g.lineNumber+1,u=1):(g.lineNumber>1&&(null==s?void 0:s.endLineNumber)!==g.lineNumber?(e=g.lineNumber-1,i=t.getLineMaxColumn(g.lineNumber-1)):(e=g.lineNumber,i=1),c=g.lineNumber,u=t.getLineMaxColumn(g.lineNumber));let m=new d.e(e,i,c,u);s=m,m.isEmpty()?n[r]=null:n[r]=new o.T4(m,"")}else n[r]=null}else n[r]=new o.T4(l,"")}return new r.Tp(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},21384:function(e,t,i){"use strict";i.d(t,{N:function(){return n},P:function(){return CursorMoveCommands}});var n,o=i(16877),r=i(67949),s=i(42040),l=i(66072),d=i(11953),c=i(30822);let CursorMoveCommands=class CursorMoveCommands{static addCursorDown(e,t,i){let n=[],o=0;for(let l=0,d=t.length;l<d;l++){let d=t[l];n[o++]=new r.Vi(d.modelState,d.viewState),i?n[o++]=r.Vi.fromModelState(s.o.translateDown(e.cursorConfig,e.model,d.modelState)):n[o++]=r.Vi.fromViewState(s.o.translateDown(e.cursorConfig,e,d.viewState))}return n}static addCursorUp(e,t,i){let n=[],o=0;for(let l=0,d=t.length;l<d;l++){let d=t[l];n[o++]=new r.Vi(d.modelState,d.viewState),i?n[o++]=r.Vi.fromModelState(s.o.translateUp(e.cursorConfig,e.model,d.modelState)):n[o++]=r.Vi.fromViewState(s.o.translateUp(e.cursorConfig,e,d.viewState))}return n}static moveToBeginningOfLine(e,t,i){let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o];n[o]=this._moveToLineStart(e,r,i)}return n}static _moveToLineStart(e,t,i){let n=t.viewState.position.column,o=t.modelState.position.column,r=t.viewState.position.lineNumber,s=e.getLineFirstNonWhitespaceColumn(r);return n!==o&&n!==s?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return r.Vi.fromViewState(s.o.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return r.Vi.fromModelState(s.o.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){let o=[];for(let r=0,s=t.length;r<s;r++){let s=t[r];o[r]=this._moveToLineEnd(e,s,i,n)}return o}static _moveToLineEnd(e,t,i,n){let o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),s=o.column===r,l=t.modelState.position,d=e.model.getLineMaxColumn(l.lineNumber),c=r-o.column==d-l.column;return s||c?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return r.Vi.fromViewState(s.o.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return r.Vi.fromModelState(s.o.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){let i=[];for(let n=0,o=t.length;n<o;n++){let o;let s=t[n],l=s.modelState.selection.startLineNumber,u=e.model.getLineCount(),g=s.modelState.selection.endLineNumber;g===u?o=e.model.getLineMaxColumn(u):(g++,o=1),i[n]=r.Vi.fromModelState(new r.rS(new c.e(l,1,l,1),0,0,new d.L(g,o),0))}return i}static moveToBeginningOfBuffer(e,t,i){let n=[];for(let o=0,l=t.length;o<l;o++){let l=t[o];n[o]=r.Vi.fromModelState(s.o.moveToBeginningOfBuffer(e.cursorConfig,e.model,l.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){let n=[];for(let o=0,l=t.length;o<l;o++){let l=t[o];n[o]=r.Vi.fromModelState(s.o.moveToEndOfBuffer(e.cursorConfig,e.model,l.modelState,i))}return n}static selectAll(e,t){let i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return r.Vi.fromModelState(new r.rS(new c.e(1,1,1,1),0,0,new d.L(i,n),0))}static line(e,t,i,n,o){let s=e.model.validatePosition(n),l=o?e.coordinatesConverter.validateViewPosition(new d.L(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!i){let t=e.model.getLineCount(),i=s.lineNumber+1,n=1;return i>t&&(i=t,n=e.model.getLineMaxColumn(i)),r.Vi.fromModelState(new r.rS(new c.e(s.lineNumber,1,i,n),2,0,new d.L(i,n),0))}let u=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<u)return r.Vi.fromViewState(t.viewState.move(!0,l.lineNumber,1,0));if(s.lineNumber>u){let i=e.getLineCount(),n=l.lineNumber+1,o=1;return n>i&&(n=i,o=e.getLineMaxColumn(n)),r.Vi.fromViewState(t.viewState.move(!0,n,o,0))}{let e=t.modelState.selectionStart.getEndPosition();return r.Vi.fromModelState(t.modelState.move(!0,e.lineNumber,e.column,0))}}static word(e,t,i,n){let o=e.model.validatePosition(n);return r.Vi.fromModelState(l.w.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new r.Vi(t.modelState,t.viewState);let i=t.viewState.position.lineNumber,n=t.viewState.position.column;return r.Vi.fromViewState(new r.rS(new c.e(i,n,i,n),0,0,new d.L(i,n),0))}static moveTo(e,t,i,n,o){if(i){if(1===t.modelState.selectionStartKind)return this.word(e,t,i,n);if(2===t.modelState.selectionStartKind)return this.line(e,t,i,n,o)}let s=e.model.validatePosition(n),l=o?e.coordinatesConverter.validateViewPosition(new d.L(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return r.Vi.fromViewState(t.viewState.move(i,l.lineNumber,l.column,0))}static simpleMove(e,t,i,n,o,l){switch(i){case 0:if(4===l)return this._moveHalfLineLeft(e,t,n);return this._moveLeft(e,t,n,o);case 1:if(4===l)return this._moveHalfLineRight(e,t,n);return this._moveRight(e,t,n,o);case 2:if(2===l)return this._moveUpByViewLines(e,t,n,o);return this._moveUpByModelLines(e,t,n,o);case 3:if(2===l)return this._moveDownByViewLines(e,t,n,o);return this._moveDownByModelLines(e,t,n,o);case 4:if(2===l)return t.map(t=>r.Vi.fromViewState(s.o.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,n)));return t.map(t=>r.Vi.fromModelState(s.o.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,n)));case 5:if(2===l)return t.map(t=>r.Vi.fromViewState(s.o.moveToNextBlankLine(e.cursorConfig,e,t.viewState,n)));return t.map(t=>r.Vi.fromModelState(s.o.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,o){let r=e.getCompletelyVisibleViewRange(),s=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{let i=this._firstLineNumberInRange(e.model,s,o),r=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,r)]}case 13:{let i=this._lastLineNumberInRange(e.model,s,o),r=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,r)]}case 12:{let i=Math.round((s.startLineNumber+s.endLineNumber)/2),o=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,o)]}case 14:{let i=[];for(let o=0,s=t.length;o<s;o++){let s=t[o];i[o]=this.findPositionInViewportIfOutside(e,s,r,n)}return i}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){let o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new r.Vi(t.modelState,t.viewState);{let l;l=o>i.endLineNumber-1?i.endLineNumber-1:o<i.startLineNumber?i.startLineNumber:o;let d=s.o.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,l,!1);return r.Vi.fromViewState(t.viewState.move(n,d.lineNumber,d.column,d.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(t=>r.Vi.fromViewState(s.o.moveLeft(e.cursorConfig,e,t.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){let n=[];for(let o=0,l=t.length;o<l;o++){let l=t[o],d=l.viewState.position.lineNumber,c=Math.round(e.getLineLength(d)/2);n[o]=r.Vi.fromViewState(s.o.moveLeft(e.cursorConfig,e,l.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(t=>r.Vi.fromViewState(s.o.moveRight(e.cursorConfig,e,t.viewState,i,n)))}static _moveHalfLineRight(e,t,i){let n=[];for(let o=0,l=t.length;o<l;o++){let l=t[o],d=l.viewState.position.lineNumber,c=Math.round(e.getLineLength(d)/2);n[o]=r.Vi.fromViewState(s.o.moveRight(e.cursorConfig,e,l.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){let o=[];for(let l=0,d=t.length;l<d;l++){let d=t[l];o[l]=r.Vi.fromViewState(s.o.moveDown(e.cursorConfig,e,d.viewState,i,n))}return o}static _moveDownByModelLines(e,t,i,n){let o=[];for(let l=0,d=t.length;l<d;l++){let d=t[l];o[l]=r.Vi.fromModelState(s.o.moveDown(e.cursorConfig,e.model,d.modelState,i,n))}return o}static _moveUpByViewLines(e,t,i,n){let o=[];for(let l=0,d=t.length;l<d;l++){let d=t[l];o[l]=r.Vi.fromViewState(s.o.moveUp(e.cursorConfig,e,d.viewState,i,n))}return o}static _moveUpByModelLines(e,t,i,n){let o=[];for(let l=0,d=t.length;l<d;l++){let d=t[l];o[l]=r.Vi.fromModelState(s.o.moveUp(e.cursorConfig,e.model,d.modelState,i,n))}return o}static _moveToViewPosition(e,t,i,n,o){return r.Vi.fromViewState(t.viewState.move(i,n,o,0))}static _moveToModelPosition(e,t,i,n,o){return r.Vi.fromModelState(t.modelState.move(i,n,o,0))}static _moveToViewMinColumn(e,t,i){let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=r.viewState.position.lineNumber,l=e.getLineMinColumn(s);n[o]=this._moveToViewPosition(e,r,i,s,l)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=r.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(s);n[o]=this._moveToViewPosition(e,r,i,s,l)}return n}static _moveToViewCenterColumn(e,t,i){let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=r.viewState.position.lineNumber,l=Math.round((e.getLineMaxColumn(s)+e.getLineMinColumn(s))/2);n[o]=this._moveToViewPosition(e,r,i,s,l)}return n}static _moveToViewMaxColumn(e,t,i){let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=r.viewState.position.lineNumber,l=e.getLineMaxColumn(s);n[o]=this._moveToViewPosition(e,r,i,s,l)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){let n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=r.viewState.position.lineNumber,l=e.getLineLastNonWhitespaceColumn(s);n[o]=this._moveToViewPosition(e,r,i,s,l)}return n}};!function(e){function parse(t){let i;if(!t.to)return null;switch(t.to){case e.RawDirection.Left:i=0;break;case e.RawDirection.Right:i=1;break;case e.RawDirection.Up:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.PrevBlankLine:i=4;break;case e.RawDirection.NextBlankLine:i=5;break;case e.RawDirection.WrappedLineStart:i=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case e.RawDirection.WrappedLineColumnCenter:i=8;break;case e.RawDirection.WrappedLineEnd:i=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case e.RawDirection.ViewPortTop:i=11;break;case e.RawDirection.ViewPortBottom:i=13;break;case e.RawDirection.ViewPortCenter:i=12;break;case e.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let n=0;switch(t.by){case e.RawUnit.Line:n=1;break;case e.RawUnit.WrappedLine:n=2;break;case e.RawUnit.Character:n=3;break;case e.RawUnit.HalfLine:n=4}return{direction:i,unit:n,select:!!t.select,value:t.value||1}}e.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:function(e){return!!o.Kn(e)&&!!(o.HD(e.to)&&(o.o8(e.select)||o.jn(e.select))&&(o.o8(e.by)||o.HD(e.by))&&(o.o8(e.value)||o.hj(e.value)))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=parse}(n||(n={}))},42040:function(e,t,i){"use strict";i.d(t,{o:function(){return MoveOperations}});var n=i(45837),o=i(77393),r=i(11953),s=i(30822),l=i(84750),d=i(67949);let CursorPosition=class CursorPosition{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}};let MoveOperations=class MoveOperations{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-n.HO(e.getLineContent(t.lineNumber),t.column-1));if(!(t.lineNumber>1))return t;{let i=t.lineNumber-1;return new r.L(i,e.getLineMaxColumn(i))}}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let n=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=l.l.atomicPosition(o,t.column-1,i,0);if(-1!==s&&s+1>=n)return new r.L(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,i){let n=e.stickyTabStops?MoveOperations.leftPositionAtomicSoftTabs(t,i,e.tabSize):MoveOperations.leftPosition(t,i);return new CursorPosition(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,o){let r,s;if(i.hasSelection()&&!n)r=i.selection.startLineNumber,s=i.selection.startColumn;else{let n=i.position.delta(void 0,-(o-1)),l=t.normalizePosition(MoveOperations.clipPositionColumn(n,t),0),d=MoveOperations.left(e,t,l);r=d.lineNumber,s=d.column}return i.move(n,r,s,0)}static clipPositionColumn(e,t){return new r.L(e.lineNumber,MoveOperations.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i+=n.vH(e.getLineContent(t),i-1):t<e.getLineCount()&&(t+=1,i=e.getLineMinColumn(t)),new r.L(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,o){if(i<e.getLineIndentColumn(t)){let o=e.getLineContent(t),s=l.l.atomicPosition(o,i-1,n,1);if(-1!==s)return new r.L(t,s+1)}return this.rightPosition(e,t,i)}static right(e,t,i){let n=e.stickyTabStops?MoveOperations.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):MoveOperations.rightPosition(t,i.lineNumber,i.column);return new CursorPosition(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,o){let r,s;if(i.hasSelection()&&!n)r=i.selection.endLineNumber,s=i.selection.endColumn;else{let n=i.position.delta(void 0,o-1),l=t.normalizePosition(MoveOperations.clipPositionColumn(n,t),1),d=MoveOperations.right(e,t,l);r=d.lineNumber,s=d.column}return i.move(n,r,s,0)}static vertical(e,t,i,n,s,l,d,c){let u=o.i.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+s,g=t.getLineCount(),m=1===i&&1===n,f=i===g&&n===t.getLineMaxColumn(i),_=l<i?m:f;if((i=l)<1?(i=1,n=d?t.getLineMinColumn(i):Math.min(t.getLineMaxColumn(i),n)):i>g?(i=g,n=d?t.getLineMaxColumn(i):Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,u),s=_?0:u-o.i.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),void 0!==c){let e=new r.L(i,n),o=t.normalizePosition(e,c);s+=n-o.column,i=o.lineNumber,n=o.column}return new CursorPosition(i,n,s)}static down(e,t,i,n,o,r,s){return this.vertical(e,t,i,n,o,i+r,s,4)}static moveDown(e,t,i,n,o){let s,l,d;i.hasSelection()&&!n?(s=i.selection.endLineNumber,l=i.selection.endColumn):(s=i.position.lineNumber,l=i.position.column);let c=0;do{d=MoveOperations.down(e,t,s+c,l,i.leftoverVisibleColumns,o,!0);let n=t.normalizePosition(new r.L(d.lineNumber,d.column),2);if(n.lineNumber>s)break}while(c++<10&&s+c<t.getLineCount());return i.move(n,d.lineNumber,d.column,d.leftoverVisibleColumns)}static translateDown(e,t,i){let n=i.selection,o=MoveOperations.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),l=MoveOperations.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new d.rS(new s.e(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new r.L(l.lineNumber,l.column),l.leftoverVisibleColumns)}static up(e,t,i,n,o,r,s){return this.vertical(e,t,i,n,o,i-r,s,3)}static moveUp(e,t,i,n,o){let r,s;i.hasSelection()&&!n?(r=i.selection.startLineNumber,s=i.selection.startColumn):(r=i.position.lineNumber,s=i.position.column);let l=MoveOperations.up(e,t,r,s,i.leftoverVisibleColumns,o,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){let n=i.selection,o=MoveOperations.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),l=MoveOperations.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new d.rS(new s.e(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new r.L(l.lineNumber,l.column),l.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,i,n){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(n,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,n){let o=t.getLineCount(),r=i.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,n){let o;let r=i.position.lineNumber,s=t.getLineMinColumn(r),l=t.getLineFirstNonWhitespaceColumn(r)||s,d=i.position.column;return o=d===l?s:l,i.move(n,r,o,0)}static moveToEndOfLine(e,t,i,n,o){let r=i.position.lineNumber,s=t.getLineMaxColumn(r);return i.move(n,r,s,o?1073741824-s:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){let o=t.getLineCount(),r=t.getLineMaxColumn(o);return i.move(n,o,r,0)}}},75907:function(e,t,i){"use strict";i.d(t,{Nu:function(){return CompositionOutcome},u6:function(){return TypeOperations},g_:function(){return TypeWithAutoClosingCommand}});var n=i(17861),o=i(45837),r=i(71708),s=i(93230),l=i(30822),d=i(45841);let SurroundSelectionCommand=class SurroundSelectionCommand{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new l.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new l.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range,o=i[1].range;return new d.Y(n.endLineNumber,n.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}};let CompositionSurroundSelectionCommand=class CompositionSurroundSelectionCommand{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new l.e(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range;return new d.Y(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}};var c=i(67949),u=i(50673),g=i(11953),m=i(63016),f=i(68903),_=i(40523),v=i(9954),C=i(28151);let TypeOperations=class TypeOperations{static indent(e,t,i){if(null===t||null===i)return[];let n=[];for(let t=0,o=i.length;t<o;t++)n[t]=new s.U(i[t],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){let n=[];for(let t=0,o=i.length;t<o;t++)n[t]=new s.U(i[t],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static shiftIndent(e,t,i){return i=i||1,s.U.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,s.U.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,n){let o=[];for(let e=0,t=i.length;e<t;e++)o[e]=new r.T4(i[e],n[e]);return new c.Tp(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,o){let s=[];for(let e=0,t=i.length;e<t;e++){let t=i[e],d=t.getPosition();if(o&&!t.isEmpty()&&(o=!1),o&&n.indexOf("\n")!==n.length-1&&(o=!1),o){let i=new l.e(d.lineNumber,1,d.lineNumber,1);s[e]=new r.hP(i,n,t,!0)}else s[e]=new r.T4(t,n)}return new c.Tp(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,n,r){if(n||1===t.length)return null;if(r&&r.length===t.length)return r;if("spread"===e.multiCursorPaste){10===i.charCodeAt(i.length-1)&&(i=i.substr(0,i.length-1)),13===i.charCodeAt(i.length-1)&&(i=i.substr(0,i.length-1));let e=o.uq(i);if(e.length===t.length)return e}return null}static paste(e,t,i,n,o,r){let s=this._distributePasteToCursors(e,i,n,o,r);return s?(i=i.sort(l.e.compareRangesUsingStarts),this._distributedPaste(e,t,i,s)):this._simplePaste(e,t,i,n,o)}static _goodIndentForLine(e,t,i){let n=null,r="",s=(0,v.r7)(e.autoIndent,t,i,!1,e.languageConfigurationService);if(s)n=s.action,r=s.indentation;else if(i>1){let n;for(n=i-1;n>=1;n--){let e=t.getLineContent(n),i=o.ow(e);if(i>=0)break}if(n<1)return null;let s=t.getLineMaxColumn(n),d=(0,C.A)(e.autoIndent,t,new l.e(n,s,n,s),e.languageConfigurationService);d&&(r=d.indentation+d.appendText)}return(n&&(n===m.wU.Indent&&(r=TypeOperations.shiftIndent(e,r)),n===m.wU.Outdent&&(r=TypeOperations.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r)?r:null}static _replaceJumpToNextIndent(e,t,i,n){let o="",s=i.getStartPosition();if(e.insertSpaces){let i=e.visibleColumnFromColumn(t,s),n=e.indentSize,r=n-i%n;for(let e=0;e<r;e++)o+=" "}else o="	";return new r.T4(i,o,n)}static tab(e,t,i){let n=[];for(let o=0,d=i.length;o<d;o++){let d=i[o];if(d.isEmpty()){let i=t.getLineContent(d.startLineNumber);if(/^\s*$/.test(i)&&t.tokenization.isCheapToTokenize(d.startLineNumber)){let s=this._goodIndentForLine(e,t,d.startLineNumber);s=s||"	";let c=e.normalizeIndentation(s);if(!i.startsWith(c)){n[o]=new r.T4(new l.e(d.startLineNumber,1,d.startLineNumber,i.length+1),c,!0);continue}}n[o]=this._replaceJumpToNextIndent(e,t,d,!0)}else{if(d.startLineNumber===d.endLineNumber){let i=t.getLineMaxColumn(d.startLineNumber);if(1!==d.startColumn||d.endColumn!==i){n[o]=this._replaceJumpToNextIndent(e,t,d,!1);continue}}n[o]=new s.U(d,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static compositionType(e,t,i,n,o,r,s,l){let d=n.map(e=>this._compositionType(i,e,o,r,s,l));return new c.Tp(4,d,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,o,s){if(!t.isEmpty())return null;let d=t.getPosition(),c=Math.max(1,d.column-n),u=Math.min(e.getLineMaxColumn(d.lineNumber),d.column+o),g=new l.e(d.lineNumber,c,d.lineNumber,u),m=e.getValueInRange(g);return m===i&&0===s?null:new r.Uo(g,i,0,s)}static _typeCommand(e,t,i){return i?new r.Sj(e,t,!0):new r.T4(e,t,!0)}static _enter(e,t,i,n){if(0===e.autoIndent)return TypeOperations._typeCommand(n,"\n",i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||1===e.autoIndent){let r=t.getLineContent(n.startLineNumber),s=o.V8(r).substring(0,n.startColumn-1);return TypeOperations._typeCommand(n,"\n"+e.normalizeIndentation(s),i)}let s=(0,C.A)(e.autoIndent,t,n,e.languageConfigurationService);if(s){if(s.indentAction===m.wU.None||s.indentAction===m.wU.Indent)return TypeOperations._typeCommand(n,"\n"+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===m.wU.IndentOutdent){let t=e.normalizeIndentation(s.indentation),o=e.normalizeIndentation(s.indentation+s.appendText),l="\n"+o+"\n"+t;return i?new r.Sj(n,l,!0):new r.Uo(n,l,-1,o.length-t.length,!0)}if(s.indentAction===m.wU.Outdent){let t=TypeOperations.unshiftIndent(e,s.indentation);return TypeOperations._typeCommand(n,"\n"+e.normalizeIndentation(t+s.appendText),i)}}let l=t.getLineContent(n.startLineNumber),d=o.V8(l).substring(0,n.startColumn-1);if(e.autoIndent>=4){let s=(0,v.UF)(e.autoIndent,t,n,{unshiftIndent:t=>TypeOperations.unshiftIndent(e,t),shiftIndent:t=>TypeOperations.shiftIndent(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(s){let l=e.visibleColumnFromColumn(t,n.getEndPosition()),d=n.endColumn,c=t.getLineContent(n.endLineNumber),u=o.LC(c);if(n=u>=0?n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,u+1)):n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new r.Sj(n,"\n"+e.normalizeIndentation(s.afterEnter),!0);{let t=0;return d<=u+1&&(e.insertSpaces||(l=Math.ceil(l/e.indentSize)),t=Math.min(l+1-e.normalizeIndentation(s.afterEnter).length-1,0)),new r.Uo(n,"\n"+e.normalizeIndentation(s.afterEnter),0,t,!0)}}}return TypeOperations._typeCommand(n,"\n"+e.normalizeIndentation(d),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let e=0,n=i.length;e<n;e++)if(!t.tokenization.isCheapToTokenize(i[e].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,n){let o=(0,f.u0)(t,i.startLineNumber,i.startColumn),r=(0,v.$9)(e.autoIndent,t,i,n,{shiftIndent:t=>TypeOperations.shiftIndent(e,t),unshiftIndent:t=>TypeOperations.unshiftIndent(e,t)},e.languageConfigurationService);if(null===r)return null;if(r!==e.normalizeIndentation(o)){let o=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return 0===o?TypeOperations._typeCommand(new l.e(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+n,!1):TypeOperations._typeCommand(new l.e(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+t.getLineContent(i.startLineNumber).substring(o-1,i.startColumn-1)+n,!1)}return null}static _isAutoClosingOvertype(e,t,i,n,o){if("never"===e.autoClosingOvertype||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let r=0,s=i.length;r<s;r++){let s=i[r];if(!s.isEmpty())return!1;let l=s.getPosition(),d=t.getLineContent(l.lineNumber),u=d.charAt(l.column-1);if(u!==o)return!1;let g=(0,c.LN)(o),m=l.column>2?d.charCodeAt(l.column-2):0;if(92===m&&g)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,i=n.length;t<i;t++){let i=n[t];if(l.lineNumber===i.startLineNumber&&l.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,n,o){let s=[];for(let e=0,t=n.length;e<t;e++){let t=n[e],i=t.getPosition(),d=new l.e(i.lineNumber,i.column,i.lineNumber,i.column+1);s[e]=new r.T4(d,o)}return new c.Tp(4,s,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){let i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=n.some(e=>t.startsWith(e.open)),s=o.some(e=>t.startsWith(e.close));return!r&&s}static _findAutoClosingPairOpen(e,t,i,n){let o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!o)return null;let r=null;for(let e of o)if(null===r||e.open.length>r.open.length){let o=!0;for(let r of i){let i=t.getValueInRange(new l.e(r.lineNumber,r.column-e.open.length+1,r.lineNumber,r.column));if(i+n!==e.open){o=!1;break}}o&&(r=e)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;let i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[],o=null;for(let e of n)e.open!==t.open&&t.open.includes(e.open)&&t.close.endsWith(e.close)&&(!o||e.open.length>o.open.length)&&(o=e);return o}static _getAutoClosingPairClose(e,t,i,n,o){let r,s;for(let e of i)if(!e.isEmpty())return null;let l=i.map(e=>{let t=e.getPosition();return o?{lineNumber:t.lineNumber,beforeColumn:t.column-n.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}}),d=this._findAutoClosingPairOpen(e,t,l.map(e=>new g.L(e.lineNumber,e.beforeColumn)),n);if(!d)return null;let m=(0,c.LN)(n);if(m)r=e.autoClosingQuotes,s=e.shouldAutoCloseBefore.quote;else{let t=!!e.blockCommentStartToken&&d.open.includes(e.blockCommentStartToken);t?(r=e.autoClosingComments,s=e.shouldAutoCloseBefore.comment):(r=e.autoClosingBrackets,s=e.shouldAutoCloseBefore.bracket)}if("never"===r)return null;let f=this._findContainedAutoClosingPair(e,d),v=f?f.close:"",C=!0;for(let i of l){let{lineNumber:o,beforeColumn:l,afterColumn:c}=i,g=t.getLineContent(o),m=g.substring(0,l-1),f=g.substring(c-1);if(f.startsWith(v)||(C=!1),f.length>0){let t=f.charAt(0),i=TypeOperations._isBeforeClosingBrace(e,f);if(!i&&!s(t))return null}if(1===d.open.length&&("'"===n||'"'===n)&&"always"!==r){let t=(0,u.u)(e.wordSeparators);if(m.length>0){let e=m.charCodeAt(m.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(o))return null;t.tokenization.forceTokenization(o);let b=t.tokenization.getLineTokens(o),S=(0,_.wH)(b,l-1);if(!d.shouldAutoClose(S,l-S.firstCharOffset))return null;let y=d.findNeutralCharacter();if(y){let e=t.tokenization.getTokenTypeIfInsertingCharacter(o,l,y);if(!d.isOK(e))return null}}return C?d.close.substring(0,d.close.length-v.length):d.close}static _runAutoClosingOpenCharType(e,t,i,n,o,r,s){let l=[];for(let e=0,t=n.length;e<t;e++){let t=n[e];l[e]=new TypeWithAutoClosingCommand(t,o,!r,s)}return new c.Tp(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return(0,c.LN)(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}static _isSurroundSelectionType(e,t,i,n){if(!TypeOperations._shouldSurroundChar(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;let o=(0,c.LN)(n);for(let e of i){if(e.isEmpty())return!1;let i=!0;for(let n=e.startLineNumber;n<=e.endLineNumber;n++){let o=t.getLineContent(n),r=n===e.startLineNumber?e.startColumn-1:0,s=n===e.endLineNumber?e.endColumn-1:o.length,l=o.substring(r,s);if(/[^ \t]/.test(l)){i=!1;break}}if(i)return!1;if(o&&e.startLineNumber===e.endLineNumber&&e.startColumn+1===e.endColumn){let i=t.getValueInRange(e);if((0,c.LN)(i))return!1}}return!0}static _runSurroundSelectionType(e,t,i,n,o){let r=[];for(let e=0,i=n.length;e<i;e++){let i=n[e],s=t.surroundingPairs[o];r[e]=new SurroundSelectionCommand(i,o,s)}return new c.Tp(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(1===i.length&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,d){let u;if(!t.electricChars.hasOwnProperty(d)||!s.isEmpty())return null;let g=s.getPosition();i.tokenization.forceTokenization(g.lineNumber);let m=i.tokenization.getLineTokens(g.lineNumber);try{u=t.onElectricCharacter(d,m,g.column)}catch(e){return(0,n.dL)(e),null}if(!u)return null;if(u.matchOpenBracket){let n=(m.getLineContent()+d).lastIndexOf(u.matchOpenBracket)+1,s=i.bracketPairs.findMatchingBracketUp(u.matchOpenBracket,{lineNumber:g.lineNumber,column:n},500);if(s){if(s.startLineNumber===g.lineNumber)return null;let n=i.getLineContent(s.startLineNumber),u=o.V8(n),m=t.normalizeIndentation(u),f=i.getLineContent(g.lineNumber),_=i.getLineFirstNonWhitespaceColumn(g.lineNumber)||g.column,v=f.substring(_-1,g.column-1),C=m+v+d,b=new l.e(g.lineNumber,1,g.lineNumber,g.column),S=new r.T4(b,C);return new c.Tp(getTypingOperation(C,e),[S],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,n,o,s){if(!n)return null;let d=null;for(let e of n)if(null===d)d=e.insertedText;else if(d!==e.insertedText)return null;if(!d||1!==d.length)return null;let u=d,g=!1;for(let e of n)if(0!==e.deletedText.length){g=!0;break}if(g){if(!TypeOperations._shouldSurroundChar(t,u)||!t.surroundingPairs.hasOwnProperty(u))return null;let e=(0,c.LN)(u);for(let t of n)if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length||/^[ \t]+$/.test(t.deletedText)||e&&(0,c.LN)(t.deletedText))return null;let i=[];for(let e of o){if(!e.isEmpty())return null;i.push(e.getPosition())}if(i.length!==n.length)return null;let r=[];for(let e=0,o=i.length;e<o;e++)r.push(new CompositionSurroundSelectionCommand(i[e],n[e].deletedText,t.surroundingPairs[u]));return new c.Tp(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,i,o,s,u)){let e=o.map(e=>new r.T4(new l.e(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1));return new c.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let m=this._getAutoClosingPairClose(t,i,o,u,!0);return null!==m?this._runAutoClosingOpenCharType(e,t,i,o,u,!0,m):null}static typeWithInterceptors(e,t,i,n,o,s,l){if(!e&&"\n"===l){let e=[];for(let t=0,r=o.length;t<r;t++)e[t]=TypeOperations._enter(i,n,!1,o[t]);return new c.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,n,o)){let e=[],t=!1;for(let r=0,s=o.length;r<s;r++)if(e[r]=this._runAutoIndentType(i,n,o[r],l),!e[r]){t=!0;break}if(!t)return new c.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,n,o,s,l))return this._runAutoClosingOvertype(t,i,n,o,l);if(!e){let e=this._getAutoClosingPairClose(i,n,o,l,!1);if(e)return this._runAutoClosingOpenCharType(t,i,n,o,l,!1,e)}if(!e&&this._isSurroundSelectionType(i,n,o,l))return this._runSurroundSelectionType(t,i,n,o,l);if(!e&&this._isTypeInterceptorElectricChar(i,n,o)){let e=this._typeInterceptorElectricChar(t,i,n,o[0],l);if(e)return e}let d=[];for(let e=0,t=o.length;e<t;e++)d[e]=new r.T4(o[e],l);let u=getTypingOperation(l,t);return new c.Tp(u,d,{shouldPushStackElementBefore:shouldPushStackElementBetween(t,u),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,n,o){let s=[];for(let e=0,t=n.length;e<t;e++)s[e]=new r.T4(n[e],o);let l=getTypingOperation(o,e);return new c.Tp(l,s,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,l),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(null===t||null===i)return[];let n=[];for(let o=0,s=i.length;o<s;o++){let s=i[o].positionLineNumber;if(1===s)n[o]=new r.Sj(new l.e(1,1,1,1),"\n");else{s--;let i=t.getLineMaxColumn(s);n[o]=this._enter(e,t,!1,new l.e(s,i,s,i))}}return n}static lineInsertAfter(e,t,i){if(null===t||null===i)return[];let n=[];for(let o=0,r=i.length;o<r;o++){let r=i[o].positionLineNumber,s=t.getLineMaxColumn(r);n[o]=this._enter(e,t,!1,new l.e(r,s,r,s))}return n}static lineBreakInsert(e,t,i){let n=[];for(let o=0,r=i.length;o<r;o++)n[o]=this._enter(e,t,!0,i[o]);return n}};let TypeWithAutoClosingCommand=class TypeWithAutoClosingCommand extends r.Uo{constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length),this._openCharacter=t,this._closeCharacter=n,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range;return this.closeCharacterRange=new l.e(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new l.e(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}};let CompositionOutcome=class CompositionOutcome{constructor(e,t,i,n,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}};function getTypingOperation(e,t){return" "===e?5===t||6===t?6:5:4}function shouldPushStackElementBetween(e,t){return!!isTypingOperation(e)&&!isTypingOperation(t)||5!==e&&normalizeOperationType(e)!==normalizeOperationType(t)}function normalizeOperationType(e){return 6===e||5===e?"space":e}function isTypingOperation(e){return 4===e||5===e||6===e}},66072:function(e,t,i){"use strict";i.d(t,{L:function(){return WordPartOperations},w:function(){return WordOperations}});var n=i(45837),o=i(67949),r=i(6700),s=i(50673),l=i(11953),d=i(30822);let WordOperations=class WordOperations{static _createWord(e,t,i,n,o){return{start:n,end:o,wordType:t,nextCharClass:i}}static _findPreviousWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;for(let o=i.column-2;o>=0;o--){let i=e.charCodeAt(o),r=t.get(i);if(0===r){if(2===n)return this._createWord(e,n,r,o+1,this._findEndOfWord(e,t,n,o+1));n=1}else if(2===r){if(1===n)return this._createWord(e,n,r,o+1,this._findEndOfWord(e,t,n,o+1));n=2}else if(1===r&&0!==n)return this._createWord(e,n,r,o+1,this._findEndOfWord(e,t,n,o+1))}return 0!==n?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){let o=e.length;for(let r=n;r<o;r++){let n=e.charCodeAt(r),o=t.get(n);if(1===o||1===i&&2===o||2===i&&0===o)return r}return o}static _findNextWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0,o=e.length;for(let r=i.column-1;r<o;r++){let i=e.charCodeAt(r),o=t.get(i);if(0===o){if(2===n)return this._createWord(e,n,o,this._findStartOfWord(e,t,n,r-1),r);n=1}else if(2===o){if(1===n)return this._createWord(e,n,o,this._findStartOfWord(e,t,n,r-1),r);n=2}else if(1===o&&0!==n)return this._createWord(e,n,o,this._findStartOfWord(e,t,n,r-1),r)}return 0!==n?this._createWord(e,n,1,this._findStartOfWord(e,t,n,o-1),o):null}static _findStartOfWord(e,t,i,n){for(let o=n;o>=0;o--){let n=e.charCodeAt(o),r=t.get(n);if(1===r||1===i&&2===r||2===i&&0===r)return o+1}return 0}static moveWordLeft(e,t,i,n){let o=i.lineNumber,r=i.column;1===r&&o>1&&(o-=1,r=t.getLineMaxColumn(o));let s=WordOperations._findPreviousWordOnLine(e,t,new l.L(o,r));if(0===n)return new l.L(o,s?s.start+1:1);if(1===n)return s&&2===s.wordType&&s.end-s.start==1&&0===s.nextCharClass&&(s=WordOperations._findPreviousWordOnLine(e,t,new l.L(o,s.start+1))),new l.L(o,s?s.start+1:1);if(3===n){for(;s&&2===s.wordType;)s=WordOperations._findPreviousWordOnLine(e,t,new l.L(o,s.start+1));return new l.L(o,s?s.start+1:1)}return s&&r<=s.end+1&&(s=WordOperations._findPreviousWordOnLine(e,t,new l.L(o,s.start+1))),new l.L(o,s?s.end+1:1)}static _moveWordPartLeft(e,t){let i=t.lineNumber,o=e.getLineMaxColumn(i);if(1===t.column)return i>1?new l.L(i-1,e.getLineMaxColumn(i-1)):t;let r=e.getLineContent(i);for(let e=t.column-1;e>1;e--){let t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95===t&&95!==s||45===t&&45!==s||(n.mK(t)||n.T5(t))&&n.df(s))return new l.L(i,e);if(n.df(t)&&n.df(s)&&e+1<o){let t=r.charCodeAt(e);if(n.mK(t)||n.T5(t))return new l.L(i,e)}}return new l.L(i,1)}static moveWordRight(e,t,i,n){let o=i.lineNumber,r=i.column,s=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(s=!0,o+=1,r=1);let d=WordOperations._findNextWordOnLine(e,t,new l.L(o,r));if(2===n)d&&2===d.wordType&&d.end-d.start==1&&0===d.nextCharClass&&(d=WordOperations._findNextWordOnLine(e,t,new l.L(o,d.end+1))),r=d?d.end+1:t.getLineMaxColumn(o);else if(3===n){for(s&&(r=0);d&&(2===d.wordType||d.start+1<=r);)d=WordOperations._findNextWordOnLine(e,t,new l.L(o,d.end+1));r=d?d.start+1:t.getLineMaxColumn(o)}else d&&!s&&r>=d.start+1&&(d=WordOperations._findNextWordOnLine(e,t,new l.L(o,d.end+1))),r=d?d.start+1:t.getLineMaxColumn(o);return new l.L(o,r)}static _moveWordPartRight(e,t){let i=t.lineNumber,o=e.getLineMaxColumn(i);if(t.column===o)return i<e.getLineCount()?new l.L(i+1,1):t;let r=e.getLineContent(i);for(let e=t.column+1;e<o;e++){let t=r.charCodeAt(e-2),s=r.charCodeAt(e-1);if(95!==t&&95===s||45!==t&&45===s||(n.mK(t)||n.T5(t))&&n.df(s))return new l.L(i,e);if(n.df(t)&&n.df(s)&&e+1<o){let t=r.charCodeAt(e);if(n.mK(t)||n.T5(t))return new l.L(i,e)}}return new l.L(i,o)}static _deleteWordLeftWhitespace(e,t){let i=e.getLineContent(t.lineNumber),o=t.column-2,r=n.ow(i,o);return r+1<o?new d.e(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){let i=e.wordSeparators,n=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(r.A.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){let t=e.selection.getPosition();return new d.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}let c=new l.L(o.positionLineNumber,o.positionColumn),u=c.lineNumber,g=c.column;if(1===u&&1===g)return null;if(s){let e=this._deleteWordLeftWhitespace(n,c);if(e)return e}let m=WordOperations._findPreviousWordOnLine(i,n,c);return 0===t?m?g=m.start+1:g>1?g=1:(u--,g=n.getLineMaxColumn(u)):(m&&g<=m.end+1&&(m=WordOperations._findPreviousWordOnLine(i,n,new l.L(u,m.start+1))),m?g=m.end+1:g>1?g=1:(u--,g=n.getLineMaxColumn(u))),new d.e(u,g,c.lineNumber,c.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;let n=new l.L(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,n);return o||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){let i=e.charCodeAt(t);return 32===i||9===i}static _deleteInsideWordWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=i.length;if(0===n)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let r=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,r))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;r+1<n&&this._charAtIsWhitespace(i,r+1);)r++;return new d.e(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){let n=t.getLineContent(i.lineNumber),o=n.length;if(0===o)return i.lineNumber>1?new d.e(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new d.e(i.lineNumber,1,i.lineNumber+1,1):new d.e(i.lineNumber,1,i.lineNumber,1);let createRangeWithPosition=(e,t)=>(e=Math.min(e,i.column),t=Math.max(t,i.column),new d.e(i.lineNumber,e,i.lineNumber,t)),deleteWordAndAdjacentWhitespace=e=>{let t=e.start+1,i=e.end+1,r=!1;for(;i-1<o&&this._charAtIsWhitespace(n,i-1);)r=!0,i++;if(!r)for(;t>1&&this._charAtIsWhitespace(n,t-2);)t--;return createRangeWithPosition(t,i)},r=WordOperations._findPreviousWordOnLine(e,t,i);if(r&&r.start+1<=i.column&&i.column<=r.end+1)return deleteWordAndAdjacentWhitespace(r);let s=WordOperations._findNextWordOnLine(e,t,i);return s&&s.start+1<=i.column&&i.column<=s.end+1?deleteWordAndAdjacentWhitespace(s):r&&s?createRangeWithPosition(r.end+1,s.start+1):r?createRangeWithPosition(r.start+1,r.end+1):s?createRangeWithPosition(s.start+1,s.end+1):createRangeWithPosition(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;let i=t.getPosition(),n=WordOperations._moveWordPartLeft(e,i);return new d.e(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){let i=e.length;for(let n=t;n<i;n++){let t=e.charAt(n);if(" "!==t&&"	"!==t)return n}return i}static _deleteWordRightWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=t.column-1,o=this._findFirstNonWhitespaceChar(i,n);return n+1<o?new d.e(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){let i=e.wordSeparators,n=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;let s=new l.L(o.positionLineNumber,o.positionColumn),c=s.lineNumber,u=s.column,g=n.getLineCount(),m=n.getLineMaxColumn(c);if(c===g&&u===m)return null;if(r){let e=this._deleteWordRightWhitespace(n,s);if(e)return e}let f=WordOperations._findNextWordOnLine(i,n,s);return 2===t?f?u=f.end+1:u<m||c===g?u=m:(c++,u=(f=WordOperations._findNextWordOnLine(i,n,new l.L(c,1)))?f.start+1:n.getLineMaxColumn(c)):(f&&u>=f.start+1&&(f=WordOperations._findNextWordOnLine(i,n,new l.L(c,f.end+1))),f?u=f.start+1:u<m||c===g?u=m:(c++,u=(f=WordOperations._findNextWordOnLine(i,n,new l.L(c,1)))?f.start+1:n.getLineMaxColumn(c))),new d.e(c,u,s.lineNumber,s.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;let i=t.getPosition(),n=WordOperations._moveWordPartRight(e,i);return new d.e(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){let n=new d.e(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i){let n=(0,s.u)(t),o=WordOperations._findPreviousWordOnLine(n,e,i);if(o&&1===o.wordType&&o.start<=i.column-1&&i.column-1<=o.end)return WordOperations._createWordAtPosition(e,i.lineNumber,o);let r=WordOperations._findNextWordOnLine(n,e,i);return r&&1===r.wordType&&r.start<=i.column-1&&i.column-1<=r.end?WordOperations._createWordAtPosition(e,i.lineNumber,r):null}static word(e,t,i,n,r){let c,u,g;let m=(0,s.u)(e.wordSeparators),f=WordOperations._findPreviousWordOnLine(m,t,r),_=WordOperations._findNextWordOnLine(m,t,r);if(!n){let e,i;return f&&1===f.wordType&&f.start<=r.column-1&&r.column-1<=f.end?(e=f.start+1,i=f.end+1):_&&1===_.wordType&&_.start<=r.column-1&&r.column-1<=_.end?(e=_.start+1,i=_.end+1):(e=f?f.end+1:1,i=_?_.start+1:t.getLineMaxColumn(r.lineNumber)),new o.rS(new d.e(r.lineNumber,e,r.lineNumber,i),1,0,new l.L(r.lineNumber,i),0)}f&&1===f.wordType&&f.start<r.column-1&&r.column-1<f.end?(c=f.start+1,u=f.end+1):_&&1===_.wordType&&_.start<r.column-1&&r.column-1<_.end?(c=_.start+1,u=_.end+1):(c=r.column,u=r.column);let v=r.lineNumber;if(i.selectionStart.containsPosition(r))g=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){g=c;let e=new l.L(v,g);i.selectionStart.containsPosition(e)&&(g=i.selectionStart.endColumn)}else{g=u;let e=new l.L(v,g);i.selectionStart.containsPosition(e)&&(g=i.selectionStart.startColumn)}return i.move(!0,v,g,0)}};let WordPartOperations=class WordPartOperations extends WordOperations{static deleteWordPartLeft(e){let t=enforceDefined([WordOperations.deleteWordLeft(e,0),WordOperations.deleteWordLeft(e,2),WordOperations._deleteWordPartLeft(e.model,e.selection)]);return t.sort(d.e.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){let t=enforceDefined([WordOperations.deleteWordRight(e,0),WordOperations.deleteWordRight(e,2),WordOperations._deleteWordPartRight(e.model,e.selection)]);return t.sort(d.e.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i){let n=enforceDefined([WordOperations.moveWordLeft(e,t,i,0),WordOperations.moveWordLeft(e,t,i,2),WordOperations._moveWordPartLeft(t,i)]);return n.sort(l.L.compare),n[2]}static moveWordPartRight(e,t,i){let n=enforceDefined([WordOperations.moveWordRight(e,t,i,0),WordOperations.moveWordRight(e,t,i,2),WordOperations._moveWordPartRight(t,i)]);return n.sort(l.L.compare),n[0]}};function enforceDefined(e){return e.filter(e=>!!e)}},67949:function(e,t,i){"use strict";i.d(t,{LM:function(){return CursorConfiguration},LN:function(){return isQuote},Tp:function(){return EditOperationResult},Vi:function(){return CursorState},rS:function(){return SingleCursorState}});var n=i(11953),o=i(30822),r=i(45841),s=i(40523),l=i(77393),d=i(99129);let autoCloseAlways=()=>!0,autoCloseNever=()=>!1,autoCloseBeforeWhitespace=e=>" "===e||"	"===e;let CursorConfiguration=class CursorConfiguration{static shouldRecreate(e){return e.hasChanged(144)||e.hasChanged(130)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(128)||e.hasChanged(50)||e.hasChanged(91)}constructor(e,t,i,n){var o;this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;let r=i.options,s=r.get(144),l=r.get(50);this.readOnly=r.get(91),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(116),this.lineHeight=l.lineHeight,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=r.get(128),this.wordSeparators=r.get(130),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(77),this.multiCursorPaste=r.get(79),this.multiCursorLimit=r.get(80),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();let d=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(d)for(let e of d)this.surroundingPairs[e.open]=e.close;let c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=null!==(o=null==c?void 0:c.blockCommentStartToken)&&void 0!==o?o:null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};let t=null===(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)||void 0===e?void 0:e.getElectricCharacters();if(t)for(let e of t)this._electricChars[e]=!0}return this._electricChars}onElectricCharacter(e,t,i){let n=(0,s.wH)(t,i-1),o=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return o?o.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return(0,d.x)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return autoCloseBeforeWhitespace;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return autoCloseAlways;case"never":return autoCloseNever}}_getLanguageDefinedShouldAutoClose(e,t){let i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return e=>-1!==i.indexOf(e)}visibleColumnFromColumn(e,t){return l.i.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){let n=l.i.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),o=e.getLineMinColumn(t);if(n<o)return o;let r=e.getLineMaxColumn(t);return n>r?r:n}};let CursorState=class CursorState{static fromModelState(e){return new PartialModelCursorState(e)}static fromViewState(e){return new PartialViewCursorState(e)}static fromModelSelection(e){let t=r.Y.liftSelection(e),i=new SingleCursorState(o.e.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return CursorState.fromModelState(i)}static fromModelSelections(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};let PartialModelCursorState=class PartialModelCursorState{constructor(e){this.modelState=e,this.viewState=null}};let PartialViewCursorState=class PartialViewCursorState{constructor(e){this.modelState=null,this.viewState=e}};let SingleCursorState=class SingleCursorState{constructor(e,t,i,n,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=SingleCursorState._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,r){return e?new SingleCursorState(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new n.L(t,i),r):new SingleCursorState(new o.e(t,i,t,i),0,r,new n.L(t,i),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?r.Y.fromPositions(e.getStartPosition(),t):r.Y.fromPositions(e.getEndPosition(),t)}};let EditOperationResult=class EditOperationResult{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}};function isQuote(e){return"'"===e||'"'===e||"`"===e}},87559:function(e,t,i){"use strict";i.d(t,{KU:function(){return DiffAlgorithmResult},NT:function(){return DateTimeout},i8:function(){return SequenceDiff},n0:function(){return InfiniteTimeout},zl:function(){return OffsetPair}});var n=i(34794),o=i(17861),r=i(84761);let DiffAlgorithmResult=class DiffAlgorithmResult{static trivial(e,t){return new DiffAlgorithmResult([new SequenceDiff(r.q.ofLength(e.length),r.q.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new DiffAlgorithmResult([new SequenceDiff(r.q.ofLength(e.length),r.q.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}};let SequenceDiff=class SequenceDiff{static invert(e,t){let i=[];return(0,n.zy)(e,(e,n)=>{i.push(SequenceDiff.fromOffsetPairs(e?e.getEndExclusives():OffsetPair.zero,n?n.getStarts():new OffsetPair(t,(e?e.seq2Range.endExclusive-e.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new SequenceDiff(new r.q(e.offset1,t.offset1),new r.q(e.offset2,t.offset2))}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new SequenceDiff(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new SequenceDiff(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return 0===e?this:new SequenceDiff(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return 0===e?this:new SequenceDiff(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return 0===e?this:new SequenceDiff(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){let t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(t&&i)return new SequenceDiff(t,i)}getStarts(){return new OffsetPair(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new OffsetPair(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}};let OffsetPair=class OffsetPair{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return 0===e?this:new OffsetPair(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};OffsetPair.zero=new OffsetPair(0,0),OffsetPair.max=new OffsetPair(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let InfiniteTimeout=class InfiniteTimeout{isValid(){return!0}};InfiniteTimeout.instance=new InfiniteTimeout;let DateTimeout=class DateTimeout{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new o.he("timeout must be positive")}isValid(){let e=Date.now()-this.startTime<this.timeout;return!e&&this.valid&&(this.valid=!1),this.valid}}},53182:function(e,t,i){"use strict";i.d(t,{DW:function(){return DefaultLinesDiffComputer}});var n=i(34794),o=i(77853),r=i(4261),s=i(84761),l=i(30822),d=i(87559);let Array2D=class Array2D{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}};function isSpace(e){return 32===e||9===e}let LineRangeFragment=class LineRangeFragment{static getKey(e){let t=this.chrKeys.get(e);return void 0===t&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let i=e.startLineNumber-1;i<e.endLineNumberExclusive-1;i++){let e=t[i];for(let t=0;t<e.length;t++){n++;let i=e[t],o=LineRangeFragment.getKey(i);this.histogram[o]=(this.histogram[o]||0)+1}n++;let o=LineRangeFragment.getKey("\n");this.histogram[o]=(this.histogram[o]||0)+1}this.totalCount=n}computeSimilarity(e){var t,i;let n=0,o=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<o;r++)n+=Math.abs((null!==(t=this.histogram[r])&&void 0!==t?t:0)-(null!==(i=e.histogram[r])&&void 0!==i?i:0));return 1-n/(this.totalCount+e.totalCount)}};LineRangeFragment.chrKeys=new Map;let DynamicProgrammingDiffing=class DynamicProgrammingDiffing{compute(e,t,i=d.n0.instance,n){if(0===e.length||0===t.length)return d.KU.trivial(e,t);let o=new Array2D(e.length,t.length),r=new Array2D(e.length,t.length),l=new Array2D(e.length,t.length);for(let s=0;s<e.length;s++)for(let c=0;c<t.length;c++){let u;if(!i.isValid())return d.KU.trivialTimedOut(e,t);let g=0===s?0:o.get(s-1,c),m=0===c?0:o.get(s,c-1);e.getElement(s)===t.getElement(c)?(u=0===s||0===c?0:o.get(s-1,c-1),s>0&&c>0&&3===r.get(s-1,c-1)&&(u+=l.get(s-1,c-1)),u+=n?n(s,c):1):u=-1;let f=Math.max(g,m,u);if(f===u){let e=s>0&&c>0?l.get(s-1,c-1):0;l.set(s,c,e+1),r.set(s,c,3)}else f===g?(l.set(s,c,0),r.set(s,c,1)):f===m&&(l.set(s,c,0),r.set(s,c,2));o.set(s,c,f)}let c=[],u=e.length,g=t.length;function reportDecreasingAligningPositions(e,t){(e+1!==u||t+1!==g)&&c.push(new d.i8(new s.q(e+1,u),new s.q(t+1,g))),u=e,g=t}let m=e.length-1,f=t.length-1;for(;m>=0&&f>=0;)3===r.get(m,f)?(reportDecreasingAligningPositions(m,f),m--,f--):1===r.get(m,f)?m--:f--;return reportDecreasingAligningPositions(-1,-1),c.reverse(),new d.KU(c,!1)}};let MyersDiffAlgorithm=class MyersDiffAlgorithm{compute(e,t,i=d.n0.instance){if(0===e.length||0===t.length)return d.KU.trivial(e,t);function getXAfterSnake(i,n){for(;i<e.length&&n<t.length&&e.getElement(i)===t.getElement(n);)i++,n++;return i}let n=0,o=new FastInt32Array;o.set(0,getXAfterSnake(0,0));let r=new FastArrayNegativeIndices;r.set(0,0===o.get(0)?null:new SnakePath(null,0,0,o.get(0)));let l=0;t:for(;;){if(n++,!i.isValid())return d.KU.trivialTimedOut(e,t);let s=-Math.min(n,t.length+n%2),c=Math.min(n,e.length+n%2);for(l=s;l<=c;l+=2){let i=0,n=l===c?-1:o.get(l+1),d=l===s?-1:o.get(l-1)+1;i++;let u=Math.min(Math.max(n,d),e.length),g=u-l;if(i++,u>e.length||g>t.length)continue;let m=getXAfterSnake(u,g);o.set(l,m);let f=u===n?r.get(l+1):r.get(l-1);if(r.set(l,m!==u?new SnakePath(f,u,g,m-u):f),o.get(l)===e.length&&o.get(l)-l===t.length)break t}}let c=r.get(l),u=[],g=e.length,m=t.length;for(;;){let e=c?c.x+c.length:0,t=c?c.y+c.length:0;if((e!==g||t!==m)&&u.push(new d.i8(new s.q(e,g),new s.q(t,m))),!c)break;g=c.x,m=c.y,c=c.prev}return u.reverse(),new d.KU(u,!1)}};let SnakePath=class SnakePath{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}};let FastInt32Array=class FastInt32Array{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if((e=-e-1)>=this.negativeArr.length){let e=this.negativeArr;this.negativeArr=new Int32Array(2*e.length),this.negativeArr.set(e)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){let e=this.positiveArr;this.positiveArr=new Int32Array(2*e.length),this.positiveArr.set(e)}this.positiveArr[e]=t}}};let FastArrayNegativeIndices=class FastArrayNegativeIndices{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}};var c=i(64808),u=i(34850),g=i(30619),m=i(11953);let LinesSliceCharSequence=class LinesSliceCharSequence{constructor(e,t,i){this.lines=e,this.considerWhitespaceChanges=i,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let n=!1;t.start>0&&t.endExclusive>=e.length&&(t=new s.q(t.start-1,t.endExclusive),n=!0),this.lineRange=t,this.firstCharOffsetByLine[0]=0;for(let t=this.lineRange.start;t<this.lineRange.endExclusive;t++){let o=e[t],r=0;if(n)r=o.length,o="",n=!1;else if(!i){let e=o.trimStart();r=o.length-e.length,o=e.trimEnd()}this.additionalOffsetByLine.push(r);for(let e=0;e<o.length;e++)this.elements.push(o.charCodeAt(e));t<e.length-1&&(this.elements.push(10),this.firstCharOffsetByLine[t-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new s.q(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(e=>String.fromCharCode(e)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let t=getCategory(e>0?this.elements[e-1]:-1),i=getCategory(e<this.elements.length?this.elements[e]:-1);if(7===t&&8===i)return 0;if(8===t)return 150;let n=0;return t!==i&&(n+=10,0===t&&1===i&&(n+=1)),n+=f[t]+f[i]}translateOffset(e){if(this.lineRange.isEmpty)return new m.L(this.lineRange.start+1,1);let t=(0,u.Jw)(this.firstCharOffsetByLine,t=>t<=e);return new m.L(this.lineRange.start+t+1,e-this.firstCharOffsetByLine[t]+this.additionalOffsetByLine[t]+1)}translateRange(e){return l.e.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!isWordChar(this.elements[e]))return;let t=e;for(;t>0&&isWordChar(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&isWordChar(this.elements[i]);)i++;return new s.q(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,i;let n=null!==(t=(0,u.ti)(this.firstCharOffsetByLine,t=>t<=e.start))&&void 0!==t?t:0,o=null!==(i=(0,u.cn)(this.firstCharOffsetByLine,t=>e.endExclusive<=t))&&void 0!==i?i:this.elements.length;return new s.q(n,o)}};function isWordChar(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}let f={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function getCategory(e){if(10===e)return 8;if(13===e)return 7;if(isSpace(e))return 6;if(e>=97&&e<=122)return 0;if(e>=65&&e<=90)return 1;if(e>=48&&e<=57)return 2;if(-1===e)return 3;else if(44===e||59===e)return 5;else return 4}function computeMovedLines(e,t,i,o,r,s){let{moves:l,excludedChanges:d}=computeMovesFromSimpleDeletionsToSimpleInsertions(e,t,i,s);if(!s.isValid())return[];let c=e.filter(e=>!d.has(e)),u=computeUnchangedMoves(c,o,r,t,i,s);return(0,n.vA)(l,u),l=removeMovesInSameDiff(e,l=(l=joinCloseConsecutiveMoves(l)).filter(e=>{let i=e.original.toOffsetRange().slice(t).map(e=>e.trim()),n=i.join("\n");return n.length>=15&&countWhere(i,e=>e.length>=2)>=2}))}function countWhere(e,t){let i=0;for(let n of e)t(n)&&i++;return i}function computeMovesFromSimpleDeletionsToSimpleInsertions(e,t,i,n){let o=[],r=e.filter(e=>e.modified.isEmpty&&e.original.length>=3).map(e=>new LineRangeFragment(e.original,t,e)),s=new Set(e.filter(e=>e.original.isEmpty&&e.modified.length>=3).map(e=>new LineRangeFragment(e.modified,i,e))),l=new Set;for(let e of r){let t,i=-1;for(let n of s){let o=e.computeSimilarity(n);o>i&&(i=o,t=n)}if(i>.9&&t&&(s.delete(t),o.push(new c.f0(e.range,t.range)),l.add(e.source),l.add(t.source)),!n.isValid())break}return{moves:o,excludedChanges:l}}function computeUnchangedMoves(e,t,i,o,s,l){let d=[],m=new g.ri;for(let i of e)for(let e=i.original.startLineNumber;e<i.original.endLineNumberExclusive-2;e++){let i=`${t[e-1]}:${t[e+1-1]}:${t[e+2-1]}`;m.add(i,{range:new r.z(e,e+3)})}let f=[];for(let t of(e.sort((0,n.tT)(e=>e.modified.startLineNumber,n.fv)),e)){let e=[];for(let n=t.modified.startLineNumber;n<t.modified.endLineNumberExclusive-2;n++){let t=`${i[n-1]}:${i[n+1-1]}:${i[n+2-1]}`,o=new r.z(n,n+3),s=[];m.forEach(t,({range:t})=>{for(let i of e)if(i.originalLineRange.endLineNumberExclusive+1===t.endLineNumberExclusive&&i.modifiedLineRange.endLineNumberExclusive+1===o.endLineNumberExclusive){i.originalLineRange=new r.z(i.originalLineRange.startLineNumber,t.endLineNumberExclusive),i.modifiedLineRange=new r.z(i.modifiedLineRange.startLineNumber,o.endLineNumberExclusive),s.push(i);return}let i={modifiedLineRange:o,originalLineRange:t};f.push(i),s.push(i)}),e=s}if(!l.isValid())return[]}f.sort((0,n.BV)((0,n.tT)(e=>e.modifiedLineRange.length,n.fv)));let _=new r.i,v=new r.i;for(let e of f){let t=e.modifiedLineRange.startLineNumber-e.originalLineRange.startLineNumber,i=_.subtractFrom(e.modifiedLineRange),n=v.subtractFrom(e.originalLineRange).getWithDelta(t),o=i.getIntersection(n);for(let e of o.ranges){if(e.length<3)continue;let i=e.delta(-t);d.push(new c.f0(i,e)),_.addRange(e),v.addRange(i)}}d.sort((0,n.tT)(e=>e.original.startLineNumber,n.fv));let C=new u.b1(e);for(let t=0;t<d.length;t++){let i,n;let g=d[t],m=C.findLastMonotonous(e=>e.original.startLineNumber<=g.original.startLineNumber),f=(0,u.ti)(e,e=>e.modified.startLineNumber<=g.modified.startLineNumber),b=Math.max(g.original.startLineNumber-m.original.startLineNumber,g.modified.startLineNumber-f.modified.startLineNumber),S=C.findLastMonotonous(e=>e.original.startLineNumber<g.original.endLineNumberExclusive),y=(0,u.ti)(e,e=>e.modified.startLineNumber<g.modified.endLineNumberExclusive),w=Math.max(S.original.endLineNumberExclusive-g.original.endLineNumberExclusive,y.modified.endLineNumberExclusive-g.modified.endLineNumberExclusive);for(i=0;i<b;i++){let e=g.original.startLineNumber-i-1,t=g.modified.startLineNumber-i-1;if(e>o.length||t>s.length||_.contains(t)||v.contains(e)||!areLinesSimilar(o[e-1],s[t-1],l))break}for(i>0&&(v.addRange(new r.z(g.original.startLineNumber-i,g.original.startLineNumber)),_.addRange(new r.z(g.modified.startLineNumber-i,g.modified.startLineNumber))),n=0;n<w;n++){let e=g.original.endLineNumberExclusive+n,t=g.modified.endLineNumberExclusive+n;if(e>o.length||t>s.length||_.contains(t)||v.contains(e)||!areLinesSimilar(o[e-1],s[t-1],l))break}n>0&&(v.addRange(new r.z(g.original.endLineNumberExclusive,g.original.endLineNumberExclusive+n)),_.addRange(new r.z(g.modified.endLineNumberExclusive,g.modified.endLineNumberExclusive+n))),(i>0||n>0)&&(d[t]=new c.f0(new r.z(g.original.startLineNumber-i,g.original.endLineNumberExclusive+n),new r.z(g.modified.startLineNumber-i,g.modified.endLineNumberExclusive+n)))}return d}function areLinesSimilar(e,t,i){if(e.trim()===t.trim())return!0;if(e.length>300&&t.length>300)return!1;let n=new MyersDiffAlgorithm,o=n.compute(new LinesSliceCharSequence([e],new s.q(0,1),!1),new LinesSliceCharSequence([t],new s.q(0,1),!1),i),r=0,l=d.i8.invert(o.diffs,e.length);for(let t of l)t.seq1Range.forEach(t=>{!isSpace(e.charCodeAt(t))&&r++});function countNonWsChars(t){let i=0;for(let n=0;n<e.length;n++)!isSpace(t.charCodeAt(n))&&i++;return i}let c=countNonWsChars(e.length>t.length?e:t),u=r/c>.6&&c>10;return u}function joinCloseConsecutiveMoves(e){if(0===e.length)return e;e.sort((0,n.tT)(e=>e.original.startLineNumber,n.fv));let t=[e[0]];for(let i=1;i<e.length;i++){let n=t[t.length-1],o=e[i],r=o.original.startLineNumber-n.original.endLineNumberExclusive,s=o.modified.startLineNumber-n.modified.endLineNumberExclusive,l=r>=0&&s>=0;if(l&&r+s<=2){t[t.length-1]=n.join(o);continue}t.push(o)}return t}function removeMovesInSameDiff(e,t){let i=new u.b1(e);return t=t.filter(t=>{let n=i.findLastMonotonous(e=>e.original.startLineNumber<t.original.endLineNumberExclusive)||new c.f0(new r.z(1,1),new r.z(1,1)),o=(0,u.ti)(e,e=>e.modified.startLineNumber<t.modified.endLineNumberExclusive);return n!==o})}var _=i(36330),v=i(83581);let LineSequence=class LineSequence{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let t=0===e?0:getIndentation(this.lines[e-1]),i=e===this.lines.length?0:getIndentation(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join("\n")}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}};function getIndentation(e){let t=0;for(;t<e.length&&(32===e.charCodeAt(t)||9===e.charCodeAt(t));)t++;return t}let DefaultLinesDiffComputer=class DefaultLinesDiffComputer{constructor(){this.dynamicProgrammingDiffing=new DynamicProgrammingDiffing,this.myersDiffingAlgorithm=new MyersDiffAlgorithm}computeDiff(e,t,i){if(e.length<=1&&(0,n.fS)(e,t,(e,t)=>e===t))return new v.h([],[],!1);if(1===e.length&&0===e[0].length||1===t.length&&0===t[0].length)return new v.h([new c.gB(new r.z(1,e.length+1),new r.z(1,t.length+1),[new c.iy(new l.e(1,1,e.length,e[0].length+1),new l.e(1,1,t.length,t[0].length+1))])],[],!1);let u=0===i.maxComputationTimeMs?d.n0.instance:new d.NT(i.maxComputationTimeMs),g=!i.ignoreTrimWhitespace,m=new Map;function getOrCreateHash(e){let t=m.get(e);return void 0===t&&(t=m.size,m.set(e,t)),t}let f=e.map(e=>getOrCreateHash(e.trim())),C=t.map(e=>getOrCreateHash(e.trim())),b=new LineSequence(f,e),S=new LineSequence(C,t),y=b.length+S.length<1700?this.dynamicProgrammingDiffing.compute(b,S,u,(i,n)=>e[i]===t[n]?0===t[n].length?.1:1+Math.log(1+t[n].length):.99):this.myersDiffingAlgorithm.compute(b,S),w=y.diffs,L=y.hitTimeout;w=(0,_.xG)(b,S,w),w=(0,_.rh)(b,S,w);let k=[],scanForWhitespaceChanges=i=>{if(g)for(let n=0;n<i;n++){let i=D+n,o=x+n;if(e[i]!==t[o]){let n=this.refineDiff(e,t,new d.i8(new s.q(i,i+1),new s.q(o,o+1)),u,g);for(let e of n.mappings)k.push(e);n.hitTimeout&&(L=!0)}}},D=0,x=0;for(let i of w){(0,o.eZ)(()=>i.seq1Range.start-D==i.seq2Range.start-x);let n=i.seq1Range.start-D;scanForWhitespaceChanges(n),D=i.seq1Range.endExclusive,x=i.seq2Range.endExclusive;let r=this.refineDiff(e,t,i,u,g);for(let e of(r.hitTimeout&&(L=!0),r.mappings))k.push(e)}scanForWhitespaceChanges(e.length-D);let N=lineRangeMappingFromRangeMappings(k,e,t),E=[];return i.computeMoves&&(E=this.computeMoves(N,e,t,f,C,u,g)),(0,o.eZ)(()=>{function validatePosition(e,t){if(e.lineNumber<1||e.lineNumber>t.length)return!1;let i=t[e.lineNumber-1];return!(e.column<1)&&!(e.column>i.length+1)}function validateRange(e,t){return!(e.startLineNumber<1)&&!(e.startLineNumber>t.length+1)&&!(e.endLineNumberExclusive<1)&&!(e.endLineNumberExclusive>t.length+1)}for(let i of N){if(!i.innerChanges)return!1;for(let n of i.innerChanges){let i=validatePosition(n.modifiedRange.getStartPosition(),t)&&validatePosition(n.modifiedRange.getEndPosition(),t)&&validatePosition(n.originalRange.getStartPosition(),e)&&validatePosition(n.originalRange.getEndPosition(),e);if(!i)return!1}if(!validateRange(i.modified,t)||!validateRange(i.original,e))return!1}return!0}),new v.h(N,E,L)}computeMoves(e,t,i,n,o,r,s){let l=computeMovedLines(e,t,i,n,o,r),c=l.map(e=>{let n=this.refineDiff(t,i,new d.i8(e.original.toOffsetRange(),e.modified.toOffsetRange()),r,s),o=lineRangeMappingFromRangeMappings(n.mappings,t,i,!0);return new v.y(e,o)});return c}refineDiff(e,t,i,n,o){let r=new LinesSliceCharSequence(e,i.seq1Range,o),s=new LinesSliceCharSequence(t,i.seq2Range,o),l=r.length+s.length<500?this.dynamicProgrammingDiffing.compute(r,s,n):this.myersDiffingAlgorithm.compute(r,s,n),d=l.diffs;d=(0,_.xG)(r,s,d),d=(0,_.g0)(r,s,d),d=(0,_.oK)(r,s,d),d=(0,_.DI)(r,s,d);let u=d.map(e=>new c.iy(r.translateRange(e.seq1Range),s.translateRange(e.seq2Range)));return{mappings:u,hitTimeout:l.hitTimeout}}};function lineRangeMappingFromRangeMappings(e,t,i,r=!1){let s=[];for(let o of(0,n.mw)(e.map(e=>getLineRangeMapping(e,t,i)),(e,t)=>e.original.overlapOrTouch(t.original)||e.modified.overlapOrTouch(t.modified))){let e=o[0],t=o[o.length-1];s.push(new c.gB(e.original.join(t.original),e.modified.join(t.modified),o.map(e=>e.innerChanges[0])))}return(0,o.eZ)(()=>(!!r||!(s.length>0)||s[0].original.startLineNumber===s[0].modified.startLineNumber)&&(0,o.DM)(s,(e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive==t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber)),s}function getLineRangeMapping(e,t,i){let n=0,o=0;1===e.modifiedRange.endColumn&&1===e.originalRange.endColumn&&e.originalRange.startLineNumber+n<=e.originalRange.endLineNumber&&e.modifiedRange.startLineNumber+n<=e.modifiedRange.endLineNumber&&(o=-1),e.modifiedRange.startColumn-1>=i[e.modifiedRange.startLineNumber-1].length&&e.originalRange.startColumn-1>=t[e.originalRange.startLineNumber-1].length&&e.originalRange.startLineNumber<=e.originalRange.endLineNumber+o&&e.modifiedRange.startLineNumber<=e.modifiedRange.endLineNumber+o&&(n=1);let s=new r.z(e.originalRange.startLineNumber+n,e.originalRange.endLineNumber+1+o),l=new r.z(e.modifiedRange.startLineNumber+n,e.modifiedRange.endLineNumber+1+o);return new c.gB(s,l,[e])}},36330:function(e,t,i){"use strict";i.d(t,{DI:function(){return removeVeryShortMatchingTextBetweenLongDiffs},g0:function(){return extendDiffsToEntireWordIfAppropriate},oK:function(){return removeShortMatches},rh:function(){return removeVeryShortMatchingLinesBetweenDiffs},xG:function(){return optimizeSequenceDiffs}});var n=i(34794),o=i(84761),r=i(87559);function optimizeSequenceDiffs(e,t,i){let n=i;return n=joinSequenceDiffsByShifting(e,t,n),n=joinSequenceDiffsByShifting(e,t,n),n=shiftSequenceDiffs(e,t,n)}function joinSequenceDiffsByShifting(e,t,i){if(0===i.length)return i;let n=[];n.push(i[0]);for(let s=1;s<i.length;s++){let l=n[n.length-1],d=i[s];if(d.seq1Range.isEmpty||d.seq2Range.isEmpty){let i;let s=d.seq1Range.start-l.seq1Range.endExclusive;for(i=1;i<=s&&e.getElement(d.seq1Range.start-i)===e.getElement(d.seq1Range.endExclusive-i)&&t.getElement(d.seq2Range.start-i)===t.getElement(d.seq2Range.endExclusive-i);i++);if(--i===s){n[n.length-1]=new r.i8(new o.q(l.seq1Range.start,d.seq1Range.endExclusive-s),new o.q(l.seq2Range.start,d.seq2Range.endExclusive-s));continue}d=d.delta(-i)}n.push(d)}let s=[];for(let i=0;i<n.length-1;i++){let l=n[i+1],d=n[i];if(d.seq1Range.isEmpty||d.seq2Range.isEmpty){let s;let c=l.seq1Range.start-d.seq1Range.endExclusive;for(s=0;s<c&&e.isStronglyEqual(d.seq1Range.start+s,d.seq1Range.endExclusive+s)&&t.isStronglyEqual(d.seq2Range.start+s,d.seq2Range.endExclusive+s);s++);if(s===c){n[i+1]=new r.i8(new o.q(d.seq1Range.start+c,l.seq1Range.endExclusive),new o.q(d.seq2Range.start+c,l.seq2Range.endExclusive));continue}s>0&&(d=d.delta(s))}s.push(d)}return n.length>0&&s.push(n[n.length-1]),s}function shiftSequenceDiffs(e,t,i){if(!e.getBoundaryScore||!t.getBoundaryScore)return i;for(let n=0;n<i.length;n++){let r=n>0?i[n-1]:void 0,s=i[n],l=n+1<i.length?i[n+1]:void 0,d=new o.q(r?r.seq1Range.endExclusive+1:0,l?l.seq1Range.start-1:e.length),c=new o.q(r?r.seq2Range.endExclusive+1:0,l?l.seq2Range.start-1:t.length);s.seq1Range.isEmpty?i[n]=shiftDiffToBetterPosition(s,e,t,d,c):s.seq2Range.isEmpty&&(i[n]=shiftDiffToBetterPosition(s.swap(),t,e,c,d).swap())}return i}function shiftDiffToBetterPosition(e,t,i,n,o){let r=1;for(;e.seq1Range.start-r>=n.start&&e.seq2Range.start-r>=o.start&&i.isStronglyEqual(e.seq2Range.start-r,e.seq2Range.endExclusive-r)&&r<100;)r++;r--;let s=0;for(;e.seq1Range.start+s<n.endExclusive&&e.seq2Range.endExclusive+s<o.endExclusive&&i.isStronglyEqual(e.seq2Range.start+s,e.seq2Range.endExclusive+s)&&s<100;)s++;if(0===r&&0===s)return e;let l=0,d=-1;for(let n=-r;n<=s;n++){let o=e.seq2Range.start+n,r=e.seq2Range.endExclusive+n,s=e.seq1Range.start+n,c=t.getBoundaryScore(s)+i.getBoundaryScore(o)+i.getBoundaryScore(r);c>d&&(d=c,l=n)}return e.delta(l)}function removeShortMatches(e,t,i){let n=[];for(let e of i){let t=n[n.length-1];if(!t){n.push(e);continue}e.seq1Range.start-t.seq1Range.endExclusive<=2||e.seq2Range.start-t.seq2Range.endExclusive<=2?n[n.length-1]=new r.i8(t.seq1Range.join(e.seq1Range),t.seq2Range.join(e.seq2Range)):n.push(e)}return n}function extendDiffsToEntireWordIfAppropriate(e,t,i){let n=r.i8.invert(i,e.length),o=[],s=new r.zl(0,0);function scanWord(i,l){if(i.offset1<s.offset1||i.offset2<s.offset2)return;let d=e.findWordContaining(i.offset1),c=t.findWordContaining(i.offset2);if(!d||!c)return;let u=new r.i8(d,c),g=u.intersect(l),m=g.seq1Range.length,f=g.seq2Range.length;for(;n.length>0;){let i=n[0],o=i.seq1Range.intersects(d)||i.seq2Range.intersects(c);if(!o)break;let s=e.findWordContaining(i.seq1Range.start),l=t.findWordContaining(i.seq2Range.start),g=new r.i8(s,l),_=g.intersect(i);if(m+=_.seq1Range.length,f+=_.seq2Range.length,(u=u.join(g)).seq1Range.endExclusive>=i.seq1Range.endExclusive)n.shift();else break}m+f<(u.seq1Range.length+u.seq2Range.length)*2/3&&o.push(u),s=u.getEndExclusives()}for(;n.length>0;){let e=n.shift();e.seq1Range.isEmpty||(scanWord(e.getStarts(),e),scanWord(e.getEndExclusives().delta(-1),e))}let l=mergeSequenceDiffs(i,o);return l}function mergeSequenceDiffs(e,t){let i=[];for(;e.length>0||t.length>0;){let n;let o=e[0],r=t[0];n=o&&(!r||o.seq1Range.start<r.seq1Range.start)?e.shift():t.shift(),i.length>0&&i[i.length-1].seq1Range.endExclusive>=n.seq1Range.start?i[i.length-1]=i[i.length-1].join(n):i.push(n)}return i}function removeVeryShortMatchingLinesBetweenDiffs(e,t,i){let n,r=i;if(0===r.length)return r;let s=0;do{n=!1;let t=[r[0]];for(let i=1;i<r.length;i++){let s=r[i],l=t[t.length-1];function shouldJoinDiffs(t,i){let n=new o.q(l.seq1Range.endExclusive,s.seq1Range.start),r=e.getText(n),d=r.replace(/\s/g,"");return d.length<=4&&(t.seq1Range.length+t.seq2Range.length>5||i.seq1Range.length+i.seq2Range.length>5)}let d=shouldJoinDiffs(l,s);d?(n=!0,t[t.length-1]=t[t.length-1].join(s)):t.push(s)}r=t}while(s++<10&&n);return r}function removeVeryShortMatchingTextBetweenLongDiffs(e,t,i){let s,l=i;if(0===l.length)return l;let d=0;do{s=!1;let i=[l[0]];for(let n=1;n<l.length;n++){let r=l[n],d=i[i.length-1];function shouldJoinDiffs(i,n){let s=new o.q(d.seq1Range.endExclusive,r.seq1Range.start),l=e.countLinesIn(s);if(l>5||s.length>500)return!1;let c=e.getText(s).trim();if(c.length>20||c.split(/\r\n|\r|\n/).length>1)return!1;let u=e.countLinesIn(i.seq1Range),g=i.seq1Range.length,m=t.countLinesIn(i.seq2Range),f=i.seq2Range.length,_=e.countLinesIn(n.seq1Range),v=n.seq1Range.length,C=t.countLinesIn(n.seq2Range),b=n.seq2Range.length;function cap(e){return Math.min(e,130)}return Math.pow(Math.pow(cap(40*u+g),1.5)+Math.pow(cap(40*m+f),1.5),1.5)+Math.pow(Math.pow(cap(40*_+v),1.5)+Math.pow(cap(40*C+b),1.5),1.5)>74184.96480721243}let c=shouldJoinDiffs(d,r);c?(s=!0,i[i.length-1]=i[i.length-1].join(r)):i.push(r)}l=i}while(d++<10&&s);let c=[];return(0,n.KO)(l,(t,i,n)=>{let s=i;function shouldMarkAsChanged(e){return e.length>0&&e.trim().length<=3&&i.seq1Range.length+i.seq2Range.length>100}let l=e.extendToFullLines(i.seq1Range),d=e.getText(new o.q(l.start,i.seq1Range.start));shouldMarkAsChanged(d)&&(s=s.deltaStart(-d.length));let u=e.getText(new o.q(i.seq1Range.endExclusive,l.endExclusive));shouldMarkAsChanged(u)&&(s=s.deltaEnd(u.length));let g=r.i8.fromOffsetPairs(t?t.getEndExclusives():r.zl.zero,n?n.getStarts():r.zl.max),m=s.intersect(g);c.length>0&&m.getStarts().equals(c[c.length-1].getEndExclusives())?c[c.length-1]=c[c.length-1].join(m):c.push(m)}),c}},83581:function(e,t,i){"use strict";i.d(t,{h:function(){return LinesDiff},y:function(){return MovedText}});let LinesDiff=class LinesDiff{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}};let MovedText=class MovedText{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}},64808:function(e,t,i){"use strict";i.d(t,{f0:function(){return LineRangeMapping},gB:function(){return DetailedLineRangeMapping},iy:function(){return RangeMapping}});var n=i(4261);let LineRangeMapping=class LineRangeMapping{static inverse(e,t,i){let o=[],r=1,s=1;for(let t of e){let e=new LineRangeMapping(new n.z(r,t.original.startLineNumber),new n.z(s,t.modified.startLineNumber));e.modified.isEmpty||o.push(e),r=t.original.endLineNumberExclusive,s=t.modified.endLineNumberExclusive}let l=new LineRangeMapping(new n.z(r,t+1),new n.z(s,i+1));return l.modified.isEmpty||o.push(l),o}static clip(e,t,i){let n=[];for(let o of e){let e=o.original.intersect(t),r=o.modified.intersect(i);e&&!e.isEmpty&&r&&!r.isEmpty&&n.push(new LineRangeMapping(e,r))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new LineRangeMapping(this.modified,this.original)}join(e){return new LineRangeMapping(this.original.join(e.original),this.modified.join(e.modified))}};let DetailedLineRangeMapping=class DetailedLineRangeMapping extends LineRangeMapping{constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new DetailedLineRangeMapping(this.modified,this.original,null===(e=this.innerChanges)||void 0===e?void 0:e.map(e=>e.flip()))}};let RangeMapping=class RangeMapping{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new RangeMapping(this.modifiedRange,this.originalRange)}}},42999:function(e,t,i){"use strict";i.d(t,{p:function(){return InternalEditorAction}});let InternalEditorAction=class InternalEditorAction{constructor(e,t,i,n,o,r,s){this.id=e,this.label=t,this.alias=i,this.metadata=n,this._precondition=o,this._run=r,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}},97292:function(e,t,i){"use strict";i.d(t,{g:function(){return n}});let n={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}},97240:function(e,t,i){"use strict";i.d(t,{u:function(){return o}});var n,o,r=i(46157),s=i(7193);(n=o||(o={})).editorSimpleInput=new s.uy("editorSimpleInput",!1,!0),n.editorTextFocus=new s.uy("editorTextFocus",!1,r.NC("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new s.uy("editorFocus",!1,r.NC("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new s.uy("textInputFocus",!1,r.NC("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new s.uy("editorReadonly",!1,r.NC("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new s.uy("inDiffEditor",!1,r.NC("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new s.uy("isEmbeddedDiffEditor",!1,r.NC("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new s.uy("inMultiDiffEditor",!1,r.NC("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new s.uy("multiDiffEditorAllCollapsed",void 0,r.NC("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new s.uy("diffEditorHasChanges",!1,r.NC("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new s.uy("comparingMovedCode",!1,r.NC("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new s.uy("accessibleDiffViewerVisible",!1,r.NC("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new s.uy("diffEditorRenderSideBySideInlineBreakpointReached",!1,r.NC("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.columnSelection=new s.uy("editorColumnSelection",!1,r.NC("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new s.uy("editorHasSelection",!1,r.NC("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new s.uy("editorHasMultipleSelections",!1,r.NC("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new s.uy("editorTabMovesFocus",!1,r.NC("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new s.uy("isInEmbeddedEditor",!1,!0),n.canUndo=new s.uy("canUndo",!1,!0),n.canRedo=new s.uy("canRedo",!1,!0),n.hoverVisible=new s.uy("editorHoverVisible",!1,r.NC("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new s.uy("editorHoverFocused",!1,r.NC("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new s.uy("stickyScrollFocused",!1,r.NC("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new s.uy("stickyScrollVisible",!1,r.NC("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new s.uy("standaloneColorPickerVisible",!1,r.NC("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new s.uy("standaloneColorPickerFocused",!1,r.NC("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new s.uy("inCompositeEditor",void 0,r.NC("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new s.uy("editorLangId","",r.NC("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new s.uy("editorHasCompletionItemProvider",!1,r.NC("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new s.uy("editorHasCodeActionsProvider",!1,r.NC("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new s.uy("editorHasCodeLensProvider",!1,r.NC("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new s.uy("editorHasDefinitionProvider",!1,r.NC("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new s.uy("editorHasDeclarationProvider",!1,r.NC("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new s.uy("editorHasImplementationProvider",!1,r.NC("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new s.uy("editorHasTypeDefinitionProvider",!1,r.NC("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new s.uy("editorHasHoverProvider",!1,r.NC("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new s.uy("editorHasDocumentHighlightProvider",!1,r.NC("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new s.uy("editorHasDocumentSymbolProvider",!1,r.NC("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new s.uy("editorHasReferenceProvider",!1,r.NC("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new s.uy("editorHasRenameProvider",!1,r.NC("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new s.uy("editorHasSignatureHelpProvider",!1,r.NC("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new s.uy("editorHasInlayHintsProvider",!1,r.NC("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new s.uy("editorHasDocumentFormattingProvider",!1,r.NC("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new s.uy("editorHasDocumentSelectionFormattingProvider",!1,r.NC("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new s.uy("editorHasMultipleDocumentFormattingProvider",!1,r.NC("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new s.uy("editorHasMultipleDocumentSelectionFormattingProvider",!1,r.NC("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))},97238:function(e,t,i){"use strict";i.d(t,{n:function(){return getEditorFeatures},y:function(){return registerEditorFeature}});let n=[];function registerEditorFeature(e){n.push(e)}function getEditorFeatures(){return n.slice(0)}},91957:function(e,t,i){"use strict";i.d(t,{N:function(){return TokenMetadata}});let TokenMetadata=class TokenMetadata{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return(1024&e)!=0}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static getClassNameFromMetadata(e){let t=this.getForeground(e),i="mtk"+t,n=this.getFontStyle(e);return 1&n&&(i+=" mtki"),2&n&&(i+=" mtkb"),4&n&&(i+=" mtku"),8&n&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){let i=this.getForeground(e),n=this.getFontStyle(e),o=`color: ${t[i]};`;1&n&&(o+="font-style: italic;"),2&n&&(o+="font-weight: bold;");let r="";return 4&n&&(r+=" underline"),8&n&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){let t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(1&i),bold:!!(2&i),underline:!!(4&i),strikethrough:!!(8&i)}}}},51554:function(e,t,i){"use strict";i.d(t,{G:function(){return score}});var n=i(42302),o=i(51777);function score(e,t,i,r,s,l){if(Array.isArray(e)){let n=0;for(let o of e){let e=score(o,t,i,r,s,l);if(10===e)return e;e>n&&(n=e)}return n}if("string"==typeof e)return r?"*"===e?5:e===i?10:0:0;if(!e)return 0;{let{language:d,pattern:c,scheme:u,hasAccessToAllModels:g,notebookType:m}=e;if(!r&&!g)return 0;m&&s&&(t=s);let f=0;if(u){if(u===t.scheme)f=10;else{if("*"!==u)return 0;f=5}}if(d){if(d===i)f=10;else{if("*"!==d)return 0;f=Math.max(f,5)}}if(m){if(m===l)f=10;else{if("*"!==m||void 0===l)return 0;f=Math.max(f,5)}}if(c){let e;if(!((e="string"==typeof c?c:{...c,base:(0,o.Fv)(c.base)})===t.fsPath||(0,n.EQ)(e,t.fsPath)))return 0;f=10}return f}}},7530:function(e,t,i){"use strict";i.d(t,{mY:function(){return v},gX:function(){return c},MY:function(){return m},DI:function(){return EncodedTokenizationResult},AD:function(){return FoldingRangeKind},gl:function(){return C},bw:function(){return u},rn:function(){return b},MO:function(){return LazyTokenizationSupport},w:function(){return _},ln:function(){return SelectedSuggestionInfo},WW:function(){return g},uZ:function(){return f},WU:function(){return Token},RW:function(){return N},hG:function(){return TokenizationResult},R4:function(){return getAriaLabelForSymbol},vx:function(){return isLocationLink}});var n,o,r,s,l,d,c,u,g,m,f,_,v,C,b,S=i(84530),y=i(31568),w=i(30822),L=i(57605),k=i(87932);let TokenizationRegistry=class TokenizationRegistry{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new L.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),(0,k.OF)(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;null===(i=this._factories.get(e))||void 0===i||i.dispose();let n=new TokenizationSupportFactoryData(this,e,t);return this._factories.set(e,n),(0,k.OF)(()=>{let t=this._factories.get(e);t&&t===n&&(this._factories.delete(e),t.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){let t=this.get(e);if(t)return!0;let i=this._factories.get(e);return!i||!!i.isResolved}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};let TokenizationSupportFactoryData=class TokenizationSupportFactoryData extends k.JT{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}};var D=i(46157);let Token=class Token{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};let TokenizationResult=class TokenizationResult{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}};let EncodedTokenizationResult=class EncodedTokenizationResult{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}};!function(e){let t=new Map;function toIcon(e){let i=t.get(e);return i||(console.info("No codicon found for CompletionItemKind "+e),i=S.l.symbolProperty),i}t.set(0,S.l.symbolMethod),t.set(1,S.l.symbolFunction),t.set(2,S.l.symbolConstructor),t.set(3,S.l.symbolField),t.set(4,S.l.symbolVariable),t.set(5,S.l.symbolClass),t.set(6,S.l.symbolStruct),t.set(7,S.l.symbolInterface),t.set(8,S.l.symbolModule),t.set(9,S.l.symbolProperty),t.set(10,S.l.symbolEvent),t.set(11,S.l.symbolOperator),t.set(12,S.l.symbolUnit),t.set(13,S.l.symbolValue),t.set(15,S.l.symbolEnum),t.set(14,S.l.symbolConstant),t.set(15,S.l.symbolEnum),t.set(16,S.l.symbolEnumMember),t.set(17,S.l.symbolKeyword),t.set(27,S.l.symbolSnippet),t.set(18,S.l.symbolText),t.set(19,S.l.symbolColor),t.set(20,S.l.symbolFile),t.set(21,S.l.symbolReference),t.set(22,S.l.symbolCustomColor),t.set(23,S.l.symbolFolder),t.set(24,S.l.symbolTypeParameter),t.set(25,S.l.account),t.set(26,S.l.issues),e.toIcon=toIcon;let i=new Map;function fromString(e,t){let n=i.get(e);return void 0!==n||t||(n=9),n}i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26),e.fromString=fromString}(c||(c={})),(n=u||(u={}))[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit";let SelectedSuggestionInfo=class SelectedSuggestionInfo{constructor(e,t,i,n){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=n}equals(e){return w.e.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}};function isLocationLink(e){return e&&y.o.isUri(e.uri)&&w.e.isIRange(e.range)&&(w.e.isIRange(e.originSelectionRange)||w.e.isIRange(e.targetSelectionRange))}(o=g||(g={}))[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange",(r=m||(m={}))[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write";let x={17:(0,D.NC)("Array","array"),16:(0,D.NC)("Boolean","boolean"),4:(0,D.NC)("Class","class"),13:(0,D.NC)("Constant","constant"),8:(0,D.NC)("Constructor","constructor"),9:(0,D.NC)("Enum","enumeration"),21:(0,D.NC)("EnumMember","enumeration member"),23:(0,D.NC)("Event","event"),7:(0,D.NC)("Field","field"),0:(0,D.NC)("File","file"),11:(0,D.NC)("Function","function"),10:(0,D.NC)("Interface","interface"),19:(0,D.NC)("Key","key"),5:(0,D.NC)("Method","method"),1:(0,D.NC)("Module","module"),2:(0,D.NC)("Namespace","namespace"),20:(0,D.NC)("Null","null"),15:(0,D.NC)("Number","number"),18:(0,D.NC)("Object","object"),24:(0,D.NC)("Operator","operator"),3:(0,D.NC)("Package","package"),6:(0,D.NC)("Property","property"),14:(0,D.NC)("String","string"),22:(0,D.NC)("Struct","struct"),25:(0,D.NC)("TypeParameter","type parameter"),12:(0,D.NC)("Variable","variable")};function getAriaLabelForSymbol(e,t){return(0,D.NC)("symbolAriaLabel","{0} ({1})",e,x[t])}!function(e){let t=new Map;function toIcon(e){let i=t.get(e);return i||(console.info("No codicon found for SymbolKind "+e),i=S.l.symbolProperty),i}t.set(0,S.l.symbolFile),t.set(1,S.l.symbolModule),t.set(2,S.l.symbolNamespace),t.set(3,S.l.symbolPackage),t.set(4,S.l.symbolClass),t.set(5,S.l.symbolMethod),t.set(6,S.l.symbolProperty),t.set(7,S.l.symbolField),t.set(8,S.l.symbolConstructor),t.set(9,S.l.symbolEnum),t.set(10,S.l.symbolInterface),t.set(11,S.l.symbolFunction),t.set(12,S.l.symbolVariable),t.set(13,S.l.symbolConstant),t.set(14,S.l.symbolString),t.set(15,S.l.symbolNumber),t.set(16,S.l.symbolBoolean),t.set(17,S.l.symbolArray),t.set(18,S.l.symbolObject),t.set(19,S.l.symbolKey),t.set(20,S.l.symbolNull),t.set(21,S.l.symbolEnumMember),t.set(22,S.l.symbolStruct),t.set(23,S.l.symbolEvent),t.set(24,S.l.symbolOperator),t.set(25,S.l.symbolTypeParameter),e.toIcon=toIcon}(f||(f={}));let FoldingRangeKind=class FoldingRangeKind{static fromValue(e){switch(e){case"comment":return FoldingRangeKind.Comment;case"imports":return FoldingRangeKind.Imports;case"region":return FoldingRangeKind.Region}return new FoldingRangeKind(e)}constructor(e){this.value=e}};FoldingRangeKind.Comment=new FoldingRangeKind("comment"),FoldingRangeKind.Imports=new FoldingRangeKind("imports"),FoldingRangeKind.Region=new FoldingRangeKind("region"),(s=_||(_={}))[s.AIGenerated=1]="AIGenerated",function(e){function is(e){return!!e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.title}e.is=is}(v||(v={})),(l=C||(C={}))[l.Type=1]="Type",l[l.Parameter=2]="Parameter";let LazyTokenizationSupport=class LazyTokenizationSupport{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}};let N=new TokenizationRegistry;(d=b||(b={}))[d.Invoke=0]="Invoke",d[d.Automatic=1]="Automatic"},9954:function(e,t,i){"use strict";i.d(t,{$9:function(){return getIndentActionForType},UF:function(){return getIndentForEnter},n8:function(){return getGoodIndentForLine},r7:function(){return getInheritIndentForLine},tI:function(){return getIndentMetadata}});var n=i(45837),o=i(63016),r=i(40523),s=i(68903);function getPrecedingValidLine(e,t,i){let n=e.tokenization.getLanguageIdAtPosition(t,0);if(t>1){let o;let r=-1;for(o=t-1;o>=1;o--){if(e.tokenization.getLanguageIdAtPosition(o,0)!==n)return r;let t=e.getLineContent(o);if(i.shouldIgnore(t)||/^\s+$/.test(t)||""===t){r=o;continue}return o}}return -1}function getInheritIndentForLine(e,t,i,r=!0,s){if(e<4)return null;let l=s.getLanguageConfiguration(t.tokenization.getLanguageId()).indentRulesSupport;if(!l)return null;if(i<=1)return{indentation:"",action:null};for(let e=i-1;e>0&&""===t.getLineContent(e);e--)if(1===e)return{indentation:"",action:null};let d=getPrecedingValidLine(t,i,l);if(d<0)return null;if(d<1)return{indentation:"",action:null};let c=t.getLineContent(d);if(l.shouldIncrease(c)||l.shouldIndentNextLine(c))return{indentation:n.V8(c),action:o.wU.Indent,line:d};if(l.shouldDecrease(c))return{indentation:n.V8(c),action:null,line:d};{if(1===d)return{indentation:n.V8(t.getLineContent(d)),action:null,line:d};let e=d-1,i=l.getIndentMetadata(t.getLineContent(e));if(!(3&i)&&4&i){let i=0;for(let n=e-1;n>0;n--)if(!l.shouldIndentNextLine(t.getLineContent(n))){i=n;break}return{indentation:n.V8(t.getLineContent(i+1)),action:null,line:i+1}}if(r)return{indentation:n.V8(t.getLineContent(d)),action:null,line:d};for(let e=d;e>0;e--){let i=t.getLineContent(e);if(l.shouldIncrease(i))return{indentation:n.V8(i),action:o.wU.Indent,line:e};if(l.shouldIndentNextLine(i)){let i=0;for(let n=e-1;n>0;n--)if(!l.shouldIndentNextLine(t.getLineContent(e))){i=n;break}return{indentation:n.V8(t.getLineContent(i+1)),action:null,line:i+1}}if(l.shouldDecrease(i))return{indentation:n.V8(i),action:null,line:e}}return{indentation:n.V8(t.getLineContent(1)),action:null,line:1}}}function getGoodIndentForLine(e,t,i,r,s,l){if(e<4)return null;let d=l.getLanguageConfiguration(i);if(!d)return null;let c=l.getLanguageConfiguration(i).indentRulesSupport;if(!c)return null;let u=getInheritIndentForLine(e,t,r,void 0,l),g=t.getLineContent(r);if(u){let i=u.line;if(void 0!==i){let l=!0;for(let e=i;e<r-1;e++)if(!/^\s*$/.test(t.getLineContent(e))){l=!1;break}if(l){let r=d.onEnter(e,"",t.getLineContent(i),"");if(r){let e=n.V8(t.getLineContent(i));return r.removeText&&(e=e.substring(0,e.length-r.removeText)),r.indentAction===o.wU.Indent||r.indentAction===o.wU.IndentOutdent?e=s.shiftIndent(e):r.indentAction===o.wU.Outdent&&(e=s.unshiftIndent(e)),c.shouldDecrease(g)&&(e=s.unshiftIndent(e)),r.appendText&&(e+=r.appendText),n.V8(e)}}}return c.shouldDecrease(g)?u.action===o.wU.Indent?u.indentation:s.unshiftIndent(u.indentation):u.action===o.wU.Indent?s.shiftIndent(u.indentation):u.indentation}return null}function getIndentForEnter(e,t,i,l,d){let c,u;if(e<4)return null;t.tokenization.forceTokenization(i.startLineNumber);let g=t.tokenization.getLineTokens(i.startLineNumber),m=(0,r.wH)(g,i.startColumn-1),f=m.getLineContent(),_=!1;if(m.firstCharOffset>0&&g.getLanguageId(0)!==m.languageId?(_=!0,c=f.substr(0,i.startColumn-1-m.firstCharOffset)):c=g.getLineContent().substring(0,i.startColumn-1),i.isEmpty())u=f.substr(i.startColumn-1-m.firstCharOffset);else{let e=(0,s.n2)(t,i.endLineNumber,i.endColumn);u=e.getLineContent().substr(i.endColumn-1-m.firstCharOffset)}let v=d.getLanguageConfiguration(m.languageId).indentRulesSupport;if(!v)return null;let C=c,b=n.V8(c),S=n.V8(g.getLineContent()),y=getInheritIndentForLine(e,{tokenization:{getLineTokens:e=>t.tokenization.getLineTokens(e),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(e,i)=>t.getLanguageIdAtPosition(e,i)},getLineContent:e=>e===i.startLineNumber?C:t.getLineContent(e)},i.startLineNumber+1,void 0,d);if(!y){let e=_?S:b;return{beforeEnter:e,afterEnter:e}}let w=_?S:y.indentation;return y.action===o.wU.Indent&&(w=l.shiftIndent(w)),v.shouldDecrease(u)&&(w=l.unshiftIndent(w)),{beforeEnter:_?S:b,afterEnter:w}}function getIndentActionForType(e,t,i,n,r,l){let d;if(e<4)return null;let c=(0,s.n2)(t,i.startLineNumber,i.startColumn);if(c.firstCharOffset)return null;let u=l.getLanguageConfiguration(c.languageId).indentRulesSupport;if(!u)return null;let g=c.getLineContent(),m=g.substr(0,i.startColumn-1-c.firstCharOffset);if(i.isEmpty())d=g.substr(i.startColumn-1-c.firstCharOffset);else{let e=(0,s.n2)(t,i.endLineNumber,i.endColumn);d=e.getLineContent().substr(i.endColumn-1-c.firstCharOffset)}if(!u.shouldDecrease(m+d)&&u.shouldDecrease(m+n+d)){let n=getInheritIndentForLine(e,t,i.startLineNumber,!1,l);if(!n)return null;let s=n.indentation;return n.action!==o.wU.Indent&&(s=r.unshiftIndent(s)),s}return null}function getIndentMetadata(e,t,i){let n=i.getLanguageConfiguration(e.getLanguageId()).indentRulesSupport;return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}},28151:function(e,t,i){"use strict";i.d(t,{A:function(){return getEnterAction}});var n=i(63016),o=i(68903);function getEnterAction(e,t,i,r){let s;let l=(0,o.n2)(t,i.startLineNumber,i.startColumn),d=r.getLanguageConfiguration(l.languageId);if(!d)return null;let c=l.getLineContent(),u=c.substr(0,i.startColumn-1-l.firstCharOffset);if(i.isEmpty())s=c.substr(i.startColumn-1-l.firstCharOffset);else{let e=(0,o.n2)(t,i.endLineNumber,i.endColumn);s=e.getLineContent().substr(i.endColumn-1-l.firstCharOffset)}let g="";if(i.startLineNumber>1&&0===l.firstCharOffset){let e=(0,o.n2)(t,i.startLineNumber-1);e.languageId===l.languageId&&(g=e.getLineContent())}let m=d.onEnter(e,g,u,s);if(!m)return null;let f=m.indentAction,_=m.appendText,v=m.removeText||0;_?f===n.wU.Indent&&(_="	"+_):_=f===n.wU.Indent||f===n.wU.IndentOutdent?"	":"";let C=(0,o.u0)(t,i.startLineNumber,i.startColumn);return v&&(C=C.substring(0,C.length-v)),{indentAction:f,appendText:_,removeText:v,indentation:C}}},84634:function(e,t,i){"use strict";i.d(t,{O:function(){return o}});var n=i(27989);let o=(0,n.yh)("languageService")},63016:function(e,t,i){"use strict";var n,o;i.d(t,{V6:function(){return StandardAutoClosingPairConditional},c$:function(){return AutoClosingPairs},wU:function(){return n}}),(o=n||(n={}))[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent";let StandardAutoClosingPairConditional=class StandardAutoClosingPairConditional{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++){let i=e.notIn[t];switch(i){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(0===e.getTokenCount())return!0;let i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){let e=String.fromCharCode(i);if(!this.open.includes(e)&&!this.close.includes(e))return e}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}};let AutoClosingPairs=class AutoClosingPairs{constructor(e){for(let t of(this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map,e))appendEntry(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),appendEntry(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),appendEntry(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),appendEntry(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),1===t.close.length&&1===t.open.length&&appendEntry(this.autoClosingPairsCloseSingleChar,t.close,t)}};function appendEntry(e,t,i){e.has(t)?e.get(t).push(i):e.set(t,[i])}},68903:function(e,t,i){"use strict";i.d(t,{c_:function(){return S},u0:function(){return getIndentationAtPosition},n2:function(){return getScopedLineTokens}});var n=i(57605),o=i(87932),r=i(45837),s=i(83783),l=i(63016),d=i(40523);let CharacterPairSupport=class CharacterPairSupport{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(e=>new l.V6(e)):e.brackets?this._autoClosingPairs=e.brackets.map(e=>new l.V6({open:e[0],close:e[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new l.V6({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes="string"==typeof e.autoCloseBefore?e.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets="string"==typeof e.autoCloseBefore?e.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n	",CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n	";var c=i(34794),u=i(15477);let BracketElectricCharacterSupport=class BracketElectricCharacterSupport{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let i of t.close){let t=i.charAt(i.length-1);e.push(t)}return(0,c.EB)(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;let n=t.findTokenIndexAtOffset(i-1);if((0,d.Bu)(t.getStandardTokenType(n)))return null;let o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,s=u.Vr.findPrevBracketInRange(o,1,r,0,r.length);if(!s)return null;let l=r.substring(s.startColumn-1,s.endColumn-1).toLowerCase(),c=this._richEditBrackets.textIsOpenBracket[l];if(c)return null;let g=t.getActualLineContentBefore(s.startColumn-1);return/^\s*$/.test(g)?{matchOpenBracket:l}:null}};function resetGlobalRegex(e){return e.global&&(e.lastIndex=0),!0}let IndentRulesSupport=class IndentRulesSupport{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&resetGlobalRegex(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&resetGlobalRegex(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&resetGlobalRegex(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&resetGlobalRegex(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};var g=i(17861);let OnEnterSupport=class OnEnterSupport{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(e=>{let t=OnEnterSupport._createOpenBracketRegExp(e[0]),i=OnEnterSupport._createCloseBracketRegExp(e[1]);t&&i&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let e=0,o=this._regExpRules.length;e<o;e++){let o=this._regExpRules[e],r=[{reg:o.beforeText,text:i},{reg:o.afterText,text:n},{reg:o.previousLineText,text:t}].every(e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)));if(r)return o.action}if(e>=2&&i.length>0&&n.length>0)for(let e=0,t=this._brackets.length;e<t;e++){let t=this._brackets[e];if(t.openRegExp.test(i)&&t.closeRegExp.test(n))return{indentAction:l.wU.IndentOutdent}}if(e>=2&&i.length>0)for(let e=0,t=this._brackets.length;e<t;e++){let t=this._brackets[e];if(t.openRegExp.test(i))return{indentAction:l.wU.Indent}}return null}static _createOpenBracketRegExp(e){let t=r.ec(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",OnEnterSupport._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=r.ec(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,OnEnterSupport._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(e){return(0,g.dL)(e),null}}};var m=i(27989),f=i(78559),_=i(84634),v=i(95026),C=i(36281),b=i(1627);let LanguageBracketsConfiguration=class LanguageBracketsConfiguration{constructor(e,t){this.languageId=e;let i=t.brackets?filterValidBrackets(t.brackets):[],n=new b.b(e=>{let t=new Set;return{info:new OpeningBracketKind(this,e,t),closing:t}}),o=new b.b(e=>{let t=new Set,i=new Set;return{info:new ClosingBracketKind(this,e,t,i),opening:t,openingColorized:i}});for(let[e,t]of i){let i=n.get(e),r=o.get(t);i.closing.add(r.info),r.opening.add(i.info)}let r=t.colorizedBracketPairs?filterValidBrackets(t.colorizedBracketPairs):i.filter(e=>!("<"===e[0]&&">"===e[1]));for(let[e,t]of r){let i=n.get(e),r=o.get(t);i.closing.add(r.info),r.openingColorized.add(i.info),r.opening.add(i.info)}this._openingBrackets=new Map([...n.cachedValues].map(([e,t])=>[e,t.info])),this._closingBrackets=new Map([...o.cachedValues].map(([e,t])=>[e,t.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}};function filterValidBrackets(e){return e.filter(([e,t])=>""!==e&&""!==t)}let BracketKindBase=class BracketKindBase{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}};let OpeningBracketKind=class OpeningBracketKind extends BracketKindBase{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}};let ClosingBracketKind=class ClosingBracketKind extends BracketKindBase{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config===this.config&&this.openingBrackets.has(e)}closesColorized(e){return e.config===this.config&&this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}};var __param=function(e,t){return function(i,n){t(i,n,e)}};let LanguageConfigurationServiceChangeEvent=class LanguageConfigurationServiceChangeEvent{constructor(e){this.languageId=e}affects(e){return!this.languageId||this.languageId===e}};let S=(0,m.yh)("languageConfigurationService"),y=class extends o.JT{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new LanguageConfigurationRegistry),this.onDidChangeEmitter=this._register(new n.Q5),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;let i=new Set(Object.values(w));this._register(this.configurationService.onDidChangeConfiguration(e=>{let t=e.change.keys.some(e=>i.has(e)),n=e.change.overrides.filter(([e,t])=>t.some(e=>i.has(e))).map(([e])=>e);if(t)this.configurations.clear(),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(void 0));else for(let e of n)this.languageService.isRegisteredLanguageId(e)&&(this.configurations.delete(e),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e)))})),this._register(this._registry.onDidChange(e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=computeConfig(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};function computeConfig(e,t,i,n){let o=t.getLanguageConfiguration(e);if(!o){if(!n.isRegisteredLanguageId(e))return new ResolvedLanguageConfiguration(e,{});o=new ResolvedLanguageConfiguration(e,{})}let r=getCustomizedLanguageConfig(o.languageId,i),s=combineLanguageConfigurations([o.underlyingConfig,r]),l=new ResolvedLanguageConfiguration(o.languageId,s);return l}y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(0,f.Ui),__param(1,_.O)],y);let w={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function getCustomizedLanguageConfig(e,t){let i=t.getValue(w.brackets,{overrideIdentifier:e}),n=t.getValue(w.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:validateBracketPairs(i),colorizedBracketPairs:validateBracketPairs(n)}}function validateBracketPairs(e){if(Array.isArray(e))return e.map(e=>{if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]}).filter(e=>!!e)}function getIndentationAtPosition(e,t,i){let n=e.getLineContent(t),o=r.V8(n);return o.length>i-1&&(o=o.substring(0,i-1)),o}function getScopedLineTokens(e,t,i){e.tokenization.forceTokenization(t);let n=e.tokenization.getLineTokens(t),o=void 0===i?e.getLineMaxColumn(t)-1:i-1;return(0,d.wH)(n,o)}let ComposedLanguageConfiguration=class ComposedLanguageConfiguration{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){let i=new LanguageConfigurationContribution(e,t,++this._order);return this._entries.push(i),this._resolved=null,(0,o.OF)(()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===i){this._entries.splice(e,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new ResolvedLanguageConfiguration(this.languageId,e))}return this._resolved}_resolve(){return 0===this._entries.length?null:(this._entries.sort(LanguageConfigurationContribution.cmp),combineLanguageConfigurations(this._entries.map(e=>e.configuration)))}};function combineLanguageConfigurations(e){let t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let i of e)t={comments:i.comments||t.comments,brackets:i.brackets||t.brackets,wordPattern:i.wordPattern||t.wordPattern,indentationRules:i.indentationRules||t.indentationRules,onEnterRules:i.onEnterRules||t.onEnterRules,autoClosingPairs:i.autoClosingPairs||t.autoClosingPairs,surroundingPairs:i.surroundingPairs||t.surroundingPairs,autoCloseBefore:i.autoCloseBefore||t.autoCloseBefore,folding:i.folding||t.folding,colorizedBracketPairs:i.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:i.__electricCharacterSupport||t.__electricCharacterSupport};return t}let LanguageConfigurationContribution=class LanguageConfigurationContribution{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}};let LanguageConfigurationChangeEvent=class LanguageConfigurationChangeEvent{constructor(e){this.languageId=e}};let LanguageConfigurationRegistry=class LanguageConfigurationRegistry extends o.JT{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new n.Q5),this.onDidChange=this._onDidChange.event,this._register(this.register(C.bd,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new ComposedLanguageConfiguration(e),this._entries.set(e,n));let r=n.register(t,i);return this._onDidChange.fire(new LanguageConfigurationChangeEvent(e)),(0,o.OF)(()=>{r.dispose(),this._onDidChange.fire(new LanguageConfigurationChangeEvent(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(null==t?void 0:t.getResolvedConfiguration())||null}};let ResolvedLanguageConfiguration=class ResolvedLanguageConfiguration{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new OnEnterSupport(this.underlyingConfig):null,this.comments=ResolvedLanguageConfiguration._handleComments(this.underlyingConfig),this.characterPair=new CharacterPairSupport(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||s.Af,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new IndentRulesSupport(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new LanguageBracketsConfiguration(e,this.underlyingConfig)}getWordDefinition(){return(0,s.eq)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new u.EA(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new BracketElectricCharacterSupport(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new l.c$(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){let[e,n]=t.blockComment;i.blockCommentStartToken=e,i.blockCommentEndToken=n}return i}};(0,v.z)(S,y,1)},36281:function(e,t,i){"use strict";i.d(t,{bd:function(){return c},dQ:function(){return d}});var n=i(46157),o=i(57605),r=i(76924),s=i(23171),l=i(61529);let EditorModesRegistry=class EditorModesRegistry{constructor(){this._onDidChangeLanguages=new o.Q5,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}};let d=new EditorModesRegistry;r.B.add("editor.modesRegistry",d);let c="plaintext";d.registerLanguage({id:c,extensions:[".txt"],aliases:[n.NC("plainText.alias","Plain Text"),"text"],mimetypes:[s.v.text]}),r.B.as(l.IP.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])},12429:function(e,t,i){"use strict";i.d(t,{Dy:function(){return nullTokenizeEncoded},Ri:function(){return nullTokenize},TJ:function(){return o}});var n=i(7530);let o=new class{clone(){return this}equals(e){return this===e}};function nullTokenize(e,t){return new n.hG([new n.WU(0,"",e)],t)}function nullTokenizeEncoded(e,t){let i=new Uint32Array(2);return i[0]=0,i[1]=(e<<0|33587200)>>>0,new n.DI(i,null===t?o:t)}},40523:function(e,t,i){"use strict";function createScopedLineTokens(e,t){let i=e.getCount(),n=e.findTokenIndexAtOffset(t),o=e.getLanguageId(n),r=n;for(;r+1<i&&e.getLanguageId(r+1)===o;)r++;let s=n;for(;s>0&&e.getLanguageId(s-1)===o;)s--;return new ScopedLineTokens(e,o,s,r+1,e.getStartOffset(s),e.getEndOffset(r))}i.d(t,{Bu:function(){return ignoreBracketsInToken},wH:function(){return createScopedLineTokens}});let ScopedLineTokens=class ScopedLineTokens{constructor(e,t,i,n,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=o,this._lastCharOffset=r}getLineContent(){let e=this._actual.getLineContent();return e.substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){let t=this._actual.getLineContent();return t.substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}};function ignoreBracketsInToken(e){return(3&e)!=0}},15477:function(e,t,i){"use strict";i.d(t,{EA:function(){return RichEditBrackets},Vr:function(){return BracketsUtils}});var n=i(45837),o=i(53778),r=i(30822);let RichEditBracket=class RichEditBracket{constructor(e,t,i,n,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=o,this.reversedRegex=r,this._openSet=RichEditBracket._toSet(this.open),this._closeSet=RichEditBracket._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let i of e)t.add(i);return t}};function groupFuzzyBrackets(e){let t=e.length;e=e.map(e=>[e[0].toLowerCase(),e[1].toLowerCase()]);let i=[];for(let e=0;e<t;e++)i[e]=e;let areOverlapping=(e,t)=>{let[i,n]=e,[o,r]=t;return i===o||i===r||n===o||n===r},mergeGroups=(e,n)=>{let o=Math.min(e,n),r=Math.max(e,n);for(let e=0;e<t;e++)i[e]===r&&(i[e]=o)};for(let n=0;n<t;n++){let o=e[n];for(let r=n+1;r<t;r++){let t=e[r];areOverlapping(o,t)&&mergeGroups(i[n],i[r])}}let n=[];for(let o=0;o<t;o++){let r=[],s=[];for(let n=0;n<t;n++)if(i[n]===o){let[t,i]=e[n];r.push(t),s.push(i)}r.length>0&&n.push({open:r,close:s})}return n}let RichEditBrackets=class RichEditBrackets{constructor(e,t){this._richEditBracketsBrand=void 0;let i=groupFuzzyBrackets(t);for(let t of(this.brackets=i.map((t,n)=>new RichEditBracket(e,n,t.open,t.close,getRegexForBracketPair(t.open,t.close,i,n),getReversedRegexForBracketPair(t.open,t.close,i,n))),this.forwardRegex=getRegexForBrackets(this.brackets),this.reversedRegex=getReversedRegexForBrackets(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0,this.brackets)){for(let e of t.open)this.textIsBracket[e]=t,this.textIsOpenBracket[e]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,e.length);for(let e of t.close)this.textIsBracket[e]=t,this.textIsOpenBracket[e]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,e.length)}}};function collectSuperstrings(e,t,i,n){for(let o=0,r=t.length;o<r;o++){if(o===i)continue;let r=t[o];for(let t of r.open)t.indexOf(e)>=0&&n.push(t);for(let t of r.close)t.indexOf(e)>=0&&n.push(t)}}function lengthcmp(e,t){return e.length-t.length}function unique(e){if(e.length<=1)return e;let t=[],i=new Set;for(let n of e)i.has(n)||(t.push(n),i.add(n));return t}function getRegexForBracketPair(e,t,i,n){let o=[];o=(o=o.concat(e)).concat(t);for(let e=0,t=o.length;e<t;e++)collectSuperstrings(o[e],i,n,o);return(o=unique(o)).sort(lengthcmp),o.reverse(),createBracketOrRegExp(o)}function getReversedRegexForBracketPair(e,t,i,n){let o=[];o=(o=o.concat(e)).concat(t);for(let e=0,t=o.length;e<t;e++)collectSuperstrings(o[e],i,n,o);return(o=unique(o)).sort(lengthcmp),o.reverse(),createBracketOrRegExp(o.map(s))}function getRegexForBrackets(e){let t=[];for(let i of e){for(let e of i.open)t.push(e);for(let e of i.close)t.push(e)}return createBracketOrRegExp(t=unique(t))}function getReversedRegexForBrackets(e){let t=[];for(let i of e){for(let e of i.open)t.push(e);for(let e of i.close)t.push(e)}return createBracketOrRegExp((t=unique(t)).map(s))}function prepareBracketForRegExp(e){let t=/^[\w ]+$/.test(e);return e=n.ec(e),t?`\\b${e}\\b`:e}function createBracketOrRegExp(e){let t=`(${e.map(prepareBracketForRegExp).join(")|(")})`;return n.GF(t,!0)}let s=function(){function reverse(e){let t=new Uint16Array(e.length),i=0;for(let n=e.length-1;n>=0;n--)t[i++]=e.charCodeAt(n);return o.oe().decode(t)}let e=null,t=null;return function(i){return e!==i&&(t=reverse(e=i)),t}}();let BracketsUtils=class BracketsUtils{static _findPrevBracketInText(e,t,i,n){let o=i.match(e);if(!o)return null;let s=i.length-(o.index||0),l=o[0].length,d=n+s;return new r.e(t,d-l+1,t,d+1)}static findPrevBracketInRange(e,t,i,n,o){let r=s(i),l=r.substring(i.length-o,i.length-n);return this._findPrevBracketInText(e,t,l,n)}static findNextBracketInText(e,t,i,n){let o=i.match(e);if(!o)return null;let s=o.index||0,l=o[0].length;if(0===l)return null;let d=n+s;return new r.e(t,d+1,t,d+1+l)}static findNextBracketInRange(e,t,i,n,o){let r=i.substring(n,o);return this.findNextBracketInText(e,t,r,n)}}},5328:function(e,t,i){"use strict";i.d(t,{C2:function(){return tokenizeToString},Fq:function(){return tokenizeLineToHTML}});var n=i(45837),o=i(46338),r=i(7530),s=i(12429);let l={getInitialState:()=>s.TJ,tokenizeEncoded:(e,t,i)=>(0,s.Dy)(0,i)};async function tokenizeToString(e,t,i){if(!i)return _tokenizeToString(t,e.languageIdCodec,l);let n=await r.RW.getOrCreate(i);return _tokenizeToString(t,e.languageIdCodec,n||l)}function tokenizeLineToHTML(e,t,i,n,o,r,s){let l="<div>",d=n,c=0,u=!0;for(let g=0,m=t.getCount();g<m;g++){let m=t.getEndOffset(g);if(m<=n)continue;let f="";for(;d<m&&d<o;d++){let t=e.charCodeAt(d);switch(t){case 9:{let e=r-(d+c)%r;for(c+=e-1;e>0;)s&&u?(f+="&#160;",u=!1):(f+=" ",u=!0),e--;break}case 60:f+="&lt;",u=!1;break;case 62:f+="&gt;",u=!1;break;case 38:f+="&amp;",u=!1;break;case 0:f+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:f+="�",u=!1;break;case 13:f+="&#8203",u=!1;break;case 32:s&&u?(f+="&#160;",u=!1):(f+=" ",u=!0);break;default:f+=String.fromCharCode(t),u=!1}}if(l+=`<span style="${t.getInlineStyle(g,i)}">${f}</span>`,m>o||d>=o)break}return l+"</div>"}function _tokenizeToString(e,t,i){let r='<div class="monaco-tokenized-source">',s=n.uq(e),l=i.getInitialState();for(let e=0,d=s.length;e<d;e++){let d=s[e];e>0&&(r+="<br/>");let c=i.tokenizeEncoded(d,!0,l);o.A.convertToEndOffset(c.tokens,d.length);let u=new o.A(c.tokens,d,t),g=u.inflate(),m=0;for(let e=0,t=g.getCount();e<t;e++){let t=g.getClassName(e),i=g.getEndOffset(e);r+=`<span class="${t}">${n.YU(d.substring(m,i))}</span>`,m=i}l=c.endState}return r+"</div>"}},86809:function(e,t,i){"use strict";i.d(t,{F5:function(){return c},Hf:function(){return isITextSnapshot},Qi:function(){return ValidAnnotatedEditOperation},RM:function(){return u},Tx:function(){return SearchData},U:function(){return d},dJ:function(){return TextModelResolvedOptions},je:function(){return ApplyEditsResult},pt:function(){return shouldSynchronizeModel},sh:function(){return l},tk:function(){return FindMatch}});var n,o,r,s,l,d,c,u,g=i(56660);(n=l||(l={}))[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full",(o=d||(d={}))[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=3]="Right",(r=c||(c={}))[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter",(s=u||(u={}))[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None";let TextModelResolvedOptions=class TextModelResolvedOptions{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|e.tabSize),"tabSize"===e.indentSize?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|e.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&(0,g.fS)(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}};let FindMatch=class FindMatch{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}};function isITextSnapshot(e){return e&&"function"==typeof e.read}let ValidAnnotatedEditOperation=class ValidAnnotatedEditOperation{constructor(e,t,i,n,o,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=o,this._isTracked=r}};let SearchData=class SearchData{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}};let ApplyEditsResult=class ApplyEditsResult{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}};function shouldSynchronizeModel(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}},74110:function(e,t,i){"use strict";i.d(t,{BH:function(){return TextAstNode},Dm:function(){return InvalidBracketAstNode},Kd:function(){return PairAstNode},Y0:function(){return ListAstNode},n2:function(){return BracketAstNode}});var n=i(17861),o=i(77393),r=i(1511),s=i(99852);let BaseAstNode=class BaseAstNode{get length(){return this._length}constructor(e){this._length=e}};let PairAstNode=class PairAstNode extends BaseAstNode{static create(e,t,i){let n=e.length;return t&&(n=(0,r.Ii)(n,t.length)),i&&(n=(0,r.Ii)(n,i.length)),new PairAstNode(n,e,t,i,t?t.missingOpeningBracketIds:s.tS.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw Error("Invalid child index")}get children(){let e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,o){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=o}canBeReused(e){return!(null===this.closingBracket||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new PairAstNode(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation((0,r.Ii)(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}};let ListAstNode=class ListAstNode extends BaseAstNode{static create23(e,t,i,n=!1){let o=e.length,s=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw Error("Invalid list heights");if(o=(0,r.Ii)(o,t.length),s=s.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw Error("Invalid list heights");o=(0,r.Ii)(o,i.length),s=s.merge(i.missingOpeningBracketIds)}return n?new Immutable23ListAstNode(o,e.listHeight+1,e,t,i,s):new TwoThreeListAstNode(o,e.listHeight+1,e,t,i,s)}static getEmpty(){return new ImmutableArrayListAstNode(r.xl,0,[],s.tS.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(0===e)return;let t=this.getChild(e-1),i=4===t.kind?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(0===e)return;let t=this.getChild(0),i=4===t.kind?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||0===this.childrenLength)return!1;let t=this;for(;4===t.kind;){let e=t.childrenLength;if(0===e)throw new n.he;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();let e=this.childrenLength,t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){let e=this.getChild(n);t=(0,r.Ii)(t,e.length),i=i.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let e=0;e<this.childrenLength;e++){let o=this.getChild(e);o&&(i=Math.min(i,o.computeMinIndentation(n,t)),n=(0,r.Ii)(n,o.length))}return this.cachedMinIndentation=i,i}};let TwoThreeListAstNode=class TwoThreeListAstNode extends ListAstNode{get childrenLength(){return null!==this._item3?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,o,r){super(e,t,r),this._item1=i,this._item2=n,this._item3=o}deepClone(){return new TwoThreeListAstNode(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}};let Immutable23ListAstNode=class Immutable23ListAstNode extends TwoThreeListAstNode{toMutable(){return new TwoThreeListAstNode(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw Error("this instance is immutable")}};let ArrayListAstNode=class ArrayListAstNode extends ListAstNode{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){let e=Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new ArrayListAstNode(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}};let ImmutableArrayListAstNode=class ImmutableArrayListAstNode extends ArrayListAstNode{toMutable(){return new ArrayListAstNode(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw Error("this instance is immutable")}};let l=[];let ImmutableLeafAstNode=class ImmutableLeafAstNode extends BaseAstNode{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return l}deepClone(){return this}};let TextAstNode=class TextAstNode extends ImmutableLeafAstNode{get kind(){return 0}get missingOpeningBracketIds(){return s.tS.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let i=(0,r.Hw)(e),n=(0===i.columnCount?i.lineCount:i.lineCount+1)+1,s=(0,r.W9)((0,r.Ii)(e,this.length))+1,l=Number.MAX_SAFE_INTEGER;for(let e=n;e<=s;e++){let i=t.getLineFirstNonWhitespaceColumn(e),n=t.getLineContent(e);if(0===i)continue;let r=o.i.visibleColumnFromColumn(n,i,t.getOptions().tabSize);l=Math.min(l,r)}return l}};let BracketAstNode=class BracketAstNode extends ImmutableLeafAstNode{static create(e,t,i){let n=new BracketAstNode(e,t,i);return n}get kind(){return 1}get missingOpeningBracketIds(){return s.tS.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};let InvalidBracketAstNode=class InvalidBracketAstNode extends ImmutableLeafAstNode{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}},12144:function(e,t,i){"use strict";i.d(t,{Q:function(){return TextEditInfo},Y:function(){return BeforeEditPositionMapper}});var n=i(30822),o=i(1511);let TextEditInfo=class TextEditInfo{static fromModelContentChanges(e){let t=e.map(e=>{let t=n.e.lift(e.range);return new TextEditInfo((0,o.PZ)(t.getStartPosition()),(0,o.PZ)(t.getEndPosition()),(0,o.oR)(e.text))}).reverse();return t}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${(0,o.Hw)(this.startOffset)}...${(0,o.Hw)(this.endOffset)}) -> ${(0,o.Hw)(this.newLength)}`}};let BeforeEditPositionMapper=class BeforeEditPositionMapper{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(e=>TextEditInfoCache.from(e))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return null===i?null:(0,o.BE)(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?(0,o.Hg)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):(0,o.Hg)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=(0,o.Hw)(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,o.Hg)(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):(0,o.Hg)(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if((0,o.By)(i,e)){this.nextEditIdx++;let e=(0,o.Hw)(i),n=(0,o.Hw)(this.translateOldToCur(t.endOffsetBeforeObj)),r=e.lineCount-n.lineCount;this.deltaOldToNewLineCount+=r;let s=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=e.columnCount-n.columnCount;this.deltaOldToNewColumnCount=s+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}};let TextEditInfoCache=class TextEditInfoCache{static from(e){return new TextEditInfoCache(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=(0,o.Hw)(t),this.endOffsetAfterObj=(0,o.Hw)((0,o.Ii)(e,i)),this.offsetObj=(0,o.Hw)(e)}}},88590:function(e,t,i){"use strict";i.d(t,{Z:function(){return LanguageAgnosticBracketTokens}});var n=i(45837),o=i(74110),r=i(1511),s=i(99852),l=i(27402);let BracketTokens=class BracketTokens{static createFromLanguage(e,t){function getId(e){return t.getKey(`${e.languageId}:::${e.bracketText}`)}let i=new Map;for(let t of e.bracketsNew.openingBrackets){let e=(0,r.Hg)(0,t.bracketText.length),n=getId(t),d=s.tS.getEmpty().add(n,s.Qw);i.set(t.bracketText,new l.WU(e,1,n,d,o.n2.create(e,t,d)))}for(let t of e.bracketsNew.closingBrackets){let e=(0,r.Hg)(0,t.bracketText.length),n=s.tS.getEmpty(),d=t.getOpeningBrackets();for(let e of d)n=n.add(getId(e),s.Qw);i.set(t.bracketText,new l.WU(e,2,getId(d[0]),n,o.n2.create(e,t,n)))}return new BracketTokens(i)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(e=>prepareBracketForRegExp(e)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,i]of this.map)if(2===i.kind&&i.bracketIds.intersects(e))return t}get isEmpty(){return 0===this.map.size}};function prepareBracketForRegExp(e){let t=(0,n.ec)(e);return/^[\w ]+/.test(e)&&(t=`\\b${t}`),/[\w ]+$/.test(e)&&(t=`${t}\\b`),t}let LanguageAgnosticBracketTokens=class LanguageAgnosticBracketTokens{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=BracketTokens.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}},61232:function(e,t,i){"use strict";i.d(t,{o:function(){return combineTextEditInfos}});var n=i(34794),o=i(12144),r=i(1511);function combineTextEditInfos(e,t){if(0===e.length)return t;if(0===t.length)return e;let i=new n.H9(toLengthMapping(e)),s=toLengthMapping(t);s.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let l=i.dequeue();function nextS0ToS1MapWithS1LengthOf(e){if(void 0===e){let e=i.takeWhile(e=>!0)||[];return l&&e.unshift(l),e}let t=[];for(;l&&!(0,r.xd)(e);){let[n,o]=l.splitAt(e);t.push(n),e=(0,r.BE)(n.lengthAfter,e),l=null!=o?o:i.dequeue()}return(0,r.xd)(e)||t.push(new LengthMapping(!1,e,e)),t}let d=[];function pushEdit(e,t,i){if(d.length>0&&(0,r.rM)(d[d.length-1].endOffset,e)){let e=d[d.length-1];d[d.length-1]=new o.Q(e.startOffset,t,(0,r.Ii)(e.newLength,i))}else d.push({startOffset:e,endOffset:t,newLength:i})}let c=r.xl;for(let e of s){let t=nextS0ToS1MapWithS1LengthOf(e.lengthBefore);if(e.modified){let i=(0,r.tQ)(t,e=>e.lengthBefore),n=(0,r.Ii)(c,i);pushEdit(c,n,e.lengthAfter),c=n}else for(let e of t){let t=c;c=(0,r.Ii)(c,e.lengthBefore),e.modified&&pushEdit(t,c,e.lengthAfter)}}return d}let LengthMapping=class LengthMapping{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){let t=(0,r.BE)(e,this.lengthAfter);return(0,r.rM)(t,r.xl)?[this,void 0]:this.modified?[new LengthMapping(this.modified,this.lengthBefore,e),new LengthMapping(this.modified,r.xl,t)]:[new LengthMapping(this.modified,e,e),new LengthMapping(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${(0,r.Hw)(this.lengthBefore)} -> ${(0,r.Hw)(this.lengthAfter)}`}};function toLengthMapping(e){let t=[],i=r.xl;for(let n of e){let e=(0,r.BE)(i,n.startOffset);(0,r.xd)(e)||t.push(new LengthMapping(!1,e,e));let o=(0,r.BE)(n.startOffset,n.endOffset);t.push(new LengthMapping(!0,o,n.newLength)),i=n.endOffset}return t}},1511:function(e,t,i){"use strict";i.d(t,{BE:function(){return lengthDiffNonNegative},By:function(){return lengthLessThanEqual},F_:function(){return lengthGetColumnCountIfZeroLineCount},Hg:function(){return toLength},Hw:function(){return lengthToObj},Ii:function(){return lengthAdd},OE:function(){return LengthObj},PZ:function(){return positionToLength},Qw:function(){return lengthsToRange},VR:function(){return lengthLessThan},W9:function(){return lengthGetLineCount},Zq:function(){return lengthGreaterThanEqual},av:function(){return lengthDiff},oR:function(){return lengthOfString},rM:function(){return lengthEquals},tQ:function(){return sumLengths},xd:function(){return lengthIsZero},xl:function(){return r}});var n=i(45837),o=i(30822);let LengthObj=class LengthObj{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}};function lengthDiff(e,t,i,n){return e!==i?toLength(i-e,n):toLength(0,n-t)}LengthObj.zero=new LengthObj(0,0);let r=0;function lengthIsZero(e){return 0===e}function toLength(e,t){return 67108864*e+t}function lengthToObj(e){let t=Math.floor(e/67108864),i=e-67108864*t;return new LengthObj(t,i)}function lengthGetLineCount(e){return Math.floor(e/67108864)}function lengthGetColumnCountIfZeroLineCount(e){return e}function lengthAdd(e,t){let i=e+t;return t>=67108864&&(i-=e%67108864),i}function sumLengths(e,t){return e.reduce((e,i)=>lengthAdd(e,t(i)),r)}function lengthEquals(e,t){return e===t}function lengthDiffNonNegative(e,t){if(t-e<=0)return r;let i=Math.floor(e/67108864),n=Math.floor(t/67108864),o=t-67108864*n;if(i!==n)return toLength(n-i,o);{let t=e-67108864*i;return toLength(0,o-t)}}function lengthLessThan(e,t){return e<t}function lengthLessThanEqual(e,t){return e<=t}function lengthGreaterThanEqual(e,t){return e>=t}function positionToLength(e){return toLength(e.lineNumber-1,e.column-1)}function lengthsToRange(e,t){let i=Math.floor(e/67108864),n=e-67108864*i,r=Math.floor(t/67108864),s=t-67108864*r;return new o.e(i+1,n+1,r+1,s+1)}function lengthOfString(e){let t=(0,n.uq)(e);return toLength(t.length-1,t[t.length-1].length)}},41096:function(e,t,i){"use strict";i.d(t,{w:function(){return parseDocument}});var n=i(74110),o=i(12144),r=i(99852),s=i(1511);function concat23Trees(e){if(0===e.length)return null;if(1===e.length)return e[0];let t=0;function readNode(){if(t>=e.length)return null;let i=t,n=e[i].listHeight;for(t++;t<e.length&&e[t].listHeight===n;)t++;return t-i>=2?concat23TreesOfSameHeight(0===i&&t===e.length?e:e.slice(i,t),!1):e[i]}let i=readNode(),n=readNode();if(!n)return i;for(let e=readNode();e;e=readNode())heightDiff(i,n)<=heightDiff(n,e)?(i=concat(i,n),n=e):n=concat(n,e);let o=concat(i,n);return o}function concat23TreesOfSameHeight(e,t=!1){if(0===e.length)return null;if(1===e.length)return e[0];let i=e.length;for(;i>3;){let o=i>>1;for(let r=0;r<o;r++){let o=r<<1;e[r]=n.Y0.create23(e[o],e[o+1],o+3===i?e[o+2]:null,t)}i=o}return n.Y0.create23(e[0],e[1],i>=3?e[2]:null,t)}function heightDiff(e,t){return Math.abs(e.listHeight-t.listHeight)}function concat(e,t){return e.listHeight===t.listHeight?n.Y0.create23(e,t,null,!1):e.listHeight>t.listHeight?append(e,t):prepend(t,e)}function append(e,t){let i;let o=e=e.toMutable(),r=[];for(;;){if(t.listHeight===o.listHeight){i=t;break}if(4!==o.kind)throw Error("unexpected");r.push(o),o=o.makeLastElementMutable()}for(let e=r.length-1;e>=0;e--){let t=r[e];i?t.childrenLength>=3?i=n.Y0.create23(t.unappendChild(),i,null,!1):(t.appendChildOfSameHeight(i),i=void 0):t.handleChildrenChanged()}return i?n.Y0.create23(e,i,null,!1):e}function prepend(e,t){let i=e=e.toMutable(),o=[];for(;t.listHeight!==i.listHeight;){if(4!==i.kind)throw Error("unexpected");o.push(i),i=i.makeFirstElementMutable()}let r=t;for(let e=o.length-1;e>=0;e--){let t=o[e];r?t.childrenLength>=3?r=n.Y0.create23(r,t.unprependChild(),null,!1):(t.prependChildOfSameHeight(r),r=void 0):t.handleChildrenChanged()}return r?n.Y0.create23(r,e,null,!1):e}let NodeReader=class NodeReader{constructor(e){this.lastOffset=s.xl,this.nextNodes=[e],this.offsets=[s.xl],this.idxs=[]}readLongestNodeAt(e,t){if((0,s.VR)(e,this.lastOffset))throw Error("Invalid offset");for(this.lastOffset=e;;){let i=lastOrUndefined(this.nextNodes);if(!i)return;let n=lastOrUndefined(this.offsets);if((0,s.VR)(e,n))return;if((0,s.VR)(n,e)){if((0,s.Ii)(n,i.length)<=e)this.nextNodeAfterCurrent();else{let e=getNextChildIdx(i);-1!==e?(this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)):this.nextNodeAfterCurrent()}}else{if(t(i))return this.nextNodeAfterCurrent(),i;{let e=getNextChildIdx(i);if(-1===e){this.nextNodeAfterCurrent();return}this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)}}}}nextNodeAfterCurrent(){for(;;){let e=lastOrUndefined(this.offsets),t=lastOrUndefined(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;let i=lastOrUndefined(this.nextNodes),n=getNextChildIdx(i,this.idxs[this.idxs.length-1]);if(-1!==n){this.nextNodes.push(i.getChild(n)),this.offsets.push((0,s.Ii)(e,t.length)),this.idxs[this.idxs.length-1]=n;break}this.idxs.pop()}}};function getNextChildIdx(e,t=-1){for(;;){if(++t>=e.childrenLength)return -1;if(e.getChild(t))return t}}function lastOrUndefined(e){return e.length>0?e[e.length-1]:void 0}function parseDocument(e,t,i,n){let o=new Parser(e,t,i,n);return o.parseDocument()}let Parser=class Parser{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw Error("Not supported");this.oldNodeReader=i?new NodeReader(i):void 0,this.positionMapper=new o.Y(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(r.tS.getEmpty(),0);return e||(e=n.Y0.getEmpty()),e}parseList(e,t){let i=[];for(;;){let n=this.tryReadChildFromCache(e);if(!n){let i=this.tokenizer.peek();if(!i||2===i.kind&&i.bracketIds.intersects(e))break;n=this.parseChild(e,t+1)}(4!==n.kind||0!==n.childrenLength)&&i.push(n)}let n=this.oldNodeReader?concat23Trees(i):concat23TreesOfSameHeight(i,this.createImmutableLists);return n}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!(0,s.xd)(t)){let i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>{if(null!==t&&!(0,s.VR)(i.length,t))return!1;let n=i.canBeReused(e);return n});if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;let i=this.tokenizer.read();switch(i.kind){case 2:return new n.Dm(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new n.BH(i.length);let o=e.merge(i.bracketIds),r=this.parseList(o,t+1),s=this.tokenizer.peek();if(s&&2===s.kind&&(s.bracketId===i.bracketId||s.bracketIds.intersects(i.bracketIds)))return this.tokenizer.read(),n.Kd.create(i.astNode,r,s.astNode);return n.Kd.create(i.astNode,r,null)}default:throw Error("unexpected")}}}},99852:function(e,t,i){"use strict";i.d(t,{FE:function(){return DenseKeyProvider},Qw:function(){return o},tS:function(){return SmallImmutableSet}});let n=[];let SmallImmutableSet=class SmallImmutableSet{static create(e,t){if(e<=128&&0===t.length){let i=SmallImmutableSet.cache[e];return i||(i=new SmallImmutableSet(e,t),SmallImmutableSet.cache[e]=i),i}return new SmallImmutableSet(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){let i=t.getKey(e),n=i>>5;if(0===n){let e=1<<i|this.items;return e===this.items?this:SmallImmutableSet.create(e,this.additionalItems)}n--;let o=this.additionalItems.slice(0);for(;o.length<n;)o.push(0);return o[n]|=1<<(31&i),SmallImmutableSet.create(this.items,o)}merge(e){let t=this.items|e.items;if(this.additionalItems===n&&e.additionalItems===n)return t===this.items?this:t===e.items?e:SmallImmutableSet.create(t,n);let i=[];for(let t=0;t<Math.max(this.additionalItems.length,e.additionalItems.length);t++){let n=this.additionalItems[t]||0,o=e.additionalItems[t]||0;i.push(n|o)}return SmallImmutableSet.create(t,i)}intersects(e){if((this.items&e.items)!=0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!=0)return!0;return!1}};SmallImmutableSet.cache=Array(129),SmallImmutableSet.empty=SmallImmutableSet.create(0,n);let o={getKey:e=>e};let DenseKeyProvider=class DenseKeyProvider{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}}},27402:function(e,t,i){"use strict";i.d(t,{WU:function(){return Token},g:function(){return FastTokenizer},xH:function(){return TextBufferTokenizer}});var n=i(17861),o=i(91957),r=i(74110),s=i(1511),l=i(99852);let Token=class Token{constructor(e,t,i,n,o){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=o}};let TextBufferTokenizer=class TextBufferTokenizer{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new NonPeekableTextBufferTokenizer(this.textModel,this.bracketTokens),this._offset=s.xl,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,s.Hg)(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=(0,s.Ii)(this._offset,e);let t=(0,s.Hw)(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=(0,s.Ii)(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}};let NonPeekableTextBufferTokenizer=class NonPeekableTextBufferTokenizer{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,s.F_)(e.length),e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,i=0;for(;;){let n=this.lineTokens,r=n.getCount(),l=null;if(this.lineTokenOffset<r){let d=n.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&d===n.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let c=0===o.N.getTokenType(d),u=o.N.containsBalancedBrackets(d),g=n.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<g){let e=n.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,g),i=this.bracketTokens.getSingleLanguageBracketTokens(e),o=i.regExpGlobal;if(o){o.lastIndex=0;let e=o.exec(t);e&&(l=i.getToken(e[0]))&&(this.lineCharOffset+=e.index)}}if(i+=g-this.lineCharOffset,l){if(e===this.lineIdx&&t===this.lineCharOffset)return this.lineCharOffset+=(0,s.F_)(l.length),l;this.peekedToken=l;break}this.lineTokenOffset++,this.lineCharOffset=g}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,(i+=33)>1e3))break;if(i>1500)break}let n=(0,s.av)(e,t,this.lineIdx,this.lineCharOffset);return new Token(n,0,-1,l.tS.getEmpty(),new r.BH(n))}};let FastTokenizer=class FastTokenizer{constructor(e,t){let i;this.text=e,this._offset=s.xl,this.idx=0;let n=t.getRegExpStr(),o=n?RegExp(n+"|\n","gi"):null,d=[],c=0,u=0,g=0,m=0,f=[];for(let e=0;e<60;e++)f.push(new Token((0,s.Hg)(0,e),0,-1,l.tS.getEmpty(),new r.BH((0,s.Hg)(0,e))));let _=[];for(let e=0;e<60;e++)_.push(new Token((0,s.Hg)(1,e),0,-1,l.tS.getEmpty(),new r.BH((0,s.Hg)(1,e))));if(o)for(o.lastIndex=0;null!==(i=o.exec(e));){let e=i.index,n=i[0];if("\n"===n)c++,u=e+1;else{if(g!==e){let t;if(m===c){let i=e-g;if(i<f.length)t=f[i];else{let e=(0,s.Hg)(0,i);t=new Token(e,0,-1,l.tS.getEmpty(),new r.BH(e))}}else{let i=c-m,n=e-u;if(1===i&&n<_.length)t=_[n];else{let e=(0,s.Hg)(i,n);t=new Token(e,0,-1,l.tS.getEmpty(),new r.BH(e))}}d.push(t)}d.push(t.getToken(n)),g=e+n.length,m=c}}let v=e.length;if(g!==v){let e=m===c?(0,s.Hg)(0,v-g):(0,s.Hg)(c-m,v-u);d.push(new Token(e,0,-1,l.tS.getEmpty(),new r.BH(e)))}this.length=(0,s.Hg)(c,v-u),this.tokens=d}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new n.B8}}},74918:function(e,t,i){"use strict";i.d(t,{NL:function(){return EditStack},e9:function(){return isEditStackElement}});var n=i(46157),o=i(17861),r=i(45841),s=i(31568),l=i(28862),d=i(73126),c=i(67590);function uriGetComparisonKey(e){return e.toString()}let SingleModelEditStackData=class SingleModelEditStackData{static create(e,t){let i=e.getAlternativeVersionId(),n=getModelEOL(e);return new SingleModelEditStackData(i,i,n,n,t,t,[])}constructor(e,t,i,n,o,r,s){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=o,this.afterCursorState=r,this.changes=s}append(e,t,i,n,o){t.length>0&&(this.changes=(0,l.b)(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,i){if(d.T4(e,t?t.length:0,i),i+=4,t)for(let n of t)d.T4(e,n.selectionStartLineNumber,i),i+=4,d.T4(e,n.selectionStartColumn,i),i+=4,d.T4(e,n.positionLineNumber,i),i+=4,d.T4(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){let n=d.Ag(e,t);t+=4;for(let o=0;o<n;o++){let n=d.Ag(e,t);t+=4;let o=d.Ag(e,t);t+=4;let s=d.Ag(e,t);t+=4;let l=d.Ag(e,t);t+=4,i.push(new r.Y(n,o,s,l))}return t}serialize(){let e=10+SingleModelEditStackData._writeSelectionsSize(this.beforeCursorState)+SingleModelEditStackData._writeSelectionsSize(this.afterCursorState)+4;for(let t of this.changes)e+=t.writeSize();let t=new Uint8Array(e),i=0;for(let e of(d.T4(t,this.beforeVersionId,i),i+=4,d.T4(t,this.afterVersionId,i),i+=4,d.Cg(t,this.beforeEOL,i),i+=1,d.Cg(t,this.afterEOL,i),i+=1,i=SingleModelEditStackData._writeSelections(t,this.beforeCursorState,i),i=SingleModelEditStackData._writeSelections(t,this.afterCursorState,i),d.T4(t,this.changes.length,i),i+=4,this.changes))i=e.write(t,i);return t.buffer}static deserialize(e){let t=new Uint8Array(e),i=0,n=d.Ag(t,i);i+=4;let o=d.Ag(t,i);i+=4;let r=d.Q$(t,i);i+=1;let s=d.Q$(t,i);i+=1;let c=[];i=SingleModelEditStackData._readSelections(t,i,c);let u=[];i=SingleModelEditStackData._readSelections(t,i,u);let g=d.Ag(t,i);i+=4;let m=[];for(let e=0;e<g;e++)i=l.q.read(t,i,m);return new SingleModelEditStackData(n,o,r,s,c,u,m)}};let SingleModelEditStackElement=class SingleModelEditStackElement{get type(){return 0}get resource(){return s.o.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=SingleModelEditStackData.create(i,n)}toString(){let e=this._data instanceof SingleModelEditStackData?this._data:SingleModelEditStackData.deserialize(this._data);return e.changes.map(e=>e.toString()).join(", ")}matchesResource(e){let t=s.o.isUri(this.model)?this.model:this.model.uri;return t.toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof SingleModelEditStackData}append(e,t,i,n,o){this._data instanceof SingleModelEditStackData&&this._data.append(e,t,i,n,o)}close(){this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize())}open(){this._data instanceof SingleModelEditStackData||(this._data=SingleModelEditStackData.deserialize(this._data))}undo(){if(s.o.isUri(this.model))throw Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());let e=SingleModelEditStackData.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(s.o.isUri(this.model))throw Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());let e=SingleModelEditStackData.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize()),this._data.byteLength+168}};let MultiModelEditStackElement=class MultiModelEditStackElement{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){for(let n of(this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map,this._editStackElementsArr)){let e=uriGetComparisonKey(n.resource);this._editStackElementsMap.set(e,n)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){let t=uriGetComparisonKey(e);return this._editStackElementsMap.has(t)}setModel(e){let t=uriGetComparisonKey(s.o.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=uriGetComparisonKey(e.uri);if(this._editStackElementsMap.has(t)){let i=this._editStackElementsMap.get(t);return i.canAppend(e)}return!1}append(e,t,i,n,o){let r=uriGetComparisonKey(e.uri),s=this._editStackElementsMap.get(r);s.append(e,t,i,n,o)}close(){this._isOpen=!1}open(){}undo(){for(let e of(this._isOpen=!1,this._editStackElementsArr))e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=uriGetComparisonKey(e);if(this._editStackElementsMap.has(t)){let e=this._editStackElementsMap.get(t);return e.heapSize()}return 0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${(0,c.EZ)(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function getModelEOL(e){let t=e.getEOL();return"\n"===t?0:1}function isEditStackElement(e){return!!e&&(e instanceof SingleModelEditStackElement||e instanceof MultiModelEditStackElement)}let EditStack=class EditStack{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let i=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(i)&&i.canAppend(this._model))return i;let o=new SingleModelEditStackElement(n.NC("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(o,t),o}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],getModelEOL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n){let o=this._getOrCreateEditStackElement(e,n),r=this._model.applyEdits(t,!0),s=EditStack._computeCursorState(i,r),l=r.map((e,t)=>({index:t,textChange:e.textChange}));return l.sort((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition),o.append(this._model,l.map(e=>e.textChange),getModelEOL(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return(0,o.dL)(e),null}}}},21378:function(e,t,i){"use strict";i.d(t,{W:function(){return BracketPairGuidesClassNames},l:function(){return GuidesTextModelPart}});var n=i(34850),o=i(45837),r=i(77393),s=i(30822),l=i(97311),d=i(23839),c=i(66850),u=i(17861);let GuidesTextModelPart=class GuidesTextModelPart extends l.U{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return(0,d.q)(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();let n=this.textModel.getLineCount();if(e<1||e>n)throw new u.he("Illegal value for lineNumber");let o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),s=-2,l=-1,d=-2,c=-1,up_resolveIndents=e=>{if(-1!==s&&(-2===s||s>e-1)){s=-1,l=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){s=t,l=e;break}}}if(-2===d){d=-1,c=-1;for(let t=e;t<n;t++){let e=this._computeIndentLevel(t);if(e>=0){d=t,c=e;break}}}},g=-2,m=-1,f=-2,_=-1,down_resolveIndents=e=>{if(-2===g){g=-1,m=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){g=t,m=e;break}}}if(-1!==f&&(-2===f||f<e-1)){f=-1,_=-1;for(let t=e;t<n;t++){let e=this._computeIndentLevel(t);if(e>=0){f=t,_=e;break}}}},v=0,C=!0,b=0,S=!0,y=0,w=0;for(let o=0;C||S;o++){let s=e-o,u=e+o;o>1&&(s<1||s<t)&&(C=!1),o>1&&(u>n||u>i)&&(S=!1),o>5e4&&(C=!1,S=!1);let f=-1;if(C&&s>=1){let e=this._computeIndentLevel(s-1);e>=0?(d=s-1,c=e,f=Math.ceil(e/this.textModel.getOptions().indentSize)):(up_resolveIndents(s),f=this._getIndentLevelForWhitespaceLine(r,l,c))}let L=-1;if(S&&u<=n){let e=this._computeIndentLevel(u-1);e>=0?(g=u-1,m=e,L=Math.ceil(e/this.textModel.getOptions().indentSize)):(down_resolveIndents(u),L=this._getIndentLevelForWhitespaceLine(r,m,_))}if(0===o){w=f;continue}if(1===o){if(u<=n&&L>=0&&w+1===L){C=!1,v=u,b=u,y=L;continue}if(s>=1&&f>=0&&f-1===w){S=!1,v=s,b=s,y=f;continue}if(v=e,b=e,0===(y=w))break}C&&(f>=y?v=s:C=!1),S&&(L>=y?b=u:S=!1)}return{startLineNumber:v,endLineNumber:b,indent:y}}getLinesBracketGuides(e,t,i,r){var l;let d;let u=[];for(let i=e;i<=t;i++)u.push([]);let g=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new s.e(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();if(i&&g.length>0){let o=(e<=i.lineNumber&&i.lineNumber<=t?g:this.textModel.bracketPairs.getBracketPairsInRange(s.e.fromPositions(i)).toArray()).filter(e=>s.e.strictContainsPosition(e.range,i));d=null===(l=(0,n.dF)(o,e=>!0))||void 0===l?void 0:l.range}let m=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,f=new BracketPairGuidesClassNames;for(let i of g){if(!i.closingBracketRange)continue;let n=d&&i.range.equalsRange(d);if(!n&&!r.includeInactive)continue;let s=f.getInlineClassName(i.nestingLevel,i.nestingLevelOfEqualBracketType,m)+(r.highlightActive&&n?" "+f.activeClassName:""),l=i.openingBracketRange.getStartPosition(),g=i.closingBracketRange.getStartPosition(),_=r.horizontalGuides===c.s6.Enabled||r.horizontalGuides===c.s6.EnabledForActive&&n;if(i.range.startLineNumber===i.range.endLineNumber){_&&u[i.range.startLineNumber-e].push(new c.UO(-1,i.openingBracketRange.getEndPosition().column,s,new c.vW(!1,g.column),-1,-1));continue}let v=this.getVisibleColumnFromPosition(g),C=this.getVisibleColumnFromPosition(i.openingBracketRange.getStartPosition()),b=Math.min(C,v,i.minVisibleColumnIndentation+1),S=!1,y=o.LC(this.textModel.getLineContent(i.closingBracketRange.startLineNumber)),w=y<i.closingBracketRange.startColumn-1;w&&(S=!0);let L=Math.max(l.lineNumber,e),k=Math.min(g.lineNumber,t),D=S?1:0;for(let t=L;t<k+D;t++)u[t-e].push(new c.UO(b,-1,s,null,t===l.lineNumber?l.column:-1,t===g.lineNumber?g.column:-1));_&&(l.lineNumber>=e&&C>b&&u[l.lineNumber-e].push(new c.UO(b,-1,s,new c.vW(!1,l.column),-1,-1)),g.lineNumber<=t&&v>b&&u[g.lineNumber-e].push(new c.UO(b,-1,s,new c.vW(!S,g.column),-1,-1)))}for(let e of u)e.sort((e,t)=>e.visibleColumn-t.visibleColumn);return u}getVisibleColumnFromPosition(e){return r.i.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();let i=this.textModel.getLineCount();if(e<1||e>i)throw Error("Illegal value for startLineNumber");if(t<1||t>i)throw Error("Illegal value for endLineNumber");let n=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),s=Array(t-e+1),l=-2,d=-1,c=-2,u=-1;for(let o=e;o<=t;o++){let t=o-e,g=this._computeIndentLevel(o-1);if(g>=0){l=o-1,d=g,s[t]=Math.ceil(g/n.indentSize);continue}if(-2===l){l=-1,d=-1;for(let e=o-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){l=e,d=t;break}}}if(-1!==c&&(-2===c||c<o-1)){c=-1,u=-1;for(let e=o;e<i;e++){let t=this._computeIndentLevel(e);if(t>=0){c=e,u=t;break}}}s[t]=this._getIndentLevelForWhitespaceLine(r,d,u)}return s}_getIndentLevelForWhitespaceLine(e,t,i){let n=this.textModel.getOptions();return -1===t||-1===i?0:t<i?1+Math.floor(t/n.indentSize):t===i?Math.ceil(i/n.indentSize):e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}};let BracketPairGuidesClassNames=class BracketPairGuidesClassNames{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}},53500:function(e,t,i){"use strict";i.d(t,{Ck:function(){return ConstantTimePrefixSumComputer},oQ:function(){return PrefixSumComputer}});var n=i(34794),o=i(30800);let PrefixSumComputer=class PrefixSumComputer{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=(0,o.A)(e);let i=this.values,n=this.prefixSum,r=t.length;return 0!==r&&(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=(0,o.A)(e),t=(0,o.A)(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=(0,o.A)(e),t=(0,o.A)(t);let i=this.values,n=this.prefixSum;if(e>=i.length)return!1;let r=i.length-e;return t>=r&&(t=r),0!==t&&(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=(0,o.A)(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,o=0,r=0;for(;t<=i;)if(n=t+(i-t)/2|0,r=(o=this.prefixSum[n])-this.values[n],e<r)i=n-1;else if(e>=o)t=n+1;else break;return new PrefixSumIndexOfResult(n,e-r)}};let ConstantTimePrefixSumComputer=class ConstantTimePrefixSumComputer{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return(this._ensureValid(),0===e)?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();let t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new PrefixSumIndexOfResult(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=(0,n.Zv)(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){let t=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+t;for(let n=0;n<t;n++)this._indexBySum[i+n]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}};let PrefixSumIndexOfResult=class PrefixSumIndexOfResult{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}},26792:function(e,t,i){"use strict";i.d(t,{HS:function(){return ModelDecorationInjectedTextOptions},qx:function(){return ModelDecorationOptions},yO:function(){return ei}});var n,o=i(34794),r=i(50164),s=i(17861),l=i(57605),d=i(87932),c=i(45837),u=i(31568),g=i(98883),m=i(99129),f=i(4261),_=i(11953),v=i(30822),C=i(45841),b=i(49655),S=i(84634),y=i(68903),w=i(86809),L=i(40523),k=i(15477);let BracketInfo=class BracketInfo{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}};let BracketPairInfo=class BracketPairInfo{constructor(e,t,i,n,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}};let BracketPairWithMinIndentationInfo=class BracketPairWithMinIndentationInfo extends BracketPairInfo{constructor(e,t,i,n,o,r,s){super(e,t,i,n,o,r),this.minVisibleColumnIndentation=s}};var D=i(12144),x=i(88590),N=i(1511),E=i(41096),I=i(99852),T=i(27402),M=i(61232);let BracketPairsTree=class BracketPairsTree extends d.JT{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new l.Q5,this.denseKeyProvider=new I.FE,this.brackets=new x.Z(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)2===e.tokenization.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),t=new T.g(this.textModel.getValue(),e);this.initialAstWithoutTokens=(0,E.w)(t,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.tokenization.backgroundTokenizationState){let e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){let t=e.map(e=>new D.Q((0,N.Hg)(e.fromLineNumber-1,0),(0,N.Hg)(e.toLineNumber,0),(0,N.Hg)(e.toLineNumber-e.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){let t=D.Q.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){let i=(0,M.o)(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=(0,M.o)(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){let n=new T.xH(this.textModel,this.brackets),o=(0,E.w)(n,e,t,i);return o}getBracketsInRange(e,t){this.flushQueue();let i=(0,N.Hg)(e.startLineNumber-1,e.startColumn-1),n=(0,N.Hg)(e.endLineNumber-1,e.endColumn-1);return new o.W$(e=>{let o=this.initialAstWithoutTokens||this.astWithTokens;collectBrackets(o,N.xl,o.length,i,n,e,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();let i=(0,N.PZ)(e.getStartPosition()),n=(0,N.PZ)(e.getEndPosition());return new o.W$(e=>{let o=this.initialAstWithoutTokens||this.astWithTokens,r=new CollectBracketPairsContext(e,t,this.textModel);collectBracketPairs(o,N.xl,o.length,i,n,r,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();let t=this.initialAstWithoutTokens||this.astWithTokens;return getFirstBracketAfter(t,N.xl,t.length,(0,N.PZ)(e))}getFirstBracketBefore(e){this.flushQueue();let t=this.initialAstWithoutTokens||this.astWithTokens;return getFirstBracketBefore(t,N.xl,t.length,(0,N.PZ)(e))}};function getFirstBracketBefore(e,t,i,n){if(4===e.kind||2===e.kind){let o=[];for(let n of e.children)i=(0,N.Ii)(t,n.length),o.push({nodeOffsetStart:t,nodeOffsetEnd:i}),t=i;for(let t=o.length-1;t>=0;t--){let{nodeOffsetStart:i,nodeOffsetEnd:r}=o[t];if((0,N.VR)(i,n)){let o=getFirstBracketBefore(e.children[t],i,r,n);if(o)return o}}}else if(3===e.kind);else if(1===e.kind){let n=(0,N.Qw)(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function getFirstBracketAfter(e,t,i,n){if(4===e.kind||2===e.kind)for(let o of e.children){if(i=(0,N.Ii)(t,o.length),(0,N.VR)(n,i)){let e=getFirstBracketAfter(o,t,i,n);if(e)return e}t=i}else if(3===e.kind);else if(1===e.kind){let n=(0,N.Qw)(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function collectBrackets(e,t,i,n,o,r,s,l,d,c,u=!1){if(s>200)return!0;i:for(;;)switch(e.kind){case 4:{let l=e.childrenLength;for(let u=0;u<l;u++){let l=e.getChild(u);if(l){if(i=(0,N.Ii)(t,l.length),(0,N.By)(t,o)&&(0,N.Zq)(i,n)){let u=(0,N.Zq)(i,o);if(u){e=l;continue i}let g=collectBrackets(l,t,i,n,o,r,s,0,d,c);if(!g)return!1}t=i}}return!0}case 2:{let u=!c||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo),g=0;if(d){let t=d.get(e.openingBracket.text);void 0===t&&(t=0),g=t,u&&(t++,d.set(e.openingBracket.text,t))}let m=e.childrenLength;for(let f=0;f<m;f++){let m=e.getChild(f);if(m){if(i=(0,N.Ii)(t,m.length),(0,N.By)(t,o)&&(0,N.Zq)(i,n)){let f=(0,N.Zq)(i,o);if(f&&1!==m.kind){e=m,u?(s++,l=g+1):l=g;continue i}if(u||1!==m.kind||!e.closingBracket){let l=collectBrackets(m,t,i,n,o,r,u?s+1:s,u?g+1:g,d,c,!e.closingBracket);if(!l)return!1}}t=i}}return null==d||d.set(e.openingBracket.text,g),!0}case 3:{let e=(0,N.Qw)(t,i);return r(new BracketInfo(e,s-1,0,!0))}case 1:{let e=(0,N.Qw)(t,i);return r(new BracketInfo(e,s-1,l-1,u))}case 0:return!0}}let CollectBracketPairsContext=class CollectBracketPairsContext{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}};function collectBracketPairs(e,t,i,n,o,r,s,l){var d;if(s>200)return!0;let c=!0;if(2===e.kind){let u=0;if(l){let t=l.get(e.openingBracket.text);void 0===t&&(t=0),u=t,t++,l.set(e.openingBracket.text,t)}let g=(0,N.Ii)(t,e.openingBracket.length),m=-1;if(r.includeMinIndentation&&(m=e.computeMinIndentation(t,r.textModel)),c=r.push(new BracketPairWithMinIndentationInfo((0,N.Qw)(t,i),(0,N.Qw)(t,g),e.closingBracket?(0,N.Qw)((0,N.Ii)(g,(null===(d=e.child)||void 0===d?void 0:d.length)||N.xl),i):void 0,s,u,e,m)),t=g,c&&e.child){let d=e.child;if(i=(0,N.Ii)(t,d.length),(0,N.By)(t,o)&&(0,N.Zq)(i,n)&&!(c=collectBracketPairs(d,t,i,n,o,r,s+1,l)))return!1}null==l||l.set(e.openingBracket.text,u)}else{let i=t;for(let t of e.children){let e=i;if(i=(0,N.Ii)(i,t.length),(0,N.By)(e,o)&&(0,N.By)(n,i)&&!(c=collectBracketPairs(t,e,i,n,o,r,s,l)))return!1}}return c}let BracketPairsTextModelPart=class BracketPairsTextModelPart extends d.JT{get canBuildAST(){return 5e6>=this.textModel.getValueLength()}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new d.XK),this.onDidChangeEmitter=new l.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(e=>{var t;(!e.languageId||(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.didLanguageChange(e.languageId)))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let e=new d.SL;this.bracketPairsTree.value=createDisposableRef(e.add(new BracketPairsTree(this.textModel,e=>this.languageConfigurationService.getLanguageConfiguration(e))),e),e.add(this.bracketPairsTree.value.object.onDidChange(e=>this.onDidChangeEmitter.fire(e))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!1))||o.W$.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!0))||o.W$.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(i=this.bracketPairsTree.value)||void 0===i?void 0:i.object.getBracketsInRange(e,t))||o.W$.empty}findMatchingBracketUp(e,t,i){let n=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){let i=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!i)return null;let n=this.getBracketPairsInRange(v.e.fromPositions(t,t)).findLast(e=>i.closes(e.openingBracketInfo));return n?n.openingBracketRange:null}{let t=e.toLowerCase(),r=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!r)return null;let s=r.textIsBracket[t];return s?stripBracketSearchCanceled(this._findMatchingBracketUp(s,n,createTimeBasedContinueBracketSearchPredicate(i))):null}}matchBracket(e,t){if(this.canBuildAST){let t=this.getBracketPairsInRange(v.e.fromPositions(e,e)).filter(t=>void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e))).findLastMaxBy((0,o.tT)(t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange,v.e.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}{let i=createTimeBasedContinueBracketSearchPredicate(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){let o=t.getCount(),r=t.getLanguageId(n),s=Math.max(0,e.column-1-i.maxBracketLength);for(let e=n-1;e>=0;e--){let i=t.getEndOffset(e);if(i<=s)break;if((0,L.Bu)(t.getStandardTokenType(e))||t.getLanguageId(e)!==r){s=i;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let e=n+1;e<o;e++){let i=t.getStartOffset(e);if(i>=l)break;if((0,L.Bu)(t.getStandardTokenType(e))||t.getLanguageId(e)!==r){l=i;break}}return{searchStartOffset:s,searchEndOffset:l}}_matchBracket(e,t){let i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),o=this.textModel.getLineContent(i),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;let s=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(s&&!(0,L.Bu)(n.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:d}=this._establishBracketSearchOffsets(e,n,s,r),c=null;for(;;){let n=k.Vr.findNextBracketInRange(s.forwardRegex,i,o,l,d);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){let e=o.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),i=this._matchFoundBracket(n,s.textIsBracket[e],s.textIsOpenBracket[e],t);if(i){if(i instanceof BracketSearchCanceled)return null;c=i}}l=n.endColumn-1}if(c)return c}if(r>0&&n.getStartOffset(r)===e.column-1){let s=r-1,l=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(s)).brackets;if(l&&!(0,L.Bu)(n.getStandardTokenType(s))){let{searchStartOffset:r,searchEndOffset:d}=this._establishBracketSearchOffsets(e,n,l,s),c=k.Vr.findPrevBracketInRange(l.reversedRegex,i,o,r,d);if(c&&c.startColumn<=e.column&&e.column<=c.endColumn){let e=o.substring(c.startColumn-1,c.endColumn-1).toLowerCase(),i=this._matchFoundBracket(c,l.textIsBracket[e],l.textIsOpenBracket[e],t);if(i)return i instanceof BracketSearchCanceled?null:i}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;let o=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return o?o instanceof BracketSearchCanceled?o:[e,o]:null}_findMatchingBracketUp(e,t,i){let n=e.languageId,o=e.reversedRegex,r=-1,s=0,searchPrevMatchingBracketInRange=(t,n,l,d)=>{for(;;){if(i&&++s%100==0&&!i())return BracketSearchCanceled.INSTANCE;let c=k.Vr.findPrevBracketInRange(o,t,n,l,d);if(!c)break;let u=n.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return c;d=c.startColumn-1}return null};for(let e=t.lineNumber;e>=1;e--){let i=this.textModel.tokenization.getLineTokens(e),o=i.getCount(),r=this.textModel.getLineContent(e),s=o-1,l=r.length,d=r.length;e===t.lineNumber&&(s=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,d=t.column-1);let c=!0;for(;s>=0;s--){let t=i.getLanguageId(s)===n&&!(0,L.Bu)(i.getStandardTokenType(s));if(t)c?l=i.getStartOffset(s):(l=i.getStartOffset(s),d=i.getEndOffset(s));else if(c&&l!==d){let t=searchPrevMatchingBracketInRange(e,r,l,d);if(t)return t}c=t}if(c&&l!==d){let t=searchPrevMatchingBracketInRange(e,r,l,d);if(t)return t}}return null}_findMatchingBracketDown(e,t,i){let n=e.languageId,o=e.forwardRegex,r=1,s=0,searchNextMatchingBracketInRange=(t,n,l,d)=>{for(;;){if(i&&++s%100==0&&!i())return BracketSearchCanceled.INSTANCE;let c=k.Vr.findNextBracketInRange(o,t,n,l,d);if(!c)break;let u=n.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return c;l=c.endColumn-1}return null},l=this.textModel.getLineCount();for(let e=t.lineNumber;e<=l;e++){let i=this.textModel.tokenization.getLineTokens(e),o=i.getCount(),r=this.textModel.getLineContent(e),s=0,l=0,d=0;e===t.lineNumber&&(s=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,d=t.column-1);let c=!0;for(;s<o;s++){let t=i.getLanguageId(s)===n&&!(0,L.Bu)(i.getStandardTokenType(s));if(t)c||(l=i.getStartOffset(s)),d=i.getEndOffset(s);else if(c&&l!==d){let t=searchNextMatchingBracketInRange(e,r,l,d);if(t)return t}c=t}if(c&&l!==d){let t=searchNextMatchingBracketInRange(e,r,l,d);if(t)return t}}return null}findPrevBracket(e){var t;let i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketBefore(i))||null;let n=null,o=null,r=null;for(let e=i.lineNumber;e>=1;e--){let t=this.textModel.tokenization.getLineTokens(e),s=t.getCount(),l=this.textModel.getLineContent(e),d=s-1,c=l.length,u=l.length;if(e===i.lineNumber){d=t.findTokenIndexAtOffset(i.column-1),c=i.column-1,u=i.column-1;let e=t.getLanguageId(d);n!==e&&(n=e,o=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let g=!0;for(;d>=0;d--){let i=t.getLanguageId(d);if(n!==i){if(o&&r&&g&&c!==u){let t=k.Vr.findPrevBracketInRange(o.reversedRegex,e,l,c,u);if(t)return this._toFoundBracket(r,t);g=!1}n=i,o=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}let s=!!o&&!(0,L.Bu)(t.getStandardTokenType(d));if(s)g?c=t.getStartOffset(d):(c=t.getStartOffset(d),u=t.getEndOffset(d));else if(r&&o&&g&&c!==u){let t=k.Vr.findPrevBracketInRange(o.reversedRegex,e,l,c,u);if(t)return this._toFoundBracket(r,t)}g=s}if(r&&o&&g&&c!==u){let t=k.Vr.findPrevBracketInRange(o.reversedRegex,e,l,c,u);if(t)return this._toFoundBracket(r,t)}}return null}findNextBracket(e){var t;let i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketAfter(i))||null;let n=this.textModel.getLineCount(),o=null,r=null,s=null;for(let e=i.lineNumber;e<=n;e++){let t=this.textModel.tokenization.getLineTokens(e),n=t.getCount(),l=this.textModel.getLineContent(e),d=0,c=0,u=0;if(e===i.lineNumber){d=t.findTokenIndexAtOffset(i.column-1),c=i.column-1,u=i.column-1;let e=t.getLanguageId(d);o!==e&&(o=e,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,s=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let g=!0;for(;d<n;d++){let i=t.getLanguageId(d);if(o!==i){if(s&&r&&g&&c!==u){let t=k.Vr.findNextBracketInRange(r.forwardRegex,e,l,c,u);if(t)return this._toFoundBracket(s,t);g=!1}o=i,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,s=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}let n=!!r&&!(0,L.Bu)(t.getStandardTokenType(d));if(n)g||(c=t.getStartOffset(d)),u=t.getEndOffset(d);else if(s&&r&&g&&c!==u){let t=k.Vr.findNextBracketInRange(r.forwardRegex,e,l,c,u);if(t)return this._toFoundBracket(s,t)}g=n}if(s&&r&&g&&c!==u){let t=k.Vr.findNextBracketInRange(r.forwardRegex,e,l,c,u);if(t)return this._toFoundBracket(s,t)}}return null}findEnclosingBrackets(e,t){let i=this.textModel.validatePosition(e);if(this.canBuildAST){let e=v.e.fromPositions(i),t=this.getBracketPairsInRange(v.e.fromPositions(i,i)).findLast(t=>void 0!==t.closingBracketRange&&t.range.strictContainsRange(e));return t?[t.openingBracketRange,t.closingBracketRange]:null}let n=createTimeBasedContinueBracketSearchPredicate(t),o=this.textModel.getLineCount(),r=new Map,s=[],resetCounts=(e,t)=>{if(!r.has(e)){let i=[];for(let e=0,n=t?t.brackets.length:0;e<n;e++)i[e]=0;r.set(e,i)}s=r.get(e)},l=0,searchInRange=(e,t,i,o,r)=>{for(;;){if(n&&++l%100==0&&!n())return BracketSearchCanceled.INSTANCE;let d=k.Vr.findNextBracketInRange(e.forwardRegex,t,i,o,r);if(!d)break;let c=i.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),u=e.textIsBracket[c];if(u&&(u.isOpen(c)?s[u.index]++:u.isClose(c)&&s[u.index]--,-1===s[u.index]))return this._matchFoundBracket(d,u,!1,n);o=d.endColumn-1}return null},d=null,c=null;for(let e=i.lineNumber;e<=o;e++){let t=this.textModel.tokenization.getLineTokens(e),n=t.getCount(),o=this.textModel.getLineContent(e),r=0,s=0,l=0;if(e===i.lineNumber){r=t.findTokenIndexAtOffset(i.column-1),s=i.column-1,l=i.column-1;let e=t.getLanguageId(r);d!==e&&(d=e,c=this.languageConfigurationService.getLanguageConfiguration(d).brackets,resetCounts(d,c))}let u=!0;for(;r<n;r++){let i=t.getLanguageId(r);if(d!==i){if(c&&u&&s!==l){let t=searchInRange(c,e,o,s,l);if(t)return stripBracketSearchCanceled(t);u=!1}d=i,c=this.languageConfigurationService.getLanguageConfiguration(d).brackets,resetCounts(d,c)}let n=!!c&&!(0,L.Bu)(t.getStandardTokenType(r));if(n)u||(s=t.getStartOffset(r)),l=t.getEndOffset(r);else if(c&&u&&s!==l){let t=searchInRange(c,e,o,s,l);if(t)return stripBracketSearchCanceled(t)}u=n}if(c&&u&&s!==l){let t=searchInRange(c,e,o,s,l);if(t)return stripBracketSearchCanceled(t)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();let n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}};function createDisposableRef(e,t){return{object:e,dispose:()=>null==t?void 0:t.dispose()}}function createTimeBasedContinueBracketSearchPredicate(e){if(void 0===e)return()=>!0;{let t=Date.now();return()=>Date.now()-t<=e}}let BracketSearchCanceled=class BracketSearchCanceled{constructor(){this._searchCanceledBrand=void 0}};function stripBracketSearchCanceled(e){return e instanceof BracketSearchCanceled?null:e}BracketSearchCanceled.INSTANCE=new BracketSearchCanceled;var R=i(1173),A=i(93672);let ColorizedBracketPairsDecorationProvider=class ColorizedBracketPairsDecorationProvider extends d.JT{constructor(e){super(),this.textModel=e,this.colorProvider=new ColorProvider,this.onDidChangeEmitter=new l.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(e=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){if(n||void 0===t||!this.colorizationOptions.enabled)return[];let o=this.textModel.bracketPairs.getBracketsInRange(e,!0).map(e=>({id:`bracket${e.range.toString()}-${e.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range})).toArray();return o}getAllDecorations(e,t){return void 0!==e&&this.colorizationOptions.enabled?this.getDecorationsInRange(new v.e(1,1,this.textModel.getLineCount(),1),e,t):[]}};let ColorProvider=class ColorProvider{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};(0,A.Ic)((e,t)=>{let i=[R.zJ,R.Vs,R.CE,R.UP,R.r0,R.m1],n=new ColorProvider;t.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${e.getColor(R.ts)}; }`);let o=i.map(t=>e.getColor(t)).filter(e=>!!e).filter(e=>!e.isTransparent());for(let e=0;e<30;e++){let i=o[e%o.length];t.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(e)} { color: ${i}; }`)}});var P=i(74918),O=i(21378);let SpacesDiffResult=class SpacesDiffResult{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function spacesDiff(e,t,i,n,o){let r;for(r=0,o.spacesDiff=0,o.looksLikeAlignment=!1;r<t&&r<n;r++){let t=e.charCodeAt(r),n=i.charCodeAt(r);if(t!==n)break}let s=0,l=0;for(let i=r;i<t;i++){let t=e.charCodeAt(i);32===t?s++:l++}let d=0,c=0;for(let e=r;e<n;e++){let t=i.charCodeAt(e);32===t?d++:c++}if(s>0&&l>0||d>0&&c>0)return;let u=Math.abs(l-c),g=Math.abs(s-d);if(0===u){o.spacesDiff=g,g>0&&0<=d-1&&d-1<e.length&&d<i.length&&32!==i.charCodeAt(d)&&32===e.charCodeAt(d-1)&&44===e.charCodeAt(e.length-1)&&(o.looksLikeAlignment=!0);return}if(g%u==0){o.spacesDiff=g/u;return}}function guessIndentation(e,t,i){let n=Math.min(e.getLineCount(),1e4),o=0,r=0,s="",l=0,d=[0,0,0,0,0,0,0,0,0],c=new SpacesDiffResult;for(let u=1;u<=n;u++){let n=e.getLineLength(u),g=e.getLineContent(u),m=n<=65536,f=!1,_=0,v=0,C=0;for(let t=0;t<n;t++){let i=m?g.charCodeAt(t):e.getLineCharCode(u,t);if(9===i)C++;else if(32===i)v++;else{f=!0,_=t;break}}if(!f||(C>0?o++:v>1&&r++,spacesDiff(s,l,g,_,c),c.looksLikeAlignment&&!(i&&t===c.spacesDiff)))continue;let b=c.spacesDiff;b<=8&&d[b]++,s=g,l=_}let u=i;o!==r&&(u=o<r);let g=t;if(u){let e=u?0:.1*n;[2,4,6,8,3,5,7].forEach(t=>{let i=d[t];i>e&&(e=i,g=t)}),4===g&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(g=2)}return{insertSpaces:u,tabSize:g}}function getNodeColor(e){return(1&e.metadata)>>>0}function setNodeColor(e,t){e.metadata=254&e.metadata|t<<0}function getNodeIsVisited(e){return(2&e.metadata)>>>1==1}function setNodeIsVisited(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function getNodeIsForValidation(e){return(4&e.metadata)>>>2==1}function setNodeIsForValidation(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function getNodeIsInGlyphMargin(e){return(64&e.metadata)>>>6==1}function setNodeIsInGlyphMargin(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}function getNodeStickiness(e){return(24&e.metadata)>>>3}function _setNodeStickiness(e,t){e.metadata=231&e.metadata|t<<3}function getCollapseOnReplaceEdit(e){return(32&e.metadata)>>>5==1}function setCollapseOnReplaceEdit(e,t){e.metadata=223&e.metadata|(t?1:0)<<5}let IntervalNode=class IntervalNode{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,setNodeColor(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,setNodeIsForValidation(this,!1),setNodeIsInGlyphMargin(this,!1),_setNodeStickiness(this,1),setCollapseOnReplaceEdit(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,setNodeIsVisited(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;let t=this.options.className;setNodeIsForValidation(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),setNodeIsInGlyphMargin(this,null!==this.options.glyphMarginClassName),_setNodeStickiness(this,this.options.stickiness),setCollapseOnReplaceEdit(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}};let F=new IntervalNode(null,0,0);F.parent=F,F.left=F,F.right=F,setNodeColor(F,0);let IntervalTree=class IntervalTree{constructor(){this.root=F,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,o,r){return this.root===F?[]:intervalSearch(this,e,t,i,n,o,r)}search(e,t,i,n){return this.root===F?[]:search(this,e,t,i,n)}collectNodesFromOwner(e){return collectNodesFromOwner(this,e)}collectNodesPostOrder(){return collectNodesPostOrder(this)}insert(e){rbTreeInsert(this,e),this._normalizeDeltaIfNecessary()}delete(e){rbTreeDelete(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let i=e,n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;let o=i.start+n,r=i.end+n;i.setCachedOffsets(o,r,t)}acceptReplace(e,t,i,n){let o=searchForEditing(this,e,e+t);for(let e=0,t=o.length;e<t;e++){let t=o[e];rbTreeDelete(this,t)}this._normalizeDeltaIfNecessary(),noOverlapReplace(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,s=o.length;r<s;r++){let s=o[r];s.start=s.cachedAbsoluteStart,s.end=s.cachedAbsoluteEnd,nodeAcceptEdit(s,e,e+t,i,n),s.maxEnd=s.end,rbTreeInsert(this,s)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,normalizeDelta(this))}};function normalizeDelta(e){let t=e.root,i=0;for(;t!==F;){if(t.left!==F&&!getNodeIsVisited(t.left)){t=t.left;continue}if(t.right!==F&&!getNodeIsVisited(t.right)){i+=t.delta,t=t.right;continue}t.start=i+t.start,t.end=i+t.end,t.delta=0,recomputeMaxEnd(t),setNodeIsVisited(t,!0),setNodeIsVisited(t.left,!1),setNodeIsVisited(t.right,!1),t===t.parent.right&&(i-=t.parent.delta),t=t.parent}setNodeIsVisited(e.root,!1)}function adjustMarkerBeforeColumn(e,t,i,n){return e<i||!(e>i)&&1!==n&&(2===n||t)}function nodeAcceptEdit(e,t,i,n,o){let r=getNodeStickiness(e),s=0===r||2===r,l=1===r||2===r,d=i-t,c=Math.min(d,n),u=e.start,g=!1,m=e.end,f=!1;t<=u&&m<=i&&getCollapseOnReplaceEdit(e)&&(e.start=t,g=!0,e.end=t,f=!0);{let e=o?1:d>0?2:0;!g&&adjustMarkerBeforeColumn(u,s,t,e)&&(g=!0),!f&&adjustMarkerBeforeColumn(m,l,t,e)&&(f=!0)}if(c>0&&!o){let e=d>n?2:0;!g&&adjustMarkerBeforeColumn(u,s,t+c,e)&&(g=!0),!f&&adjustMarkerBeforeColumn(m,l,t+c,e)&&(f=!0)}{let r=o?1:0;!g&&adjustMarkerBeforeColumn(u,s,i,r)&&(e.start=t+n,g=!0),!f&&adjustMarkerBeforeColumn(m,l,i,r)&&(e.end=t+n,f=!0)}let _=n-d;g||(e.start=Math.max(0,u+_)),f||(e.end=Math.max(0,m+_)),e.start>e.end&&(e.end=e.start)}function searchForEditing(e,t,i){let n=e.root,o=0,r=0,s=0,l=[],d=0;for(;n!==F;){if(getNodeIsVisited(n)){setNodeIsVisited(n.left,!1),setNodeIsVisited(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),n=n.parent;continue}if(!getNodeIsVisited(n.left)){if(o+n.maxEnd<t){setNodeIsVisited(n,!0);continue}if(n.left!==F){n=n.left;continue}}if((r=o+n.start)>i){setNodeIsVisited(n,!0);continue}if((s=o+n.end)>=t&&(n.setCachedOffsets(r,s,0),l[d++]=n),setNodeIsVisited(n,!0),n.right!==F&&!getNodeIsVisited(n.right)){o+=n.delta,n=n.right;continue}}return setNodeIsVisited(e.root,!1),l}function noOverlapReplace(e,t,i,n){let o=e.root,r=0,s=n-(i-t);for(;o!==F;){if(getNodeIsVisited(o)){setNodeIsVisited(o.left,!1),setNodeIsVisited(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),recomputeMaxEnd(o),o=o.parent;continue}if(!getNodeIsVisited(o.left)){if(r+o.maxEnd<t){setNodeIsVisited(o,!0);continue}if(o.left!==F){o=o.left;continue}}if(r+o.start>i){o.start+=s,o.end+=s,o.delta+=s,(o.delta<-1073741824||o.delta>1073741824)&&(e.requestNormalizeDelta=!0),setNodeIsVisited(o,!0);continue}if(setNodeIsVisited(o,!0),o.right!==F&&!getNodeIsVisited(o.right)){r+=o.delta,o=o.right;continue}}setNodeIsVisited(e.root,!1)}function collectNodesFromOwner(e,t){let i=e.root,n=[],o=0;for(;i!==F;){if(getNodeIsVisited(i)){setNodeIsVisited(i.left,!1),setNodeIsVisited(i.right,!1),i=i.parent;continue}if(i.left!==F&&!getNodeIsVisited(i.left)){i=i.left;continue}if(i.ownerId===t&&(n[o++]=i),setNodeIsVisited(i,!0),i.right!==F&&!getNodeIsVisited(i.right)){i=i.right;continue}}return setNodeIsVisited(e.root,!1),n}function collectNodesPostOrder(e){let t=e.root,i=[],n=0;for(;t!==F;){if(getNodeIsVisited(t)){setNodeIsVisited(t.left,!1),setNodeIsVisited(t.right,!1),t=t.parent;continue}if(t.left!==F&&!getNodeIsVisited(t.left)){t=t.left;continue}if(t.right!==F&&!getNodeIsVisited(t.right)){t=t.right;continue}i[n++]=t,setNodeIsVisited(t,!0)}return setNodeIsVisited(e.root,!1),i}function search(e,t,i,n,o){let r=e.root,s=0,l=0,d=0,c=[],u=0;for(;r!==F;){if(getNodeIsVisited(r)){setNodeIsVisited(r.left,!1),setNodeIsVisited(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),r=r.parent;continue}if(r.left!==F&&!getNodeIsVisited(r.left)){r=r.left;continue}l=s+r.start,d=s+r.end,r.setCachedOffsets(l,d,n);let e=!0;if(t&&r.ownerId&&r.ownerId!==t&&(e=!1),i&&getNodeIsForValidation(r)&&(e=!1),o&&!getNodeIsInGlyphMargin(r)&&(e=!1),e&&(c[u++]=r),setNodeIsVisited(r,!0),r.right!==F&&!getNodeIsVisited(r.right)){s+=r.delta,r=r.right;continue}}return setNodeIsVisited(e.root,!1),c}function intervalSearch(e,t,i,n,o,r,s){let l=e.root,d=0,c=0,u=0,g=[],m=0;for(;l!==F;){if(getNodeIsVisited(l)){setNodeIsVisited(l.left,!1),setNodeIsVisited(l.right,!1),l===l.parent.right&&(d-=l.parent.delta),l=l.parent;continue}if(!getNodeIsVisited(l.left)){if(d+l.maxEnd<t){setNodeIsVisited(l,!0);continue}if(l.left!==F){l=l.left;continue}}if((c=d+l.start)>i){setNodeIsVisited(l,!0);continue}if((u=d+l.end)>=t){l.setCachedOffsets(c,u,r);let e=!0;n&&l.ownerId&&l.ownerId!==n&&(e=!1),o&&getNodeIsForValidation(l)&&(e=!1),s&&!getNodeIsInGlyphMargin(l)&&(e=!1),e&&(g[m++]=l)}if(setNodeIsVisited(l,!0),l.right!==F&&!getNodeIsVisited(l.right)){d+=l.delta,l=l.right;continue}}return setNodeIsVisited(e.root,!1),g}function rbTreeInsert(e,t){if(e.root===F)return t.parent=F,t.left=F,t.right=F,setNodeColor(t,0),e.root=t,e.root;treeInsert(e,t),recomputeMaxEndWalkToRoot(t.parent);let i=t;for(;i!==e.root&&1===getNodeColor(i.parent);)if(i.parent===i.parent.parent.left){let t=i.parent.parent.right;1===getNodeColor(t)?(setNodeColor(i.parent,0),setNodeColor(t,0),setNodeColor(i.parent.parent,1),i=i.parent.parent):(i===i.parent.right&&leftRotate(e,i=i.parent),setNodeColor(i.parent,0),setNodeColor(i.parent.parent,1),rightRotate(e,i.parent.parent))}else{let t=i.parent.parent.left;1===getNodeColor(t)?(setNodeColor(i.parent,0),setNodeColor(t,0),setNodeColor(i.parent.parent,1),i=i.parent.parent):(i===i.parent.left&&rightRotate(e,i=i.parent),setNodeColor(i.parent,0),setNodeColor(i.parent.parent,1),leftRotate(e,i.parent.parent))}return setNodeColor(e.root,0),t}function treeInsert(e,t){let i=0,n=e.root,o=t.start,r=t.end;for(;;){let e=intervalCompare(o,r,n.start+i,n.end+i);if(e<0){if(n.left===F){t.start-=i,t.end-=i,t.maxEnd-=i,n.left=t;break}n=n.left}else{if(n.right===F){t.start-=i+n.delta,t.end-=i+n.delta,t.maxEnd-=i+n.delta,n.right=t;break}i+=n.delta,n=n.right}}t.parent=n,t.left=F,t.right=F,setNodeColor(t,1)}function rbTreeDelete(e,t){let i,n,o;if(t.left===F?(i=t.right,n=t,i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta):t.right===F?(i=t.left,n=t):(i=(n=leftest(t.right)).right,i.start+=n.delta,i.end+=n.delta,i.delta+=n.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,n.delta=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0)),n===e.root){e.root=i,setNodeColor(i,0),t.detach(),resetSentinel(),recomputeMaxEnd(i),e.root.parent=F;return}let r=1===getNodeColor(n);if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?i.parent=n.parent:(n.parent===t?i.parent=n:i.parent=n.parent,n.left=t.left,n.right=t.right,n.parent=t.parent,setNodeColor(n,getNodeColor(t)),t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==F&&(n.left.parent=n),n.right!==F&&(n.right.parent=n)),t.detach(),r){recomputeMaxEndWalkToRoot(i.parent),n!==t&&(recomputeMaxEndWalkToRoot(n),recomputeMaxEndWalkToRoot(n.parent)),resetSentinel();return}for(recomputeMaxEndWalkToRoot(i),recomputeMaxEndWalkToRoot(i.parent),n!==t&&(recomputeMaxEndWalkToRoot(n),recomputeMaxEndWalkToRoot(n.parent));i!==e.root&&0===getNodeColor(i);)i===i.parent.left?(1===getNodeColor(o=i.parent.right)&&(setNodeColor(o,0),setNodeColor(i.parent,1),leftRotate(e,i.parent),o=i.parent.right),0===getNodeColor(o.left)&&0===getNodeColor(o.right)?(setNodeColor(o,1),i=i.parent):(0===getNodeColor(o.right)&&(setNodeColor(o.left,0),setNodeColor(o,1),rightRotate(e,o),o=i.parent.right),setNodeColor(o,getNodeColor(i.parent)),setNodeColor(i.parent,0),setNodeColor(o.right,0),leftRotate(e,i.parent),i=e.root)):(1===getNodeColor(o=i.parent.left)&&(setNodeColor(o,0),setNodeColor(i.parent,1),rightRotate(e,i.parent),o=i.parent.left),0===getNodeColor(o.left)&&0===getNodeColor(o.right)?(setNodeColor(o,1),i=i.parent):(0===getNodeColor(o.left)&&(setNodeColor(o.right,0),setNodeColor(o,1),leftRotate(e,o),o=i.parent.left),setNodeColor(o,getNodeColor(i.parent)),setNodeColor(i.parent,0),setNodeColor(o.left,0),rightRotate(e,i.parent),i=e.root));setNodeColor(i,0),resetSentinel()}function leftest(e){for(;e.left!==F;)e=e.left;return e}function resetSentinel(){F.parent=F,F.delta=0,F.start=0,F.end=0}function leftRotate(e,t){let i=t.right;i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,t.right=i.left,i.left!==F&&(i.left.parent=t),i.parent=t.parent,t.parent===F?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i,recomputeMaxEnd(t),recomputeMaxEnd(i)}function rightRotate(e,t){let i=t.left;t.delta-=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=i.delta,t.end-=i.delta,t.left=i.right,i.right!==F&&(i.right.parent=t),i.parent=t.parent,t.parent===F?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i,recomputeMaxEnd(t),recomputeMaxEnd(i)}function computeMaxEnd(e){let t=e.end;if(e.left!==F){let i=e.left.maxEnd;i>t&&(t=i)}if(e.right!==F){let i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function recomputeMaxEnd(e){e.maxEnd=computeMaxEnd(e)}function recomputeMaxEndWalkToRoot(e){for(;e!==F;){let t=computeMaxEnd(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function intervalCompare(e,t,i,n){return e===i?t-n:e-i}let TreeNode=class TreeNode{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==B)return rbTreeBase_leftest(this.right);let e=this;for(;e.parent!==B&&e.parent.left!==e;)e=e.parent;return e.parent===B?B:e.parent}prev(){if(this.left!==B)return righttest(this.left);let e=this;for(;e.parent!==B&&e.parent.right!==e;)e=e.parent;return e.parent===B?B:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};let B=new TreeNode(null,0);function rbTreeBase_leftest(e){for(;e.left!==B;)e=e.left;return e}function righttest(e){for(;e.right!==B;)e=e.right;return e}function calculateSize(e){return e===B?0:e.size_left+e.piece.length+calculateSize(e.right)}function calculateLF(e){return e===B?0:e.lf_left+e.piece.lineFeedCnt+calculateLF(e.right)}function rbTreeBase_resetSentinel(){B.parent=B}function rbTreeBase_leftRotate(e,t){let i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==B&&(i.left.parent=t),i.parent=t.parent,t.parent===B?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function rbTreeBase_rightRotate(e,t){let i=t.left;t.left=i.right,i.right!==B&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===B?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function rbDelete(e,t){let i,n,o;if(i=t.left===B?(n=t).right:t.right===B?(n=t).left:(n=rbTreeBase_leftest(t.right)).right,n===e.root){e.root=i,i.color=0,t.detach(),rbTreeBase_resetSentinel(),e.root.parent=B;return}let r=1===n.color;if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?(i.parent=n.parent,recomputeTreeMetadata(e,i)):(n.parent===t?i.parent=n:i.parent=n.parent,recomputeTreeMetadata(e,i),n.left=t.left,n.right=t.right,n.parent=t.parent,n.color=t.color,t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==B&&(n.left.parent=n),n.right!==B&&(n.right.parent=n),n.size_left=t.size_left,n.lf_left=t.lf_left,recomputeTreeMetadata(e,n)),t.detach(),i.parent.left===i){let t=calculateSize(i),n=calculateLF(i);if(t!==i.parent.size_left||n!==i.parent.lf_left){let o=t-i.parent.size_left,r=n-i.parent.lf_left;i.parent.size_left=t,i.parent.lf_left=n,updateTreeMetadata(e,i.parent,o,r)}}if(recomputeTreeMetadata(e,i.parent),r){rbTreeBase_resetSentinel();return}for(;i!==e.root&&0===i.color;)i===i.parent.left?(1===(o=i.parent.right).color&&(o.color=0,i.parent.color=1,rbTreeBase_leftRotate(e,i.parent),o=i.parent.right),0===o.left.color&&0===o.right.color?(o.color=1,i=i.parent):(0===o.right.color&&(o.left.color=0,o.color=1,rbTreeBase_rightRotate(e,o),o=i.parent.right),o.color=i.parent.color,i.parent.color=0,o.right.color=0,rbTreeBase_leftRotate(e,i.parent),i=e.root)):(1===(o=i.parent.left).color&&(o.color=0,i.parent.color=1,rbTreeBase_rightRotate(e,i.parent),o=i.parent.left),0===o.left.color&&0===o.right.color?(o.color=1,i=i.parent):(0===o.left.color&&(o.right.color=0,o.color=1,rbTreeBase_leftRotate(e,o),o=i.parent.left),o.color=i.parent.color,i.parent.color=0,o.left.color=0,rbTreeBase_rightRotate(e,i.parent),i=e.root));i.color=0,rbTreeBase_resetSentinel()}function fixInsert(e,t){for(recomputeTreeMetadata(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){let i=t.parent.parent.right;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&rbTreeBase_leftRotate(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,rbTreeBase_rightRotate(e,t.parent.parent))}else{let i=t.parent.parent.left;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&rbTreeBase_rightRotate(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,rbTreeBase_leftRotate(e,t.parent.parent))}e.root.color=0}function updateTreeMetadata(e,t,i,n){for(;t!==e.root&&t!==B;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}function recomputeTreeMetadata(e,t){let i=0,n=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(i=calculateSize((t=t.parent).left)-t.size_left,n=calculateLF(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=n;t!==e.root&&(0!==i||0!==n);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}}B.parent=B,B.left=B,B.right=B,B.color=0;var W=i(49987);function createUintArray(e){let t;return(t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length)).set(e,0),t}let LineStarts=class LineStarts{constructor(e,t,i,n,o){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=o}};function createLineStartsFast(e,t=!0){let i=[0],n=1;for(let t=0,o=e.length;t<o;t++){let r=e.charCodeAt(t);13===r?t+1<o&&10===e.charCodeAt(t+1)?(i[n++]=t+2,t++):i[n++]=t+1:10===r&&(i[n++]=t+1)}return t?createUintArray(i):i}function createLineStarts(e,t){e.length=0,e[0]=0;let i=1,n=0,o=0,r=0,s=!0;for(let l=0,d=t.length;l<d;l++){let c=t.charCodeAt(l);13===c?l+1<d&&10===t.charCodeAt(l+1)?(r++,e[i++]=l+2,l++):(n++,e[i++]=l+1):10===c?(o++,e[i++]=l+1):s&&9!==c&&(c<32||c>126)&&(s=!1)}let l=new LineStarts(createUintArray(e),n,o,r,s);return e.length=0,l}let Piece=class Piece{constructor(e,t,i,n,o){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=o}};let StringBuffer=class StringBuffer{constructor(e,t){this.buffer=e,this.lineStarts=t}};let PieceTreeSnapshot=class PieceTreeSnapshot{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==B&&e.iterate(e.root,e=>(e!==B&&this._pieces.push(e.piece),!0))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}};let PieceTreeSearchCache=class PieceTreeSearchCache{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,i=this._cache;for(let n=0;n<i.length;n++){let o=i[n];if(null===o.node.parent||o.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){let e=[];for(let t of i)null!==t&&e.push(t);this._cache=e}}};let PieceTreeBase=class PieceTreeBase{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new StringBuffer("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=B,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let t=0,i=e.length;t<i;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=createLineStartsFast(e[t].buffer));let i=new Piece(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),n=this.rbInsertRight(n,i)}this._searchCache=new PieceTreeSearchCache(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=65535-Math.floor(21845),i=2*t,n="",o=0,r=[];if(this.iterate(this.root,s=>{let l=this.getNodeContent(s),d=l.length;if(o<=t||o+d<i)return n+=l,o+=d,!0;let c=n.replace(/\r\n|\r|\n/g,e);return r.push(new StringBuffer(c,createLineStartsFast(c))),n=l,o=d,!0}),o>0){let t=n.replace(/\r\n|\r|\n/g,e);r.push(new StringBuffer(t,createLineStartsFast(t)))}this.create(r,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new PieceTreeSnapshot(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==B;)if(n.left!==B&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;let o=this.getAccumulatedValue(n,e-n.lf_left-2);return i+(o+t-1)}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.max(0,e=Math.floor(e));let t=this.root,i=0,n=e;for(;t!==B;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,0===o.index){let e=this.getOffsetAt(i+1,1),t=n-e;return new _.L(i+1,t+1)}return new _.L(i+1,o.remainder+1)}else{if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===B){let t=this.getOffsetAt(i+1,1),o=n-e-t;return new _.L(i+1,o+1)}t=t.right}return new _.L(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(i,n);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.substring(o+e.remainder,o+t.remainder)}let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start),r=n.substring(o+e.remainder,o+i.piece.length);for(i=i.next();i!==B;){let e=this._buffers[i.piece.bufferIndex].buffer,n=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=e.substring(n,n+t.remainder);break}r+=e.substr(n,i.piece.length),i=i.next()}return r}getLinesContent(){let e=[],t=0,i="",n=!1;return this.iterate(this.root,o=>{if(o===B)return!0;let r=o.piece,s=r.length;if(0===s)return!0;let l=this._buffers[r.bufferIndex].buffer,d=this._buffers[r.bufferIndex].lineStarts,c=r.start.line,u=r.end.line,g=d[c]+r.start.column;if(n&&(10===l.charCodeAt(g)&&(g++,s--),e[t++]=i,i="",n=!1,0===s))return!0;if(c===u)return this._EOLNormalized||13!==l.charCodeAt(g+s-1)?i+=l.substr(g,s):(n=!0,i+=l.substr(g,s-1)),!0;i+=this._EOLNormalized?l.substring(g,Math.max(g,d[c+1]-this._EOLLength)):l.substring(g,d[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let n=c+1;n<u;n++)i=this._EOLNormalized?l.substring(d[n],d[n+1]-this._EOLLength):l.substring(d[n],d[n+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return this._EOLNormalized||13!==l.charCodeAt(d[u]+r.end.column-1)?i=l.substr(d[u],r.end.column):(n=!0,0===r.end.column?t--:i=l.substr(d[u],r.end.column-1)),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start),n=i+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){let i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,o,r,s,l,d,c,u){let g,m,f;let _=this._buffers[e.piece.bufferIndex],C=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),b=this.offsetInBuffer(e.piece.bufferIndex,o),S=this.offsetInBuffer(e.piece.bufferIndex,r),y={line:0,column:0};t._wordSeparators?(m=_.buffer.substring(b,S),f=e=>e+b,t.reset(0)):(m=_.buffer,f=e=>e,t.reset(b));do if(g=t.next(m)){if(f(g.index)>=S)return c;this.positionInBuffer(e,f(g.index)-C,y);let t=this.getLineFeedCnt(e.piece.bufferIndex,o,y),r=y.line===o.line?y.column-o.column+n:y.column+1,s=r+g[0].length;if(u[c++]=(0,W.iE)(new v.e(i+t,r,i+t,s),g,l),f(g.index)+g[0].length>=S)return c;if(c>=d)break}while(g);return c}findMatchesLineByLine(e,t,i,n){let o=[],r=0,s=new W.sz(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===l)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===d)return[];let c=this.positionInBuffer(l.node,l.remainder),u=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,s,e.startLineNumber,e.startColumn,c,u,t,i,n,r,o),o;let g=e.startLineNumber,m=l.node;for(;m!==d.node;){let d=this.getLineFeedCnt(m.piece.bufferIndex,c,m.piece.end);if(d>=1){let l=this._buffers[m.piece.bufferIndex].lineStarts,u=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),f=l[c.line+d],_=g===e.startLineNumber?e.startColumn:1;if((r=this.findMatchesInNode(m,s,g,_,c,this.positionInBuffer(m,f-u),t,i,n,r,o))>=n)return o;g+=d}let u=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){let l=this.getLineContent(g).substring(u,e.endColumn-1);return r=this._findMatchesInLine(t,s,l,e.endLineNumber,u,r,o,i,n),o}if((r=this._findMatchesInLine(t,s,this.getLineContent(g).substr(u),g,u,r,o,i,n))>=n)return o;g++,m=(l=this.nodeAt2(g,1)).node,c=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){let l=g===e.startLineNumber?e.startColumn-1:0,d=this.getLineContent(g).substring(l,e.endColumn-1);return r=this._findMatchesInLine(t,s,d,e.endLineNumber,l,r,o,i,n),o}let f=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(d.node,s,g,f,c,u,t,i,n,r,o),o}_findMatchesInLine(e,t,i,n,o,r,s,l,d){let c;let u=e.wordSeparators;if(!l&&e.simpleSearch){let t=e.simpleSearch,l=t.length,c=i.length,g=-l;for(;-1!==(g=i.indexOf(t,g+l))&&(!(!u||(0,W.cM)(u,i,c,g,l))||(s[r++]=new w.tk(new v.e(n,g+1+o,n,g+1+l+o),null),!(r>=d))););return r}t.reset(0);do if((c=t.next(i))&&(s[r++]=(0,W.iE)(new v.e(n,c.index+1+o,n,c.index+1+c[0].length+o),c,l),r>=d))break;while(c);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==B){let{node:i,remainder:n,nodeStartOffset:o}=this.nodeAt(e),r=i.piece,s=r.bufferIndex,l=this.positionInBuffer(i,n);if(0===i.piece.bufferIndex&&r.end.line===this._lastChangeBufferPos.line&&r.end.column===this._lastChangeBufferPos.column&&o+r.length===e&&t.length<65535){this.appendToNode(i,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(o+i.piece.length>e){let e=[],o=new Piece(r.bufferIndex,l,r.end,this.getLineFeedCnt(r.bufferIndex,l,r.end),this.offsetInBuffer(s,r.end)-this.offsetInBuffer(s,l));if(this.shouldCheckCRLF()&&this.endWithCR(t)){let e=this.nodeCharCodeAt(i,n);if(10===e){let e={line:o.start.line+1,column:0};o=new Piece(o.bufferIndex,e,o.end,this.getLineFeedCnt(o.bufferIndex,e,o.end),o.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){let o=this.nodeCharCodeAt(i,n-1);if(13===o){let o=this.positionInBuffer(i,n-1);this.deleteNodeTail(i,o),t="\r"+t,0===i.piece.length&&e.push(i)}else this.deleteNodeTail(i,l)}else this.deleteNodeTail(i,l);let d=this.createNewPieces(t);o.length>0&&this.rbInsertRight(i,o);let c=i;for(let e=0;e<d.length;e++)c=this.rbInsertRight(c,d[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,i)}else{let e=this.createNewPieces(t),i=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)i=this.rbInsertRight(i,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===B)return;let i=this.nodeAt(e),n=this.nodeAt(e+t),o=i.node,r=n.node;if(o===r){let r=this.positionInBuffer(o,i.remainder),s=this.positionInBuffer(o,n.remainder);if(i.nodeStartOffset===e){if(t===o.piece.length){let e=o.next();rbDelete(this,o),this.validateCRLFWithPrevNode(e),this.computeBufferMetadata();return}this.deleteNodeHead(o,s),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(i.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,r),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,r,s),this.computeBufferMetadata();return}let s=[],l=this.positionInBuffer(o,i.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),0===o.piece.length&&s.push(o);let d=this.positionInBuffer(r,n.remainder);this.deleteNodeHead(r,d),0===r.piece.length&&s.push(r);let c=o.next();for(let e=c;e!==B&&e!==r;e=e.next())s.push(e);let u=0===o.piece.length?o.prev():o;this.deleteNodes(s),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let n=t.piece,o={line:n.start.line+1,column:0},r=new Piece(n.bufferIndex,o,n.end,this.getLineFeedCnt(n.bufferIndex,o,n.end),n.length-1);t.piece=r,e+="\n",updateTreeMetadata(this,t,-1,-1),0===t.piece.length&&i.push(t)}let n=this.createNewPieces(e),o=this.rbInsertLeft(t,n[n.length-1]);for(let e=n.length-2;e>=0;e--)o=this.rbInsertLeft(o,n[e]);this.validateCRLFWithPrevNode(o),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");let i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]),o=n;for(let e=1;e<i.length;e++)o=this.rbInsertRight(o,i[e]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){let n=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,s=r[n.start.line]+n.start.column,l=s+t,d=n.start.line,c=n.end.line,u=0,g=0,m=0;for(;d<=c&&(m=r[u=d+(c-d)/2|0],u!==c);)if(g=r[u+1],l<m)c=u-1;else if(l>=g)d=u+1;else break;return i?(i.line=u,i.column=l-m,null):{line:u,column:l-m}}getLineFeedCnt(e,t,i){if(0===i.column)return i.line-t.line;let n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;let o=n[i.line+1],r=n[i.line]+i.column;if(o>r+1)return i.line-t.line;let s=this._buffers[e].buffer;return 13===s.charCodeAt(r-1)?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){let i=this._buffers[e].lineStarts;return i[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)rbDelete(this,e[t])}createNewPieces(e){if(e.length>65535){let t=[];for(;e.length>65535;){let i;let n=e.charCodeAt(65534);13===n||n>=55296&&n<=56319?(i=e.substring(0,65534),e=e.substring(65534)):(i=e.substring(0,65535),e=e.substring(65535));let o=createLineStartsFast(i);t.push(new Piece(this._buffers.length,{line:0,column:0},{line:o.length-1,column:i.length-o[o.length-1]},o.length-1,i.length)),this._buffers.push(new StringBuffer(i,o))}let i=createLineStartsFast(e);return t.push(new Piece(this._buffers.length,{line:0,column:0},{line:i.length-1,column:e.length-i[i.length-1]},i.length-1,e.length)),this._buffers.push(new StringBuffer(e,i)),t}let t=this._buffers[0].buffer.length,i=createLineStartsFast(e,!1),n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let e=0;e<i.length;e++)i[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<i.length;e++)i[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}let o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,s=o-this._buffers[0].lineStarts[r],l={line:r,column:s},d=new Piece(0,n,l,this.getLineFeedCnt(0,n,l),o-t);return this._lastChangeBufferPos=l,[d]}getLineRawContent(e,t=0){let i=this.root,n="",o=this._searchCache.get2(e);if(o){i=o.node;let r=this.getAccumulatedValue(i,e-o.nodeStartLineNumber-1),s=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(o.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=s.substring(l+r,l+i.piece.length);else{let n=this.getAccumulatedValue(i,e-o.nodeStartLineNumber);return s.substring(l+r,l+n-t)}}else{let o=0,r=e;for(;i!==B;)if(i.left!==B&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){let n=this.getAccumulatedValue(i,e-i.lf_left-2),s=this.getAccumulatedValue(i,e-i.lf_left-1),l=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:r-(e-1-i.lf_left)}),l.substring(d+n,d+s-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(i,e-i.lf_left-2),o=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=o.substring(r+t,r+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==B;){let e=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(i,0),r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substring(r,r+o-t);break}{let t=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substr(t,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==B;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){let i=e.piece,n=this.positionInBuffer(e,t),o=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(t!==o)return{index:t,remainder:0}}return{index:o,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;let i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,o=i.start.line+t+1;return o>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[o]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){let i=e.piece,n=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.end),r=this.offsetInBuffer(i.bufferIndex,t),s=this.getLineFeedCnt(i.bufferIndex,i.start,t),l=s-n,d=r-o,c=i.length+d;e.piece=new Piece(i.bufferIndex,i.start,t,s,c),updateTreeMetadata(this,e,d,l)}deleteNodeHead(e,t){let i=e.piece,n=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.start),r=this.getLineFeedCnt(i.bufferIndex,t,i.end),s=this.offsetInBuffer(i.bufferIndex,t),l=r-n,d=o-s,c=i.length+d;e.piece=new Piece(i.bufferIndex,t,i.end,r,c),updateTreeMetadata(this,e,d,l)}shrinkNode(e,t,i){let n=e.piece,o=n.start,r=n.end,s=n.length,l=n.lineFeedCnt,d=this.getLineFeedCnt(n.bufferIndex,n.start,t),c=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,o);e.piece=new Piece(n.bufferIndex,n.start,t,d,c),updateTreeMetadata(this,e,c-s,d-l);let u=new Piece(n.bufferIndex,i,r,this.getLineFeedCnt(n.bufferIndex,i,r),this.offsetInBuffer(n.bufferIndex,r)-this.offsetInBuffer(n.bufferIndex,i)),g=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");let i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let o=createLineStartsFast(t,!1);for(let e=0;e<o.length;e++)o[e]+=n;if(i){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));let r=this._buffers[0].lineStarts.length-1,s=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:s},d=e.piece.length+t.length,c=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),g=u-c;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,l,u,d),this._lastChangeBufferPos=l,updateTreeMetadata(this,e,t.length,g)}nodeAt(e){let t=this.root,i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==B;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;let i={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(i),i}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==B;)if(i.left!==B&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(o+t-1,r),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(i,e-i.lf_left-2);if(o+t-1<=i.piece.length)return{node:i,remainder:o+t-1,nodeStartOffset:n};t-=i.piece.length-o;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==B;){if(i.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(i,0),n=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,e),nodeStartOffset:n}}if(i.piece.length>=t-1){let e=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:e}}t-=i.piece.length,i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return -1;let i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===B||0===e.piece.lineFeedCnt)return!1;let t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,o=i[n]+t.start.column;if(n===i.length-1)return!1;let r=i[n+1];return!(r>o+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(o)}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==B&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let i;let n=[],o=this._buffers[e.piece.bufferIndex].lineStarts;i=0===e.piece.end.column?{line:e.piece.end.line-1,column:o[e.piece.end.line]-o[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};let r=e.piece.length-1,s=e.piece.lineFeedCnt-1;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,i,s,r),updateTreeMetadata(this,e,-1,-1),0===e.piece.length&&n.push(e);let l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Piece(t.piece.bufferIndex,l,t.piece.end,c,d),updateTreeMetadata(this,t,-1,-1),0===t.piece.length&&n.push(t);let u=this.createNewPieces("\r\n");this.rbInsertRight(e,u[0]);for(let e=0;e<n.length;e++)rbDelete(this,n[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let i=t.next();if(this.startWithLF(i)){if(e+="\n",1===i.piece.length)rbDelete(this,i);else{let e=i.piece,t={line:e.start.line+1,column:0},n=e.length-1,o=this.getLineFeedCnt(e.bufferIndex,t,e.end);i.piece=new Piece(e.bufferIndex,t,e.end,o,n),updateTreeMetadata(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===B)return t(B);let i=this.iterate(e.left,t);return i?t(e)&&this.iterate(e.right,t):i}getNodeContent(e){if(e===B)return"";let t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end),r=t.buffer.substring(n,o);return r}getPieceContent(e){let t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end),o=t.buffer.substring(i,n);return o}rbInsertRight(e,t){let i=new TreeNode(t,1);i.left=B,i.right=B,i.parent=B,i.size_left=0,i.lf_left=0;let n=this.root;if(n===B)this.root=i,i.color=0;else if(e.right===B)e.right=i,i.parent=e;else{let t=rbTreeBase_leftest(e.right);t.left=i,i.parent=t}return fixInsert(this,i),i}rbInsertLeft(e,t){let i=new TreeNode(t,1);if(i.left=B,i.right=B,i.parent=B,i.size_left=0,i.lf_left=0,this.root===B)this.root=i,i.color=0;else if(e.left===B)e.left=i,i.parent=e;else{let t=righttest(e.left);t.right=i,i.parent=t}return fixInsert(this,i),i}};var V=i(28862);let PieceTreeTextBuffer=class PieceTreeTextBuffer extends d.JT{constructor(e,t,i,n,o,r,s){super(),this._onDidChangeContent=this._register(new l.Q5),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._pieceTree=new PieceTreeBase(e,i,s)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let i=e+t,n=this.getPositionAt(e),o=this.getPositionAt(i);return new v.e(n.lineNumber,n.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn),o=0,r=this._getEndOfLine(t),s=this.getEOL();if(r.length!==s.length){let t=r.length-s.length,i=e.endLineNumber-e.startLineNumber;o=t*i}return n-i+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0,n=e.startLineNumber,o=e.endLineNumber;for(let t=n;t<=o;t++){let r=this.getLineContent(t),s=t===n?e.startColumn-1:0,l=t===o?e.endColumn-1:r.length;for(let e=s;e<l;e++)c.ZG(r.charCodeAt(e))?(i+=1,e+=1):i+=1}return i+this._getEndOfLine(t).length*(o-n)}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){let t=c.LC(this.getLineContent(e));return -1===t?0:t+1}getLineLastNonWhitespaceColumn(e){let t=c.ow(this.getLineContent(e));return -1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,s=!0,l=[];for(let t=0;t<e.length;t++){let i=e[t];s&&i._isTracked&&(s=!1);let d=i.range;if(i.text){let e=!0;r||(r=e=!c.$i(i.text)),!n&&e&&(n=c.Ut(i.text)),!o&&e&&(o=c.ab(i.text))}let u="",m=0,f=0,_=0;if(i.text){let e;[m,f,_,e]=(0,g.Q)(i.text);let t=this.getEOL(),n="\r\n"===t?2:1;u=0===e||e===n?i.text:i.text.replace(/\r\n|\r|\n/g,t)}l[t]={sortIndex:t,identifier:i.identifier||null,range:d,rangeOffset:this.getOffsetAt(d.startLineNumber,d.startColumn),rangeLength:this.getValueLengthInRange(d),text:u,eolCount:m,firstLineLength:f,lastLineLength:_,forceMoveMarkers:!!i.forceMoveMarkers,isAutoWhitespaceEdit:i.isAutoWhitespaceEdit||!1}}l.sort(PieceTreeTextBuffer._sortOpsAscending);let d=!1;for(let e=0,t=l.length-1;e<t;e++){let t=l[e].range.getEndPosition(),i=l[e+1].range.getStartPosition();if(i.isBeforeOrEqual(t)){if(i.isBefore(t))throw Error("Overlapping ranges are not allowed!");d=!0}}s&&(l=this._reduceOperations(l));let u=i||t?PieceTreeTextBuffer._getInverseEditRanges(l):[],m=[];if(t)for(let e=0;e<l.length;e++){let t=l[e],i=u[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=i.startLineNumber;e<=i.endLineNumber;e++){let n="";(e!==i.startLineNumber||(n=this.getLineContent(t.range.startLineNumber),-1===c.LC(n)))&&m.push({lineNumber:e,oldContent:n})}}let f=null;if(i){let e=0;f=[];for(let t=0;t<l.length;t++){let i=l[t],n=u[t],o=this.getValueInRange(i.range),r=i.rangeOffset+e;e+=i.text.length-o.length,f[t]={sortIndex:i.sortIndex,identifier:i.identifier,range:n,text:o,textChange:new V.q(i.rangeOffset,o,r,i.text)}}d||f.sort((e,t)=>e.sortIndex-t.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;let _=this._doApplyEdits(l),v=null;if(t&&m.length>0){m.sort((e,t)=>t.lineNumber-e.lineNumber),v=[];for(let e=0,t=m.length;e<t;e++){let t=m[e].lineNumber;if(e>0&&m[e-1].lineNumber===t)continue;let i=m[e].oldContent,n=this.getLineContent(t);0!==n.length&&n!==i&&-1===c.LC(n)&&v.push(t)}}return this._onDidChangeContent.fire(),new w.je(f,_,v)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,i=e[0].range,n=e[e.length-1].range,o=new v.e(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn),r=i.startLineNumber,s=i.startColumn,l=[];for(let i=0,n=e.length;i<n;i++){let n=e[i],o=n.range;t=t||n.forceMoveMarkers,l.push(this.getValueInRange(new v.e(r,s,o.startLineNumber,o.startColumn))),n.text.length>0&&l.push(n.text),r=o.endLineNumber,s=o.endColumn}let d=l.join(""),[c,u,m]=(0,g.Q)(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:c,firstLineLength:u,lastLineLength:m,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(PieceTreeTextBuffer._sortOpsDescending);let t=[];for(let i=0;i<e.length;i++){let n=e[i],o=n.range.startLineNumber,r=n.range.startColumn,s=n.range.endLineNumber,l=n.range.endColumn;if(o===s&&r===l&&0===n.text.length)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);let d=new v.e(o,r,s,l);t.push({range:d,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){let t=[],i=0,n=0,o=null;for(let r=0,s=e.length;r<s;r++){let s,l,d;let c=e[r];if(o?o.range.endLineNumber===c.range.startLineNumber?(s=i,l=n+(c.range.startColumn-o.range.endColumn)):(s=i+(c.range.startLineNumber-o.range.endLineNumber),l=c.range.startColumn):(s=c.range.startLineNumber,l=c.range.startColumn),c.text.length>0){let e=c.eolCount+1;d=1===e?new v.e(s,l,s,l+c.firstLineLength):new v.e(s,l,s+e-1,c.lastLineLength+1)}else d=new v.e(s,l,s,l);i=d.endLineNumber,n=d.endColumn,t.push(d),o=c}return t}static _sortOpsAscending(e,t){let i=v.e.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){let i=v.e.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i}};let PieceTreeTextBufferFactory=class PieceTreeTextBufferFactory{constructor(e,t,i,n,o,r,s,l,d){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=s,this._isBasicASCII=l,this._normalizeEOL=d}_getEOL(e){let t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":i>t/2?"\r\n":"\n"}create(e){let t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,n=i.length;e<n;e++){let n=i[e].buffer.replace(/\r\n|\r|\n/g,t),o=createLineStartsFast(n);i[e]=new StringBuffer(n,o)}let n=new PieceTreeTextBuffer(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}};let PieceTreeTextBufferBuilder=class PieceTreeTextBufferBuilder{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&c.uS(e)&&(this.BOM=c.c1,e=e.substr(1));let t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1),this._previousChar=t}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=createLineStarts(this._tmpLineStarts,e);this.chunks.push(new StringBuffer(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=c.Ut(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=c.ab(e)))}finish(e=!0){return this._finish(),new PieceTreeTextBufferFactory(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=createLineStartsFast(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}};var H=i(66614),z=i(83783),U=i(7530),K=i(97311),j=i(88059),q=i(38345),G=i(84761),Q=i(12429);let FixedArray=class FixedArray{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(0===t){this.insert(e,i);return}if(0===i){this.delete(e,t);return}let n=this._store.slice(0,e),o=this._store.slice(e+t),r=arrayFill(i,this._default);this._store=n.concat(r,o)}delete(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(0===t||e>=this._store.length)return;let i=[];for(let e=0;e<t;e++)i[e]=this._default;this._store=(0,o.Zv)(this._store,e,i)}};function arrayFill(e,t){let i=[];for(let n=0;n<e;n++)i[n]=t;return i}let ContiguousMultilineTokens=class ContiguousMultilineTokens{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}};let ContiguousMultilineTokensBuilder=class ContiguousMultilineTokensBuilder{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new ContiguousMultilineTokens(e,[t]))}finalize(){return this._tokens}};var Z=i(46338);let TokenizerWithStateStore=class TokenizerWithStateStore{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new TrackingTokenizationStateStore(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}};let TokenizerWithStateStoreAndTextModel=class TokenizerWithStateStoreAndTextModel extends TokenizerWithStateStore{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){let i=this._textModel.getLanguageId();for(;;){let n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;let o=this._textModel.getLineContent(n.lineNumber),r=safeTokenize(this._languageIdCodec,i,this.tokenizationSupport,o,!0,n.startState);e.add(n.lineNumber,r.tokens),this.store.setEndState(n.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){let i=this.getStartState(e.lineNumber);if(!i)return 0;let n=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),s=safeTokenize(this._languageIdCodec,n,this.tokenizationSupport,r,!0,i),l=new Z.A(s.tokens,r,this._languageIdCodec);if(0===l.getCount())return 0;let d=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(d)}tokenizeLineWithEdit(e,t,i){let n=e.lineNumber,o=e.column,r=this.getStartState(n);if(!r)return null;let s=this._textModel.getLineContent(n),l=s.substring(0,o-1)+i+s.substring(o-1+t),d=this._textModel.getLanguageIdAtPosition(n,0),c=safeTokenize(this._languageIdCodec,d,this.tokenizationSupport,l,!0,r),u=new Z.A(c.tokens,l,this._languageIdCodec);return u}isCheapToTokenize(e){let t=this.store.getFirstInvalidEndStateLineNumberOrMax();return!!(e<t||e===t&&2048>this._textModel.getLineLength(e))}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t),o=this._textModel.getLanguageId();for(let r=t;r<=i;r++){let t=this._textModel.getLineContent(r),i=safeTokenize(this._languageIdCodec,o,this.tokenizationSupport,t,!0,n);e.add(r,i.tokens),n=i.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e),i=[],n=null;for(let o=e-1;t>1&&o>=1;o--){let e=this._textModel.getLineFirstNonWhitespaceColumn(o);if(0!==e&&e<t&&(i.push(this._textModel.getLineContent(o)),t=e,n=this.getStartState(o)))break}n||(n=this.tokenizationSupport.getInitialState()),i.reverse();let o=this._textModel.getLanguageId(),r=n;for(let e of i){let t=safeTokenize(this._languageIdCodec,o,this.tokenizationSupport,e,!1,r);r=t.endState}return r}};let TrackingTokenizationStateStore=class TrackingTokenizationStateStore{constructor(e){this.lineCount=e,this._tokenizationStateStore=new TokenizationStateStore,this._invalidEndStatesLineNumbers=new RangePriorityQueueImpl,this._invalidEndStatesLineNumbers.addRange(new G.q(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new s.he("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new G.q(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new G.q(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[e]=(0,g.Q)(t.text);this.acceptChange(new f.z(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new G.q(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return null===this._invalidEndStatesLineNumbers.min}getStartState(e,t){return 1===e?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;let i=this.getStartState(t,e);if(!i)throw new s.he("Start state must be defined");return{lineNumber:t,startState:i}}};let TokenizationStateStore=class TokenizationStateStore{constructor(){this._lineEndStates=new FixedArray(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let i=this._lineEndStates.get(e);return!(i&&i.equals(t))&&(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}};let RangePriorityQueueImpl=class RangePriorityQueueImpl{constructor(){this._ranges=[]}get min(){return 0===this._ranges.length?null:this._ranges[0].start}delete(e){let t=this._ranges.findIndex(t=>t.contains(e));if(-1!==t){let i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new G.q(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new G.q(i.start,e):this._ranges.splice(t,1,new G.q(i.start,e),new G.q(e+1,i.endExclusive))}}addRange(e){G.q.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;let o=t-e.length;for(let e=n;e<this._ranges.length;e++)this._ranges[e]=this._ranges[e].delta(o);if(i===n){let n=new G.q(e.start,e.start+t);n.isEmpty||this._ranges.splice(i,0,n)}else{let t=Math.min(e.start,this._ranges[i].start),r=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),s=new G.q(t,r+o);s.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,s)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function safeTokenize(e,t,i,n,o,r){let l=null;if(i)try{l=i.tokenizeEncoded(n,o,r.clone())}catch(e){(0,s.dL)(e)}return l||(l=(0,Q.Dy)(e.encodeLanguageId(t),r)),Z.A.convertToEndOffset(l.tokens,n.length),l}let DefaultBackgroundTokenizer=class DefaultBackgroundTokenizer{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,(0,H.jg)(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),execute=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?(0,j.fn)(execute):this._beginBackgroundTokenization())};execute()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new ContiguousMultilineTokensBuilder,i=q.G.create(!1);do{if(i.elapsed()>1)break;let n=this._tokenizeOneInvalidLine(t);if(n>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(e){var t;let i=null===(t=this._tokenizerWithStateStore)||void 0===t?void 0:t.getFirstInvalidLine();return i?(this._tokenizerWithStateStore.updateTokensUntilLine(e,i.lineNumber),i.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){!this._isDisposed&&this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new f.z(e,t))}};let Y=new Uint32Array(0).buffer;let ContiguousTokensEditing=class ContiguousTokensEditing{static deleteBeginning(e,t){return null===e||e===Y?e:ContiguousTokensEditing.delete(e,0,t)}static deleteEnding(e,t){if(null===e||e===Y)return e;let i=toUint32Array(e),n=i[i.length-2];return ContiguousTokensEditing.delete(e,t,n)}static delete(e,t,i){let n,o;if(null===e||e===Y||t===i)return e;let r=toUint32Array(e),s=r.length>>>1;if(0===t&&r[r.length-2]===i)return Y;let l=Z.A.findIndexInTokensArray(r,t),d=l>0?r[l-1<<1]:0,c=r[l<<1];if(i<c){let n=i-t;for(let e=l;e<s;e++)r[e<<1]-=n;return e}d!==t?(r[l<<1]=t,n=l+1<<1,o=t):(n=l<<1,o=d);let u=i-t;for(let e=l+1;e<s;e++){let t=r[e<<1]-u;t>o&&(r[n++]=t,r[n++]=r[(e<<1)+1],o=t)}if(n===r.length)return e;let g=new Uint32Array(n);return g.set(r.subarray(0,n),0),g.buffer}static append(e,t){if(t===Y)return e;if(e===Y)return t;if(null===e)return e;if(null===t)return null;let i=toUint32Array(e),n=toUint32Array(t),o=n.length>>>1,r=new Uint32Array(i.length+n.length);r.set(i,0);let s=i.length,l=i[i.length-2];for(let e=0;e<o;e++)r[s++]=n[e<<1]+l,r[s++]=n[(e<<1)+1];return r.buffer}static insert(e,t,i){if(null===e||e===Y)return e;let n=toUint32Array(e),o=n.length>>>1,r=Z.A.findIndexInTokensArray(n,t);if(r>0){let e=n[r-1<<1];e===t&&r--}for(let e=r;e<o;e++)n[e<<1]+=i;return e}};function toUint32Array(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var J=i(91957);let ContiguousTokensStore=class ContiguousTokensStore{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),null!==n&&n!==Y)return new Z.A(toUint32Array(n),i,this._languageIdCodec);let o=new Uint32Array(2);return o[0]=i.length,o[1]=getDefaultMetadata(this._languageIdCodec.encodeLanguageId(e)),new Z.A(o,i,this._languageIdCodec)}static _massageTokens(e,t,i){let n=i?toUint32Array(i):null;if(0===t){let t=!1;if(n&&n.length>1&&(t=J.N.getLanguageId(n[1])!==e),!t)return Y}if(!n||0===n.length){let i=new Uint32Array(2);return i[0]=t,i[1]=getDefaultMetadata(e),i.buffer}return(n[n.length-2]=t,0===n.byteOffset&&n.byteLength===n.buffer.byteLength)?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let i=[];for(let e=0;e<t;e++)i[e]=null;this._lineTokens=o.Zv(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,o){let r=ContiguousTokensStore._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);let s=this._lineTokens[t];return this._lineTokens[t]=r,!!o&&!ContiguousTokensStore._equals(s,r)}static _equals(e,t){if(!e||!t)return!e&&!t;let i=toUint32Array(e),n=toUint32Array(t);if(i.length!==n.length)return!1;for(let e=0,t=i.length;e<t;e++)if(i[e]!==n[e])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new _.L(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=ContiguousTokensEditing.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=ContiguousTokensEditing.deleteEnding(this._lineTokens[t],e.startColumn-1);let i=e.endLineNumber-1,n=null;i<this._len&&(n=ContiguousTokensEditing.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=ContiguousTokensEditing.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(0===t&&0===i)return;let n=e.lineNumber-1;if(!(n>=this._len)){if(0===t){this._lineTokens[n]=ContiguousTokensEditing.insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=ContiguousTokensEditing.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=ContiguousTokensEditing.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};let i=[];for(let n=0,o=e.length;n<o;n++){let o=e[n],r=0,s=0,l=!1;for(let e=o.startLineNumber;e<=o.endLineNumber;e++)if(l)this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),o.getLineTokens(e),!1),s=e;else{let i=this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),o.getLineTokens(e),!0);i&&(l=!0,r=e,s=e)}l&&i.push({fromLineNumber:r,toLineNumber:s})}return{changes:i}}};function getDefaultMetadata(e){return(e<<0|33588224)>>>0}let SparseTokensStore=class SparseTokensStore{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){let n=t[0].getRange(),o=t[t.length-1].getRange();if(!n||!o)return e;i=e.plusRange(n).plusRange(o)}let n=null;for(let e=0,t=this._pieces.length;e<t;e++){let o=this._pieces[e];if(o.endLineNumber<i.startLineNumber)continue;if(o.startLineNumber>i.endLineNumber){n=n||{index:e};break}if(o.removeTokens(i),o.isEmpty()){this._pieces.splice(e,1),e--,t--;continue}if(o.endLineNumber<i.startLineNumber)continue;if(o.startLineNumber>i.endLineNumber){n=n||{index:e};continue}let[r,s]=o.split(i);if(r.isEmpty()){n=n||{index:e};continue}s.isEmpty()||(this._pieces.splice(e,1,r,s),e++,t++,n=n||{index:e})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=o.Zv(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(0===t.getLineContent().length)return t;let i=this._pieces;if(0===i.length)return t;let n=SparseTokensStore._findFirstPieceWithLine(i,e),o=i[n].getLineTokens(e);if(!o)return t;let r=t.getCount(),s=o.getCount(),l=0,d=[],c=0,u=0,emitToken=(e,t)=>{e!==u&&(u=e,d[c++]=e,d[c++]=t)};for(let e=0;e<s;e++){let i=o.getStartCharacter(e),n=o.getEndCharacter(e),s=o.getMetadata(e),d=((1&s?2048:0)|(2&s?4096:0)|(4&s?8192:0)|(8&s?16384:0)|(16&s?16744448:0)|(32&s?4278190080:0))>>>0,c=~d>>>0;for(;l<r&&t.getEndOffset(l)<=i;)emitToken(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<i&&emitToken(i,t.getMetadata(l));l<r&&t.getEndOffset(l)<n;)emitToken(t.getEndOffset(l),t.getMetadata(l)&c|s&d),l++;if(l<r)emitToken(n,t.getMetadata(l)&c|s&d),t.getEndOffset(l)===n&&l++;else{let e=Math.min(Math.max(0,l-1),r-1);emitToken(n,t.getMetadata(e)&c|s&d)}}for(;l<r;)emitToken(t.getEndOffset(l),t.getMetadata(l)),l++;return new Z.A(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let o=i+Math.floor((n-i)/2);if(e[o].endLineNumber<t)i=o+1;else if(e[o].startLineNumber>t)n=o-1;else{for(;o>i&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return i}acceptEdit(e,t,i,n,o){for(let r of this._pieces)r.acceptEdit(e,t,i,n,o)}};let TokenizationTextModelPart=class TokenizationTextModelPart extends K.U{constructor(e,t,i,n,o,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=i,this._bracketPairsTextModelPart=n,this._languageId=o,this._attachedViews=r,this._semanticTokens=new SparseTokensStore(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new l.Q5),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new l.Q5),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new l.Q5),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new GrammarTokens(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(e=>{this._emitModelTokensChangedEvent(e)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(let t of e.changes){let[e,i,n]=(0,g.Q)(t.text);this._semanticTokens.acceptEdit(t.range,e,i,n,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);let t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new s.he("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this.grammarTokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;let i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();let t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),o=n.findTokenIndexAtOffset(t.column-1),[r,s]=TokenizationTextModelPart._findLanguageBoundaries(n,o),l=(0,z.t2)(t.column,this.getLanguageConfiguration(n.getLanguageId(o)).getWordDefinition(),i.substring(r,s),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){let[r,s]=TokenizationTextModelPart._findLanguageBoundaries(n,o-1),l=(0,z.t2)(t.column,this.getLanguageConfiguration(n.getLanguageId(o-1)).getWordDefinition(),i.substring(r,s),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){let i=e.getLanguageId(t),n=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)n=e.getStartOffset(o);let o=e.getLineContent().length;for(let n=t,r=e.getCount();n<r&&e.getLanguageId(n)===i;n++)o=e.getEndOffset(n);return[n,o]}getWordUntilPosition(e){let t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){let i=this._textModel.validatePosition(new _.L(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;let i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};let GrammarTokens=class GrammarTokens extends d.JT{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new d.XK),this._tokens=new ContiguousTokensStore(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new d.XK),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new l.Q5),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new l.Q5),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new d.b2),this._register(U.RW.onDidChange(e=>{let t=this.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&this.resetTokenization()})),this.resetTokenization(),this._register(n.onDidChangeVisibleRanges(({view:e,state:t})=>{if(t){let i=this._attachedViewStates.get(e);i||(i=new AttachedViewHandler(()=>this.refreshRanges(i.lineRanges)),this._attachedViewStates.set(e,i)),i.handleStateChange(t)}else this._attachedViewStates.deleteAndDispose(e)}))}resetTokenization(e=!0){var t;this._tokens.flush(),null===(t=this._debugBackgroundTokens)||void 0===t||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new TrackingTokenizationStateStore(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let[i,n]=(()=>{let e;if(this._textModel.isTooLargeForTokenization())return[null,null];let t=U.RW.get(this.getLanguageId());if(!t)return[null,null];try{e=t.getInitialState()}catch(e){return(0,s.dL)(e),[null,null]}return[t,e]})();if(i&&n?this._tokenizer=new TokenizerWithStateStoreAndTextModel(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let e={setTokens:e=>{this.setTokens(e)},backgroundTokenizationFinished:()=>{2!==this._backgroundTokenizationState&&(this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire())},setEndState:(e,t)=>{var i;if(!this._tokenizer)return;let n=this._tokenizer.store.getFirstInvalidEndStateLineNumber();null!==n&&e>=n&&(null===(i=this._tokenizer)||void 0===i||i.store.setEndState(e,t))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,e)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new DefaultBackgroundTokenizer(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),(null==i?void 0:i.backgroundTokenizerShouldOnlyVerifyTokens)&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new ContiguousTokensStore(this._languageIdCodec),this._debugBackgroundStates=new TrackingTokenizationStateStore(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:e=>{var t;null===(t=this._debugBackgroundTokens)||void 0===t||t.setMultilineTokens(e,this._textModel)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{var i;null===(i=this._debugBackgroundStates)||void 0===i||i.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;null===(e=this._defaultBackgroundTokenizer)||void 0===e||e.handleChanges()}handleDidChangeContent(e){var t,i,n;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(let i of e.changes){let[e,n]=(0,g.Q)(i.text);this._tokens.acceptEdit(i.range,e,n),null===(t=this._debugBackgroundTokens)||void 0===t||t.acceptEdit(i.range,e,n)}null===(i=this._debugBackgroundStates)||void 0===i||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),null===(n=this._defaultBackgroundTokenizer)||void 0===n||n.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=f.z.joinMany([...this._attachedViewStates].map(([e,t])=>t.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var i,n;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let o=new ContiguousMultilineTokensBuilder,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(o,e,t),s=this.setTokens(o.finalize());if(r)for(let e of s.changes)null===(i=this._backgroundTokenizer.value)||void 0===i||i.requestTokens(e.fromLineNumber,e.toLineNumber+1);null===(n=this._defaultBackgroundTokenizer)||void 0===n||n.checkFinished()}forceTokenization(e){var t,i;let n=new ContiguousMultilineTokensBuilder;null===(t=this._tokenizer)||void 0===t||t.updateTokensUntilLine(n,e),this.setTokens(n.finalize()),null===(i=this._defaultBackgroundTokenizer)||void 0===i||i.checkFinished()}isCheapToTokenize(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;let i=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,i);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let o=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,i);!n.equals(o)&&(null===(t=this._debugBackgroundTokenizer.value)||void 0===t?void 0:t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;let n=this._textModel.validatePosition(new _.L(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;let n=this._textModel.validatePosition(e);return this.forceTokenization(n.lineNumber),this._tokenizer.tokenizeLineWithEdit(n,t,i)}get hasTokens(){return this._tokens.hasTokens}};let AttachedViewHandler=class AttachedViewHandler extends d.JT{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new H.pY(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){(0,o.fS)(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}};var X=i(32462),ee=i(30264),__param=function(e,t){return function(i,n){t(i,n,e)}};function createTextBufferFactory(e){let t=new PieceTreeTextBufferBuilder;return t.acceptChunk(e),t.finish()}function createTextBufferFactoryFromSnapshot(e){let t;let i=new PieceTreeTextBufferBuilder;for(;"string"==typeof(t=e.read());)i.acceptChunk(t);return i.finish()}function createTextBuffer(e,t){return("string"==typeof e?createTextBufferFactory(e):w.Hf(e)?createTextBufferFactoryFromSnapshot(e):e).create(t)}let et=0;let TextModelSnapshot=class TextModelSnapshot{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,i=0;for(;;){let n=this._source.read();if(null===n){if(this._eos=!0,0===t)return null;return e.join("")}if(n.length>0&&(e[t++]=n,i+=n.length),i>=65536)return e.join("")}}};let invalidFunc=()=>{throw Error("Invalid change accessor")},ei=n=class extends d.JT{static resolveOptions(e,t){if(t.detectIndentation){let i=guessIndentation(e,t.tabSize,t.insertSpaces);return new w.dJ({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new w.dJ(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return(0,d.F8)(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,o=null,r,s,g){super(),this._undoRedoService=r,this._languageService=s,this._languageConfigurationService=g,this._onWillDispose=this._register(new l.Q5),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new DidChangeDecorationsEmitter(e=>this.handleBeforeFireDecorationsChangedEvent(e))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new l.Q5),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new l.Q5),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new l.Q5),this._eventEmitter=this._register(new DidChangeContentEmitter),this._languageSelectionListener=this._register(new d.XK),this._deltaDecorationCallCnt=0,this._attachedViews=new AttachedViews,et++,this.id="$model"+et,this.isForSimpleWidget=i.isForSimpleWidget,null==o?this._associatedResource=u.o.parse("inmemory://model/"+et):this._associatedResource=o,this._attachedEditorCount=0;let{textBuffer:m,disposable:f}=createTextBuffer(e,i.defaultEOL);this._buffer=m,this._bufferDisposable=f,this._options=n.resolveOptions(this._buffer,i);let _="string"==typeof t?t:t.languageId;"string"!=typeof t&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new BracketPairsTextModelPart(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new O.l(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ColorizedBracketPairsDecorationProvider(this)),this._tokenizationTextModelPart=new TokenizationTextModelPart(this._languageService,this._languageConfigurationService,this,this._bracketPairs,_,this._attachedViews);let C=this._buffer.getLineCount(),b=this._buffer.getValueLengthInRange(new v.e(1,1,C,this._buffer.getLineLength(C)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=b>n.LARGE_FILE_SIZE_THRESHOLD||C>n.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=b>n.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=b>n._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=c.PJ(et),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager=new P.NL(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(_)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let e=new PieceTreeTextBuffer([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=d.JT.None}_assertNotDisposed(){if(this._isDisposed)throw Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new X.fV(e,t)))}setValue(e){if(this._assertNotDisposed(),null==e)throw(0,s.b1)();let{textBuffer:t,disposable:i}=createTextBuffer(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,o,r,s,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:s}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();let i=this.getFullModelRange(),n=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new X.dQ([new X.Jx],this._versionId,!1,!1),this._createContentChanged2(new v.e(1,1,o,r),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();let t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;let i=this.getFullModelRange(),n=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new X.dQ([new X.CZ],this._versionId,!1,!1),this._createContentChanged2(new v.e(1,1,o,r),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){let n=t[i],o=n.range,r=n.cachedAbsoluteStart-n.start,s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),l=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);n.cachedAbsoluteStart=s,n.cachedAbsoluteEnd=l,n.cachedVersionId=e,n.start=s-r,n.end=l-r,recomputeMaxEnd(n)}}onBeforeAttached(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0,i=this._buffer.getLineCount();for(let n=1;n<=i;n++){let i=this._buffer.getLineLength(n);i>=1e4?t+=i:e+=i}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=void 0!==e.tabSize?e.tabSize:this._options.tabSize,i=void 0!==e.indentSize?e.indentSize:this._options.originalIndentSize,n=void 0!==e.insertSpaces?e.insertSpaces:this._options.insertSpaces,o=void 0!==e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=void 0!==e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,s=new w.dJ({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(s))return;let l=this._options.createChangeEvent(s);this._options=s,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let i=guessIndentation(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),(0,m.x)(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){let t=this.findMatches(c.Qe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(e=>({range:e.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new s.he("Operation would exceed heap memory limits");let i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new TextModelSnapshot(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();let i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.he("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.he("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new s.he("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.he("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.he("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.he("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){let t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn,o=Math.floor("number"!=typeof i||isNaN(i)?1:i),r=Math.floor("number"!=typeof n||isNaN(n)?1:n);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{let e=this.getLineMaxColumn(o);r>=e&&(r=e)}let s=e.endLineNumber,l=e.endColumn,d=Math.floor("number"!=typeof s||isNaN(s)?1:s),c=Math.floor("number"!=typeof l||isNaN(l)?1:l);if(d<1)d=1,c=1;else if(d>t)d=t,c=this.getLineMaxColumn(d);else if(c<=1)c=1;else{let e=this.getLineMaxColumn(d);c>=e&&(c=e)}return i===o&&n===r&&s===d&&l===c&&e instanceof v.e&&!(e instanceof C.Y)?e:new v.e(o,r,d,c)}_isValidPosition(e,t,i){if("number"!=typeof e||"number"!=typeof t||isNaN(e)||isNaN(t)||e<1||t<1||(0|e)!==e||(0|t)!==t)return!1;let n=this._buffer.getLineCount();if(e>n)return!1;if(1===t)return!0;let o=this.getLineMaxColumn(e);if(t>o)return!1;if(1===i){let i=this._buffer.getLineCharCode(e,t-2);if(c.ZG(i))return!1}return!0}_validatePosition(e,t,i){let n=Math.floor("number"!=typeof e||isNaN(e)?1:e),o=Math.floor("number"!=typeof t||isNaN(t)?1:t),r=this._buffer.getLineCount();if(n<1)return new _.L(1,1);if(n>r)return new _.L(r,this.getLineMaxColumn(r));if(o<=1)return new _.L(n,1);let s=this.getLineMaxColumn(n);if(o>=s)return new _.L(n,s);if(1===i){let e=this._buffer.getLineCharCode(n,o-2);if(c.ZG(e))return new _.L(n,o-1)}return new _.L(n,o)}validatePosition(e){return(this._assertNotDisposed(),e instanceof _.L&&this._isValidPosition(e.lineNumber,e.column,1))?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(o,r,0))return!1;if(1===t){let e=n>1?this._buffer.getLineCharCode(i,n-2):0,t=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,s=c.ZG(e),l=c.ZG(t);return!s&&!l}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof v.e&&!(e instanceof C.Y)&&this._isValidRange(e,1))return e;let t=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),n=t.lineNumber,o=t.column,r=i.lineNumber,s=i.column;{let e=o>1?this._buffer.getLineCharCode(n,o-2):0,t=s>1&&s<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,s-2):0,i=c.ZG(e),l=c.ZG(t);return i||l?n===r&&o===s?new v.e(n,o-1,r,s-1):i&&l?new v.e(n,o-1,r,s+1):i?new v.e(n,o-1,r,s):new v.e(n,o,r,s+1):new v.e(n,o,r,s)}}modifyPosition(e,t){this._assertNotDisposed();let i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let e=this.getLineCount();return new v.e(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,o,r,s=999){let l;this._assertNotDisposed();let d=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every(e=>v.e.isIRange(e))&&(d=t.map(e=>this.validateRange(e)))),null===d&&(d=[this.getFullModelRange()]),d=d.sort((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn);let c=[];if(c.push(d.reduce((e,t)=>v.e.areIntersecting(e,t)?e.plusRange(t):(c.push(e),t))),!i&&0>e.indexOf("\n")){let t=new W.bc(e,i,n,o),d=t.parseSearchRequest();if(!d)return[];l=e=>this.findMatchesLineByLine(e,d,r,s)}else l=t=>W.pM.findMatches(this,new W.bc(e,i,n,o),t,r,s);return c.map(l).reduce((e,t)=>e.concat(t),[])}findNextMatch(e,t,i,n,o,r){this._assertNotDisposed();let s=this.validatePosition(t);if(!i&&0>e.indexOf("\n")){let t=new W.bc(e,i,n,o),l=t.parseSearchRequest();if(!l)return null;let d=this.getLineCount(),c=new v.e(s.lineNumber,s.column,d,this.getLineMaxColumn(d)),u=this.findMatchesLineByLine(c,l,r,1);return(W.pM.findNextMatch(this,new W.bc(e,i,n,o),s,r),u.length>0)?u[0]:(c=new v.e(1,1,s.lineNumber,this.getLineMaxColumn(s.lineNumber)),(u=this.findMatchesLineByLine(c,l,r,1)).length>0)?u[0]:null}return W.pM.findNextMatch(this,new W.bc(e,i,n,o),s,r)}findPreviousMatch(e,t,i,n,o,r){this._assertNotDisposed();let s=this.validatePosition(t);return W.pM.findPreviousMatch(this,new W.bc(e,i,n,o),s,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){let t="\n"===this.getEOL()?0:1;if(t!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof w.Qi?e:new w.Qi(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let i=t.map(e=>({range:this.validateRange(e.range),text:e.text})),n=!0;if(e)for(let t=0,o=e.length;t<o;t++){let o=e[t],r=!1;for(let e=0,t=i.length;e<t;e++){let t=i[e].range,n=t.startLineNumber>o.endLineNumber,s=o.startLineNumber>t.endLineNumber;if(!n&&!s){r=!0;break}}if(!r){n=!1;break}}if(n)for(let e=0,n=this._trimAutoWhitespaceLines.length;e<n;e++){let n=this._trimAutoWhitespaceLines[e],o=this.getLineMaxColumn(n),r=!0;for(let e=0,t=i.length;e<t;e++){let t=i[e].range,s=i[e].text;if(!(n<t.startLineNumber||n>t.endLineNumber||n===t.startLineNumber&&t.startColumn===o&&t.isEmpty()&&s&&s.length>0&&"\n"===s.charAt(0)||n===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&s&&s.length>0&&"\n"===s.charAt(s.length-1))){r=!1;break}}if(r){let e=new v.e(n,1,n,o);t.push(new w.Qi(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n)}_applyUndo(e,t,i,n){let o=e.map(e=>{let t=this.getPositionAt(e.newPosition),i=this.getPositionAt(e.newEnd);return{range:new v.e(t.lineNumber,t.column,i.lineNumber,i.column),text:e.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,i,n)}_applyRedo(e,t,i,n){let o=e.map(e=>{let t=this.getPositionAt(e.oldPosition),i=this.getPositionAt(e.oldEnd);return{range:new v.e(t.lineNumber,t.column,i.lineNumber,i.column),text:e.newText}});this._applyUndoRedoEdits(o,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){let i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),s=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,0!==s.length){for(let e=0,t=s.length;e<t;e++){let t=s[e];this._decorationsTree.acceptReplace(t.rangeOffset,t.rangeLength,t.text.length,t.forceMoveMarkers)}let e=[];this._increaseVersionId();let t=i;for(let i=0,n=s.length;i<n;i++){let n=s[i],[l]=(0,g.Q)(n.text);this._onDidChangeDecorations.fire();let d=n.range.startLineNumber,c=n.range.endLineNumber,u=c-d,m=Math.min(u,l),f=l-u,v=r-t-f+d,C=v+l,b=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new _.L(v,1)),this.getOffsetAt(new _.L(C,this.getLineMaxColumn(C))),0),S=X.gk.fromDecorations(b),y=new o.H9(S);for(let t=m;t>=0;t--){let i=d+t,n=v+t;y.takeFromEndWhile(e=>e.lineNumber>n);let o=y.takeFromEndWhile(e=>e.lineNumber===n);e.push(new X.rU(i,this.getLineContent(n),o))}if(m<u){let t=d+m;e.push(new X.lN(t+1,c))}if(m<l){let i=new o.H9(S),n=d+m,s=l-m,c=r-t-s+n+1,u=[],g=[];for(let e=0;e<s;e++){let t=c+e;g[e]=this.getLineContent(t),i.takeWhile(e=>e.lineNumber<t),u[e]=i.takeWhile(e=>e.lineNumber===t)}e.push(new X.Tx(n+1,d+l,g,u))}t+=f}this._emitContentChangedEvent(new X.dQ(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===n.reverseEdits?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(null===e||0===e.size)return;let t=Array.from(e),i=t.map(e=>new X.rU(e,this.getLineContent(e),this._getInjectedTextInLine(e)));this._onDidChangeInjectedText.fire(new X.D8(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let i={addDecoration:(t,i)=>this._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,_normalizeOptions(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,i)=>0===t.length&&0===i.length?[]:this._deltaDecorationsImpl(e,t,i)},n=null;try{n=t(i)}catch(e){(0,s.dL)(e)}return i.addDecoration=invalidFunc,i.changeDecoration=invalidFunc,i.changeDecorationOptions=invalidFunc,i.removeDecoration=invalidFunc,i.deltaDecorations=invalidFunc,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),(0,s.dL)(Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){let n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:en[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;let o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),s=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,s,o),n.setOptions(en[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;let t=this._decorationsTree.collectNodesFromOwner(e);for(let e=0,i=t.length;e<i;e++){let i=t[e];this._decorationsTree.delete(i),delete this._decorations[i.id]}}getDecorationOptions(e){let t=this._decorations[e];return t?t.options:null}getDecorationRange(e){let t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1,r=!1){let s=this.getLineCount(),l=Math.min(s,Math.max(1,t)),d=this.getLineMaxColumn(l),c=new v.e(Math.min(s,Math.max(1,e)),1,l,d),u=this._getDecorationsInRange(c,i,n,r);return(0,o.vA)(u,this._decorationProvider.getDecorationsInRange(c,i,n)),u}getDecorationsInRange(e,t=0,i=!1,n=!1,r=!1){let s=this.validateRange(e),l=this._getDecorationsInRange(s,t,i,r);return(0,o.vA)(l,this._decorationProvider.getDecorationsInRange(s,t,i,n)),l}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){let t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return X.gk.fromDecorations(n).filter(t=>t.lineNumber===e)}getAllDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!1,!1).concat(this._decorationProvider.getAllDecorations(e,t))}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,n){let o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,r,t,i,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){let i=this._decorations[e];if(!i)return;if(i.options.after){let t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(i.options.before){let t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}let n=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),r=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,r,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){let i=this._decorations[e];if(!i)return;let n=!!i.options.overviewRuler&&!!i.options.overviewRuler.color,o=!!t.overviewRuler&&!!t.overviewRuler.color;if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){let e=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(i.options.before||t.before){let e=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}let r=isOptionsInjectedText(t)!==isNodeInjectedText(i);n!==o||r?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,n=!1){let o=this.getVersionId(),r=t.length,s=0,l=i.length,d=0;this._onDidChangeDecorations.beginDeferredEmit();try{let c=Array(l);for(;s<r||d<l;){let u=null;if(s<r){do u=this._decorations[t[s++]];while(!u&&s<r);if(u){if(u.options.after){let e=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(u.options.before){let e=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(u),n||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(d<l){if(!u){let e=++this._lastDecorationId,t=`${this._instanceId};${e}`;u=new IntervalNode(t,0,0),this._decorations[t]=u}let t=i[d],r=this._validateRangeRelaxedNoAllocations(t.range),s=_normalizeOptions(t.options),l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),g=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);u.ownerId=e,u.reset(o,l,g,r),u.setOptions(s),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(s),this._decorationsTree.insert(u),c[d]=u.id,d++}else u&&delete this._decorations[u.id]}return c}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){"string"==typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return indentOfLine(this.getLineContent(e))+1}};function indentOfLine(e){let t=0;for(let i of e)if(" "===i||"	"===i)t++;else break;return t}function isNodeInOverviewRuler(e){return!!e.options.overviewRuler&&!!e.options.overviewRuler.color}function isOptionsInjectedText(e){return!!e.after||!!e.before}function isNodeInjectedText(e){return!!e.options.after||!!e.options.before}ei._MODEL_SYNC_LIMIT=52428800,ei.LARGE_FILE_SIZE_THRESHOLD=20971520,ei.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,ei.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456,ei.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:b.D.tabSize,indentSize:b.D.indentSize,insertSpaces:b.D.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:b.D.trimAutoWhitespace,largeFileOptimizations:b.D.largeFileOptimizations,bracketPairColorizationOptions:b.D.bracketPairColorizationOptions},ei=n=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(4,ee.tJ),__param(5,S.O),__param(6,y.c_)],ei);let DecorationsTrees=class DecorationsTrees{constructor(){this._decorationsTree0=new IntervalTree,this._decorationsTree1=new IntervalTree,this._injectedTextDecorationsTree=new IntervalTree}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let i of t)null===i.range&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,o,r){let s=e.getVersionId(),l=this._intervalSearch(t,i,n,o,s,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,n,o,r){let s=this._decorationsTree0.intervalSearch(e,t,i,n,o,r),l=this._decorationsTree1.intervalSearch(e,t,i,n,o,r),d=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,o,r);return s.concat(l).concat(d)}getInjectedTextInInterval(e,t,i,n){let o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,o,!1);return this._ensureNodesHaveRanges(e,r).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getAllInjectedText(e,t){let i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getAll(e,t,i,n,o){let r=e.getVersionId(),s=this._search(t,i,n,r,o);return this._ensureNodesHaveRanges(e,s)}_search(e,t,i,n,o){if(i)return this._decorationsTree1.search(e,t,n,o);{let i=this._decorationsTree0.search(e,t,n,o),r=this._decorationsTree1.search(e,t,n,o),s=this._injectedTextDecorationsTree.search(e,t,n,o);return i.concat(r).concat(s)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.insert(e):isNodeInOverviewRuler(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.delete(e):isNodeInOverviewRuler(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){isNodeInjectedText(e)?this._injectedTextDecorationsTree.resolveNode(e,t):isNodeInOverviewRuler(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}};function cleanClassName(e){return e.replace(/[^a-z0-9\-_]/gi," ")}let DecorationOptions=class DecorationOptions{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}};let ModelDecorationOverviewRulerOptions=class ModelDecorationOverviewRulerOptions extends DecorationOptions{constructor(e){super(e),this._resolvedColor=null,this.position="number"==typeof e.position?e.position:w.sh.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"==typeof e)return e;let i=e?t.getColor(e.id):null;return i?i.toString():""}};let ModelDecorationGlyphMarginOptions=class ModelDecorationGlyphMarginOptions{constructor(e){var t;this.position=null!==(t=null==e?void 0:e.position)&&void 0!==t?t:w.U.Center,this.persistLane=null==e?void 0:e.persistLane}};let ModelDecorationMinimapOptions=class ModelDecorationMinimapOptions extends DecorationOptions{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"==typeof e?r.Il.fromHex(e):t.getColor(e.id)}};let ModelDecorationInjectedTextOptions=class ModelDecorationInjectedTextOptions{static from(e){return e instanceof ModelDecorationInjectedTextOptions?e:new ModelDecorationInjectedTextOptions(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}};let ModelDecorationOptions=class ModelDecorationOptions{static register(e){return new ModelDecorationOptions(e)}static createDynamic(e){return new ModelDecorationOptions(e)}constructor(e){var t,i,n,o,r,s;this.description=e.description,this.blockClassName=e.blockClassName?cleanClassName(e.blockClassName):null,this.blockDoesNotCollapse=null!==(t=e.blockDoesNotCollapse)&&void 0!==t?t:null,this.blockIsAfterEnd=null!==(i=e.blockIsAfterEnd)&&void 0!==i?i:null,this.blockPadding=null!==(n=e.blockPadding)&&void 0!==n?n:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?cleanClassName(e.className):null,this.shouldFillLineOnLineBreak=null!==(o=e.shouldFillLineOnLineBreak)&&void 0!==o?o:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new ModelDecorationOverviewRulerOptions(e.overviewRuler):null,this.minimap=e.minimap?new ModelDecorationMinimapOptions(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new ModelDecorationGlyphMarginOptions(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?cleanClassName(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?cleanClassName(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?cleanClassName(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?c.fA(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?cleanClassName(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?cleanClassName(e.marginClassName):null,this.inlineClassName=e.inlineClassName?cleanClassName(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?cleanClassName(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?cleanClassName(e.afterContentClassName):null,this.after=e.after?ModelDecorationInjectedTextOptions.from(e.after):null,this.before=e.before?ModelDecorationInjectedTextOptions.from(e.before):null,this.hideInCommentTokens=null!==(r=e.hideInCommentTokens)&&void 0!==r&&r,this.hideInStringTokens=null!==(s=e.hideInStringTokens)&&void 0!==s&&s}};ModelDecorationOptions.EMPTY=ModelDecorationOptions.register({description:"empty"});let en=[ModelDecorationOptions.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ModelDecorationOptions.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function _normalizeOptions(e){return e instanceof ModelDecorationOptions?e:ModelDecorationOptions.createDynamic(e)}let DidChangeDecorationsEmitter=class DidChangeDecorationsEmitter extends d.JT{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new l.Q5),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,0===this._deferredCnt&&(this._shouldFireDeferred&&this.doFire(),null===(e=this._affectedInjectedTextLines)||void 0===e||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!(null===(t=e.minimap)||void 0===t?void 0:t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(null===(i=e.overviewRuler)||void 0===i?void 0:i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}};let DidChangeContentEmitter=class DidChangeContentEmitter extends d.JT{constructor(){super(),this._fastEmitter=this._register(new l.Q5),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new l.Q5),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};let AttachedViews=class AttachedViews{constructor(){this._onDidChangeVisibleRanges=new l.Q5,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){let e=new AttachedViewImpl(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}};let AttachedViewImpl=class AttachedViewImpl{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){let i=e.map(e=>new f.z(e.startLineNumber,e.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}},97311:function(e,t,i){"use strict";i.d(t,{U:function(){return TextModelPart}});var n=i(87932);let TextModelPart=class TextModelPart extends n.JT{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw Error("TextModelPart is disposed!")}}},49987:function(e,t,i){"use strict";i.d(t,{bc:function(){return SearchParams},cM:function(){return isValidMatch},iE:function(){return createFindMatch},pM:function(){return TextModelSearch},sz:function(){return Searcher}});var n=i(45837),o=i(50673),r=i(11953),s=i(30822),l=i(86809);let SearchParams=class SearchParams{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){let e;if(""===this.searchString)return null;e=this.isRegex?isMultilineRegexSource(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=n.GF(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(e){return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new l.Tx(t,this.wordSeparators?(0,o.u)(this.wordSeparators):null,i?this.searchString:null)}};function isMultilineRegexSource(e){if(!e||0===e.length)return!1;for(let t=0,i=e.length;t<i;t++){let n=e.charCodeAt(t);if(10===n)return!0;if(92===n){if(++t>=i)break;let n=e.charCodeAt(t);if(110===n||114===n||87===n)return!0}}return!1}function createFindMatch(e,t,i){if(!i)return new l.tk(e,null);let n=[];for(let e=0,i=t.length;e<i;e++)n[e]=t[e];return new l.tk(e,n)}let LineFeedCounter=class LineFeedCounter{constructor(e){let t=[],i=0;for(let n=0,o=e.length;n<o;n++)10===e.charCodeAt(n)&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,i=0,n=t.length-1;if(-1===n||e<=t[0])return 0;for(;i<n;){let o=i+((n-i)/2>>0);t[o]>=e?n=o-1:t[o+1]>=e?(i=o,n=o):i=o+1}return i+1}};let TextModelSearch=class TextModelSearch{static findMatches(e,t,i,n,o){let r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new Searcher(r.wordSeparators,r.regex),n,o):this._doFindMatchesLineByLine(e,i,r,n,o):[]}static _getMultilineMatchRange(e,t,i,n,o,r){let l,d;let c=0;if(n?(c=n.findLineFeedCountBeforeOffset(o),l=t+o+c):l=t+o,n){let e=n.findLineFeedCountBeforeOffset(o+r.length),t=e-c;d=l+r.length+t}else d=l+r.length;let u=e.getPositionAt(l),g=e.getPositionAt(d);return new s.e(u.lineNumber,u.column,g.lineNumber,g.column)}static _doFindMatchesMultiline(e,t,i,n,o){let r;let s=e.getOffsetAt(t.getStartPosition()),l=e.getValueInRange(t,1),d="\r\n"===e.getEOL()?new LineFeedCounter(l):null,c=[],u=0;for(i.reset(0);(r=i.next(l))&&(c[u++]=createFindMatch(this._getMultilineMatchRange(e,s,l,d,r.index,r[0]),r,n),!(u>=o)););return c}static _doFindMatchesLineByLine(e,t,i,n,o){let r=[],s=0;if(t.startLineNumber===t.endLineNumber){let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return s=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,s,r,n,o),r}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);s=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,s,r,n,o);for(let l=t.startLineNumber+1;l<t.endLineNumber&&s<o;l++)s=this._findMatchesInLine(i,e.getLineContent(l),l,0,s,r,n,o);if(s<o){let l=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);s=this._findMatchesInLine(i,l,t.endLineNumber,0,s,r,n,o)}return r}static _findMatchesInLine(e,t,i,n,o,r,d,c){let u;let g=e.wordSeparators;if(!d&&e.simpleSearch){let d=e.simpleSearch,u=d.length,m=t.length,f=-u;for(;-1!==(f=t.indexOf(d,f+u))&&(!(!g||isValidMatch(g,t,m,f,u))||(r[o++]=new l.tk(new s.e(i,f+1+n,i,f+1+u+n),null),!(o>=c))););return o}let m=new Searcher(e.wordSeparators,e.regex);m.reset(0);do if((u=m.next(t))&&(r[o++]=createFindMatch(new s.e(i,u.index+1+n,i,u.index+1+u[0].length+n),u,d),o>=c))break;while(u);return o}static findNextMatch(e,t,i,n){let o=t.parseSearchRequest();if(!o)return null;let r=new Searcher(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,i,r,n):this._doFindNextMatchLineByLine(e,i,r,n)}static _doFindNextMatchMultiline(e,t,i,n){let o=new r.L(t.lineNumber,1),l=e.getOffsetAt(o),d=e.getLineCount(),c=e.getValueInRange(new s.e(o.lineNumber,o.column,d,e.getLineMaxColumn(d)),1),u="\r\n"===e.getEOL()?new LineFeedCounter(c):null;i.reset(t.column-1);let g=i.next(c);return g?createFindMatch(this._getMultilineMatchRange(e,l,c,u,g.index,g[0]),g,n):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new r.L(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){let o=e.getLineCount(),r=t.lineNumber,s=e.getLineContent(r),l=this._findFirstMatchInLine(i,s,r,t.column,n);if(l)return l;for(let t=1;t<=o;t++){let s=(r+t-1)%o,l=e.getLineContent(s+1),d=this._findFirstMatchInLine(i,l,s+1,1,n);if(d)return d}return null}static _findFirstMatchInLine(e,t,i,n,o){e.reset(n-1);let r=e.next(t);return r?createFindMatch(new s.e(i,r.index+1,i,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,i,n){let o=t.parseSearchRequest();if(!o)return null;let r=new Searcher(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,n):this._doFindPreviousMatchLineByLine(e,i,r,n)}static _doFindPreviousMatchMultiline(e,t,i,n){let o=this._doFindMatchesMultiline(e,new s.e(1,1,t.lineNumber,t.column),i,n,9990);if(o.length>0)return o[o.length-1];let l=e.getLineCount();return t.lineNumber!==l||t.column!==e.getLineMaxColumn(l)?this._doFindPreviousMatchMultiline(e,new r.L(l,e.getLineMaxColumn(l)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){let o=e.getLineCount(),r=t.lineNumber,s=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,s,r,n);if(l)return l;for(let t=1;t<=o;t++){let s=(o+r-t-1)%o,l=e.getLineContent(s+1),d=this._findLastMatchInLine(i,l,s+1,n);if(d)return d}return null}static _findLastMatchInLine(e,t,i,n){let o,r=null;for(e.reset(0);o=e.next(t);)r=createFindMatch(new s.e(i,o.index+1,i,o.index+1+o[0].length),o,n);return r}};function leftIsWordBounday(e,t,i,n,o){if(0===n)return!0;let r=t.charCodeAt(n-1);if(0!==e.get(r)||13===r||10===r)return!0;if(o>0){let i=t.charCodeAt(n);if(0!==e.get(i))return!0}return!1}function rightIsWordBounday(e,t,i,n,o){if(n+o===i)return!0;let r=t.charCodeAt(n+o);if(0!==e.get(r)||13===r||10===r)return!0;if(o>0){let i=t.charCodeAt(n+o-1);if(0!==e.get(i))return!0}return!1}function isValidMatch(e,t,i,n,o){return leftIsWordBounday(e,t,i,n,o)&&rightIsWordBounday(e,t,i,n,o)}let Searcher=class Searcher{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t;let i=e.length;do{if(this._prevMatchStartIndex+this._prevMatchLength===i||!(t=this._searchRegex.exec(e)))break;let o=t.index,r=t[0].length;if(o===this._prevMatchStartIndex&&r===this._prevMatchLength){if(0===r){n.ZH(e,i,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}break}if(this._prevMatchStartIndex=o,this._prevMatchLength=r,!this._wordSeparators||isValidMatch(this._wordSeparators,e,i,o,r))return t}while(t);return null}}},23839:function(e,t,i){"use strict";function computeIndentLevel(e,t){let i=0,n=0,o=e.length;for(;n<o;){let o=e.charCodeAt(n);if(32===o)i++;else if(9===o)i=i-i%t+t;else break;n++}return n===o?-1:i}i.d(t,{q:function(){return computeIndentLevel}})},23747:function(e,t,i){"use strict";i.d(t,{O:function(){return createMonacoBaseAPI}});var n=i(45828),o=i(57605),r=i(27082),s=i(31568),l=i(11953),d=i(30822),c=i(45841),u=i(7530),g=i(64353);let KeyMod=class KeyMod{static chord(e,t){return(0,r.gx)(e,t)}};function createMonacoBaseAPI(){return{editor:void 0,languages:void 0,CancellationTokenSource:n.A,Emitter:o.Q5,KeyCode:g.VD,KeyMod:KeyMod,Position:l.L,Range:d.e,Selection:c.Y,SelectionDirection:g.a$,MarkerSeverity:g.ZL,MarkerTag:g.eB,Uri:s.o,Token:u.WU}}KeyMod.CtrlCmd=2048,KeyMod.Shift=1024,KeyMod.Alt=512,KeyMod.WinCtrl=256},2068:function(e,t,i){"use strict";i.d(t,{p:function(){return o}});var n=i(27989);let o=(0,n.yh)("editorWorkerService")},26438:function(e,t,i){"use strict";i.d(t,{A:function(){return m}});var n,o=i(22256),r=i(30619),s=i(78007),l=i(77680),d=i(95026),c=i(27989),u=i(96927),g=i(95998),__param=function(e,t){return function(i,n){t(i,n,e)}};let m=(0,c.yh)("ILanguageFeatureDebounceService");!function(e){let t=new WeakMap,i=0;function of(e){let n=t.get(e);return void 0===n&&(n=++i,t.set(e,n)),n}e.of=of}(n||(n={}));let NullDebounceInformation=class NullDebounceInformation{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}};let FeatureDebounceInformation=class FeatureDebounceInformation{constructor(e,t,i,n,o,s){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=o,this._max=s,this._cache=new r.z6(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((e,t)=>(0,o.SP)(n.of(t),e),0)}get(e){let t=this._key(e),i=this._cache.get(t);return i?(0,s.uZ)(i.value,this._min,this._max):this.default()}update(e,t){let i=this._key(e),n=this._cache.get(i);n||(n=new s.N(6),this._cache.set(i,n));let o=(0,s.uZ)(n.update(t),this._min,this._max);return(0,g.xn)(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){let e=new s.nM;for(let[,t]of this._cache)e.update(t.value);return e.value}default(){let e=0|this._overall()||this._default;return(0,s.uZ)(e,this._min,this._max)}};let f=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){var o,r,s;let l=null!==(o=null==i?void 0:i.min)&&void 0!==o?o:50,d=null!==(r=null==i?void 0:i.max)&&void 0!==r?r:l**2,c=null!==(s=null==i?void 0:i.key)&&void 0!==s?s:void 0,u=`${n.of(e)},${l}${c?","+c:""}`,g=this._data.get(u);return g||(this._isDev?g=new FeatureDebounceInformation(this._logService,t,e,0|this._overallAverage()||1.5*l,l,d):(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),g=new NullDebounceInformation(1.5*l)),this._data.set(u,g)),g}_overallAverage(){let e=new s.nM;for(let t of this._data.values())e.update(t.default());return e.value}};f=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(0,u.VZ),__param(1,l.Y)],f),(0,d.z)(m,f,1)},67379:function(e,t,i){"use strict";i.d(t,{p:function(){return o}});var n=i(27989);let o=(0,n.yh)("ILanguageFeaturesService")},1039:function(e,t,i){"use strict";i.d(t,{i:function(){return o}});var n=i(27989);let o=(0,n.yh)("markerDecorationsService")},52025:function(e,t,i){"use strict";i.d(t,{q:function(){return o}});var n=i(27989);let o=(0,n.yh)("modelService")},72403:function(e,t,i){"use strict";i.d(t,{S:function(){return o}});var n=i(27989);let o=(0,n.yh)("textModelService")},19442:function(e,t,i){"use strict";i.d(t,{$:function(){return u},h:function(){return toMultilineTokens2}});var n=i(91957),o=i(93672),r=i(96927),s=i(11953),l=i(30822),d=i(98883);let SparseMultilineTokens=class SparseMultilineTokens{static create(e,t){return new SparseMultilineTokens(e,new SparseMultilineTokensStorage(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){let e=this._tokens.getRange();return e?new l.e(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){let t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){let t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[n,o,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new SparseMultilineTokens(this._startLineNumber,n),new SparseMultilineTokens(this._startLineNumber+r,o)]}applyEdit(e,t){let[i,n,o]=(0,d.Q)(t);this.acceptEdit(e,i,n,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,o){this._acceptDeleteRange(e),this._acceptInsertText(new s.L(e.startLineNumber,e.startColumn),t,i,n,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){let e=i-t;this._startLineNumber-=e;return}let n=this._tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){let n=-t;this._startLineNumber-=n,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,o){if(0===t&&0===i)return;let r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}let s=this._tokens.getMaxDeltaLine();r>=s+1||this._tokens.acceptInsertText(r,e.column-1,t,i,n,o)}};let SparseMultilineTokensStorage=class SparseMultilineTokensStorage{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){let e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){let e=this._getTokenCount();if(0===e)return null;let t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new l.e(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){let n=t+Math.floor((i-t)/2),o=this._getDeltaLine(n);if(o<e)t=n+1;else if(o>e)i=n-1;else{let o=n;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let r=n;for(;r<i&&this._getDeltaLine(r+1)===e;)r++;return new SparseLineTokens(this._tokens.subarray(4*o,4*r+4))}}return this._getDeltaLine(t)===e?new SparseLineTokens(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){let o=this._tokens,r=this._tokenCount,s=0,l=!1,d=0;for(let c=0;c<r;c++){let r=4*c,u=o[r],g=o[r+1],m=o[r+2],f=o[r+3];if((u>e||u===e&&m>=t)&&(u<i||u===i&&g<=n))l=!0;else{if(0===s&&(d=u),l){let e=4*s;o[e]=u-d,o[e+1]=g,o[e+2]=m,o[e+3]=f}s++}}return this._tokenCount=s,d}split(e,t,i,n){let o=this._tokens,r=this._tokenCount,s=[],l=[],d=s,c=0,u=0;for(let s=0;s<r;s++){let r=4*s,g=o[r],m=o[r+1],f=o[r+2],_=o[r+3];if(g>e||g===e&&f>=t){if(g<i||g===i&&m<=n)continue;d!==l&&(d=l,c=0,u=g)}d[c++]=g-u,d[c++]=m,d[c++]=f,d[c++]=_}return[new SparseMultilineTokensStorage(new Uint32Array(s)),new SparseMultilineTokensStorage(new Uint32Array(l)),u]}acceptDeleteRange(e,t,i,n,o){let r=this._tokens,s=this._tokenCount,l=n-t,d=0,c=!1;for(let u=0;u<s;u++){let g=4*u,m=r[g],f=r[g+1],_=r[g+2],v=r[g+3];if(m<t||m===t&&_<=i){d++;continue}if(m===t&&f<i)m===n&&_>o?_-=o-i:_=i;else if(m===t&&f===i){if(m===n&&_>o)_-=o-i;else{c=!0;continue}}else if(m<n||m===n&&f<o){if(m===n&&_>o)m=t,_=(f=i)+(_-o);else{c=!0;continue}}else if(m>n){if(0===l&&!c){d=s;break}m-=l}else if(m===n&&f>=o)e&&0===m&&(f+=e,_+=e),m-=l,f-=o-i,_-=o-i;else throw Error("Not possible!");let C=4*d;r[C]=m,r[C+1]=f,r[C+2]=_,r[C+3]=v,d++}this._tokenCount=d}acceptInsertText(e,t,i,n,o,r){let s=0===i&&1===n&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,d=this._tokenCount;for(let r=0;r<d;r++){let d=4*r,c=l[d],u=l[d+1],g=l[d+2];if(!(c<e)&&(c!==e||!(g<t))){if(c===e&&g===t){if(!s)continue;g+=1}else if(c===e&&u<t&&t<g)0===i?g+=n:g=t;else{if(c===e&&u===t&&s)continue;if(c===e){if(c+=i,0===i)u+=n,g+=n;else{let e=g-u;g=(u=o+(u-t))+e}}else c+=i}l[d]=c,l[d+1]=u,l[d+2]=g}}}};let SparseLineTokens=class SparseLineTokens{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}};var c=i(84634),__param=function(e,t){return function(i,n){t(i,n,e)}};let u=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new HashTable}getMetadata(e,t,i){let o;let s=this._languageService.languageIdCodec.encodeLanguageId(i),l=this._hashTable.get(e,t,s);if(l)o=l.metadata,this._logService.getLevel()===r.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${n.N.getForeground(o)}, fontStyle ${n.N.getFontStyle(o).toString(2)}`);else{let l=this._legend.tokenTypes[e],d=[];if(l){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&d.push(this._legend.tokenModifiers[t]),e>>=1;e>0&&this._logService.getLevel()===r.in.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),d.push("not-in-legend"));let n=this._themeService.getColorTheme().getTokenStyleMetadata(l,d,i);if(void 0===n)o=2147483647;else{if(o=0,void 0!==n.italic){let e=(n.italic?1:0)<<11;o|=1|e}if(void 0!==n.bold){let e=(n.bold?2:0)<<11;o|=2|e}if(void 0!==n.underline){let e=(n.underline?4:0)<<11;o|=4|e}if(void 0!==n.strikethrough){let e=(n.strikethrough?8:0)<<11;o|=8|e}if(n.foreground){let e=n.foreground<<15;o|=16|e}0===o&&(o=2147483647)}}else this._logService.getLevel()===r.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,l="not-in-legend";this._hashTable.add(e,t,s,o),this._logService.getLevel()===r.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${l}) / ${t} (${d.join(" ")}): foreground ${n.N.getForeground(o)}, fontStyle ${n.N.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${o}).`))}};function toMultilineTokens2(e,t,i){let n=e.data,o=e.data.length/5|0,r=Math.max(Math.ceil(o/1024),400),s=[],l=0,d=1,c=0;for(;l<o;){let e=l,u=Math.min(e+r,o);if(u<o){let t=u;for(;t-1>e&&0===n[5*t];)t--;if(t-1===e){let e=u;for(;e+1<o&&0===n[5*e];)e++;u=e}else u=t}let g=new Uint32Array((u-e)*4),m=0,f=0,_=0,v=0;for(;l<u;){let e=5*l,o=n[e],r=n[e+1],s=d+o|0,u=0===o?c+r|0:r,C=n[e+2],b=u+C|0,S=n[e+3],y=n[e+4];if(b<=u)t.warnInvalidLengthSemanticTokens(s,u+1);else if(_===s&&v>u)t.warnOverlappingSemanticTokens(s,u+1);else{let e=t.getMetadata(S,y,i);2147483647!==e&&(0===f&&(f=s),g[m]=s-f,g[m+1]=u,g[m+2]=b,g[m+3]=e,m+=4,_=s,v=b)}d=s,c=u,l++}m!==g.length&&(g=g.subarray(0,m));let C=SparseMultilineTokens.create(f,g);s.push(C)}return s}u=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(1,o.XE),__param(2,c.O),__param(3,r.VZ)],u);let HashTableEntry=class HashTableEntry{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}};let HashTable=class HashTable{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){let n=this._hashFunc(e,t,i),o=this._elements[n];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===i)return o;o=o.next}return null}add(e,t,i,n){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){let e=this._elements;for(let t of(this._currentLengthIndex++,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength),e)){let e=t;for(;e;){let t=e.next;e.next=null,this._add(e),e=t}}}this._add(new HashTableEntry(e,t,i,n))}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};HashTable._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]},37506:function(e,t,i){"use strict";i.d(t,{s:function(){return o}});var n=i(27989);let o=(0,n.yh)("semanticTokensStylingService")},39478:function(e,t,i){"use strict";i.d(t,{V:function(){return o},y:function(){return r}});var n=i(27989);let o=(0,n.yh)("textResourceConfigurationService"),r=(0,n.yh)("textResourcePropertiesService")},92459:function(e,t,i){"use strict";i.d(t,{a:function(){return UnicodeTextModelHighlighter}});var n=i(30822),o=i(49987),r=i(45837),s=i(77853),l=i(83783);let UnicodeTextModelHighlighter=class UnicodeTextModelHighlighter{static computeUnicodeHighlights(e,t,i){let d,c;let u=i?i.startLineNumber:1,g=i?i.endLineNumber:e.getLineCount(),m=new CodePointHighlighter(t),f=m.getCandidateCodePoints();d="allNonBasicAscii"===f?RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):RegExp(`${buildRegExpCharClassExpr(Array.from(f))}`,"g");let _=new o.sz(null,d),v=[],C=!1,b=0,S=0,y=0;n:for(let t=u;t<=g;t++){let i=e.getLineContent(t),o=i.length;_.reset(0);do if(c=_.next(i)){let e=c.index,d=c.index+c[0].length;if(e>0){let t=i.charCodeAt(e-1);r.ZG(t)&&e--}if(d+1<o){let e=i.charCodeAt(d-1);r.ZG(e)&&d++}let u=i.substring(e,d),g=(0,l.t2)(e+1,l.Af,i,0);g&&g.endColumn<=e+1&&(g=null);let f=m.shouldHighlightNonBasicASCII(u,g?g.word:null);if(0!==f){if(3===f?b++:2===f?S++:1===f?y++:(0,s.vE)(f),v.length>=1e3){C=!0;break n}v.push(new n.e(t,e+1,t,d+1))}}while(c)}return{ranges:v,hasMore:C,ambiguousCharacterCount:b,invisibleCharacterCount:S,nonBasicAsciiCharacterCount:y}}static computeUnicodeHighlightReason(e,t){let i=new CodePointHighlighter(t),n=i.shouldHighlightNonBasicASCII(e,null);switch(n){case 0:return null;case 2:return{kind:1};case 3:{let n=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(n),s=r.ZK.getLocales().filter(e=>!r.ZK.getInstance(new Set([...t.allowedLocales,e])).isAmbiguous(n));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:s}}case 1:return{kind:2}}}};function buildRegExpCharClassExpr(e,t){let i=`[${r.ec(e.map(e=>String.fromCodePoint(e)).join(""))}]`;return i}let CodePointHighlighter=class CodePointHighlighter{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=r.ZK.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";let e=new Set;if(this.options.invisibleCharacters)for(let t of r.vU.codePoints)isAllowedInvisibleCharacter(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(let t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(let t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){let i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,o=!1;if(t)for(let e of t){let t=e.codePointAt(0),i=r.$i(e);n=n||i,i||this.ambiguousCharacters.isAmbiguous(t)||r.vU.isInvisibleCharacter(t)||(o=!0)}return!n&&o?0:this.options.invisibleCharacters&&!isAllowedInvisibleCharacter(e)&&r.vU.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}};function isAllowedInvisibleCharacter(e){return" "===e||"\n"===e||"	"===e}},64353:function(e,t,i){"use strict";var n,o,r,s,l,d,c,u,g,m,f,_,v,C,b,S,y,w,L,k,D,x,N,E,I,T,M,R,A,P,O,F,B,W,V,H,z,U,K,j,q,G,Q,Z,Y,J,X,ee,et,ei,en,eo,er,es,ea,el,ed,eh,ec,eu,eg,ep,em,ef,e_,ev,eC,eb,eS,ey,ew,eL,ek,eD,ex,eN,eE,eI,eT,eM,eR,eA,eP,eO;i.d(t,{$r:function(){return V},E$:function(){return M},F5:function(){return E},Ij:function(){return d},In:function(){return K},Lu:function(){return P},MG:function(){return I},MY:function(){return m},OI:function(){return q},RM:function(){return y},U:function(){return b},VD:function(){return D},Vi:function(){return u},WW:function(){return H},ZL:function(){return x},_x:function(){return g},a$:function(){return W},a7:function(){return r},ao:function(){return n},bw:function(){return L},cR:function(){return z},cm:function(){return s},d2:function(){return j},eB:function(){return N},g4:function(){return F},g_:function(){return B},gl:function(){return w},gm:function(){return v},jl:function(){return C},np:function(){return o},py:function(){return A},r3:function(){return c},r4:function(){return U},rf:function(){return f},rn:function(){return k},sh:function(){return R},up:function(){return G},vQ:function(){return O},w:function(){return T},wT:function(){return _},wU:function(){return S},we:function(){return l}}),(Q=n||(n={}))[Q.Unknown=0]="Unknown",Q[Q.Disabled=1]="Disabled",Q[Q.Enabled=2]="Enabled",(Z=o||(o={}))[Z.Invoke=1]="Invoke",Z[Z.Auto=2]="Auto",(Y=r||(r={}))[Y.None=0]="None",Y[Y.KeepWhitespace=1]="KeepWhitespace",Y[Y.InsertAsSnippet=4]="InsertAsSnippet",(J=s||(s={}))[J.Method=0]="Method",J[J.Function=1]="Function",J[J.Constructor=2]="Constructor",J[J.Field=3]="Field",J[J.Variable=4]="Variable",J[J.Class=5]="Class",J[J.Struct=6]="Struct",J[J.Interface=7]="Interface",J[J.Module=8]="Module",J[J.Property=9]="Property",J[J.Event=10]="Event",J[J.Operator=11]="Operator",J[J.Unit=12]="Unit",J[J.Value=13]="Value",J[J.Constant=14]="Constant",J[J.Enum=15]="Enum",J[J.EnumMember=16]="EnumMember",J[J.Keyword=17]="Keyword",J[J.Text=18]="Text",J[J.Color=19]="Color",J[J.File=20]="File",J[J.Reference=21]="Reference",J[J.Customcolor=22]="Customcolor",J[J.Folder=23]="Folder",J[J.TypeParameter=24]="TypeParameter",J[J.User=25]="User",J[J.Issue=26]="Issue",J[J.Snippet=27]="Snippet",(X=l||(l={}))[X.Deprecated=1]="Deprecated",(ee=d||(d={}))[ee.Invoke=0]="Invoke",ee[ee.TriggerCharacter=1]="TriggerCharacter",ee[ee.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions",(et=c||(c={}))[et.EXACT=0]="EXACT",et[et.ABOVE=1]="ABOVE",et[et.BELOW=2]="BELOW",(ei=u||(u={}))[ei.NotSet=0]="NotSet",ei[ei.ContentFlush=1]="ContentFlush",ei[ei.RecoverFromMarkers=2]="RecoverFromMarkers",ei[ei.Explicit=3]="Explicit",ei[ei.Paste=4]="Paste",ei[ei.Undo=5]="Undo",ei[ei.Redo=6]="Redo",(en=g||(g={}))[en.LF=1]="LF",en[en.CRLF=2]="CRLF",(eo=m||(m={}))[eo.Text=0]="Text",eo[eo.Read=1]="Read",eo[eo.Write=2]="Write",(er=f||(f={}))[er.None=0]="None",er[er.Keep=1]="Keep",er[er.Brackets=2]="Brackets",er[er.Advanced=3]="Advanced",er[er.Full=4]="Full",(es=_||(_={}))[es.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",es[es.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",es[es.accessibilitySupport=2]="accessibilitySupport",es[es.accessibilityPageSize=3]="accessibilityPageSize",es[es.ariaLabel=4]="ariaLabel",es[es.ariaRequired=5]="ariaRequired",es[es.autoClosingBrackets=6]="autoClosingBrackets",es[es.autoClosingComments=7]="autoClosingComments",es[es.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",es[es.autoClosingDelete=9]="autoClosingDelete",es[es.autoClosingOvertype=10]="autoClosingOvertype",es[es.autoClosingQuotes=11]="autoClosingQuotes",es[es.autoIndent=12]="autoIndent",es[es.automaticLayout=13]="automaticLayout",es[es.autoSurround=14]="autoSurround",es[es.bracketPairColorization=15]="bracketPairColorization",es[es.guides=16]="guides",es[es.codeLens=17]="codeLens",es[es.codeLensFontFamily=18]="codeLensFontFamily",es[es.codeLensFontSize=19]="codeLensFontSize",es[es.colorDecorators=20]="colorDecorators",es[es.colorDecoratorsLimit=21]="colorDecoratorsLimit",es[es.columnSelection=22]="columnSelection",es[es.comments=23]="comments",es[es.contextmenu=24]="contextmenu",es[es.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",es[es.cursorBlinking=26]="cursorBlinking",es[es.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",es[es.cursorStyle=28]="cursorStyle",es[es.cursorSurroundingLines=29]="cursorSurroundingLines",es[es.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",es[es.cursorWidth=31]="cursorWidth",es[es.disableLayerHinting=32]="disableLayerHinting",es[es.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",es[es.domReadOnly=34]="domReadOnly",es[es.dragAndDrop=35]="dragAndDrop",es[es.dropIntoEditor=36]="dropIntoEditor",es[es.emptySelectionClipboard=37]="emptySelectionClipboard",es[es.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",es[es.extraEditorClassName=39]="extraEditorClassName",es[es.fastScrollSensitivity=40]="fastScrollSensitivity",es[es.find=41]="find",es[es.fixedOverflowWidgets=42]="fixedOverflowWidgets",es[es.folding=43]="folding",es[es.foldingStrategy=44]="foldingStrategy",es[es.foldingHighlight=45]="foldingHighlight",es[es.foldingImportsByDefault=46]="foldingImportsByDefault",es[es.foldingMaximumRegions=47]="foldingMaximumRegions",es[es.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",es[es.fontFamily=49]="fontFamily",es[es.fontInfo=50]="fontInfo",es[es.fontLigatures=51]="fontLigatures",es[es.fontSize=52]="fontSize",es[es.fontWeight=53]="fontWeight",es[es.fontVariations=54]="fontVariations",es[es.formatOnPaste=55]="formatOnPaste",es[es.formatOnType=56]="formatOnType",es[es.glyphMargin=57]="glyphMargin",es[es.gotoLocation=58]="gotoLocation",es[es.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",es[es.hover=60]="hover",es[es.inDiffEditor=61]="inDiffEditor",es[es.inlineSuggest=62]="inlineSuggest",es[es.inlineEdit=63]="inlineEdit",es[es.letterSpacing=64]="letterSpacing",es[es.lightbulb=65]="lightbulb",es[es.lineDecorationsWidth=66]="lineDecorationsWidth",es[es.lineHeight=67]="lineHeight",es[es.lineNumbers=68]="lineNumbers",es[es.lineNumbersMinChars=69]="lineNumbersMinChars",es[es.linkedEditing=70]="linkedEditing",es[es.links=71]="links",es[es.matchBrackets=72]="matchBrackets",es[es.minimap=73]="minimap",es[es.mouseStyle=74]="mouseStyle",es[es.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",es[es.mouseWheelZoom=76]="mouseWheelZoom",es[es.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",es[es.multiCursorModifier=78]="multiCursorModifier",es[es.multiCursorPaste=79]="multiCursorPaste",es[es.multiCursorLimit=80]="multiCursorLimit",es[es.occurrencesHighlight=81]="occurrencesHighlight",es[es.overviewRulerBorder=82]="overviewRulerBorder",es[es.overviewRulerLanes=83]="overviewRulerLanes",es[es.padding=84]="padding",es[es.pasteAs=85]="pasteAs",es[es.parameterHints=86]="parameterHints",es[es.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",es[es.definitionLinkOpensInPeek=88]="definitionLinkOpensInPeek",es[es.quickSuggestions=89]="quickSuggestions",es[es.quickSuggestionsDelay=90]="quickSuggestionsDelay",es[es.readOnly=91]="readOnly",es[es.readOnlyMessage=92]="readOnlyMessage",es[es.renameOnType=93]="renameOnType",es[es.renderControlCharacters=94]="renderControlCharacters",es[es.renderFinalNewline=95]="renderFinalNewline",es[es.renderLineHighlight=96]="renderLineHighlight",es[es.renderLineHighlightOnlyWhenFocus=97]="renderLineHighlightOnlyWhenFocus",es[es.renderValidationDecorations=98]="renderValidationDecorations",es[es.renderWhitespace=99]="renderWhitespace",es[es.revealHorizontalRightPadding=100]="revealHorizontalRightPadding",es[es.roundedSelection=101]="roundedSelection",es[es.rulers=102]="rulers",es[es.scrollbar=103]="scrollbar",es[es.scrollBeyondLastColumn=104]="scrollBeyondLastColumn",es[es.scrollBeyondLastLine=105]="scrollBeyondLastLine",es[es.scrollPredominantAxis=106]="scrollPredominantAxis",es[es.selectionClipboard=107]="selectionClipboard",es[es.selectionHighlight=108]="selectionHighlight",es[es.selectOnLineNumbers=109]="selectOnLineNumbers",es[es.showFoldingControls=110]="showFoldingControls",es[es.showUnused=111]="showUnused",es[es.snippetSuggestions=112]="snippetSuggestions",es[es.smartSelect=113]="smartSelect",es[es.smoothScrolling=114]="smoothScrolling",es[es.stickyScroll=115]="stickyScroll",es[es.stickyTabStops=116]="stickyTabStops",es[es.stopRenderingLineAfter=117]="stopRenderingLineAfter",es[es.suggest=118]="suggest",es[es.suggestFontSize=119]="suggestFontSize",es[es.suggestLineHeight=120]="suggestLineHeight",es[es.suggestOnTriggerCharacters=121]="suggestOnTriggerCharacters",es[es.suggestSelection=122]="suggestSelection",es[es.tabCompletion=123]="tabCompletion",es[es.tabIndex=124]="tabIndex",es[es.unicodeHighlighting=125]="unicodeHighlighting",es[es.unusualLineTerminators=126]="unusualLineTerminators",es[es.useShadowDOM=127]="useShadowDOM",es[es.useTabStops=128]="useTabStops",es[es.wordBreak=129]="wordBreak",es[es.wordSeparators=130]="wordSeparators",es[es.wordWrap=131]="wordWrap",es[es.wordWrapBreakAfterCharacters=132]="wordWrapBreakAfterCharacters",es[es.wordWrapBreakBeforeCharacters=133]="wordWrapBreakBeforeCharacters",es[es.wordWrapColumn=134]="wordWrapColumn",es[es.wordWrapOverride1=135]="wordWrapOverride1",es[es.wordWrapOverride2=136]="wordWrapOverride2",es[es.wrappingIndent=137]="wrappingIndent",es[es.wrappingStrategy=138]="wrappingStrategy",es[es.showDeprecated=139]="showDeprecated",es[es.inlayHints=140]="inlayHints",es[es.editorClassName=141]="editorClassName",es[es.pixelRatio=142]="pixelRatio",es[es.tabFocusMode=143]="tabFocusMode",es[es.layoutInfo=144]="layoutInfo",es[es.wrappingInfo=145]="wrappingInfo",es[es.defaultColorDecorators=146]="defaultColorDecorators",es[es.colorDecoratorsActivatedOn=147]="colorDecoratorsActivatedOn",es[es.inlineCompletionsAccessibilityVerbose=148]="inlineCompletionsAccessibilityVerbose",(ea=v||(v={}))[ea.TextDefined=0]="TextDefined",ea[ea.LF=1]="LF",ea[ea.CRLF=2]="CRLF",(el=C||(C={}))[el.LF=0]="LF",el[el.CRLF=1]="CRLF",(ed=b||(b={}))[ed.Left=1]="Left",ed[ed.Center=2]="Center",ed[ed.Right=3]="Right",(eh=S||(S={}))[eh.None=0]="None",eh[eh.Indent=1]="Indent",eh[eh.IndentOutdent=2]="IndentOutdent",eh[eh.Outdent=3]="Outdent",(ec=y||(y={}))[ec.Both=0]="Both",ec[ec.Right=1]="Right",ec[ec.Left=2]="Left",ec[ec.None=3]="None",(eu=w||(w={}))[eu.Type=1]="Type",eu[eu.Parameter=2]="Parameter",(eg=L||(L={}))[eg.Automatic=0]="Automatic",eg[eg.Explicit=1]="Explicit",(ep=k||(k={}))[ep.Invoke=0]="Invoke",ep[ep.Automatic=1]="Automatic",(em=D||(D={}))[em.DependsOnKbLayout=-1]="DependsOnKbLayout",em[em.Unknown=0]="Unknown",em[em.Backspace=1]="Backspace",em[em.Tab=2]="Tab",em[em.Enter=3]="Enter",em[em.Shift=4]="Shift",em[em.Ctrl=5]="Ctrl",em[em.Alt=6]="Alt",em[em.PauseBreak=7]="PauseBreak",em[em.CapsLock=8]="CapsLock",em[em.Escape=9]="Escape",em[em.Space=10]="Space",em[em.PageUp=11]="PageUp",em[em.PageDown=12]="PageDown",em[em.End=13]="End",em[em.Home=14]="Home",em[em.LeftArrow=15]="LeftArrow",em[em.UpArrow=16]="UpArrow",em[em.RightArrow=17]="RightArrow",em[em.DownArrow=18]="DownArrow",em[em.Insert=19]="Insert",em[em.Delete=20]="Delete",em[em.Digit0=21]="Digit0",em[em.Digit1=22]="Digit1",em[em.Digit2=23]="Digit2",em[em.Digit3=24]="Digit3",em[em.Digit4=25]="Digit4",em[em.Digit5=26]="Digit5",em[em.Digit6=27]="Digit6",em[em.Digit7=28]="Digit7",em[em.Digit8=29]="Digit8",em[em.Digit9=30]="Digit9",em[em.KeyA=31]="KeyA",em[em.KeyB=32]="KeyB",em[em.KeyC=33]="KeyC",em[em.KeyD=34]="KeyD",em[em.KeyE=35]="KeyE",em[em.KeyF=36]="KeyF",em[em.KeyG=37]="KeyG",em[em.KeyH=38]="KeyH",em[em.KeyI=39]="KeyI",em[em.KeyJ=40]="KeyJ",em[em.KeyK=41]="KeyK",em[em.KeyL=42]="KeyL",em[em.KeyM=43]="KeyM",em[em.KeyN=44]="KeyN",em[em.KeyO=45]="KeyO",em[em.KeyP=46]="KeyP",em[em.KeyQ=47]="KeyQ",em[em.KeyR=48]="KeyR",em[em.KeyS=49]="KeyS",em[em.KeyT=50]="KeyT",em[em.KeyU=51]="KeyU",em[em.KeyV=52]="KeyV",em[em.KeyW=53]="KeyW",em[em.KeyX=54]="KeyX",em[em.KeyY=55]="KeyY",em[em.KeyZ=56]="KeyZ",em[em.Meta=57]="Meta",em[em.ContextMenu=58]="ContextMenu",em[em.F1=59]="F1",em[em.F2=60]="F2",em[em.F3=61]="F3",em[em.F4=62]="F4",em[em.F5=63]="F5",em[em.F6=64]="F6",em[em.F7=65]="F7",em[em.F8=66]="F8",em[em.F9=67]="F9",em[em.F10=68]="F10",em[em.F11=69]="F11",em[em.F12=70]="F12",em[em.F13=71]="F13",em[em.F14=72]="F14",em[em.F15=73]="F15",em[em.F16=74]="F16",em[em.F17=75]="F17",em[em.F18=76]="F18",em[em.F19=77]="F19",em[em.F20=78]="F20",em[em.F21=79]="F21",em[em.F22=80]="F22",em[em.F23=81]="F23",em[em.F24=82]="F24",em[em.NumLock=83]="NumLock",em[em.ScrollLock=84]="ScrollLock",em[em.Semicolon=85]="Semicolon",em[em.Equal=86]="Equal",em[em.Comma=87]="Comma",em[em.Minus=88]="Minus",em[em.Period=89]="Period",em[em.Slash=90]="Slash",em[em.Backquote=91]="Backquote",em[em.BracketLeft=92]="BracketLeft",em[em.Backslash=93]="Backslash",em[em.BracketRight=94]="BracketRight",em[em.Quote=95]="Quote",em[em.OEM_8=96]="OEM_8",em[em.IntlBackslash=97]="IntlBackslash",em[em.Numpad0=98]="Numpad0",em[em.Numpad1=99]="Numpad1",em[em.Numpad2=100]="Numpad2",em[em.Numpad3=101]="Numpad3",em[em.Numpad4=102]="Numpad4",em[em.Numpad5=103]="Numpad5",em[em.Numpad6=104]="Numpad6",em[em.Numpad7=105]="Numpad7",em[em.Numpad8=106]="Numpad8",em[em.Numpad9=107]="Numpad9",em[em.NumpadMultiply=108]="NumpadMultiply",em[em.NumpadAdd=109]="NumpadAdd",em[em.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",em[em.NumpadSubtract=111]="NumpadSubtract",em[em.NumpadDecimal=112]="NumpadDecimal",em[em.NumpadDivide=113]="NumpadDivide",em[em.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",em[em.ABNT_C1=115]="ABNT_C1",em[em.ABNT_C2=116]="ABNT_C2",em[em.AudioVolumeMute=117]="AudioVolumeMute",em[em.AudioVolumeUp=118]="AudioVolumeUp",em[em.AudioVolumeDown=119]="AudioVolumeDown",em[em.BrowserSearch=120]="BrowserSearch",em[em.BrowserHome=121]="BrowserHome",em[em.BrowserBack=122]="BrowserBack",em[em.BrowserForward=123]="BrowserForward",em[em.MediaTrackNext=124]="MediaTrackNext",em[em.MediaTrackPrevious=125]="MediaTrackPrevious",em[em.MediaStop=126]="MediaStop",em[em.MediaPlayPause=127]="MediaPlayPause",em[em.LaunchMediaPlayer=128]="LaunchMediaPlayer",em[em.LaunchMail=129]="LaunchMail",em[em.LaunchApp2=130]="LaunchApp2",em[em.Clear=131]="Clear",em[em.MAX_VALUE=132]="MAX_VALUE",(ef=x||(x={}))[ef.Hint=1]="Hint",ef[ef.Info=2]="Info",ef[ef.Warning=4]="Warning",ef[ef.Error=8]="Error",(e_=N||(N={}))[e_.Unnecessary=1]="Unnecessary",e_[e_.Deprecated=2]="Deprecated",(ev=E||(E={}))[ev.Inline=1]="Inline",ev[ev.Gutter=2]="Gutter",(eC=I||(I={}))[eC.UNKNOWN=0]="UNKNOWN",eC[eC.TEXTAREA=1]="TEXTAREA",eC[eC.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",eC[eC.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",eC[eC.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",eC[eC.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",eC[eC.CONTENT_TEXT=6]="CONTENT_TEXT",eC[eC.CONTENT_EMPTY=7]="CONTENT_EMPTY",eC[eC.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",eC[eC.CONTENT_WIDGET=9]="CONTENT_WIDGET",eC[eC.OVERVIEW_RULER=10]="OVERVIEW_RULER",eC[eC.SCROLLBAR=11]="SCROLLBAR",eC[eC.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",eC[eC.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR",(eb=T||(T={}))[eb.AIGenerated=1]="AIGenerated",(eS=M||(M={}))[eS.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",eS[eS.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",eS[eS.TOP_CENTER=2]="TOP_CENTER",(ey=R||(R={}))[ey.Left=1]="Left",ey[ey.Center=2]="Center",ey[ey.Right=4]="Right",ey[ey.Full=7]="Full",(ew=A||(A={}))[ew.Left=0]="Left",ew[ew.Right=1]="Right",ew[ew.None=2]="None",ew[ew.LeftOfInjectedText=3]="LeftOfInjectedText",ew[ew.RightOfInjectedText=4]="RightOfInjectedText",(eL=P||(P={}))[eL.Off=0]="Off",eL[eL.On=1]="On",eL[eL.Relative=2]="Relative",eL[eL.Interval=3]="Interval",eL[eL.Custom=4]="Custom",(ek=O||(O={}))[ek.None=0]="None",ek[ek.Text=1]="Text",ek[ek.Blocks=2]="Blocks",(eD=F||(F={}))[eD.Smooth=0]="Smooth",eD[eD.Immediate=1]="Immediate",(ex=B||(B={}))[ex.Auto=1]="Auto",ex[ex.Hidden=2]="Hidden",ex[ex.Visible=3]="Visible",(eN=W||(W={}))[eN.LTR=0]="LTR",eN[eN.RTL=1]="RTL",(eE=V||(V={})).Off="off",eE.OnCode="onCode",eE.On="on",(eI=H||(H={}))[eI.Invoke=1]="Invoke",eI[eI.TriggerCharacter=2]="TriggerCharacter",eI[eI.ContentChange=3]="ContentChange",(eT=z||(z={}))[eT.File=0]="File",eT[eT.Module=1]="Module",eT[eT.Namespace=2]="Namespace",eT[eT.Package=3]="Package",eT[eT.Class=4]="Class",eT[eT.Method=5]="Method",eT[eT.Property=6]="Property",eT[eT.Field=7]="Field",eT[eT.Constructor=8]="Constructor",eT[eT.Enum=9]="Enum",eT[eT.Interface=10]="Interface",eT[eT.Function=11]="Function",eT[eT.Variable=12]="Variable",eT[eT.Constant=13]="Constant",eT[eT.String=14]="String",eT[eT.Number=15]="Number",eT[eT.Boolean=16]="Boolean",eT[eT.Array=17]="Array",eT[eT.Object=18]="Object",eT[eT.Key=19]="Key",eT[eT.Null=20]="Null",eT[eT.EnumMember=21]="EnumMember",eT[eT.Struct=22]="Struct",eT[eT.Event=23]="Event",eT[eT.Operator=24]="Operator",eT[eT.TypeParameter=25]="TypeParameter",(eM=U||(U={}))[eM.Deprecated=1]="Deprecated",(eR=K||(K={}))[eR.Hidden=0]="Hidden",eR[eR.Blink=1]="Blink",eR[eR.Smooth=2]="Smooth",eR[eR.Phase=3]="Phase",eR[eR.Expand=4]="Expand",eR[eR.Solid=5]="Solid",(eA=j||(j={}))[eA.Line=1]="Line",eA[eA.Block=2]="Block",eA[eA.Underline=3]="Underline",eA[eA.LineThin=4]="LineThin",eA[eA.BlockOutline=5]="BlockOutline",eA[eA.UnderlineThin=6]="UnderlineThin",(eP=q||(q={}))[eP.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",eP[eP.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",eP[eP.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",eP[eP.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter",(eO=G||(G={}))[eO.None=0]="None",eO[eO.Same=1]="Same",eO[eO.Indent=2]="Indent",eO[eO.DeepIndent=3]="DeepIndent"},27:function(e,t,i){"use strict";i.d(t,{B8:function(){return g},UX:function(){return c},aq:function(){return u},iN:function(){return f},ld:function(){return d},qq:function(){return l},ug:function(){return s},xi:function(){return m}});var n,o,r,s,l,d,c,u,g,m,f,_=i(46157);(s||(s={})).inspectTokensAction=_.NC("inspectTokens","Developer: Inspect Tokens"),(l||(l={})).gotoLineActionLabel=_.NC("gotoLineActionLabel","Go to Line/Column..."),(d||(d={})).helpQuickAccessActionLabel=_.NC("helpQuickAccess","Show all Quick Access Providers"),(n=c||(c={})).quickCommandActionLabel=_.NC("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=_.NC("quickCommandActionHelp","Show And Run Commands"),(o=u||(u={})).quickOutlineActionLabel=_.NC("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=_.NC("quickOutlineByCategoryActionLabel","Go to Symbol by Category..."),(r=g||(g={})).editorViewAccessibleLabel=_.NC("editorViewAccessibleLabel","Editor content"),r.accessibilityHelpMessage=_.NC("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options."),(m||(m={})).toggleHighContrast=_.NC("toggleHighContrast","Toggle High Contrast Theme"),(f||(f={})).bulkEditServiceSummary=_.NC("bulkEditServiceSummary","Made {0} edits in {1} files")},32462:function(e,t,i){"use strict";i.d(t,{CZ:function(){return ModelRawEOLChanged},D8:function(){return ModelInjectedTextChangedEvent},Jx:function(){return ModelRawFlush},Tx:function(){return ModelRawLinesInserted},dQ:function(){return ModelRawContentChangedEvent},fV:function(){return InternalModelContentChangeEvent},gk:function(){return LineInjectedText},lN:function(){return ModelRawLinesDeleted},rU:function(){return ModelRawLineChanged}});let ModelRawFlush=class ModelRawFlush{constructor(){this.changeType=1}};let LineInjectedText=class LineInjectedText{static applyInjectedText(e,t){if(!t||0===t.length)return e;let i="",n=0;for(let o of t)i+=e.substring(n,o.column-1),n=o.column-1,i+=o.options.content;return i+e.substring(n)}static fromDecorations(e){let t=[];for(let i of e)i.options.before&&i.options.before.content.length>0&&t.push(new LineInjectedText(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new LineInjectedText(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber),t}constructor(e,t,i,n,o){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=o}};let ModelRawLineChanged=class ModelRawLineChanged{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}};let ModelRawLinesDeleted=class ModelRawLinesDeleted{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}};let ModelRawLinesInserted=class ModelRawLinesInserted{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}};let ModelRawEOLChanged=class ModelRawEOLChanged{constructor(){this.changeType=5}};let ModelRawContentChangedEvent=class ModelRawContentChangedEvent{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++){let i=this.changes[t];if(i.changeType===e)return!0}return!1}static merge(e,t){let i=[].concat(e.changes).concat(t.changes),n=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new ModelRawContentChangedEvent(i,n,o,r)}};let ModelInjectedTextChangedEvent=class ModelInjectedTextChangedEvent{constructor(e){this.changes=e}};let InternalModelContentChangeEvent=class InternalModelContentChangeEvent{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){let t=ModelRawContentChangedEvent.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=InternalModelContentChangeEvent._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new InternalModelContentChangeEvent(t,i)}static _mergeChangeEvents(e,t){let i=[].concat(e.changes).concat(t.changes),n=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,d=e.isEolChange&&t.isEolChange;return{changes:i,eol:n,isEolChange:d,versionId:o,isUndoing:r,isRedoing:s,isFlush:l}}}},66850:function(e,t,i){"use strict";var n,o;i.d(t,{UO:function(){return IndentGuide},s6:function(){return n},vW:function(){return IndentGuideHorizontalLine}}),(o=n||(n={}))[o.Disabled=0]="Disabled",o[o.EnabledForActive=1]="EnabledForActive",o[o.Enabled=2]="Enabled";let IndentGuide=class IndentGuide{constructor(e,t,i,n,o,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,-1!==e==(-1!==t))throw Error()}};let IndentGuideHorizontalLine=class IndentGuideHorizontalLine{constructor(e,t){this.top=e,this.endColumn=t}}},46338:function(e,t,i){"use strict";i.d(t,{A:function(){return LineTokens}});var n=i(91957);let LineTokens=class LineTokens{static createEmpty(e,t){let i=LineTokens.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new LineTokens(n,e,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}equals(e){return e instanceof LineTokens&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let n=t<<1,o=n+(i<<1);for(let t=n;t<o;t++)if(this._tokens[t]!==e._tokens[t])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){let t=this._tokens[(e<<1)+1];return t}getLanguageId(e){let t=this._tokens[(e<<1)+1],i=n.N.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return n.N.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return n.N.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return n.N.getClassNameFromMetadata(t)}getInlineStyle(e,t){let i=this._tokens[(e<<1)+1];return n.N.getInlineStyleFromMetadata(i,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return n.N.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return LineTokens.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new SliceLineTokens(this,e,t,i)}static convertToEndOffset(e,t){let i=e.length>>>1,n=i-1;for(let t=0;t<n;t++)e[t<<1]=e[t+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){let o=i+Math.floor((n-i)/2),r=e[o<<1];if(r===t)return o+1;r<t?i=o+1:r>t&&(n=o)}return i}withInserted(e){if(0===e.length)return this;let t=0,i=0,n="",o=[],r=0;for(;;){let s=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(-1!==s&&(null===l||s<=l.offset)){n+=this._text.substring(r,s);let e=this._tokens[(t<<1)+1];o.push(n.length,e),t++,r=s}else if(l){if(l.offset>r){n+=this._text.substring(r,l.offset);let e=this._tokens[(t<<1)+1];o.push(n.length,e),r=l.offset}n+=l.text,o.push(n.length,l.tokenMetadata),i++}else break}return new LineTokens(new Uint32Array(o),n,this._languageIdCodec)}};LineTokens.defaultTokenMetadata=33587200;let SliceLineTokens=class SliceLineTokens{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let t=this._firstTokenIndex,n=e.getCount();t<n;t++){let n=e.getStartOffset(t);if(n>=i)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof SliceLineTokens&&this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount)}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}},76320:function(e,t,i){"use strict";i.d(t,{Kp:function(){return LineDecoration},k:function(){return LineDecorationsNormalizer}});var n=i(45837);let LineDecoration=class LineDecoration{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){let i=e.length,n=t.length;if(i!==n)return!1;for(let n=0;n<i;n++)if(!LineDecoration._equals(e[n],t[n]))return!1;return!0}static extractWrapped(e,t,i){if(0===e.length)return e;let n=t+1,o=i+1,r=i-t,s=[],l=0;for(let t of e)t.endColumn<=n||t.startColumn>=o||(s[l++]=new LineDecoration(Math.max(1,t.startColumn-n+1),Math.min(r+1,t.endColumn-n+1),t.className,t.type));return s}static filter(e,t,i,n){if(0===e.length)return[];let o=[],r=0;for(let s=0,l=e.length;s<l;s++){let l=e[s],d=l.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(0===l.type||3===l.type))continue;let c=d.startLineNumber===t?d.startColumn:i,u=d.endLineNumber===t?d.endColumn:n;o[r++]=new LineDecoration(c,u,l.inlineClassName,l.type)}return o}static _typeCompare(e,t){let i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;let i=LineDecoration._typeCompare(e.type,t.type);return 0!==i?i:e.className!==t.className?e.className<t.className?-1:1:0}};let DecorationSegment=class DecorationSegment{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}};let Stack=class Stack{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let e=0;for(;e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1];)e++;i.push(new DecorationSegment(t,this.stopOffsets[e],this.classNames.join(" "),Stack._metadata(this.metadata))),t=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&t<e&&(i.push(new DecorationSegment(t,e-1,this.classNames.join(" "),Stack._metadata(this.metadata))),t=e),t}insert(e,t,i){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}};let LineDecorationsNormalizer=class LineDecorationsNormalizer{static normalize(e,t){if(0===t.length)return[];let i=[],o=new Stack,r=0;for(let s=0,l=t.length;s<l;s++){let l=t[s],d=l.startColumn,c=l.endColumn,u=l.className,g=1===l.type?2:2===l.type?4:0;if(d>1){let t=e.charCodeAt(d-2);n.ZG(t)&&d--}if(c>1){let t=e.charCodeAt(c-2);n.ZG(t)&&c--}let m=d-1,f=c-2;r=o.consumeLowerThan(m,r,i),0===o.count&&(r=m),o.insert(f,u,g)}return o.consumeLowerThan(1073741824,r,i),i}}},50296:function(e,t,i){"use strict";i.d(t,{Nd:function(){return DomPosition},zG:function(){return LineRange},IJ:function(){return RenderLineInput},d1:function(){return renderViewLine},tF:function(){return renderViewLine2}});var n=i(46157),o=i(45837),r=i(53778),s=i(76320);let LinePart=class LinePart{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}};let LineRange=class LineRange{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}};let RenderLineInput=class RenderLineInput{constructor(e,t,i,n,o,r,l,d,c,u,g,m,f,_,v,C,b,S,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=l,this.lineTokens=d,this.lineDecorations=c.sort(s.Kp.compare),this.tabSize=u,this.startVisibleColumn=g,this.spaceWidth=m,this.stopRenderingLineAfter=v,this.renderWhitespace="all"===C?4:"boundary"===C?1:"selection"===C?2:"trailing"===C?3:0,this.renderControlCharacters=b,this.fontLigatures=S,this.selectionsOnLine=y&&y.sort((e,t)=>e.startOffset<t.startOffset?-1:1),Math.abs(_-m)<Math.abs(f-m)?(this.renderSpaceWidth=_,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(null===this.selectionsOnLine)return null===e;if(null===e||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&s.Kp.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}};let DomPosition=class DomPosition{constructor(e,t){this.partIndex=e,this.charIndex=t}};let CharacterMapping=class CharacterMapping{static getPartIndex(e){return(4294901760&e)>>>16}static getCharIndex(e){return(65535&e)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,n){this._data[e-1]=(t<<16|i<<0)>>>0,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return 0===this._horizontalOffset.length?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){let t=this.charOffsetToPartData(e-1),i=CharacterMapping.getPartIndex(t),n=CharacterMapping.getCharIndex(t);return new DomPosition(i,n)}getColumn(e,t){let i=this.partDataToCharOffset(e.partIndex,t,e.charIndex);return i+1}partDataToCharOffset(e,t,i){if(0===this.length)return 0;let n=(e<<16|i<<0)>>>0,o=0,r=this.length-1;for(;o+1<r;){let e=o+r>>>1,t=this._data[e];if(t===n)return e;t>n?r=e:o=e}if(o===r)return o;let s=this._data[o],l=this._data[r];if(s===n)return o;if(l===n)return r;let d=CharacterMapping.getPartIndex(s),c=CharacterMapping.getCharIndex(s),u=CharacterMapping.getPartIndex(l);return i-c<=(d!==u?t:CharacterMapping.getCharIndex(l))-i?o:r}};let RenderLineOutput=class RenderLineOutput{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}};function renderViewLine(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendString("<span>");let i=0,n=0,o=0;for(let r of e.lineDecorations)(1===r.type||2===r.type)&&(t.appendString('<span class="'),t.appendString(r.className),t.appendString('"></span>'),1===r.type&&(o|=1,i++),2===r.type&&(o|=2,n++));t.appendString("</span>");let r=new CharacterMapping(1,i+n);return r.setColumnInfo(1,i,0,0),new RenderLineOutput(r,!1,o)}return t.appendString("<span><span></span></span>"),new RenderLineOutput(new CharacterMapping(0,0),!1,0)}return _renderLine(resolveRenderLineInput(e),t)}let RenderLineOutput2=class RenderLineOutput2{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}};function renderViewLine2(e){let t=new r.HT(1e4),i=renderViewLine(e,t);return new RenderLineOutput2(i.characterMapping,t.build(),i.containsRTL,i.containsForeignElements)}let ResolvedRenderLineInput=class ResolvedRenderLineInput{constructor(e,t,i,n,o,r,s,l,d,c,u,g,m,f,_,v){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=o,this.overflowingCharCount=r,this.parts=s,this.containsForeignElements=l,this.fauxIndentLength=d,this.tabSize=c,this.startVisibleColumn=u,this.containsRTL=g,this.spaceWidth=m,this.renderSpaceCharCode=f,this.renderWhitespace=_,this.renderControlCharacters=v}};function resolveRenderLineInput(e){let t,i,n;let o=e.lineContent;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<o.length?(t=!0,i=o.length-e.stopRenderingLineAfter,n=e.stopRenderingLineAfter):(t=!1,i=0,n=o.length);let r=transformAndRemoveOverflowing(o,e.containsRTL,e.lineTokens,e.fauxIndentLength,n);e.renderControlCharacters&&!e.isBasicASCII&&(r=extractControlCharacters(o,r)),(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace&&!e.continuesWithWrappedLine)&&(r=_applyRenderWhitespace(e,o,n,r));let s=0;if(e.lineDecorations.length>0){for(let t=0,i=e.lineDecorations.length;t<i;t++){let i=e.lineDecorations[t];3===i.type?s|=1:1===i.type?s|=1:2===i.type&&(s|=2)}r=_applyInlineDecorations(o,n,r,e.lineDecorations)}return e.containsRTL||(r=splitLargeTokens(o,r,!e.isBasicASCII||e.fontLigatures)),new ResolvedRenderLineInput(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,o,n,t,i,r,s,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}function transformAndRemoveOverflowing(e,t,i,n,r){let s=[],l=0;n>0&&(s[l++]=new LinePart(n,"",0,!1));let d=n;for(let c=0,u=i.getCount();c<u;c++){let u=i.getEndOffset(c);if(u<=n)continue;let g=i.getClassName(c);if(u>=r){let i=!!t&&o.Ut(e.substring(d,r));s[l++]=new LinePart(r,g,0,i);break}let m=!!t&&o.Ut(e.substring(d,u));s[l++]=new LinePart(u,g,0,m),d=u}return s}function splitLargeTokens(e,t,i){let n=0,o=[],r=0;if(i)for(let i=0,s=t.length;i<s;i++){let s=t[i],l=s.endIndex;if(n+50<l){let t=s.type,i=s.metadata,d=s.containsRTL,c=-1,u=n;for(let s=n;s<l;s++)32===e.charCodeAt(s)&&(c=s),-1!==c&&s-u>=50&&(o[r++]=new LinePart(c+1,t,i,d),u=c+1,c=-1);u!==l&&(o[r++]=new LinePart(l,t,i,d))}else o[r++]=s;n=l}else for(let e=0,i=t.length;e<i;e++){let i=t[e],s=i.endIndex,l=s-n;if(l>50){let e=i.type,t=i.metadata,d=i.containsRTL,c=Math.ceil(l/50);for(let i=1;i<c;i++){let s=n+50*i;o[r++]=new LinePart(s,e,t,d)}o[r++]=new LinePart(s,e,t,d)}else o[r++]=i;n=s}return o}function isControlCharacter(e){return e<32?9!==e:127===e||e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e}function extractControlCharacters(e,t){let i=[],n=new LinePart(0,"",0,!1),o=0;for(let r of t){let t=r.endIndex;for(;o<t;o++){let t=e.charCodeAt(o);isControlCharacter(t)&&(o>n.endIndex&&(n=new LinePart(o,r.type,r.metadata,r.containsRTL),i.push(n)),n=new LinePart(o+1,"mtkcontrol",r.metadata,!1),i.push(n))}o>n.endIndex&&(n=new LinePart(t,r.type,r.metadata,r.containsRTL),i.push(n))}return i}function _applyRenderWhitespace(e,t,i,n){let r;let s=e.continuesWithWrappedLine,l=e.fauxIndentLength,d=e.tabSize,c=e.startVisibleColumn,u=e.useMonospaceOptimizations,g=e.selectionsOnLine,m=1===e.renderWhitespace,f=3===e.renderWhitespace,_=e.renderSpaceWidth!==e.spaceWidth,v=[],C=0,b=0,S=n[0].type,y=n[b].containsRTL,w=n[b].endIndex,L=n.length,k=!1,D=o.LC(t);-1===D?(k=!0,D=i,r=i):r=o.ow(t);let x=!1,N=0,E=g&&g[N],I=c%d;for(let e=l;e<i;e++){let s;let c=t.charCodeAt(e);if(E&&e>=E.endOffset&&(N++,E=g&&g[N]),e<D||e>r)s=!0;else if(9===c)s=!0;else if(32===c){if(m){if(x)s=!0;else{let n=e+1<i?t.charCodeAt(e+1):0;s=32===n||9===n}}else s=!0}else s=!1;if(s&&g&&(s=!!E&&E.startOffset<=e&&E.endOffset>e),s&&f&&(s=k||e>r),s&&y&&e>=D&&e<=r&&(s=!1),x){if(!s||!u&&I>=d){if(_){let t=C>0?v[C-1].endIndex:l;for(let i=t+1;i<=e;i++)v[C++]=new LinePart(i,"mtkw",1,!1)}else v[C++]=new LinePart(e,"mtkw",1,!1);I%=d}}else(e===w||s&&e>l)&&(v[C++]=new LinePart(e,S,0,y),I%=d);for(9===c?I=d:o.K7(c)?I+=2:I++,x=s;e===w;)if(++b<L)S=n[b].type,y=n[b].containsRTL,w=n[b].endIndex;else break}let T=!1;if(x){if(s&&m){let e=i>0?t.charCodeAt(i-1):0,n=i>1?t.charCodeAt(i-2):0;32===e&&32!==n&&9!==n||(T=!0)}else T=!0}if(T){if(_){let e=C>0?v[C-1].endIndex:l;for(let t=e+1;t<=i;t++)v[C++]=new LinePart(t,"mtkw",1,!1)}else v[C++]=new LinePart(i,"mtkw",1,!1)}else v[C++]=new LinePart(i,S,0,y);return v}function _applyInlineDecorations(e,t,i,n){n.sort(s.Kp.compare);let o=s.k.normalize(e,n),r=o.length,l=0,d=[],c=0,u=0;for(let e=0,t=i.length;e<t;e++){let t=i[e],n=t.endIndex,s=t.type,g=t.metadata,m=t.containsRTL;for(;l<r&&o[l].startOffset<n;){let e=o[l];if(e.startOffset>u&&(u=e.startOffset,d[c++]=new LinePart(u,s,g,m)),e.endOffset+1<=n)u=e.endOffset+1,d[c++]=new LinePart(u,s+" "+e.className,g|e.metadata,m),l++;else{u=n,d[c++]=new LinePart(u,s+" "+e.className,g|e.metadata,m);break}}n>u&&(u=n,d[c++]=new LinePart(u,s,g,m))}let g=i[i.length-1].endIndex;if(l<r&&o[l].startOffset===g)for(;l<r&&o[l].startOffset===g;){let e=o[l];d[c++]=new LinePart(u,e.className,e.metadata,!1),l++}return d}function _renderLine(e,t){let i=e.fontIsMonospace,r=e.canUseHalfwidthRightwardsArrow,s=e.containsForeignElements,l=e.lineContent,d=e.len,c=e.isOverflowing,u=e.overflowingCharCount,g=e.parts,m=e.fauxIndentLength,f=e.tabSize,_=e.startVisibleColumn,v=e.containsRTL,C=e.spaceWidth,b=e.renderSpaceCharCode,S=e.renderWhitespace,y=e.renderControlCharacters,w=new CharacterMapping(d+1,g.length),L=!1,k=0,D=_,x=0,N=0,E=0;v?t.appendString('<span dir="ltr">'):t.appendString("<span>");for(let e=0,n=g.length;e<n;e++){let n=g[e],c=n.endIndex,u=n.type,_=n.containsRTL,v=0!==S&&n.isWhitespace(),I=v&&!i&&("mtkw"===u||!s),T=k===c&&n.isPseudoAfter();if(x=0,t.appendString("<span "),_&&t.appendString('style="unicode-bidi:isolate" '),t.appendString('class="'),t.appendString(I?"mtkz":u),t.appendASCIICharCode(34),v){let i=0;{let e=k,t=D;for(;e<c;e++){let n=l.charCodeAt(e),o=(9===n?f-t%f:1)|0;i+=o,e>=m&&(t+=o)}}for(I&&(t.appendString(' style="width:'),t.appendString(String(C*i)),t.appendString('px"')),t.appendASCIICharCode(62);k<c;k++){let i,n;w.setColumnInfo(k+1,e-E,x,N),E=0;let o=l.charCodeAt(k);if(9===o){n=i=f-D%f|0,!r||n>1?t.appendCharCode(8594):t.appendCharCode(65515);for(let e=2;e<=n;e++)t.appendCharCode(160)}else i=2,n=1,t.appendCharCode(b),t.appendCharCode(8204);x+=i,N+=n,k>=m&&(D+=n)}}else for(t.appendASCIICharCode(62);k<c;k++){w.setColumnInfo(k+1,e-E,x,N),E=0;let i=l.charCodeAt(k),n=1,r=1;switch(i){case 9:r=n=f-D%f;for(let e=1;e<=n;e++)t.appendCharCode(160);break;case 32:t.appendCharCode(160);break;case 60:t.appendString("&lt;");break;case 62:t.appendString("&gt;");break;case 38:t.appendString("&amp;");break;case 0:y?t.appendCharCode(9216):t.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.appendCharCode(65533);break;default:o.K7(i)&&r++,y&&i<32?t.appendCharCode(9216+i):y&&127===i?t.appendCharCode(9249):y&&isControlCharacter(i)?(t.appendString("[U+"),t.appendString(to4CharHex(i)),t.appendString("]"),r=n=8):t.appendCharCode(i)}x+=n,N+=r,k>=m&&(D+=r)}T?E++:E=0,k>=d&&!L&&n.isPseudoAfter()&&(L=!0,w.setColumnInfo(k+1,e,x,N)),t.appendString("</span>")}return L||w.setColumnInfo(d+1,g.length-1,x,N),c&&(t.appendString('<span class="mtkoverflow">'),t.appendString(n.NC("showMore","Show more ({0})",renderOverflowingCharCount(u))),t.appendString("</span>")),t.appendString("</span>"),new RenderLineOutput(w,v,s)}function to4CharHex(e){return e.toString(16).toUpperCase().padStart(4,"0")}function renderOverflowingCharCount(e){return e<1024?n.NC("overflow.chars","{0} chars",e):e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1024/1024).toFixed(1)} MB`}},50263:function(e,t,i){"use strict";i.d(t,{$l:function(){return ViewModelDecoration},$t:function(){return InlineDecoration},IP:function(){return ViewLineData},SQ:function(){return OverviewRulerDecorationsGroup},Wx:function(){return SingleLineInlineDecoration},l_:function(){return Viewport},ud:function(){return MinimapLinesRenderingData},wA:function(){return ViewLineRenderingData}});var n=i(34794),o=i(45837),r=i(30822);let Viewport=class Viewport{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=0|e,this.left=0|t,this.width=0|i,this.height=0|n}};let MinimapLinesRenderingData=class MinimapLinesRenderingData{constructor(e,t){this.tabSize=e,this.data=t}};let ViewLineData=class ViewLineData{constructor(e,t,i,n,o,r,s){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=s}};let ViewLineRenderingData=class ViewLineRenderingData{constructor(e,t,i,n,o,r,s,l,d,c){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=ViewLineRenderingData.isBasicASCII(i,r),this.containsRTL=ViewLineRenderingData.containsRTL(i,this.isBasicASCII,o),this.tokens=s,this.inlineDecorations=l,this.tabSize=d,this.startVisibleColumn=c}static isBasicASCII(e,t){return!t||o.$i(e)}static containsRTL(e,t,i){return!t&&!!i&&o.Ut(e)}};let InlineDecoration=class InlineDecoration{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}};let SingleLineInlineDecoration=class SingleLineInlineDecoration{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new InlineDecoration(new r.e(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}};let ViewModelDecoration=class ViewModelDecoration{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}};let OverviewRulerDecorationsGroup=class OverviewRulerDecorationsGroup{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&n.fS(e.data,t.data)}static equalsArr(e,t){return n.fS(e,t,OverviewRulerDecorationsGroup.equals)}}},52271:function(e,t,i){"use strict";i.d(t,{EY:function(){return OverviewRulerZone},Tj:function(){return OverviewZoneManager}});let ColorZone=class ColorZone{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=0|e,this.to=0|t,this.colorId=0|i}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}};let OverviewRulerZone=class OverviewRulerZone{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}};let OverviewZoneManager=class OverviewZoneManager{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(OverviewRulerZone.compare)}setLineHeight(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){let e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),o=i/n,r=Math.floor(4*this._pixelRatio/2),s=[];for(let n=0,l=this._zones.length;n<l;n++){let l=this._zones[n];if(!e){let e=l.getColorZones();if(e){s.push(e);continue}}let d=this._getVerticalOffsetForLine(l.startLineNumber),c=0===l.heightInLines?this._getVerticalOffsetForLine(l.endLineNumber)+t:d+l.heightInLines*t,u=Math.floor(o*d),g=Math.floor(o*c),m=Math.floor((u+g)/2),f=g-m;f<r&&(f=r),m-f<0&&(m=f),m+f>i&&(m=i-f);let _=l.color,v=this._color2Id[_];v||(v=++this._lastAssignedId,this._color2Id[_]=v,this._id2Color[v]=_);let C=new ColorZone(m-f,m+f,v);l.setColorZone(C),s.push(C)}return this._colorZonesInvalid=!1,s.sort(ColorZone.compare),s}}},37186:function(e,t,i){"use strict";i.d(t,{$t:function(){return isModelDecorationInComment},CU:function(){return ViewModelDecorations},Fd:function(){return isModelDecorationVisible},zg:function(){return isModelDecorationInString}});var n=i(11953),o=i(30822),r=i(50263),s=i(69350);let ViewModelDecorations=class ViewModelDecorations{constructor(e,t,i,n,o){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){let t=e.id,i=this._decorationsCache[t];if(!i){let s;let l=e.range,d=e.options;if(d.isWholeLine){let e=this._coordinatesConverter.convertModelPositionToViewPosition(new n.L(l.startLineNumber,1),0,!1,!0),t=this._coordinatesConverter.convertModelPositionToViewPosition(new n.L(l.endLineNumber,this.model.getLineMaxColumn(l.endLineNumber)),1);s=new o.e(e.lineNumber,e.column,t.lineNumber,t.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(l,1);i=new r.$l(s,d),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=null!==this._cachedModelDecorationsResolver;return(t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange))||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){let n=new o.e(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){let n=this._linesCollection.getDecorationsInRange(e,this.editorId,(0,s.$J)(this.configuration.options),t,i),l=e.startLineNumber,d=e.endLineNumber,c=[],u=0,g=[];for(let e=l;e<=d;e++)g[e-l]=[];for(let e=0,t=n.length;e<t;e++){let t=n[e],i=t.options;if(!isModelDecorationVisible(this.model,t))continue;let s=this._getOrCreateViewModelDecoration(t),m=s.range;if(c[u++]=s,i.inlineClassName){let e=new r.$t(m,i.inlineClassName,i.inlineClassNameAffectsLetterSpacing?3:0),t=Math.max(l,m.startLineNumber),n=Math.min(d,m.endLineNumber);for(let i=t;i<=n;i++)g[i-l].push(e)}if(i.beforeContentClassName&&l<=m.startLineNumber&&m.startLineNumber<=d){let e=new r.$t(new o.e(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),i.beforeContentClassName,1);g[m.startLineNumber-l].push(e)}if(i.afterContentClassName&&l<=m.endLineNumber&&m.endLineNumber<=d){let e=new r.$t(new o.e(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),i.afterContentClassName,2);g[m.endLineNumber-l].push(e)}}return{decorations:c,inlineDecorations:g}}};function isModelDecorationVisible(e,t){return!(t.options.hideInCommentTokens&&isModelDecorationInComment(e,t)||t.options.hideInStringTokens&&isModelDecorationInString(e,t))}function isModelDecorationInComment(e,t){return testTokensInRange(e,t.range,e=>1===e)}function isModelDecorationInString(e,t){return testTokensInRange(e,t.range,e=>2===e)}function testTokensInRange(e,t,i){for(let n=t.startLineNumber;n<=t.endLineNumber;n++){let o=e.tokenization.getLineTokens(n),r=n===t.startLineNumber,s=n===t.endLineNumber,l=r?o.findTokenIndexAtOffset(t.startColumn-1):0;for(;l<o.getCount();){if(s){let e=o.getStartOffset(l);if(e>t.endColumn-1)break}let e=i(o.getStandardTokenType(l));if(!e)return!1;l++}}return!0}},20101:function(e,t,i){"use strict";i.d(t,{yy:function(){return EditorState},Dl:function(){return EditorStateCancellationTokenSource},YQ:function(){return TextModelCancellationTokenSource}});var n=i(45837),o=i(30822),r=i(45828),s=i(87932),l=i(38981),d=i(7193),c=i(68324),u=i(27989),g=i(95026),m=i(46157);let f=(0,u.yh)("IEditorCancelService"),_=new d.uy("cancellableOperation",!1,(0,m.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,g.z)(f,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext(e=>{let t=_.bindTo(e.get(d.i6)),i=new c.S;return{key:t,tokens:i}}),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),()=>{i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}cancel(e){let t=this._tokens.get(e);if(!t)return;let i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},1);let EditorKeybindingCancellationTokenSource=class EditorKeybindingCancellationTokenSource extends r.A{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(t=>t.get(f).add(e,this))}dispose(){this._unregister(),super.dispose()}};(0,l.fK)(new class extends l._l{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:_})}runEditorCommand(e,t){e.get(f).cancel(t)}});let EditorState=class EditorState{constructor(e,t){if(this.flags=t,(1&this.flags)!=0){let t=e.getModel();this.modelVersionId=t?n.WU("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;(4&this.flags)!=0?this.position=e.getPosition():this.position=null,(2&this.flags)!=0?this.selection=e.getSelection():this.selection=null,(8&this.flags)!=0?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){return e instanceof EditorState&&this.modelVersionId===e.modelVersionId&&this.scrollLeft===e.scrollLeft&&this.scrollTop===e.scrollTop&&(!!this.position||!e.position)&&(!this.position||!!e.position)&&(!this.position||!e.position||!!this.position.equals(e.position))&&(!!this.selection||!e.selection)&&(!this.selection||!!e.selection)&&(!this.selection||!e.selection||!!this.selection.equalsRange(e.selection))}validate(e){return this._equals(new EditorState(e,this.flags))}};let EditorStateCancellationTokenSource=class EditorStateCancellationTokenSource extends EditorKeybindingCancellationTokenSource{constructor(e,t,i,n){super(e,n),this._listener=new s.SL,4&t&&this._listener.add(e.onDidChangeCursorPosition(e=>{i&&o.e.containsPosition(i,e.position)||this.cancel()})),2&t&&this._listener.add(e.onDidChangeCursorSelection(e=>{i&&o.e.containsRange(i,e.selection)||this.cancel()})),8&t&&this._listener.add(e.onDidScrollChange(e=>this.cancel())),1&t&&(this._listener.add(e.onDidChangeModel(e=>this.cancel())),this._listener.add(e.onDidChangeModelContent(e=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}};let TextModelCancellationTokenSource=class TextModelCancellationTokenSource extends r.A{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}},15934:function(e,t,i){"use strict";i.d(t,{xC:function(){return FormattingConflicts},x$:function(){return formatDocumentRangesWithSelectedProvider},Qq:function(){return formatDocumentWithSelectedProvider},Qs:function(){return getOnTypeFormattingEdits}});var n=i(34794),o=i(45828),r=i(17861),s=i(50885),l=i(68324),d=i(16877),c=i(31568),u=i(20101),g=i(64676),m=i(11953),f=i(30822),_=i(45841),v=i(2068),C=i(72403),b=i(24238),S=i(56143);let ExtensionIdentifier=class ExtensionIdentifier{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}};let ExtensionIdentifierSet=class ExtensionIdentifierSet{constructor(e){if(this._set=new Set,e)for(let t of e)this.add(t)}add(e){this._set.add(ExtensionIdentifier.toKey(e))}has(e){return this._set.has(ExtensionIdentifier.toKey(e))}};var y=i(27989),w=i(67379),L=i(96927),k=i(54316);function getRealAndSyntheticDocumentFormattersOrdered(e,t,i){let n=[],o=new ExtensionIdentifierSet,r=e.ordered(i);for(let e of r)n.push(e),e.extensionId&&o.add(e.extensionId);let s=t.ordered(i);for(let e of s){if(e.extensionId){if(o.has(e.extensionId))continue;o.add(e.extensionId)}n.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:(t,i,n)=>e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),i,n)})}return n}let FormattingConflicts=class FormattingConflicts{static setFormatterSelector(e){let t=FormattingConflicts._selectors.unshift(e);return{dispose:t}}static async select(e,t,i,n){if(0===e.length)return;let o=s.$.first(FormattingConflicts._selectors);if(o)return await o(e,t,i,n)}};async function formatDocumentRangesWithSelectedProvider(e,t,i,n,o,r,s){let l=e.get(y.TG),{documentRangeFormattingEditProvider:d}=e.get(w.p),c=(0,g.CL)(t)?t.getModel():t,u=d.ordered(c),m=await FormattingConflicts.select(u,c,n,2);m&&(o.report(m),await l.invokeFunction(formatDocumentRangesWithProvider,m,t,i,r,s))}async function formatDocumentRangesWithProvider(e,t,i,o,r,s){var l,d;let c,m;let C=e.get(v.p),S=e.get(L.VZ),y=e.get(k.IV);(0,g.CL)(i)?(c=i.getModel(),m=new u.Dl(i,5,void 0,r)):(c=i,m=new u.YQ(i,r));let w=[],D=0;for(let e of(0,n._2)(o).sort(f.e.compareRangesUsingStarts))D>0&&f.e.areIntersectingOrTouching(w[D-1],e)?w[D-1]=f.e.fromPositions(w[D-1].getStartPosition(),e.getEndPosition()):D=w.push(e);let computeEdits=async e=>{var i,n;S.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(i=t.extensionId)||void 0===i?void 0:i.value,e);let o=await t.provideDocumentRangeFormattingEdits(c,e,c.getFormattingOptions(),m.token)||[];return S.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(n=t.extensionId)||void 0===n?void 0:n.value,o),o},hasIntersectingEdit=(e,t)=>{if(!e.length||!t.length)return!1;let i=e.reduce((e,t)=>f.e.plusRange(e,t.range),e[0].range);if(!t.some(e=>f.e.intersectRanges(i,e.range)))return!1;for(let i of e)for(let e of t)if(f.e.intersectRanges(i.range,e.range))return!0;return!1},x=[],N=[];try{if("function"==typeof t.provideDocumentRangesFormattingEdits){S.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(l=t.extensionId)||void 0===l?void 0:l.value,w);let e=await t.provideDocumentRangesFormattingEdits(c,w,c.getFormattingOptions(),m.token)||[];S.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(d=t.extensionId)||void 0===d?void 0:d.value,e),N.push(e)}else{for(let e of w){if(m.token.isCancellationRequested)return!0;N.push(await computeEdits(e))}for(let e=0;e<w.length;++e)for(let t=e+1;t<w.length;++t){if(m.token.isCancellationRequested)return!0;if(hasIntersectingEdit(N[e],N[t])){let i=f.e.plusRange(w[e],w[t]),n=await computeEdits(i);w.splice(t,1),w.splice(e,1),w.push(i),N.splice(t,1),N.splice(e,1),N.push(n),e=0,t=0}}}for(let e of N){if(m.token.isCancellationRequested)return!0;let t=await C.computeMoreMinimalEdits(c.uri,e);t&&x.push(...t)}}finally{m.dispose()}if(0===x.length)return!1;if((0,g.CL)(i))b.V.execute(i,x,!0),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{let[{range:e}]=x,t=new _.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);c.pushEditOperations([t],x.map(e=>({text:e.text,range:f.e.lift(e.range),forceMoveMarkers:!0})),e=>{for(let{range:i}of e)if(f.e.areIntersectingOrTouching(i,t))return[new _.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return y.playSignal(k.iP.format,{userGesture:s}),!0}async function formatDocumentWithSelectedProvider(e,t,i,n,o,r){let s=e.get(y.TG),l=e.get(w.p),d=(0,g.CL)(t)?t.getModel():t,c=getRealAndSyntheticDocumentFormattersOrdered(l.documentFormattingEditProvider,l.documentRangeFormattingEditProvider,d),u=await FormattingConflicts.select(c,d,i,1);u&&(n.report(u),await s.invokeFunction(formatDocumentWithProvider,u,t,i,o,r))}async function formatDocumentWithProvider(e,t,i,n,o,r){let s,l,d;let c=e.get(v.p),m=e.get(k.IV);(0,g.CL)(i)?(s=i.getModel(),l=new u.Dl(i,5,void 0,o)):(s=i,l=new u.YQ(i,o));try{let e=await t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),l.token);if(d=await c.computeMoreMinimalEdits(s.uri,e),l.token.isCancellationRequested)return!0}finally{l.dispose()}if(!d||0===d.length)return!1;if((0,g.CL)(i))b.V.execute(i,d,2!==n),2!==n&&i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{let[{range:e}]=d,t=new _.Y(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);s.pushEditOperations([t],d.map(e=>({text:e.text,range:f.e.lift(e.range),forceMoveMarkers:!0})),e=>{for(let{range:i}of e)if(f.e.areIntersectingOrTouching(i,t))return[new _.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return m.playSignal(k.iP.format,{userGesture:r}),!0}async function getDocumentRangeFormattingEditsUntilResult(e,t,i,o,s,l){let d=t.documentRangeFormattingEditProvider.ordered(i);for(let t of d){let d=await Promise.resolve(t.provideDocumentRangeFormattingEdits(i,o,s,l)).catch(r.Cp);if((0,n.Of)(d))return await e.computeMoreMinimalEdits(i.uri,d)}}async function getDocumentFormattingEditsUntilResult(e,t,i,o,s){let l=getRealAndSyntheticDocumentFormattersOrdered(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,i);for(let t of l){let l=await Promise.resolve(t.provideDocumentFormattingEdits(i,o,s)).catch(r.Cp);if((0,n.Of)(l))return await e.computeMoreMinimalEdits(i.uri,l)}}function getOnTypeFormattingEdits(e,t,i,n,o,s,l){let d=t.onTypeFormattingEditProvider.ordered(i);return 0===d.length||0>d[0].autoFormatTriggerCharacters.indexOf(o)?Promise.resolve(void 0):Promise.resolve(d[0].provideOnTypeFormattingEdits(i,n,o,s,l)).catch(r.Cp).then(t=>e.computeMoreMinimalEdits(i.uri,t))}FormattingConflicts._selectors=new l.S,S.P.registerCommand("_executeFormatRangeProvider",async function(e,...t){let[i,n,r]=t;(0,d.p_)(c.o.isUri(i)),(0,d.p_)(f.e.isIRange(n));let s=e.get(C.S),l=e.get(v.p),u=e.get(w.p),g=await s.createModelReference(i);try{return getDocumentRangeFormattingEditsUntilResult(l,u,g.object.textEditorModel,f.e.lift(n),r,o.T.None)}finally{g.dispose()}}),S.P.registerCommand("_executeFormatDocumentProvider",async function(e,...t){let[i,n]=t;(0,d.p_)(c.o.isUri(i));let r=e.get(C.S),s=e.get(v.p),l=e.get(w.p),u=await r.createModelReference(i);try{return getDocumentFormattingEditsUntilResult(s,l,u.object.textEditorModel,n,o.T.None)}finally{u.dispose()}}),S.P.registerCommand("_executeFormatOnTypeProvider",async function(e,...t){let[i,n,r,s]=t;(0,d.p_)(c.o.isUri(i)),(0,d.p_)(m.L.isIPosition(n)),(0,d.p_)("string"==typeof r);let l=e.get(C.S),u=e.get(v.p),g=e.get(w.p),f=await l.createModelReference(i);try{return getOnTypeFormattingEdits(u,g,f.object.textEditorModel,m.L.lift(n),r,s,o.T.None)}finally{f.dispose()}})},24238:function(e,t,i){"use strict";i.d(t,{V:function(){return FormattingEdit}});var n=i(78659),o=i(30822),r=i(6162);let FormattingEdit=class FormattingEdit{static _handleEolEdits(e,t){let i;let n=[];for(let e of t)"number"==typeof e.eol&&(i=e.eol),e.range&&"string"==typeof e.text&&n.push(e);return"number"==typeof i&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;let i=e.getModel(),n=i.validateRange(t.range),o=i.getFullModelRange();return o.equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();let s=r.Z.capture(e),l=FormattingEdit._handleEolEdits(e,t);1===l.length&&FormattingEdit._isFullModelReplaceEdit(e,l[0])?e.executeEdits("formatEditsCommand",l.map(e=>n.h.replace(o.e.lift(e.range),e.text))):e.executeEdits("formatEditsCommand",l.map(e=>n.h.replaceMove(o.e.lift(e.range),e.text))),i&&e.pushUndoStop(),s.restoreRelativeVerticalPositionOfCursor(e)}}},50445:function(e,t,i){"use strict";i.r(t),i.d(t,{CancellationTokenSource:function(){return nC},Emitter:function(){return nb},KeyCode:function(){return nS},KeyMod:function(){return ny},MarkerSeverity:function(){return nx},MarkerTag:function(){return nN},Position:function(){return nw},Range:function(){return nL},Selection:function(){return nk},SelectionDirection:function(){return nD},Token:function(){return nI},Uri:function(){return nE},editor:function(){return nT},languages:function(){return nM}});var n,o,r,s,l,d,c,u,g,m,f,_,v,C,b,S,y,w,L,k,D=i(69350),x=i(23747),N=i(58990),E=i(87932),I=i(45837),T=i(31568);i(30931);var M=i(98855),R=i(38981),A=i(86992),P=i(56660),O=i(92241);function createWebWorker(e,t,i){return new MonacoWebWorkerImpl(e,t,i)}let MonacoWebWorkerImpl=class MonacoWebWorkerImpl extends O.Q8{constructor(e,t,i){super(e,i.keepIdleModels||!1,i.label,t),this._foreignModuleId=i.moduleId,this._foreignModuleCreateData=i.createData||null,this._foreignModuleHost=i.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||"function"!=typeof this._foreignModuleHost[e])return Promise.reject(Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(e){return Promise.reject(e)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{let t=this._foreignModuleHost?(0,P.$E)(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(t=>{this._foreignModuleCreateData=null;let proxyMethodRequest=(t,i)=>e.fmr(t,i),createProxyMethod=(e,t)=>function(){let i=Array.prototype.slice.call(arguments,0);return t(e,i)},i={};for(let e of t)i[e]=createProxyMethod(e,proxyMethodRequest);return i})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(e=>this.getProxy())}};var F=i(22903),B=i(77408),W=i(97292),V=i(7530),H=i(84634),z=i(68903),U=i(36281),K=i(12429),j=i(86809),q=i(52025),G=i(64353),Q=i(76883),Z=i(46338),Y=i(50296),J=i(50263);function isFuzzyActionArr(e){return Array.isArray(e)}function isFuzzyAction(e){return!isFuzzyActionArr(e)}function isString(e){return"string"==typeof e}function fixCase(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function sanitize(e){return e.replace(/[&<>'"_]/g,"-")}function log(e,t){console.log(`${e.languageId}: ${t}`)}function createError(e,t){return Error(`${e.languageId}: ${t}`)}function substituteMatches(e,t,i,n,o){let r=null;return t.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,function(t,s,l,d,c,u,g,m,f){return l?"$":d?fixCase(e,i):c&&c<n.length?fixCase(e,n[c]):g&&e&&"string"==typeof e[g]?e[g]:(null===r&&(r=o.split(".")).unshift(o),u&&u<r.length)?fixCase(e,r[u]):""})}function findRules(e,t){let i=t;for(;i&&i.length>0;){let t=e.tokenizer[i];if(t)return t;let n=i.lastIndexOf(".");i=n<0?null:i.substr(0,n)}return null}function stateExists(e,t){let i=t;for(;i&&i.length>0;){let t=e.stateNames[i];if(t)return!0;let n=i.lastIndexOf(".");i=n<0?null:i.substr(0,n)}return!1}var X=i(78559);let MonarchStackElementFactory=class MonarchStackElementFactory{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(null!==e&&e.depth>=this._maxCacheDepth)return new MonarchStackElement(e,t);let i=MonarchStackElement.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new MonarchStackElement(e,t),this._entries[i]=n),n}};MonarchStackElementFactory._INSTANCE=new MonarchStackElementFactory(5);let MonarchStackElement=class MonarchStackElement{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;null!==e;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;null!==e&&null!==t;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return null===e&&null===t}equals(e){return MonarchStackElement._equals(this,e)}push(e){return MonarchStackElementFactory.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return MonarchStackElementFactory.create(this.parent,e)}};let EmbeddedLanguageData=class EmbeddedLanguageData{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){let e=this.state.clone();return e===this.state?this:new EmbeddedLanguageData(this.languageId,this.state)}};let MonarchLineStateFactory=class MonarchLineStateFactory{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(null!==t||null!==e&&e.depth>=this._maxCacheDepth)return new MonarchLineState(e,t);let i=MonarchStackElement.getStackElementId(e),n=this._entries[i];return n||(n=new MonarchLineState(e,null),this._entries[i]=n),n}};MonarchLineStateFactory._INSTANCE=new MonarchLineStateFactory(5);let MonarchLineState=class MonarchLineState{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){let e=this.embeddedLanguageData?this.embeddedLanguageData.clone():null;return e===this.embeddedLanguageData?this:MonarchLineStateFactory.create(this.stack,this.embeddedLanguageData)}equals(e){return!!(e instanceof MonarchLineState&&this.stack.equals(e.stack))&&(null===this.embeddedLanguageData&&null===e.embeddedLanguageData||null!==this.embeddedLanguageData&&null!==e.embeddedLanguageData&&this.embeddedLanguageData.equals(e.embeddedLanguageData))}};let MonarchClassicTokensCollector=class MonarchClassicTokensCollector{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){(this._lastTokenType!==t||this._lastTokenLanguage!==this._languageId)&&(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new V.WU(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){let o=i.languageId,r=i.state,s=V.RW.get(o);if(!s)return this.enterLanguage(o),this.emit(n,""),r;let l=s.tokenize(e,t,r);if(0!==n)for(let e of l.tokens)this._tokens.push(new V.WU(e.offset+n,e.type,e.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new V.hG(this._tokens,e)}};let MonarchModernTokensCollector=class MonarchModernTokensCollector{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){let i=1024|this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){let n=null!==e?e.length:0,o=t.length,r=null!==i?i.length:0;if(0===n&&0===o&&0===r)return new Uint32Array(0);if(0===n&&0===o)return i;if(0===o&&0===r)return e;let s=new Uint32Array(n+o+r);null!==e&&s.set(e);for(let e=0;e<o;e++)s[n+e]=t[e];return null!==i&&s.set(i,n+o),s}nestedLanguageTokenize(e,t,i,n){let o=i.languageId,r=i.state,s=V.RW.get(o);if(!s)return this.enterLanguage(o),this.emit(n,""),r;let l=s.tokenizeEncoded(e,t,r);if(0!==n)for(let e=0,t=l.tokens.length;e<t;e+=2)l.tokens[e]+=n;return this._prependTokens=MonarchModernTokensCollector._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new V.DI(MonarchModernTokensCollector._merge(this._prependTokens,this._tokens,null),e)}};let ee=m=class extends E.JT{constructor(e,t,i,n,o){super(),this._configurationService=o,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(V.RW.onDidChange(e=>{if(r)return;let t=!1;for(let i=0,n=e.changedLanguages.length;i<n;i++){let n=e.changedLanguages[i];if(this._embeddedLanguages[n]){t=!0;break}}t&&(r=!0,V.RW.handleChange([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){let e=[];for(let t in this._embeddedLanguages){let i=V.RW.get(t);if(i){if(i instanceof m){let t=i.getLoadStatus();!1===t.loaded&&e.push(t.promise)}continue}V.RW.isResolved(t)||e.push(V.RW.getOrCreate(t))}return 0===e.length?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(e=>void 0)}}getInitialState(){let e=MonarchStackElementFactory.create(null,this._lexer.start);return MonarchLineStateFactory.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return(0,K.Ri)(this._languageId,i);let n=new MonarchClassicTokensCollector,o=this._tokenize(e,t,i,n);return n.finalize(o)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return(0,K.Dy)(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);let n=new MonarchModernTokensCollector(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,i,n);return n.finalize(o)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&!(i=findRules(this._lexer,t.stack.state)))throw createError(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,o=!1;for(let t of i){if(isString(t.action)||"@pop"!==t.action.nextEmbedded)continue;o=!0;let i=t.regex,r=t.regex.source;if("^(?:"===r.substr(0,4)&&")"===r.substr(r.length-1,1)){let e=(i.ignoreCase?"i":"")+(i.unicode?"u":"");i=new RegExp(r.substr(4,r.length-5),e)}let s=e.search(i);-1!==s&&(0===s||!t.matchOnlyAtLineStart)&&(-1===n||s<n)&&(n=s)}if(!o)throw createError(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,o){let r=this._findLeavingNestedLanguageOffset(e,i);if(-1===r){let r=o.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return MonarchLineStateFactory.create(i.stack,new EmbeddedLanguageData(i.embeddedLanguageData.languageId,r))}let s=e.substring(0,r);s.length>0&&o.nestedLanguageTokenize(s,!1,i.embeddedLanguageData,n);let l=e.substring(r);return this._myTokenize(l,t,i,n+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,o){o.enterLanguage(this._languageId);let r=e.length,s=t&&this._lexer.includeLF?e+"\n":e,l=s.length,d=i.embeddedLanguageData,c=i.stack,u=0,g=null,m=!0;for(;m||u<l;){let i=u,f=c.depth,_=g?g.groups.length:0,v=c.state,C=null,b=null,S=null,y=null,w=null;if(g){C=g.matches;let e=g.groups.shift();b=e.matched,S=e.action,y=g.rule,0===g.groups.length&&(g=null)}else{if(!m&&u>=l)break;m=!1;let e=this._lexer.tokenizer[v];if(!e&&!(e=findRules(this._lexer,v)))throw createError(this._lexer,"tokenizer state is not defined: "+v);let t=s.substr(u);for(let i of e)if((0===u||!i.matchOnlyAtLineStart)&&(C=t.match(i.regex))){b=C[0],S=i.action;break}}if(C||(C=[""],b=""),S||(u<l&&(b=(C=[s.charAt(u)])[0]),S=this._lexer.defaultToken),null===b)break;for(u+=b.length;isFuzzyAction(S)&&!isString(S)&&S.test;)S=S.test(b,C,v,u===l);let L=null;if("string"==typeof S||Array.isArray(S))L=S;else if(S.group)L=S.group;else if(null!==S.token&&void 0!==S.token){if(L=S.tokenSubst?substituteMatches(this._lexer,S.token,b,C,v):S.token,S.nextEmbedded){if("@pop"===S.nextEmbedded){if(!d)throw createError(this._lexer,"cannot pop embedded language if not inside one");d=null}else if(d)throw createError(this._lexer,"cannot enter embedded language from within an embedded language");else w=substituteMatches(this._lexer,S.nextEmbedded,b,C,v)}if(S.goBack&&(u=Math.max(0,u-S.goBack)),S.switchTo&&"string"==typeof S.switchTo){let e=substituteMatches(this._lexer,S.switchTo,b,C,v);if("@"===e[0]&&(e=e.substr(1)),findRules(this._lexer,e))c=c.switchTo(e);else throw createError(this._lexer,"trying to switch to a state '"+e+"' that is undefined in rule: "+this._safeRuleName(y))}else if(S.transform&&"function"==typeof S.transform)throw createError(this._lexer,"action.transform not supported");else if(S.next){if("@push"===S.next){if(c.depth>=this._lexer.maxStack)throw createError(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(v)}else if("@pop"===S.next){if(c.depth<=1)throw createError(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(y));c=c.pop()}else if("@popall"===S.next)c=c.popall();else{let e=substituteMatches(this._lexer,S.next,b,C,v);if("@"===e[0]&&(e=e.substr(1)),findRules(this._lexer,e))c=c.push(e);else throw createError(this._lexer,"trying to set a next state '"+e+"' that is undefined in rule: "+this._safeRuleName(y))}}S.log&&"string"==typeof S.log&&log(this._lexer,this._lexer.languageId+": "+substituteMatches(this._lexer,S.log,b,C,v))}if(null===L)throw createError(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(y));let computeNewStateForEmbeddedLanguage=i=>{let r=this._languageService.getLanguageIdByLanguageName(i)||this._languageService.getLanguageIdByMimeType(i)||i,s=this._getNestedEmbeddedLanguageData(r);if(!(u<l))return MonarchLineStateFactory.create(c,s);{let i=e.substr(u);return this._nestedTokenize(i,t,MonarchLineStateFactory.create(c,s),n+u,o)}};if(Array.isArray(L)){if(g&&g.groups.length>0)throw createError(this._lexer,"groups cannot be nested: "+this._safeRuleName(y));if(C.length!==L.length+1)throw createError(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(y));let e=0;for(let t=1;t<C.length;t++)e+=C[t].length;if(e!==b.length)throw createError(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(y));g={rule:y,matches:C,groups:[]};for(let e=0;e<L.length;e++)g.groups[e]={action:L[e],matched:C[e+1]};u-=b.length;continue}{if("@rematch"===L&&(u-=b.length,b="",C=null,L="",null!==w))return computeNewStateForEmbeddedLanguage(w);if(0===b.length){if(0===l||f!==c.depth||v!==c.state||(g?g.groups.length:0)!==_)continue;throw createError(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(y))}let e=null;if(isString(L)&&0===L.indexOf("@brackets")){let t=L.substr(9),i=findBracket(this._lexer,b);if(!i)throw createError(this._lexer,"@brackets token returned but no bracket defined as: "+b);e=sanitize(i.token+t)}else{let t=""===L?"":L+this._lexer.tokenPostfix;e=sanitize(t)}i<r&&o.emit(i+n,e)}if(null!==w)return computeNewStateForEmbeddedLanguage(w)}return MonarchLineStateFactory.create(c,d)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new EmbeddedLanguageData(e,K.TJ);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),V.RW.getOrCreate(e),this._embeddedLanguages[e]=!0);let t=V.RW.get(e);return t?new EmbeddedLanguageData(e,t.getInitialState()):new EmbeddedLanguageData(e,K.TJ)}};function findBracket(e,t){if(!t)return null;t=fixCase(e,t);let i=e.brackets;for(let e of i){if(e.open===t)return{token:e.token,bracketType:1};if(e.close===t)return{token:e.token,bracketType:-1}}return null}ee=m=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(n=X.Ui,function(e,t){n(e,t,4)})],ee);let et=(0,Q.Z)("standaloneColorizer",{createHTML:e=>e});let Colorizer=class Colorizer{static colorizeElement(e,t,i,n){n=n||{};let o=n.theme||"vs",r=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();let s=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);let l=i.firstChild?i.firstChild.nodeValue:"";return i.className+=" "+o,this.colorize(t,l||"",s,n).then(e=>{var t;let n=null!==(t=null==et?void 0:et.createHTML(e))&&void 0!==t?t:e;i.innerHTML=n},e=>console.error(e))}static async colorize(e,t,i,n){let o=e.languageIdCodec,r=4;n&&"number"==typeof n.tabSize&&(r=n.tabSize),I.uS(t)&&(t=t.substr(1));let s=I.uq(t);if(!e.isRegisteredLanguageId(i))return _fakeColorize(s,r,o);let l=await V.RW.getOrCreate(i);return l?_colorize(s,r,l,o):_fakeColorize(s,r,o)}static colorizeLine(e,t,i,n,o=4){let r=J.wA.isBasicASCII(e,t),s=J.wA.containsRTL(e,r,i),l=(0,Y.tF)(new Y.IJ(!1,!0,e,!1,r,s,0,n,[],o,0,0,0,0,-1,"none",!1,!1,null));return l.html}static colorizeModelLine(e,t,i=4){let n=e.getLineContent(t);e.tokenization.forceTokenization(t);let o=e.tokenization.getLineTokens(t),r=o.inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}};function _colorize(e,t,i,n){return new Promise((o,r)=>{let execute=()=>{let s=_actualColorize(e,t,i,n);if(i instanceof ee){let e=i.getLoadStatus();if(!1===e.loaded){e.promise.then(execute,r);return}}o(s)};execute()})}function _fakeColorize(e,t,i){let n=[],o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,s=e.length;r<s;r++){let s=e[r];o[0]=s.length;let l=new Z.A(o,s,i),d=J.wA.isBasicASCII(s,!0),c=J.wA.containsRTL(s,d,!0),u=(0,Y.tF)(new Y.IJ(!1,!0,s,!1,d,c,0,l,[],t,0,0,0,0,-1,"none",!1,!1,null));(n=n.concat(u.html)).push("<br/>")}return n.join("")}function _actualColorize(e,t,i,n){let o=[],r=i.getInitialState();for(let s=0,l=e.length;s<l;s++){let l=e[s],d=i.tokenizeEncoded(l,!0,r);Z.A.convertToEndOffset(d.tokens,l.length);let c=new Z.A(d.tokens,l,n),u=J.wA.isBasicASCII(l,!0),g=J.wA.containsRTL(l,u,!0),m=(0,Y.tF)(new Y.IJ(!1,!0,l,!1,u,g,0,c.inflate(),[],t,0,0,0,0,-1,"none",!1,!1,null));(o=o.concat(m.html)).push("<br/>"),r=d.endState}return o.join("")}var ei=i(93864),en=i(10419),eo=i(42999),er=i(70687),es=i(95998),ea=i(57605),el=i(68324),ed=i(93672);let eh=class extends E.JT{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new ea.Q5),this._onCodeEditorAdd=this._register(new ea.Q5),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ea.Q5),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new ea.Q5),this._onDiffEditorAdd=this._register(new ea.Q5),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new ea.Q5),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new el.S,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){(delete this._codeEditors[e.getId()])&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null,t=this.listCodeEditors();for(let i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){let t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorationsByType(e))))}setModelProperty(e,t,i){let n;let o=e.toString();this._modelProperties.has(o)?n=this._modelProperties.get(o):(n=new Map,this._modelProperties.set(o,n)),n.set(t,i)}getModelProperty(e,t){let i=e.toString();if(this._modelProperties.has(i)){let e=this._modelProperties.get(i);return e.get(t)}}async openCodeEditor(e,t,i){for(let n of this._codeEditorOpenHandlers){let o=await n(e,t,i);if(null!==o)return o}return null}registerCodeEditorOpenHandler(e){let t=this._codeEditorOpenHandlers.unshift(e);return(0,E.OF)(t)}};eh=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(o=ed.XE,function(e,t){o(e,t,0)})],eh);var ec=i(7193),eu=i(95026),standaloneCodeEditorService_param=function(e,t){return function(i,n){t(i,n,e)}};let eg=class extends eh{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(e,t,i)=>t?this.doOpenEditor(t,e):null))}_checkContextKey(){let e=!1;for(let t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){let i=this.findModel(e,t.resource);if(!i){if(t.resource){let i=t.resource.scheme;if(i===es.lg.http||i===es.lg.https)return(0,er.V3)(t.resource.toString()),e}return null}let n=t.options?t.options.selection:null;if(n){if("number"==typeof n.endLineNumber&&"number"==typeof n.endColumn)e.setSelection(n),e.revealRangeInCenter(n,1);else{let t={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}}return e}findModel(e,t){let i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};eg=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([standaloneCodeEditorService_param(0,ec.i6),standaloneCodeEditorService_param(1,ed.XE)],eg),(0,eu.z)(A.$,eg,0);var ep=i(34794),em=i(27989);let ef=(0,em.yh)("layoutService");var standaloneLayoutService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},standaloneLayoutService_param=function(e,t){return function(i,n){t(i,n,e)}};let e_=class{get mainContainer(){var e,t;return null!==(t=null===(e=(0,ep.Xh)(this._codeEditorService.listCodeEditors()))||void 0===e?void 0:e.getContainerDomNode())&&void 0!==t?t:N.Ex.document.body}get activeContainer(){var e,t;let i=null!==(e=this._codeEditorService.getFocusedCodeEditor())&&void 0!==e?e:this._codeEditorService.getActiveCodeEditor();return null!==(t=null==i?void 0:i.getContainerDomNode())&&void 0!==t?t:this.mainContainer}get mainContainerDimension(){return er.D6(this.mainContainer)}get activeContainerDimension(){return er.D6(this.activeContainer)}get containers(){return(0,ep.kX)(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}focus(){var e;null===(e=this._codeEditorService.getFocusedCodeEditor())||void 0===e||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=ea.ju.None,this.onDidLayoutActiveContainer=ea.ju.None,this.onDidLayoutContainer=ea.ju.None,this.onDidChangeActiveContainer=ea.ju.None,this.onDidAddContainer=ea.ju.None,this.whenActiveContainerStylesLoaded=Promise.resolve(),this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};e_=standaloneLayoutService_decorate([standaloneLayoutService_param(0,A.$)],e_);let ev=class extends e_{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};ev=standaloneLayoutService_decorate([standaloneLayoutService_param(1,A.$)],ev),(0,eu.z)(ef,e_,1);var eC=i(17861),eb=i(37466),eS=i(46157),ey=i(96049),ew=i(1480),eL=i(30264),undoRedoService_param=function(e,t){return function(i,n){t(i,n,e)}};function getResourceLabel(e){return e.scheme===es.lg.file?e.fsPath:e.path}let ek=0;let ResourceStackElement=class ResourceStackElement{constructor(e,t,i,n,o,r,s){this.id=++ek,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=o,this.sourceId=r,this.sourceOrder=s,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}};let ResourceReasonPair=class ResourceReasonPair{constructor(e,t){this.resourceLabel=e,this.reason=t}};let RemovedResources=class RemovedResources{constructor(){this.elements=new Map}createMessage(){let e=[],t=[];for(let[,i]of this.elements){let n=0===i.reason?e:t;n.push(i.resourceLabel)}let i=[];return e.length>0&&i.push(eS.NC({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(eS.NC({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}};let WorkspaceStackElement=class WorkspaceStackElement{constructor(e,t,i,n,o,r,s){this.id=++ek,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=o,this.sourceId=r,this.sourceOrder=s,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"==typeof this.actual.split}removeResource(e,t,i){this.removedResources||(this.removedResources=new RemovedResources),this.removedResources.has(t)||this.removedResources.set(t,new ResourceReasonPair(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new RemovedResources),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new ResourceReasonPair(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}};let ResourceEditStack=class ResourceEditStack{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let e of this._past)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);for(let e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){1===e.type?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(let i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(let i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(let e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){let t=[];for(let e=0,i=this._past.length;e<i;e++)t.push(this._past[e].id);for(let e=this._future.length-1;e>=0;e--)t.push(this._future[e].id);return new eL.YO(e,t)}restoreSnapshot(e){let t=e.elements.length,i=!0,n=0,o=-1;for(let r=0,s=this._past.length;r<s;r++,n++){let s=this._past[r];i&&(n>=t||s.id!==e.elements[n])&&(i=!1,o=0),i||1!==s.type||s.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let o=this._future.length-1;o>=0;o--,n++){let s=this._future[o];i&&(n>=t||s.id!==e.elements[n])&&(i=!1,r=o),i||1!==s.type||s.removeResource(this.resourceLabel,this.strResource,0)}-1!==o&&(this._past=this._past.slice(0,o)),-1!==r&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){let e=[],t=[];for(let t of this._past)e.push(t.actual);for(let e of this._future)t.push(e.actual);return{past:e,future:t}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}};let EditStackSnapshot=class EditStackSnapshot{constructor(e){this.editStacks=e,this._versionIds=[];for(let e=0,t=this.editStacks.length;e<t;e++)this._versionIds[e]=this.editStacks[e].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}};let eD=new ResourceEditStack("","");eD.locked=!0;let ex=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(let t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(let e of this._editStacks)t.push(e[1].toString());console.log(t.join("\n"))}pushElement(e,t=eL.Xt.None,i=eL.gJ.None){if(0===e.type){let n=getResourceLabel(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new ResourceStackElement(e,n,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{let n=new Set,o=[],r=[];for(let t of e.resources){let e=getResourceLabel(t),i=this.getUriComparisonKey(t);n.has(i)||(n.add(i),o.push(e),r.push(i))}1===o.length?this._pushElement(new ResourceStackElement(e,o[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new WorkspaceStackElement(e,o,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){let i;let n=e.resourceLabels[t],o=e.strResources[t];this._editStacks.has(o)?i=this._editStacks.get(o):(i=new ResourceEditStack(n,o),this._editStacks.set(o,i)),i.pushElement(e)}}getLastElement(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);if(e.hasFutureElements())return null;let i=e.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){let i=e.actual.split(),n=new Map;for(let e of i){let t=getResourceLabel(e.resource),i=this.getUriComparisonKey(e.resource),o=new ResourceStackElement(e,t,i,0,0,0,0);n.set(o.strResource,o)}for(let i of e.strResources){if(t&&t.has(i))continue;let o=this._editStacks.get(i);o.splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){let i=e.actual.split(),n=new Map;for(let e of i){let t=getResourceLabel(e.resource),i=this.getUriComparisonKey(e.resource),o=new ResourceStackElement(e,t,i,0,0,0,0);n.set(o.strResource,o)}for(let i of e.strResources){if(t&&t.has(i))continue;let o=this._editStacks.get(i);o.splitFutureWorkspaceElement(e,n)}}removeElements(e){let t="string"==typeof e?e:this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);e.dispose(),this._editStacks.delete(t)}}setElementsValidFlag(e,t,i){let n=this.getUriComparisonKey(e);if(this._editStacks.has(n)){let e=this._editStacks.get(n);e.setElementsValidFlag(t,i)}}createSnapshot(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let i=this._editStacks.get(t);return i.createSnapshot(e)}return new eL.YO(e,[])}restoreSnapshot(e){let t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){let i=this._editStacks.get(t);i.restoreSnapshot(e),i.hasPastElements()||i.hasFutureElements()||(i.dispose(),this._editStacks.delete(t))}}getElements(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);return e.getElements()}return{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let r=o.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=n)}return[t,i]}canUndo(e){if(e instanceof eL.gJ){let[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);return e.hasPastElements()}return!1}_onError(e,t){for(let i of((0,eC.dL)(e),t.strResources))this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(let t of e.editStacks)if(t.locked)throw Error("Cannot acquire edit stack lock");for(let t of e.editStacks)t.locked=!0;return()=>{for(let t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,o){let r;let s=this._acquireLocks(i);try{r=t()}catch(t){return s(),n.dispose(),this._onError(t,e)}return r?r.then(()=>(s(),n.dispose(),o()),t=>(s(),n.dispose(),this._onError(t,e))):(s(),n.dispose(),o())}async _invokeWorkspacePrepare(e){if(void 0===e.actual.prepareUndoRedo)return E.JT.None;let t=e.actual.prepareUndoRedo();return void 0===t?E.JT.None:t}_invokeResourcePrepare(e,t){if(1!==e.actual.type||void 0===e.actual.prepareUndoRedo)return t(E.JT.None);let i=e.actual.prepareUndoRedo();return i?(0,E.Wf)(i)?t(i):i.then(e=>t(e)):t(E.JT.None)}_getAffectedEditStacks(e){let t=[];for(let i of e.strResources)t.push(this._editStacks.get(i)||eD);return new EditStackSnapshot(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new WorkspaceVerificationError(this._undo(e,0,!0));for(let e of t.strResources)this.removeElements(e);return this._notificationService.warn(n),new WorkspaceVerificationError}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,eS.NC({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,eS.NC({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));let o=[];for(let e of i.editStacks)e.getClosestPastElement()!==t&&o.push(e.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,eS.NC({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));let r=[];for(let e of i.editStacks)e.locked&&r.push(e.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,eS.NC({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,eS.NC({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){let n=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,n,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(let[,t]of this._editStacks){let i=t.getClosestPastElement();if(i){if(i===e){let i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){let o;if(t.canSplit()&&!this._isPartOfUndoGroup(t)){var r;let o;(r=o||(o={}))[r.All=0]="All",r[r.This=1]="This",r[r.Cancel=2]="Cancel";let{result:s}=await this._dialogService.prompt({type:eb.Z.Info,message:eS.NC("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:eS.NC({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>o.All},{label:eS.NC({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>o.This}],cancelButton:{run:()=>o.Cancel}});if(s===o.Cancel)return;if(s===o.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);let l=this._checkWorkspaceUndo(e,t,i,!1);if(l)return l.returnValue;n=!0}try{o=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let s=this._checkWorkspaceUndo(e,t,i,!0);if(s)return o.dispose(),s.returnValue;for(let e of i.editStacks)e.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,o,()=>this._continueUndoInGroup(t.groupId,n))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){let e=eS.NC({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new EditStackSnapshot([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let r=o.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;let[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof eL.gJ){let[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return"string"==typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;let n=this._editStacks.get(e),o=n.getClosestPastElement();if(!o)return;if(o.groupId){let[e,n]=this._findClosestUndoElementInGroup(o.groupId);if(o!==e&&n)return this._undo(n,t,i)}let r=o.sourceId!==t||o.confirmBeforeUndo;return r&&!i?this._confirmAndContinueUndo(e,t,o):1===o.type?this._workspaceUndo(e,o,i):this._resourceUndo(n,o,i)}async _confirmAndContinueUndo(e,t,i){let n=await this._dialogService.confirm({message:eS.NC("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:eS.NC({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:eS.NC("confirmDifferentSource.no","No")});if(n.confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let r=o.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=n)}return[t,i]}canRedo(e){if(e instanceof eL.gJ){let[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);return e.hasFutureElements()}return!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new WorkspaceVerificationError(this._redo(e));for(let e of t.strResources)this.removeElements(e);return this._notificationService.warn(n),new WorkspaceVerificationError}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,eS.NC({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,eS.NC({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));let o=[];for(let e of i.editStacks)e.getClosestFutureElement()!==t&&o.push(e.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,eS.NC({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));let r=[];for(let e of i.editStacks)e.locked&&r.push(e.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,eS.NC({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,eS.NC({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){let i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let o=this._checkWorkspaceRedo(e,t,i,!0);if(o)return n.dispose(),o.returnValue;for(let e of i.editStacks)e.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){let e=eS.NC({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new EditStackSnapshot([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let r=o.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;let[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof eL.gJ){let[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return"string"==typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;let t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){let[e,t]=this._findClosestRedoElementInGroup(i.groupId);if(i!==e&&t)return this._redo(t)}return 1===i.type?this._workspaceRedo(e,i):this._resourceRedo(t,i)}}};ex=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([undoRedoService_param(0,ey.S),undoRedoService_param(1,ew.lT)],ex);let WorkspaceVerificationError=class WorkspaceVerificationError{constructor(e){this.returnValue=e}};(0,eu.z)(eL.tJ,ex,1),i(26438);var eN=i(96927),eE=i(19442),eI=i(37506),semanticTokensStylingService_param=function(e,t){return function(i,n){t(i,n,e)}};let eT=class extends E.JT{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new eE.$(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};eT=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([semanticTokensStylingService_param(0,ed.XE),semanticTokensStylingService_param(1,eN.VZ),semanticTokensStylingService_param(2,H.O)],eT),(0,eu.z)(eI.s,eT,1);var eM=i(51554);function isExclusive(e){return"string"!=typeof e&&(Array.isArray(e)?e.every(isExclusive):!!e.exclusive)}let MatchCandidate=class MatchCandidate{constructor(e,t,i,n){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&(null===(t=this.notebookUri)||void 0===t?void 0:t.toString())===(null===(i=e.notebookUri)||void 0===i?void 0:i.toString())}};let LanguageFeatureRegistry=class LanguageFeatureRegistry{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new ea.Q5,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,E.OF)(()=>{if(i){let e=this._entries.indexOf(i);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);let t=[];for(let e of this._entries)e._score>0&&t.push(e.provider);return t}ordered(e){let t=[];return this._orderedForEach(e,e=>t.push(e.provider)),t}orderedGroups(e){let t,i;let n=[];return this._orderedForEach(e,e=>{t&&i===e._score?t.push(e.provider):(i=e._score,t=[e.provider],n.push(t))}),n}_orderedForEach(e,t){for(let i of(this._updateScores(e),this._entries))i._score>0&&t(i)}_updateScores(e){var t,i;let n=null===(t=this._notebookInfoResolver)||void 0===t?void 0:t.call(this,e.uri),o=n?new MatchCandidate(e.uri,e.getLanguageId(),n.uri,n.type):new MatchCandidate(e.uri,e.getLanguageId(),void 0,void 0);if(null===(i=this._lastCandidate)||void 0===i||!i.equals(o)){for(let t of(this._lastCandidate=o,this._entries))if(t._score=(0,eM.G)(t.selector,o.uri,o.languageId,(0,j.pt)(e),o.notebookUri,o.notebookType),isExclusive(t.selector)&&t._score>0){for(let e of this._entries)e._score=0;t._score=1e3;break}this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:isBuiltinSelector(e.selector)&&!isBuiltinSelector(t.selector)?1:!isBuiltinSelector(e.selector)&&isBuiltinSelector(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}};function isBuiltinSelector(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(isBuiltinSelector):!!e.isBuiltin)}var eR=i(67379);let LanguageFeaturesService=class LanguageFeaturesService{constructor(){this.referenceProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.renameProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.newSymbolNamesProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeActionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.definitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.typeDefinitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.declarationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.implementationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSymbolProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlayHintsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.colorProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeLensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.onTypeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.signatureHelpProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.hoverProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.multiDocumentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.selectionRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.foldingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineCompletionsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.completionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkedEditingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentOnDropEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentPasteEditProvider=new LanguageFeatureRegistry(this._score.bind(this))}_score(e){var t;return null===(t=this._notebookTypeResolver)||void 0===t?void 0:t.call(this,e)}};(0,eu.z)(eR.p,LanguageFeaturesService,1);var eA=i(45815),hover_param=function(e,t){return function(i,n){t(i,n,e)}};let eP=(0,em.yh)("hoverService"),eO=class extends E.JT{get delay(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit?0:this._delay}constructor(e,t,i={},n,o){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=o,this.lastHoverHideTime=Number.MAX_VALUE,this.timeLimit=200,this.hoverDisposables=this._register(new E.SL),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){let i="function"==typeof this.overrideOptions?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();let n=e.target instanceof HTMLElement?[e.target]:e.target.targetElements;for(let e of n)this.hoverDisposables.add((0,er.mu)(e,"keydown",e=>{e.equals(9)&&this.hoverService.hideHover()}));return this.hoverService.showHover({...e,persistence:{hideOnHover:!0},...i},t)}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};eO=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([hover_param(3,X.Ui),hover_param(4,eP)],eO);var eF=i(64252);i(81150);var eB=i(18333),eW=i(95678),eV=i(21413),eH=i(60048),ez=i(7927),eU=i(72914),eK=i(88059),ej=i(39938),hoverWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let eq=er.$,e$=class extends eV.${get _targetWindow(){return er.Jj(this._target.targetElements[0])}get _targetDocumentElement(){return er.Jj(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return 2===this._hoverPosition?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,o,r){var s,l,d,c,u,g,m,f;let _;super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=o,this._accessibilityService=r,this._messageListeners=new E.SL,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new ea.Q5),this._onRequestLayout=this._register(new ea.Q5),this._linkHandler=e.linkHandler||(t=>(0,ez.N)(this._openerService,t,(0,eU.Fr)(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new ElementHoverTarget(e.target),this._hoverPointer=(null===(s=e.appearance)||void 0===s?void 0:s.showPointer)?eq("div.workbench-hover-pointer"):void 0,this._hover=this._register(new eW.c8),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(null===(l=e.appearance)||void 0===l?void 0:l.compact)&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(null===(d=e.appearance)||void 0===d?void 0:d.skipFadeInAnimation)&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(null===(c=e.position)||void 0===c?void 0:c.forcePosition)&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=null!==(g=null===(u=e.position)||void 0===u?void 0:u.hoverPosition)&&void 0!==g?g:3,this.onmousedown(this._hover.containerDomNode,e=>e.stopPropagation()),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(9)&&this.dispose()}),this._register(er.nm(this._targetWindow,"blur",()=>this.dispose()));let v=eq("div.hover-row.markdown-hover"),C=eq("div.hover-contents");if("string"==typeof e.content)C.textContent=e.content,C.style.whiteSpace="pre-wrap";else if(e.content instanceof HTMLElement)C.appendChild(e.content),C.classList.add("html-hover-contents");else{let t=e.content,i=this._instantiationService.createInstance(ez.$,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||D.hL.fontFamily}),{element:n}=i.render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{C.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});C.appendChild(n)}if(v.appendChild(C),this._hover.contentsDomNode.appendChild(v),e.actions&&e.actions.length>0){let t=eq("div.hover-row.status-bar"),i=eq("div.actions");e.actions.forEach(e=>{let t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;eW.Sr.render(i,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},n)}),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}if(this._hoverContainer=eq("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),(_=(!e.actions||!(e.actions.length>0))&&((null===(m=e.persistence)||void 0===m?void 0:m.hideOnHover)===void 0?"string"==typeof e.content||(0,eU.Fr)(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover))&&(null===(f=e.appearance)||void 0===f?void 0:f.showHoverHint)){let e=eq("div.hover-row.status-bar"),t=eq("div.info");t.textContent=(0,eS.NC)("hoverhint","Hold {0} key to mouse over",eK.dz?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}let b=[...this._target.targetElements];_||b.push(this._hoverContainer);let S=this._register(new CompositeMouseTracker(b));if(this._register(S.onMouseOut(()=>{this._isLocked||this.dispose()})),_){let e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new CompositeMouseTracker(e)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=S}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;let e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){let i=er.Ce(this._hoverContainer,eq("div")),n=er.R3(this._hoverContainer,eq("div"));i.tabIndex=0,n.tabIndex=0,this._register(er.nm(n,"focus",t=>{e.focus(),t.preventDefault()})),this._register(er.nm(i,"focus",e=>{t.focus(),e.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){let i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE&&"number"==typeof i.tabIndex&&i.tabIndex>=0)return i;let n=this.findLastFocusableChild(i);if(n)return n}}render(e){var t;e.appendChild(this._hoverContainer);let i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement),n=i&&(0,eW.uX)(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===t?void 0:t.getAriaLabel());n&&(0,ei.i7)(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";let getZoomAccountedBoundingClientRect=e=>{let t=er.I8(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}},e=this._target.targetElements.map(e=>getZoomAccountedBoundingClientRect(e)),t=Math.min(...e.map(e=>e.top)),i=Math.max(...e.map(e=>e.right)),n=Math.max(...e.map(e=>e.bottom)),o=Math.min(...e.map(e=>e.left)),r=i-o,s=n-t,l={top:t,right:i,bottom:n,left:o,width:r,height:s,center:{x:o+r/2,y:t+s/2}};if(this.adjustHorizontalHoverPosition(l),this.adjustVerticalHoverPosition(l),this.adjustHoverMaxHeight(l),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:l.left+=3,l.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:l.left-=3,l.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:l.top+=3,l.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:l.top-=3,l.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}l.center.x=l.left+r/2,l.center.y=l.top+s/2}this.computeXCordinate(l),this.computeYCordinate(l),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(l)),this._hover.onContentsChanged()}computeXCordinate(e){let t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0===this._target.x){if(this._forcePosition){let t=(this._hoverPointer?3:0)+2;1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-t}px`:0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth=`${e.left-t}px`);return}if(1===this._hoverPosition){let t=this._targetDocumentElement.clientWidth-e.right;if(t<this._hover.containerDomNode.clientWidth){let t=e.left;t>=this._hover.containerDomNode.clientWidth?this._hoverPosition=0:this._hoverPosition=2}}else if(0===this._hoverPosition){let t=e.left;if(t<this._hover.containerDomNode.clientWidth){let t=this._targetDocumentElement.clientWidth-e.right;t>=this._hover.containerDomNode.clientWidth?this._hoverPosition=1:this._hoverPosition=2}e.left-this._hover.containerDomNode.clientWidth<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1)}}}adjustVerticalHoverPosition(e){void 0===this._target.y&&!this._forcePosition&&(3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight>this._targetWindow.innerHeight&&(this._hoverPosition=3))}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){let i=(this._hoverPointer?3:0)+2;3===this._hoverPosition?t=Math.min(t,e.top-i):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){let e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");let t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");let t=this._hover.containerDomNode.clientWidth,i=Math.round(t/2)-3,n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};e$=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([hoverWidget_param(1,eB.d),hoverWidget_param(2,X.Ui),hoverWidget_param(3,eH.v),hoverWidget_param(4,em.TG),hoverWidget_param(5,ej.F)],e$);let CompositeMouseTracker=class CompositeMouseTracker extends eV.${get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new ea.Q5),this._elements.forEach(e=>this.onmouseover(e,()=>this._onTargetMouseOver(e))),this._elements.forEach(e=>this.onmouseleave(e,()=>this._onTargetMouseLeave(e)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=er.Jj(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(er.Jj(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}};let ElementHoverTarget=class ElementHoverTarget{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}};var eG=i(58731),hoverService_param=function(e,t){return function(i,n){t(i,n,e)}};let eQ=class{constructor(e,t,i,n,o,r){this._instantiationService=e,this._contextViewService=t,this._keybindingService=n,this._layoutService=o,this._accessibilityService=r,i.onDidShowContextMenu(()=>this.hideHover())}showHover(e,t,i){var n,o,r,s;if(getHoverOptionsIdentity(this._currentHoverOptions)===getHoverOptionsIdentity(e)||this._currentHover&&(null===(o=null===(n=this._currentHoverOptions)||void 0===n?void 0:n.persistence)||void 0===o?void 0:o.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;let l=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),d=(0,er.vY)();i||(l&&d?this._lastFocusedElementBeforeOpen=d:this._lastFocusedElementBeforeOpen=void 0);let c=new E.SL,u=this._instantiationService.createInstance(e$,e);if((null===(r=e.persistence)||void 0===r?void 0:r.sticky)&&(u.isLocked=!0),u.onDispose(()=>{var t,i;let n=(null===(t=this._currentHover)||void 0===t?void 0:t.domNode)&&(0,er.b5)(this._currentHover.domNode);n&&(null===(i=this._lastFocusedElementBeforeOpen)||void 0===i||i.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),c.dispose()}),!e.container){let t=e.target instanceof HTMLElement?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer((0,er.Jj)(t))}let g=this._contextViewService;if(g.showContextView(new HoverContextViewDelegate(u,t),e.container),u.onRequestLayout(()=>g.layout()),null===(s=e.persistence)||void 0===s?void 0:s.sticky)c.add((0,er.nm)((0,er.Jj)(e.container).document,er.tw.MOUSE_DOWN,e=>{(0,er.jg)(e.target,u.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(let t of e.target.targetElements)c.add((0,er.nm)(t,er.tw.CLICK,()=>this.hideHover()));else c.add((0,er.nm)(e.target,er.tw.CLICK,()=>this.hideHover()));let t=(0,er.vY)();if(t){let i=(0,er.Jj)(t).document;c.add((0,er.nm)(t,er.tw.KEY_DOWN,t=>{var i;return this._keyDown(t,u,!!(null===(i=e.persistence)||void 0===i?void 0:i.hideOnKeyDown))})),c.add((0,er.nm)(i,er.tw.KEY_DOWN,t=>{var i;return this._keyDown(t,u,!!(null===(i=e.persistence)||void 0===i?void 0:i.hideOnKeyDown))})),c.add((0,er.nm)(t,er.tw.KEY_UP,e=>this._keyUp(e,u))),c.add((0,er.nm)(i,er.tw.KEY_UP,e=>this._keyUp(e,u)))}}if("IntersectionObserver"in N.Ex){let t=new IntersectionObserver(e=>this._intersectionChange(e,u),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),c.add((0,E.OF)(()=>t.disconnect()))}return this._currentHover=u,u}hideHover(){var e;(null===(e=this._currentHover)||void 0===e||!e.isLocked)&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewService.hideContextView()}_intersectionChange(e,t){let i=e[e.length-1];i.isIntersecting||t.dispose()}_keyDown(e,t,i){var n,o;if("Alt"===e.key){t.isLocked=!0;return}let r=new eG.y(e),s=this._keybindingService.resolveKeyboardEvent(r);!s.getSingleModifierDispatchChords().some(e=>!!e)&&0===this._keybindingService.softDispatch(r,r.target).kind&&(!i||(null===(n=this._currentHoverOptions)||void 0===n?void 0:n.trapFocus)&&"Tab"===e.key||(this.hideHover(),null===(o=this._lastFocusedElementBeforeOpen)||void 0===o||o.focus()))}_keyUp(e,t){var i;"Alt"!==e.key||(t.isLocked=!1,t.isMouseIn||(this.hideHover(),null===(i=this._lastFocusedElementBeforeOpen)||void 0===i||i.focus()))}};function getHoverOptionsIdentity(e){var t;if(void 0!==e)return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:e}eQ=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([hoverService_param(0,em.TG),hoverService_param(1,eF.u),hoverService_param(2,eF.i),hoverService_param(3,eB.d),hoverService_param(4,ef),hoverService_param(5,ej.F)],eQ);let HoverContextViewDelegate=class HoverContextViewDelegate{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}};(0,eu.z)(eP,eQ,1),(0,ed.Ic)((e,t)=>{let i=e.getColor(eA.CNo);i&&(t.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`))});var eZ=i(32155),eY=i(65496),eJ=i(76058),eX=i(78659),e0=i(11953),e1=i(30822),e2=i(72403),e5=i(39478),e4=i(56143),e3=i(30619),e6=i(16877),e7=i(61529),e9=i(76924);function freeze(e){return Object.isFrozen(e)?e:P._A(e)}let ConfigurationModel=class ConfigurationModel{constructor(e={},t=[],i=[],n){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration){if(null===(e=this.raw)||void 0===e?void 0:e.length){let e=this.raw.map(e=>{if(e instanceof ConfigurationModel)return e;let t=new ConfigurationModelParser("");return t.parseRaw(e),t.configurationModel});this._rawConfiguration=e.reduce((e,t)=>t===e?t:e.merge(t),e[0])}else this._rawConfiguration=this}return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?(0,X.Mt)(this.contents,e):this.contents}inspect(e,t){let i=this;return{get value(){return freeze(i.rawConfiguration.getValue(e))},get override(){return t?freeze(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return freeze(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){let t=[];for(let{contents:n,identifiers:o,keys:r}of i.rawConfiguration.overrides){let i=new ConfigurationModel(n,r).getValue(e);void 0!==i&&t.push({identifiers:o,value:i})}return t.length?freeze(t):void 0}}}getOverrideValue(e,t){let i=this.getContentsForOverrideIdentifer(t);return i?e?(0,X.Mt)(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,i;let n=P.I8(this.contents),o=P.I8(this.overrides),r=[...this.keys],s=(null===(t=this.raw)||void 0===t?void 0:t.length)?[...this.raw]:[this];for(let t of e)if(s.push(...(null===(i=t.raw)||void 0===i?void 0:i.length)?t.raw:[t]),!t.isEmpty()){for(let e of(this.mergeContents(n,t.contents),t.overrides)){let[t]=o.filter(t=>ep.fS(t.identifiers,e.identifiers));t?(this.mergeContents(t.contents,e.contents),t.keys.push(...e.keys),t.keys=ep.EB(t.keys)):o.push(P.I8(e))}for(let e of t.keys)-1===r.indexOf(e)&&r.push(e)}return new ConfigurationModel(n,r,o,s.every(e=>e instanceof ConfigurationModel)?void 0:s)}createOverrideConfigurationModel(e){let t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;let i={};for(let e of ep.EB([...Object.keys(this.contents),...Object.keys(t)])){let n=this.contents[e],o=t[e];o&&("object"==typeof n&&"object"==typeof o?(n=P.I8(n),this.mergeContents(n,o)):n=o),i[e]=n}return new ConfigurationModel(i,this.keys,this.overrides)}mergeContents(e,t){for(let i of Object.keys(t)){if(i in e&&e6.Kn(e[i])&&e6.Kn(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=P.I8(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null,mergeContents=e=>{e&&(i?this.mergeContents(i,e):i=P.I8(e))};for(let i of this.overrides)1===i.identifiers.length&&i.identifiers[0]===e?t=i.contents:i.identifiers.includes(e)&&mergeContents(i.contents);return mergeContents(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){let t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),(0,X.xL)(this.contents,e),e7.eU.test(e)&&this.overrides.splice(this.overrides.findIndex(t=>ep.fS(t.identifiers,(0,e7.ny)(e))),1))}updateValue(e,t,i){(0,X.KV)(this.contents,e,t,e=>console.error(e)),(i=i||-1===this.keys.indexOf(e))&&this.keys.push(e),e7.eU.test(e)&&this.overrides.push({identifiers:(0,e7.ny)(e),keys:Object.keys(this.contents[e]),contents:(0,X.Od)(this.contents[e],e=>console.error(e))})}};let ConfigurationModelParser=class ConfigurationModelParser{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new ConfigurationModel}parseRaw(e,t){this._raw=e;let{contents:i,keys:n,overrides:o,restricted:r,hasExcludedProperties:s}=this.doParseRaw(e,t);this._configurationModel=new ConfigurationModel(i,n,o,s?[e]:void 0),this._restrictedConfigurations=r||[]}doParseRaw(e,t){let i=e9.B.as(e7.IP.Configuration).getConfigurationProperties(),n=this.filter(e,i,!0,t);e=n.raw;let o=(0,X.Od)(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`)),r=Object.keys(e),s=this.toOverrides(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`));return{contents:o,keys:r,overrides:s,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){var o,r,s;let l=!1;if(!(null==n?void 0:n.scopes)&&!(null==n?void 0:n.skipRestricted)&&!(null===(o=null==n?void 0:n.exclude)||void 0===o?void 0:o.length))return{raw:e,restricted:[],hasExcludedProperties:l};let d={},c=[];for(let o in e)if(e7.eU.test(o)&&i){let i=this.filter(e[o],t,!1,n);d[o]=i.raw,l=l||i.hasExcludedProperties,c.push(...i.restricted)}else{let i=t[o],u=i?void 0!==i.scope?i.scope:3:void 0;(null==i?void 0:i.restricted)&&c.push(o),!(null===(r=n.exclude)||void 0===r?void 0:r.includes(o))&&((null===(s=n.include)||void 0===s?void 0:s.includes(o))||(void 0===u||void 0===n.scopes||n.scopes.includes(u))&&!(n.skipRestricted&&(null==i?void 0:i.restricted)))?d[o]=e[o]:l=!0}return{raw:d,restricted:c,hasExcludedProperties:l}}toOverrides(e,t){let i=[];for(let n of Object.keys(e))if(e7.eU.test(n)){let o={};for(let t in e[n])o[t]=e[n][t];i.push({identifiers:(0,e7.ny)(n),keys:Object.keys(o),contents:(0,X.Od)(o,t)})}return i}};let ConfigurationInspectValue=class ConfigurationInspectValue{constructor(e,t,i,n,o,r,s,l,d,c,u,g,m){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=o,this.policyConfiguration=r,this.applicationConfiguration=s,this.userConfiguration=l,this.localUserConfiguration=d,this.remoteUserConfiguration=c,this.workspaceConfiguration=u,this.folderConfigurationModel=g,this.memoryConfigurationModel=m}toInspectValue(e){return(null==e?void 0:e.value)!==void 0||(null==e?void 0:e.override)!==void 0||(null==e?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}};let Configuration=class Configuration{constructor(e,t,i,n,o=new ConfigurationModel,r=new ConfigurationModel,s=new e3.Y9,l=new ConfigurationModel,d=new e3.Y9){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=s,this._memoryConfiguration=l,this._memoryConfigurationByResource=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new e3.Y9,this._userConfiguration=null}getValue(e,t,i){let n=this.getConsolidatedConfigurationModel(e,t,i);return n.getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource))||(n=new ConfigurationModel,this._memoryConfigurationByResource.set(i.resource,n)):n=this._memoryConfiguration,void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){let n=this.getConsolidatedConfigurationModel(e,t,i),o=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,s=new Set;for(let t of n.overrides)for(let i of t.identifiers)void 0!==n.getOverrideValue(e,i)&&s.add(i);return new ConfigurationInspectValue(e,t,n.getValue(e),s.size?[...s]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,o||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),this._policyConfiguration.isEmpty()||void 0===this._policyConfiguration.getValue(e)||(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){let n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);let o=this._memoryConfigurationByResource.get(e);o&&(i=i.merge(o))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){let i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){let i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{let{contents:i,overrides:n,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:o}]),e},[])}}static parse(e){let t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.policy),n=this.parseConfigurationModel(e.application),o=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),s=e.folders.reduce((e,t)=>(e.set(T.o.revive(t[0]),this.parseConfigurationModel(t[1])),e),new e3.Y9);return new Configuration(t,i,n,o,new ConfigurationModel,r,s,new ConfigurationModel,new e3.Y9)}static parseConfigurationModel(e){return new ConfigurationModel(e.contents,e.keys,e.overrides)}};let ConfigurationChangeEvent=class ConfigurationChangeEvent{constructor(e,t,i,n){for(let o of(this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0,e.keys))this.affectedKeys.add(o);for(let[,t]of e.overrides)for(let e of t)this.affectedKeys.add(e);for(let e of(this._affectsConfigStr=this._marker,this.affectedKeys))this._affectsConfigStr+=e+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Configuration.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;let n=this._marker+e,o=this._affectsConfigStr.indexOf(n);if(o<0)return!1;let r=o+n.length;if(r>=this._affectsConfigStr.length)return!1;let s=this._affectsConfigStr.charCodeAt(r);if(s!==this._markerCode1&&s!==this._markerCode2)return!1;if(t){let n=this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(i=this.previous)||void 0===i?void 0:i.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!P.fS(n,o)}return!0}};var e8=i(66614),te=i(14296);let tt={kind:0},ti={kind:1};function KbFound(e,t,i){return{kind:2,commandId:e,commandArgs:t,isBubble:i}}let KeybindingResolver=class KeybindingResolver{constructor(e,t,i){var n;for(let t of(this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map,e)){let e=t.command;e&&"-"!==e.charAt(0)&&this._defaultBoundCommands.set(e,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=KeybindingResolver.handleRemovals([].concat(e).concat(t));for(let e=0,t=this._keybindings.length;e<t;e++){let t=this._keybindings[e];if(0===t.chords.length)continue;let i=null===(n=t.when)||void 0===n?void 0:n.substituteConstants();i&&0===i.type||this._addKeyPress(t.chords[0],t)}}static _isTargetedForRemoval(e,t,i){if(t){for(let i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1}return!!(!i||1===i.type||e.when&&(0,ec.Fb)(i,e.when))}static handleRemovals(e){let t=new Map;for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.command&&"-"===n.command.charAt(0)){let e=n.command.substring(1);t.has(e)?t.get(e).push(n):t.set(e,[n])}}if(0===t.size)return e;let i=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];if(!o.command||0===o.command.length){i.push(o);continue}if("-"===o.command.charAt(0))continue;let r=t.get(o.command);if(!r||!o.isDefault){i.push(o);continue}let s=!1;for(let e of r){let t=e.when;if(this._isTargetedForRemoval(o,e.chords,t)){s=!0;break}}if(!s){i.push(o);continue}}return i}_addKeyPress(e,t){let i=this._map.get(e);if(void 0===i){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let e=i.length-1;e>=0;e--){let n=i[e];if(n.command===t.command)continue;let o=!0;for(let e=1;e<n.chords.length&&e<t.chords.length;e++)if(n.chords[e]!==t.chords[e]){o=!1;break}o&&KeybindingResolver.whenIsEntirelyIncluded(n.when,t.when)&&this._removeFromLookupMap(n)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(void 0!==t){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||1===t.type||!!e&&1!==e.type&&(0,ec.K8)(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){let i=this._lookupMap.get(e);if(void 0===i||0===i.length)return null;if(1===i.length)return i[0];for(let e=i.length-1;e>=0;e--){let n=i[e];if(t.contextMatchesRules(n.when))return n}return i[i.length-1]}resolve(e,t,i){let n=[...t,i];this._log(`| Resolving ${n}`);let o=this._map.get(n[0]);if(void 0===o)return this._log("\\ No keybinding entries."),tt;let r=null;if(n.length<2)r=o;else{r=[];for(let e=0,t=o.length;e<t;e++){let t=o[e];if(n.length>t.chords.length)continue;let i=!0;for(let e=1;e<n.length;e++)if(t.chords[e]!==n[e]){i=!1;break}i&&r.push(t)}}let s=this._findCommand(e,r);return s?n.length<s.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${s.chords.length-n.length} more chord(s), when: ${printWhenExplanation(s.when)}, source: ${printSourceExplanation(s)}.`),ti):(this._log(`\\ From ${r.length} keybinding entries, matched ${s.command}, when: ${printWhenExplanation(s.when)}, source: ${printSourceExplanation(s)}.`),KbFound(s.command,s.commandArgs,s.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),tt)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){let n=t[i];if(KeybindingResolver._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return!t||t.evaluate(e)}};function printWhenExplanation(e){return e?`${e.serialize()}`:"no when condition"}function printSourceExplanation(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?"built-in":"user"}let tn=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;let AbstractKeybindingService=class AbstractKeybindingService extends E.JT{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ea.ju.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=o,this._onDidUpdateKeybindings=this._register(new ea.Q5),this._currentChords=[],this._currentChordChecker=new e8.zh,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new e8._F,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){let i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");let i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),tt;let[n]=i.getDispatchChords();if(null===n)return this._log("\\ Keyboard event cannot be dispatched"),tt;let o=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:e})=>e);return this._getResolver().resolve(o,r,n)}_scheduleLeaveChordMode(){let e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw(0,eC.L6)("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(eS.NC("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{let e=this._currentChords.map(({label:e})=>e).join(", ");this._currentChordStatusMessage=this._notificationService.status(eS.NC("next.chord","({0}) was pressed. Waiting for next key of chord...",e))}}this._scheduleLeaveChordMode(),te.F.enabled&&te.F.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],te.F.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){let i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,null===this._currentSingleModifier)?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1);let[o]=i.getChords();return this._ignoreSingleModifiers=new KeybindingModifierSet(o),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){var n;let o=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,s=null;if(i){let[t]=e.getSingleModifierDispatchChords();r=t,s=t?[t]:[]}else[r]=e.getDispatchChords(),s=this._currentChords.map(({keypress:e})=>e);if(null===r)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),o;let l=this._contextKeyService.getContext(t),d=e.getLabel(),c=this._getResolver().resolve(l,s,r);switch(c.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",d,"[ No matching keybinding ]"),this.inChordMode){let e=this._currentChords.map(({label:e})=>e).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${e}, ${d}".`),this._notificationService.status(eS.NC("missing.chord","The key combination ({0}, {1}) is not a command.",e,d),{hideAfter:1e4}),this._leaveChordMode(),o=!0}return o;case 1:return this._logService.trace("KeybindingService#dispatch",d,"[ Several keybindings match - more chords needed ]"),o=!0,this._expectAnotherChord(r,d),this._log(1===this._currentChords.length?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),o;case 2:if(this._logService.trace("KeybindingService#dispatch",d,`[ Will dispatch command ${c.commandId} ]`),null===c.commandId||""===c.commandId){if(this.inChordMode){let e=this._currentChords.map(({label:e})=>e).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${e}, ${d}".`),this._notificationService.status(eS.NC("missing.chord","The key combination ({0}, {1}) is not a command.",e,d),{hideAfter:1e4}),this._leaveChordMode(),o=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(o=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{void 0===c.commandArgs?this._commandService.executeCommand(c.commandId).then(void 0,e=>this._notificationService.warn(e)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,e=>this._notificationService.warn(e))}finally{this._currentlyDispatchingCommandId=null}tn.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:null!==(n=e.getUserSettingsLabel())&&void 0!==n?n:void 0})}return o}}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}};let KeybindingModifierSet=class KeybindingModifierSet{constructor(e){this._ctrlKey=!!e&&e.ctrlKey,this._shiftKey=!!e&&e.shiftKey,this._altKey=!!e&&e.altKey,this._metaKey=!!e&&e.metaKey}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};KeybindingModifierSet.EMPTY=new KeybindingModifierSet(null);var to=i(37139);let ResolvedKeybindingItem=class ResolvedKeybindingItem{constructor(e,t,i,n,o,r,s){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?toEmptyArrayIfContainsNull(e.getDispatchChords()):[],e&&0===this.chords.length&&(this.chords=toEmptyArrayIfContainsNull(e.getSingleModifierDispatchChords())),this.bubble=!!t&&94===t.charCodeAt(0),this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=s}};function toEmptyArrayIfContainsNull(e){let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n)return[];t.push(n)}return t}var tr=i(27082),ts=i(61141);let BaseResolvedKeybinding=class BaseResolvedKeybinding extends eZ.f1{constructor(e,t){if(super(),0===t.length)throw(0,eC.b1)("chords");this._os=e,this._chords=t}getLabel(){return ts.xo.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return ts.X4.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:ts.jC.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return ts.r6.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new eZ.aZ(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}};let USLayoutResolvedKeybinding=class USLayoutResolvedKeybinding extends BaseResolvedKeybinding{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return tr.kL.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":tr.kL.toString(e.keyCode)}_getElectronAccelerator(e){return tr.kL.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";let t=tr.kL.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_getChordDispatch(e){return USLayoutResolvedKeybinding.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=tr.kL.toString(e.keyCode)}_getSingleModifierChordDispatch(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(e){let t=tr.Vd[e];if(-1!==t)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:break;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof eZ.$M)return e;let t=this._scanCodeToKeyCode(e.scanCode);return 0===t?null:new eZ.$M(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){let i=toEmptyArrayIfContainsNull(e.chords.map(e=>this._toKeyCodeChord(e)));return i.length>0?[new USLayoutResolvedKeybinding(i,t)]:[]}};var ta=i(15786),tl=i(26248),td=i(85363),th=i(32693),tc=i(27),tu=i(67590),tg=i(17958),tp=i(32488),tm=i(21301);function isAnchor(e){return!!e&&"number"==typeof e.x&&"number"==typeof e.y}function layout(e,t,i){let n=i.mode===f.ALIGN?i.offset:i.offset+i.size,o=i.mode===f.ALIGN?i.offset+i.size:i.offset;return 0===i.position?t<=e-n?n:t<=o?o-t:Math.max(e-t,0):t<=o?o-t:t<=e-n?n:0}i(4565),(r=f||(f={}))[r.AVOID=0]="AVOID",r[r.ALIGN=1]="ALIGN";let ContextView=class ContextView extends E.JT{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=E.JT.None,this.toDisposeOnSetContainer=E.JT.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=er.$(".context-view"),er.Cp(this.view),this.setContainer(e,t),this._register((0,E.OF)(()=>this.setContainer(null,1)))}setContainer(e,t){var i;this.useFixedPosition=1!==t;let n=this.useShadowDOM;if(this.useShadowDOM=3===t,(e!==this.container||n!==this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,null===(i=this.shadowRootHostElement)||void 0===i||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=er.$(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});let e=document.createElement("style");e.textContent=tf,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(er.$("slot"))}else this.container.appendChild(this.view);let t=new E.SL;ContextView.BUBBLE_UP_EVENTS.forEach(e=>{t.add(er.mu(this.container,e,e=>{this.onDOMEvent(e,!1)}))}),ContextView.BUBBLE_DOWN_EVENTS.forEach(e=>{t.add(er.mu(this.container,e,e=>{this.onDOMEvent(e,!0)},!0))}),this.toDisposeOnSetContainer=t}}show(e){var t,i;this.isVisible()&&this.hide(),er.PO(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",er.$Z(this.view),this.toDisposeOnClean=e.render(this.view)||E.JT.None,this.delegate=e,this.doLayout(),null===(i=(t=this.delegate).focus)||void 0===i||i.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(!1===this.delegate.canRelayout&&!(eK.gn&&tp.D.pointerEvents)){this.hide();return}null===(t=null===(e=this.delegate)||void 0===e?void 0:e.layout)||void 0===t||t.call(e),this.doLayout()}}doLayout(){let e,t,i;if(!this.isVisible())return;let n=this.delegate.getAnchor();if(n instanceof HTMLElement){let t=er.i(n),i=er.I8(n);e={top:t.top*i,left:t.left*i,width:t.width*i,height:t.height*i}}else e=isAnchor(n)?{top:n.y,left:n.x,width:n.width||1,height:n.height||2}:{top:n.posy,left:n.posx,width:2,height:2};let o=er.w(this.view),r=er.wn(this.view),s=this.delegate.anchorPosition||0,l=this.delegate.anchorAlignment||0,d=this.delegate.anchorAxisAlignment||0,c=er.WN();if(0===d){let n={offset:e.top-c.pageYOffset,size:e.height,position:0===s?0:1},d={offset:e.left,size:e.width,position:0===l?0:1,mode:f.ALIGN};t=layout(c.innerHeight,r,n)+c.pageYOffset,tm.e.intersects({start:t,end:t+r},{start:n.offset,end:n.offset+n.size})&&(d.mode=f.AVOID),i=layout(c.innerWidth,o,d)}else{let n={offset:e.left,size:e.width,position:0===l?0:1},d={offset:e.top,size:e.height,position:0===s?0:1,mode:f.ALIGN};i=layout(c.innerWidth,o,n),tm.e.intersects({start:i,end:i+o},{start:n.offset,end:n.offset+n.size})&&(d.mode=f.AVOID),t=layout(c.innerHeight,r,d)+c.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===s?"bottom":"top"),this.view.classList.add(0===l?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);let u=er.i(this.container);this.view.style.top=`${t-(this.useFixedPosition?er.i(this.view).top:u.top)}px`,this.view.style.left=`${i-(this.useFixedPosition?er.i(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){let t=this.delegate;this.delegate=null,(null==t?void 0:t.onHide)&&t.onHide(e),this.toDisposeOnClean.dispose(),er.Cp(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,er.Jj(e).document.activeElement):t&&!er.jg(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};ContextView.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],ContextView.BUBBLE_DOWN_EVENTS=["click"];let tf=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`,t_=class extends E.JT{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=E.JT.None,this.contextView=this._register(new ContextView(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let n;n=t?t===this.layoutService.getContainer((0,er.Jj)(t))?1:i?3:2:1,this.contextView.setContainer(null!=t?t:this.layoutService.activeContainer,n),this.contextView.show(e);let o=(0,E.OF)(()=>{this.currentViewDisposable===o&&this.hideContextView()});return this.currentViewDisposable=o,o}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}dispose(){super.dispose(),this.currentViewDisposable.dispose(),this.currentViewDisposable=E.JT.None}};t_=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([function(e,t){ef(e,t,0)}],t_);var tv=i(42302),tC=i(23171),tb=i(51777);let tS=[],ty=[],tw=[];function registerPlatformLanguageAssociation(e,t=!1){_registerLanguageAssociation(e,!1,t)}function _registerLanguageAssociation(e,t,i){let n=toLanguageAssociationItem(e,t);tS.push(n),n.userConfigured?tw.push(n):ty.push(n),i&&!n.userConfigured&&tS.forEach(e=>{e.mime!==n.mime&&!e.userConfigured&&(n.extension&&e.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&e.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&e.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&e.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function toLanguageAssociationItem(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?(0,tv.Qc)(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(tb.KR.sep)>=0}}function clearPlatformLanguageAssociations(){tS=tS.filter(e=>e.userConfigured),ty=[]}function getLanguageIds(e,t){return getAssociations(e,t).map(e=>e.id)}function getAssociations(e,t){let i;if(e)switch(e.scheme){case es.lg.file:i=e.fsPath;break;case es.lg.data:{let t=tu.Vb.parseMetaData(e);i=t.get(tu.Vb.META_DATA_LABEL);break}case es.lg.vscodeNotebookCell:i=void 0;break;default:i=e.path}if(!i)return[{id:"unknown",mime:tC.v.unknown}];i=i.toLowerCase();let n=(0,tb.EZ)(i),o=getAssociationByPath(i,n,tw);if(o)return[o,{id:U.bd,mime:tC.v.text}];let r=getAssociationByPath(i,n,ty);if(r)return[r,{id:U.bd,mime:tC.v.text}];if(t){let e=getAssociationByFirstline(t);if(e)return[e,{id:U.bd,mime:tC.v.text}]}return[{id:"unknown",mime:tC.v.unknown}]}function getAssociationByPath(e,t,i){var n;let o,r,s;for(let l=i.length-1;l>=0;l--){let d=i[l];if(t===d.filenameLowercase){o=d;break}if(d.filepattern&&(!r||d.filepattern.length>r.filepattern.length)){let i=d.filepatternOnPath?e:t;(null===(n=d.filepatternLowercase)||void 0===n?void 0:n.call(d,i))&&(r=d)}d.extension&&(!s||d.extension.length>s.extension.length)&&t.endsWith(d.extensionLowercase)&&(s=d)}return o||r||s||void 0}function getAssociationByFirstline(e){if((0,I.uS)(e)&&(e=e.substr(1)),e.length>0)for(let t=tS.length-1;t>=0;t--){let i=tS[t];if(!i.firstline)continue;let n=e.match(i.firstline);if(n&&n.length>0)return i}}let tL=Object.prototype.hasOwnProperty,tk="vs.editor.nullLanguage";let LanguageIdCodec=class LanguageIdCodec{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(tk,0),this._register(U.bd,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||tk}};let LanguagesRegistry=class LanguagesRegistry extends E.JT{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ea.Q5),this.onDidChange=this._onDidChange.event,LanguagesRegistry.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new LanguageIdCodec,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(U.dQ.onDidChangeLanguages(e=>{this._initializeFromRegistry()})))}dispose(){LanguagesRegistry.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},clearPlatformLanguageAssociations();let e=[].concat(U.dQ.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach(e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier}),t.mimetypes.forEach(e=>{this._mimeTypesMap[e]=t.identifier})}),e9.B.as(e7.IP.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){let t;let i=e.id;tL.call(this._languages,i)?t=this._languages[i]:(this.languageIdCodec.register(i),t={identifier:i,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[i]=t),this._mergeLanguage(t,e)}_mergeLanguage(e,t){let i=t.id,n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions))for(let o of(t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions),t.extensions))registerPlatformLanguageAssociation({id:i,mime:n,extension:o},this._warnOnOverwrite);if(Array.isArray(t.filenames))for(let o of t.filenames)registerPlatformLanguageAssociation({id:i,mime:n,filename:o},this._warnOnOverwrite),e.filenames.push(o);if(Array.isArray(t.filenamePatterns))for(let e of t.filenamePatterns)registerPlatformLanguageAssociation({id:i,mime:n,filepattern:e},this._warnOnOverwrite);if("string"==typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{let t=new RegExp(e);(0,I.IO)(t)||registerPlatformLanguageAssociation({id:i,mime:n,firstline:t},this._warnOnOverwrite)}catch(i){console.warn(`[${t.id}]: Invalid regular expression \`${e}\`: `,i)}}e.aliases.push(i);let o=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(o=0===t.aliases.length?[null]:t.aliases),null!==o)for(let t of o)t&&0!==t.length&&e.aliases.push(t);let r=null!==o&&o.length>0;if(r&&null===o[0]);else{let t=(r?o[0]:null)||i;(r||!e.name)&&(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return!!e&&tL.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){let t=e.toLowerCase();return tL.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&tL.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?getLanguageIds(e,t):[]}};LanguagesRegistry.instanceCount=0;let LanguageService=class LanguageService extends E.JT{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new ea.Q5),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new ea.Q5),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new ea.Q5({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,LanguageService.instanceCount++,this._registry=this._register(new LanguagesRegistry(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){LanguageService.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){let i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return(0,ep.Xh)(i,null)}createById(e){return new LanguageSelection(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new LanguageSelection(this.onDidChange,()=>{let i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=U.bd),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),V.RW.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};LanguageService.instanceCount=0;let LanguageSelection=class LanguageSelection{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new ea.Q5({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;let t=this._selector();t!==this.languageId&&(this.languageId=t,null===(e=this._emitter)||void 0===e||e.fire(this.languageId))}};var tD=i(9252),tx=i(51765),tN=i(31798),tE=i(31498),tI=i(1215),tT=i(33482),tM=i(83367),tR=i(48953),tA=i(80064),tP=i(84530),tO=i(98847),tF=i(42385);let tB=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,tW=/(&amp;)?(&amp;)([^\s&])/g;(s=_||(_={}))[s.Right=0]="Right",s[s.Left=1]="Left";let Menu=class Menu extends tM.o{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");let o=document.createElement("div");o.classList.add("monaco-menu"),o.setAttribute("role","presentation"),super(o,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...eK.dz||eK.IJ?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=o,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(tT.o.addTarget(o)),this._register((0,er.nm)(o,er.tw.KEY_DOWN,e=>{let t=new eG.y(e);t.equals(2)&&e.preventDefault()})),i.enableMnemonics&&this._register((0,er.nm)(o,er.tw.KEY_DOWN,e=>{let t=e.key.toLocaleLowerCase();if(this.mnemonics.has(t)){er.zB.stop(e,!0);let i=this.mnemonics.get(t);if(1===i.length&&(i[0]instanceof SubmenuMenuActionViewItem&&i[0].container&&this.focusItemByElement(i[0].container),i[0].onClick(e)),i.length>1){let e=i.shift();e&&e.container&&(this.focusItemByElement(e.container),i.push(e)),this.mnemonics.set(t,i)}}})),eK.IJ&&this._register((0,er.nm)(o,er.tw.KEY_DOWN,e=>{let t=new eG.y(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),er.zB.stop(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),er.zB.stop(e,!0))})),this._register((0,er.nm)(this.domNode,er.tw.MOUSE_OUT,e=>{let t=e.relatedTarget;(0,er.jg)(t,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())})),this._register((0,er.nm)(this.actionsList,er.tw.MOUSE_OVER,e=>{let t=e.target;if(t&&(0,er.jg)(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})),this._register(tT.o.addTarget(this.actionsList)),this._register((0,er.nm)(this.actionsList,tT.t.Tap,e=>{let t=e.initialTarget;if(t&&(0,er.jg)(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new tA.s$(o,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let s=this.scrollableElement.getDomNode();s.style.position="",this.styleScrollElement(s,n),this._register((0,er.nm)(o,tT.t.Change,e=>{er.zB.stop(e,!0);let t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})})),this._register((0,er.nm)(s,er.tw.MOUSE_UP,e=>{e.preventDefault()}));let l=(0,er.Jj)(e);o.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((e,n)=>{var o;if(null===(o=i.submenuIds)||void 0===o?void 0:o.has(e.id))return console.warn(`Found submenu cycle: ${e.id}`),!1;if(e instanceof tD.Z0){if(n===t.length-1||0===n)return!1;let e=t[n-1];if(e instanceof tD.Z0)return!1}return!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(e=>!(e instanceof MenuSeparatorActionViewItem)).forEach((e,t,i)=>{e.updatePositionInSet(t+1,i.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||((0,er.OO)(e)?this.styleSheet=(0,er.dS)(e):(Menu.globalStyleSheet||(Menu.globalStyleSheet=(0,er.dS)()),this.styleSheet=Menu.globalStyleSheet)),this.styleSheet.textContent=getMenuWidgetCSS(t,(0,er.OO)(e))}styleScrollElement(e,t){var i,n;let o=null!==(i=t.foregroundColor)&&void 0!==i?i:"",r=null!==(n=t.backgroundColor)&&void 0!==n?n:"",s=t.borderColor?`1px solid ${t.borderColor}`:"",l=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=s,e.style.borderRadius="5px",e.style.color=o,e.style.backgroundColor=r,e.style.boxShadow=l}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){let t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof tD.Z0)return new MenuSeparatorActionViewItem(t.context,e,{icon:!0},this.menuStyles);if(e instanceof tD.wY){let n=new SubmenuMenuActionViewItem(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){let e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}{let i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){let n=t.getKeyBinding(e);if(n){let e=n.getLabel();e&&(i.keybinding=e)}}let n=new BaseMenuActionViewItem(t.context,e,i,this.menuStyles);if(t.enableMnemonics){let e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}}};let BaseMenuActionViewItem=class BaseMenuActionViewItem extends tR.YH{constructor(e,t,i,n){if(i.isMenu=!0,super(t,t,i),this.menuStyle=n,this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass="",this.options.label&&i.enableMnemonics){let e=this.action.label;if(e){let t=tB.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new e8.pY(()=>{this.element&&(this._register((0,er.nm)(this.element,er.tw.MOUSE_UP,e=>{if(er.zB.stop(e,!0),tI.vU){let t=new tE.n((0,er.Jj)(this.element),e);t.rightButton||this.onClick(e)}else setTimeout(()=>{this.onClick(e)},0)})),this._register((0,er.nm)(this.element,er.tw.CONTEXT_MENU,e=>{er.zB.stop(e,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=(0,er.R3)(this.element,(0,er.$)("a.action-menu-item")),this._action.id===tD.Z0.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,er.R3)(this.item,(0,er.$)("span.menu-item-check"+tO.k.asCSSSelector(tP.l.menuSelection))),this.check.setAttribute("role","none"),this.label=(0,er.R3)(this.item,(0,er.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,er.R3)(this.item,(0,er.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),null===(e=this.item)||void 0===e||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){(0,er.PO)(this.label);let t=(0,tF.x$)(this.action.label);if(t){let i=cleanMnemonic(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));let n=tB.exec(t);if(n){t=I.YU(t),tW.lastIndex=0;let i=tW.exec(t);for(;i&&i[1];)i=tW.exec(t);let replaceDoubleEscapes=e=>e.replace(/&amp;&amp;/g,"&amp;");i?this.label.append(I.j3(replaceDoubleEscapes(t.substr(0,i.index))," "),(0,er.$)("u",{"aria-hidden":"true"},i[3]),I.oL(replaceDoubleEscapes(t.substr(i.index+i[0].length))," ")):this.label.innerText=replaceDoubleEscapes(t).trim(),null===(e=this.item)||void 0===e||e.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;let e=this.action.checked;this.item.classList.toggle("checked",!!e),void 0!==e?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){let e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=null!=t?t:"",this.item.style.backgroundColor=null!=i?i:"",this.item.style.outline=n,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=null!=t?t:"")}};let SubmenuMenuActionViewItem=class SubmenuMenuActionViewItem extends BaseMenuActionViewItem{constructor(e,t,i,n,o){super(e,e,n,o),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new E.SL),this.mouseOver=!1,this.expandDirection=n&&void 0!==n.expandDirection?n.expandDirection:_.Right,this.showScheduler=new e8.pY(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new e8.pY(()=>{this.element&&!(0,er.jg)((0,er.vY)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,er.R3)(this.item,(0,er.$)("span.submenu-indicator"+tO.k.asCSSSelector(tP.l.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,er.nm)(this.element,er.tw.KEY_UP,e=>{let t=new eG.y(e);(t.equals(17)||t.equals(3))&&(er.zB.stop(e,!0),this.createSubmenu(!0))})),this._register((0,er.nm)(this.element,er.tw.KEY_DOWN,e=>{let t=new eG.y(e);(0,er.vY)()===this.item&&(t.equals(17)||t.equals(3))&&er.zB.stop(e,!0)})),this._register((0,er.nm)(this.element,er.tw.MOUSE_OVER,e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register((0,er.nm)(this.element,er.tw.MOUSE_LEAVE,e=>{this.mouseOver=!1})),this._register((0,er.nm)(this.element,er.tw.FOCUS_OUT,e=>{this.element&&!(0,er.jg)((0,er.vY)(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){er.zB.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(e){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){let o={top:0,left:0};return o.left=layout(e.width,t.width,{position:n===_.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=layout(e.height,t.height,{position:0,offset:i.top,size:0}),o.top+t.height===i.top&&o.top+i.height+t.height<=e.height&&(o.top+=i.height),o}createSubmenu(e=!0){if(this.element){if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,er.R3)(this.element,(0,er.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");let t=(0,er.Jj)(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Menu(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new tD.eZ],this.submenuOptions,this.menuStyle);let n=this.element.getBoundingClientRect(),o={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},r=this.submenuContainer.getBoundingClientRect(),s=(0,er.Jj)(this.element),{top:l,left:d}=this.calculateSubmenuMenuLayout(new er.Ro(s.innerWidth,s.innerHeight),er.Ro.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${d-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add((0,er.nm)(this.submenuContainer,er.tw.KEY_UP,e=>{let t=new eG.y(e);t.equals(15)&&(er.zB.stop(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add((0,er.nm)(this.submenuContainer,er.tw.KEY_DOWN,e=>{let t=new eG.y(e);t.equals(15)&&er.zB.stop(e,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}}updateAriaExpanded(e){var t;this.item&&(null===(t=this.item)||void 0===t||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();let e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=null!=t?t:"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}};let MenuSeparatorActionViewItem=class MenuSeparatorActionViewItem extends tR.gU{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}};function cleanMnemonic(e){let t=tB.exec(e);if(!t)return e;let i=!t[1];return e.replace(tB,i?"$2$3":"").trim()}function formatRule(e){let t=(0,tP.u)()[e.id];return`.codicon-${e.id}:before { content: '\\${t.toString(16)}'; }`}function getMenuWidgetCSS(e,t){let i=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${formatRule(tP.l.menuSelection)}
${formatRule(tP.l.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(t){i+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;let t=e.scrollbarShadow;t&&(i+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${t} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${t} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${t} 6px 6px 6px -6px inset;
				}
			`);let n=e.scrollbarSliderBackground;n&&(i+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${n};
				}
			`);let o=e.scrollbarSliderHoverBackground;o&&(i+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);let r=e.scrollbarSliderActiveBackground;r&&(i+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return i}var tV=i(4179);let ContextMenuHandler=class ContextMenuHandler{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){let t;let i=e.getActions();if(!i.length)return;this.focusToReturn=(0,er.vY)();let n=e.domForShadowRoot instanceof HTMLElement?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:n=>{var o;this.lastContainer=n;let r=e.getMenuClassName?e.getMenuClassName():"";r&&(n.className+=" "+r),this.options.blockMouse&&(this.block=n.appendChild((0,er.$)(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",null===(o=this.blockDisposable)||void 0===o||o.dispose(),this.blockDisposable=(0,er.nm)(this.block,er.tw.MOUSE_DOWN,e=>e.stopPropagation()));let s=new E.SL,l=e.actionRunner||new tD.Wi;l.onWillRun(t=>this.onActionRun(t,!e.skipTelemetry),this,s),l.onDidRun(this.onDidActionRun,this,s),(t=new Menu(n,i,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)},tV.ZR)).onDidCancel(()=>this.contextViewService.hideContextView(!0),null,s),t.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,s);let d=(0,er.Jj)(n);return s.add((0,er.nm)(d,er.tw.BLUR,()=>this.contextViewService.hideContextView(!0))),s.add((0,er.nm)(d,er.tw.MOUSE_DOWN,e=>{if(e.defaultPrevented)return;let t=new tE.n(d,e),i=t.target;if(!t.rightButton){for(;i;){if(i===n)return;i=i.parentElement}this.contextViewService.hideContextView(!0)}})),(0,E.F8)(s,t)},focus:()=>{null==t||t.focus(!!e.autoSelectFirstItem)},onHide:t=>{var i,n,o;null===(i=e.onHide)||void 0===i||i.call(e,!!t),this.block&&(this.block.remove(),this.block=null),null===(n=this.blockDisposable)||void 0===n||n.dispose(),this.blockDisposable=null,this.lastContainer&&((0,er.vY)()===this.lastContainer||(0,er.jg)((0,er.vY)(),this.lastContainer))&&(null===(o=this.focusToReturn)||void 0===o||o.focus()),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!(0,eC.n2)(e.error)&&this.notificationService.error(e.error)}};var contextMenuService_param=function(e,t){return function(i,n){t(i,n,e)}};let tH=class extends E.JT{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new ContextMenuHandler(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,o,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=o,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new ea.Q5),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new ea.Q5)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=v.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;null===(i=e.onHide)||void 0===i||i.call(e,t),this._onDidHideContextMenu.fire()}}),er._q.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};tH=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([contextMenuService_param(0,td.b),contextMenuService_param(1,ew.lT),contextMenuService_param(2,eF.u),contextMenuService_param(3,eB.d),contextMenuService_param(4,tN.co),contextMenuService_param(5,ec.i6)],tH),function(e){function is(e){return e&&e.menuId instanceof tN.eH}function transform(e,t,i){if(!is(e))return e;let{menuId:n,menuActionOptions:o,contextKeyService:r}=e;return{...e,getActions:()=>{let s=[];if(n){let e=t.createMenu(n,null!=r?r:i);(0,tx.LJ)(e,o,s),e.dispose()}return e.getActions?tD.Z0.join(e.getActions(),s):s}}}e.transform=transform}(v||(v={}));var tz=i(45828),tU=i(42443);(l=C||(C={}))[l.API=0]="API",l[l.USER=1]="USER";var openerService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},openerService_param=function(e,t){return function(i,n){t(i,n,e)}};let tK=class{constructor(e){this._commandService=e}async open(e,t){if(!(0,es.xn)(e,es.lg.command))return!1;if(!(null==t?void 0:t.allowCommands)||("string"==typeof e&&(e=T.o.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=(0,tU.Qc)(decodeURIComponent(e.query))}catch(t){try{i=(0,tU.Qc)(e.query)}catch(e){}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};tK=openerService_decorate([openerService_param(0,e4.H)],tK);let tj=class{constructor(e){this._editorService=e}async open(e,t){"string"==typeof e&&(e=T.o.parse(e));let{selection:i,uri:n}=(0,eH.x)(e);return(e=n).scheme===es.lg.file&&(e=(0,tu.AH)(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:(null==t?void 0:t.fromUserGesture)?C.USER:C.API,...null==t?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),null==t?void 0:t.openToSide),!0}};tj=openerService_decorate([openerService_param(0,A.$)],tj);let tq=class{constructor(e,t){this._openers=new el.S,this._validators=new el.S,this._resolvers=new el.S,this._resolvedUriTargets=new e3.Y9(e=>e.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new el.S,this._defaultExternalOpener={openExternal:async e=>((0,es.Gs)(e,es.lg.http,es.lg.https)?er.V3(e):N.Ex.location.href=e,!0)},this._openers.push({open:async(e,t)=>!!((null==t?void 0:t.openExternal)||(0,es.Gs)(e,es.lg.mailto,es.lg.http,es.lg.https,es.lg.vsls))&&(await this._doOpenExternal(e,t),!0)}),this._openers.push(new tK(t)),this._openers.push(new tj(e))}registerOpener(e){let t=this._openers.unshift(e);return{dispose:t}}async open(e,t){var i;let n="string"==typeof e?T.o.parse(e):e,o=null!==(i=this._resolvedUriTargets.get(n))&&void 0!==i?i:e;for(let e of this._validators)if(!await e.shouldOpen(o,t))return!1;for(let i of this._openers){let n=await i.open(e,t);if(n)return!0}return!1}async resolveExternalUri(e,t){for(let i of this._resolvers)try{let n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch(e){}throw Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){let i,n;let o="string"==typeof e?T.o.parse(e):e;try{i=(await this.resolveExternalUri(o,t)).resolved}catch(e){i=o}if(n="string"==typeof e&&o.toString()===i.toString()?e:encodeURI(i.toString(!0)),null==t?void 0:t.allowContributedOpeners){let e="string"==typeof(null==t?void 0:t.allowContributedOpeners)?null==t?void 0:t.allowContributedOpeners:void 0;for(let t of this._externalOpeners){let i=await t.openExternal(n,{sourceUri:o,preferredOpenerId:e},tz.T.None);if(i)return!0}}return this._defaultExternalOpener.openExternal(n,{sourceUri:o},tz.T.None)}dispose(){this._validators.clear()}};tq=openerService_decorate([openerService_param(0,A.$),openerService_param(1,e4.H)],tq);var t$=i(2068),tG=i(24070),tQ=i(1173),tZ=i(67809),markerDecorationsService_param=function(e,t){return function(i,n){t(i,n,e)}};let tY=class extends E.JT{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new ea.Q5),this._markerDecorations=new e3.Y9,e.getModels().forEach(e=>this._onModelAdded(e)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){let i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(e=>{let t=this._markerDecorations.get(e);t&&this._updateDecorations(t)})}_onModelAdded(e){let t=new MarkerDecorations(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;let i=this._markerDecorations.get(e.uri);i&&(i.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===es.lg.inMemory||e.uri.scheme===es.lg.internal||e.uri.scheme===es.lg.vscode)&&(null===(t=this._markerService)||void 0===t||t.read({resource:e.uri}).map(e=>e.owner).forEach(t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};tY=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([markerDecorationsService_param(0,q.q),markerDecorationsService_param(1,tG.lT)],tY);let MarkerDecorations=class MarkerDecorations extends E.JT{constructor(e){super(),this.model=e,this._map=new e3.YQ,this._register((0,E.OF)(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){let{added:t,removed:i}=(0,tZ.q)(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===i.length)return!1;let n=i.map(e=>this._map.get(e)),o=t.map(e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)})),r=this.model.deltaDecorations(n,o);for(let e of i)this._map.delete(e);for(let e=0;e<r.length;e++)this._map.set(t[e],r[e]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=e1.e.lift(t);if(t.severity!==tG.ZL.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),(i=e.validateRange(i)).isEmpty()){let t=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(1===t||i.endColumn>=t)return i;let n=e.getWordAtPosition(i.getStartPosition());n&&(i=new e1.e(i.startLineNumber,n.startColumn,i.endLineNumber,n.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){let n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new e1.e(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,o,r;switch(e.severity){case tG.ZL.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",i=0;break;case tG.ZL.Info:t="squiggly-info",o=(0,ed.EN)(tQ.eS),i=10,n={color:(0,ed.EN)(eA.Gvr),position:j.F5.Inline};break;case tG.ZL.Warning:t="squiggly-warning",o=(0,ed.EN)(tQ.Re),i=20,n={color:(0,ed.EN)(eA.Ivo),position:j.F5.Inline};break;case tG.ZL.Error:default:t="squiggly-error",o=(0,ed.EN)(tQ.lK),i=30,n={color:(0,ed.EN)(eA.Gj_),position:j.F5.Inline}}return e.tags&&(-1!==e.tags.indexOf(1)&&(r="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:o,position:j.sh.Right},minimap:n,zIndex:i,inlineClassName:r}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}};var tJ=i(1039),tX=i(26792),t0=i(49655),t1=i(22256),t2=i(74918),modelService_param=function(e,t){return function(i,n){t(i,n,e)}};function MODEL_ID(e){return e.toString()}let ModelData=class ModelData{constructor(e,t,i){this.model=e,this._modelEventListeners=new E.SL,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(t=>i(e,t)))}dispose(){this._modelEventListeners.dispose()}};let t5=eK.IJ||eK.dz?1:2;let DisposedModelInfo=class DisposedModelInfo{constructor(e,t,i,n,o,r,s,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=o,this.sha1=r,this.versionId=s,this.alternativeVersionId=l}};let t4=b=class extends E.JT{constructor(e,t,i,n,o){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._languageService=n,this._languageConfigurationService=o,this._onModelAdded=this._register(new ea.Q5),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new ea.Q5),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new ea.Q5),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(e=>this._updateModelOptions(e))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var i;let n=t0.D.tabSize;if(e.editor&&void 0!==e.editor.tabSize){let t=parseInt(e.editor.tabSize,10);isNaN(t)||(n=t),n<1&&(n=1)}let o="tabSize";if(e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize){let t=parseInt(e.editor.indentSize,10);isNaN(t)||(o=Math.max(t,1))}let r=t0.D.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(r="false"!==e.editor.insertSpaces&&!!e.editor.insertSpaces);let s=t5,l=e.eol;"\r\n"===l?s=2:"\n"===l&&(s=1);let d=t0.D.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(d="false"!==e.editor.trimAutoWhitespace&&!!e.editor.trimAutoWhitespace);let c=t0.D.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(c="false"!==e.editor.detectIndentation&&!!e.editor.detectIndentation);let u=t0.D.largeFileOptimizations;e.editor&&void 0!==e.editor.largeFileOptimizations&&(u="false"!==e.editor.largeFileOptimizations&&!!e.editor.largeFileOptimizations);let g=t0.D.bracketPairColorizationOptions;return(null===(i=e.editor)||void 0===i?void 0:i.bracketPairColorization)&&"object"==typeof e.editor.bracketPairColorization&&(g={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:o,insertSpaces:r,detectIndentation:c,defaultEOL:s,trimAutoWhitespace:d,largeFileOptimizations:u,bracketPairColorizationOptions:g}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&"string"==typeof i&&"auto"!==i?i:3===eK.OS||2===eK.OS?"\n":"\r\n"}_shouldRestoreUndoStack(){let e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e}getCreationOptions(e,t,i){let n="string"==typeof e?e:e.languageId,o=this._modelCreationOptionsByLanguageAndResource[n+t];if(!o){let e=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),r=this._getEOL(t,n);o=b._readModelOptions({editor:e,eol:r},i),this._modelCreationOptionsByLanguageAndResource[n+t]=o}return o}_updateModelOptions(e){let t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let i=Object.keys(this._models);for(let n=0,o=i.length;n<o;n++){let o=i[n],r=this._models[o],s=r.model.getLanguageId(),l=r.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:s,resource:l})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:s,resource:l}))continue;let d=t[s+l],c=this.getCreationOptions(s,l,r.model.isForSimpleWidget);b._setModelOptionsForModel(r.model,c,d)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&(0,P.fS)(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(MODEL_ID(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){let t=this._disposedModels.get(MODEL_ID(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(MODEL_ID(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(e=>{e.sharesUndoRedoStack||t.push(e)}),t.sort((e,t)=>e.time-t.time);t.length>0&&this._disposedModelsHeapSize>e;){let e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){let o=this.getCreationOptions(t,i,n),r=new tX.yO(e,t,o,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(MODEL_ID(i))){let e=this._removeDisposedModel(i),t=this._undoRedoService.getElements(i),n=this._getSHA1Computer(),o=!!n.canComputeSHA1(r)&&n.computeSHA1(r)===e.sha1;if(o||e.sharesUndoRedoStack){for(let e of t.past)(0,t2.e9)(e)&&e.matchesResource(i)&&e.setModel(r);for(let e of t.future)(0,t2.e9)(e)&&e.matchesResource(i)&&e.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,e=>(0,t2.e9)(e)&&e.matchesResource(i)),o&&(r._overwriteVersionId(e.versionId),r._overwriteAlternativeVersionId(e.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}let s=MODEL_ID(r.uri);if(this._models[s])throw Error("ModelService: Cannot add model because it already exists!");let l=new ModelData(r,e=>this._onWillDispose(e),(e,t)=>this._onDidChangeLanguage(e,t));return this._models[s]=l,l}createModel(e,t,i,n=!1){let o;return o=t?this._createModelData(e,t,i,n):this._createModelData(e,U.bd,i,n),this._onModelAdded.fire(o.model),o.model}getModels(){let e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){let n=t[i];e.push(this._models[n].model)}return e}getModel(e){let t=MODEL_ID(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===es.lg.file||e.scheme===es.lg.vscodeRemote||e.scheme===es.lg.vscodeUserData||e.scheme===es.lg.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){let t=MODEL_ID(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),o=!1,r=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){let t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(let i of t.past)(0,t2.e9)(i)&&i.matchesResource(e.uri)&&(o=!0,r+=i.heapSize(e.uri),i.setModel(e.uri));for(let i of t.future)(0,t2.e9)(i)&&i.matchesResource(e.uri)&&(o=!0,r+=i.heapSize(e.uri),i.setModel(e.uri))}}let s=b.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(o){if(n||!(r>s)&&l.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(s-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,t=>(0,t2.e9)(t)&&t.matchesResource(e.uri)),this._insertDisposedModel(new DisposedModelInfo(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,r,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{let e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}}else if(!n){let e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){let i=t.oldLanguage,n=e.getLanguageId(),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);b._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new DefaultModelSHA1Computer}};t4.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,t4=b=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([modelService_param(0,X.Ui),modelService_param(1,e5.y),modelService_param(2,eL.tJ),modelService_param(3,H.O),modelService_param(4,z.c_)],t4);let DefaultModelSHA1Computer=class DefaultModelSHA1Computer{canComputeSHA1(e){return e.getValueLength()<=DefaultModelSHA1Computer.MAX_MODEL_SIZE}computeSHA1(e){let t;let i=new t1.yP,n=e.createSnapshot();for(;t=n.read();)i.update(t);return i.digest()}};DefaultModelSHA1Computer.MAX_MODEL_SIZE=10485760,i(23097);var t3=i(66870),t6=i(34526),t7=i(4175),quickAccess_param=function(e,t){return function(i,n){t(i,n,e)}};let t9=class extends E.JT{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=e9.B.as(t6.IP.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var n;let o;let[r,s]=this.getOrInstantiateProvider(e),l=this.visibleQuickAccess,d=null==l?void 0:l.descriptor;if(l&&s&&d===s){e===s.prefix||(null==i?void 0:i.preserveValue)||(l.picker.value=e),this.adjustValueSelection(l.picker,s,i);return}if(s&&!(null==i?void 0:i.preserveValue)){let t;if(l&&d&&d!==s){let e=l.value.substr(d.prefix.length);e&&(t=`${s.prefix}${e}`)}if(!t){let e=null==r?void 0:r.defaultFilterValue;e===t6.Ry.LAST?t=this.lastAcceptedPickerValues.get(s):"string"==typeof e&&(t=`${s.prefix}${e}`)}"string"==typeof t&&(e=t)}let c=new E.SL,u=c.add(this.quickInputService.createQuickPick());u.value=e,this.adjustValueSelection(u,s,i),u.placeholder=null==s?void 0:s.placeholder,u.quickNavigate=null==i?void 0:i.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!l,("number"==typeof(null==i?void 0:i.itemActivation)||(null==i?void 0:i.quickNavigateConfiguration))&&(u.itemActivation=null!==(n=null==i?void 0:i.itemActivation)&&void 0!==n?n:t7.jG.SECOND),u.contextKey=null==s?void 0:s.contextKey,u.filterValue=e=>e.substring(s?s.prefix.length:0),t&&(o=new e8.CR,c.add(ea.ju.once(u.onWillAccept)(e=>{e.veto(),u.hide()}))),c.add(this.registerPickerListeners(u,r,s,e,null==i?void 0:i.providerOptions));let g=c.add(new tz.A);if(r&&c.add(r.provide(u,g.token,null==i?void 0:i.providerOptions)),ea.ju.once(u.onDidHide)(()=>{0===u.selectedItems.length&&g.cancel(),c.dispose(),null==o||o.complete(u.selectedItems.slice(0))}),u.show(),t)return null==o?void 0:o.p}adjustValueSelection(e,t,i){var n;let o;o=(null==i?void 0:i.preserveValue)?[e.value.length,e.value.length]:[null!==(n=null==t?void 0:t.prefix.length)&&void 0!==n?n:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,i,n,o){let r=new E.SL,s=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return r.add((0,E.OF)(()=>{s===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(e=>{let[i]=this.getOrInstantiateProvider(e);i!==t?this.show(e,{preserveValue:!0,providerOptions:o}):s.value=e})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e){let t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};t9=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([quickAccess_param(0,t7.eJ),quickAccess_param(1,em.TG)],t9);var t8=i(24311);i(98663);var ie=i(9049),it=i(835),ii=i(10612);let io=new ii.o(()=>{let e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}});function compareFileNames(e,t,i=!1){let n=e||"",o=t||"",r=io.value.collator.compare(n,o);return io.value.collatorIsNumeric&&0===r&&n!==o?n<o?-1:1:r}function compareAnything(e,t,i){let n=e.toLowerCase(),o=t.toLowerCase(),r=compareByPrefix(e,t,i);if(r)return r;let s=n.endsWith(i),l=o.endsWith(i);if(s!==l)return s?-1:1;let d=compareFileNames(n,o);return 0!==d?d:n.localeCompare(o)}function compareByPrefix(e,t,i){let n=e.toLowerCase(),o=t.toLowerCase(),r=n.startsWith(i),s=o.startsWith(i);if(r!==s)return r?-1:1;if(r&&s){if(n.length<o.length)return -1;if(n.length>o.length)return 1}return 0}new ii.o(()=>{let e=new Intl.Collator(void 0,{numeric:!0});return{collator:e}}),new ii.o(()=>{let e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"});return{collator:e}});var ir=i(40414),ia=i(53426),il=i(45776),ih=i(79614);let LinkedText=class LinkedText{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>"string"==typeof e?e:e.label).join("")}};!function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);r>3&&s&&Object.defineProperty(t,i,s)}([ir.H],LinkedText.prototype,"toString",null);let ic=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function parseLinkedText(e){let t;let i=[],n=0;for(;t=ic.exec(e);){t.index-n>0&&i.push(e.substring(n,t.index));let[,o,r,,s]=t;s?i.push({label:o,href:r,title:s}):i.push({label:o,href:r}),n=t.index+t[0].length}return n<e.length&&i.push(e.substring(n)),new LinkedText(i)}let iu={},ig=new ih.R("quick-input-button-icon-");function getIconClass(e){let t;if(!e)return;let i=e.dark.toString();return iu[i]?t=iu[i]:(t=ig.nextId(),er.fk(`.${t}, .hc-light .${t}`,`background-image: ${er.wY(e.light||e.dark)}`),er.fk(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${er.wY(e.dark)}`),iu[i]=t),t}function quickInputButtonToAction(e,t,i){let n=e.iconClass||getIconClass(e.iconPath);return e.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:n,enabled:!0,run:i}}function renderQuickInputDescription(e,t,i){er.mc(t);let n=parseLinkedText(e),o=0;for(let e of n.nodes)if("string"==typeof e)t.append(...(0,il.T)(e));else{let n=e.title;!n&&e.href.startsWith("command:")?n=(0,eS.NC)("executeCommand","Click to execute command '{0}'",e.href.substring(8)):n||(n=e.href);let r=er.$("a",{href:e.href,title:n,tabIndex:o++},e.label);r.style.textDecoration="underline";let handleOpen=t=>{er.cl(t)&&er.zB.stop(t,!0),i.callback(e.href)},s=i.disposables.add(new ia.Y(r,er.tw.CLICK)).event,l=i.disposables.add(new ia.Y(r,er.tw.KEY_DOWN)).event,d=ea.ju.chain(l,e=>e.filter(e=>{let t=new eG.y(e);return t.equals(10)||t.equals(3)}));i.disposables.add(tT.o.addTarget(r));let c=i.disposables.add(new ia.Y(r,tT.t.Tap)).event;ea.ju.any(s,c,d)(handleOpen,null,i.disposables),t.appendChild(r)}}var ip=i(21799),quickInputList_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};let im=er.$;let ListElement=class ListElement{constructor(e,t,i,n,o,r,s){var l,d,c;this._checked=!1,this._hidden=!1,this.hasCheckbox=n,this.index=i,this.fireButtonTriggered=o,this.fireSeparatorButtonTriggered=r,this._onChecked=s,this.onChecked=n?ea.ju.map(ea.ju.filter(this._onChecked.event,e=>e.listElement===this),e=>e.checked):ea.ju.None,"separator"===e.type?this._separator=e:(this.item=e,t&&"separator"===t.type&&!t.buttons&&(this._separator=t),this.saneDescription=this.item.description,this.saneDetail=this.item.detail,this._labelHighlights=null===(l=this.item.highlights)||void 0===l?void 0:l.label,this._descriptionHighlights=null===(d=this.item.highlights)||void 0===d?void 0:d.description,this._detailHighlights=null===(c=this.item.highlights)||void 0===c?void 0:c.detail,this.saneTooltip=this.item.tooltip),this._init=new ii.o(()=>{var t;let i=null!==(t=e.label)&&void 0!==t?t:"",n=(0,tF.Ho)(i).text.trim(),o=e.ariaLabel||[i,this.saneDescription,this.saneDetail].map(e=>(0,tF.JL)(e)).filter(e=>!!e).join(", ");return{saneLabel:i,saneSortLabel:n,saneAriaLabel:o}})}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({listElement:this,checked:e}))}get separator(){return this._separator}set separator(e){this._separator=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}};let ListElementRenderer=class ListElementRenderer{constructor(e,t){this.themeService=e,this.hoverDelegate=t}get templateId(){return ListElementRenderer.ID}renderTemplate(e){let t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=er.R3(e,im(".quick-input-list-entry"));let i=er.R3(t.entry,im("label.quick-input-list-label"));t.toDisposeTemplate.push(er.mu(i,er.tw.CLICK,e=>{t.checkbox.offsetParent||e.preventDefault()})),t.checkbox=er.R3(i,im("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(er.mu(t.checkbox,er.tw.CHANGE,e=>{t.element.checked=t.checkbox.checked}));let n=er.R3(i,im(".quick-input-list-rows")),o=er.R3(n,im(".quick-input-list-row")),r=er.R3(n,im(".quick-input-list-row"));t.label=new ie.g(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.push(t.label),t.icon=er.Ce(t.label.element,im(".quick-input-list-icon"));let s=er.R3(o,im(".quick-input-list-entry-keybinding"));t.keybinding=new it.e(s,eK.OS);let l=er.R3(r,im(".quick-input-list-label-meta"));return t.detail=new ie.g(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.push(t.detail),t.separator=er.R3(t.entry,im(".quick-input-list-separator")),t.actionBar=new tM.o(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,i){var n,o,r,s;let l;i.element=e,e.element=null!==(n=i.entry)&&void 0!==n?n:void 0;let d=e.item?e.item:e.separator;i.checkbox.checked=e.checked,i.toDisposeElement.push(e.onChecked(e=>i.checkbox.checked=e));let{labelHighlights:c,descriptionHighlights:u,detailHighlights:g}=e;if(null===(o=e.item)||void 0===o?void 0:o.iconPath){let t=(0,ip._T)(this.themeService.getColorTheme().type)?e.item.iconPath.dark:null!==(r=e.item.iconPath.light)&&void 0!==r?r:e.item.iconPath.dark,n=T.o.revive(t);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=er.wY(n)}else i.icon.style.backgroundImage="",i.icon.className=(null===(s=e.item)||void 0===s?void 0:s.iconClass)?`quick-input-list-icon ${e.item.iconClass}`:"";!e.saneTooltip&&e.saneDescription&&(l={markdown:{value:e.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:e.saneDescription});let m={matches:c||[],descriptionTitle:l,descriptionMatches:u||[],labelEscapeNewLines:!0};if("separator"!==d.type?(m.extraClasses=d.iconClasses,m.italic=d.italic,m.strikethrough=d.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item")):i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(e.saneLabel,e.saneDescription,m),i.keybinding.set("separator"===d.type?void 0:d.keybinding),e.saneDetail){let t;e.saneTooltip||(t={markdown:{value:e.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:e.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(e.saneDetail,void 0,{matches:g,title:t,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";e.item&&e.separator&&e.separator.label?(i.separator.textContent=e.separator.label,i.separator.style.display=""):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!e.separator);let f=d.buttons;f&&f.length?(i.actionBar.push(f.map((t,i)=>quickInputButtonToAction(t,`id-${i}`,()=>"separator"!==d.type?e.fireButtonTriggered({button:t,item:d}):e.fireSeparatorButtonTriggered({button:t,separator:d}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){i.toDisposeElement=(0,E.B9)(i.toDisposeElement),i.actionBar.clear()}disposeTemplate(e){e.toDisposeElement=(0,E.B9)(e.toDisposeElement),e.toDisposeTemplate=(0,E.B9)(e.toDisposeTemplate)}};ListElementRenderer.ID="listelement";let ListElementDelegate=class ListElementDelegate{getHeight(e){return e.item?e.saneDetail?44:22:24}getTemplateId(e){return ListElementRenderer.ID}};(d=S||(S={}))[d.First=1]="First",d[d.Second=2]="Second",d[d.Last=3]="Last",d[d.Next=4]="Next",d[d.Previous=5]="Previous",d[d.NextPage=6]="NextPage",d[d.PreviousPage=7]="PreviousPage";let QuickInputList=class QuickInputList{constructor(e,t,i,n){this.parent=e,this.options=i,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.sortByLabel=!0,this._onChangedAllVisibleChecked=new ea.Q5,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new ea.Q5,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new ea.Q5,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new ea.Q5,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new ea.Q5,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new ea.Q5,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new ea.Q5,this.onKeyDown=this._onKeyDown.event,this._onLeave=new ea.Q5,this.onLeave=this._onLeave.event,this._listElementChecked=new ea.Q5,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=er.R3(this.parent,im(".quick-input-list"));let o=new ListElementDelegate,r=new QuickInputAccessibilityProvider;this.list=i.createList("QuickInput",this.container,o,[new ListElementRenderer(n,i.hoverDelegate)],{identityProvider:{getId:e=>{var t,i,n,o,r,s,l,d;return null!==(d=null!==(s=null!==(o=null!==(i=null===(t=e.item)||void 0===t?void 0:t.id)&&void 0!==i?i:null===(n=e.item)||void 0===n?void 0:n.label)&&void 0!==o?o:null===(r=e.separator)||void 0===r?void 0:r.id)&&void 0!==s?s:null===(l=e.separator)||void 0===l?void 0:l.label)&&void 0!==d?d:""}},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(e=>{let t=new eG.y(e);switch(t.keyCode){case 10:this.toggleCheckbox();break;case 31:(eK.dz?e.metaKey:e.ctrlKey)&&this.list.setFocus((0,ep.w6)(this.list.length));break;case 16:{let e=this.list.getFocus();1===e.length&&0===e[0]&&this._onLeave.fire();break}case 18:{let e=this.list.getFocus();1===e.length&&e[0]===this.list.length-1&&this._onLeave.fire()}}this._onKeyDown.fire(t)})),this.disposables.push(this.list.onMouseDown(e=>{2!==e.browserEvent.button&&e.browserEvent.preventDefault()})),this.disposables.push(er.nm(this.container,er.tw.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(e=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(e=>{"number"==typeof e.index&&(e.browserEvent.preventDefault(),this.list.setSelection([e.index]))}));let s=new e8.rH(i.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(async e=>{var t;if(e.browserEvent.target instanceof HTMLAnchorElement){s.cancel();return}if(!(!(e.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&er.jg(e.browserEvent.relatedTarget,null===(t=e.element)||void 0===t?void 0:t.element)))try{await s.trigger(async()=>{e.element&&this.showHover(e.element)})}catch(e){if(!(0,eC.n2)(e))throw e}})),this.disposables.push(this.list.onMouseOut(e=>{var t;er.jg(e.browserEvent.relatedTarget,null===(t=e.element)||void 0===t?void 0:t.element)||s.cancel()})),this.disposables.push(s),this.disposables.push(this._listElementChecked.event(e=>this.fireCheckedEvents())),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ea.ju.map(this.list.onDidChangeFocus,e=>e.elements.map(e=>e.item))}get onDidChangeSelection(){return ea.ju.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(e=>e.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(e){this.list.getHTMLElement().ariaLabel=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n.hidden){if(!n.checked)return!1;t=!0}}return t}getCheckedCount(){let e=0,t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].checked&&e++;return e}getVisibleCount(){let e=0,t=this.elements;for(let i=0,n=t.length;i<n;i++)!t[i].hidden&&e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=(0,E.B9)(this.elementDisposables);let fireButtonTriggered=e=>this.fireButtonTriggered(e),fireSeparatorButtonTriggered=e=>this.fireSeparatorButtonTriggered(e);this.inputElements=e;let t=new Map,i=this.parent.classList.contains("show-checkboxes");this.elements=e.reduce((n,o,r)=>{var s;let l=r>0?e[r-1]:void 0;if("separator"===o.type&&!o.buttons)return n;let d=new ListElement(o,l,r,i,fireButtonTriggered,fireSeparatorButtonTriggered,this._listElementChecked),c=n.length;return n.push(d),t.set(null!==(s=d.item)&&void 0!==s?s:d.separator,c),n},[]),this.elementsToIndexes=t,this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(e=>this.elementsToIndexes.has(e)).map(e=>this.elementsToIndexes.get(e))),e.length>0){let e=this.list.getFocus()[0];"number"==typeof e&&this.list.reveal(e)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(e=>this.elementsToIndexes.has(e)).map(e=>this.elementsToIndexes.get(e)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item).filter(e=>!!e)}setCheckedElements(e){try{this._fireCheckedEvents=!1;let t=new Set;for(let i of e)t.add(i);for(let e of this.elements)e.checked=t.has(e.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===S.Second&&this.list.length<2&&(e=S.First),e){case S.First:this.list.scrollTop=0,this.list.focusFirst(void 0,e=>!!e.item);break;case S.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,e=>!!e.item);break;case S.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,e=>!!e.item);break;case S.Next:{this.list.focusNext(void 0,!0,void 0,e=>!!e.item);let e=this.list.getFocus()[0];0!==e&&!this.elements[e-1].item&&this.list.firstVisibleIndex>e-1&&this.list.reveal(e-1);break}case S.Previous:{this.list.focusPrevious(void 0,!0,void 0,e=>!!e.item);let e=this.list.getFocus()[0];0!==e&&!this.elements[e-1].item&&this.list.firstVisibleIndex>e-1&&this.list.reveal(e-1);break}case S.NextPage:this.list.focusNextPage(void 0,e=>!!e.item);break;case S.PreviousPage:this.list.focusPreviousPage(void 0,e=>!!e.item)}let t=this.list.getFocus()[0];"number"==typeof t&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(e){var t,i,n;this._lastHover&&!this._lastHover.isDisposed&&(null===(i=(t=this.options.hoverDelegate).onDidHideHover)||void 0===i||i.call(t),null===(n=this._lastHover)||void 0===n||n.dispose()),e.element&&e.saneTooltip&&(this._lastHover=this.options.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.options.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this.container,position:{hoverPosition:1}},!1))}layout(e){this.list.getHTMLElement().style.maxHeight=e?`${44*Math.floor(e/44)+6}px`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;let t=e;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let i;this.elements.forEach(n=>{var o,r,s,l;let d;d="fuzzy"===this.matchOnLabelMode?this.matchOnLabel&&null!==(o=(0,tF.Gt)(e,(0,tF.Ho)(n.saneLabel)))&&void 0!==o?o:void 0:this.matchOnLabel&&null!==(r=matchesContiguousIconAware(t,(0,tF.Ho)(n.saneLabel)))&&void 0!==r?r:void 0;let c=this.matchOnDescription&&null!==(s=(0,tF.Gt)(e,(0,tF.Ho)(n.saneDescription||"")))&&void 0!==s?s:void 0,u=this.matchOnDetail&&null!==(l=(0,tF.Gt)(e,(0,tF.Ho)(n.saneDetail||"")))&&void 0!==l?l:void 0;if(d||c||u?(n.labelHighlights=d,n.descriptionHighlights=c,n.detailHighlights=u,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!n.item||!n.item.alwaysShow),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){let e=n.index&&this.inputElements[n.index-1];(i=e&&"separator"===e.type?e:i)&&!n.hidden&&(n.separator=i,i=void 0)}})}else this.elements.forEach(e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;let t=e.index&&this.inputElements[e.index-1];e.item&&(e.separator=t&&"separator"===t.type&&!t.buttons?t:void 0)});let i=this.elements.filter(e=>!e.hidden);if(this.sortByLabel&&e){let t=e.toLowerCase();i.sort((e,i)=>compareEntries(e,i,t))}return this.elementsToIndexes=i.reduce((e,t,i)=>{var n;return e.set(null!==(n=t.item)&&void 0!==n?n:t.separator,i),e},new Map),this.list.splice(0,this.list.length,i),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(i.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;let e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(let i of e)i.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return"none"!==this.container.style.display}dispose(){this.elementDisposables=(0,E.B9)(this.elementDisposables),this.disposables=(0,E.B9)(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}style(e){this.list.style(e)}toggleHover(){let e=this.list.getFocusedElements()[0];if(!(null==e?void 0:e.saneTooltip))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}let t=this.list.getFocusedElements()[0];if(!t)return;this.showHover(t);let i=new E.SL;i.add(this.list.onDidChangeFocus(e=>{e.indexes.length&&this.showHover(e.elements[0])})),this._lastHover&&i.add(this._lastHover),this._toggleHover=i,this.elementDisposables.push(this._toggleHover)}};function matchesContiguousIconAware(e,t){let{text:i,iconOffsets:n}=t;if(!n||0===n.length)return matchesContiguous(e,i);let o=(0,I.j3)(i," "),r=i.length-o.length,s=matchesContiguous(e,o);if(s)for(let e of s){let t=n[e.start+r]+r;e.start+=t,e.end+=t}return s}function matchesContiguous(e,t){let i=t.toLowerCase().indexOf(e.toLowerCase());return -1!==i?[{start:i,end:i+e.length}]:null}function compareEntries(e,t,i){let n=e.labelHighlights||[],o=t.labelHighlights||[];return n.length&&!o.length?-1:!n.length&&o.length?1:0===n.length&&0===o.length?0:compareAnything(e.saneSortLabel,t.saneSortLabel,i)}quickInputList_decorate([ir.H],QuickInputList.prototype,"onDidChangeFocus",null),quickInputList_decorate([ir.H],QuickInputList.prototype,"onDidChangeSelection",null);let QuickInputAccessibilityProvider=class QuickInputAccessibilityProvider{getWidgetAriaLabel(){return(0,eS.NC)("quickInput","Quick Input")}getAriaLabel(e){var t;return(null===(t=e.separator)||void 0===t?void 0:t.label)?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}};var quickInput_param=function(e,t){return function(i,n){t(i,n,e)}};let i_={iconClass:tO.k.asClassName(tP.l.quickInputBack),tooltip:(0,eS.NC)("quickInput.back","Back"),handle:-1};let QuickInput=class QuickInput extends E.JT{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=QuickInput.noPromptMessage,this._severity=eb.Z.Ignore,this.onDidTriggerButtonEmitter=this._register(new ea.Q5),this.onDidHideEmitter=this._register(new ea.Q5),this.onDisposeEmitter=this._register(new ea.Q5),this.visibleDisposables=this._register(new E.SL),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){let t=this._ignoreFocusOut!==e&&!eK.gn;this._ignoreFocusOut=e&&!eK.gn,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=null!=e?e:[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=t7.Jq.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;let i=this.getTitle();i&&this.ui.title.textContent!==i?this.ui.title.textContent=i:i||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText="\xa0");let n=this.getDescription();if(this.ui.description1.textContent!==n&&(this.ui.description1.textContent=n),this.ui.description2.textContent!==n&&(this.ui.description2.textContent=n),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?er.mc(this.ui.widget,this._widget):er.mc(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new e8._F,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let e=this.buttons.filter(e=>e===i_).map((e,t)=>quickInputButtonToAction(e,`id-${t}`,async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.leftActionBar.push(e,{icon:!0,label:!1}),this.ui.rightActionBar.clear();let t=this.buttons.filter(e=>e!==i_).map((e,t)=>quickInputButtonToAction(e,`id-${t}`,async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.rightActionBar.push(t,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;let i=null!==(t=null===(e=this.toggles)||void 0===e?void 0:e.filter(e=>e instanceof t8.Z))&&void 0!==t?t:[];this.ui.inputBox.toggles=i}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let o=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==o&&(this._lastValidationMessage=o,er.mc(this.ui.message),renderQuickInputDescription(o,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,eS.NC)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==eb.Z.Ignore){let t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};QuickInput.noPromptMessage=(0,eS.NC)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let QuickPick=class QuickPick extends QuickInput{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ea.Q5),this.onWillAcceptEmitter=this._register(new ea.Q5),this.onDidAcceptEmitter=this._register(new ea.Q5),this.onDidCustomEmitter=this._register(new ea.Q5),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=t7.jG.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ea.Q5),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ea.Q5),this.onDidTriggerItemButtonEmitter=this._register(new ea.Q5),this.onDidTriggerSeparatorButtonEmitter=this._register(new ea.Q5),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){if(this._value!==e){if(this._value=e,t||this.update(),this.visible){let e=this.ui.list.filter(this.filterValue(this._value));e&&this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?t7.X5:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(S.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(S.Next),this.canSelectMany&&this.ui.list.domFocus(),er.zB.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(S.Previous):this.ui.list.focus(S.Last),this.canSelectMany&&this.ui.list.domFocus(),er.zB.stop(e,!0);break;case 12:this.ui.list.focus(S.NextPage),this.canSelectMany&&this.ui.list.domFocus(),er.zB.stop(e,!0);break;case 11:this.ui.list.focus(S.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),er.zB.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(S.First),er.zB.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(S.Last),er.zB.stop(e,!0))}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,ep.fS)(e,this._activeItems,(e,t)=>e===t)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}!(this.selectedItemsToConfirm!==this._selectedItems&&(0,ep.fS)(e,this._selectedItems,(e,t)=>e===t))&&(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(er.N5(t)&&1===t.button))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&(0,ep.fS)(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return er.nm(this.ui.container,er.tw.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;let t=new eG.y(e),i=t.keyCode,n=this._quickNavigate.keybindings,o=n.some(e=>{let n=e.getChords();return!(n.length>1)&&(n[0].shiftKey&&4===i?!t.ctrlKey&&!t.altKey&&!t.metaKey:!!n[0].altKey&&6===i||!!n[0].ctrlKey&&5===i||!!n[0].metaKey&&57===i)});o&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;if(!n&&i.inputBox&&(n=this.placeholder||QuickPick.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=null!=n?n:null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case t7.jG.NONE:this._itemActivation=t7.jG.FIRST;break;case t7.jG.SECOND:this.ui.list.focus(S.Second),this._itemActivation=t7.jG.FIRST;break;case t7.jG.LAST:this.ui.list.focus(S.Last),this._itemActivation=t7.jG.FIRST;break;default:this.trySelectFirst()}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",!i.inputBox&&(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(S.First)),this.keepScrollPosition&&(this.scrollTop=e)}};QuickPick.DEFAULT_ARIA_LABEL=(0,eS.NC)("quickInputBox.ariaLabel","Type to narrow down results.");let InputBox=class InputBox extends QuickInput{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new ea.Q5),this.onDidAcceptEmitter=this._register(new ea.Q5),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");let e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}};let iv=class extends eO{constructor(e,t){super("element",!1,e=>this.getOverrideOptions(e),e,t)}getOverrideOptions(e){var t;let i=(e.content instanceof HTMLElement?null!==(t=e.content.textContent)&&void 0!==t?t:"":"string"==typeof e.content?e.content:e.content.value).includes("\n");return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:i,skipFadeInAnimation:!0}}}};iv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([quickInput_param(0,X.Ui),quickInput_param(1,eP)],iv);var iC=i(49216),ib=i(18179);i(78537);let iS="done",iy="active",iw="infinite",iL="infinite-long-running",ik="discrete";let ProgressBar=class ProgressBar extends E.JT{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new e8.pY(()=>(0,er.$Z)(this.element),0)),this.longRunningScheduler=this._register(new e8.pY(()=>this.infiniteLongRunning(),ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(null==t?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(iy,iw,iL,ik),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(iS),this.element.classList.contains(iw)?this.bit.style.opacity="0":this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off(),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(ik,iS,iL),this.element.classList.add(iy,iw),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(iL)}getContainer(){return this.element}};ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var iD=i(43811);let ix=er.$;let QuickInputBox=class QuickInputBox extends E.JT{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=e=>er.mu(this.findInput.inputBox.inputElement,er.tw.KEY_DOWN,e),this.onDidChange=e=>this.findInput.onDidChange(e),this.container=er.R3(this.parent,ix(".quick-input-box")),this.findInput=this._register(new iD.V(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));let n=this.findInput.inputBox.inputElement;n.role="combobox",n.ariaHasPopup="menu",n.ariaAutoComplete="list",n.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return"password"===this.findInput.inputBox.inputElement.type}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===eb.Z.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===eb.Z.Info?1:e===eb.Z.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===eb.Z.Info?1:e===eb.Z.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}};let iN=er.$;let QuickInputController=class QuickInputController extends E.JT{get container(){return this._container}constructor(e,t,i){super(),this.options=e,this.themeService=t,this.layoutService=i,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ea.Q5),this.onDidCustomEmitter=this._register(new ea.Q5),this.onDidTriggerButtonEmitter=this._register(new ea.Q5),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ea.Q5),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ea.Q5),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(ea.ju.runAndSubscribe(er.Xo,({window:e,disposables:t})=>this.registerKeyModsListeners(e,t),{window:N.Ex,disposables:this._store})),this._register(er.Jc(e=>{this.ui&&er.Jj(this.ui.container)===e&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){let listener=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(let i of[er.tw.KEY_DOWN,er.tw.KEY_UP,er.tw.MOUSE_DOWN])t.add(er.nm(e,i,listener,!0))}getUI(e){if(this.ui)return e&&er.Jj(this._container)!==er.Jj(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;let t=er.R3(this._container,iN(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";let i=er.dS(t),n=er.R3(t,iN(".quick-input-titlebar")),o=this._register(new tM.o(n,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-left-action-bar");let r=er.R3(n,iN(".quick-input-title")),s=this._register(new tM.o(n,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-right-action-bar");let l=er.R3(t,iN(".quick-input-header")),d=er.R3(l,iN("input.quick-input-check-all"));d.type="checkbox",d.setAttribute("aria-label",(0,eS.NC)("quickInput.checkAll","Toggle all checkboxes")),this._register(er.mu(d,er.tw.CHANGE,e=>{let t=d.checked;E.setAllVisibleChecked(t)})),this._register(er.nm(d,er.tw.CLICK,e=>{(e.x||e.y)&&m.setFocus()}));let c=er.R3(l,iN(".quick-input-description")),u=er.R3(l,iN(".quick-input-and-message")),g=er.R3(u,iN(".quick-input-filter")),m=this._register(new QuickInputBox(g,this.styles.inputBox,this.styles.toggle));m.setAttribute("aria-describedby",`${this.idPrefix}message`);let f=er.R3(g,iN(".quick-input-visible-count"));f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true");let _=new ib.Z(f,{countFormat:(0,eS.NC)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),v=er.R3(g,iN(".quick-input-count"));v.setAttribute("aria-live","polite");let C=new ib.Z(v,{countFormat:(0,eS.NC)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),b=er.R3(l,iN(".quick-input-action")),S=this._register(new iC.z(b,this.styles.button));S.label=(0,eS.NC)("ok","OK"),this._register(S.onDidClick(e=>{this.onDidAcceptEmitter.fire()}));let y=er.R3(l,iN(".quick-input-action")),w=this._register(new iC.z(y,{...this.styles.button,supportIcons:!0}));w.label=(0,eS.NC)("custom","Custom"),this._register(w.onDidClick(e=>{this.onDidCustomEmitter.fire()}));let L=er.R3(u,iN(`#${this.idPrefix}message.quick-input-message`)),k=this._register(new ProgressBar(t,this.styles.progressBar));k.getContainer().classList.add("quick-input-progress");let D=er.R3(t,iN(".quick-input-html-widget"));D.tabIndex=-1;let x=er.R3(t,iN(".quick-input-description")),N=this.idPrefix+"list",E=this._register(new QuickInputList(t,N,this.options,this.themeService));m.setAttribute("aria-controls",N),this._register(E.onDidChangeFocus(()=>{var e;m.setAttribute("aria-activedescendant",null!==(e=E.getActiveDescendant())&&void 0!==e?e:"")})),this._register(E.onChangedAllVisibleChecked(e=>{d.checked=e})),this._register(E.onChangedVisibleCount(e=>{_.setCount(e)})),this._register(E.onChangedCheckedCount(e=>{C.setCount(e)})),this._register(E.onLeave(()=>{setTimeout(()=>{this.controller&&(m.setFocus(),this.controller instanceof QuickPick&&this.controller.canSelectMany&&E.clearFocus())},0)}));let I=er.go(t);return this._register(I),this._register(er.nm(t,er.tw.FOCUS,e=>{er.jg(e.relatedTarget,t)||(this.previousFocusElement=e.relatedTarget instanceof HTMLElement?e.relatedTarget:void 0)},!0)),this._register(I.onDidBlur(()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(t7.Jq.Blur),this.previousFocusElement=void 0})),this._register(er.nm(t,er.tw.FOCUS,e=>{m.setFocus()})),this._register(er.mu(t,er.tw.KEY_DOWN,e=>{if(!er.jg(e.target,D))switch(e.keyCode){case 3:er.zB.stop(e,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:er.zB.stop(e,!0),this.hide(t7.Jq.Gesture);break;case 2:if(!e.altKey&&!e.ctrlKey&&!e.metaKey){let i=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?i.push("input"):i.push("input[type=text]"),this.getUI().list.isDisplayed()&&i.push(".monaco-list"),this.getUI().message&&i.push(".quick-input-message a"),this.getUI().widget){if(er.jg(e.target,this.getUI().widget))break;i.push(".quick-input-html-widget")}let n=t.querySelectorAll(i.join(", "));e.shiftKey&&e.target===n[0]?(er.zB.stop(e,!0),E.clearFocus()):!e.shiftKey&&er.jg(e.target,n[n.length-1])&&(er.zB.stop(e,!0),n[0].focus())}break;case 10:e.ctrlKey&&(er.zB.stop(e,!0),this.getUI().list.toggleHover())}})),this.ui={container:t,styleSheet:i,leftActionBar:o,titleBar:n,title:r,description1:x,description2:c,widget:D,rightActionBar:s,checkAll:d,inputContainer:u,filterContainer:g,inputBox:m,visibleCountContainer:f,visibleCount:_,countContainer:v,count:C,okContainer:b,ok:S,message:L,customButtonContainer:y,customButton:w,list:E,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,er.R3(this._container,this.ui.container))}pick(e,t={},i=tz.T.None){return new Promise((n,o)=>{let r,resolve=e=>{var i;resolve=n,null===(i=t.onKeyMods)||void 0===i||i.call(t,s.keyMods),n(e)};if(i.isCancellationRequested){resolve(void 0);return}let s=this.createQuickPick(),l=[s,s.onDidAccept(()=>{if(s.canSelectMany)resolve(s.selectedItems.slice()),s.hide();else{let e=s.activeItems[0];e&&(resolve(e),s.hide())}}),s.onDidChangeActive(e=>{let i=e[0];i&&t.onDidFocus&&t.onDidFocus(i)}),s.onDidChangeSelection(e=>{if(!s.canSelectMany){let t=e[0];t&&(resolve(t),s.hide())}}),s.onDidTriggerItemButton(e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...e,removeItem:()=>{let t=s.items.indexOf(e.item);if(-1!==t){let e=s.items.slice(),i=e.splice(t,1),n=s.activeItems.filter(e=>e!==i[0]),o=s.keepScrollPosition;s.keepScrollPosition=!0,s.items=e,n&&(s.activeItems=n),s.keepScrollPosition=o}}})),s.onDidTriggerSeparatorButton(e=>{var i;return null===(i=t.onDidTriggerSeparatorButton)||void 0===i?void 0:i.call(t,e)}),s.onDidChangeValue(e=>{r&&!e&&(1!==s.activeItems.length||s.activeItems[0]!==r)&&(s.activeItems=[r])}),i.onCancellationRequested(()=>{s.hide()}),s.onDidHide(()=>{(0,E.B9)(l),resolve(void 0)})];s.title=t.title,s.canSelectMany=!!t.canPickMany,s.placeholder=t.placeHolder,s.ignoreFocusOut=!!t.ignoreFocusLost,s.matchOnDescription=!!t.matchOnDescription,s.matchOnDetail=!!t.matchOnDetail,s.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,s.quickNavigate=t.quickNavigate,s.hideInput=!!t.hideInput,s.contextKey=t.contextKey,s.busy=!0,Promise.all([e,t.activeItem]).then(([e,t])=>{r=t,s.busy=!1,s.items=e,s.canSelectMany&&(s.selectedItems=e.filter(e=>"separator"!==e.type&&e.picked)),r&&(s.activeItems=[r])}),s.show(),Promise.resolve(e).then(void 0,e=>{o(e),s.hide()})})}createQuickPick(){let e=this.getUI(!0);return new QuickPick(e)}createInputBox(){let e=this.getUI(!0);return new InputBox(e)}show(e){let t=this.getUI(!0);this.onShowEmitter.fire();let i=this.controller;this.controller=e,null==i||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",er.mc(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(eb.Z.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),er.mc(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;let n=this.options.backKeybindingLabel();i_.tooltip=n?(0,eS.NC)("quickInput.backWithKeybinding","Back ({0})",n):(0,eS.NC)("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}isVisible(){return!!this.ui&&"none"!==this.ui.container.style.display}setVisibilities(e){let t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){for(let t of(this.enabled=e,this.getUI().leftActionBar.viewItems))t.action.enabled=e;for(let t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,i;let n=this.controller;if(!n)return;let o=null===(t=this.ui)||void 0===t?void 0:t.container,r=o&&!er.b5(o);if(this.controller=null,this.onHideEmitter.fire(),o&&(o.style.display="none"),!r){let e=this.previousFocusElement;for(;e&&!e.offsetParent;)e=null!==(i=e.parentElement)&&void 0!==i?i:void 0;(null==e?void 0:e.offsetParent)?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;let e=this.ui.container.style,t=Math.min(.62*this.dimension.width,QuickInputController.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=null!=e?e:"",this.ui.container.style.backgroundColor=null!=t?t:"",this.ui.container.style.color=null!=i?i:"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.list.style(this.styles.list);let r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));let s=r.join("\n");s!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=s)}}};QuickInputController.MAX_WIDTH=600;var quickInputService_param=function(e,t){return function(i,n){t(i,n,e)}};let iE=class extends ed.bB{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(t9))),this._quickAccess}constructor(e,t,i,n,o){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=o,this._onShow=this._register(new ea.Q5),this._onHide=this._register(new ea.Q5),this.contexts=new Map}createController(e=this.layoutService,t){let i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>void 0,setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction(t=>{let i=t.get(eH.v);i.open(e,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),createList:(e,t,i,n,o)=>this.instantiationService.createInstance(t3.ev,e,t,i,n,o),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(iv))},n=this._register(new QuickInputController({...i,...t},this.themeService,this.layoutService));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(t=>{(0,er.Jj)(e.activeContainer)===(0,er.Jj)(n.container)&&n.layout(t,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(n.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(n.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),n}setContextKey(e){let t;!e||(t=this.contexts.get(e))||(t=new ec.uy(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t)),t&&t.get()||(this.resetContextKeys(),null==t||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=tz.T.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:(0,eA.n_1)(eA.zKr),quickInputForeground:(0,eA.n_1)(eA.tZ6),quickInputTitleBackground:(0,eA.n_1)(eA.loF),widgetBorder:(0,eA.n_1)(eA.A42),widgetShadow:(0,eA.n_1)(eA.rh)},inputBox:tV.Hc,toggle:tV.pl,countBadge:tV.ku,button:tV.wG,progressBar:tV.b5,keybindingLabel:tV.eO,list:(0,tV.TU)({listBackground:eA.zKr,listFocusBackground:eA.Vqd,listFocusForeground:eA.NPS,listInactiveFocusForeground:eA.NPS,listInactiveSelectionIconForeground:eA.cbQ,listInactiveFocusBackground:eA.Vqd,listFocusOutline:eA.xL1,listInactiveFocusOutline:eA.xL1}),pickerGroup:{pickerGroupBorder:(0,eA.n_1)(eA.opG),pickerGroupForeground:(0,eA.n_1)(eA.kJk)}}}};iE=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([quickInputService_param(0,em.TG),quickInputService_param(1,ec.i6),quickInputService_param(2,ed.XE),quickInputService_param(3,ef),quickInputService_param(4,X.Ui)],iE);var iI=i(61080),standaloneQuickInputService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},standaloneQuickInputService_param=function(e,t){return function(i,n){t(i,n,e)}};let iT=class extends iE{constructor(e,t,i,n,o,r){super(t,i,n,new ev(e.getContainerDomNode(),o),r),this.host=void 0;let s=QuickInputEditorContribution.get(e);if(s){let t=s.widget;this.host={_serviceBrand:void 0,get mainContainer(){return t.getDomNode()},getContainer:()=>t.getDomNode(),get containers(){return[t.getDomNode()]},get activeContainer(){return t.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return ea.ju.map(e.onDidLayoutChange,e=>({container:t.getDomNode(),dimension:e}))},get onDidChangeActiveContainer(){return ea.ju.None},get onDidAddContainer(){return ea.ju.None},get whenActiveContainerStylesLoaded(){return Promise.resolve()},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};iT=standaloneQuickInputService_decorate([standaloneQuickInputService_param(1,em.TG),standaloneQuickInputService_param(2,ec.i6),standaloneQuickInputService_param(3,ed.XE),standaloneQuickInputService_param(4,A.$),standaloneQuickInputService_param(5,X.Ui)],iT);let iM=class{get activeService(){let e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){let i=t=this.instantiationService.createInstance(iT,e);this.mapEditorToService.set(e,t),(0,iI.M)(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},i=tz.T.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};iM=standaloneQuickInputService_decorate([standaloneQuickInputService_param(0,em.TG),standaloneQuickInputService_param(1,A.$)],iM);let QuickInputEditorContribution=class QuickInputEditorContribution{static get(e){return e.getContribution(QuickInputEditorContribution.ID)}constructor(e){this.editor=e,this.widget=new QuickInputEditorWidget(this.editor)}dispose(){this.widget.dispose()}};QuickInputEditorContribution.ID="editor.controller.quickInput";let QuickInputEditorWidget=class QuickInputEditorWidget{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return QuickInputEditorWidget.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};QuickInputEditorWidget.ID="editor.contrib.quickInputWidget",(0,R._K)(QuickInputEditorContribution.ID,QuickInputEditorContribution,4);var iR=i(32204),iA=i(63589),accessibilityService_param=function(e,t){return function(i,n){t(i,n,e)}};let iP=class extends E.JT{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ea.Q5,this._onDidChangeReducedMotion=new ea.Q5,this._accessibilityModeEnabledContext=ej.U.bindTo(this._contextKeyService);let updateContextKey=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(updateContextKey(),this._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),updateContextKey(),this._register(this.onDidChangeScreenReaderOptimized(()=>updateContextKey()));let n=N.Ex.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=n.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(n)}initReducedMotionListeners(e){this._register((0,er.nm)(e,"change",()=>{this._systemMotionReduced=e.matches,"auto"===this._configMotionReduced&&this._onDidChangeReducedMotion.fire()}));let updateRootClasses=()=>{let e=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",e),this._layoutService.mainContainer.classList.toggle("enable-motion",!e)};updateRootClasses(),this._register(this.onDidChangeReducedMotion(()=>updateRootClasses()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){let e=this._configMotionReduced;return"on"===e||"auto"===e&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};iP=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([accessibilityService_param(0,ec.i6),accessibilityService_param(1,ef),accessibilityService_param(2,X.Ui)],iP);var iO=i(19263),menuService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},menuService_param=function(e,t){return function(i,n){t(i,n,e)}};let iF=class{constructor(e,t){this._commandService=e,this._hiddenStates=new iB(t)}createMenu(e,t,i){return new iV(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};iF=menuService_decorate([menuService_param(0,e4.H),menuService_param(1,iO.Uy)],iF);let iB=y=class{constructor(e){this._storageService=e,this._disposables=new E.SL,this._onDidChange=new ea.Q5,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{let t=e.get(y._key,0,"{}");this._data=JSON.parse(t)}catch(e){this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,y._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{let t=e.get(y._key,0,"{}");this._data=JSON.parse(t)}catch(e){console.log("FAILED to read storage after UPDATE",e)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var i;return null!==(i=this._hiddenByDefaultCache.get(`${e.id}/${t}`))&&void 0!==i&&i}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var i,n;let o=this._isHiddenByDefault(e,t),r=null!==(n=null===(i=this._data[e.id])||void 0===i?void 0:i.includes(t))&&void 0!==n&&n;return o?!r:r}updateHidden(e,t,i){let n=this._isHiddenByDefault(e,t);n&&(i=!i);let o=this._data[e.id];if(i){if(o){let e=o.indexOf(t);e<0&&o.push(t)}else this._data[e.id]=[t]}else if(o){let i=o.indexOf(t);i>=0&&(0,ep.LS)(o,i),0===o.length&&delete this._data[e.id]}this._persist()}reset(e){if(void 0===e)this._data=Object.create(null),this._persist();else{for(let{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let e=JSON.stringify(this._data);this._storageService.store(y._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};iB._key="menu.hiddenCommands",iB=y=menuService_decorate([menuService_param(0,iO.Uy)],iB);let iW=w=class{constructor(e,t,i,n,o){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=i,this._commandService=n,this._contextKeyService=o,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){let e;this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let t=tN.BH.getMenuItems(this._id);for(let i of(t.sort(w._compareMenuItems),t)){let t=i.group||"";e&&e[0]===t||(e=[t,[]],this._menuGroups.push(e)),e[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(w._fillInKbExprKeys(e.when,this._structureContextKeys),(0,tN.vr)(e)){if(e.command.precondition&&w._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){let t=e.command.toggled.condition||e.command.toggled;w._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&tN.BH.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){let t=[];for(let i of this._menuGroups){let[n,o]=i,r=[];for(let t of o)if(this._contextKeyService.contextMatchesRules(t.when)){let i=(0,tN.vr)(t);i&&this._hiddenStates.setDefaultState(this._id,t.command.id,!!t.isHiddenByDefault);let n=createMenuHide(this._id,i?t.command:t,this._hiddenStates);if(i)r.push(new tN.U8(t.command,t.alt,e,n,this._contextKeyService,this._commandService));else{let i=new w(t.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),o=tD.Z0.join(...i.map(e=>e[1]));o.length>0&&r.push(new tN.NZ(t,n,o))}}r.length>0&&t.push([n,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(let i of e.keys())t.add(i)}static _compareMenuItems(e,t){let i=e.group,n=t.group;if(i!==n){if(!i)return 1;if(!n||"navigation"===i)return -1;if("navigation"===n)return 1;let e=i.localeCompare(n);if(0!==e)return e}let o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:w._compareTitles((0,tN.vr)(e)?e.command.title:e.title,(0,tN.vr)(t)?t.command.title:t.title)}static _compareTitles(e,t){let i="string"==typeof e?e:e.original,n="string"==typeof t?t:t.original;return i.localeCompare(n)}};iW=w=menuService_decorate([menuService_param(3,e4.H),menuService_param(4,ec.i6)],iW);let iV=class{constructor(e,t,i,n,o){this._disposables=new E.SL,this._menuInfo=new iW(e,t,i.emitEventsForSubmenuChanges,n,o);let r=new e8.pY(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(r),this._disposables.add(tN.BH.onDidChangeMenu(t=>{t.has(e)&&r.schedule()}));let s=this._disposables.add(new E.SL);this._onDidChange=new ea.D0({onWillAddFirstListener:()=>{s.add(o.onDidChangeContext(e=>{let t=e.affectsSome(this._menuInfo.structureContextKeys),i=e.affectsSome(this._menuInfo.preconditionContextKeys),n=e.affectsSome(this._menuInfo.toggledContextKeys);(t||i||n)&&this._onDidChange.fire({menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n})})),s.add(t.onDidChange(e=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},onDidRemoveLastListener:s.clear.bind(s),delay:i.eventDebounceDelay,merge:e=>{let t=!1,i=!1,n=!1;for(let o of e)if(t=t||o.isStructuralChange,i=i||o.isEnablementChange,n=n||o.isToggleChange,t&&i&&n)break;return{menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n}}}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function createMenuHide(e,t,i){let n=(0,tN.f6)(t)?t.submenu.id:t.id,o="string"==typeof t.title?t.title:t.title.value,r=(0,tD.xw)({id:`hide/${e.id}/${n}`,label:(0,eS.NC)("hide.label","Hide '{0}'",o),run(){i.updateHidden(e,n,!0)}}),s=(0,tD.xw)({id:`toggle/${e.id}/${n}`,label:o,get checked(){return!i.isHidden(e,n)},run(){i.updateHidden(e,n,!!this.checked)}});return{hide:r,toggle:s,get isHidden(){return!s.checked}}}iV=menuService_decorate([menuService_param(3,e4.H),menuService_param(4,ec.i6)],iV);var clipboardService_param=function(e,t){return function(i,n){t(i,n,e)}};let iH=L=class extends E.JT{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(tI.G6||tI.MG)&&this.installWebKitWriteTextWorkaround(),this._register(ea.ju.runAndSubscribe(er.Xo,({window:e,disposables:t})=>{t.add((0,er.nm)(e.document,"copy",()=>this.clearResources()))},{window:N.Ex,disposables:this._store}))}installWebKitWriteTextWorkaround(){let handler=()=>{let e=new e8.CR;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch(async t=>{t instanceof Error&&"NotAllowedError"===t.name&&e.isRejected||this.logService.error(t)})};this._register(ea.ju.runAndSubscribe(this.layoutService.onDidAddContainer,({container:e,disposables:t})=>{t.add((0,er.nm)(e,"click",handler)),t.add((0,er.nm)(e,"keydown",handler))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.writeResources([]),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await navigator.clipboard.writeText(e)}catch(e){console.error(e)}this.fallbackWriteText(e)}fallbackWriteText(e){let t=(0,er.uP)(),i=t.activeElement,n=t.body.appendChild((0,er.$)("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),i instanceof HTMLElement&&i.focus(),t.body.removeChild(n)}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await navigator.clipboard.readText()}catch(e){console.error(e)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async writeResources(e){0===e.length?this.clearResources():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){let e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(0===this.resources.length)return;let e=await this.readText();return(0,t1.vp)(e.substring(0,L.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};iH.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,iH=L=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([clipboardService_param(0,ef),clipboardService_param(1,eN.VZ)],iH);var iz=i(19695),iU=i(50885),iK=i(74286);let ij="data-keybinding-context";let Context=class Context{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){let t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}};let NullContext=class NullContext extends Context{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};NullContext.INSTANCE=new NullContext;let ConfigAwareContextValuesContainer=class ConfigAwareContextValuesContainer extends Context{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=iK.Id.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(e=>{if(7===e.source){let e=Array.from(this._values,([e])=>e);this._values.clear(),i.fire(new ArrayContextKeyChangeEvent(e))}else{let t=[];for(let i of e.affectedKeys){let e=`config.${i}`,n=this._values.findSuperstr(e);void 0!==n&&(t.push(...iU.$.map(n,([e])=>e)),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}i.fire(new ArrayContextKeyChangeEvent(t))}})}dispose(){this._listener.dispose()}getValue(e){let t;if(0!==e.indexOf(ConfigAwareContextValuesContainer._keyPrefix))return super.getValue(e);if(this._values.has(e))return this._values.get(e);let i=e.substr(ConfigAwareContextValuesContainer._keyPrefix.length),n=this._configurationService.getValue(i);switch(typeof n){case"number":case"boolean":case"string":t=n;break;default:t=Array.isArray(n)?JSON.stringify(n):n}return this._values.set(e,t),t}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};ConfigAwareContextValuesContainer._keyPrefix="config.";let ContextKey=class ContextKey{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}};let SimpleContextKeyChangeEvent=class SimpleContextKeyChangeEvent{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}};let ArrayContextKeyChangeEvent=class ArrayContextKeyChangeEvent{constructor(e){this.keys=e}affectsSome(e){for(let t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}};let CompositeContextKeyChangeEvent=class CompositeContextKeyChangeEvent{constructor(e){this.events=e}affectsSome(e){for(let t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}};function allEventKeysInContext(e,t){return e.allKeysContainedIn(new Set(Object.keys(t)))}let AbstractContextKeyService=class AbstractContextKeyService extends E.JT{constructor(e){super(),this._onDidChangeContext=this._register(new ea.K3({merge:e=>new CompositeContextKeyChangeEvent(e)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new ContextKey(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new ScopedContextKeyService(this,e)}contextMatchesRules(e){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");let t=this.getContextValuesContainer(this._myContextId),i=!e||e.evaluate(t);return i}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;let i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(e))}removeContext(e){!this._isDisposed&&this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(e))}getContext(e){return this._isDisposed?NullContext.INSTANCE:this.getContextValuesContainer(findContextAttr(e))}dispose(){super.dispose(),this._isDisposed=!0}};let iq=class extends AbstractContextKeyService{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;let t=this._register(new ConfigAwareContextValuesContainer(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?NullContext.INSTANCE:this._contexts.get(e)||NullContext.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new Context(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};iq=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(c=X.Ui,function(e,t){c(e,t,0)})],iq);let ScopedContextKeyService=class ScopedContextKeyService extends AbstractContextKeyService{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new E.XK),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(ij)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${e?": "+e:""}`)}this._domNode.setAttribute(ij,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{let t=this._parent.getContextValuesContainer(this._myContextId),i=t.value;allEventKeysInContext(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(ij),super.dispose())}getContextValuesContainer(e){return this._isDisposed?NullContext.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}};function findContextAttr(e){for(;e;){if(e.hasAttribute(ij)){let t=e.getAttribute(ij);if(t)return parseInt(t,10);return NaN}e=e.parentElement}return 0}function setContext(e,t,i){let n=e.get(ec.i6);n.createKey(String(t),stringifyURIs(i))}function stringifyURIs(e){return(0,P.rs)(e,e=>"object"==typeof e&&1===e.$mid?T.o.revive(e).toString():e instanceof T.o?e.toString():void 0)}e4.P.registerCommand("_setContext",setContext),e4.P.registerCommand({id:"getContextKeyInfo",handler:()=>[...ec.uy.all()].sort((e,t)=>e.key.localeCompare(t.key)),metadata:{description:(0,eS.NC)("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),e4.P.registerCommand("_generateContextKeyInfo",function(){let e=[],t=new Set;for(let i of ec.uy.all())t.has(i.key)||(t.add(i.key),e.push(i));e.sort((e,t)=>e.key.localeCompare(t.key)),console.log(JSON.stringify(e,void 0,2))});var i$=i(57561);let Node=class Node{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};let Graph=class Graph{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){let i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){let t=this._hashFn(e);for(let e of(this._nodes.delete(t),this._nodes.values()))e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),i=this._nodes.get(t);return i||(i=new Node(t,e),this._nodes.set(t,i)),i}isEmpty(){return 0===this._nodes.size}toString(){let e=[];for(let[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join("\n")}findCycleSlow(){for(let[e,t]of this._nodes){let i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(let[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);let e=this._findCycle(n,t);if(e)return e;t.delete(i)}}};var iG=i(3488);let CyclicDependencyError=class CyclicDependencyError extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!==(t=e.findCycleSlow())&&void 0!==t?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}};let InstantiationService=class InstantiationService{constructor(e=new iG.y,t=!1,i,n=!1){var o;this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._activeInstantiations=new Set,this._services.set(em.TG,this),this._globalGraph=n?null!==(o=null==i?void 0:i._globalGraph)&&void 0!==o?o:new Graph(e=>e):void 0}createChild(e){return new InstantiationService(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){let i=Trace.traceInvocation(this._enableTracing,e),n=!1;try{return e({get:e=>{if(n)throw(0,eC.L6)("service accessor is only valid during the invocation of its target method");let t=this._getOrCreateServiceInstance(e,i);if(!t)throw Error(`[invokeFunction] unknown service '${e}'`);return t}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return e instanceof i$.M?(i=Trace.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=Trace.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){let n=em.I8.getServiceDependencies(e).sort((e,t)=>e.index-t.index),o=[];for(let t of n){let n=this._getOrCreateServiceInstance(t.id,i);n||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`,!1),o.push(n)}let r=n.length>0?n[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);let i=r-t.length;t=i>0?t.concat(Array(i)):t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setServiceInstance(e,t){if(this._services.get(e) instanceof i$.M)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let i=this._getServiceInstanceOrDescriptor(e);return i instanceof i$.M?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var n;let o=new Graph(e=>e.id.toString()),r=0,s=[{id:e,desc:t,_trace:i}];for(;s.length;){let t=s.pop();if(o.lookupOrInsertNode(t),r++>1e3)throw new CyclicDependencyError(o);for(let i of em.I8.getServiceDependencies(t.desc.ctor)){let r=this._getServiceInstanceOrDescriptor(i.id);if(r||this._throwIfStrict(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`,!0),null===(n=this._globalGraph)||void 0===n||n.insertEdge(String(t.id),String(i.id)),r instanceof i$.M){let e={id:i.id,desc:r,_trace:t._trace.branch(i.id,!0)};o.insertEdge(t,e),s.push(e)}}}for(;;){let e=o.roots();if(0===e.length){if(!o.isEmpty())throw new CyclicDependencyError(o);break}for(let{data:t}of e){let e=this._getServiceInstanceOrDescriptor(t.id);if(e instanceof i$.M){let e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}o.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,o){if(this._services.get(e) instanceof i$.M)return this._createServiceInstance(e,t,i,n,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,o);throw Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,o){if(!n)return this._createInstance(t,i,o);{let n=new InstantiationService(void 0,this._strict,this,this._enableTracing);n._globalGraphImplicitDependency=String(e);let r=new Map,s=new e8.R5(()=>{let e=n._createInstance(t,i,o);for(let[t,i]of r){let n=e[t];if("function"==typeof n)for(let t of i)t.disposable=n.apply(e,t.listener)}return r.clear(),e});return new Proxy(Object.create(null),{get(e,t){if(!s.isInitialized&&"string"==typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=r.get(t);return e||(e=new el.S,r.set(t,e)),(i,n,o)=>{if(s.isInitialized)return s.value[t](i,n,o);{let t={listener:[i,n,o],disposable:void 0},r=e.push(t),s=(0,E.OF)(()=>{var e;r(),null===(e=t.disposable)||void 0===e||e.dispose()});return s}}}if(t in e)return e[t];let i=s.value,n=i[t];return"function"!=typeof n||(n=n.bind(i),e[t]=n),n},set:(e,t,i)=>(s.value[t]=i,!0),getPrototypeOf:e=>t.prototype})}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw Error(e)}};let Trace=class Trace{static traceInvocation(e,t){return e?new Trace(2,t.name||Error().stack.split("\n").slice(3,4).join("\n")):Trace._None}static traceCreation(e,t){return e?new Trace(1,t.name):Trace._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){let i=new Trace(3,e.toString());return this._dep.push([e,t,i]),i}stop(){let e=Date.now()-this._start;Trace._totals+=e;let t=!1;function printChild(e,i){let n=[],o=Array(e+1).join("	");for(let[r,s,l]of i._dep)if(s&&l){t=!0,n.push(`${o}CREATES -> ${r}`);let i=printChild(e+1,l);i&&n.push(i)}else n.push(`${o}uses -> ${r}`);return n.join("\n")}let i=[`${1===this.type?"CREATE":"CALL"} ${this.name}`,`${printChild(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Trace._totals.toFixed(2)}ms)`];(e>2||t)&&Trace.all.add(i.join("\n"))}};Trace.all=new Set,Trace._None=new class extends Trace{constructor(){super(0,null)}stop(){}branch(){return this}},Trace._totals=0;let iQ=new Set([es.lg.inMemory,es.lg.vscodeSourceControl,es.lg.walkThrough,es.lg.walkThroughSnippet]);let DoubleResourceMap=class DoubleResourceMap{constructor(){this._byResource=new e3.Y9,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let o=this._byOwner.get(t);o||(o=new e3.Y9,this._byOwner.set(t,o)),o.set(e,i)}get(e,t){let i=this._byResource.get(e);return null==i?void 0:i.get(t)}delete(e,t){let i=!1,n=!1,o=this._byResource.get(e);o&&(i=o.delete(t));let r=this._byOwner.get(t);if(r&&(n=r.delete(e)),i!==n)throw Error("illegal state");return i&&n}values(e){var t,i,n,o;return"string"==typeof e?null!==(i=null===(t=this._byOwner.get(e))||void 0===t?void 0:t.values())&&void 0!==i?i:iU.$.empty():T.o.isUri(e)?null!==(o=null===(n=this._byResource.get(e))||void 0===n?void 0:n.values())&&void 0!==o?o:iU.$.empty():iU.$.map(iU.$.concat(...this._byOwner.values()),e=>e[1])}};let MarkerStats=class MarkerStats{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new e3.Y9,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(let t of e){let e=this._data.get(t);e&&this._substract(e);let i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){let t={errors:0,warnings:0,infos:0,unknowns:0};if(iQ.has(e.scheme))return t;for(let{severity:i}of this._service.read({resource:e}))i===tG.ZL.Error?t.errors+=1:i===tG.ZL.Warning?t.warnings+=1:i===tG.ZL.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}};let MarkerService=class MarkerService{constructor(){this._onMarkerChanged=new ea.D0({delay:0,merge:MarkerService._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new DoubleResourceMap,this._stats=new MarkerStats(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(let i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if((0,ep.XY)(i)){let i=this._data.delete(t,e);i&&this._onMarkerChanged.fire([t])}else{let n=[];for(let o of i){let i=MarkerService._toMarker(e,t,o);i&&n.push(i)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:o,message:r,source:s,startLineNumber:l,startColumn:d,endLineNumber:c,endColumn:u,relatedInformation:g,tags:m}=i;if(r)return d=d>0?d:1,c=c>=(l=l>0?l:1)?c:l,u=u>0?u:d,{resource:t,owner:e,code:n,severity:o,message:r,source:s,startLineNumber:l,startColumn:d,endLineNumber:c,endColumn:u,relatedInformation:g,tags:m}}changeAll(e,t){let i=[],n=this._data.values(e);if(n)for(let t of n){let n=iU.$.first(t);n&&(i.push(n.resource),this._data.delete(n.resource,e))}if((0,ep.Of)(t)){let n=new e3.Y9;for(let{resource:o,marker:r}of t){let t=MarkerService._toMarker(e,o,r);if(!t)continue;let s=n.get(o);s?s.push(t):(n.set(o,[t]),i.push(o))}for(let[t,i]of n)this._data.set(t,e,i)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:o}=e;if((!o||o<0)&&(o=-1),t&&i){let e=this._data.get(i,t);if(!e)return[];{let t=[];for(let i of e)if(MarkerService._accept(i,n)){let e=t.push(i);if(o>0&&e===o)break}return t}}if(t||i){let e=this._data.values(null!=i?i:t),r=[];for(let t of e)for(let e of t)if(MarkerService._accept(e,n)){let t=r.push(e);if(o>0&&t===o)return r}return r}{let e=[];for(let t of this._data.values())for(let i of t)if(MarkerService._accept(i,n)){let t=e.push(i);if(o>0&&t===o)return e}return e}}static _accept(e,t){return void 0===t||(t&e.severity)===e.severity}static _merge(e){let t=new e3.Y9;for(let i of e)for(let e of i)t.set(e,!0);return Array.from(t.keys())}};let DefaultConfiguration=class DefaultConfiguration extends E.JT{constructor(){super(...arguments),this._configurationModel=new ConfigurationModel}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new ConfigurationModel;let e=e9.B.as(e7.IP.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){let i=this.getConfigurationDefaultOverrides();for(let n of e){let e=i[n],o=t[n];void 0!==e?this._configurationModel.addValue(n,e):o?this._configurationModel.addValue(n,o.default):this._configurationModel.removeValue(n)}}};var iZ=i(54316);let LogService=class LogService extends E.JT{constructor(e,t=[]){super(),this.logger=new eN.qA([e,...t]),this._register(e.onDidChangeLogLevel(e=>this.setLevel(e)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}};var iY=i(97238),iJ=i(77680),standaloneServices_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},standaloneServices_param=function(e,t){return function(i,n){t(i,n,e)}};let SimpleModel=class SimpleModel{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new ea.Q5}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}};let iX=class{constructor(e){this.modelService=e}createModelReference(e){let t=this.modelService.getModel(e);return t?Promise.resolve(new E.Jz(new SimpleModel(t))):Promise.reject(Error("Model not found"))}};iX=standaloneServices_decorate([standaloneServices_param(0,q.q)],iX);let StandaloneEditorProgressService=class StandaloneEditorProgressService{show(){return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};StandaloneEditorProgressService.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let StandaloneProgressService=class StandaloneProgressService{withProgress(e,t,i){return t({report:()=>{}})}};let StandaloneEnvironmentService=class StandaloneEnvironmentService{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}};let StandaloneDialogService=class StandaloneDialogService{async confirm(e){let t=this.doConfirm(e.message,e.detail);return{confirmed:t,checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+"\n\n"+t),N.Ex.confirm(i)}async prompt(e){var t,i;let n;let o=this.doConfirm(e.message,e.detail);if(o){let o=[...null!==(t=e.buttons)&&void 0!==t?t:[]];e.cancelButton&&"string"!=typeof e.cancelButton&&"boolean"!=typeof e.cancelButton&&o.push(e.cancelButton),n=await (null===(i=o[0])||void 0===i?void 0:i.run({checkboxChecked:!1}))}return{result:n}}async error(e,t){await this.prompt({type:eb.Z.Error,message:e,detail:t})}};let StandaloneNotificationService=class StandaloneNotificationService{info(e){return this.notify({severity:eb.Z.Info,message:e})}warn(e){return this.notify({severity:eb.Z.Warning,message:e})}error(e){return this.notify({severity:eb.Z.Error,message:e})}notify(e){switch(e.severity){case eb.Z.Error:console.error(e.message);break;case eb.Z.Warning:console.warn(e.message);break;default:console.log(e.message)}return StandaloneNotificationService.NO_OP}prompt(e,t,i,n){return StandaloneNotificationService.NO_OP}status(e,t){return E.JT.None}};StandaloneNotificationService.NO_OP=new ew.EO;let i0=class{constructor(e){this._onWillExecuteCommand=new ea.Q5,this._onDidExecuteCommand=new ea.Q5,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){let i=e4.P.getCommand(e);if(!i)return Promise.reject(Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});let n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(e){return Promise.reject(e)}}};i0=standaloneServices_decorate([standaloneServices_param(0,em.TG)],i0);let i1=class extends AbstractKeybindingService{constructor(e,t,i,n,o,r){super(e,t,i,n,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];let addContainer=e=>{let t=new E.SL;t.add(er.nm(e,er.tw.KEY_DOWN,e=>{let t=new eG.y(e),i=this._dispatch(t,t.target);i&&(t.preventDefault(),t.stopPropagation())})),t.add(er.nm(e,er.tw.KEY_UP,e=>{let t=new eG.y(e),i=this._singleModifierDispatch(t,t.target);i&&t.preventDefault()})),this._domNodeListeners.push(new DomNodeListeners(e,t))},removeContainer=e=>{for(let t=0;t<this._domNodeListeners.length;t++){let i=this._domNodeListeners[t];i.domNode===e&&(this._domNodeListeners.splice(t,1),i.dispose())}},addCodeEditor=e=>{e.getOption(61)||addContainer(e.getContainerDomNode())};this._register(r.onCodeEditorAdd(addCodeEditor)),this._register(r.onCodeEditorRemove(e=>{e.getOption(61)||removeContainer(e.getContainerDomNode())})),r.listCodeEditors().forEach(addCodeEditor);let addDiffEditor=e=>{addContainer(e.getContainerDomNode())};this._register(r.onDiffEditorAdd(addDiffEditor)),this._register(r.onDiffEditorRemove(e=>{removeContainer(e.getContainerDomNode())})),r.listDiffEditors().forEach(addDiffEditor)}addDynamicKeybinding(e,t,i,n){return(0,E.F8)(e4.P.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){let t=e.map(e=>{var t;let i=(0,eZ.Z9)(e.keybinding,eK.OS);return{keybinding:i,command:null!==(t=e.command)&&void 0!==t?t:null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),(0,E.OF)(()=>{for(let e=0;e<this._dynamicKeybindings.length;e++)if(this._dynamicKeybindings[e]===t[0]){this._dynamicKeybindings.splice(e,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){let e=this._toNormalizedKeybindingItems(to.W.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new KeybindingResolver(e,t,e=>this._log(e))}return this._cachedResolver}_documentHasFocus(){return N.Ex.document.hasFocus()}_toNormalizedKeybindingItems(e,t){let i=[],n=0;for(let o of e){let e=o.when||void 0,r=o.keybinding;if(r){let s=USLayoutResolvedKeybinding.resolveKeybinding(r,eK.OS);for(let r of s)i[n++]=new ResolvedKeybindingItem(r,o.command,o.commandArgs,e,t,null,!1)}else i[n++]=new ResolvedKeybindingItem(void 0,o.command,o.commandArgs,e,t,null,!1)}return i}resolveKeyboardEvent(e){let t=new eZ.$M(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new USLayoutResolvedKeybinding([t],eK.OS)}};i1=standaloneServices_decorate([standaloneServices_param(0,ec.i6),standaloneServices_param(1,e4.H),standaloneServices_param(2,td.b),standaloneServices_param(3,ew.lT),standaloneServices_param(4,eN.VZ),standaloneServices_param(5,A.$)],i1);let DomNodeListeners=class DomNodeListeners extends E.JT{constructor(e,t){super(),this.domNode=e,this._register(t)}};function isConfigurationOverrides(e){return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof T.o)}let StandaloneConfigurationService=class StandaloneConfigurationService{constructor(){this._onDidChangeConfiguration=new ea.Q5,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;let e=new DefaultConfiguration;this._configuration=new Configuration(e.reload(),new ConfigurationModel,new ConfigurationModel,new ConfigurationModel),e.dispose()}getValue(e,t){let i="string"==typeof e?e:void 0,n=isConfigurationOverrides(e)?e:isConfigurationOverrides(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){let t={data:this._configuration.toData()},i=[];for(let t of e){let[e,n]=t;this.getValue(e)!==n&&(this._configuration.updateValue(e,n),i.push(e))}if(i.length>0){let e=new ConfigurationChangeEvent({keys:i,overrides:[]},t,this._configuration);e.source=8,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};let i2=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new ea.Q5,this.configurationService.onDidChangeConfiguration(e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,i)=>e.affectsConfiguration(i)})})}getValue(e,t,i){let n=e0.L.isIPosition(t)?t:null,o=n?"string"==typeof i?i:void 0:"string"==typeof t?t:void 0,r=e?this.getLanguage(e,n):void 0;return void 0===o?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(o,{resource:e,overrideIdentifier:r})}getLanguage(e,t){let i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};i2=standaloneServices_decorate([standaloneServices_param(0,X.Ui),standaloneServices_param(1,q.q),standaloneServices_param(2,H.O)],i2);let i5=class{constructor(e){this.configurationService=e}getEOL(e,t){let i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&"string"==typeof i&&"auto"!==i?i:eK.IJ||eK.dz?"\n":"\r\n"}};i5=standaloneServices_decorate([standaloneServices_param(0,X.Ui)],i5);let StandaloneTelemetryService=class StandaloneTelemetryService{publicLog2(){}};let StandaloneWorkspaceContextService=class StandaloneWorkspaceContextService{constructor(){let e=T.o.from({scheme:StandaloneWorkspaceContextService.SCHEME,authority:"model",path:"/"});this.workspace={id:th.p$,folders:[new th.md({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===StandaloneWorkspaceContextService.SCHEME?this.workspace.folders[0]:null}};function updateConfigurationService(e,t,i){if(!t||!(e instanceof StandaloneConfigurationService))return;let n=[];Object.keys(t).forEach(e=>{(0,eJ.ei)(e)&&n.push([`editor.${e}`,t[e]]),i&&(0,eJ.Pe)(e)&&n.push([`diffEditor.${e}`,t[e]])}),n.length>0&&e.updateValues(n)}StandaloneWorkspaceContextService.SCHEME="inmemory";let i4=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){let i=Array.isArray(e)?e:eY.fo.convert(e),n=new Map;for(let e of i){if(!(e instanceof eY.Gl))throw Error("bad edit - only text edits are supported");let t=this._modelService.getModel(e.resource);if(!t)throw Error("bad edit - model not found");if("number"==typeof e.versionId&&t.getVersionId()!==e.versionId)throw Error("bad state - model changed in the meantime");let i=n.get(t);i||(i=[],n.set(t,i)),i.push(eX.h.replaceMove(e1.e.lift(e.textEdit.range),e.textEdit.text))}let o=0,r=0;for(let[e,t]of n)e.pushStackElement(),e.pushEditOperations([],t,()=>[]),e.pushStackElement(),r+=1,o+=t.length;return{ariaSummary:I.WU(tc.iN.bulkEditServiceSummary,o,r),isApplied:o>0}}};i4=standaloneServices_decorate([standaloneServices_param(0,q.q)],i4);let StandaloneUriLabelService=class StandaloneUriLabelService{getUriLabel(e,t){return"file"===e.scheme?e.fsPath:e.path}getUriBasenameLabel(e){return(0,tu.EZ)(e)}};let i3=class extends t_{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){let e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(t=e.getContainerDomNode())}return super.showContextView(e,t,i)}};i3=standaloneServices_decorate([standaloneServices_param(0,ef),standaloneServices_param(1,A.$)],i3);let StandaloneWorkspaceTrustManagementService=class StandaloneWorkspaceTrustManagementService{constructor(){this._neverEmitter=new ea.Q5,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}};let StandaloneLanguageService=class StandaloneLanguageService extends LanguageService{constructor(){super()}};let StandaloneLogService=class StandaloneLogService extends LogService{constructor(){super(new eN.kw)}};let i6=class extends tH{constructor(e,t,i,n,o,r){super(e,t,i,n,o,r),this.configure({blockMouse:!1})}};i6=standaloneServices_decorate([standaloneServices_param(0,td.b),standaloneServices_param(1,ew.lT),standaloneServices_param(2,eF.u),standaloneServices_param(3,eB.d),standaloneServices_param(4,tN.co),standaloneServices_param(5,ec.i6)],i6);let StandaloneAccessbilitySignalService=class StandaloneAccessbilitySignalService{async playSignal(e,t){}};(0,eu.z)(X.Ui,StandaloneConfigurationService,0),(0,eu.z)(e5.V,i2,0),(0,eu.z)(e5.y,i5,0),(0,eu.z)(th.ec,StandaloneWorkspaceContextService,0),(0,eu.z)(ta.e,StandaloneUriLabelService,0),(0,eu.z)(td.b,StandaloneTelemetryService,0),(0,eu.z)(ey.S,StandaloneDialogService,0),(0,eu.z)(iJ.Y,StandaloneEnvironmentService,0),(0,eu.z)(ew.lT,StandaloneNotificationService,0),(0,eu.z)(tG.lT,MarkerService,0),(0,eu.z)(H.O,StandaloneLanguageService,0),(0,eu.z)(iA.Z,iR.nI,0),(0,eu.z)(eN.VZ,StandaloneLogService,0),(0,eu.z)(q.q,t4,0),(0,eu.z)(tJ.i,tY,0),(0,eu.z)(ec.i6,iq,0),(0,eu.z)(tl.R9,StandaloneProgressService,0),(0,eu.z)(tl.ek,StandaloneEditorProgressService,0),(0,eu.z)(iO.Uy,iO.vm,0),(0,eu.z)(t$.p,O.eu,0),(0,eu.z)(eY.vu,i4,0),(0,eu.z)(tg.Y,StandaloneWorkspaceTrustManagementService,0),(0,eu.z)(e2.S,iX,0),(0,eu.z)(ej.F,iP,0),(0,eu.z)(t3.Lw,t3.XN,0),(0,eu.z)(e4.H,i0,0),(0,eu.z)(eB.d,i1,0),(0,eu.z)(t7.eJ,iM,0),(0,eu.z)(eF.u,i3,0),(0,eu.z)(eH.v,tq,0),(0,eu.z)(iz.p,iH,0),(0,eu.z)(eF.i,i6,0),(0,eu.z)(tN.co,iF,0),(0,eu.z)(iZ.IV,StandaloneAccessbilitySignalService,0),function(e){let t=new iG.y;for(let[e,i]of(0,eu.d)())t.set(e,i);let i=new InstantiationService(t,!0);function get(e){n||initialize({});let o=t.get(e);if(!o)throw Error("Missing service "+e);return o instanceof i$.M?i.invokeFunction(t=>t.get(e)):o}t.set(em.TG,i),e.get=get;let n=!1,o=new ea.Q5;function initialize(e){if(n)return i;for(let[e,i]of(n=!0,(0,eu.d)()))t.get(e)||t.set(e,i);for(let i in e)if(e.hasOwnProperty(i)){let n=(0,em.yh)(i),o=t.get(n);o instanceof i$.M&&t.set(n,e[i])}let r=(0,iY.n)();for(let e of r)try{i.createInstance(e)}catch(e){(0,eC.dL)(e)}return o.fire(),i}function withServices(e){if(n)return e();let t=new E.SL,i=t.add(o.event(()=>{i.dispose(),t.add(e())}));return t}e.initialize=initialize,e.withServices=withServices}(k||(k={}));var i7=i(73800),i9=i(41273),standaloneCodeEditor_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},standaloneCodeEditor_param=function(e,t){return function(i,n){t(i,n,e)}};let i8=0,ne=!1;function createAriaDomNode(e){if(!e){if(ne)return;ne=!0}ei.wW(e||N.Ex.document.body)}let nt=class extends en.Gm{constructor(e,t,i,n,o,r,s,l,d,c,u,g){let m={...t};m.ariaLabel=m.ariaLabel||tc.B8.editorViewAccessibleLabel,m.ariaLabel=m.ariaLabel+";"+tc.B8.accessibilityHelpMessage,super(e,m,{},i,n,o,r,l,d,c,u,g),s instanceof i1?this._standaloneKeybindingService=s:this._standaloneKeybindingService=null,createAriaDomNode(m.ariaContainerElement),(0,i9.r)((e,t)=>i.createInstance(eO,e,t,{}))}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let n="DYNAMIC_"+ ++i8,o=ec.Ao.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,o),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if("string"!=typeof e.id||"string"!=typeof e.label||"function"!=typeof e.run)throw Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),E.JT.None;let t=e.id,i=e.label,n=ec.Ao.and(ec.Ao.equals("editorId",this.getId()),ec.Ao.deserialize(e.precondition)),o=e.keybindings,r=ec.Ao.and(n,ec.Ao.deserialize(e.keybindingContext)),s=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,run=(t,...i)=>Promise.resolve(e.run(this,...i)),d=new E.SL,c=this.getId()+":"+t;if(d.add(e4.P.registerCommand(c,run)),s&&d.add(tN.BH.appendMenuItem(tN.eH.EditorContext,{command:{id:c,title:i},when:n,group:s,order:l})),Array.isArray(o))for(let e of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(c,e,run,r));let u=new eo.p(c,i,i,void 0,n,(...t)=>Promise.resolve(e.run(this,...t)),this._contextKeyService);return this._actions.set(t,u),d.add((0,E.OF)(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof eg)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};nt=standaloneCodeEditor_decorate([standaloneCodeEditor_param(2,em.TG),standaloneCodeEditor_param(3,A.$),standaloneCodeEditor_param(4,e4.H),standaloneCodeEditor_param(5,ec.i6),standaloneCodeEditor_param(6,eB.d),standaloneCodeEditor_param(7,ed.XE),standaloneCodeEditor_param(8,ew.lT),standaloneCodeEditor_param(9,ej.F),standaloneCodeEditor_param(10,z.c_),standaloneCodeEditor_param(11,eR.p)],nt);let ni=class extends nt{constructor(e,t,i,n,o,r,s,l,d,c,u,g,m,f,_){let v;let C={...t};updateConfigurationService(c,C,!1);let b=l.registerEditorContainer(e);"string"==typeof C.theme&&l.setTheme(C.theme),void 0!==C.autoDetectHighContrast&&l.setAutoDetectHighContrast(!!C.autoDetectHighContrast);let S=C.model;if(delete C.model,super(e,C,i,n,o,r,s,l,d,u,f,_),this._configurationService=c,this._standaloneThemeService=l,this._register(b),void 0===S){let e=m.getLanguageIdByMimeType(C.language)||C.language||U.bd;v=createTextModel(g,m,C.value||"",e,void 0),this._ownsModel=!0}else v=S,this._ownsModel=!1;if(this._attachModel(v),v){let e={oldModelUrl:null,newModelUrl:v.uri};this._onDidChangeModel.fire(e)}}dispose(){super.dispose()}updateOptions(e){updateConfigurationService(this._configurationService,e,!1),"string"==typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),void 0!==e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};ni=standaloneCodeEditor_decorate([standaloneCodeEditor_param(2,em.TG),standaloneCodeEditor_param(3,A.$),standaloneCodeEditor_param(4,e4.H),standaloneCodeEditor_param(5,ec.i6),standaloneCodeEditor_param(6,eB.d),standaloneCodeEditor_param(7,iA.Z),standaloneCodeEditor_param(8,ew.lT),standaloneCodeEditor_param(9,X.Ui),standaloneCodeEditor_param(10,ej.F),standaloneCodeEditor_param(11,q.q),standaloneCodeEditor_param(12,H.O),standaloneCodeEditor_param(13,z.c_),standaloneCodeEditor_param(14,eR.p)],ni);let nn=class extends i7.p{constructor(e,t,i,n,o,r,s,l,d,c,u,g){let m={...t};updateConfigurationService(l,m,!0);let f=r.registerEditorContainer(e);"string"==typeof m.theme&&r.setTheme(m.theme),void 0!==m.autoDetectHighContrast&&r.setAutoDetectHighContrast(!!m.autoDetectHighContrast),super(e,m,{},n,i,o,g,c),this._configurationService=l,this._standaloneThemeService=r,this._register(f)}dispose(){super.dispose()}updateOptions(e){updateConfigurationService(this._configurationService,e,!0),"string"==typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),void 0!==e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(nt,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};function createTextModel(e,t,i,n,o){if(i=i||"",!n){let n=i.indexOf("\n"),r=i;return -1!==n&&(r=i.substring(0,n)),doCreateModel(e,i,t.createByFilepathOrFirstLine(o||null,r),o)}return doCreateModel(e,i,t.createById(n),o)}function doCreateModel(e,t,i,n){return e.createModel(t,i,n)}nn=standaloneCodeEditor_decorate([standaloneCodeEditor_param(2,em.TG),standaloneCodeEditor_param(3,ec.i6),standaloneCodeEditor_param(4,A.$),standaloneCodeEditor_param(5,iA.Z),standaloneCodeEditor_param(6,ew.lT),standaloneCodeEditor_param(7,X.Ui),standaloneCodeEditor_param(8,eF.i),standaloneCodeEditor_param(9,tl.ek),standaloneCodeEditor_param(10,iz.p),standaloneCodeEditor_param(11,iZ.IV)],nn);var no=i(98557),nr=i(98051),ns=i(34850),na=i(1877),nl=i(31108);i(42001);var nd=i(84761),nh=i(45841),nc=i(97240),nu=i(19950);let ActionRunnerWithContext=class ActionRunnerWithContext extends tD.Wi{constructor(e){super(),this._getContext=e}runAction(e,t){return super.runAction(e,this._getContext())}};let TemplateData=class TemplateData{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}};let ng=class extends E.JT{constructor(e,t,i,n){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=(0,na.uh)(this,void 0),this._collapsed=(0,no.nK)(this,e=>{var t;return null===(t=this._viewModel.read(e))||void 0===t?void 0:t.collapsed.read(e)}),this._editorContentHeight=(0,na.uh)(this,500),this.contentHeight=(0,no.nK)(this,e=>{let t=this._collapsed.read(e)?0:this._editorContentHeight.read(e);return t+this._outerEditorHeight}),this._modifiedContentWidth=(0,na.uh)(this,0),this._modifiedWidth=(0,na.uh)(this,0),this._originalContentWidth=(0,na.uh)(this,0),this._originalWidth=(0,na.uh)(this,0),this.maxScroll=(0,no.nK)(this,e=>{let t=this._modifiedContentWidth.read(e)-this._modifiedWidth.read(e),i=this._originalContentWidth.read(e)-this._originalWidth.read(e);return t>i?{maxScroll:t,width:this._modifiedWidth.read(e)}:{maxScroll:i,width:this._originalWidth.read(e)}}),this._elements=(0,er.h)("div.multiDiffEntry",[(0,er.h)("div.header@header",[(0,er.h)("div.header-content",[(0,er.h)("div.collapse-button@collapseButton"),(0,er.h)("div.file-path",[(0,er.h)("div.title.modified.show-file-icons@primaryPath",[]),(0,er.h)("div.status.deleted@status",["R"]),(0,er.h)("div.title.original.show-file-icons@secondaryPath",[])]),(0,er.h)("div.actions@actions")])]),(0,er.h)("div.editorParent",[(0,er.h)("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(i7.p,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=isFocused(this.editor.getModifiedEditor()),this.isOriginalFocused=isFocused(this.editor.getOriginalEditor()),this.isFocused=(0,no.nK)(this,e=>this.isModifedFocused.read(e)||this.isOriginalFocused.read(e)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new E.SL,this._headerHeight=48,this._lastScrollTop=-1,this._isSettingScrollTop=!1;let o=new iC.z(this._elements.collapseButton,{});this._register((0,no.EH)(e=>{o.element.className="",o.icon=this._collapsed.read(e)?tP.l.chevronRight:tP.l.chevronDown})),this._register(o.onDidClick(()=>{var e;null===(e=this._viewModel.get())||void 0===e||e.collapsed.set(!this._collapsed.get(),void 0)})),this._register((0,no.EH)(e=>{this._elements.editor.style.display=this._collapsed.read(e)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(e=>{let t=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(t,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(e=>{let t=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(t,void 0)})),this._register(this.editor.onDidContentSizeChange(e=>{(0,na.Bl)(t=>{this._editorContentHeight.set(e.contentHeight,t),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),t),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),t)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(e=>{if(this._isSettingScrollTop||!e.scrollTopChanged||!this._data)return;let t=e.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(t)})),this._register((0,no.EH)(e=>{let t=this.isFocused.read(e);this._elements.root.classList.toggle("focused",t)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(nu.r,this._elements.actions,tN.eH.MultiDiffEditorFileToolbar,{actionRunner:this._register(new ActionRunnerWithContext(()=>{var e;return null===(e=this._viewModel.get())||void 0===e?void 0:e.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("navigation")},actionViewItemProvider:(e,t)=>(0,tx.Id)(n,e,t)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){function updateOptions(e){return{...e,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}this._data=e;let t=e.viewModel.entry.value;t.onOptionsDidChange&&this._dataStore.add(t.onOptionsDidChange(()=>{var e;this.editor.updateOptions(updateOptions(null!==(e=t.options)&&void 0!==e?e:{}))})),(0,na.Bl)(i=>{var n,o,r,s;null===(n=this._resourceLabel)||void 0===n||n.setUri(null!==(o=e.viewModel.modifiedUri)&&void 0!==o?o:e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});let l=!1,d=!1,c=!1,u="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(u="R",l=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(u="A",c=!0):(u="D",d=!0),this._elements.status.classList.toggle("renamed",l),this._elements.status.classList.toggle("deleted",d),this._elements.status.classList.toggle("added",c),this._elements.status.innerText=u,null===(r=this._resourceLabel2)||void 0===r||r.setUri(l?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,i),this.editor.setModel(e.viewModel.diffEditorViewModel,i),this.editor.updateOptions(updateOptions(null!==(s=t.options)&&void 0!==s?s:{}))})}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";let o=e.length-this._headerHeight,r=Math.max(0,Math.min(n.start-e.start,o));this._elements.header.style.transform=`translateY(${r}px)`,(0,na.Bl)(i=>{this.editor.layout({width:t-16-2,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===o)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};function isFocused(e){return(0,no.rD)(t=>{let i=new E.SL;return i.add(e.onDidFocusEditorWidget(()=>t(!0))),i.add(e.onDidBlurEditorWidget(()=>t(!1))),i},()=>e.hasWidgetFocus())}ng=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(u=em.TG,function(e,t){u(e,t,3)})],ng);let ObjectPool=class ObjectPool{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){var t;let i;if(0===this._unused.size)i=this._create(e),this._itemData.set(i,e);else{let n=[...this._unused.values()];i=null!==(t=n.find(t=>this._itemData.get(t).getId()===e.getId()))&&void 0!==t?t:n[0],this._unused.delete(i),this._itemData.set(i,e),i.setData(e)}return this._used.add(i),{object:i,dispose:()=>{this._used.delete(i),this._unused.size>5?i.dispose():this._unused.add(i)}}}dispose(){for(let e of this._used)e.dispose();for(let e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}};var multiDiffEditorWidgetImpl_param=function(e,t){return function(i,n){t(i,n,e)}};let np=class extends E.JT{constructor(e,t,i,n,o,r){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=o,this._parentInstantiationService=r,this._elements=(0,er.h)("div.monaco-component.multiDiffEditor",[(0,er.h)("div@content",{style:{overflow:"hidden"}}),(0,er.h)("div.monaco-editor@overflowWidgetsDomNode",{})]),this._sizeObserver=this._register(new nr.DU(this._element,void 0)),this._objectPool=this._register(new ObjectPool(e=>{let t=this._instantiationService.createInstance(ng,this._elements.content,this._elements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return t.setData(e),t})),this._scrollable=this._register(new nl.Rm({forceIntegerValues:!1,scheduleAtNextAnimationFrame:e=>(0,er.jL)((0,er.Jj)(this._element),e),smoothScrollDuration:100})),this._scrollableElement=this._register(new tA.$Z(this._elements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this.scrollTop=(0,no.rD)(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=(0,no.rD)(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItems=(0,no.Be)(this,(e,t)=>{let i=this._viewModel.read(e);if(!i)return[];let n=i.items.read(e);return n.map(e=>{var i;let n=t.add(new VirtualizedViewItem(e,this._objectPool,this.scrollLeft,e=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+e})})),o=null===(i=this._lastDocStates)||void 0===i?void 0:i[n.getKey()];return o&&(0,na.PS)(e=>{n.setViewState(o,e)}),n})}),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(e,t)=>e.reduce((e,i)=>e+i.contentHeight.read(t)+this._spaceBetweenPx,0)),this.activeDiffItem=(0,no.nK)(this,e=>this._viewItems.read(e).find(t=>{var i;return null===(i=t.template.read(e))||void 0===i?void 0:i.isFocused.read(e)})),this.lastActiveDiffItem=(0,no.bx)((e,t)=>{var i;return null!==(i=this.activeDiffItem.read(e))&&void 0!==i?i:t}),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._parentInstantiationService.createChild(new iG.y([ec.i6,this._contextKeyService])),this._lastDocStates={},this._contextKeyService.createKey(nc.u.inMultiDiffEditor.key,!0),this._register((0,no.gp)((e,t)=>{let i=this._viewModel.read(e);if(i&&i.contextKeys)for(let[e,n]of Object.entries(i.contextKeys)){let i=this._contextKeyService.createKey(e,void 0);i.set(n),t.add((0,E.OF)(()=>i.reset()))}}));let s=this._parentContextKeyService.createKey(nc.u.multiDiffEditorAllCollapsed.key,!1);this._register((0,no.EH)(e=>{let t=this._viewModel.read(e);if(t){let i=t.items.read(e).every(t=>t.collapsed.read(e));s.set(i)}})),this._register((0,no.EH)(e=>{let t=this.lastActiveDiffItem.read(e);(0,na.PS)(i=>{var n;null===(n=this._viewModel.read(e))||void 0===n||n.activeDiffItem.set(null==t?void 0:t.viewModel,i)})})),this._register((0,no.EH)(e=>{let t=this._dimension.read(e);this._sizeObserver.observe(t)})),this._elements.content.style.position="relative",this._register((0,no.EH)(e=>{let t=this._sizeObserver.height.read(e);this._elements.root.style.height=`${t}px`;let i=this._totalHeight.read(e);this._elements.content.style.height=`${i}px`;let n=this._sizeObserver.width.read(e),o=n,r=this._viewItems.read(e),s=(0,ns.dI)(r,t=>t.maxScroll.read(e).maxScroll);if(s){let t=s.maxScroll.read(e);o=n+t.maxScroll}this._scrollableElement.setScrollDimensions({width:n,height:t,scrollHeight:i,scrollWidth:o})})),e.replaceChildren(this._scrollableElement.getDomNode()),this._register((0,E.OF)(()=>{e.replaceChildren()})),this._register(this._register((0,no.EH)(e=>{(0,na.Bl)(t=>{this.render(e)})})))}render(e){let t=this.scrollTop.read(e),i=0,n=0,o=0,r=this._sizeObserver.height.read(e),s=nd.q.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(let d of this._viewItems.read(e)){let c=d.contentHeight.read(e),u=Math.min(c,r),g=nd.q.ofStartAndLength(n,u),m=nd.q.ofStartAndLength(o,c);if(m.isBefore(s))i-=c-u,d.hide();else if(m.isAfter(s))d.hide();else{let e=Math.max(0,Math.min(s.start-m.start,c-u));i-=e;let n=nd.q.ofStartAndLength(t+i,r);d.render(g,e,l,n)}n+=u+this._spaceBetweenPx,o+=c+this._spaceBetweenPx}this._elements.content.style.transform=`translateY(${-(t+i)}px)`}};np=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([multiDiffEditorWidgetImpl_param(4,ec.i6),multiDiffEditorWidgetImpl_param(5,em.TG)],np);let VirtualizedViewItem=class VirtualizedViewItem extends E.JT{constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register((0,na.DN)(this,void 0)),this.contentHeight=(0,no.nK)(this,e=>{var t,i,n;return null!==(n=null===(i=null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object.contentHeight)||void 0===i?void 0:i.read(e))&&void 0!==n?n:this.viewModel.lastTemplateData.read(e).contentHeight}),this.maxScroll=(0,no.nK)(this,e=>{var t,i;return null!==(i=null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object.maxScroll.read(e))&&void 0!==i?i:{maxScroll:0,scrollWidth:0}}),this.template=(0,no.nK)(this,e=>{var t;return null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object}),this._isHidden=(0,no.uh)(this,!1),this._register((0,no.EH)(e=>{var t;let i=this._scrollLeft.read(e);null===(t=this._templateRef.read(e))||void 0===t||t.object.setScrollLeft(i)})),this._register((0,no.EH)(e=>{let t=this._templateRef.read(e);if(!t)return;let i=this._isHidden.read(e);if(!i)return;let n=t.object.isFocused.read(e);n||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${null===(e=this.viewModel.entry.value.modified)||void 0===e?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var i;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);let n=this.viewModel.lastTemplateData.get(),o=null===(i=e.selections)||void 0===i?void 0:i.map(nh.Y.liftSelection);this.viewModel.lastTemplateData.set({...n,selections:o},t);let r=this._templateRef.get();r&&o&&r.object.editor.setSelections(o)}_updateTemplateData(e){var t;let i=this._templateRef.get();i&&this.viewModel.lastTemplateData.set({contentHeight:i.object.contentHeight.get(),selections:null!==(t=i.object.editor.getSelections())&&void 0!==t?t:void 0},e)}_clear(){let e=this._templateRef.get();e&&(0,na.PS)(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let o=this._templateRef.get();if(!o){o=this._objectPool.getUnusedObj(new TemplateData(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(o,void 0);let e=this.viewModel.lastTemplateData.get().selections;e&&o.object.editor.setSelections(e)}o.object.render(e,i,t,n)}};(0,eA.P6G)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,eS.NC)("multiDiffEditor.headerBackground","The background color of the diff editor's header")),(0,eA.P6G)("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},(0,eS.NC)("multiDiffEditor.background","The background color of the multi file diff editor")),(0,eA.P6G)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,eS.NC)("multiDiffEditor.border","The border color of the multi file diff editor"));let nm=class extends E.JT{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=(0,no.uh)(this,void 0),this._viewModel=(0,no.uh)(this,void 0),this._widgetImpl=(0,no.Be)(this,(e,t)=>((0,nr.NW)(ng,e),t.add(this._instantiationService.createInstance((0,nr.NW)(np,e),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register((0,no.jx)(this._widgetImpl))}};function create(e,t,i){let n=k.initialize(i||{});return n.createInstance(ni,e,t)}function onDidCreateEditor(e){let t=k.get(A.$);return t.onCodeEditorAdd(t=>{e(t)})}function onDidCreateDiffEditor(e){let t=k.get(A.$);return t.onDiffEditorAdd(t=>{e(t)})}function getEditors(){let e=k.get(A.$);return e.listCodeEditors()}function getDiffEditors(){let e=k.get(A.$);return e.listDiffEditors()}function createDiffEditor(e,t,i){let n=k.initialize(i||{});return n.createInstance(nn,e,t)}function createMultiFileDiffEditor(e,t){let i=k.initialize(t||{});return new nm(e,{},i)}function addCommand(e){if("string"!=typeof e.id||"function"!=typeof e.run)throw Error("Invalid command descriptor, `id` and `run` are required properties!");return e4.P.registerCommand(e.id,e.run)}function addEditorAction(e){if("string"!=typeof e.id||"string"!=typeof e.label||"function"!=typeof e.run)throw Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");let t=ec.Ao.deserialize(e.precondition),i=new E.SL;if(i.add(e4.P.registerCommand(e.id,(i,...n)=>R._l.runEditorCommand(i,n,t,(t,i,n)=>Promise.resolve(e.run(i,...n))))),e.contextMenuGroupId){let n={command:{id:e.id,title:e.label},when:t,group:e.contextMenuGroupId,order:e.contextMenuOrder||0};i.add(tN.BH.appendMenuItem(tN.eH.EditorContext,n))}if(Array.isArray(e.keybindings)){let n=k.get(eB.d);if(n instanceof i1){let o=ec.Ao.and(t,ec.Ao.deserialize(e.keybindingContext));i.add(n.addDynamicKeybindings(e.keybindings.map(t=>({keybinding:t,command:e.id,when:o}))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return i}function addKeybindingRule(e){return addKeybindingRules([e])}function addKeybindingRules(e){let t=k.get(eB.d);return t instanceof i1?t.addDynamicKeybindings(e.map(e=>({keybinding:e.keybinding,command:e.command,commandArgs:e.commandArgs,when:ec.Ao.deserialize(e.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),E.JT.None)}function createModel(e,t,i){let n=k.get(H.O),o=n.getLanguageIdByMimeType(t)||t;return createTextModel(k.get(q.q),n,e,o,i)}function setModelLanguage(e,t){let i=k.get(H.O),n=i.getLanguageIdByMimeType(t)||t||U.bd;e.setLanguage(i.createById(n))}function setModelMarkers(e,t,i){if(e){let n=k.get(tG.lT);n.changeOne(t,e.uri,i)}}function removeAllMarkers(e){let t=k.get(tG.lT);t.changeAll(e,[])}function getModelMarkers(e){let t=k.get(tG.lT);return t.read(e)}function onDidChangeMarkers(e){let t=k.get(tG.lT);return t.onMarkerChanged(e)}function getModel(e){let t=k.get(q.q);return t.getModel(e)}function getModels(){let e=k.get(q.q);return e.getModels()}function onDidCreateModel(e){let t=k.get(q.q);return t.onModelAdded(e)}function onWillDisposeModel(e){let t=k.get(q.q);return t.onModelRemoved(e)}function onDidChangeModelLanguage(e){let t=k.get(q.q);return t.onModelLanguageChanged(t=>{e({model:t.model,oldLanguage:t.oldLanguageId})})}function standaloneEditor_createWebWorker(e){return createWebWorker(k.get(q.q),k.get(z.c_),e)}function colorizeElement(e,t){let i=k.get(H.O),n=k.get(iA.Z);return Colorizer.colorizeElement(n,i,e,t).then(()=>{n.registerEditorContainer(e)})}function colorize(e,t,i){let n=k.get(H.O),o=k.get(iA.Z);return o.registerEditorContainer(N.Ex.document.body),Colorizer.colorize(n,e,t,i)}function colorizeModelLine(e,t,i=4){let n=k.get(iA.Z);return n.registerEditorContainer(N.Ex.document.body),Colorizer.colorizeModelLine(e,t,i)}function getSafeTokenizationSupport(e){let t=V.RW.get(e);return t||{getInitialState:()=>K.TJ,tokenize:(t,i,n)=>(0,K.Ri)(e,n)}}function tokenize(e,t){V.RW.getOrCreate(t);let i=getSafeTokenizationSupport(t),n=(0,I.uq)(e),o=[],r=i.getInitialState();for(let e=0,t=n.length;e<t;e++){let t=n[e],s=i.tokenize(t,!0,r);o[e]=s.tokens,r=s.endState}return o}function defineTheme(e,t){let i=k.get(iA.Z);i.defineTheme(e,t)}function setTheme(e){let t=k.get(iA.Z);t.setTheme(e)}function remeasureFonts(){M.g.clearAllFontInfos()}function registerCommand(e,t){return e4.P.registerCommand({id:e,handler:t})}function registerLinkOpener(e){let t=k.get(eH.v);return t.registerOpener({open:async t=>("string"==typeof t&&(t=T.o.parse(t)),e.open(t))})}function registerEditorOpener(e){let t=k.get(A.$);return t.registerCodeEditorOpenHandler(async(t,i,n)=>{var o;let r;if(!i)return null;let s=null===(o=t.options)||void 0===o?void 0:o.selection;return(s&&"number"==typeof s.endLineNumber&&"number"==typeof s.endColumn?r=s:s&&(r={lineNumber:s.startLineNumber,column:s.startColumn}),await e.openCodeEditor(i,t.resource,r))?i:null})}function createMonacoEditorAPI(){return{create:create,getEditors:getEditors,getDiffEditors:getDiffEditors,onDidCreateEditor:onDidCreateEditor,onDidCreateDiffEditor:onDidCreateDiffEditor,createDiffEditor:createDiffEditor,addCommand:addCommand,addEditorAction:addEditorAction,addKeybindingRule:addKeybindingRule,addKeybindingRules:addKeybindingRules,createModel:createModel,setModelLanguage:setModelLanguage,setModelMarkers:setModelMarkers,getModelMarkers:getModelMarkers,removeAllMarkers:removeAllMarkers,onDidChangeMarkers:onDidChangeMarkers,getModels:getModels,getModel:getModel,onDidCreateModel:onDidCreateModel,onWillDisposeModel:onWillDisposeModel,onDidChangeModelLanguage:onDidChangeModelLanguage,createWebWorker:standaloneEditor_createWebWorker,colorizeElement:colorizeElement,colorize:colorize,colorizeModelLine:colorizeModelLine,tokenize:tokenize,defineTheme:defineTheme,setTheme:setTheme,remeasureFonts:remeasureFonts,registerCommand:registerCommand,registerLinkOpener:registerLinkOpener,registerEditorOpener:registerEditorOpener,AccessibilitySupport:G.ao,ContentWidgetPositionPreference:G.r3,CursorChangeReason:G.Vi,DefaultEndOfLine:G._x,EditorAutoIndentStrategy:G.rf,EditorOption:G.wT,EndOfLinePreference:G.gm,EndOfLineSequence:G.jl,MinimapPosition:G.F5,MouseTargetType:G.MG,OverlayWidgetPositionPreference:G.E$,OverviewRulerLane:G.sh,GlyphMarginLane:G.U,RenderLineNumbersType:G.Lu,RenderMinimap:G.vQ,ScrollbarVisibility:G.g_,ScrollType:G.g4,TextEditorCursorBlinkingStyle:G.In,TextEditorCursorStyle:G.d2,TrackedRangeStickiness:G.OI,WrappingIndent:G.up,InjectedTextCursorStops:G.RM,PositionAffinity:G.py,ShowLightbulbIconMode:G.$r,ConfigurationChangedEvent:D.Bb,BareFontInfo:B.E4,FontInfo:B.pR,TextModelResolvedOptions:j.dJ,FindMatch:j.tk,ApplyUpdateResult:D.rk,EditorZoom:F.C,createMultiFileDiffEditor:createMultiFileDiffEditor,EditorType:W.g,EditorOptions:D.BH}}nm=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(g=em.TG,function(e,t){g(e,t,2)})],nm);var nf=i(50164);function isArrayOf(e,t){if(!t||!Array.isArray(t))return!1;for(let i of t)if(!e(i))return!1;return!0}function bool(e,t){return"boolean"==typeof e?e:t}function string(e,t){return"string"==typeof e?e:t}function arrayToHash(e){let t={};for(let i of e)t[i]=!0;return t}function createKeywordMatcher(e,t=!1){t&&(e=e.map(function(e){return e.toLowerCase()}));let i=arrayToHash(e);return t?function(e){return void 0!==i[e.toLowerCase()]&&i.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==i[e]&&i.hasOwnProperty(e)}}function compileRegExp(e,t){let i;t=t.replace(/@@/g,`\x01`);let n=0;do i=!1,t=t.replace(/@(\w+)/g,function(n,o){i=!0;let r="";if("string"==typeof e[o])r=e[o];else if(e[o]&&e[o]instanceof RegExp)r=e[o].source;else{if(void 0===e[o])throw createError(e,"language definition does not contain attribute '"+o+"', used at: "+t);throw createError(e,"attribute reference '"+o+"' must be a string, used at: "+t)}return r?"(?:"+r+")":""}),n++;while(i&&n<5);t=t.replace(/\x01/g,"@");let o=(e.ignoreCase?"i":"")+(e.unicode?"u":"");return new RegExp(t,o)}function selectScrutinee(e,t,i,n){if(n<0)return e;if(n<t.length)return t[n];if(n>=100){n-=100;let e=i.split(".");if(e.unshift(i),n<e.length)return e[n]}return null}function createGuard(e,t,i,n){let o,r=-1,s=i,l=i.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);l&&(l[3]&&(r=parseInt(l[3]),l[2]&&(r+=100)),s=l[4]);let d="~",c=s;if(s&&0!==s.length?/^\w*$/.test(c)?d="==":(l=s.match(/^(@|!@|~|!~|==|!=)(.*)$/))&&(d=l[1],c=l[2]):(d="!=",c=""),("~"===d||"!~"===d)&&/^(\w|\|)*$/.test(c)){let t=createKeywordMatcher(c.split("|"),e.ignoreCase);o=function(e){return"~"===d?t(e):!t(e)}}else if("@"===d||"!@"===d){let i=e[c];if(!i)throw createError(e,"the @ match target '"+c+"' is not defined, in rule: "+t);if(!isArrayOf(function(e){return"string"==typeof e},i))throw createError(e,"the @ match target '"+c+"' must be an array of strings, in rule: "+t);let n=createKeywordMatcher(i,e.ignoreCase);o=function(e){return"@"===d?n(e):!n(e)}}else if("~"===d||"!~"===d){if(0>c.indexOf("$")){let t=compileRegExp(e,"^"+c+"$");o=function(e){return"~"===d?t.test(e):!t.test(e)}}else o=function(t,i,n,o){let r=compileRegExp(e,"^"+substituteMatches(e,c,i,n,o)+"$");return r.test(t)}}else if(0>c.indexOf("$")){let t=fixCase(e,c);o=function(e){return"=="===d?e===t:e!==t}}else{let t=fixCase(e,c);o=function(i,n,o,r,s){let l=substituteMatches(e,t,n,o,r);return"=="===d?i===l:i!==l}}return -1===r?{name:i,value:n,test:function(e,t,i,n){return o(e,e,t,i,n)}}:{name:i,value:n,test:function(e,t,i,n){let s=selectScrutinee(e,t,i,r);return o(s||"",e,t,i,n)}}}function compileAction(e,t,i){if(!i)return{token:""};if("string"==typeof i)return i;if(i.token||""===i.token){if("string"!=typeof i.token)throw createError(e,"a 'token' attribute must be of type string, in rule: "+t);{let n={token:i.token};if(i.token.indexOf("$")>=0&&(n.tokenSubst=!0),"string"==typeof i.bracket){if("@open"===i.bracket)n.bracket=1;else if("@close"===i.bracket)n.bracket=-1;else throw createError(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t)}if(i.next){if("string"!=typeof i.next)throw createError(e,"the next state must be a string value in rule: "+t);{let o=i.next;if(!/^(@pop|@push|@popall)$/.test(o)&&("@"===o[0]&&(o=o.substr(1)),0>o.indexOf("$")&&!stateExists(e,substituteMatches(e,o,"",[],""))))throw createError(e,"the next state '"+i.next+"' is not defined in rule: "+t);n.next=o}}return"number"==typeof i.goBack&&(n.goBack=i.goBack),"string"==typeof i.switchTo&&(n.switchTo=i.switchTo),"string"==typeof i.log&&(n.log=i.log),"string"==typeof i.nextEmbedded&&(n.nextEmbedded=i.nextEmbedded,e.usesEmbedded=!0),n}}if(Array.isArray(i)){let n=[];for(let o=0,r=i.length;o<r;o++)n[o]=compileAction(e,t,i[o]);return{group:n}}if(i.cases){let n=[];for(let o in i.cases)if(i.cases.hasOwnProperty(o)){let r=compileAction(e,t,i.cases[o]);"@default"===o||"@"===o||""===o?n.push({test:void 0,value:r,name:o}):"@eos"===o?n.push({test:function(e,t,i,n){return n},value:r,name:o}):n.push(createGuard(e,t,o,r))}let o=e.defaultToken;return{test:function(e,t,i,r){for(let o of n){let n=!o.test||o.test(e,t,i,r);if(n)return o.value}return o}}}throw createError(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t)}let Rule=class Rule{constructor(e){this.regex=RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if("string"==typeof t)i=t;else if(t instanceof RegExp)i=t.source;else throw createError(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&"^"===i[0],this.name=this.name+": "+i,this.regex=compileRegExp(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")}setAction(e,t){this.action=compileAction(e,this.name,t)}};function compile(e,t){if(!t||"object"!=typeof t)throw Error("Monarch: expecting a language definition object");let i={};function addRules(e,n,o){for(let r of o){let o=r.include;if(o){if("string"!=typeof o)throw createError(i,"an 'include' attribute must be a string at: "+e);if("@"===o[0]&&(o=o.substr(1)),!t.tokenizer[o])throw createError(i,"include target '"+o+"' is not defined at: "+e);addRules(e+"."+o,n,t.tokenizer[o])}else{let o=new Rule(e);if(Array.isArray(r)&&r.length>=1&&r.length<=3){if(o.setRegex(t,r[0]),r.length>=3){if("string"==typeof r[1])o.setAction(t,{token:r[1],next:r[2]});else if("object"==typeof r[1]){let e=r[1];e.next=r[2],o.setAction(t,e)}else throw createError(i,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+e)}else o.setAction(t,r[1])}else{if(!r.regex)throw createError(i,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+e);r.name&&"string"==typeof r.name&&(o.name=r.name),r.matchOnlyAtStart&&(o.matchOnlyAtLineStart=bool(r.matchOnlyAtLineStart,!1)),o.setRegex(t,r.regex),o.setAction(t,r.action)}n.push(o)}}}if(i.languageId=e,i.includeLF=bool(t.includeLF,!1),i.noThrow=!1,i.maxStack=100,i.start="string"==typeof t.start?t.start:null,i.ignoreCase=bool(t.ignoreCase,!1),i.unicode=bool(t.unicode,!1),i.tokenPostfix=string(t.tokenPostfix,"."+i.languageId),i.defaultToken=string(t.defaultToken,"source"),i.usesEmbedded=!1,t.languageId=e,t.includeLF=i.includeLF,t.ignoreCase=i.ignoreCase,t.unicode=i.unicode,t.noThrow=i.noThrow,t.usesEmbedded=i.usesEmbedded,t.stateNames=t.tokenizer,t.defaultToken=i.defaultToken,!t.tokenizer||"object"!=typeof t.tokenizer)throw createError(i,"a language definition must define the 'tokenizer' attribute as an object");for(let e in i.tokenizer=[],t.tokenizer)if(t.tokenizer.hasOwnProperty(e)){i.start||(i.start=e);let n=t.tokenizer[e];i.tokenizer[e]=[],addRules("tokenizer."+e,i.tokenizer[e],n)}if(i.usesEmbedded=t.usesEmbedded,t.brackets){if(!Array.isArray(t.brackets))throw createError(i,"the 'brackets' attribute must be defined as an array")}else t.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let n=[];for(let e of t.brackets){let t=e;if(t&&Array.isArray(t)&&3===t.length&&(t={token:t[2],open:t[0],close:t[1]}),t.open===t.close)throw createError(i,"open and close brackets in a 'brackets' attribute must be different: "+t.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if("string"==typeof t.open&&"string"==typeof t.token&&"string"==typeof t.close)n.push({token:t.token+i.tokenPostfix,open:fixCase(i,t.open),close:fixCase(i,t.close)});else throw createError(i,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return i.brackets=n,i.noThrow=!0,i}function register(e){U.dQ.registerLanguage(e)}function getLanguages(){return[].concat(U.dQ.getLanguages())}function getEncodedLanguageId(e){let t=k.get(H.O);return t.languageIdCodec.encodeLanguageId(e)}function onLanguage(e,t){return k.withServices(()=>{let i=k.get(H.O),n=i.onDidRequestRichLanguageFeatures(i=>{i===e&&(n.dispose(),t())});return n})}function onLanguageEncountered(e,t){return k.withServices(()=>{let i=k.get(H.O),n=i.onDidRequestBasicLanguageFeatures(i=>{i===e&&(n.dispose(),t())});return n})}function setLanguageConfiguration(e,t){let i=k.get(H.O);if(!i.isRegisteredLanguageId(e))throw Error(`Cannot set configuration for unknown language ${e}`);let n=k.get(z.c_);return n.register(e,t,100)}let EncodedTokenizationSupportAdapter=class EncodedTokenizationSupportAdapter{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if("function"==typeof this._actual.tokenize)return TokenizationSupportAdapter.adaptTokenize(this._languageId,this._actual,e,i);throw Error("Not supported!")}tokenizeEncoded(e,t,i){let n=this._actual.tokenizeEncoded(e,i);return new V.DI(n.tokens,n.endState)}};let TokenizationSupportAdapter=class TokenizationSupportAdapter{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){let i=[],n=0;for(let o=0,r=e.length;o<r;o++){let r=e[o],s=r.startIndex;0===o?s=0:s<n&&(s=n),i[o]=new V.WU(s,r.scopes,t),n=s}return i}static adaptTokenize(e,t,i,n){let o;let r=t.tokenize(i,n),s=TokenizationSupportAdapter._toClassicTokens(r.tokens,e);return o=r.endState.equals(n)?n:r.endState,new V.hG(s,o)}tokenize(e,t,i){return TokenizationSupportAdapter.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){let i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,o=[],r=0,s=0;for(let e=0,l=t.length;e<l;e++){let l=t[e],d=1024|n.match(i,l.scopes);if(r>0&&o[r-1]===d)continue;let c=l.startIndex;0===e?c=0:c<s&&(c=s),o[r++]=c,o[r++]=d,s=c}let l=new Uint32Array(r);for(let e=0;e<r;e++)l[e]=o[e];return l}tokenizeEncoded(e,t,i){let n;let o=this._actual.tokenize(e,i),r=this._toBinaryTokens(this._languageService.languageIdCodec,o.tokens);return n=o.endState.equals(i)?i:o.endState,new V.DI(r,n)}};function isATokensProvider(e){return"function"==typeof e.getInitialState}function isEncodedTokensProvider(e){return"tokenizeEncoded"in e}function isThenable(e){return e&&"function"==typeof e.then}function setColorMap(e){let t=k.get(iA.Z);if(e){let i=[null];for(let t=1,n=e.length;t<n;t++)i[t]=nf.Il.fromHex(e[t]);t.setColorMapOverride(i)}else t.setColorMapOverride(null)}function createTokenizationSupportAdapter(e,t){return isEncodedTokensProvider(t)?new EncodedTokenizationSupportAdapter(e,t):new TokenizationSupportAdapter(e,t,k.get(H.O),k.get(iA.Z))}function registerTokensProviderFactory(e,t){let i=new V.MO(async()=>{let i=await Promise.resolve(t.create());return i?isATokensProvider(i)?createTokenizationSupportAdapter(e,i):new ee(k.get(H.O),k.get(iA.Z),e,compile(e,i),k.get(X.Ui)):null});return V.RW.registerFactory(e,i)}function setTokensProvider(e,t){let i=k.get(H.O);if(!i.isRegisteredLanguageId(e))throw Error(`Cannot set tokens provider for unknown language ${e}`);return isThenable(t)?registerTokensProviderFactory(e,{create:()=>t}):V.RW.register(e,createTokenizationSupportAdapter(e,t))}function setMonarchTokensProvider(e,t){return isThenable(t)?registerTokensProviderFactory(e,{create:()=>t}):V.RW.register(e,new ee(k.get(H.O),k.get(iA.Z),e,compile(e,t),k.get(X.Ui)))}function registerReferenceProvider(e,t){let i=k.get(eR.p);return i.referenceProvider.register(e,t)}function registerRenameProvider(e,t){let i=k.get(eR.p);return i.renameProvider.register(e,t)}function registerNewSymbolNameProvider(e,t){let i=k.get(eR.p);return i.newSymbolNamesProvider.register(e,t)}function registerSignatureHelpProvider(e,t){let i=k.get(eR.p);return i.signatureHelpProvider.register(e,t)}function registerHoverProvider(e,t){let i=k.get(eR.p);return i.hoverProvider.register(e,{provideHover:(e,i,n)=>{let o=e.getWordAtPosition(i);return Promise.resolve(t.provideHover(e,i,n)).then(e=>{if(e)return!e.range&&o&&(e.range=new e1.e(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn)),e.range||(e.range=new e1.e(i.lineNumber,i.column,i.lineNumber,i.column)),e})}})}function registerDocumentSymbolProvider(e,t){let i=k.get(eR.p);return i.documentSymbolProvider.register(e,t)}function registerDocumentHighlightProvider(e,t){let i=k.get(eR.p);return i.documentHighlightProvider.register(e,t)}function registerLinkedEditingRangeProvider(e,t){let i=k.get(eR.p);return i.linkedEditingRangeProvider.register(e,t)}function registerDefinitionProvider(e,t){let i=k.get(eR.p);return i.definitionProvider.register(e,t)}function registerImplementationProvider(e,t){let i=k.get(eR.p);return i.implementationProvider.register(e,t)}function registerTypeDefinitionProvider(e,t){let i=k.get(eR.p);return i.typeDefinitionProvider.register(e,t)}function registerCodeLensProvider(e,t){let i=k.get(eR.p);return i.codeLensProvider.register(e,t)}function registerCodeActionProvider(e,t,i){let n=k.get(eR.p);return n.codeActionProvider.register(e,{providedCodeActionKinds:null==i?void 0:i.providedCodeActionKinds,documentation:null==i?void 0:i.documentation,provideCodeActions:(e,i,n,o)=>{let r=k.get(tG.lT),s=r.read({resource:e.uri}).filter(e=>e1.e.areIntersectingOrTouching(e,i));return t.provideCodeActions(e,i,{markers:s,only:n.only,trigger:n.trigger},o)},resolveCodeAction:t.resolveCodeAction})}function registerDocumentFormattingEditProvider(e,t){let i=k.get(eR.p);return i.documentFormattingEditProvider.register(e,t)}function registerDocumentRangeFormattingEditProvider(e,t){let i=k.get(eR.p);return i.documentRangeFormattingEditProvider.register(e,t)}function registerOnTypeFormattingEditProvider(e,t){let i=k.get(eR.p);return i.onTypeFormattingEditProvider.register(e,t)}function registerLinkProvider(e,t){let i=k.get(eR.p);return i.linkProvider.register(e,t)}function registerCompletionItemProvider(e,t){let i=k.get(eR.p);return i.completionProvider.register(e,t)}function registerColorProvider(e,t){let i=k.get(eR.p);return i.colorProvider.register(e,t)}function registerFoldingRangeProvider(e,t){let i=k.get(eR.p);return i.foldingRangeProvider.register(e,t)}function registerDeclarationProvider(e,t){let i=k.get(eR.p);return i.declarationProvider.register(e,t)}function registerSelectionRangeProvider(e,t){let i=k.get(eR.p);return i.selectionRangeProvider.register(e,t)}function registerDocumentSemanticTokensProvider(e,t){let i=k.get(eR.p);return i.documentSemanticTokensProvider.register(e,t)}function registerDocumentRangeSemanticTokensProvider(e,t){let i=k.get(eR.p);return i.documentRangeSemanticTokensProvider.register(e,t)}function registerInlineCompletionsProvider(e,t){let i=k.get(eR.p);return i.inlineCompletionsProvider.register(e,t)}function registerInlineEditProvider(e,t){let i=k.get(eR.p);return i.inlineEditProvider.register(e,t)}function registerInlayHintsProvider(e,t){let i=k.get(eR.p);return i.inlayHintsProvider.register(e,t)}function createMonacoLanguagesAPI(){return{register:register,getLanguages:getLanguages,onLanguage:onLanguage,onLanguageEncountered:onLanguageEncountered,getEncodedLanguageId:getEncodedLanguageId,setLanguageConfiguration:setLanguageConfiguration,setColorMap:setColorMap,registerTokensProviderFactory:registerTokensProviderFactory,setTokensProvider:setTokensProvider,setMonarchTokensProvider:setMonarchTokensProvider,registerReferenceProvider:registerReferenceProvider,registerRenameProvider:registerRenameProvider,registerNewSymbolNameProvider:registerNewSymbolNameProvider,registerCompletionItemProvider:registerCompletionItemProvider,registerSignatureHelpProvider:registerSignatureHelpProvider,registerHoverProvider:registerHoverProvider,registerDocumentSymbolProvider:registerDocumentSymbolProvider,registerDocumentHighlightProvider:registerDocumentHighlightProvider,registerLinkedEditingRangeProvider:registerLinkedEditingRangeProvider,registerDefinitionProvider:registerDefinitionProvider,registerImplementationProvider:registerImplementationProvider,registerTypeDefinitionProvider:registerTypeDefinitionProvider,registerCodeLensProvider:registerCodeLensProvider,registerCodeActionProvider:registerCodeActionProvider,registerDocumentFormattingEditProvider:registerDocumentFormattingEditProvider,registerDocumentRangeFormattingEditProvider:registerDocumentRangeFormattingEditProvider,registerOnTypeFormattingEditProvider:registerOnTypeFormattingEditProvider,registerLinkProvider:registerLinkProvider,registerColorProvider:registerColorProvider,registerFoldingRangeProvider:registerFoldingRangeProvider,registerDeclarationProvider:registerDeclarationProvider,registerSelectionRangeProvider:registerSelectionRangeProvider,registerDocumentSemanticTokensProvider:registerDocumentSemanticTokensProvider,registerDocumentRangeSemanticTokensProvider:registerDocumentRangeSemanticTokensProvider,registerInlineCompletionsProvider:registerInlineCompletionsProvider,registerInlineEditProvider:registerInlineEditProvider,registerInlayHintsProvider:registerInlayHintsProvider,DocumentHighlightKind:G.MY,CompletionItemKind:G.cm,CompletionItemTag:G.we,CompletionItemInsertTextRule:G.a7,SymbolKind:G.cR,SymbolTag:G.r4,IndentAction:G.wU,CompletionTriggerKind:G.Ij,SignatureHelpTriggerKind:G.WW,InlayHintKind:G.gl,InlineCompletionTriggerKind:G.bw,InlineEditTriggerKind:G.rn,CodeActionTriggerType:G.np,NewSymbolNameTag:G.w,FoldingRangeKind:V.AD,SelectedSuggestionInfo:V.ln}}var n_=i(15934);D.BH.wrappingIndent.defaultValue=0,D.BH.glyphMargin.defaultValue=!1,D.BH.autoIndent.defaultValue=3,D.BH.overviewRulerLanes.defaultValue=2,n_.xC.setFormatterSelector((e,t,i)=>Promise.resolve(e[0]));let nv=(0,x.O)();nv.editor=createMonacoEditorAPI(),nv.languages=createMonacoLanguagesAPI();let nC=nv.CancellationTokenSource,nb=nv.Emitter,nS=nv.KeyCode,ny=nv.KeyMod,nw=nv.Position,nL=nv.Range,nk=nv.Selection,nD=nv.SelectionDirection,nx=nv.MarkerSeverity,nN=nv.MarkerTag,nE=nv.Uri,nI=nv.Token,nT=nv.editor,nM=nv.languages,nR=globalThis.MonacoEnvironment;((null==nR?void 0:nR.globalAPI)||"function"==typeof define&&i.amdO)&&(globalThis.monaco=nv),void 0!==globalThis.require&&"function"==typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},32204:function(e,t,i){"use strict";i.d(t,{kR:function(){return E},MU:function(){return I},nI:function(){return StandaloneThemeService},rW:function(){return N},TG:function(){return x}});var n=i(70687),o=i(1215),r=i(50164),s=i(57605),l=i(7530),d=i(91957);let ParsedTokenThemeRule=class ParsedTokenThemeRule{constructor(e,t,i,n,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=o}};function parseTokenTheme(e){if(!e||!Array.isArray(e))return[];let t=[],i=0;for(let n=0,o=e.length;n<o;n++){let o=e[n],r=-1;if("string"==typeof o.fontStyle){r=0;let e=o.fontStyle.split(" ");for(let t=0,i=e.length;t<i;t++){let i=e[t];switch(i){case"italic":r|=1;break;case"bold":r|=2;break;case"underline":r|=4;break;case"strikethrough":r|=8}}}let s=null;"string"==typeof o.foreground&&(s=o.foreground);let l=null;"string"==typeof o.background&&(l=o.background),t[i++]=new ParsedTokenThemeRule(o.token||"",n,r,s,l)}return t}function resolveParsedTokenThemeRules(e,t){e.sort((e,t)=>{let i=strcmp(e.token,t.token);return 0!==i?i:e.index-t.index});let i=0,n="000000",o="ffffff";for(;e.length>=1&&""===e[0].token;){let t=e.shift();-1!==t.fontStyle&&(i=t.fontStyle),null!==t.foreground&&(n=t.foreground),null!==t.background&&(o=t.background)}let r=new ColorMap;for(let e of t)r.getId(e);let s=r.getId(n),l=r.getId(o),d=new ThemeTrieElementRule(i,s,l),c=new ThemeTrieElement(d);for(let t=0,i=e.length;t<i;t++){let i=e[t];c.insert(i.token,i.fontStyle,r.getId(i.foreground),r.getId(i.background))}return new TokenTheme(r,c)}let c=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;let ColorMap=class ColorMap{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;let t=e.match(c);if(!t)throw Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=r.Il.fromHex("#"+e)),i}getColorMap(){return this._id2color.slice(0)}};let TokenTheme=class TokenTheme{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(parseTokenTheme(e),t)}static createFromParsedTokenTheme(e,t){return resolveParsedTokenThemeRules(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(void 0===i){let e=this._match(t),n=toStandardTokenType(t);i=(e.metadata|n<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}};let u=/\b(comment|string|regex|regexp)\b/;function toStandardTokenType(e){let t=e.match(u);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw Error("Unexpected match for standard token type!")}function strcmp(e,t){return e<t?-1:e>t?1:0}let ThemeTrieElementRule=class ThemeTrieElementRule{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new ThemeTrieElementRule(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){-1!==e&&(this._fontStyle=e),0!==t&&(this._foreground=t),0!==i&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}};let ThemeTrieElement=class ThemeTrieElement{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){let t,i;if(""===e)return this._mainRule;let n=e.indexOf(".");-1===n?(t=e,i=""):(t=e.substring(0,n),i=e.substring(n+1));let o=this._children.get(t);return void 0!==o?o.match(i):this._mainRule}insert(e,t,i,n){let o,r;if(""===e){this._mainRule.acceptOverwrite(t,i,n);return}let s=e.indexOf(".");-1===s?(o=e,r=""):(o=e.substring(0,s),r=e.substring(s+1));let l=this._children.get(o);void 0===l&&(l=new ThemeTrieElement(this._mainRule.clone()),this._children.set(o,l)),l.insert(r,t,i,n)}};function generateTokensCSSForColorMap(e){let t=[];for(let i=1,n=e.length;i<n;i++){let n=e[i];t[i]=`.mtk${i} { color: ${n}; }`}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.push(".mtks { text-decoration: line-through; }"),t.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),t.join("\n")}var g=i(1173),m=i(45815);let f={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[m.cvW]:"#FFFFFE",[m.NOs]:"#000000",[m.ES4]:"#E5EBF1",[g.gS]:"#D3D3D3",[g.qe]:"#939393",[m.Rzx]:"#ADD6FF4D"}},_={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[m.cvW]:"#1E1E1E",[m.NOs]:"#D4D4D4",[m.ES4]:"#3A3D41",[g.gS]:"#404040",[g.qe]:"#707070",[m.Rzx]:"#ADD6FF26"}},v={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[m.cvW]:"#000000",[m.NOs]:"#FFFFFF",[g.gS]:"#FFFFFF",[g.qe]:"#FFFFFF"}},C={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[m.cvW]:"#FFFFFF",[m.NOs]:"#292929",[g.gS]:"#292929",[g.qe]:"#292929"}};var b=i(76924),S=i(93672),y=i(87932),w=i(21799),L=i(98847),k=i(96440);function getIconsStyleSheet(e){let t=new y.SL,i=t.add(new s.Q5),o=(0,k.Ks)();return t.add(o.onDidChange(()=>i.fire())),e&&t.add(e.onDidProductIconThemeChange(()=>i.fire())),{dispose:()=>t.dispose(),onDidChange:i.event,getCSS(){let t=e?e.getProductIconTheme():new UnthemedProductIconTheme,i={},formatIconRule=e=>{let o=t.getIcon(e);if(!o)return;let r=o.font;return r?(i[r.id]=r.definition,`.codicon-${e.id}:before { content: '${o.fontCharacter}'; font-family: ${(0,n._h)(r.id)}; }`):`.codicon-${e.id}:before { content: '${o.fontCharacter}'; }`},r=[];for(let e of o.getIcons()){let t=formatIconRule(e);t&&r.push(t)}for(let e in i){let t=i[e],o=t.weight?`font-weight: ${t.weight};`:"",s=t.style?`font-style: ${t.style};`:"",l=t.src.map(e=>`${(0,n.wY)(e.location)} format('${e.format}')`).join(", ");r.push(`@font-face { src: ${l}; font-family: ${(0,n._h)(e)};${o}${s} font-display: block; }`)}return r.join("\n")}}}let UnthemedProductIconTheme=class UnthemedProductIconTheme{getIcon(e){let t=(0,k.Ks)(),i=e.defaults;for(;L.k.isThemeIcon(i);){let e=t.getIcon(i.id);if(!e)return;i=e.defaults}return i}};var D=i(58990);let x="vs",N="vs-dark",E="hc-black",I="hc-light",T=b.B.as(m.IPX.ColorContribution),M=b.B.as(S.IP.ThemingContribution);let StandaloneTheme=class StandaloneTheme{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let i=t.base;e.length>0?(isBuiltinTheme(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let e=new Map;for(let t in this.themeData.colors)e.set(t,r.Il.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=getBuiltinRules(this.themeData.base);for(let i in t.colors)e.has(i)||e.set(i,r.Il.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){let i=this.getColors().get(e);return i||(!1!==t?this.getDefault(e):void 0)}getDefault(e){let t=this.defaultColors[e];return t||(t=T.resolveDefaultColor(e,this),this.defaultColors[e]=t),t}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case x:return w.eL.LIGHT;case E:return w.eL.HIGH_CONTRAST_DARK;case I:return w.eL.HIGH_CONTRAST_LIGHT;default:return w.eL.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let i=getBuiltinRules(this.themeData.base);e=i.rules,i.encodedTokensColors&&(t=i.encodedTokensColors)}let i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){let t={token:""};i&&(t.foreground=i),n&&(t.background=n),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=TokenTheme.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){let n=this.tokenTheme._match([e].concat(t).join(".")),o=n.metadata,r=d.N.getForeground(o),s=d.N.getFontStyle(o);return{foreground:r,italic:!!(1&s),bold:!!(2&s),underline:!!(4&s),strikethrough:!!(8&s)}}};function isBuiltinTheme(e){return e===x||e===N||e===E||e===I}function getBuiltinRules(e){switch(e){case x:return f;case N:return _;case E:return v;case I:return C}}function newBuiltInTheme(e){let t=getBuiltinRules(e);return new StandaloneTheme(e,t)}let StandaloneThemeService=class StandaloneThemeService extends y.JT{constructor(){super(),this._onColorThemeChange=this._register(new s.Q5),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new s.Q5),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new UnthemedProductIconTheme,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(x,newBuiltInTheme(x)),this._knownThemes.set(N,newBuiltInTheme(N)),this._knownThemes.set(E,newBuiltInTheme(E)),this._knownThemes.set(I,newBuiltInTheme(I));let e=this._register(getIconsStyleSheet(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(x),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),(0,o.uB)(D.Ex,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return n.OO(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=n.dS(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),y.JT.None}_registerShadowDomContainer(e){let t=n.dS(e,e=>{e.className="monaco-colors",e.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t){this._styleElements.splice(e,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw Error("Illegal theme name!");if(!isBuiltinTheme(t.base)&&!isBuiltinTheme(e))throw Error("Illegal theme base!");this._knownThemes.set(e,new StandaloneTheme(e,t)),isBuiltinTheme(e)&&this._knownThemes.forEach(t=>{t.base===e&&t.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(x),this._updateActualTheme(t)}_updateActualTheme(e){e&&this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){let e=D.Ex.matchMedia("(forced-colors: active)").matches;if(e!==(0,w.c3)(this._theme.type)){let t;t=(0,w._T)(this._theme.type)?e?E:N:e?I:x,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){let e=[],t={},i={addRule:i=>{t[i]||(e.push(i),t[i]=!0)}};M.getThemingParticipants().forEach(e=>e(this._theme,i,this._environment));let n=[];for(let e of T.getColors()){let t=this._theme.getColor(e.id,!0);t&&n.push(`${(0,m.QO2)(e.id)}: ${t.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join("\n")} }`);let o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(generateTokensCSSForColorMap(o)),this._themeCSS=e.join("\n"),this._updateCSS(),l.RW.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}},63589:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(27989);let o=(0,n.yh)("themeService")},13558:function(e,t,i){"use strict";i.d(t,{TG:function(){return k}});var n,o,r,s,l,d,c=i(50445),u=Object.defineProperty,g=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,f=Object.prototype.hasOwnProperty,__copyProps=(e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of m(t))f.call(e,o)||o===i||u(e,o,{get:()=>t[o],enumerable:!(n=g(t,o))||n.enumerable});return e},_={};__copyProps(_,c,"default"),n&&__copyProps(n,c,"default");var v=((o=v||{})[o.None=0]="None",o[o.CommonJS=1]="CommonJS",o[o.AMD=2]="AMD",o[o.UMD=3]="UMD",o[o.System=4]="System",o[o.ES2015=5]="ES2015",o[o.ESNext=99]="ESNext",o),C=((r=C||{})[r.None=0]="None",r[r.Preserve=1]="Preserve",r[r.React=2]="React",r[r.ReactNative=3]="ReactNative",r[r.ReactJSX=4]="ReactJSX",r[r.ReactJSXDev=5]="ReactJSXDev",r),b=((s=b||{})[s.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",s[s.LineFeed=1]="LineFeed",s),S=((l=S||{})[l.ES3=0]="ES3",l[l.ES5=1]="ES5",l[l.ES2015=2]="ES2015",l[l.ES2016=3]="ES2016",l[l.ES2017=4]="ES2017",l[l.ES2018=5]="ES2018",l[l.ES2019=6]="ES2019",l[l.ES2020=7]="ES2020",l[l.ESNext=99]="ESNext",l[l.JSON=100]="JSON",l[l.Latest=99]="Latest",l),y=((d=y||{})[d.Classic=1]="Classic",d[d.NodeJs=2]="NodeJs",d),w=class{constructor(e,t,i,n,o){this._onDidChange=new _.Emitter,this._onDidExtraLibsChange=new _.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(i),this.setInlayHintsOptions(n),this.setModeConfiguration(o),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let i;if(i=void 0===t?`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t,this._extraLibs[i]&&this._extraLibs[i].content===e)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[i]&&(n=this._removedExtraLibs[i]+1),this._extraLibs[i]&&(n=this._extraLibs[i].version+1),this._extraLibs[i]={content:e,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let e=this._extraLibs[i];e&&e.version===n&&(delete this._extraLibs[i],this._removedExtraLibs[i]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(let e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(let t of e){let e=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=t.content,n=1;this._removedExtraLibs[e]&&(n=this._removedExtraLibs[e]+1),this._extraLibs[e]={content:i,version:n}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){-1===this._onDidExtraLibsChangeTimeout&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(void 0)}},L={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},k=new w({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},L),D=new w({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},L);function getMode(){return i.e(9304).then(i.bind(i,99304))}_.languages.typescript={ModuleKind:v,JsxEmit:C,NewLineKind:b,ScriptTarget:S,ModuleResolutionKind:y,typescriptVersion:"5.0.2",typescriptDefaults:k,javascriptDefaults:D,getTypeScriptWorker:()=>getMode().then(e=>e.getTypeScriptWorker()),getJavaScriptWorker:()=>getMode().then(e=>e.getJavaScriptWorker())},_.languages.onLanguage("typescript",()=>getMode().then(e=>e.setupTypeScript(k))),_.languages.onLanguage("javascript",()=>getMode().then(e=>e.setupJavaScript(D)))},46157:function(e,t,i){"use strict";i.d(t,{NC:function(){return localize},aj:function(){return getConfiguredDefaultLocale},vv:function(){return localize2}});let n="undefined"!=typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function _format(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,(e,i)=>{let n=i[0],o=t[n],r=e;return"string"==typeof o?r=o:("number"==typeof o||"boolean"==typeof o||null==o)&&(r=String(o)),r}),n&&(i="［"+i.replace(/[aouei]/g,"$&$&")+"］"),i}function localize(e,t,...i){return _format(t,i)}function localize2(e,t,...i){let n=_format(t,i);return{value:n,original:n}}function getConfiguredDefaultLocale(e){}},39938:function(e,t,i){"use strict";i.d(t,{F:function(){return r},U:function(){return s}});var n=i(7193),o=i(27989);let r=(0,o.yh)("accessibilityService"),s=new n.uy("accessibilityModeEnabled",!1)},54316:function(e,t,i){"use strict";i.d(t,{IV:function(){return r},iP:function(){return AccessibilitySignal}});var n=i(27989),o=i(46157);let r=(0,n.yh)("accessibilitySignalService");let Sound=class Sound{static register(e){let t=new Sound(e.fileName);return t}constructor(e){this.fileName=e}};Sound.error=Sound.register({fileName:"error.mp3"}),Sound.warning=Sound.register({fileName:"warning.mp3"}),Sound.foldedArea=Sound.register({fileName:"foldedAreas.mp3"}),Sound.break=Sound.register({fileName:"break.mp3"}),Sound.quickFixes=Sound.register({fileName:"quickFixes.mp3"}),Sound.taskCompleted=Sound.register({fileName:"taskCompleted.mp3"}),Sound.taskFailed=Sound.register({fileName:"taskFailed.mp3"}),Sound.terminalBell=Sound.register({fileName:"terminalBell.mp3"}),Sound.diffLineInserted=Sound.register({fileName:"diffLineInserted.mp3"}),Sound.diffLineDeleted=Sound.register({fileName:"diffLineDeleted.mp3"}),Sound.diffLineModified=Sound.register({fileName:"diffLineModified.mp3"}),Sound.chatRequestSent=Sound.register({fileName:"chatRequestSent.mp3"}),Sound.chatResponsePending=Sound.register({fileName:"chatResponsePending.mp3"}),Sound.chatResponseReceived1=Sound.register({fileName:"chatResponseReceived1.mp3"}),Sound.chatResponseReceived2=Sound.register({fileName:"chatResponseReceived2.mp3"}),Sound.chatResponseReceived3=Sound.register({fileName:"chatResponseReceived3.mp3"}),Sound.chatResponseReceived4=Sound.register({fileName:"chatResponseReceived4.mp3"}),Sound.clear=Sound.register({fileName:"clear.mp3"}),Sound.save=Sound.register({fileName:"save.mp3"}),Sound.format=Sound.register({fileName:"format.mp3"});let SoundSource=class SoundSource{constructor(e){this.randomOneOf=e}};let AccessibilitySignal=class AccessibilitySignal{static register(e){let t=new SoundSource("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new AccessibilitySignal(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return AccessibilitySignal._signals.add(i),i}constructor(e,t,i,n,o,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=n,this.legacyAnnouncementSettingsKey=o,this.announcementMessage=r}};AccessibilitySignal._signals=new Set,AccessibilitySignal.error=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.lineHasError.name","Error on Line"),sound:Sound.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:(0,o.NC)("accessibility.signals.lineHasError","Error"),settingsKey:"accessibility.signals.lineHasError"}),AccessibilitySignal.warning=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Sound.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:(0,o.NC)("accessibility.signals.lineHasWarning","Warning"),settingsKey:"accessibility.signals.lineHasWarning"}),AccessibilitySignal.foldedArea=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Sound.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:(0,o.NC)("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),AccessibilitySignal.break=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Sound.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:(0,o.NC)("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),AccessibilitySignal.inlineSuggestion=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Sound.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),AccessibilitySignal.terminalQuickFix=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Sound.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:(0,o.NC)("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),AccessibilitySignal.onDebugBreak=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Sound.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:(0,o.NC)("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),AccessibilitySignal.noInlayHints=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Sound.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:(0,o.NC)("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),AccessibilitySignal.taskCompleted=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.taskCompleted","Task Completed"),sound:Sound.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:(0,o.NC)("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),AccessibilitySignal.taskFailed=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.taskFailed","Task Failed"),sound:Sound.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:(0,o.NC)("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),AccessibilitySignal.terminalCommandFailed=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Sound.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:(0,o.NC)("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),AccessibilitySignal.terminalBell=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.terminalBell","Terminal Bell"),sound:Sound.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:(0,o.NC)("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),AccessibilitySignal.notebookCellCompleted=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Sound.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:(0,o.NC)("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),AccessibilitySignal.notebookCellFailed=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Sound.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:(0,o.NC)("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),AccessibilitySignal.diffLineInserted=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Sound.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),AccessibilitySignal.diffLineDeleted=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Sound.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),AccessibilitySignal.diffLineModified=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Sound.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),AccessibilitySignal.chatRequestSent=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Sound.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:(0,o.NC)("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),AccessibilitySignal.chatResponseReceived=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Sound.chatResponseReceived1,Sound.chatResponseReceived2,Sound.chatResponseReceived3,Sound.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),AccessibilitySignal.chatResponsePending=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.chatResponsePending","Chat Response Pending"),sound:Sound.chatResponsePending,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.chatResponsePending",announcementMessage:(0,o.NC)("accessibility.signals.chatResponsePending","Chat Response Pending"),settingsKey:"accessibility.signals.chatResponsePending"}),AccessibilitySignal.clear=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.clear","Clear"),sound:Sound.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:(0,o.NC)("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),AccessibilitySignal.save=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.save","Save"),sound:Sound.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:(0,o.NC)("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),AccessibilitySignal.format=AccessibilitySignal.register({name:(0,o.NC)("accessibilitySignals.format","Format"),sound:Sound.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:(0,o.NC)("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"})},51765:function(e,t,i){"use strict";i.d(t,{Mm:function(){return E},Id:function(){return createActionViewItem},vr:function(){return createAndFillInActionBarActions},LJ:function(){return createAndFillInContextMenuActions}});var n=i(70687),o=i(58731),r=i(48953),s=i(24221),l=i(9252),d=i(61141),c=i(87932),u=i(88059);i(73055);var g=i(46157),m=i(31798);function isICommandActionToggleInfo(e){return!!e&&void 0!==e.condition}var f=i(7193),_=i(64252),v=i(27989),C=i(18333),b=i(1480),S=i(19263),y=i(93672),w=i(98847),L=i(21799),k=i(16877),D=i(45815),x=i(4179),N=i(39938),__decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},__param=function(e,t){return function(i,n){t(i,n,e)}};function createAndFillInContextMenuActions(e,t,i,o){let r=e.getActions(t),s=n._q.getInstance(),l=s.keyStatus.altKey||(u.ED||u.IJ)&&s.keyStatus.shiftKey;fillInActions(r,i,l,o?e=>e===o:e=>"navigation"===e)}function createAndFillInActionBarActions(e,t,i,n,o,r){let s=e.getActions(t),l="string"==typeof n?e=>e===n:n;fillInActions(s,i,!1,l,o,r)}function fillInActions(e,t,i,n=e=>"navigation"===e,o=()=>!1,r=!1){let s,d;Array.isArray(t)?(s=t,d=t):(s=t.primary,d=t.secondary);let c=new Set;for(let[t,o]of e){let e;for(let u of(n(t)?(e=s).length>0&&r&&e.push(new l.Z0):(e=d).length>0&&e.push(new l.Z0),o)){i&&(u=u instanceof m.U8&&u.alt?u.alt:u);let n=e.push(u);u instanceof l.wY&&c.add({group:t,action:u,index:n-1})}}for(let{group:e,action:t,index:i}of c){let r=n(e)?s:d,l=t.actions;o(t,e,r.length)&&r.splice(i,1,...l)}}let E=class extends r.gU{constructor(e,t,i,o,r,s,l,d){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:null==t?void 0:t.draggable,keybinding:null==t?void 0:t.keybinding,hoverDelegate:null==t?void 0:t.hoverDelegate}),this._keybindingService=i,this._notificationService=o,this._contextKeyService=r,this._themeService=s,this._contextMenuService=l,this._accessibilityService=d,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new c.XK),this._altKey=n._q.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1,updateAltState=()=>{var e;let i=!!(null===(e=this._menuItemAction.alt)||void 0===e?void 0:e.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);i!==this._wantsAltCommand&&(this._wantsAltCommand=i,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(updateAltState)),this._register((0,n.nm)(e,"mouseleave",e=>{t=!1,updateAltState()})),this._register((0,n.nm)(e,"mouseenter",e=>{t=!0,updateAltState()})),updateAltState()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;let t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=t&&t.getLabel(),n=this._commandAction.tooltip||this._commandAction.label,o=i?(0,g.NC)("titleAndKb","{0} ({1})",n,i):n;if(!this._wantsAltCommand&&(null===(e=this._menuItemAction.alt)||void 0===e?void 0:e.enabled)){let e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,t=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),i=t&&t.getLabel(),n=i?(0,g.NC)("titleAndKb","{0} ({1})",e,i):e;o=(0,g.NC)("titleAndKbAndAlt","{0}\n[{1}] {2}",o,d.xo.modifierLabels[u.OS].altKey,n)}return o}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;let{element:t,label:i}=this;if(!t||!i)return;let o=this._commandAction.checked&&isICommandActionToggleInfo(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(o){if(w.k.isThemeIcon(o)){let e=w.k.asClassNameArray(o);i.classList.add(...e),this._itemClassDispose.value=(0,c.OF)(()=>{i.classList.remove(...e)})}else i.style.backgroundImage=(0,L._T)(this._themeService.getColorTheme().type)?(0,n.wY)(o.dark):(0,n.wY)(o.light),i.classList.add("icon"),this._itemClassDispose.value=(0,c.F8)((0,c.OF)(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}}};E=__decorate([__param(2,C.d),__param(3,b.lT),__param(4,f.i6),__param(5,y.XE),__param(6,_.i),__param(7,N.F)],E);let I=class extends s.C{constructor(e,t,i,n,o){var r,s,l;let d={...t,menuAsChild:null!==(r=null==t?void 0:t.menuAsChild)&&void 0!==r&&r,classNames:null!==(s=null==t?void 0:t.classNames)&&void 0!==s?s:w.k.isThemeIcon(e.item.icon)?w.k.asClassName(e.item.icon):void 0,keybindingProvider:null!==(l=null==t?void 0:t.keybindingProvider)&&void 0!==l?l:e=>i.lookupKeybinding(e.id)};super(e,{getActions:()=>e.actions},n,d),this._keybindingService=i,this._contextMenuService=n,this._themeService=o}render(e){super.render(e),(0,k.p_)(this.element),e.classList.add("menu-entry");let t=this._action,{icon:i}=t.item;if(i&&!w.k.isThemeIcon(i)){this.element.classList.add("icon");let setBackgroundImage=()=>{this.element&&(this.element.style.backgroundImage=(0,L._T)(this._themeService.getColorTheme().type)?(0,n.wY)(i.dark):(0,n.wY)(i.light))};setBackgroundImage(),this._register(this._themeService.onDidColorThemeChange(()=>{setBackgroundImage()}))}}};I=__decorate([__param(2,C.d),__param(3,_.i),__param(4,y.XE)],I);let T=class extends r.YH{constructor(e,t,i,n,o,r,d,c){var u,g,f;let _;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=o,this._menuService=r,this._instaService=d,this._storageService=c,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let v=(null==t?void 0:t.persistLastActionId)?c.get(this._storageKey,1):void 0;v&&(_=e.actions.find(e=>v===e.id)),_||(_=e.actions[0]),this._defaultAction=this._instaService.createInstance(E,_,{keybinding:this._getDefaultActionKeybindingLabel(_)});let C={keybindingProvider:e=>this._keybindingService.lookupKeybinding(e.id),...t,menuAsChild:null===(u=null==t?void 0:t.menuAsChild)||void 0===u||u,classNames:null!==(g=null==t?void 0:t.classNames)&&void 0!==g?g:["codicon","codicon-chevron-down"],actionRunner:null!==(f=null==t?void 0:t.actionRunner)&&void 0!==f?f:new l.Wi};this._dropdown=new s.C(e,e.actions,this._contextMenuService,C),this._register(this._dropdown.actionRunner.onDidRun(e=>{e.action instanceof m.U8&&this.update(e.action)}))}update(e){var t;(null===(t=this._options)||void 0===t?void 0:t.persistLastActionId)&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(E,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends l.Wi{async runAction(e,t){await e.run(void 0)}},this._container&&this._defaultAction.render((0,n.Ce)(this._container,(0,n.$)(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let i;if(null===(t=this._options)||void 0===t?void 0:t.renderKeybindingWithDefaultActionLabel){let t=this._keybindingService.lookupKeybinding(e.id);t&&(i=`(${t.getLabel()})`)}return i}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let t=(0,n.$)(".action-container");this._defaultAction.render((0,n.R3)(this._container,t)),this._register((0,n.nm)(t,n.tw.KEY_DOWN,e=>{let t=new o.y(e);t.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())}));let i=(0,n.$)(".dropdown-action-container");this._dropdown.render((0,n.R3)(this._container,i)),this._register((0,n.nm)(i,n.tw.KEY_DOWN,e=>{var t;let i=new o.y(e);i.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),null===(t=this._defaultAction.element)||void 0===t||t.focus(),i.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};T=__decorate([__param(2,C.d),__param(3,b.lT),__param(4,_.i),__param(5,m.co),__param(6,v.TG),__param(7,S.Uy)],T);let M=class extends r.Lc{constructor(e,t){super(null,e,e.actions.map(e=>({text:e.id===l.Z0.ID?"─────────":e.label,isDisabled:!e.enabled})),0,t,x.BM,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(e=>e.checked)))}render(e){super.render(e),e.style.borderColor=(0,D.n_1)(D.a9O)}runAction(e,t){let i=this.action.actions[t];i&&this.actionRunner.run(i)}};function createActionViewItem(e,t,i){return t instanceof m.U8?e.createInstance(E,t,i):t instanceof m.NZ?t.item.isSelection?e.createInstance(M,t):t.item.rememberDefaultAction?e.createInstance(T,t,{...i,persistLastActionId:!0}):e.createInstance(I,t,i):void 0}M=__decorate([__param(1,_.u)],M)},19950:function(e,t,i){"use strict";i.d(t,{r:function(){return N},T:function(){return x}});var n=i(70687),o=i(31498),r=i(83367),s=i(24221),l=i(9252),d=i(84530),c=i(98847),u=i(57605),g=i(87932);i(88585);var m=i(46157),f=i(41273);let ToolBar=class ToolBar extends g.JT{constructor(e,t,i={orientation:0}){var n;super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new u.z5),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new g.SL),i.hoverDelegate=null!==(n=i.hoverDelegate)&&void 0!==n?n:this._register((0,f.t)("element",!0)),this.options=i,this.lookupKeybindings="function"==typeof this.options.getKeyBinding,this.toggleMenuAction=this._register(new ToggleMenuAction(()=>{var e;return null===(e=this.toggleMenuActionViewItem)||void 0===e?void 0:e.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new r.o(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(e,n)=>{var o;if(e.id===ToggleMenuAction.ID)return this.toggleMenuActionViewItem=new s.C(e,e.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:c.k.asClassNameArray(null!==(o=i.moreIcon)&&void 0!==o?o:d.l.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){let t=i.actionViewItemProvider(e,n);if(t)return t}if(e instanceof l.wY){let i=new s.C(e,e.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:e.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return i.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(i),this.disposables.add(this._onDidChangeDropdownVisibility.add(i.onDidChangeVisibility)),i}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();let i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(e=>{this.actionBar.push(e,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(e)})})}getKeybindingLabel(e){var t,i,n;let o=this.lookupKeybindings?null===(i=(t=this.options).getKeyBinding)||void 0===i?void 0:i.call(t,e):void 0;return null!==(n=null==o?void 0:o.getLabel())&&void 0!==n?n:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}};let ToggleMenuAction=class ToggleMenuAction extends l.aU{constructor(e,t){super(ToggleMenuAction.ID,t=t||m.NC("moreActions","More Actions..."),void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};ToggleMenuAction.ID="toolbar.toggle.more";var _=i(34794),v=i(67809),C=i(17861),b=i(50885),S=i(51765),y=i(31798),w=i(7193),L=i(64252),k=i(18333),D=i(85363),__decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},__param=function(e,t){return function(i,n){t(i,n,e)}};let x=class extends ToolBar{constructor(e,t,i,n,o,r,s){super(e,o,{getKeyBinding:e=>{var t;return null!==(t=r.lookupKeybinding(e.id))&&void 0!==t?t:void 0},...t,allowContextMenu:!0,skipTelemetry:"string"==typeof(null==t?void 0:t.telemetrySource)}),this._options=t,this._menuService=i,this._contextKeyService=n,this._contextMenuService=o,this._sessionDisposables=this._store.add(new g.SL);let l=null==t?void 0:t.telemetrySource;l&&this._store.add(this.actionBar.onDidRun(e=>s.publicLog2("workbenchActionExecuted",{id:e.action.id,from:l})))}setActions(e,t=[],i){var r,s,d;this._sessionDisposables.clear();let c=e.slice(),u=t.slice(),g=[],f=0,C=[],S=!1;if((null===(r=this._options)||void 0===r?void 0:r.hiddenItemStrategy)!==-1)for(let e=0;e<c.length;e++){let t=c[e];(t instanceof y.U8||t instanceof y.NZ)&&t.hideActions&&(g.push(t.hideActions.toggle),t.hideActions.toggle.checked&&f++,t.hideActions.isHidden&&(S=!0,c[e]=void 0,(null===(s=this._options)||void 0===s?void 0:s.hiddenItemStrategy)!==0&&(C[e]=t)))}if((null===(d=this._options)||void 0===d?void 0:d.overflowBehavior)!==void 0){let e=(0,v.j)(new Set(this._options.overflowBehavior.exempted),b.$.map(c,e=>null==e?void 0:e.id)),t=this._options.overflowBehavior.maxItems-e.size,i=0;for(let n=0;n<c.length;n++){let o=c[n];o&&(i++,!e.has(o.id)&&i>=t&&(c[n]=void 0,C[n]=o))}}(0,_.Rs)(c),(0,_.Rs)(C),super.setActions(c,l.Z0.join(C,u)),g.length>0&&this._sessionDisposables.add((0,n.nm)(this.getElement(),"contextmenu",e=>{var t,r,s,d,c;let u;let _=new o.n((0,n.Jj)(this.getElement()),e),v=this.getItemAction(_.target);if(!v)return;_.preventDefault(),_.stopPropagation();let C=!1;if(1===f&&(null===(t=this._options)||void 0===t?void 0:t.hiddenItemStrategy)===0){C=!0;for(let e=0;e<g.length;e++)if(g[e].checked){g[e]=(0,l.xw)({id:v.id,label:v.label,checked:!0,enabled:!1,run(){}});break}}if(!C&&(v instanceof y.U8||v instanceof y.NZ)){if(!v.hideActions)return;u=v.hideActions.hide}else u=(0,l.xw)({id:"label",label:(0,m.NC)("hide","Hide"),enabled:!1,run(){}});let b=l.Z0.join([u],g);(null===(r=this._options)||void 0===r?void 0:r.resetMenu)&&!i&&(i=[this._options.resetMenu]),S&&i&&(b.push(new l.Z0),b.push((0,l.xw)({id:"resetThisMenu",label:(0,m.NC)("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),this._contextMenuService.showContextMenu({getAnchor:()=>_,getActions:()=>b,menuId:null===(s=this._options)||void 0===s?void 0:s.contextMenu,menuActionOptions:{renderShortTitle:!0,...null===(d=this._options)||void 0===d?void 0:d.menuOptions},skipTelemetry:"string"==typeof(null===(c=this._options)||void 0===c?void 0:c.telemetrySource),contextKeyService:this._contextKeyService})}))}};x=__decorate([__param(2,y.co),__param(3,w.i6),__param(4,L.i),__param(5,k.d),__param(6,D.b)],x);let N=class extends x{constructor(e,t,i,n,o,r,s,l){super(e,{resetMenu:t,...i},n,o,r,s,l),this._onDidChangeMenuItems=this._store.add(new u.Q5);let d=this._store.add(n.createMenu(t,o,{emitEventsForSubmenuChanges:!0})),updateToolbar=()=>{var t,n,o;let r=[],s=[];(0,S.vr)(d,null==i?void 0:i.menuOptions,{primary:r,secondary:s},null===(t=null==i?void 0:i.toolbarOptions)||void 0===t?void 0:t.primaryGroup,null===(n=null==i?void 0:i.toolbarOptions)||void 0===n?void 0:n.shouldInlineSubmenu,null===(o=null==i?void 0:i.toolbarOptions)||void 0===o?void 0:o.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",0===r.length&&0===s.length),super.setActions(r,s)};this._store.add(d.onDidChange(()=>{updateToolbar(),this._onDidChangeMenuItems.fire(this)})),updateToolbar()}setActions(){throw new C.he("This toolbar is populated from a menu.")}};N=__decorate([__param(3,y.co),__param(4,w.i6),__param(5,L.i),__param(6,k.d),__param(7,D.b)],N)},31798:function(e,t,i){"use strict";i.d(t,{BH:function(){return _},Ke:function(){return Action2},NZ:function(){return SubmenuItemAction},U8:function(){return v},co:function(){return f},eH:function(){return MenuId},f6:function(){return isISubmenuItem},r1:function(){return registerAction2},vr:function(){return isIMenuItem}});var n,o=i(9252),r=i(98847),s=i(57605),l=i(87932),d=i(68324),c=i(56143),u=i(7193),g=i(27989),m=i(37139),__param=function(e,t){return function(i,n){t(i,n,e)}};function isIMenuItem(e){return void 0!==e.command}function isISubmenuItem(e){return void 0!==e.submenu}let MenuId=class MenuId{constructor(e){if(MenuId._instances.has(e))throw TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);MenuId._instances.set(e,this),this.id=e}};MenuId._instances=new Map,MenuId.CommandPalette=new MenuId("CommandPalette"),MenuId.DebugBreakpointsContext=new MenuId("DebugBreakpointsContext"),MenuId.DebugCallStackContext=new MenuId("DebugCallStackContext"),MenuId.DebugConsoleContext=new MenuId("DebugConsoleContext"),MenuId.DebugVariablesContext=new MenuId("DebugVariablesContext"),MenuId.NotebookVariablesContext=new MenuId("NotebookVariablesContext"),MenuId.DebugHoverContext=new MenuId("DebugHoverContext"),MenuId.DebugWatchContext=new MenuId("DebugWatchContext"),MenuId.DebugToolBar=new MenuId("DebugToolBar"),MenuId.DebugToolBarStop=new MenuId("DebugToolBarStop"),MenuId.EditorContext=new MenuId("EditorContext"),MenuId.SimpleEditorContext=new MenuId("SimpleEditorContext"),MenuId.EditorContent=new MenuId("EditorContent"),MenuId.EditorLineNumberContext=new MenuId("EditorLineNumberContext"),MenuId.EditorContextCopy=new MenuId("EditorContextCopy"),MenuId.EditorContextPeek=new MenuId("EditorContextPeek"),MenuId.EditorContextShare=new MenuId("EditorContextShare"),MenuId.EditorTitle=new MenuId("EditorTitle"),MenuId.EditorTitleRun=new MenuId("EditorTitleRun"),MenuId.EditorTitleContext=new MenuId("EditorTitleContext"),MenuId.EditorTitleContextShare=new MenuId("EditorTitleContextShare"),MenuId.EmptyEditorGroup=new MenuId("EmptyEditorGroup"),MenuId.EmptyEditorGroupContext=new MenuId("EmptyEditorGroupContext"),MenuId.EditorTabsBarContext=new MenuId("EditorTabsBarContext"),MenuId.EditorTabsBarShowTabsSubmenu=new MenuId("EditorTabsBarShowTabsSubmenu"),MenuId.EditorTabsBarShowTabsZenModeSubmenu=new MenuId("EditorTabsBarShowTabsZenModeSubmenu"),MenuId.EditorActionsPositionSubmenu=new MenuId("EditorActionsPositionSubmenu"),MenuId.ExplorerContext=new MenuId("ExplorerContext"),MenuId.ExplorerContextShare=new MenuId("ExplorerContextShare"),MenuId.ExtensionContext=new MenuId("ExtensionContext"),MenuId.GlobalActivity=new MenuId("GlobalActivity"),MenuId.CommandCenter=new MenuId("CommandCenter"),MenuId.CommandCenterCenter=new MenuId("CommandCenterCenter"),MenuId.LayoutControlMenuSubmenu=new MenuId("LayoutControlMenuSubmenu"),MenuId.LayoutControlMenu=new MenuId("LayoutControlMenu"),MenuId.MenubarMainMenu=new MenuId("MenubarMainMenu"),MenuId.MenubarAppearanceMenu=new MenuId("MenubarAppearanceMenu"),MenuId.MenubarDebugMenu=new MenuId("MenubarDebugMenu"),MenuId.MenubarEditMenu=new MenuId("MenubarEditMenu"),MenuId.MenubarCopy=new MenuId("MenubarCopy"),MenuId.MenubarFileMenu=new MenuId("MenubarFileMenu"),MenuId.MenubarGoMenu=new MenuId("MenubarGoMenu"),MenuId.MenubarHelpMenu=new MenuId("MenubarHelpMenu"),MenuId.MenubarLayoutMenu=new MenuId("MenubarLayoutMenu"),MenuId.MenubarNewBreakpointMenu=new MenuId("MenubarNewBreakpointMenu"),MenuId.PanelAlignmentMenu=new MenuId("PanelAlignmentMenu"),MenuId.PanelPositionMenu=new MenuId("PanelPositionMenu"),MenuId.ActivityBarPositionMenu=new MenuId("ActivityBarPositionMenu"),MenuId.MenubarPreferencesMenu=new MenuId("MenubarPreferencesMenu"),MenuId.MenubarRecentMenu=new MenuId("MenubarRecentMenu"),MenuId.MenubarSelectionMenu=new MenuId("MenubarSelectionMenu"),MenuId.MenubarShare=new MenuId("MenubarShare"),MenuId.MenubarSwitchEditorMenu=new MenuId("MenubarSwitchEditorMenu"),MenuId.MenubarSwitchGroupMenu=new MenuId("MenubarSwitchGroupMenu"),MenuId.MenubarTerminalMenu=new MenuId("MenubarTerminalMenu"),MenuId.MenubarViewMenu=new MenuId("MenubarViewMenu"),MenuId.MenubarHomeMenu=new MenuId("MenubarHomeMenu"),MenuId.OpenEditorsContext=new MenuId("OpenEditorsContext"),MenuId.OpenEditorsContextShare=new MenuId("OpenEditorsContextShare"),MenuId.ProblemsPanelContext=new MenuId("ProblemsPanelContext"),MenuId.SCMInputBox=new MenuId("SCMInputBox"),MenuId.SCMChangesSeparator=new MenuId("SCMChangesSeparator"),MenuId.SCMIncomingChanges=new MenuId("SCMIncomingChanges"),MenuId.SCMIncomingChangesContext=new MenuId("SCMIncomingChangesContext"),MenuId.SCMIncomingChangesSetting=new MenuId("SCMIncomingChangesSetting"),MenuId.SCMOutgoingChanges=new MenuId("SCMOutgoingChanges"),MenuId.SCMOutgoingChangesContext=new MenuId("SCMOutgoingChangesContext"),MenuId.SCMOutgoingChangesSetting=new MenuId("SCMOutgoingChangesSetting"),MenuId.SCMIncomingChangesAllChangesContext=new MenuId("SCMIncomingChangesAllChangesContext"),MenuId.SCMIncomingChangesHistoryItemContext=new MenuId("SCMIncomingChangesHistoryItemContext"),MenuId.SCMOutgoingChangesAllChangesContext=new MenuId("SCMOutgoingChangesAllChangesContext"),MenuId.SCMOutgoingChangesHistoryItemContext=new MenuId("SCMOutgoingChangesHistoryItemContext"),MenuId.SCMChangeContext=new MenuId("SCMChangeContext"),MenuId.SCMResourceContext=new MenuId("SCMResourceContext"),MenuId.SCMResourceContextShare=new MenuId("SCMResourceContextShare"),MenuId.SCMResourceFolderContext=new MenuId("SCMResourceFolderContext"),MenuId.SCMResourceGroupContext=new MenuId("SCMResourceGroupContext"),MenuId.SCMSourceControl=new MenuId("SCMSourceControl"),MenuId.SCMSourceControlInline=new MenuId("SCMSourceControlInline"),MenuId.SCMSourceControlTitle=new MenuId("SCMSourceControlTitle"),MenuId.SCMTitle=new MenuId("SCMTitle"),MenuId.SearchContext=new MenuId("SearchContext"),MenuId.SearchActionMenu=new MenuId("SearchActionContext"),MenuId.StatusBarWindowIndicatorMenu=new MenuId("StatusBarWindowIndicatorMenu"),MenuId.StatusBarRemoteIndicatorMenu=new MenuId("StatusBarRemoteIndicatorMenu"),MenuId.StickyScrollContext=new MenuId("StickyScrollContext"),MenuId.TestItem=new MenuId("TestItem"),MenuId.TestItemGutter=new MenuId("TestItemGutter"),MenuId.TestMessageContext=new MenuId("TestMessageContext"),MenuId.TestMessageContent=new MenuId("TestMessageContent"),MenuId.TestPeekElement=new MenuId("TestPeekElement"),MenuId.TestPeekTitle=new MenuId("TestPeekTitle"),MenuId.TouchBarContext=new MenuId("TouchBarContext"),MenuId.TitleBarContext=new MenuId("TitleBarContext"),MenuId.TitleBarTitleContext=new MenuId("TitleBarTitleContext"),MenuId.TunnelContext=new MenuId("TunnelContext"),MenuId.TunnelPrivacy=new MenuId("TunnelPrivacy"),MenuId.TunnelProtocol=new MenuId("TunnelProtocol"),MenuId.TunnelPortInline=new MenuId("TunnelInline"),MenuId.TunnelTitle=new MenuId("TunnelTitle"),MenuId.TunnelLocalAddressInline=new MenuId("TunnelLocalAddressInline"),MenuId.TunnelOriginInline=new MenuId("TunnelOriginInline"),MenuId.ViewItemContext=new MenuId("ViewItemContext"),MenuId.ViewContainerTitle=new MenuId("ViewContainerTitle"),MenuId.ViewContainerTitleContext=new MenuId("ViewContainerTitleContext"),MenuId.ViewTitle=new MenuId("ViewTitle"),MenuId.ViewTitleContext=new MenuId("ViewTitleContext"),MenuId.CommentEditorActions=new MenuId("CommentEditorActions"),MenuId.CommentThreadTitle=new MenuId("CommentThreadTitle"),MenuId.CommentThreadActions=new MenuId("CommentThreadActions"),MenuId.CommentThreadAdditionalActions=new MenuId("CommentThreadAdditionalActions"),MenuId.CommentThreadTitleContext=new MenuId("CommentThreadTitleContext"),MenuId.CommentThreadCommentContext=new MenuId("CommentThreadCommentContext"),MenuId.CommentTitle=new MenuId("CommentTitle"),MenuId.CommentActions=new MenuId("CommentActions"),MenuId.InteractiveToolbar=new MenuId("InteractiveToolbar"),MenuId.InteractiveCellTitle=new MenuId("InteractiveCellTitle"),MenuId.InteractiveCellDelete=new MenuId("InteractiveCellDelete"),MenuId.InteractiveCellExecute=new MenuId("InteractiveCellExecute"),MenuId.InteractiveInputExecute=new MenuId("InteractiveInputExecute"),MenuId.IssueReporter=new MenuId("IssueReporter"),MenuId.NotebookToolbar=new MenuId("NotebookToolbar"),MenuId.NotebookStickyScrollContext=new MenuId("NotebookStickyScrollContext"),MenuId.NotebookCellTitle=new MenuId("NotebookCellTitle"),MenuId.NotebookCellDelete=new MenuId("NotebookCellDelete"),MenuId.NotebookCellInsert=new MenuId("NotebookCellInsert"),MenuId.NotebookCellBetween=new MenuId("NotebookCellBetween"),MenuId.NotebookCellListTop=new MenuId("NotebookCellTop"),MenuId.NotebookCellExecute=new MenuId("NotebookCellExecute"),MenuId.NotebookCellExecuteGoTo=new MenuId("NotebookCellExecuteGoTo"),MenuId.NotebookCellExecutePrimary=new MenuId("NotebookCellExecutePrimary"),MenuId.NotebookDiffCellInputTitle=new MenuId("NotebookDiffCellInputTitle"),MenuId.NotebookDiffCellMetadataTitle=new MenuId("NotebookDiffCellMetadataTitle"),MenuId.NotebookDiffCellOutputsTitle=new MenuId("NotebookDiffCellOutputsTitle"),MenuId.NotebookOutputToolbar=new MenuId("NotebookOutputToolbar"),MenuId.NotebookEditorLayoutConfigure=new MenuId("NotebookEditorLayoutConfigure"),MenuId.NotebookKernelSource=new MenuId("NotebookKernelSource"),MenuId.BulkEditTitle=new MenuId("BulkEditTitle"),MenuId.BulkEditContext=new MenuId("BulkEditContext"),MenuId.TimelineItemContext=new MenuId("TimelineItemContext"),MenuId.TimelineTitle=new MenuId("TimelineTitle"),MenuId.TimelineTitleContext=new MenuId("TimelineTitleContext"),MenuId.TimelineFilterSubMenu=new MenuId("TimelineFilterSubMenu"),MenuId.AccountsContext=new MenuId("AccountsContext"),MenuId.SidebarTitle=new MenuId("SidebarTitle"),MenuId.PanelTitle=new MenuId("PanelTitle"),MenuId.AuxiliaryBarTitle=new MenuId("AuxiliaryBarTitle"),MenuId.TerminalInstanceContext=new MenuId("TerminalInstanceContext"),MenuId.TerminalEditorInstanceContext=new MenuId("TerminalEditorInstanceContext"),MenuId.TerminalNewDropdownContext=new MenuId("TerminalNewDropdownContext"),MenuId.TerminalTabContext=new MenuId("TerminalTabContext"),MenuId.TerminalTabEmptyAreaContext=new MenuId("TerminalTabEmptyAreaContext"),MenuId.TerminalStickyScrollContext=new MenuId("TerminalStickyScrollContext"),MenuId.WebviewContext=new MenuId("WebviewContext"),MenuId.InlineCompletionsActions=new MenuId("InlineCompletionsActions"),MenuId.InlineEditActions=new MenuId("InlineEditActions"),MenuId.NewFile=new MenuId("NewFile"),MenuId.MergeInput1Toolbar=new MenuId("MergeToolbar1Toolbar"),MenuId.MergeInput2Toolbar=new MenuId("MergeToolbar2Toolbar"),MenuId.MergeBaseToolbar=new MenuId("MergeBaseToolbar"),MenuId.MergeInputResultToolbar=new MenuId("MergeToolbarResultToolbar"),MenuId.InlineSuggestionToolbar=new MenuId("InlineSuggestionToolbar"),MenuId.InlineEditToolbar=new MenuId("InlineEditToolbar"),MenuId.ChatContext=new MenuId("ChatContext"),MenuId.ChatCodeBlock=new MenuId("ChatCodeblock"),MenuId.ChatMessageTitle=new MenuId("ChatMessageTitle"),MenuId.ChatExecute=new MenuId("ChatExecute"),MenuId.ChatInputSide=new MenuId("ChatInputSide"),MenuId.AccessibleView=new MenuId("AccessibleView"),MenuId.MultiDiffEditorFileToolbar=new MenuId("MultiDiffEditorFileToolbar");let f=(0,g.yh)("menuService");let MenuRegistryChangeEvent=class MenuRegistryChangeEvent{static for(e){let t=this._all.get(e);return t||(t=new MenuRegistryChangeEvent(e),this._all.set(e,t)),t}static merge(e){let t=new Set;for(let i of e)i instanceof MenuRegistryChangeEvent&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};MenuRegistryChangeEvent._all=new Map;let _=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new s.SZ({merge:MenuRegistryChangeEvent.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(e){return this._commands.set(e.id,e),this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(MenuId.CommandPalette)),(0,l.OF)(()=>{this._commands.delete(e.id)&&this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(MenuId.CommandPalette))})}getCommand(e){return this._commands.get(e)}getCommands(){let e=new Map;return this._commands.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this._menuItems.get(e);i||(i=new d.S,this._menuItems.set(e,i));let n=i.push(t);return this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(e)),(0,l.OF)(()=>{n(),this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(e))})}appendMenuItems(e){let t=new l.SL;for(let{id:i,item:n}of e)t.add(this.appendMenuItem(i,n));return t}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===MenuId.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){let t=new Set;for(let i of e)isIMenuItem(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this._commands.forEach((i,n)=>{t.has(n)||e.push({command:i})})}};let SubmenuItemAction=class SubmenuItemAction extends o.wY{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,"string"==typeof e.title?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}};let v=n=class{static label(e,t){return(null==t?void 0:t.renderShortTitle)&&e.shortTitle?"string"==typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"==typeof e.title?e.title:e.title.value}constructor(e,t,i,o,s,l){var d,c;let u;if(this.hideActions=o,this._commandService=l,this.id=e.id,this.label=n.label(e,i),this.tooltip=null!==(c="string"==typeof e.tooltip?e.tooltip:null===(d=e.tooltip)||void 0===d?void 0:d.value)&&void 0!==c?c:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){let t=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(t.condition),this.checked&&t.tooltip&&(this.tooltip="string"==typeof t.tooltip?t.tooltip:t.tooltip.value),this.checked&&r.k.isThemeIcon(t.icon)&&(u=t.icon),this.checked&&t.title&&(this.label="string"==typeof t.title?t.title:t.title.value)}u||(u=r.k.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new n(t,void 0,i,o,s,l):void 0,this._options=i,this.class=u&&r.k.asClassName(u)}run(...e){var t,i;let n=[];return(null===(t=this._options)||void 0===t?void 0:t.arg)&&(n=[...n,this._options.arg]),(null===(i=this._options)||void 0===i?void 0:i.shouldForwardArgs)&&(n=[...n,...e]),this._commandService.executeCommand(this.id,...n)}};v=n=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([__param(4,u.i6),__param(5,c.H)],v);let Action2=class Action2{constructor(e){this.desc=e}};function registerAction2(e){let t=new l.SL,i=new e,{f1:n,menu:o,keybinding:r,...s}=i.desc;if(c.P.getCommand(s.id))throw Error(`Cannot register two commands with the same id: ${s.id}`);if(t.add(c.P.registerCommand({id:s.id,handler:(e,...t)=>i.run(e,...t),metadata:s.metadata})),Array.isArray(o))for(let e of o)t.add(_.appendMenuItem(e.id,{command:{...s,precondition:null===e.precondition?void 0:s.precondition},...e}));else o&&t.add(_.appendMenuItem(o.id,{command:{...s,precondition:null===o.precondition?void 0:s.precondition},...o}));if(n&&(t.add(_.appendMenuItem(MenuId.CommandPalette,{command:s,when:s.precondition})),t.add(_.addCommand(s))),Array.isArray(r))for(let e of r)t.add(m.W.registerKeybindingRule({...e,id:s.id,when:s.precondition?u.Ao.and(s.precondition,e.when):e.when}));else r&&t.add(m.W.registerKeybindingRule({...r,id:s.id,when:s.precondition?u.Ao.and(s.precondition,r.when):r.when}));return t}},19695:function(e,t,i){"use strict";i.d(t,{p:function(){return o}});var n=i(27989);let o=(0,n.yh)("clipboardService")},56143:function(e,t,i){"use strict";i.d(t,{H:function(){return c},P:function(){return u}});var n=i(57605),o=i(50885),r=i(87932),s=i(68324),l=i(16877),d=i(27989);let c=(0,d.yh)("commandService"),u=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new n.Q5,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw Error("invalid command");if("string"==typeof e){if(!t)throw Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){let t=[];for(let i of e.metadata.args)t.push(i.constraint);let i=e.handler;e.handler=function(e,...n){return(0,l.D8)(n,t),i(e,...n)}}let{id:i}=e,n=this._commands.get(i);n||(n=new s.S,this._commands.set(i,n));let o=n.unshift(e),d=(0,r.OF)(()=>{o();let e=this._commands.get(i);(null==e?void 0:e.isEmpty())&&this._commands.delete(i)});return this._onDidRegisterCommand.fire(i),d}registerCommandAlias(e,t){return u.registerCommand(e,(e,...i)=>e.get(c).executeCommand(t,...i))}getCommand(e){let t=this._commands.get(e);if(!(!t||t.isEmpty()))return o.$.first(t)}getCommands(){let e=new Map;for(let t of this._commands.keys()){let i=this.getCommand(t);i&&e.set(t,i)}return e}};u.registerCommand("noop",()=>{})},78559:function(e,t,i){"use strict";i.d(t,{KV:function(){return addToValueTree},Mt:function(){return getConfigurationValue},Od:function(){return toValuesTree},UI:function(){return getLanguageTagSettingPlainKey},Ui:function(){return o},xL:function(){return removeFromValueTree}});var n=i(27989);let o=(0,n.yh)("configurationService");function toValuesTree(e,t){let i=Object.create(null);for(let n in e)addToValueTree(i,n,e[n],t);return i}function addToValueTree(e,t,i,n){let o=t.split("."),r=o.pop(),s=e;for(let e=0;e<o.length;e++){let i=o[e],r=s[i];switch(typeof r){case"undefined":r=s[i]=Object.create(null);break;case"object":break;default:n(`Ignoring ${t} as ${o.slice(0,e+1).join(".")} is ${JSON.stringify(r)}`);return}s=r}if("object"==typeof s&&null!==s)try{s[r]=i}catch(e){n(`Ignoring ${t} as ${o.join(".")} is ${JSON.stringify(s)}`)}else n(`Ignoring ${t} as ${o.join(".")} is ${JSON.stringify(s)}`)}function removeFromValueTree(e,t){let i=t.split(".");doRemoveFromValueTree(e,i)}function doRemoveFromValueTree(e,t){let i=t.shift();if(0===t.length){delete e[i];return}if(-1!==Object.keys(e).indexOf(i)){let n=e[i];"object"!=typeof n||Array.isArray(n)||(doRemoveFromValueTree(n,t),0!==Object.keys(n).length||delete e[i])}}function getConfigurationValue(e,t,i){function accessSetting(e,t){let i=e;for(let e of t){if("object"!=typeof i||null===i)return;i=i[e]}return i}let n=t.split("."),o=accessSetting(e,n);return void 0===o?i:o}function getLanguageTagSettingPlainKey(e){return e.replace(/[\[\]]/g,"")}},61529:function(e,t,i){"use strict";i.d(t,{IP:function(){return u},eU:function(){return k},ny:function(){return overrideIdentifiersFromKey}});var n=i(34794),o=i(57605),r=i(16877),s=i(46157),l=i(78559),d=i(98753),c=i(76924);let u={Configuration:"base.contributions.configuration"},g={properties:{},patternProperties:{}},m={properties:{},patternProperties:{}},f={properties:{},patternProperties:{}},_={properties:{},patternProperties:{}},v={properties:{},patternProperties:{}},C={properties:{},patternProperties:{}},b="vscode://schemas/settings/resourceLanguage",S=c.B.as(d.I.JSONContribution);let ConfigurationRegistry=class ConfigurationRegistry{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new o.Q5,this._onDidUpdateConfiguration=new o.Q5,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:s.NC("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},S.registerSchema(b,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let i=new Set;this.doRegisterConfigurations(e,t,i),S.registerSchema(b,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var i;let n=[];for(let{overrides:o,source:d}of e)for(let e in o)if(t.add(e),k.test(e)){let t=this.configurationDefaultsOverrides.get(e),c=null!==(i=null==t?void 0:t.valuesSources)&&void 0!==i?i:new Map;if(d)for(let t of Object.keys(o[e]))c.set(t,d);let u={...(null==t?void 0:t.value)||{},...o[e]};this.configurationDefaultsOverrides.set(e,{source:d,value:u,valuesSources:c});let g=(0,l.UI)(e),m={type:"object",default:u,description:s.NC("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",g),$ref:b,defaultDefaultValue:u,source:r.HD(d)?void 0:d,defaultValueSource:d};n.push(...overrideIdentifiersFromKey(e)),this.configurationProperties[e]=m,this.defaultLanguageConfigurationOverridesNode.properties[e]=m}else{this.configurationDefaultsOverrides.set(e,{value:o[e],source:d});let t=this.configurationProperties[e];t&&(this.updatePropertyDefaultValue(e,t),this.updateSchema(e,t))}this.doRegisterOverrideIdentifiers(n)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,i),this.configurationContributors.push(e),this.registerJSONConfiguration(e)})}validateAndRegisterProperties(e,t=!0,i,n,o=3,s){var l;o=r.Jp(e.scope)?o:e.scope;let d=e.properties;if(d)for(let e in d){let c=d[e];if(t&&validateProperty(e,c)){delete d[e];continue}if(c.source=i,c.defaultDefaultValue=d[e].default,this.updatePropertyDefaultValue(e,c),k.test(e)?c.scope=void 0:(c.scope=r.Jp(c.scope)?o:c.scope,c.restricted=r.Jp(c.restricted)?!!(null==n?void 0:n.includes(e)):c.restricted),d[e].hasOwnProperty("included")&&!d[e].included){this.excludedConfigurationProperties[e]=d[e],delete d[e];continue}this.configurationProperties[e]=d[e],(null===(l=d[e].policy)||void 0===l?void 0:l.name)&&this.policyConfigurations.set(d[e].policy.name,e),!d[e].deprecationMessage&&d[e].markdownDeprecationMessage&&(d[e].deprecationMessage=d[e].markdownDeprecationMessage),s.add(e)}let c=e.allOf;if(c)for(let e of c)this.validateAndRegisterProperties(e,t,i,n,o,s)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){let register=e=>{let t=e.properties;if(t)for(let e in t)this.updateSchema(e,t[e]);let i=e.allOf;null==i||i.forEach(register)};register(e)}updateSchema(e,t){switch(g.properties[e]=t,t.scope){case 1:m.properties[e]=t;break;case 2:f.properties[e]=t;break;case 6:_.properties[e]=t;break;case 3:v.properties[e]=t;break;case 4:C.properties[e]=t;break;case 5:C.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,i={type:"object",description:s.NC("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:s.NC("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:b};this.updatePropertyDefaultValue(t,i),g.properties[t]=i,m.properties[t]=i,f.properties[t]=i,_.properties[t]=i,v.properties[t]=i,C.properties[t]=i}}registerOverridePropertyPatternKey(){let e={type:"object",description:s.NC("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:s.NC("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:b};g.patternProperties[L]=e,m.patternProperties[L]=e,f.patternProperties[L]=e,_.patternProperties[L]=e,v.patternProperties[L]=e,C.patternProperties[L]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let i=this.configurationDefaultsOverrides.get(e),n=null==i?void 0:i.value,o=null==i?void 0:i.source;r.o8(n)&&(n=t.defaultDefaultValue,o=void 0),r.o8(n)&&(n=getDefaultValue(t.type)),t.default=n,t.defaultValueSource=o}};let y="\\[([^\\]]+)\\]",w=RegExp(y,"g"),L=`^(${y})+$`,k=new RegExp(L);function overrideIdentifiersFromKey(e){let t=[];if(k.test(e)){let i=w.exec(e);for(;null==i?void 0:i.length;){let n=i[1].trim();n&&t.push(n),i=w.exec(e)}}return(0,n.EB)(t)}function getDefaultValue(e){let t=Array.isArray(e)?e[0]:e;switch(t){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}let D=new ConfigurationRegistry;function validateProperty(e,t){var i,n,o,r;return e.trim()?k.test(e)?s.NC("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==D.getConfigurationProperties()[e]?s.NC("config.property.duplicate","Cannot register '{0}'. This property is already registered.",e):(null===(i=t.policy)||void 0===i?void 0:i.name)&&void 0!==D.getPolicyConfigurations().get(null===(n=t.policy)||void 0===n?void 0:n.name)?s.NC("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,null===(o=t.policy)||void 0===o?void 0:o.name,D.getPolicyConfigurations().get(null===(r=t.policy)||void 0===r?void 0:r.name)):null:s.NC("config.property.empty","Cannot register an empty property")}c.B.add(u.Configuration,D)},7193:function(e,t,i){"use strict";i.d(t,{cP:function(){return ContextKeyEqualsExpr},Ao:function(){return ContextKeyExpr},i6:function(){return L},uy:function(){return RawContextKey},Fb:function(){return expressionsAreEqualWithConstantSubstitution},K8:function(){return implies}});var n=i(88059),o=i(45837),r=i(17861),s=i(46157);function hintDidYouMean(...e){switch(e.length){case 1:return(0,s.NC)("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",e[0]);case 2:return(0,s.NC)("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",e[0],e[1]);case 3:return(0,s.NC)("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",e[0],e[1],e[2]);default:return}}let l=(0,s.NC)("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),d=(0,s.NC)("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");let Scanner=class Scanner{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw(0,r.L6)(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;let e=this._advance();switch(e){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let e=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:e})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let e=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:e})}else this._match(126)?this._addToken(9):this._error(hintDidYouMean("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(hintDidYouMean("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(hintDidYouMean("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&this._input.charCodeAt(this._current)===e&&(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;let e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;let t=this._input.substring(this._start,this._current),i=Scanner._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(l);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(d);return}let n=this._input.charCodeAt(e);if(t)t=!1;else if(47!==n||i)91===n?i=!0:92===n?t=!0:93===n&&(i=!1);else{e++;break}e++}for(;e<this._input.length&&Scanner._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;let n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};Scanner._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),Scanner._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);var c=i(27989);let u=new Map;u.set("false",!1),u.set("true",!0),u.set("isMac",n.dz),u.set("isLinux",n.IJ),u.set("isWindows",n.ED),u.set("isWeb",n.$L),u.set("isMacNative",n.dz&&!n.$L),u.set("isEdge",n.un),u.set("isFirefox",n.vU),u.set("isChrome",n.i7),u.set("isSafari",n.G6);let g=Object.prototype.hasOwnProperty,m={regexParsingWithErrorRecovery:!0},f=(0,s.NC)("contextkey.parser.error.emptyString","Empty context key expression"),_=(0,s.NC)("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),v=(0,s.NC)("contextkey.parser.error.noInAfterNot","'in' after 'not'."),C=(0,s.NC)("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),b=(0,s.NC)("contextkey.parser.error.unexpectedToken","Unexpected token"),S=(0,s.NC)("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),y=(0,s.NC)("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),w=(0,s.NC)("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let Parser=class Parser{constructor(e=m){this._config=e,this._scanner=new Scanner,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(""===e){this._parsingErrors.push({message:f,offset:0,lexeme:"",additionalInfo:_});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{let e=this._expr();if(!this._isAtEnd()){let e=this._peek(),t=17===e.type?S:void 0;throw this._parsingErrors.push({message:b,offset:e.offset,lexeme:Scanner.getLexeme(e),additionalInfo:t}),Parser._parseError}return e}catch(e){if(e!==Parser._parseError)throw e;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(16);){let t=this._and();e.push(t)}return 1===e.length?e[0]:ContextKeyExpr.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(15);){let t=this._term();e.push(t)}return 1===e.length?e[0]:ContextKeyExpr.and(...e)}_term(){if(this._matchOne(2)){let e=this._peek();switch(e.type){case 11:return this._advance(),ContextKeyFalseExpr.INSTANCE;case 12:return this._advance(),ContextKeyTrueExpr.INSTANCE;case 0:{this._advance();let e=this._expr();return this._consume(1,C),null==e?void 0:e.negate()}case 17:return this._advance(),ContextKeyNotExpr.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let e=this._peek();switch(e.type){case 11:return this._advance(),ContextKeyExpr.true();case 12:return this._advance(),ContextKeyExpr.false();case 0:{this._advance();let e=this._expr();return this._consume(1,C),e}case 17:{let t=e.lexeme;if(this._advance(),this._matchOne(9)){let e=this._peek();if(!this._config.regexParsingWithErrorRecovery){let i;if(this._advance(),10!==e.type)throw this._errExpectedButGot("REGEX",e);let n=e.lexeme,o=n.lastIndexOf("/"),r=o===n.length-1?void 0:this._removeFlagsGY(n.substring(o+1));try{i=new RegExp(n.substring(1,o),r)}catch(t){throw this._errExpectedButGot("REGEX",e)}return ContextKeyRegexExpr.create(t,i)}switch(e.type){case 10:case 19:{let i;let n=[e.lexeme];this._advance();let o=this._peek(),r=0;for(let t=0;t<e.lexeme.length;t++)40===e.lexeme.charCodeAt(t)?r++:41===e.lexeme.charCodeAt(t)&&r--;for(;!this._isAtEnd()&&15!==o.type&&16!==o.type;){switch(o.type){case 0:r++;break;case 1:r--;break;case 10:case 18:for(let t=0;t<o.lexeme.length;t++)40===o.lexeme.charCodeAt(t)?r++:41===e.lexeme.charCodeAt(t)&&r--}if(r<0)break;n.push(Scanner.getLexeme(o)),this._advance(),o=this._peek()}let s=n.join(""),l=s.lastIndexOf("/"),d=l===s.length-1?void 0:this._removeFlagsGY(s.substring(l+1));try{i=new RegExp(s.substring(1,l),d)}catch(t){throw this._errExpectedButGot("REGEX",e)}return ContextKeyExpr.regex(t,i)}case 18:{let i=e.lexeme;this._advance();let n=null;if(!(0,o.m5)(i)){let t=i.indexOf("/"),o=i.lastIndexOf("/");if(t!==o&&t>=0){let r=i.slice(t+1,o),s="i"===i[o+1]?"i":"";try{n=new RegExp(r,s)}catch(t){throw this._errExpectedButGot("REGEX",e)}}}if(null===n)throw this._errExpectedButGot("REGEX",e);return ContextKeyRegexExpr.create(t,n)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,v);let e=this._value();return ContextKeyExpr.notIn(t,e)}let i=this._peek().type;switch(i){case 3:{this._advance();let e=this._value();if(18===this._previous().type)return ContextKeyExpr.equals(t,e);switch(e){case"true":return ContextKeyExpr.has(t);case"false":return ContextKeyExpr.not(t);default:return ContextKeyExpr.equals(t,e)}}case 4:{this._advance();let e=this._value();if(18===this._previous().type)return ContextKeyExpr.notEquals(t,e);switch(e){case"true":return ContextKeyExpr.not(t);case"false":return ContextKeyExpr.has(t);default:return ContextKeyExpr.notEquals(t,e)}}case 5:return this._advance(),ContextKeySmallerExpr.create(t,this._value());case 6:return this._advance(),ContextKeySmallerEqualsExpr.create(t,this._value());case 7:return this._advance(),ContextKeyGreaterExpr.create(t,this._value());case 8:return this._advance(),ContextKeyGreaterEqualsExpr.create(t,this._value());case 13:return this._advance(),ContextKeyExpr.in(t,this._value());default:return ContextKeyExpr.has(t)}}case 20:throw this._parsingErrors.push({message:y,offset:e.offset,lexeme:"",additionalInfo:w}),Parser._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return!this._isAtEnd()&&this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){let n=(0,s.NC)("contextkey.parser.error.expectedButGot","Expected: {0}\nReceived: '{1}'.",e,Scanner.getLexeme(t)),o=t.offset,r=Scanner.getLexeme(t);return this._parsingErrors.push({message:n,offset:o,lexeme:r,additionalInfo:i}),Parser._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return 20===this._peek().type}};Parser._parseError=Error();let ContextKeyExpr=class ContextKeyExpr{static false(){return ContextKeyFalseExpr.INSTANCE}static true(){return ContextKeyTrueExpr.INSTANCE}static has(e){return ContextKeyDefinedExpr.create(e)}static equals(e,t){return ContextKeyEqualsExpr.create(e,t)}static notEquals(e,t){return ContextKeyNotEqualsExpr.create(e,t)}static regex(e,t){return ContextKeyRegexExpr.create(e,t)}static in(e,t){return ContextKeyInExpr.create(e,t)}static notIn(e,t){return ContextKeyNotInExpr.create(e,t)}static not(e){return ContextKeyNotExpr.create(e)}static and(...e){return ContextKeyAndExpr.create(e,null,!0)}static or(...e){return ContextKeyOrExpr.create(e,null,!0)}static deserialize(e){if(null==e)return;let t=this._parser.parse(e);return t}};function expressionsAreEqualWithConstantSubstitution(e,t){let i=e?e.substituteConstants():void 0,n=t?t.substituteConstants():void 0;return!i&&!n||!!i&&!!n&&i.equals(n)}function cmp(e,t){return e.cmp(t)}ContextKeyExpr._parser=new Parser({regexParsingWithErrorRecovery:!1});let ContextKeyFalseExpr=class ContextKeyFalseExpr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ContextKeyTrueExpr.INSTANCE}};ContextKeyFalseExpr.INSTANCE=new ContextKeyFalseExpr;let ContextKeyTrueExpr=class ContextKeyTrueExpr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return ContextKeyFalseExpr.INSTANCE}};ContextKeyTrueExpr.INSTANCE=new ContextKeyTrueExpr;let ContextKeyDefinedExpr=class ContextKeyDefinedExpr{static create(e,t=null){let i=u.get(e);return"boolean"==typeof i?i?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:new ContextKeyDefinedExpr(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){var t,i;return e.type!==this.type?this.type-e.type:(t=this.key,t<(i=e.key)?-1:t>i?1:0)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){let e=u.get(this.key);return"boolean"==typeof e?e?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotExpr.create(this.key,this)),this.negated}};let ContextKeyEqualsExpr=class ContextKeyEqualsExpr{static create(e,t,i=null){if("boolean"==typeof t)return t?ContextKeyDefinedExpr.create(e,i):ContextKeyNotExpr.create(e,i);let n=u.get(e);return"boolean"==typeof n?t===(n?"true":"false")?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:new ContextKeyEqualsExpr(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&this.key===e.key&&this.value===e.value}substituteConstants(){let e=u.get(this.key);return"boolean"==typeof e?this.value===(e?"true":"false")?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotEqualsExpr.create(this.key,this.value,this)),this.negated}};let ContextKeyInExpr=class ContextKeyInExpr{static create(e,t){return new ContextKeyInExpr(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&this.key===e.key&&this.valueKey===e.valueKey}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):"string"==typeof i&&"object"==typeof t&&null!==t&&g.call(t,i)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=ContextKeyNotInExpr.create(this.key,this.valueKey)),this.negated}};let ContextKeyNotInExpr=class ContextKeyNotInExpr{static create(e,t){return new ContextKeyNotInExpr(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=ContextKeyInExpr.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}};let ContextKeyNotEqualsExpr=class ContextKeyNotEqualsExpr{static create(e,t,i=null){if("boolean"==typeof t)return t?ContextKeyNotExpr.create(e,i):ContextKeyDefinedExpr.create(e,i);let n=u.get(e);return"boolean"==typeof n?t===(n?"true":"false")?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:new ContextKeyNotEqualsExpr(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&this.key===e.key&&this.value===e.value}substituteConstants(){let e=u.get(this.key);return"boolean"==typeof e?this.value===(e?"true":"false")?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyEqualsExpr.create(this.key,this.value,this)),this.negated}};let ContextKeyNotExpr=class ContextKeyNotExpr{static create(e,t=null){let i=u.get(e);return"boolean"==typeof i?i?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:new ContextKeyNotExpr(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){var t,i;return e.type!==this.type?this.type-e.type:(t=this.key,t<(i=e.key)?-1:t>i?1:0)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){let e=u.get(this.key);return"boolean"==typeof e?e?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyDefinedExpr.create(this.key,this)),this.negated}};function withFloatOrStr(e,t){if("string"==typeof e){let t=parseFloat(e);isNaN(t)||(e=t)}return"string"==typeof e||"number"==typeof e?t(e):ContextKeyFalseExpr.INSTANCE}let ContextKeyGreaterExpr=class ContextKeyGreaterExpr{static create(e,t,i=null){return withFloatOrStr(t,t=>new ContextKeyGreaterExpr(e,t,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&this.key===e.key&&this.value===e.value}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerEqualsExpr.create(this.key,this.value,this)),this.negated}};let ContextKeyGreaterEqualsExpr=class ContextKeyGreaterEqualsExpr{static create(e,t,i=null){return withFloatOrStr(t,t=>new ContextKeyGreaterEqualsExpr(e,t,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&this.key===e.key&&this.value===e.value}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerExpr.create(this.key,this.value,this)),this.negated}};let ContextKeySmallerExpr=class ContextKeySmallerExpr{static create(e,t,i=null){return withFloatOrStr(t,t=>new ContextKeySmallerExpr(e,t,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&this.key===e.key&&this.value===e.value}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterEqualsExpr.create(this.key,this.value,this)),this.negated}};let ContextKeySmallerEqualsExpr=class ContextKeySmallerEqualsExpr{static create(e,t,i=null){return withFloatOrStr(t,t=>new ContextKeySmallerEqualsExpr(e,t,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&this.key===e.key&&this.value===e.value}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterExpr.create(this.key,this.value,this)),this.negated}};let ContextKeyRegexExpr=class ContextKeyRegexExpr{static create(e,t){return new ContextKeyRegexExpr(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return -1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotRegexExpr.create(this)),this.negated}};let ContextKeyNotRegexExpr=class ContextKeyNotRegexExpr{static create(e){return new ContextKeyNotRegexExpr(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}};function eliminateConstantsInArray(e){let t=null;for(let i=0,n=e.length;i<n;i++){let n=e[i].substituteConstants();if(e[i]!==n&&null===t){t=[];for(let n=0;n<i;n++)t[n]=e[n]}null!==t&&(t[i]=n)}return null===t?e:t}let ContextKeyAndExpr=class ContextKeyAndExpr{static create(e,t,i){return ContextKeyAndExpr._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return -1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){let i=cmp(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyAndExpr.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){let n=[],o=!1;for(let t of e)if(t){if(1===t.type){o=!0;continue}if(0===t.type)return ContextKeyFalseExpr.INSTANCE;if(6===t.type){n.push(...t.expr);continue}n.push(t)}if(0===n.length&&o)return ContextKeyTrueExpr.INSTANCE;if(0!==n.length){if(1===n.length)return n[0];n.sort(cmp);for(let e=1;e<n.length;e++)n[e-1].equals(n[e])&&(n.splice(e,1),e--);if(1===n.length)return n[0];for(;n.length>1;){let e=n[n.length-1];if(9!==e.type)break;n.pop();let t=n.pop(),o=0===n.length,r=ContextKeyOrExpr.create(e.expr.map(e=>ContextKeyAndExpr.create([e,t],null,i)),null,o);r&&(n.push(r),n.sort(cmp))}if(1===n.length)return n[0];if(i){for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(n[e].negate().equals(n[t]))return ContextKeyFalseExpr.INSTANCE;if(1===n.length)return n[0]}return new ContextKeyAndExpr(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=ContextKeyOrExpr.create(e,this,!0)}return this.negated}};let ContextKeyOrExpr=class ContextKeyOrExpr{static create(e,t,i){return ContextKeyOrExpr._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return -1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){let i=cmp(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyOrExpr.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],o=!1;if(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];if(i){if(0===i.type){o=!0;continue}if(1===i.type)return ContextKeyTrueExpr.INSTANCE;if(9===i.type){n=n.concat(i.expr);continue}n.push(i)}}if(0===n.length&&o)return ContextKeyFalseExpr.INSTANCE;n.sort(cmp)}if(0!==n.length){if(1===n.length)return n[0];for(let e=1;e<n.length;e++)n[e-1].equals(n[e])&&(n.splice(e,1),e--);if(1===n.length)return n[0];if(i){for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(n[e].negate().equals(n[t]))return ContextKeyTrueExpr.INSTANCE;if(1===n.length)return n[0]}return new ContextKeyOrExpr(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),i=e.shift(),n=[];for(let e of getTerminals(t))for(let t of getTerminals(i))n.push(ContextKeyAndExpr.create([e,t],null,!1));e.unshift(ContextKeyOrExpr.create(n,null,!1))}this.negated=ContextKeyOrExpr.create(e,this,!0)}return this.negated}};let RawContextKey=class RawContextKey extends ContextKeyDefinedExpr{static all(){return RawContextKey._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,"object"==typeof i?RawContextKey._info.push({...i,key:e}):!0!==i&&RawContextKey._info.push({key:e,description:i,type:null!=t?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return ContextKeyEqualsExpr.create(this.key,e)}};RawContextKey._info=[];let L=(0,c.yh)("contextKeyService");function cmp2(e,t,i,n){return e<i?-1:e>i?1:t<n?-1:t>n?1:0}function implies(e,t){if(0===e.type||1===t.type)return!0;if(9===e.type)return 9===t.type&&allElementsIncluded(e.expr,t.expr);if(9===t.type){for(let i of t.expr)if(implies(e,i))return!0;return!1}if(6===e.type){if(6===t.type)return allElementsIncluded(t.expr,e.expr);for(let i of e.expr)if(implies(i,t))return!0;return!1}return e.equals(t)}function allElementsIncluded(e,t){let i=0,n=0;for(;i<e.length&&n<t.length;){let o=e[i].cmp(t[n]);if(o<0)return!1;0===o&&i++,n++}return i===e.length}function getTerminals(e){return 9===e.type?e.expr:[e]}},59980:function(e,t,i){"use strict";i.d(t,{Pf:function(){return l},Ul:function(){return c},cv:function(){return s},d0:function(){return d}});var n=i(88059),o=i(46157),r=i(7193);new r.uy("isMac",n.dz,(0,o.NC)("isMac","Whether the operating system is macOS")),new r.uy("isLinux",n.IJ,(0,o.NC)("isLinux","Whether the operating system is Linux"));let s=new r.uy("isWindows",n.ED,(0,o.NC)("isWindows","Whether the operating system is Windows")),l=new r.uy("isWeb",n.$L,(0,o.NC)("isWeb","Whether the platform is a web browser"));new r.uy("isMacNative",n.dz&&!n.$L,(0,o.NC)("isMacNative","Whether the operating system is macOS on a non-browser platform")),new r.uy("isIOS",n.gn,(0,o.NC)("isIOS","Whether the operating system is iOS")),new r.uy("isMobile",n.tq,(0,o.NC)("isMobile","Whether the platform is a mobile web browser")),new r.uy("isDevelopment",!1,!0),new r.uy("productQualityType","",(0,o.NC)("productQualityType","Quality type of VS Code"));let d="inputFocus",c=new r.uy(d,!1,(0,o.NC)("inputFocus","Whether keyboard focus is inside an input box"))},64252:function(e,t,i){"use strict";i.d(t,{i:function(){return r},u:function(){return o}});var n=i(27989);let o=(0,n.yh)("contextViewService"),r=(0,n.yh)("contextMenuService")},96049:function(e,t,i){"use strict";i.d(t,{S:function(){return o}});var n=i(27989);let o=(0,n.yh)("dialogService")},77680:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var n=i(27989);let o=(0,n.yh)("environmentService")},57561:function(e,t,i){"use strict";i.d(t,{M:function(){return SyncDescriptor}});let SyncDescriptor=class SyncDescriptor{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}},95026:function(e,t,i){"use strict";i.d(t,{d:function(){return getSingletonServiceDescriptors},z:function(){return registerSingleton}});var n=i(57561);let o=[];function registerSingleton(e,t,i){t instanceof n.M||(t=new n.M(t,[],!!i)),o.push([e,t])}function getSingletonServiceDescriptors(){return o}},27989:function(e,t,i){"use strict";var n;i.d(t,{I8:function(){return n},TG:function(){return o},yh:function(){return createDecorator}}),function(e){function getServiceDependencies(t){return t[e.DI_DEPENDENCIES]||[]}e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=getServiceDependencies}(n||(n={}));let o=createDecorator("instantiationService");function storeServiceDependency(e,t,i){t[n.DI_TARGET]===t?t[n.DI_DEPENDENCIES].push({id:e,index:i}):(t[n.DI_DEPENDENCIES]=[{id:e,index:i}],t[n.DI_TARGET]=t)}function createDecorator(e){if(n.serviceIds.has(e))return n.serviceIds.get(e);let id=function(e,t,i){if(3!=arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");storeServiceDependency(id,e,i)};return id.toString=()=>e,n.serviceIds.set(e,id),id}},3488:function(e,t,i){"use strict";i.d(t,{y:function(){return ServiceCollection}});let ServiceCollection=class ServiceCollection{constructor(...e){for(let[t,i]of(this._entries=new Map,e))this.set(t,i)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}},98753:function(e,t,i){"use strict";i.d(t,{I:function(){return r}});var n=i(57605),o=i(76924);let r={JSONContribution:"base.contributions.json"};function normalizeId(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}let JSONContributionRegistry=class JSONContributionRegistry{constructor(){this._onDidChangeSchema=new n.Q5,this.schemasById={}}registerSchema(e,t){this.schemasById[normalizeId(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};let s=new JSONContributionRegistry;o.B.add(r.JSONContribution,s)},18333:function(e,t,i){"use strict";i.d(t,{d:function(){return o}});var n=i(27989);let o=(0,n.yh)("keybindingService")},37139:function(e,t,i){"use strict";i.d(t,{W:function(){return c}});var n=i(32155),o=i(88059),r=i(56143),s=i(76924),l=i(87932),d=i(68324);let KeybindingsRegistryImpl=class KeybindingsRegistryImpl{constructor(){this._coreKeybindings=new d.S,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(1===o.OS){if(e&&e.win)return e.win}else if(2===o.OS){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=KeybindingsRegistryImpl.bindToCurrentPlatform(e),i=new l.SL;if(t&&t.primary){let r=(0,n.Z9)(t.primary,o.OS);r&&i.add(this._registerDefaultKeybinding(r,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let r=0,s=t.secondary.length;r<s;r++){let s=t.secondary[r],l=(0,n.Z9)(s,o.OS);l&&i.add(this._registerDefaultKeybinding(l,e.id,e.args,e.weight,-r-1,e.when))}return i}registerCommandAndKeybindingRule(e){return(0,l.F8)(this.registerKeybindingRule(e),r.P.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,o,r){let s=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:n,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,(0,l.OF)(()=>{s(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(sorter)),this._cachedMergedKeybindings.slice(0)}};let c=new KeybindingsRegistryImpl;function sorter(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return -1;if(e.command>t.command)return 1}return e.weight2-t.weight2}s.B.add("platform.keybindingsRegistry",c)},15786:function(e,t,i){"use strict";i.d(t,{e:function(){return o}});var n=i(27989);let o=(0,n.yh)("labelService")},66870:function(e,t,i){"use strict";i.d(t,{Lw:function(){return J},XN:function(){return ListService},ls:function(){return eB},ev:function(){return eM},CQ:function(){return en},PS:function(){return ed},uJ:function(){return ec}});var n,o,r,s,l,d,c,u,g,m,f=i(70687),_=i(34794),v=i(45828),C=i(57605),b=i(87932);i(50301);var S=i(88660);let PagedRenderer=class PagedRenderer{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){let t=this.renderer.renderTemplate(e);return{data:t,disposable:b.JT.None}}renderElement(e,t,i,n){var o;if(null===(o=i.disposable)||void 0===o||o.dispose(),!i.data)return;let r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,n);let s=new v.A,l=r.resolve(e,s.token);i.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,i.data),l.then(t=>this.renderer.renderElement(t,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}};let PagedAccessibilityProvider=class PagedAccessibilityProvider{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function fromPagedListOptions(e,t){return{...t,accessibilityProvider:t.accessibilityProvider&&new PagedAccessibilityProvider(e,t.accessibilityProvider)}}let PagedList=class PagedList{constructor(e,t,i,n,o={}){let modelProvider=()=>this.model,r=n.map(e=>new PagedRenderer(e,modelProvider));this.list=new S.aV(e,t,i,r,fromPagedListOptions(modelProvider,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return C.ju.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return C.ju.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return C.ju.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(e=>this._model.get(e)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,(0,_.w6)(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}};var y=i(41273),w=i(91502),L=i(36118);i(27115);let TableListRenderer=class TableListRenderer{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=TableListRenderer.TemplateId,this.renderedTemplates=new Set;let n=new Map(t.map(e=>[e.templateId,e]));for(let t of(this.renderers=[],e)){let e=n.get(t.templateId);if(!e)throw Error(`Table cell renderer for template id ${t.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){let t=(0,f.R3)(e,(0,f.$)(".monaco-table-tr")),i=[],n=[];for(let e=0;e<this.columns.length;e++){let o=this.renderers[e],r=(0,f.R3)(t,(0,f.$)(".monaco-table-td",{"data-col-index":e}));r.style.width=`${this.getColumnSize(e)}px`,i.push(r),n.push(o.renderTemplate(r))}let o={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(o),o}renderElement(e,t,i,n){for(let o=0;o<this.columns.length;o++){let r=this.columns[o],s=r.project(e),l=this.renderers[o];l.renderElement(s,t,i.cellTemplateData[o],n)}}disposeElement(e,t,i,n){for(let o=0;o<this.columns.length;o++){let r=this.renderers[o];if(r.disposeElement){let s=this.columns[o],l=s.project(e);r.disposeElement(l,t,i.cellTemplateData[o],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){let i=this.renderers[t];i.disposeTemplate(e.cellTemplateData[t])}(0,f.PO)(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};function asListVirtualDelegate(e){return{getHeight:t=>e.getHeight(t),getTemplateId:()=>TableListRenderer.TemplateId}}TableListRenderer.TemplateId="row";let ColumnHeader=class ColumnHeader extends b.JT{get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:C.ju.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new C.Q5,this.onDidLayout=this._onDidLayout.event,this.element=(0,f.$)(".monaco-table-th",{"data-col-index":t},e.label),this._register((0,w.g)((0,y.t)("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}};let Table=class Table{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,o,r){this.virtualDelegate=i,this.domId=`table_id_${++Table.InstanceCount}`,this.disposables=new b.SL,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,f.R3)(t,(0,f.$)(`.monaco-table.${this.domId}`));let s=n.map((e,t)=>this.disposables.add(new ColumnHeader(e,t))),l={size:s.reduce((e,t)=>e+t.column.weight,0),views:s.map(e=>({size:e.column.weight,view:e}))};this.splitview=this.disposables.add(new L.z(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;let d=new TableListRenderer(n,o,e=>this.splitview.getViewSize(e));this.list=this.disposables.add(new S.aV(e,this.domNode,asListVirtualDelegate(i),[d],r)),C.ju.any(...s.map(e=>e.onDidLayout))(([e,t])=>d.layoutColumn(e,t),null,this.disposables),this.splitview.onDidSashReset(e=>{let t=n.reduce((e,t)=>e+t.weight,0),i=n[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,i)},null,this.disposables),this.styleElement=(0,f.dS)(this.domNode),this.style(S.uZ)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};Table.InstanceCount=0,i(53426);var k=i(58731);i(83367),i(43811);var D=i(61313),x=i(75365),N=i(24311);(n=d||(d={}))[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed",(o=c||(c={}))[o.Unknown=0]="Unknown",o[o.Twistie=1]="Twistie",o[o.Element=2]="Element",o[o.Filter=3]="Filter";let TreeError=class TreeError extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}};let WeakMapper=class WeakMapper{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}};var E=i(66614),I=i(85852),T=i(17405),M=i(50885);function isFilterResult(e){return"object"==typeof e&&"visibility"in e&&"data"in e}function getVisibleState(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function isCollapsibleStateUpdate(e){return"boolean"==typeof e.collapsible}let IndexTreeModel=class IndexTreeModel{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new C.E7,this._onDidChangeCollapseState=new C.Q5,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new C.Q5,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new C.Q5,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new E.vp(I.n),this.collapseByDefault=void 0!==n.collapseByDefault&&n.collapseByDefault,this.filter=n.filter,this.autoExpandSingleChildren=void 0!==n.autoExpandSingleChildren&&n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=M.$.empty(),n={}){if(0===e.length)throw new TreeError(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n,o,r){var s;void 0===n&&(n=M.$.empty()),void 0===r&&(r=null!==(s=o.diffDepth)&&void 0!==s?s:0);let{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,n,o);let d=[...n],c=t[t.length-1],u=new T.Hs({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,c),...d,...l.children.slice(c+i)].map(t=>e.getId(t.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,d,o);let g=t.slice(0,-1),recurseSplice=(t,i,n)=>{if(r>0)for(let s=0;s<n;s++)t--,i--,this.spliceSmart(e,[...g,t,0],Number.MAX_SAFE_INTEGER,d[i].children,o,r-1)},m=Math.min(l.children.length,c+i),f=d.length;for(let e of u.changes.sort((e,t)=>t.originalStart-e.originalStart))recurseSplice(m,f,m-(e.originalStart+e.originalLength)),m=e.originalStart,f=e.modifiedStart-c,this.spliceSimple([...g,m],e.originalLength,M.$.slice(d,f,f+e.modifiedLength),o);recurseSplice(m,f,m)}spliceSimple(e,t,i=M.$.empty(),{onDidCreateNode:n,onDidDeleteNode:o,diffIdentityProvider:r}){let{parentNode:s,listIndex:l,revealed:d,visible:c}=this.getParentNodeWithListIndex(e),u=[],g=M.$.map(i,e=>this.createTreeNode(e,s,s.visible?1:0,d,u,n)),m=e[e.length-1],f=0;for(let e=m;e>=0&&e<s.children.length;e--){let t=s.children[e];if(t.visible){f=t.visibleChildIndex;break}}let v=[],C=0,b=0;for(let e of g)v.push(e),b+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=f+C++);let S=(0,_.db)(s.children,m,t,v);r?s.lastDiffIds?(0,_.db)(s.lastDiffIds,m,t,v.map(e=>r.getId(e.element).toString())):s.lastDiffIds=s.children.map(e=>r.getId(e.element).toString()):s.lastDiffIds=void 0;let y=0;for(let e of S)e.visible&&y++;if(0!==y)for(let e=m+v.length;e<s.children.length;e++){let t=s.children[e];t.visible&&(t.visibleChildIndex-=y)}if(s.visibleChildrenCount+=C-y,d&&c){let e=S.reduce((e,t)=>e+(t.visible?t.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(s,b-e),this.list.splice(l,e,u)}if(S.length>0&&o){let visit=e=>{o(e),e.children.forEach(visit)};S.forEach(visit)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:S});let w=s;for(;w;){if(2===w.visibility){this.refilterDelayer.trigger(()=>this.refilter());break}w=w.parent}}rerender(e){if(0===e.length)throw new TreeError(this.user,"Invalid tree location");let{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);let n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){let n=this.getTreeNode(e);void 0===t&&(t=!n.collapsed);let o={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){let{node:i,listIndex:n,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,n,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!isCollapsibleStateUpdate(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let n=-1;for(let e=0;e<i.children.length;e++){let t=i.children[e];if(t.visible){if(n>-1){n=-1;break}n=e}}n>-1&&this._setCollapseState([...e,n],t)}return r}_setListNodeCollapseState(e,t,i,n){let o=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!o)return o;let r=e.renderNodeCount,s=this.updateNodeAfterCollapseChange(e),l=r-(-1===t?0:1);return this.list.splice(t+1,l,s.slice(1)),o}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(isCollapsibleStateUpdate(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!isCollapsibleStateUpdate(t)&&t.recursive)for(let i of e.children)n=this._setNodeCollapseState(i,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,o,r){let s={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(s,i);s.visibility=l,n&&o.push(s);let d=e.children||M.$.empty(),c=n&&0!==l&&!s.collapsed,u=0,g=1;for(let e of d){let t=this.createTreeNode(e,s,l,c,o,r);s.children.push(t),g+=t.renderNodeCount,t.visible&&(t.visibleChildIndex=u++)}return s.collapsible=s.collapsible||s.children.length>0,s.visibleChildrenCount=u,s.visible=2===l?u>0:1===l,s.visible?s.collapsed||(s.renderNodeCount=g):(s.renderNodeCount=0,n&&o.pop()),null==r||r(s),s}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let o;if(e!==this.root){if(0===(o=this._filterNode(e,t)))return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}let r=i.length;e.renderNodeCount=e===this.root?0:1;let s=!1;if(e.collapsed&&0===o)e.visibleChildrenCount=0;else{let t=0;for(let r of e.children)s=this._updateNodeAfterFilterChange(r,o,i,n&&!e.collapsed)||s,r.visible&&(r.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===o?s:1===o,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let i=this.filter?this.filter.filter(e.element,t):1;return"boolean"==typeof i?(e.filterData=void 0,i?1:0):isFilterResult(i)?(e.filterData=i.data,getVisibleState(i.visibility)):(e.filterData=void 0,getVisibleState(i))}hasTreeNode(e,t=this.root){if(!e||0===e.length)return!0;let[i,...n]=e;return!(i<0)&&!(i>t.children.length)&&this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||0===e.length)return t;let[i,...n]=e;if(i<0||i>t.children.length)throw new TreeError(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:i,revealed:n,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new TreeError(this.user,"Invalid tree location");let s=t.children[r];return{node:s,listIndex:i,revealed:n,visible:o&&s.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,o=!0){let[r,...s]=e;if(r<0||r>t.children.length)throw new TreeError(this.user,"Invalid tree location");for(let e=0;e<r;e++)i+=t.children[e].renderNodeCount;return(n=n&&!t.collapsed,o=o&&t.visible,0===s.length)?{parentNode:t,listIndex:i,revealed:n,visible:o}:this.getParentNodeWithListIndex(s,t.children[r],i+1,n,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:(0,_.JH)(e)[0]}getFirstElementChild(e){let t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}};i(9252);var R=i(84530),A=i(98847),P=i(30619),O=i(61171),F=i(78007),B=i(16877);i(97117);var W=i(46157);let TreeElementsDragAndDropData=class TreeElementsDragAndDropData extends x.kX{constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function asTreeDragAndDropData(e){return e instanceof x.kX?new TreeElementsDragAndDropData(e):e}let TreeNodeListDragAndDrop=class TreeNodeListDragAndDrop{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=b.JT.None,this.disposables=new b.SL}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){var i,n;null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,asTreeDragAndDropData(e),t)}onDragOver(e,t,i,n,o,r=!0){let s=this.dnd.onDragOver(asTreeDragAndDropData(e),t&&t.element,i,n,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return s;if(l&&"boolean"!=typeof s&&s.autoExpand&&(this.autoExpandDisposable=(0,E.Vg)(()=>{let e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0},500,this.disposables)),"boolean"==typeof s||!s.accept||void 0===s.bubble||s.feedback){if(!r){let e="boolean"==typeof s?s:s.accept,t="boolean"==typeof s?void 0:s.effect;return{accept:e,effect:t,feedback:[i]}}return s}if(1===s.bubble){let i=this.modelProvider(),r=i.getNodeLocation(t),s=i.getParentNodeLocation(r),l=i.getNode(s),d=s&&i.getListIndex(s);return this.onDragOver(e,l,d,n,o,!1)}let d=this.modelProvider(),c=d.getNodeLocation(t),u=d.getListIndex(c),g=d.getListRenderCount(c);return{...s,feedback:(0,_.w6)(u,u+g)}}drop(e,t,i,n,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(asTreeDragAndDropData(e),t&&t.element,i,n,o)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}};function asListOptions(e,t){return t&&{...t,identityProvider:t.identityProvider&&{getId:e=>t.identityProvider.getId(e.element)},dnd:t.dnd&&new TreeNodeListDragAndDrop(e,t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent:e=>t.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element}),isSelectionRangeChangeEvent:e=>t.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})},accessibilityProvider:t.accessibilityProvider&&{...t.accessibilityProvider,getSetSize(t){let i=e(),n=i.getNodeLocation(t),o=i.getParentNodeLocation(n),r=i.getNode(o);return r.visibleChildrenCount},getPosInSet:e=>e.visibleChildIndex+1,isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?e=>t.accessibilityProvider.isChecked(e.element):void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?e=>t.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel:e=>t.accessibilityProvider.getAriaLabel(e.element),getWidgetAriaLabel:()=>t.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?e=>t.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(e=>t.accessibilityProvider.getActiveDescendantId(e.element))},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:e=>t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}}let ComposedTreeDelegate=class ComposedTreeDelegate{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,n;null===(n=(i=this.delegate).setDynamicHeight)||void 0===n||n.call(i,e.element,t)}};(r=u||(u={})).None="none",r.OnHover="onHover",r.Always="always";let EventCollection=class EventCollection{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new b.SL,this.onDidChange=C.ju.forEach(e,e=>this._elements=e,this.disposables)}dispose(){this.disposables.dispose()}};let TreeRenderer=class TreeRenderer{constructor(e,t,i,n,o,r={}){var s;this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=TreeRenderer.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=b.JT.None,this.disposables=new b.SL,this.templateId=e.templateId,this.updateOptions(r),C.ju.map(i,e=>e.node)(this.onDidChangeNodeTwistieState,this,this.disposables),null===(s=e.onDidChangeTwistieState)||void 0===s||s.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(void 0!==e.indent){let t=(0,F.uZ)(e.indent,0,40);if(t!==this.indent)for(let[e,i]of(this.indent=t,this.renderedNodes))this.renderTreeElement(e,i)}if(void 0!==e.renderIndentGuides){let t=e.renderIndentGuides!==u.None;if(t!==this.shouldRenderIndentGuides){for(let[e,i]of(this.shouldRenderIndentGuides=t,this.renderedNodes))this._renderIndentGuides(e,i);if(this.indentGuidesDisposable.dispose(),t){let e=new b.SL;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}void 0!==e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){let t=(0,f.R3)(e,(0,f.$)(".monaco-tl-row")),i=(0,f.R3)(t,(0,f.$)(".monaco-tl-indent")),n=(0,f.R3)(t,(0,f.$)(".monaco-tl-twistie")),o=(0,f.R3)(t,(0,f.$)(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:i,twistie:n,indentGuidesDisposable:b.JT.None,templateData:r}}renderElement(e,t,i,n){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){var o,r;i.indentGuidesDisposable.dispose(),null===(r=(o=this.renderer).disposeElement)||void 0===r||r.call(o,e,t,i.templateData,n),"number"==typeof n&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){let i=TreeRenderer.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...A.k.asClassNameArray(R.l.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...A.k.asClassNameArray(R.l.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if((0,f.PO)(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let i=new b.SL,n=this.modelProvider();for(;;){let o=n.getNodeLocation(e),r=n.getParentNodeLocation(o);if(!r)break;let s=n.getNode(r),l=(0,f.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(s)&&l.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(s,l),i.add((0,b.OF)(()=>this.renderedIndentGuides.delete(s,l))),e=s}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set,i=this.modelProvider();e.forEach(e=>{let n=i.getNodeLocation(e);try{let o=i.getParentNodeLocation(n);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):o&&t.add(i.getNode(o))}catch(e){}}),this.activeIndentNodes.forEach(e=>{t.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.remove("active"))}),t.forEach(e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,b.B9)(this.disposables)}};TreeRenderer.DefaultIndent=8;let FindFilter=class FindFilter{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new b.SL,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){let n=this._filter.filter(e,t);if(0===(i="boolean"==typeof n?n?1:0:isFilterResult(n)?getVisibleState(n.visibility):n))return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:O.CL.Default,visibility:i};let n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(n)?n:[n];for(let e of o){let t;let n=e&&e.toString();if(void 0===n)return{data:O.CL.Default,visibility:i};if(this.tree.findMatchType===m.Contiguous){let e=n.toLowerCase().indexOf(this._lowercasePattern);if(e>-1){t=[Number.MAX_SAFE_INTEGER,0];for(let i=this._lowercasePattern.length;i>0;i--)t.push(e+i-1)}}else t=(0,O.EW)(this._pattern,this._lowercasePattern,0,n,n.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(t)return this._matchCount++,1===o.length?{data:t,visibility:i}:{data:{label:n,score:t},visibility:i}}return this.tree.findMode!==g.Filter?{data:O.CL.Default,visibility:i}:"number"==typeof this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,b.B9)(this.disposables)}};D.g4,N.D,(s=g||(g={}))[s.Highlight=0]="Highlight",s[s.Filter=1]="Filter",(l=m||(m={}))[l.Fuzzy=0]="Fuzzy",l[l.Contiguous=1]="Contiguous";let FindController=class FindController{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n,o,r={}){var s,l;this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=o,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new C.Q5,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new C.Q5,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new C.Q5,this._onDidChangeOpenState=new C.Q5,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new b.SL,this.disposables=new b.SL,this._mode=null!==(s=e.options.defaultFindMode)&&void 0!==s?s:g.Highlight,this._matchType=null!==(l=e.options.defaultFindMatchType)&&void 0!==l?l:m.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){void 0!==e.defaultFindMode&&(this.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}render(){var e,t,i,n;let o=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&o?null===(e=this.tree.options.showNotFoundMessage)||void 0===e||e?null===(t=this.widget)||void 0===t||t.showMessage({type:2,content:(0,W.NC)("not found","No elements found.")}):null===(i=this.widget)||void 0===i||i.showMessage({type:2}):null===(n=this.widget)||void 0===n||n.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1||!O.CL.isDefault(e.filterData)}layout(e){var t;this.width=e,null===(t=this.widget)||void 0===t||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function stickyScrollNodeStateEquals(e,t){return e.position===t.position&&stickyScrollNodeEquals(e,t)}function stickyScrollNodeEquals(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}let StickyScrollState=class StickyScrollState{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return(0,_.fS)(this.stickyNodes,e.stickyNodes,stickyScrollNodeStateEquals)}lastNodePartiallyVisible(){if(0===this.count)return!1;let e=this.stickyNodes[this.count-1];if(1===this.count)return 0!==e.position;let t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!(0,_.fS)(this.stickyNodes,e.stickyNodes,stickyScrollNodeEquals)||0===this.count)return!1;let t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}};let DefaultStickyScrollDelegate=class DefaultStickyScrollDelegate{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){let o=e[n],r=o.position+o.height;if(r>i||n>=t)return e.slice(0,n)}return e}};let StickyScrollController=class StickyScrollController extends b.JT{constructor(e,t,i,n,o,r={}){var s;super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=o,this.maxWidgetViewRatio=.4;let l=this.validateStickySettings(r);this.stickyScrollMaxItemCount=l.stickyScrollMaxItemCount,this.stickyScrollDelegate=null!==(s=r.stickyScrollDelegate)&&void 0!==s?s:new DefaultStickyScrollDelegate,this._widget=this._register(new StickyScrollWidget(i.getScrollableElement(),i,e,n,o,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}getNodeAtHeight(e){let t;if(!((t=0===e?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop))<0)&&!(t>=this.view.length))return this.view.element(t)}update(){let e=this.getNodeAtHeight(0);if(!e||0===this.tree.scrollTop){this._widget.setState(void 0);return}let t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){let t=[],i=e,n=0,o=this.getNextStickyNode(i,void 0,n);for(;o&&(t.push(o),n+=o.height,!(t.length<=this.stickyScrollMaxItemCount)||(i=this.getNextVisibleNode(o)));)o=this.getNextStickyNode(i,o.node,n);let r=this.constrainStickyNodes(t);return r.length?new StickyScrollState(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){let n=this.getAncestorUnderPrevious(e,t);if(!(!n||n===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(n,i)}nodeTopAlignsWithStickyNodesBottom(e,t){let i=this.getNodeIndex(e),n=this.view.getElementTop(i);return this.view.scrollTop===n-t}createStickyScrollNode(e,t){let i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:o}=this.getNodeRange(e),r=this.calculateStickyNodePosition(o,t,i);return{node:e,position:r,height:i,startIndex:n,endIndex:o}}getAncestorUnderPrevious(e,t){let i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(void 0===t)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(null===n&&this.view.firstVisibleIndex===e&&e+1<this.view.length){let t=this.treeDelegate.getHeight(this.view.element(e)),i=this.view.getRelativeTop(e+1);n=i?i-t/this.view.renderHeight:null}if(null===n)return t;let o=this.view.element(e),r=this.treeDelegate.getHeight(o),s=n*this.view.renderHeight,l=s+r;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(0===e.length)return[];let t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;let n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];let o=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||o.position+o.height>t)throw Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){let t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){let t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){let t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);return i}getNodeRange(e){let t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw Error("Node not found in tree");let n=this.model.getListRenderCount(t);return{startIndex:i,endIndex:i+n-1}}nodePositionTopBelowWidget(e){let t=[],i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let e=0;e<t.length&&e<this.stickyScrollMaxItemCount;e++)n+=this.treeDelegate.getHeight(t[e]);return n}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;let t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return"number"==typeof e.stickyScrollMaxItemCount&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}};let StickyScrollWidget=class StickyScrollWidget{constructor(e,t,i,n,o,r){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=o,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new b.SL,this._rootDomNode=(0,f.$)(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);let s=(0,f.$)(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(s),this.stickyScrollFocus=new StickyScrollFocus(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}setState(e){let t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}let n=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${n.position}px`;else{this._previousStateDisposables.clear();let t=Array(e.count);for(let i=e.count-1;i>=0;i--){let n=e.stickyNodes[i],{element:o,disposable:r}=this.createElement(n,i,e.count);t[i]=o,this._rootDomNode.appendChild(o),this._previousStateDisposables.add(r)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}createElement(e,t,i){let n=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,o.style.height=`${e.height}px`,o.style.lineHeight=`${e.height}px`,o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${n}`),o.setAttribute("data-parity",n%2==0?"even":"odd"),o.setAttribute("id",this.view.getElementID(n)),this.setAccessibilityAttributes(o,e.node.element,t,i);let r=this.treeDelegate.getTemplateId(e.node),s=this.treeRenderers.find(e=>e.templateId===r);if(!s)throw Error(`No renderer found for template id ${r}`);let l=e.node;l===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(l=new Proxy(e.node,{}));let d=s.renderTemplate(o);s.renderElement(l,e.startIndex,d,e.height);let c=(0,b.OF)(()=>{s.disposeElement(l,e.startIndex,d,e.height),s.disposeTemplate(d),o.remove()});return{element:o,disposable:c}}setAccessibilityAttributes(e,t,i,n){var o;if(!this.accessibilityProvider)return;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",null!==(o=this.accessibilityProvider.getRole(t))&&void 0!==o?o:"treeitem");let r=this.accessibilityProvider.getAriaLabel(t);r&&e.setAttribute("aria-label",r);let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);"number"==typeof s&&e.setAttribute("aria-level",`${s}`),e.setAttribute("aria-selected",String(!1))}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};let StickyScrollFocus=class StickyScrollFocus extends b.JT{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new C.Q5,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new C.Q5,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",()=>this.onFocus()),this.container.addEventListener("blur",()=>this.onBlur()),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(e=>this.onKeyDown(e))),this._register(this.view.onMouseDown(e=>this.onMouseDown(e))),this._register(this.view.onContextMenu(e=>this.handleContextMenu(e)))}handleContextMenu(e){let t=e.browserEvent.target;if(!(0,S.xf)(t)&&!(0,S.Et)(t)){this.focusedLast()&&this.view.domFocus();return}if(!(0,f.vd)(e.browserEvent)){if(!this.state)throw Error("Context menu should not be triggered when state is undefined");let t=this.state.stickyNodes.findIndex(t=>{var i;return t.node.element===(null===(i=e.element)||void 0===i?void 0:i.element)});if(-1===t)throw Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(t);return}if(!this.state||this.focusedIndex<0)throw Error("Context menu key should not be triggered when focus is not in sticky scroll widget");let i=this.state.stickyNodes[this.focusedIndex],n=i.node.element,o=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:o,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if("ArrowUp"===e.key)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if("ArrowDown"===e.key||"ArrowRight"===e.key){if(this.focusedIndex>=this.state.count-1){let e=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([e]),this.scrollNodeUnderWidget(e,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){let t=e.browserEvent.target;((0,S.xf)(t)||(0,S.Et)(t))&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&0===t.count)throw Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw Error("Sticky scroll focus received illigel state");let i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){let e=(0,F.uZ)(i,0,t.count-1);this.setFocus(e)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){let t=this.state;if(!t)throw Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){let i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){let i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,o=this.view.getElementTop(e),r=n?n.position+n.height+i.height:i.height;this.view.scrollTop=o-r}domFocus(){if(!this.state)throw Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){-1!==this.focusedIndex&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw Error("Cannot set focus index to an index that does not exist");let t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){e.classList.toggle("focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||0===this.elements.length)throw Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),-1===this.focusedIndex&&this.setFocus(0)}onBlur(){this.domHasFocus=!1}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}};function asTreeMouseEvent(e){let t=c.Unknown;return(0,f.uU)(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=c.Twistie:(0,f.uU)(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=c.Element:(0,f.uU)(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=c.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function dfs(e,t){t(e),e.children.forEach(e=>dfs(e,t))}let Trait=class Trait{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new C.Q5,this.onDidChange=this._onDidChange.event}set(e,t){!(null==t?void 0:t.__forceEvent)&&(0,_.fS)(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){let e=this.createNodeSet(),visit=t=>e.delete(t);t.forEach(e=>dfs(e,visit)),this.set([...e.values()]);return}let i=new Set,deletedNodesVisitor=e=>i.add(this.identityProvider.getId(e.element).toString());t.forEach(e=>dfs(e,deletedNodesVisitor));let n=new Map,insertedNodesVisitor=e=>n.set(this.identityProvider.getId(e.element).toString(),e);e.forEach(e=>dfs(e,insertedNodesVisitor));let o=[];for(let e of this.nodes){let t=this.identityProvider.getId(e.element).toString(),r=i.has(t);if(r){let e=n.get(t);e&&e.visible&&o.push(e)}else o.push(e)}if(this.nodes.length>0&&0===o.length){let e=this.getFirstViewElementWithTrait();e&&o.push(e)}this._set(o,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}};let TreeNodeListMouseController=class TreeNodeListMouseController extends S.sx{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if((0,S.iK)(e.browserEvent.target)||(0,S.cK)(e.browserEvent.target)||(0,S.hD)(e.browserEvent.target)||e.browserEvent.isHandledByList)return;let t=e.element;if(!t||this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);let i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=(0,S.Et)(e.browserEvent.target),r=!1;if(r=!!o||("function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick),o)this.handleStickyScrollMouseEvent(e,t);else if(r&&!n&&2!==e.browserEvent.detail||!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e);if(t.collapsible&&(!o||n)){let i=this.tree.getNodeLocation(t),o=e.browserEvent.altKey;if(this.tree.setFocus([i]),this.tree.toggleCollapsed(i,o),r&&n){e.browserEvent.isHandledByList=!0;return}}o||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if((0,S.$B)(e.browserEvent.target)||(0,S.dk)(e.browserEvent.target))return;let i=this.stickyScrollProvider();if(!i)throw Error("Sticky scroll controller not found");let n=this.list.indexOf(t),o=this.list.getElementTop(n),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=o-r,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){let t=e.browserEvent.target.classList.contains("monaco-tl-twistie");t||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){let t=e.browserEvent.target;if(!(0,S.xf)(t)&&!(0,S.Et)(t)){super.onMouseDown(e);return}}onContextMenu(e){let t=e.browserEvent.target;if(!(0,S.xf)(t)&&!(0,S.Et)(t)){super.onContextMenu(e);return}}};let TreeNodeList=class TreeNodeList extends S.aV{constructor(e,t,i,n,o,r,s,l){super(e,t,i,n,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=s}createMouseController(e){return new TreeNodeListMouseController(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){let n;if(super.splice(e,t,i),0===i.length)return;let o=[],r=[];i.forEach((t,i)=>{this.focusTrait.has(t)&&o.push(e+i),this.selectionTrait.has(t)&&r.push(e+i),this.anchorTrait.has(t)&&(n=e+i)}),o.length>0&&super.setFocus((0,_.EB)([...super.getFocus(),...o])),r.length>0&&super.setSelection((0,_.EB)([...super.getSelection(),...r])),"number"==typeof n&&super.setAnchor(n)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(e=>this.element(e)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(e=>this.element(e)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}};let AbstractTree=class AbstractTree{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return C.ju.filter(C.ju.map(this.view.onMouseDblClick,asTreeMouseEvent),e=>e.target!==c.Filter)}get onPointer(){return C.ju.map(this.view.onPointer,asTreeMouseEvent)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return C.ju.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.mode)&&void 0!==t?t:g.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.matchType)&&void 0!==t?t:m.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n,o={}){var r;let s;this._user=e,this._options=o,this.eventBufferer=new C.E7,this.onDidChangeFindOpenState=C.ju.None,this.onDidChangeStickyScrollFocused=C.ju.None,this.disposables=new b.SL,this._onWillRefilter=new C.Q5,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new C.Q5,this.treeDelegate=new ComposedTreeDelegate(i);let l=new C.ZD,d=new C.ZD,c=this.disposables.add(new EventCollection(d.event)),g=new P.ri;for(let e of(this.renderers=n.map(e=>new TreeRenderer(e,()=>this.model,l.event,c,g,o)),this.renderers))this.disposables.add(e);o.keyboardNavigationLabelProvider&&(s=new FindFilter(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:s},this.disposables.add(s)),this.focus=new Trait(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new Trait(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new Trait(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new TreeNodeList(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...asListOptions(()=>this.model,o),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,o),l.input=this.model.onDidChangeCollapseState;let m=C.ju.forEach(this.model.onDidSplice,e=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)})},this.disposables);m(()=>null,null,this.disposables);let _=this.disposables.add(new C.Q5),v=this.disposables.add(new E.vp(0));if(this.disposables.add(C.ju.any(m,this.focus.onDidChange,this.selection.onDidChange)(()=>{v.trigger(()=>{let e=new Set;for(let t of this.focus.getNodes())e.add(t);for(let t of this.selection.getNodes())e.add(t);_.fire([...e.values()])})})),d.input=_.event,!1!==o.keyboardSupport){let e=C.ju.chain(this.view.onKeyDown,e=>e.filter(e=>!(0,S.cK)(e.target)).map(e=>new k.y(e)));C.ju.chain(e,e=>e.filter(e=>15===e.keyCode))(this.onLeftArrow,this,this.disposables),C.ju.chain(e,e=>e.filter(e=>17===e.keyCode))(this.onRightArrow,this,this.disposables),C.ju.chain(e,e=>e.filter(e=>10===e.keyCode))(this.onSpace,this,this.disposables)}if((null===(r=o.findWidgetEnabled)||void 0===r||r)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){let e=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new FindController(this,this.model,this.view,s,o.contextViewProvider,e),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=C.ju.None,this.onDidChangeFindMatchType=C.ju.None;o.enableStickyScroll&&(this.stickyScrollController=new StickyScrollController(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=(0,f.dS)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===u.Always)}updateOptions(e={}){var t;for(let t of(this._options={...this._options,...e},this.renderers))t.updateOptions(e);this.view.updateOptions(this._options),null===(t=this.findController)||void 0===t||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===u.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new StickyScrollController(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=C.ju.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),null===(t=this.stickyScrollController)||void 0===t||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){var e;(null===(e=this.stickyScrollController)||void 0===e?void 0:e.focusedLast())?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),(0,B.hj)(t)&&(null===(i=this.findController)||void 0===i||i.layout(t))}style(e){var t;let i=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${i}:hover .monaco-tl-indent > .indent-guide, .monaco-list${i}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${i} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),e.listBackground&&(n.push(`.monaco-list${i} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${e.listBackground}; }`),n.push(`.monaco-list${i} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${e.listBackground}; }`)),e.listFocusForeground&&(n.push(`.monaco-list${i}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${i}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));let o=(0,f.XT)(e.listFocusAndSelectionOutline,(0,f.XT)(e.listSelectionOutline,null!==(t=e.listFocusOutline)&&void 0!==t?t:""));o&&(n.push(`.monaco-list${i}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),n.push(`.monaco-list${i}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${i}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${i}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join("\n"),this.view.style(e)}getParentElement(e){let t=this.model.getParentNodeLocation(e),i=this.model.getNode(t);return i.element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{let i=e.map(e=>this.model.getNode(e));this.selection.set(i,t);let n=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setSelection(n,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{let i=e.map(e=>this.model.getNode(e));this.focus.set(i,t);let n=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setFocus(n,t,!0)})}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);let i=this.model.getListIndex(e);if(-1!==i){if(this.stickyScrollController){let n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}else this.view.reveal(i,t)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(0===t.length)return;let i=t[0],n=this.model.getNodeLocation(i),o=this.model.setCollapsed(n,!0);if(!o){let e=this.model.getParentNodeLocation(n);if(!e)return;let t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(0===t.length)return;let i=t[0],n=this.model.getNodeLocation(i),o=this.model.setCollapsed(n,!1);if(!o){if(!i.children.some(e=>e.visible))return;let[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(0===t.length)return;let i=t[0],n=this.model.getNodeLocation(i),o=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,o)}dispose(){var e;(0,b.B9)(this.disposables),null===(e=this.stickyScrollController)||void 0===e||e.dispose(),this.view.dispose()}};let ObjectTreeModel=class ObjectTreeModel{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new IndexTreeModel(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare:(e,t)=>i.sorter.compare(e.element,t.element)}),this.identityProvider=i.identityProvider}setChildren(e,t=M.$.empty(),i={}){let n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=M.$.empty(),i){let n=new Set,o=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:e=>{var t;if(null!==e.element){if(n.add(e.element),this.nodes.set(e.element,e),this.identityProvider){let t=this.identityProvider.getId(e.element).toString();o.add(t),this.nodesByIdentity.set(t,e)}null===(t=i.onDidCreateNode)||void 0===t||t.call(i,e)}},onDidDeleteNode:e=>{var t;if(null!==e.element){if(n.has(e.element)||this.nodes.delete(e.element),this.identityProvider){let t=this.identityProvider.getId(e.element).toString();o.has(t)||this.nodesByIdentity.delete(t)}null===(t=i.onDidDeleteNode)||void 0===t||t.call(i,e)}}})}preserveCollapseState(e=M.$.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),M.$.map(e,e=>{let t,i=this.nodes.get(e.element);if(!i&&this.identityProvider){let t=this.identityProvider.getId(e.element).toString();i=this.nodesByIdentity.get(t)}if(!i){let t;return t=void 0===e.collapsed?void 0:e.collapsed===d.Collapsed||e.collapsed===d.PreserveOrCollapsed||e.collapsed!==d.Expanded&&e.collapsed!==d.PreserveOrExpanded&&!!e.collapsed,{...e,children:this.preserveCollapseState(e.children),collapsed:t}}let n="boolean"==typeof e.collapsible?e.collapsible:i.collapsible;return t=void 0===e.collapsed||e.collapsed===d.PreserveOrCollapsed||e.collapsed===d.PreserveOrExpanded?i.collapsed:e.collapsed===d.Collapsed||e.collapsed!==d.Expanded&&!!e.collapsed,{...e,collapsible:n,collapsed:t,children:this.preserveCollapseState(e.children)}})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){let t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){let n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(null===e)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new TreeError(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new TreeError(this.user,"Invalid getParentNodeLocation call");let t=this.nodes.get(e);if(!t)throw new TreeError(this.user,`Tree element not found: ${e}`);let i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i),o=this.model.getNode(n);return o.element}getElementLocation(e){if(null===e)return[];let t=this.nodes.get(e);if(!t)throw new TreeError(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function noCompress(e){let t=[e.element],i=e.incompressible||!1;return{element:{elements:t,incompressible:i},children:M.$.map(M.$.from(e.children),noCompress),collapsible:e.collapsible,collapsed:e.collapsed}}function compress(e){let t,i;let n=[e.element],o=e.incompressible||!1;for(;[i,t]=M.$.consume(M.$.from(e.children),2),1===i.length&&!i[0].incompressible;)n.push((e=i[0]).element);return{element:{elements:n,incompressible:o},children:M.$.map(M.$.concat(i,t),compress),collapsible:e.collapsible,collapsed:e.collapsed}}function _decompress(e,t=0){let i;return(i=t<e.element.elements.length-1?[_decompress(e,t+1)]:M.$.map(M.$.from(e.children),e=>_decompress(e,0)),0===t&&e.element.incompressible)?{element:e.element.elements[t],children:i,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:i,collapsible:e.collapsible,collapsed:e.collapsed}}function decompress(e){return _decompress(e,0)}function splice(e,t,i){return e.element===t?{...e,children:i}:{...e,children:M.$.map(M.$.from(e.children),e=>splice(e,t,i))}}let wrapIdentityProvider=e=>({getId:t=>t.elements.map(t=>e.getId(t).toString()).join("\x00")});let CompressedObjectTreeModel=class CompressedObjectTreeModel{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new ObjectTreeModel(e,t,i),this.enabled=void 0===i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=M.$.empty(),i){let n=i.diffIdentityProvider&&wrapIdentityProvider(i.diffIdentityProvider);if(null===e){let e=M.$.map(t,this.enabled?compress:noCompress);this._setChildren(null,e,{diffIdentityProvider:n,diffDepth:1/0});return}let o=this.nodes.get(e);if(!o)throw new TreeError(this.user,"Unknown compressed tree node");let r=this.model.getNode(o),s=this.model.getParentNodeLocation(o),l=this.model.getNode(s),d=decompress(r),c=splice(d,e,t),u=(this.enabled?compress:noCompress)(c),g=i.diffIdentityProvider?(e,t)=>i.diffIdentityProvider.getId(e)===i.diffIdentityProvider.getId(t):void 0;if((0,_.fS)(u.element.elements,r.element.elements,g)){this._setChildren(o,u.children||M.$.empty(),{diffIdentityProvider:n,diffDepth:1});return}let m=l.children.map(e=>e===r?u:e);this._setChildren(l.element,m,{diffIdentityProvider:n,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let t=this.model.getNode(),i=t.children,n=M.$.map(i,decompress),o=M.$.map(n,e?compress:noCompress);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){let n=new Set;this.model.setChildren(e,t,{...i,onDidCreateNode:e=>{for(let t of e.element.elements)n.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(let t of e.element.elements)n.has(t)||this.nodes.delete(t)}})}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(void 0===e)return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}getFirstElementChild(e){let t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){let n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;let t=this.nodes.get(e);if(!t)throw new TreeError(this.user,`Tree element not found: ${e}`);return t}};let DefaultElementMapper=e=>e[e.length-1];let CompressedTreeNodeWrapper=class CompressedTreeNodeWrapper{get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new CompressedTreeNodeWrapper(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}};function mapList(e,t){return{splice(i,n,o){t.splice(i,n,o.map(t=>e.map(t)))},updateElementHeight(e,i){t.updateElementHeight(e,i)}}}function mapOptions(e,t){return{...t,identityProvider:t.identityProvider&&{getId:i=>t.identityProvider.getId(e(i))},sorter:t.sorter&&{compare:(e,i)=>t.sorter.compare(e.elements[0],i.elements[0])},filter:t.filter&&{filter:(i,n)=>t.filter.filter(e(i),n)}}}let CompressibleObjectTreeModel=class CompressibleObjectTreeModel{get onDidSplice(){return C.ju.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(e=>this.nodeMapper.map(e)),deletedNodes:t.map(e=>this.nodeMapper.map(e))}))}get onDidChangeCollapseState(){return C.ju.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return C.ju.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||DefaultElementMapper;let compressedNodeUnwrapper=e=>this.elementMapper(e.elements);this.nodeMapper=new WeakMapper(e=>new CompressedTreeNodeWrapper(compressedNodeUnwrapper,e)),this.model=new CompressedObjectTreeModel(e,mapList(this.nodeMapper,t),mapOptions(compressedNodeUnwrapper,i))}setChildren(e,t=M.$.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){let t=this.model.getFirstElementChild(e);return null==t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}};var V=i(40414);let ObjectTree=class ObjectTree extends AbstractTree{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n,o={}){super(e,t,i,n,o),this.user=e}setChildren(e,t=M.$.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(void 0===e){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new ObjectTreeModel(e,t,i)}};let CompressibleRenderer=class CompressibleRenderer{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){let t=this.renderer.renderTemplate(e);return{compressedTreeNode:void 0,data:t}}renderElement(e,t,i,n){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),1===o.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,i.data,n))}disposeElement(e,t,i,n){var o,r,s,l;i.compressedTreeNode?null===(r=(o=this.renderer).disposeCompressedElements)||void 0===r||r.call(o,i.compressedTreeNode,t,i.data,n):null===(l=(s=this.renderer).disposeElement)||void 0===l||l.call(s,e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}};!function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);r>3&&s&&Object.defineProperty(t,i,s)}([V.H],CompressibleRenderer.prototype,"compressedTreeNodeProvider",null);let CompressibleStickyScrollDelegate=class CompressibleStickyScrollDelegate{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),0===e.length)return[];for(let n=0;n<e.length;n++){let o=e[n],r=o.position+o.height,s=n+1<e.length&&r+e[n+1].height>i;if(s||n>=t-1&&t<e.length){let t=e.slice(0,n),i=e.slice(n),o=this.compressStickyNodes(i);return[...t,o]}}return e}compressStickyNodes(e){if(0===e.length)throw Error("Can't compress empty sticky nodes");if(!this.modelProvider().isCompressionEnabled())return e[0];let t=[];for(let i of e){let e=this.modelProvider().getCompressedTreeNode(i.node.element);if(e.element){if(e.element.incompressible)break;t.push(...e.element.elements)}}if(t.length<2)return e[0];let i=e[e.length-1],n={...i.node,children:[],element:{elements:t,incompressible:!1}},o=new Proxy(e[0].node,{}),r={node:o,startIndex:e[0].startIndex,endIndex:i.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(o,n),r}};function asObjectTreeOptions(e,t){return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let n;try{n=e().getCompressedTreeNode(i)}catch(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===n.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}let CompressibleObjectTree=class CompressibleObjectTree extends ObjectTree{constructor(e,t,i,n,o={}){let compressedTreeNodeProvider=()=>this,r=new CompressibleStickyScrollDelegate(()=>this.model),s=n.map(e=>new CompressibleRenderer(compressedTreeNodeProvider,r,e));super(e,t,i,s,{...asObjectTreeOptions(compressedTreeNodeProvider,o),stickyScrollDelegate:r})}setChildren(e,t=M.$.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new CompressibleObjectTreeModel(e,t,i)}updateOptions(e={}){super.updateOptions(e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}};var H=i(17861);function createAsyncDataTreeNode(e){return{...e,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function isAncestor(e,t){return!!t.parent&&(t.parent===e||isAncestor(e,t.parent))}function intersects(e,t){return e===t||isAncestor(e,t)||isAncestor(t,e)}let AsyncDataTreeNodeWrapper=class AsyncDataTreeNodeWrapper{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new AsyncDataTreeNodeWrapper(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}};let AsyncDataTreeRenderer=class AsyncDataTreeRenderer{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){let t=this.renderer.renderTemplate(e);return{templateData:t}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...A.k.asClassNameArray(R.l.treeItemLoading)),!0):(t.classList.remove(...A.k.asClassNameArray(R.l.treeItemLoading)),!1)}disposeElement(e,t,i,n){var o,r;null===(r=(o=this.renderer).disposeElement)||void 0===r||r.call(o,this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function asTreeEvent(e){return{browserEvent:e.browserEvent,elements:e.elements.map(e=>e.element)}}function asyncDataTree_asTreeMouseEvent(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}let AsyncDataTreeElementsDragAndDropData=class AsyncDataTreeElementsDragAndDropData extends x.kX{constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function asAsyncDataTreeDragAndDropData(e){return e instanceof x.kX?new AsyncDataTreeElementsDragAndDropData(e):e}let AsyncDataTreeNodeListDragAndDrop=class AsyncDataTreeNodeListDragAndDrop{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){var i,n;null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,asAsyncDataTreeDragAndDropData(e),t)}onDragOver(e,t,i,n,o,r=!0){return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(e),t&&t.element,i,n,o)}drop(e,t,i,n,o){this.dnd.drop(asAsyncDataTreeDragAndDropData(e),t&&t.element,i,n,o)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}dispose(){this.dnd.dispose()}};function asyncDataTree_asObjectTreeOptions(e){return e&&{...e,collapseByDefault:!0,identityProvider:e.identityProvider&&{getId:t=>e.identityProvider.getId(t.element)},dnd:e.dnd&&new AsyncDataTreeNodeListDragAndDrop(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:t=>e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element}),isSelectionRangeChangeEvent:t=>e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>{var i;return!!(null===(i=e.accessibilityProvider)||void 0===i?void 0:i.isChecked(t.element))}:void 0,getAriaLabel:t=>e.accessibilityProvider.getAriaLabel(t.element),getWidgetAriaLabel:()=>e.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},filter:e.filter&&{filter:(t,i)=>e.filter.filter(t.element,i)},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)},sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"!=typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),defaultFindVisibility:t=>t.hasChildren&&t.stale?1:"number"==typeof e.defaultFindVisibility?e.defaultFindVisibility:void 0===e.defaultFindVisibility?2:e.defaultFindVisibility(t.element)}}function asyncDataTree_dfs(e,t){t(e),e.children.forEach(e=>asyncDataTree_dfs(e,t))}let AsyncDataTree=class AsyncDataTree{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return C.ju.map(this.tree.onDidChangeFocus,asTreeEvent)}get onDidChangeSelection(){return C.ju.map(this.tree.onDidChangeSelection,asTreeEvent)}get onMouseDblClick(){return C.ju.map(this.tree.onMouseDblClick,asyncDataTree_asTreeMouseEvent)}get onPointer(){return C.ju.map(this.tree.onPointer,asyncDataTree_asTreeMouseEvent)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new C.Q5,this._onDidChangeNodeSlowState=new C.Q5,this.nodeMapper=new WeakMapper(e=>new AsyncDataTreeNodeWrapper(e)),this.disposables=new b.SL,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=void 0!==r.autoExpandSingleChildren&&r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=e=>r.collapseByDefault?r.collapseByDefault(e)?d.PreserveOrCollapsed:d.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,n,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=createAsyncDataTreeNode({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,n,o){let r=new ComposedTreeDelegate(i),s=n.map(e=>new AsyncDataTreeRenderer(e,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=asyncDataTree_asObjectTreeOptions(o)||{};return new ObjectTree(e,t,r,s,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(e=>e.cancel()),this.refreshPromises.clear(),this.root.element=e;let i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,n,o){if(void 0===this.root.element)throw new TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await C.ju.toPromise(this._onDidRender.event));let r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,n,o),i)try{this.tree.rerender(r)}catch(e){}}rerender(e){if(void 0===e||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){let t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){let i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(void 0===this.root.element)throw new TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await C.ju.toPromise(this._onDidRender.event));let i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await C.ju.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;let n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await C.ju.toPromise(this._onDidRender.event)),n}setSelection(e,t){let i=e.map(e=>this.getDataNode(e));this.tree.setSelection(i,t)}getSelection(){let e=this.tree.getSelection();return e.map(e=>e.element)}setFocus(e,t){let i=e.map(e=>this.getDataNode(e));this.tree.setFocus(i,t)}getFocus(){let e=this.tree.getFocus();return e.map(e=>e.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){let t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){let t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new TreeError(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,n){await this.refreshNode(e,t,i),this.disposables.isDisposed||this.render(e,i,n)}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach((o,r)=>{!n&&intersects(r,e)&&(n=o.then(()=>this.refreshNode(e,t,i)))}),n)return n;if(e!==this.root){let n=this.tree.getNode(e);if(n.collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let n;e.refreshPromise=new Promise(e=>n=e),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{let n=await this.doRefreshNode(e,t,i);e.stale=!1,await E.jT.settled(n.map(e=>this.doRefreshSubTree(e,t,i)))}finally{n()}}async doRefreshNode(e,t,i){let n;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){let t=this.doGetChildren(e);if((0,B.TW)(t))n=Promise.resolve(t);else{let i=(0,E.Vs)(800);i.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},e=>null),n=t.finally(()=>i.cancel())}}else n=Promise.resolve(M.$.empty());try{let o=await n;return this.setChildren(e,o,t,i)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),(0,H.n2)(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;let i=this.dataSource.getChildren(e.element);return(0,B.TW)(i)?this.processChildren(i):(t=(0,E.PG)(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){null!==e.element&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(H.dL))}setChildren(e,t,i,n){let o=[...t];if(0===e.children.length&&0===o.length)return[];let r=new Map,s=new Map;for(let t of e.children)r.set(t.element,t),this.identityProvider&&s.set(t.id,{node:t,collapsed:this.tree.hasElement(t)&&this.tree.isCollapsed(t)});let l=[],c=o.map(t=>{let o=!!this.dataSource.hasChildren(t);if(!this.identityProvider){let i=createAsyncDataTreeNode({element:t,parent:e,hasChildren:o,defaultCollapseState:this.getDefaultCollapseState(t)});return o&&i.defaultCollapseState===d.PreserveOrExpanded&&l.push(i),i}let c=this.identityProvider.getId(t).toString(),u=s.get(c);if(u){let e=u.node;return r.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=o,i?u.collapsed?(e.children.forEach(e=>asyncDataTree_dfs(e,e=>this.nodes.delete(e.element))),e.children.splice(0,e.children.length),e.stale=!0):l.push(e):o&&!u.collapsed&&l.push(e),e}let g=createAsyncDataTreeNode({element:t,parent:e,id:c,hasChildren:o,defaultCollapseState:this.getDefaultCollapseState(t)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(c)>-1&&n.focus.push(g),n&&n.viewState.selection&&n.viewState.selection.indexOf(c)>-1&&n.selection.push(g),n&&n.viewState.expanded&&n.viewState.expanded.indexOf(c)>-1?l.push(g):o&&g.defaultCollapseState===d.PreserveOrExpanded&&l.push(g),g});for(let e of r.values())asyncDataTree_dfs(e,e=>this.nodes.delete(e.element));for(let e of c)this.nodes.set(e.element,e);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&1===c.length&&0===l.length&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){let n=e.children.map(e=>this.asTreeElement(e,t)),o=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId:e=>i.diffIdentityProvider.getId(e.element)}};this.tree.setChildren(e===this.root?null:e,n,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){let i;return e.stale?{element:e,collapsible:e.hasChildren,collapsed:!0}:(t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?M.$.map(e.children,e=>this.asTreeElement(e,t)):[],collapsible:e.hasChildren,collapsed:i})}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}};let CompressibleAsyncDataTreeNodeWrapper=class CompressibleAsyncDataTreeNodeWrapper{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new CompressibleAsyncDataTreeNodeWrapper(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}};let CompressibleAsyncDataTreeRenderer=class CompressibleAsyncDataTreeRenderer{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){let t=this.renderer.renderTemplate(e);return{templateData:t}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...A.k.asClassNameArray(R.l.treeItemLoading)),!0):(t.classList.remove(...A.k.asClassNameArray(R.l.treeItemLoading)),!1)}disposeElement(e,t,i,n){var o,r;null===(r=(o=this.renderer).disposeElement)||void 0===r||r.call(o,this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){var o,r;null===(r=(o=this.renderer).disposeCompressedElements)||void 0===r||r.call(o,this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,b.B9)(this.disposables)}};function asCompressibleObjectTreeOptions(e){let t=e&&asyncDataTree_asObjectTreeOptions(e);return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(e=>e.element))}}}let CompressibleAsyncDataTree=class CompressibleAsyncDataTree extends AsyncDataTree{constructor(e,t,i,n,o,r,s={}){super(e,t,i,o,r,s),this.compressionDelegate=n,this.compressibleNodeMapper=new WeakMapper(e=>new CompressibleAsyncDataTreeNodeWrapper(e)),this.filter=s.filter}createTree(e,t,i,n,o){let r=new ComposedTreeDelegate(i),s=n.map(e=>new CompressibleAsyncDataTreeRenderer(e,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=asCompressibleObjectTreeOptions(o)||{};return new CompressibleObjectTree(e,t,r,s,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);let getId=e=>this.identityProvider.getId(e).toString(),getUncompressedIds=e=>{let t=new Set;for(let i of e){let e=this.tree.getCompressedTreeNode(i===this.root?null:i);if(e.element)for(let i of e.element.elements)t.add(getId(i.element))}return t},n=getUncompressedIds(this.tree.getSelection()),o=getUncompressedIds(this.tree.getFocus());super.render(e,t,i);let r=this.getSelection(),s=!1,l=this.getFocus(),d=!1,visit=e=>{let t=e.element;if(t)for(let e=0;e<t.elements.length;e++){let i=getId(t.elements[e].element),c=t.elements[t.elements.length-1].element;n.has(i)&&-1===r.indexOf(c)&&(r.push(c),s=!0),o.has(i)&&-1===l.indexOf(c)&&(l.push(c),d=!0)}e.children.forEach(visit)};visit(this.tree.getCompressedTreeNode(e===this.root?null:e)),s&&this.setSelection(r),d&&this.setFocus(l)}processChildren(e){return this.filter&&(e=M.$.filter(e,e=>{let t=this.filter.filter(e,1),i=getVisibility(t);if(2===i)throw Error("Recursive tree visibility not supported in async data compressed trees");return 1===i})),super.processChildren(e)}};function getVisibility(e){return"boolean"==typeof e?e?1:0:isFilterResult(e)?getVisibleState(e.visibility):getVisibleState(e)}let DataTree=class DataTree extends AbstractTree{constructor(e,t,i,n,o,r={}){super(e,t,i,n,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,i){return new ObjectTreeModel(e,t,i)}};var z=i(78559),U=i(61529),K=i(7193),j=i(59980),q=i(64252),G=i(27989),Q=i(18333),Z=i(76924),Y=i(4179),listService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},__param=function(e,t){return function(i,n){t(i,n,e)}};let J=(0,G.yh)("listService");let ListService=class ListService{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new b.SL,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&(null===(t=this._lastFocusedWidget)||void 0===t||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,null===(i=this._lastFocusedWidget)||void 0===i||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;let e=new S.wD((0,f.dS)(),"");e.style(Y.O2)}if(this.lists.some(t=>t.widget===e))throw Error("Cannot register the same widget multiple times");let i={widget:e,extraContextKeys:t};return this.lists.push(i),(0,f.H9)(e.getHTMLElement())&&this.setLastFocusedList(e),(0,b.F8)(e.onDidFocus(()=>this.setLastFocusedList(e)),(0,b.OF)(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(e=>e!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};let X=new K.uy("listScrollAtBoundary","none");K.Ao.or(X.isEqualTo("top"),X.isEqualTo("both")),K.Ao.or(X.isEqualTo("bottom"),X.isEqualTo("both"));let ee=new K.uy("listFocus",!0),et=new K.uy("treestickyScrollFocused",!1),ei=new K.uy("listSupportsMultiselect",!0),en=K.Ao.and(ee,K.Ao.not(j.d0),et.negate()),eo=new K.uy("listHasSelectionOrFocus",!1),er=new K.uy("listDoubleSelection",!1),es=new K.uy("listMultiSelection",!1),ea=new K.uy("listSelectionNavigation",!1),el=new K.uy("listSupportsFind",!0),ed=new K.uy("treeElementCanCollapse",!1),eh=new K.uy("treeElementHasParent",!1),ec=new K.uy("treeElementCanExpand",!1),eu=new K.uy("treeElementHasChild",!1),eg=new K.uy("treeFindOpen",!1),ep="listTypeNavigationMode",em="listAutomaticKeyboardNavigation";function createScopedContextKeyService(e,t){let i=e.createScoped(t.getHTMLElement());return ee.bindTo(i),i}function createScrollObserver(e,t){let i=X.bindTo(e),update=()=>{let e=0===t.scrollTop,n=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&n?i.set("both"):e?i.set("top"):n?i.set("bottom"):i.set("none")};return update(),t.onDidScroll(update)}let ef="workbench.list.multiSelectModifier",e_="workbench.list.openMode",ev="workbench.list.horizontalScrolling",eC="workbench.list.defaultFindMode",eb="workbench.list.typeNavigationMode",eS="workbench.list.keyboardNavigation",ey="workbench.list.scrollByPage",ew="workbench.list.defaultFindMatchType",eL="workbench.tree.indent",ek="workbench.tree.renderIndentGuides",eD="workbench.list.smoothScrolling",ex="workbench.list.mouseWheelScrollSensitivity",eN="workbench.list.fastScrollSensitivity",eE="workbench.tree.expandMode",eI="workbench.tree.enableStickyScroll",eT="workbench.tree.stickyScrollMaxItemCount";function useAltAsMultipleSelectionModifier(e){return"alt"===e.getValue(ef)}let MultipleSelectionController=class MultipleSelectionController extends b.JT{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(ef)&&(this.useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:(0,S.Zo)(e)}isSelectionRangeChangeEvent(e){return(0,S.wn)(e)}};function toWorkbenchListOptions(e,t){var i;let n=e.get(z.Ui),o=e.get(Q.d),r=new b.SL,s={...t,keyboardNavigationDelegate:{mightProducePrintableCharacter:e=>o.mightProducePrintableCharacter(e)},smoothScrolling:!!n.getValue(eD),mouseWheelScrollSensitivity:n.getValue(ex),fastScrollSensitivity:n.getValue(eN),multipleSelectionController:null!==(i=t.multipleSelectionController)&&void 0!==i?i:r.add(new MultipleSelectionController(n)),keyboardNavigationEventFilter:createKeyboardNavigationEventFilter(o),scrollByPage:!!n.getValue(ey)};return[s,r]}let eM=class extends S.aV{constructor(e,t,i,n,o,r,s,l,d){let c=void 0!==o.horizontalScrolling?o.horizontalScrolling:!!l.getValue(ev),[u,g]=d.invokeFunction(toWorkbenchListOptions,o);super(e,t,i,n,{keyboardSupport:!1,...u,horizontalScrolling:c}),this.disposables.add(g),this.contextKeyService=createScopedContextKeyService(r,this),this.disposables.add(createScrollObserver(this.contextKeyService,this)),this.listSupportsMultiSelect=ei.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport);let m=ea.bindTo(this.contextKeyService);m.set(!!o.selectionNavigation),this.listHasSelectionOrFocus=eo.bindTo(this.contextKeyService),this.listDoubleSelection=er.bindTo(this.contextKeyService),this.listMultiSelection=es.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(l),this.disposables.add(this.contextKeyService),this.disposables.add(s.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(l.onDidChangeConfiguration(e=>{e.affectsConfiguration(ef)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(l));let t={};if(e.affectsConfiguration(ev)&&void 0===this.horizontalScrolling){let e=!!l.getValue(ev);t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(ey)){let e=!!l.getValue(ey);t={...t,scrollByPage:e}}if(e.affectsConfiguration(eD)){let e=!!l.getValue(eD);t={...t,smoothScrolling:e}}if(e.affectsConfiguration(ex)){let e=l.getValue(ex);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(eN)){let e=l.getValue(eN);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new ListResourceNavigator(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?(0,Y.TU)(e):Y.O2)}};eM=listService_decorate([__param(5,K.i6),__param(6,J),__param(7,z.Ui),__param(8,G.TG)],eM);let eR=class extends PagedList{constructor(e,t,i,n,o,r,s,l,d){let c=void 0!==o.horizontalScrolling?o.horizontalScrolling:!!l.getValue(ev),[u,g]=d.invokeFunction(toWorkbenchListOptions,o);super(e,t,i,n,{keyboardSupport:!1,...u,horizontalScrolling:c}),this.disposables=new b.SL,this.disposables.add(g),this.contextKeyService=createScopedContextKeyService(r,this),this.disposables.add(createScrollObserver(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=ei.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport);let m=ea.bindTo(this.contextKeyService);m.set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(l),this.disposables.add(this.contextKeyService),this.disposables.add(s.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(e=>{e.affectsConfiguration(ef)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(l));let t={};if(e.affectsConfiguration(ev)&&void 0===this.horizontalScrolling){let e=!!l.getValue(ev);t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(ey)){let e=!!l.getValue(ey);t={...t,scrollByPage:e}}if(e.affectsConfiguration(eD)){let e=!!l.getValue(eD);t={...t,smoothScrolling:e}}if(e.affectsConfiguration(ex)){let e=l.getValue(ex);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(eN)){let e=l.getValue(eN);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new ListResourceNavigator(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?(0,Y.TU)(e):Y.O2)}dispose(){this.disposables.dispose(),super.dispose()}};eR=listService_decorate([__param(5,K.i6),__param(6,J),__param(7,z.Ui),__param(8,G.TG)],eR);let eA=class extends Table{constructor(e,t,i,n,o,r,s,l,d,c){let u=void 0!==r.horizontalScrolling?r.horizontalScrolling:!!d.getValue(ev),[g,m]=c.invokeFunction(toWorkbenchListOptions,r);super(e,t,i,n,o,{keyboardSupport:!1,...g,horizontalScrolling:u}),this.disposables.add(m),this.contextKeyService=createScopedContextKeyService(s,this),this.disposables.add(createScrollObserver(this.contextKeyService,this)),this.listSupportsMultiSelect=ei.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==r.multipleSelectionSupport);let f=ea.bindTo(this.contextKeyService);f.set(!!r.selectionNavigation),this.listHasSelectionOrFocus=eo.bindTo(this.contextKeyService),this.listDoubleSelection=er.bindTo(this.contextKeyService),this.listMultiSelection=es.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(d.onDidChangeConfiguration(e=>{e.affectsConfiguration(ef)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(d));let t={};if(e.affectsConfiguration(ev)&&void 0===this.horizontalScrolling){let e=!!d.getValue(ev);t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(ey)){let e=!!d.getValue(ey);t={...t,scrollByPage:e}}if(e.affectsConfiguration(eD)){let e=!!d.getValue(eD);t={...t,smoothScrolling:e}}if(e.affectsConfiguration(ex)){let e=d.getValue(ex);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(eN)){let e=d.getValue(eN);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new TableResourceNavigator(this,{configurationService:d,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?(0,Y.TU)(e):Y.O2)}dispose(){this.disposables.dispose(),super.dispose()}};eA=listService_decorate([__param(6,K.i6),__param(7,J),__param(8,z.Ui),__param(9,G.TG)],eA);let ResourceNavigator=class ResourceNavigator extends b.JT{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new C.Q5),this.onDidOpen=this._onDidOpen.event,this._register(C.ju.filter(this.widget.onDidChangeSelection,e=>(0,f.vd)(e.browserEvent))(e=>this.onSelectionFromKeyboard(e))),this._register(this.widget.onPointer(e=>this.onPointer(e.element,e.browserEvent))),this._register(this.widget.onMouseDblClick(e=>this.onMouseDblClick(e.element,e.browserEvent))),"boolean"!=typeof(null==t?void 0:t.openOnSingleClick)&&(null==t?void 0:t.configurationService)?(this.openOnSingleClick=(null==t?void 0:t.configurationService.getValue(e_))!=="doubleClick",this._register(null==t?void 0:t.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(e_)&&(this.openOnSingleClick=(null==t?void 0:t.configurationService.getValue(e_))!=="doubleClick")}))):this.openOnSingleClick=null===(i=null==t?void 0:t.openOnSingleClick)||void 0===i||i}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;let t=e.browserEvent,i="boolean"!=typeof t.preserveFocus||t.preserveFocus,n="boolean"==typeof t.pinned?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick)return;let i=2===t.detail;if(i)return;let n=1===t.button,o=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,n,o,t)}onMouseDblClick(e,t){if(!t)return;let i=t.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16;if(n)return;let o=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,o,t)}_open(e,t,i,n,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:o})}};let ListResourceNavigator=class ListResourceNavigator extends ResourceNavigator{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}};let TableResourceNavigator=class TableResourceNavigator extends ResourceNavigator{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}};let TreeResourceNavigator=class TreeResourceNavigator extends ResourceNavigator{constructor(e,t){super(e,t)}getSelectedElement(){var e;return null!==(e=this.widget.getSelection()[0])&&void 0!==e?e:void 0}};function createKeyboardNavigationEventFilter(e){let t=!1;return i=>{if(i.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;let n=e.softDispatch(i,i.target);return 1===n.kind?(t=!0,!1):(t=!1,0===n.kind)}}let eP=class extends ObjectTree{constructor(e,t,i,n,o,r,s,l,d){let{options:c,getTypeNavigationMode:u,disposable:g}=r.invokeFunction(workbenchTreeDataPreamble,o);super(e,t,i,n,c),this.disposables.add(g),this.internals=new eV(this,o,u,o.overrideStyles,s,l,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};eP=listService_decorate([__param(5,G.TG),__param(6,K.i6),__param(7,J),__param(8,z.Ui)],eP);let eO=class extends CompressibleObjectTree{constructor(e,t,i,n,o,r,s,l,d){let{options:c,getTypeNavigationMode:u,disposable:g}=r.invokeFunction(workbenchTreeDataPreamble,o);super(e,t,i,n,c),this.disposables.add(g),this.internals=new eV(this,o,u,o.overrideStyles,s,l,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};eO=listService_decorate([__param(5,G.TG),__param(6,K.i6),__param(7,J),__param(8,z.Ui)],eO);let eF=class extends DataTree{constructor(e,t,i,n,o,r,s,l,d,c){let{options:u,getTypeNavigationMode:g,disposable:m}=s.invokeFunction(workbenchTreeDataPreamble,r);super(e,t,i,n,o,u),this.disposables.add(m),this.internals=new eV(this,r,g,r.overrideStyles,l,d,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),void 0!==e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};eF=listService_decorate([__param(6,G.TG),__param(7,K.i6),__param(8,J),__param(9,z.Ui)],eF);let eB=class extends AsyncDataTree{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,o,r,s,l,d,c){let{options:u,getTypeNavigationMode:g,disposable:m}=s.invokeFunction(workbenchTreeDataPreamble,r);super(e,t,i,n,o,u),this.disposables.add(m),this.internals=new eV(this,r,g,r.overrideStyles,l,d,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};eB=listService_decorate([__param(6,G.TG),__param(7,K.i6),__param(8,J),__param(9,z.Ui)],eB);let eW=class extends CompressibleAsyncDataTree{constructor(e,t,i,n,o,r,s,l,d,c,u){let{options:g,getTypeNavigationMode:m,disposable:f}=l.invokeFunction(workbenchTreeDataPreamble,s);super(e,t,i,n,o,r,g),this.disposables.add(f),this.internals=new eV(this,s,m,s.overrideStyles,d,c,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};function getDefaultTreeFindMode(e){let t=e.getValue(eC);if("highlight"===t)return g.Highlight;if("filter"===t)return g.Filter;let i=e.getValue(eS);return"simple"===i||"highlight"===i?g.Highlight:"filter"===i?g.Filter:void 0}function getDefaultTreeFindMatchType(e){let t=e.getValue(ew);return"fuzzy"===t?m.Fuzzy:"contiguous"===t?m.Contiguous:void 0}function workbenchTreeDataPreamble(e,t){var i;let n=e.get(z.Ui),o=e.get(q.u),r=e.get(K.i6),s=e.get(G.TG),l=void 0!==t.horizontalScrolling?t.horizontalScrolling:!!n.getValue(ev),[d,c]=s.invokeFunction(toWorkbenchListOptions,t),u=t.paddingBottom,g=void 0!==t.renderIndentGuides?t.renderIndentGuides:n.getValue(ek);return{getTypeNavigationMode:()=>{let e=r.getContextKeyValue(ep);if("automatic"===e)return S.AA.Automatic;if("trigger"===e)return S.AA.Trigger;let t=r.getContextKeyValue(em);if(!1===t)return S.AA.Trigger;let i=n.getValue(eb);return"automatic"===i?S.AA.Automatic:"trigger"===i?S.AA.Trigger:void 0},disposable:c,options:{keyboardSupport:!1,...d,indent:"number"==typeof n.getValue(eL)?n.getValue(eL):void 0,renderIndentGuides:g,smoothScrolling:!!n.getValue(eD),defaultFindMode:getDefaultTreeFindMode(n),defaultFindMatchType:getDefaultTreeFindMatchType(n),horizontalScrolling:l,scrollByPage:!!n.getValue(ey),paddingBottom:u,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:null!==(i=t.expandOnlyOnTwistieClick)&&void 0!==i?i:"doubleClick"===n.getValue(eE),contextViewProvider:o,findWidgetStyles:Y.uX,enableStickyScroll:!!n.getValue(eI),stickyScrollMaxItemCount:Number(n.getValue(eT))}}}eW=listService_decorate([__param(7,G.TG),__param(8,K.i6),__param(9,J),__param(10,z.Ui)],eW);let eV=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,o,r,s){var l;this.tree=e,this.disposables=[],this.contextKeyService=createScopedContextKeyService(o,e),this.disposables.push(createScrollObserver(this.contextKeyService,e)),this.listSupportsMultiSelect=ei.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==t.multipleSelectionSupport);let d=ea.bindTo(this.contextKeyService);d.set(!!t.selectionNavigation),this.listSupportFindWidget=el.bindTo(this.contextKeyService),this.listSupportFindWidget.set(null===(l=t.findWidgetEnabled)||void 0===l||l),this.hasSelectionOrFocus=eo.bindTo(this.contextKeyService),this.hasDoubleSelection=er.bindTo(this.contextKeyService),this.hasMultiSelection=es.bindTo(this.contextKeyService),this.treeElementCanCollapse=ed.bindTo(this.contextKeyService),this.treeElementHasParent=eh.bindTo(this.contextKeyService),this.treeElementCanExpand=ec.bindTo(this.contextKeyService),this.treeElementHasChild=eu.bindTo(this.contextKeyService),this.treeFindOpen=eg.bindTo(this.contextKeyService),this.treeStickyScrollFocused=et.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(s),this.updateStyleOverrides(n);let updateCollapseContextKeys=()=>{let t=e.getFocus()[0];if(!t)return;let i=e.getNode(t);this.treeElementCanCollapse.set(i.collapsible&&!i.collapsed),this.treeElementHasParent.set(!!e.getParentElement(t)),this.treeElementCanExpand.set(i.collapsible&&i.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(t))},c=new Set;c.add(ep),c.add(em),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{let t=e.getSelection(),i=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(t.length>0||i.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(2===t.length)})}),e.onDidChangeFocus(()=>{let t=e.getSelection(),i=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||i.length>0),updateCollapseContextKeys()}),e.onDidChangeCollapseState(updateCollapseContextKeys),e.onDidChangeModel(updateCollapseContextKeys),e.onDidChangeFindOpenState(e=>this.treeFindOpen.set(e)),e.onDidChangeStickyScrollFocused(e=>this.treeStickyScrollFocused.set(e)),s.onDidChangeConfiguration(n=>{let o={};if(n.affectsConfiguration(ef)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(s)),n.affectsConfiguration(eL)){let e=s.getValue(eL);o={...o,indent:e}}if(n.affectsConfiguration(ek)&&void 0===t.renderIndentGuides){let e=s.getValue(ek);o={...o,renderIndentGuides:e}}if(n.affectsConfiguration(eD)){let e=!!s.getValue(eD);o={...o,smoothScrolling:e}}if(n.affectsConfiguration(eC)||n.affectsConfiguration(eS)){let e=getDefaultTreeFindMode(s);o={...o,defaultFindMode:e}}if(n.affectsConfiguration(eb)||n.affectsConfiguration(eS)){let e=i();o={...o,typeNavigationMode:e}}if(n.affectsConfiguration(ew)){let e=getDefaultTreeFindMatchType(s);o={...o,defaultFindMatchType:e}}if(n.affectsConfiguration(ev)&&void 0===t.horizontalScrolling){let e=!!s.getValue(ev);o={...o,horizontalScrolling:e}}if(n.affectsConfiguration(ey)){let e=!!s.getValue(ey);o={...o,scrollByPage:e}}if(n.affectsConfiguration(eE)&&void 0===t.expandOnlyOnTwistieClick&&(o={...o,expandOnlyOnTwistieClick:"doubleClick"===s.getValue(eE)}),n.affectsConfiguration(eI)){let e=s.getValue(eI);o={...o,enableStickyScroll:e}}if(n.affectsConfiguration(eT)){let e=Math.max(1,s.getValue(eT));o={...o,stickyScrollMaxItemCount:e}}if(n.affectsConfiguration(ex)){let e=s.getValue(ex);o={...o,mouseWheelScrollSensitivity:e}}if(n.affectsConfiguration(eN)){let e=s.getValue(eN);o={...o,fastScrollSensitivity:e}}Object.keys(o).length>0&&e.updateOptions(o)}),this.contextKeyService.onDidChangeContext(t=>{t.affectsSome(c)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new TreeResourceNavigator(e,{configurationService:s,...t}),this.disposables.push(this.navigator)}updateOptions(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?(0,Y.TU)(e):Y.O2)}dispose(){this.disposables=(0,b.B9)(this.disposables)}};eV=listService_decorate([__param(4,K.i6),__param(5,J),__param(6,z.Ui)],eV);let eH=Z.B.as(U.IP.Configuration);eH.registerConfiguration({id:"workbench",order:7,title:(0,W.NC)("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[ef]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[(0,W.NC)("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,W.NC)("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,W.NC)({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[e_]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,W.NC)({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[ev]:{type:"boolean",default:!1,description:(0,W.NC)("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[ey]:{type:"boolean",default:!1,description:(0,W.NC)("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[eL]:{type:"number",default:8,minimum:4,maximum:40,description:(0,W.NC)("tree indent setting","Controls tree indentation in pixels.")},[ek]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,W.NC)("render tree indent guides","Controls whether the tree should render indent guides.")},[eD]:{type:"boolean",default:!1,description:(0,W.NC)("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[ex]:{type:"number",default:1,markdownDescription:(0,W.NC)("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[eN]:{type:"number",default:5,markdownDescription:(0,W.NC)("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[eC]:{type:"string",enum:["highlight","filter"],enumDescriptions:[(0,W.NC)("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),(0,W.NC)("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:(0,W.NC)("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[eS]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,W.NC)("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,W.NC)("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,W.NC)("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,W.NC)("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:(0,W.NC)("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[ew]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[(0,W.NC)("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),(0,W.NC)("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:(0,W.NC)("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[eE]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,W.NC)("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[eI]:{type:"boolean",default:!0,description:(0,W.NC)("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[eT]:{type:"number",minimum:1,default:7,markdownDescription:(0,W.NC)("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[eb]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:(0,W.NC)("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}})},96927:function(e,t,i){"use strict";i.d(t,{VZ:function(){return c},in:function(){return o},kw:function(){return ConsoleLogger},qA:function(){return MultiplexLogger}});var n,o,r=i(57605),s=i(87932),l=i(7193),d=i(27989);let c=(0,d.yh)("logService");(n=o||(o={}))[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error";let u=o.Info;let AbstractLogger=class AbstractLogger extends s.JT{constructor(){super(...arguments),this.level=u,this._onDidChangeLogLevel=this._register(new r.Q5),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==o.Off&&this.level<=e}};let ConsoleLogger=class ConsoleLogger extends AbstractLogger{constructor(e=u,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(o.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(o.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(o.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(o.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(o.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}};let MultiplexLogger=class MultiplexLogger extends AbstractLogger{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(let t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(let i of this.loggers)i.trace(e,...t)}debug(e,...t){for(let i of this.loggers)i.debug(e,...t)}info(e,...t){for(let i of this.loggers)i.info(e,...t)}warn(e,...t){for(let i of this.loggers)i.warn(e,...t)}error(e,...t){for(let i of this.loggers)i.error(e,...t)}dispose(){for(let e of this.loggers)e.dispose();super.dispose()}};function LogLevelToString(e){switch(e){case o.Trace:return"trace";case o.Debug:return"debug";case o.Info:return"info";case o.Warning:return"warn";case o.Error:return"error";case o.Off:return"off"}}new l.uy("logLevel",LogLevelToString(o.Info))},24070:function(e,t,i){"use strict";i.d(t,{H0:function(){return r},ZL:function(){return o},lT:function(){return c}});var n,o,r,s=i(37466),l=i(46157),d=i(27989);(n=o||(o={}))[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error",function(e){function compare(e,t){return t-e}e.compare=compare;let t=Object.create(null);function toString(e){return t[e]||""}function fromSeverity(t){switch(t){case s.Z.Error:return e.Error;case s.Z.Warning:return e.Warning;case s.Z.Info:return e.Info;case s.Z.Ignore:return e.Hint}}function toSeverity(t){switch(t){case e.Error:return s.Z.Error;case e.Warning:return s.Z.Warning;case e.Info:return s.Z.Info;case e.Hint:return s.Z.Ignore}}t[e.Error]=(0,l.NC)("sev.error","Error"),t[e.Warning]=(0,l.NC)("sev.warning","Warning"),t[e.Info]=(0,l.NC)("sev.info","Info"),e.toString=toString,e.fromSeverity=fromSeverity,e.toSeverity=toSeverity}(o||(o={})),function(e){function makeKey(e){return makeKeyOptionalMessage(e,!0)}function makeKeyOptionalMessage(e,t){let i=[""];return e.source?i.push(e.source.replace("\xa6","\\\xa6")):i.push(""),e.code?"string"==typeof e.code?i.push(e.code.replace("\xa6","\\\xa6")):i.push(e.code.value.replace("\xa6","\\\xa6")):i.push(""),void 0!==e.severity&&null!==e.severity?i.push(o.toString(e.severity)):i.push(""),e.message&&t?i.push(e.message.replace("\xa6","\\\xa6")):i.push(""),void 0!==e.startLineNumber&&null!==e.startLineNumber?i.push(e.startLineNumber.toString()):i.push(""),void 0!==e.startColumn&&null!==e.startColumn?i.push(e.startColumn.toString()):i.push(""),void 0!==e.endLineNumber&&null!==e.endLineNumber?i.push(e.endLineNumber.toString()):i.push(""),void 0!==e.endColumn&&null!==e.endColumn?i.push(e.endColumn.toString()):i.push(""),i.push(""),i.join("\xa6")}e.makeKey=makeKey,e.makeKeyOptionalMessage=makeKeyOptionalMessage}(r||(r={}));let c=(0,d.yh)("markerService")},1480:function(e,t,i){"use strict";i.d(t,{EO:function(){return NoOpNotification},lT:function(){return s},zb:function(){return r}});var n=i(37466),o=i(27989),r=n.Z;let s=(0,o.yh)("notificationService");let NoOpNotification=class NoOpNotification{}},60048:function(e,t,i){"use strict";i.d(t,{v:function(){return o},x:function(){return extractSelection}});var n=i(27989);let o=(0,n.yh)("openerService");function extractSelection(e){let t;let i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return i&&(t={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}},26248:function(e,t,i){"use strict";i.d(t,{Ex:function(){return Progress},R9:function(){return o},ek:function(){return r}});var n=i(27989);let o=(0,n.yh)("progressService");Object.freeze({total(){},worked(){},done(){}});let Progress=class Progress{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};Progress.None=Object.freeze({report(){}});let r=(0,n.yh)("editorProgressService")},34526:function(e,t,i){"use strict";i.d(t,{IP:function(){return d},Ry:function(){return o}});var n,o,r=i(34794),s=i(87932),l=i(76924);(n=o||(o={}))[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST";let d={Quickaccess:"workbench.contributions.quickaccess"};let QuickAccessRegistry=class QuickAccessRegistry{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort((e,t)=>t.prefix.length-e.prefix.length),(0,s.OF)(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return(0,r.kX)([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){let t=e&&this.providers.find(t=>e.startsWith(t.prefix))||void 0;return t||this.defaultProvider}};l.B.add(d.Quickaccess,new QuickAccessRegistry)},4175:function(e,t,i){"use strict";i.d(t,{Jq:function(){return r},X5:function(){return d},eJ:function(){return c},jG:function(){return s}});var n,o,r,s,l=i(27989);let d={ctrlCmd:!1,alt:!1};(n=r||(r={}))[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other",(o=s||(s={}))[o.NONE=0]="NONE",o[o.FIRST=1]="FIRST",o[o.SECOND=2]="SECOND",o[o.LAST=3]="LAST";let QuickPickItemScorerAccessor=class QuickPickItemScorerAccessor{constructor(e){this.options=e}};new QuickPickItemScorerAccessor;let c=(0,l.yh)("quickInputService")},76924:function(e,t,i){"use strict";i.d(t,{B:function(){return r}});var n=i(77853),o=i(16877);let RegistryImpl=class RegistryImpl{constructor(){this.data=new Map}add(e,t){n.ok(o.HD(e)),n.ok(o.Kn(t)),n.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}};let r=new RegistryImpl},19263:function(e,t,i){"use strict";i.d(t,{Uy:function(){return C},vm:function(){return InMemoryStorageService},fk:function(){return d}});var n,o,r,s,l,d,c=i(57605),u=i(87932),g=i(16877),m=i(66614),f=i(42443);(n=s||(s={}))[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY",(o=l||(l={}))[o.None=0]="None",o[o.Initialized=1]="Initialized",o[o.Closed=2]="Closed";let Storage=class Storage extends u.JT{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new c.K3),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=l.None,this.cache=new Map,this.flushDelayer=this._register(new m.rH(Storage.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{null===(t=e.changed)||void 0===t||t.forEach((e,t)=>this.acceptExternal(t,e)),null===(i=e.deleted)||void 0===i||i.forEach(e=>this.acceptExternal(e,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===l.Closed)return;let i=!1;if((0,g.Jp)(t))i=this.cache.delete(e);else{let n=this.cache.get(e);n!==t&&(this.cache.set(e,t),i=!0)}i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){let i=this.cache.get(e);return(0,g.Jp)(i)?t:i}getBoolean(e,t){let i=this.get(e);return(0,g.Jp)(i)?t:"true"===i}getNumber(e,t){let i=this.get(e);return(0,g.Jp)(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===l.Closed)return;if((0,g.Jp)(t))return this.delete(e,i);let n=(0,g.Kn)(t)||Array.isArray(t)?(0,f.Pz)(t):String(t),o=this.cache.get(e);if(o!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(this.state===l.Closed)return;let i=this.cache.delete(e);if(i)return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;let e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var e;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)null===(e=this.whenFlushedCallbacks.pop())||void 0===e||e()})}async doFlush(e){return this.options.hint===s.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};Storage.DEFAULT_FLUSH_DELAY=100;let InMemoryStorageDatabase=class InMemoryStorageDatabase{constructor(){this.onDidChangeItemsExternal=c.ju.None,this.items=new Map}async updateItems(e){var t,i;null===(t=e.insert)||void 0===t||t.forEach((e,t)=>this.items.set(t,e)),null===(i=e.delete)||void 0===i||i.forEach(e=>this.items.delete(e))}};var _=i(27989);let v="__$__targetStorageMarker",C=(0,_.yh)("storageService");function loadKeyTargets(e){let t=e.get(v);if(t)try{return JSON.parse(t)}catch(e){}return Object.create(null)}(r=d||(d={}))[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN";let AbstractStorageService=class AbstractStorageService extends u.JT{constructor(e={flushInterval:AbstractStorageService.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new c.K3),this._onDidChangeTarget=this._register(new c.K3),this._onWillSaveState=this._register(new c.Q5),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return c.ju.filter(this._onDidChangeValue.event,i=>i.scope===e&&(void 0===t||i.key===t),i)}emitDidChangeValue(e,t){let{key:i,external:n}=t;if(i===v){switch(e){case -1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}get(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getNumber(e,i)}store(e,t,i,n,o=!1){if((0,g.Jp)(t)){this.remove(e,i,o);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,n),null===(r=this.getStorage(i))||void 0===r||r.set(e,t,o)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),null===(n=this.getStorage(t))||void 0===n||n.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,n=!1){var o,r;let s=this.getKeyTargets(t);"number"==typeof i?s[e]!==i&&(s[e]=i,null===(o=this.getStorage(t))||void 0===o||o.set(v,JSON.stringify(s),n)):"number"==typeof s[e]&&(delete s[e],null===(r=this.getStorage(t))||void 0===r||r.set(v,JSON.stringify(s),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case -1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){let t=this.getStorage(e);return t?loadKeyTargets(t):Object.create(null)}};AbstractStorageService.DEFAULT_FLUSH_INTERVAL=6e4;let InMemoryStorageService=class InMemoryStorageService extends AbstractStorageService{constructor(){super(),this.applicationStorage=this._register(new Storage(new InMemoryStorageDatabase,{hint:s.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new Storage(new InMemoryStorageDatabase,{hint:s.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new Storage(new InMemoryStorageDatabase,{hint:s.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case -1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}},85363:function(e,t,i){"use strict";i.d(t,{b:function(){return o}});var n=i(27989);let o=(0,n.yh)("telemetryService")},4179:function(e,t,i){"use strict";i.d(t,{BM:function(){return f},Hc:function(){return c},O2:function(){return m},TU:function(){return getListStyles},ZR:function(){return _},b5:function(){return l},eO:function(){return r},ku:function(){return g},pl:function(){return d},uX:function(){return u},wG:function(){return s}});var n=i(45815),o=i(50164);function overrideStyles(e,t){let i={...t};for(let t in e){let o=e[t];i[t]=void 0!==o?(0,n.n_1)(o):void 0}return i}let r={keybindingLabelBackground:(0,n.n_1)(n.oQ$),keybindingLabelForeground:(0,n.n_1)(n.lWp),keybindingLabelBorder:(0,n.n_1)(n.AWI),keybindingLabelBottomBorder:(0,n.n_1)(n.K19),keybindingLabelShadow:(0,n.n_1)(n.rh)},s={buttonForeground:(0,n.n_1)(n.j5u),buttonSeparator:(0,n.n_1)(n.iFQ),buttonBackground:(0,n.n_1)(n.b7$),buttonHoverBackground:(0,n.n_1)(n.GO4),buttonSecondaryForeground:(0,n.n_1)(n.qBU),buttonSecondaryBackground:(0,n.n_1)(n.ESD),buttonSecondaryHoverBackground:(0,n.n_1)(n.xEn),buttonBorder:(0,n.n_1)(n.GYc)},l={progressBarBackground:(0,n.n_1)(n.zRJ)},d={inputActiveOptionBorder:(0,n.n_1)(n.PRb),inputActiveOptionForeground:(0,n.n_1)(n.Pvw),inputActiveOptionBackground:(0,n.n_1)(n.XEs)};(0,n.n_1)(n.SUp),(0,n.n_1)(n.nd),(0,n.n_1)(n.BQ0),(0,n.n_1)(n.D0T),(0,n.n_1)(n.Hfx),(0,n.n_1)(n.rh),(0,n.n_1)(n.lRK),(0,n.n_1)(n.JpG),(0,n.n_1)(n.BOY),(0,n.n_1)(n.OLZ),(0,n.n_1)(n.url);let c={inputBackground:(0,n.n_1)(n.sEe),inputForeground:(0,n.n_1)(n.zJb),inputBorder:(0,n.n_1)(n.dt_),inputValidationInfoBorder:(0,n.n_1)(n.EPQ),inputValidationInfoBackground:(0,n.n_1)(n._lC),inputValidationInfoForeground:(0,n.n_1)(n.YI3),inputValidationWarningBorder:(0,n.n_1)(n.C3g),inputValidationWarningBackground:(0,n.n_1)(n.RV_),inputValidationWarningForeground:(0,n.n_1)(n.SUG),inputValidationErrorBorder:(0,n.n_1)(n.OZR),inputValidationErrorBackground:(0,n.n_1)(n.paE),inputValidationErrorForeground:(0,n.n_1)(n._t9)},u={listFilterWidgetBackground:(0,n.n_1)(n.vGG),listFilterWidgetOutline:(0,n.n_1)(n.oSI),listFilterWidgetNoMatchesOutline:(0,n.n_1)(n.Saq),listFilterWidgetShadow:(0,n.n_1)(n.y65),inputBoxStyles:c,toggleStyles:d},g={badgeBackground:(0,n.n_1)(n.g8u),badgeForeground:(0,n.n_1)(n.qeD),badgeBorder:(0,n.n_1)(n.lRK)};(0,n.n_1)(n.ixd),(0,n.n_1)(n.l80),(0,n.n_1)(n.H6q),(0,n.n_1)(n.H6q),(0,n.n_1)(n.fSI);let m={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:(0,n.n_1)(n._bK),listFocusForeground:(0,n.n_1)(n._2n),listFocusOutline:(0,n.n_1)(n.Oop),listActiveSelectionBackground:(0,n.n_1)(n.dCr),listActiveSelectionForeground:(0,n.n_1)(n.M6C),listActiveSelectionIconForeground:(0,n.n_1)(n.Tnx),listFocusAndSelectionOutline:(0,n.n_1)(n.Bqu),listFocusAndSelectionBackground:(0,n.n_1)(n.dCr),listFocusAndSelectionForeground:(0,n.n_1)(n.M6C),listInactiveSelectionBackground:(0,n.n_1)(n.rg2),listInactiveSelectionIconForeground:(0,n.n_1)(n.kvU),listInactiveSelectionForeground:(0,n.n_1)(n.ytC),listInactiveFocusBackground:(0,n.n_1)(n.s$),listInactiveFocusOutline:(0,n.n_1)(n.F3d),listHoverBackground:(0,n.n_1)(n.mV1),listHoverForeground:(0,n.n_1)(n.$d5),listDropOverBackground:(0,n.n_1)(n.pdn),listDropBetweenBackground:(0,n.n_1)(n.XVp),listSelectionOutline:(0,n.n_1)(n.xL1),listHoverOutline:(0,n.n_1)(n.xL1),treeIndentGuidesStroke:(0,n.n_1)(n.UnT),treeInactiveIndentGuidesStroke:(0,n.n_1)(n.KjV),tableColumnsBorder:(0,n.n_1)(n.uxu),tableOddRowsBackgroundColor:(0,n.n_1)(n.EQn)};function getListStyles(e){return overrideStyles(e,m)}let f={selectBackground:(0,n.n_1)(n.XV0),selectListBackground:(0,n.n_1)(n.Fgs),selectForeground:(0,n.n_1)(n._g0),decoratorRightForeground:(0,n.n_1)(n.kJk),selectBorder:(0,n.n_1)(n.a9O),focusBorder:(0,n.n_1)(n.R80),listFocusBackground:(0,n.n_1)(n.Vqd),listInactiveSelectionIconForeground:(0,n.n_1)(n.cbQ),listFocusForeground:(0,n.n_1)(n.NPS),listFocusOutline:(0,n.BtC)(n.xL1,o.Il.transparent.toString()),listHoverBackground:(0,n.n_1)(n.mV1),listHoverForeground:(0,n.n_1)(n.$d5),listHoverOutline:(0,n.n_1)(n.xL1),selectListBorder:(0,n.n_1)(n.D1_),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},_={shadowColor:(0,n.n_1)(n.rh),borderColor:(0,n.n_1)(n.Cdg),foregroundColor:(0,n.n_1)(n.DEr),backgroundColor:(0,n.n_1)(n.Hz8),selectionForegroundColor:(0,n.n_1)(n.jbW),selectionBackgroundColor:(0,n.n_1)(n.$DX),selectionBorderColor:(0,n.n_1)(n.E3h),separatorColor:(0,n.n_1)(n.ZGJ),scrollbarShadow:(0,n.n_1)(n._wn),scrollbarSliderBackground:(0,n.n_1)(n.etL),scrollbarSliderHoverBackground:(0,n.n_1)(n.ABB),scrollbarSliderActiveBackground:(0,n.n_1)(n.ynu)}},45815:function(e,t,i){"use strict";i.d(t,{$DX:function(){return ty},$d5:function(){return e9},A42:function(){return y},ABB:function(){return et},AWI:function(){return eL},BOY:function(){return tG},BQ0:function(){return tu},Bqu:function(){return eJ},BtC:function(){return asCssVariableWithDefault},C3g:function(){return A},CNo:function(){return eA},Cdg:function(){return tv},CzK:function(){return eU},D0T:function(){return ep},D1_:function(){return ef},DEr:function(){return tC},Dut:function(){return ec},E3h:function(){return tw},EPQ:function(){return T},EQn:function(){return th},ES4:function(){return eN},ESD:function(){return Q},EiJ:function(){return eT},F3d:function(){return e6},F9q:function(){return eG},Fgs:function(){return W},Fm_:function(){return tF},GO4:function(){return j},GYc:function(){return q},Gj_:function(){return tK},Gvr:function(){return tz},Gwp:function(){return tt},H6q:function(){return tN},HCL:function(){return eV},Hfx:function(){return em},Hz8:function(){return tb},IPX:function(){return u},IYc:function(){return tV},Itd:function(){return tq},Ivo:function(){return tU},JpG:function(){return t$},K19:function(){return ek},KjV:function(){return tl},M6C:function(){return e0},MUv:function(){return eI},NOs:function(){return eg},NPS:function(){return tm},OLZ:function(){return tQ},OZR:function(){return F},Oop:function(){return eY},P4M:function(){return eq},P6G:function(){return registerColor},P6Y:function(){return e$},PRb:function(){return D},PX0:function(){return ti},PpC:function(){return eF},Pvw:function(){return N},QO2:function(){return asCssVariableName},R80:function(){return _},RV_:function(){return M},Rzx:function(){return eE},SPM:function(){return tB},SUG:function(){return R},SUY:function(){return tW},SUp:function(){return tc},Saq:function(){return tr},T83:function(){return eh},Tnx:function(){return e1},UnT:function(){return ta},VVv:function(){return eO},Vqd:function(){return t_},XEs:function(){return x},XV0:function(){return B},XVp:function(){return te},XZx:function(){return f},YI3:function(){return I},ZGJ:function(){return tL},ZnX:function(){return transparent},_2n:function(){return eZ},_Yy:function(){return eP},_bK:function(){return eQ},_g0:function(){return V},_lC:function(){return E},_t9:function(){return O},_wn:function(){return X},a9O:function(){return H},b6y:function(){return er},b7$:function(){return K},bKB:function(){return eW},c63:function(){return ed},cbQ:function(){return tf},cvW:function(){return eu},dCr:function(){return eX},dRz:function(){return m},dt_:function(){return k},etL:function(){return ee},fSI:function(){return tE},g8u:function(){return Y},gkn:function(){return eM},gpD:function(){return es},hEj:function(){return eD},hX8:function(){return eB},iFQ:function(){return U},ixd:function(){return tx},j5u:function(){return z},jbW:function(){return tS},kJk:function(){return eb},kVY:function(){return tj},keg:function(){return eK},kvU:function(){return e4},kwl:function(){return oneOf},l80:function(){return tD},lRK:function(){return v},lWp:function(){return ew},lXJ:function(){return eo},loF:function(){return eC},mV1:function(){return e7},n_1:function(){return asCssVariable},nd:function(){return tg},oQ$:function(){return ey},oSI:function(){return to},opG:function(){return eS},ov3:function(){return tH},pW3:function(){return el},paE:function(){return P},pdn:function(){return e8},phM:function(){return eH},qBU:function(){return G},qeD:function(){return J},rg2:function(){return e2},rh:function(){return S},s$:function(){return e3},sEe:function(){return w},tZ6:function(){return ev},uoC:function(){return ea},url:function(){return b},uxu:function(){return td},vGG:function(){return tn},xEn:function(){return Z},xL1:function(){return C},y65:function(){return ts},yJx:function(){return eR},yb5:function(){return ex},ynu:function(){return ei},ypS:function(){return ej},ytC:function(){return e5},zJb:function(){return L},zKr:function(){return e_},zRJ:function(){return en}});var n=i(77853),o=i(66614),r=i(50164),s=i(57605),l=i(46157),d=i(98753),c=i(76924);function asCssVariableName(e){return`--vscode-${e.replace(/\./g,"-")}`}function asCssVariable(e){return`var(${asCssVariableName(e)})`}function asCssVariableWithDefault(e,t){return`var(${asCssVariableName(e)}, ${t})`}let u={ColorContribution:"base.contributions.colors"};let ColorRegistry=class ColorRegistry{constructor(){this._onDidChangeSchema=new s.Q5,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,o){this.colorsById[e]={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:o};let r={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(r.deprecationMessage=o),n&&(r.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",r.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[e]=r,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let i=this.colorsById[e];if(i&&i.defaults){let e=i.defaults[t.type];return resolveColorValue(e,t)}}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort((e,t)=>{let i=-1===e.indexOf(".")?0:1,n=-1===t.indexOf(".")?0:1;return i!==n?i-n:e.localeCompare(t)}).map(e=>`- \`${e}\`: ${this.colorsById[e].description}`).join("\n")}};let g=new ColorRegistry;function registerColor(e,t,i,n,o){return g.registerColor(e,t,i,n,o)}c.B.add(u.ColorContribution,g);let m=registerColor("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},l.NC("foreground","Overall foreground color. This color is only used if not overridden by a component."));registerColor("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},l.NC("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),registerColor("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},l.NC("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),registerColor("descriptionForeground",{light:"#717171",dark:transparent(m,.7),hcDark:transparent(m,.7),hcLight:transparent(m,.7)},l.NC("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));let f=registerColor("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},l.NC("iconForeground","The default color for icons in the workbench.")),_=registerColor("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},l.NC("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),v=registerColor("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},l.NC("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),C=registerColor("contrastActiveBorder",{light:null,dark:null,hcDark:_,hcLight:_},l.NC("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));registerColor("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},l.NC("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),registerColor("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:r.Il.black,hcLight:"#292929"},l.NC("textSeparatorForeground","Color for text separators."));let b=registerColor("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},l.NC("textLinkForeground","Foreground color for links in text."));registerColor("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},l.NC("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),registerColor("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},l.NC("textPreformatForeground","Foreground color for preformatted text segments.")),registerColor("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},l.NC("textPreformatBackground","Background color for preformatted text segments.")),registerColor("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},l.NC("textBlockQuoteBackground","Background color for block quotes in text.")),registerColor("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:r.Il.white,hcLight:"#292929"},l.NC("textBlockQuoteBorder","Border color for block quotes in text.")),registerColor("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:r.Il.black,hcLight:"#F2F2F2"},l.NC("textCodeBlockBackground","Background color for code blocks in text."));let S=registerColor("widget.shadow",{dark:transparent(r.Il.black,.36),light:transparent(r.Il.black,.16),hcDark:null,hcLight:null},l.NC("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),y=registerColor("widget.border",{dark:null,light:null,hcDark:v,hcLight:v},l.NC("widgetBorder","Border color of widgets such as find/replace inside the editor.")),w=registerColor("input.background",{dark:"#3C3C3C",light:r.Il.white,hcDark:r.Il.black,hcLight:r.Il.white},l.NC("inputBoxBackground","Input box background.")),L=registerColor("input.foreground",{dark:m,light:m,hcDark:m,hcLight:m},l.NC("inputBoxForeground","Input box foreground.")),k=registerColor("input.border",{dark:null,light:null,hcDark:v,hcLight:v},l.NC("inputBoxBorder","Input box border.")),D=registerColor("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:v,hcLight:v},l.NC("inputBoxActiveOptionBorder","Border color of activated options in input fields."));registerColor("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},l.NC("inputOption.hoverBackground","Background color of activated options in input fields."));let x=registerColor("inputOption.activeBackground",{dark:transparent(_,.4),light:transparent(_,.2),hcDark:r.Il.transparent,hcLight:r.Il.transparent},l.NC("inputOption.activeBackground","Background hover color of options in input fields.")),N=registerColor("inputOption.activeForeground",{dark:r.Il.white,light:r.Il.black,hcDark:m,hcLight:m},l.NC("inputOption.activeForeground","Foreground color of activated options in input fields."));registerColor("input.placeholderForeground",{light:transparent(m,.5),dark:transparent(m,.5),hcDark:transparent(m,.7),hcLight:transparent(m,.7)},l.NC("inputPlaceholderForeground","Input box foreground color for placeholder text."));let E=registerColor("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:r.Il.black,hcLight:r.Il.white},l.NC("inputValidationInfoBackground","Input validation background color for information severity.")),I=registerColor("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:m},l.NC("inputValidationInfoForeground","Input validation foreground color for information severity.")),T=registerColor("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:v,hcLight:v},l.NC("inputValidationInfoBorder","Input validation border color for information severity.")),M=registerColor("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:r.Il.black,hcLight:r.Il.white},l.NC("inputValidationWarningBackground","Input validation background color for warning severity.")),R=registerColor("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:m},l.NC("inputValidationWarningForeground","Input validation foreground color for warning severity.")),A=registerColor("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:v,hcLight:v},l.NC("inputValidationWarningBorder","Input validation border color for warning severity.")),P=registerColor("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:r.Il.black,hcLight:r.Il.white},l.NC("inputValidationErrorBackground","Input validation background color for error severity.")),O=registerColor("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:m},l.NC("inputValidationErrorForeground","Input validation foreground color for error severity.")),F=registerColor("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:v,hcLight:v},l.NC("inputValidationErrorBorder","Input validation border color for error severity.")),B=registerColor("dropdown.background",{dark:"#3C3C3C",light:r.Il.white,hcDark:r.Il.black,hcLight:r.Il.white},l.NC("dropdownBackground","Dropdown background.")),W=registerColor("dropdown.listBackground",{dark:null,light:null,hcDark:r.Il.black,hcLight:r.Il.white},l.NC("dropdownListBackground","Dropdown list background.")),V=registerColor("dropdown.foreground",{dark:"#F0F0F0",light:m,hcDark:r.Il.white,hcLight:m},l.NC("dropdownForeground","Dropdown foreground.")),H=registerColor("dropdown.border",{dark:B,light:"#CECECE",hcDark:v,hcLight:v},l.NC("dropdownBorder","Dropdown border.")),z=registerColor("button.foreground",{dark:r.Il.white,light:r.Il.white,hcDark:r.Il.white,hcLight:r.Il.white},l.NC("buttonForeground","Button foreground color.")),U=registerColor("button.separator",{dark:transparent(z,.4),light:transparent(z,.4),hcDark:transparent(z,.4),hcLight:transparent(z,.4)},l.NC("buttonSeparator","Button separator color.")),K=registerColor("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},l.NC("buttonBackground","Button background color.")),j=registerColor("button.hoverBackground",{dark:lighten(K,.2),light:darken(K,.2),hcDark:K,hcLight:K},l.NC("buttonHoverBackground","Button background color when hovering.")),q=registerColor("button.border",{dark:v,light:v,hcDark:v,hcLight:v},l.NC("buttonBorder","Button border color.")),G=registerColor("button.secondaryForeground",{dark:r.Il.white,light:r.Il.white,hcDark:r.Il.white,hcLight:m},l.NC("buttonSecondaryForeground","Secondary button foreground color.")),Q=registerColor("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:r.Il.white},l.NC("buttonSecondaryBackground","Secondary button background color.")),Z=registerColor("button.secondaryHoverBackground",{dark:lighten(Q,.2),light:darken(Q,.2),hcDark:null,hcLight:null},l.NC("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Y=registerColor("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:r.Il.black,hcLight:"#0F4A85"},l.NC("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),J=registerColor("badge.foreground",{dark:r.Il.white,light:"#333",hcDark:r.Il.white,hcLight:r.Il.white},l.NC("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),X=registerColor("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},l.NC("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),ee=registerColor("scrollbarSlider.background",{dark:r.Il.fromHex("#797979").transparent(.4),light:r.Il.fromHex("#646464").transparent(.4),hcDark:transparent(v,.6),hcLight:transparent(v,.4)},l.NC("scrollbarSliderBackground","Scrollbar slider background color.")),et=registerColor("scrollbarSlider.hoverBackground",{dark:r.Il.fromHex("#646464").transparent(.7),light:r.Il.fromHex("#646464").transparent(.7),hcDark:transparent(v,.8),hcLight:transparent(v,.8)},l.NC("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),ei=registerColor("scrollbarSlider.activeBackground",{dark:r.Il.fromHex("#BFBFBF").transparent(.4),light:r.Il.fromHex("#000000").transparent(.6),hcDark:v,hcLight:v},l.NC("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),en=registerColor("progressBar.background",{dark:r.Il.fromHex("#0E70C0"),light:r.Il.fromHex("#0E70C0"),hcDark:v,hcLight:v},l.NC("progressBarBackground","Background color of the progress bar that can show for long running operations."));registerColor("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);let eo=registerColor("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},l.NC("editorError.foreground","Foreground color of error squigglies in the editor.")),er=registerColor("editorError.border",{dark:null,light:null,hcDark:r.Il.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},l.NC("errorBorder","If set, color of double underlines for errors in the editor.")),es=registerColor("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ea=registerColor("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},l.NC("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),el=registerColor("editorWarning.border",{dark:null,light:null,hcDark:r.Il.fromHex("#FFCC00").transparent(.8),hcLight:r.Il.fromHex("#FFCC00").transparent(.8)},l.NC("warningBorder","If set, color of double underlines for warnings in the editor."));registerColor("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);let ed=registerColor("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},l.NC("editorInfo.foreground","Foreground color of info squigglies in the editor.")),eh=registerColor("editorInfo.border",{dark:null,light:null,hcDark:r.Il.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},l.NC("infoBorder","If set, color of double underlines for infos in the editor.")),ec=registerColor("editorHint.foreground",{dark:r.Il.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},l.NC("editorHint.foreground","Foreground color of hint squigglies in the editor."));registerColor("editorHint.border",{dark:null,light:null,hcDark:r.Il.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},l.NC("hintBorder","If set, color of double underlines for hints in the editor.")),registerColor("sash.hoverBorder",{dark:_,light:_,hcDark:_,hcLight:_},l.NC("sashActiveBorder","Border color of active sashes."));let eu=registerColor("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:r.Il.black,hcLight:r.Il.white},l.NC("editorBackground","Editor background color.")),eg=registerColor("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:r.Il.white,hcLight:m},l.NC("editorForeground","Editor default foreground color."));registerColor("editorStickyScroll.background",{light:eu,dark:eu,hcDark:eu,hcLight:eu},l.NC("editorStickyScrollBackground","Background color of sticky scroll in the editor")),registerColor("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:r.Il.fromHex("#0F4A85").transparent(.1)},l.NC("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),registerColor("editorStickyScroll.border",{dark:null,light:null,hcDark:v,hcLight:v},l.NC("editorStickyScrollBorder","Border color of sticky scroll in the editor")),registerColor("editorStickyScroll.shadow",{dark:X,light:X,hcDark:X,hcLight:X},l.NC("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));let ep=registerColor("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:r.Il.white},l.NC("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),em=registerColor("editorWidget.foreground",{dark:m,light:m,hcDark:m,hcLight:m},l.NC("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),ef=registerColor("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:v,hcLight:v},l.NC("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));registerColor("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},l.NC("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));let e_=registerColor("quickInput.background",{dark:ep,light:ep,hcDark:ep,hcLight:ep},l.NC("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),ev=registerColor("quickInput.foreground",{dark:em,light:em,hcDark:em,hcLight:em},l.NC("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),eC=registerColor("quickInputTitle.background",{dark:new r.Il(new r.VS(255,255,255,.105)),light:new r.Il(new r.VS(0,0,0,.06)),hcDark:"#000000",hcLight:r.Il.white},l.NC("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),eb=registerColor("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:r.Il.white,hcLight:"#0F4A85"},l.NC("pickerGroupForeground","Quick picker color for grouping labels.")),eS=registerColor("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:r.Il.white,hcLight:"#0F4A85"},l.NC("pickerGroupBorder","Quick picker color for grouping borders.")),ey=registerColor("keybindingLabel.background",{dark:new r.Il(new r.VS(128,128,128,.17)),light:new r.Il(new r.VS(221,221,221,.4)),hcDark:r.Il.transparent,hcLight:r.Il.transparent},l.NC("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),ew=registerColor("keybindingLabel.foreground",{dark:r.Il.fromHex("#CCCCCC"),light:r.Il.fromHex("#555555"),hcDark:r.Il.white,hcLight:m},l.NC("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),eL=registerColor("keybindingLabel.border",{dark:new r.Il(new r.VS(51,51,51,.6)),light:new r.Il(new r.VS(204,204,204,.4)),hcDark:new r.Il(new r.VS(111,195,223)),hcLight:v},l.NC("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),ek=registerColor("keybindingLabel.bottomBorder",{dark:new r.Il(new r.VS(68,68,68,.6)),light:new r.Il(new r.VS(187,187,187,.4)),hcDark:new r.Il(new r.VS(111,195,223)),hcLight:m},l.NC("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),eD=registerColor("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},l.NC("editorSelectionBackground","Color of the editor selection.")),ex=registerColor("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:r.Il.white},l.NC("editorSelectionForeground","Color of the selected text for high contrast.")),eN=registerColor("editor.inactiveSelectionBackground",{light:transparent(eD,.5),dark:transparent(eD,.5),hcDark:transparent(eD,.7),hcLight:transparent(eD,.5)},l.NC("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),eE=registerColor("editor.selectionHighlightBackground",{light:lessProminent(eD,eu,.3,.6),dark:lessProminent(eD,eu,.3,.6),hcDark:null,hcLight:null},l.NC("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:C,hcLight:C},l.NC("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),registerColor("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},l.NC("editorFindMatch","Color of the current search match."));let eI=registerColor("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},l.NC("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},l.NC("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),registerColor("editor.findMatchBorder",{light:null,dark:null,hcDark:C,hcLight:C},l.NC("editorFindMatchBorder","Border color of the current search match."));let eT=registerColor("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:C,hcLight:C},l.NC("findMatchHighlightBorder","Border color of the other search matches.")),eM=registerColor("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:transparent(C,.4),hcLight:transparent(C,.4)},l.NC("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("searchEditor.findMatchBackground",{light:transparent(eI,.66),dark:transparent(eI,.66),hcDark:eI,hcLight:eI},l.NC("searchEditor.queryMatch","Color of the Search Editor query matches.")),registerColor("searchEditor.findMatchBorder",{light:transparent(eT,.66),dark:transparent(eT,.66),hcDark:eT,hcLight:eT},l.NC("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches.")),registerColor("search.resultsInfoForeground",{light:m,dark:transparent(m,.65),hcDark:m,hcLight:m},l.NC("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),registerColor("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},l.NC("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);let eR=registerColor("editorHoverWidget.background",{light:ep,dark:ep,hcDark:ep,hcLight:ep},l.NC("hoverBackground","Background color of the editor hover."));registerColor("editorHoverWidget.foreground",{light:em,dark:em,hcDark:em,hcLight:em},l.NC("hoverForeground","Foreground color of the editor hover."));let eA=registerColor("editorHoverWidget.border",{light:ef,dark:ef,hcDark:ef,hcLight:ef},l.NC("hoverBorder","Border color of the editor hover."));registerColor("editorHoverWidget.statusBarBackground",{dark:lighten(eR,.2),light:darken(eR,.05),hcDark:ep,hcLight:ep},l.NC("statusBarBackground","Background color of the editor hover status bar."));let eP=registerColor("editorLink.activeForeground",{dark:"#4E94CE",light:r.Il.blue,hcDark:r.Il.cyan,hcLight:"#292929"},l.NC("activeLinkForeground","Color of active links.")),eO=registerColor("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:r.Il.white,hcLight:r.Il.black},l.NC("editorInlayHintForeground","Foreground color of inline hints")),eF=registerColor("editorInlayHint.background",{dark:transparent(Y,.1),light:transparent(Y,.1),hcDark:transparent(r.Il.white,.1),hcLight:transparent(Y,.1)},l.NC("editorInlayHintBackground","Background color of inline hints")),eB=registerColor("editorInlayHint.typeForeground",{dark:eO,light:eO,hcDark:eO,hcLight:eO},l.NC("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),eW=registerColor("editorInlayHint.typeBackground",{dark:eF,light:eF,hcDark:eF,hcLight:eF},l.NC("editorInlayHintBackgroundTypes","Background color of inline hints for types")),eV=registerColor("editorInlayHint.parameterForeground",{dark:eO,light:eO,hcDark:eO,hcLight:eO},l.NC("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),eH=registerColor("editorInlayHint.parameterBackground",{dark:eF,light:eF,hcDark:eF,hcLight:eF},l.NC("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),ez=registerColor("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},l.NC("editorLightBulbForeground","The color used for the lightbulb actions icon."));registerColor("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},l.NC("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),registerColor("editorLightBulbAi.foreground",{dark:ez,light:ez,hcDark:ez,hcLight:ez},l.NC("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));let eU=new r.Il(new r.VS(155,185,85,.2)),eK=new r.Il(new r.VS(255,0,0,.2)),ej=registerColor("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},l.NC("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),eq=registerColor("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},l.NC("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("diffEditor.insertedLineBackground",{dark:eU,light:eU,hcDark:null,hcLight:null},l.NC("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),registerColor("diffEditor.removedLineBackground",{dark:eK,light:eK,hcDark:null,hcLight:null},l.NC("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),registerColor("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),registerColor("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));let e$=registerColor("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),eG=registerColor("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));registerColor("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},l.NC("diffEditorInsertedOutline","Outline color for the text that got inserted.")),registerColor("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},l.NC("diffEditorRemovedOutline","Outline color for text that got removed.")),registerColor("diffEditor.border",{dark:null,light:null,hcDark:v,hcLight:v},l.NC("diffEditorBorder","Border color between the two text editors.")),registerColor("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},l.NC("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),registerColor("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},l.NC("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),registerColor("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},l.NC("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),registerColor("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},l.NC("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));let eQ=registerColor("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eZ=registerColor("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eY=registerColor("list.focusOutline",{dark:_,light:_,hcDark:C,hcLight:C},l.NC("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eJ=registerColor("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),eX=registerColor("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:r.Il.fromHex("#0F4A85").transparent(.1)},l.NC("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e0=registerColor("list.activeSelectionForeground",{dark:r.Il.white,light:r.Il.white,hcDark:null,hcLight:null},l.NC("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e1=registerColor("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e2=registerColor("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:r.Il.fromHex("#0F4A85").transparent(.1)},l.NC("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e5=registerColor("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e4=registerColor("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e3=registerColor("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e6=registerColor("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e7=registerColor("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:r.Il.white.transparent(.1),hcLight:r.Il.fromHex("#0F4A85").transparent(.1)},l.NC("listHoverBackground","List/Tree background when hovering over items using the mouse.")),e9=registerColor("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),e8=registerColor("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},l.NC("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),te=registerColor("list.dropBetweenBackground",{dark:f,light:f,hcDark:null,hcLight:null},l.NC("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),tt=registerColor("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:_,hcLight:_},l.NC("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),ti=registerColor("list.focusHighlightForeground",{dark:tt,light:ifDefinedThenElse(eX,tt,"#BBE7FF"),hcDark:tt,hcLight:tt},l.NC("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));registerColor("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},l.NC("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),registerColor("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},l.NC("listErrorForeground","Foreground color of list items containing errors.")),registerColor("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},l.NC("listWarningForeground","Foreground color of list items containing warnings."));let tn=registerColor("listFilterWidget.background",{light:darken(ep,0),dark:lighten(ep,0),hcDark:ep,hcLight:ep},l.NC("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),to=registerColor("listFilterWidget.outline",{dark:r.Il.transparent,light:r.Il.transparent,hcDark:"#f38518",hcLight:"#007ACC"},l.NC("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),tr=registerColor("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:v,hcLight:v},l.NC("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),ts=registerColor("listFilterWidget.shadow",{dark:S,light:S,hcDark:S,hcLight:S},l.NC("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));registerColor("list.filterMatchBackground",{dark:eI,light:eI,hcDark:null,hcLight:null},l.NC("listFilterMatchHighlight","Background color of the filtered match.")),registerColor("list.filterMatchBorder",{dark:eT,light:eT,hcDark:v,hcLight:C},l.NC("listFilterMatchHighlightBorder","Border color of the filtered match."));let ta=registerColor("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},l.NC("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),tl=registerColor("tree.inactiveIndentGuidesStroke",{dark:transparent(ta,.4),light:transparent(ta,.4),hcDark:transparent(ta,.4),hcLight:transparent(ta,.4)},l.NC("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),td=registerColor("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},l.NC("tableColumnsBorder","Table border color between columns.")),th=registerColor("tree.tableOddRowsBackground",{dark:transparent(m,.04),light:transparent(m,.04),hcDark:null,hcLight:null},l.NC("tableOddRowsBackgroundColor","Background color for odd table rows."));registerColor("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},l.NC("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));let tc=registerColor("checkbox.background",{dark:B,light:B,hcDark:B,hcLight:B},l.NC("checkbox.background","Background color of checkbox widget."));registerColor("checkbox.selectBackground",{dark:ep,light:ep,hcDark:ep,hcLight:ep},l.NC("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));let tu=registerColor("checkbox.foreground",{dark:V,light:V,hcDark:V,hcLight:V},l.NC("checkbox.foreground","Foreground color of checkbox widget.")),tg=registerColor("checkbox.border",{dark:H,light:H,hcDark:H,hcLight:H},l.NC("checkbox.border","Border color of checkbox widget."));registerColor("checkbox.selectBorder",{dark:f,light:f,hcDark:f,hcLight:f},l.NC("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));let tp=registerColor("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,l.NC("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),tm=registerColor("quickInputList.focusForeground",{dark:e0,light:e0,hcDark:e0,hcLight:e0},l.NC("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),tf=registerColor("quickInputList.focusIconForeground",{dark:e1,light:e1,hcDark:e1,hcLight:e1},l.NC("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),t_=registerColor("quickInputList.focusBackground",{dark:oneOf(tp,eX),light:oneOf(tp,eX),hcDark:null,hcLight:null},l.NC("quickInput.listFocusBackground","Quick picker background color for the focused item.")),tv=registerColor("menu.border",{dark:null,light:null,hcDark:v,hcLight:v},l.NC("menuBorder","Border color of menus.")),tC=registerColor("menu.foreground",{dark:V,light:V,hcDark:V,hcLight:V},l.NC("menuForeground","Foreground color of menu items.")),tb=registerColor("menu.background",{dark:B,light:B,hcDark:B,hcLight:B},l.NC("menuBackground","Background color of menu items.")),tS=registerColor("menu.selectionForeground",{dark:e0,light:e0,hcDark:e0,hcLight:e0},l.NC("menuSelectionForeground","Foreground color of the selected menu item in menus.")),ty=registerColor("menu.selectionBackground",{dark:eX,light:eX,hcDark:eX,hcLight:eX},l.NC("menuSelectionBackground","Background color of the selected menu item in menus.")),tw=registerColor("menu.selectionBorder",{dark:null,light:null,hcDark:C,hcLight:C},l.NC("menuSelectionBorder","Border color of the selected menu item in menus.")),tL=registerColor("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:v,hcLight:v},l.NC("menuSeparatorBackground","Color of a separator menu item in menus.")),tk=registerColor("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},l.NC("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));registerColor("toolbar.hoverOutline",{dark:null,light:null,hcDark:C,hcLight:C},l.NC("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),registerColor("toolbar.activeBackground",{dark:lighten(tk,.1),light:darken(tk,.1),hcDark:null,hcLight:null},l.NC("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),registerColor("editor.snippetTabstopHighlightBackground",{dark:new r.Il(new r.VS(124,124,124,.3)),light:new r.Il(new r.VS(10,50,100,.2)),hcDark:new r.Il(new r.VS(124,124,124,.3)),hcLight:new r.Il(new r.VS(10,50,100,.2))},l.NC("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),registerColor("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),registerColor("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),registerColor("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new r.Il(new r.VS(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},l.NC("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));let tD=registerColor("breadcrumb.foreground",{light:transparent(m,.8),dark:transparent(m,.8),hcDark:transparent(m,.8),hcLight:transparent(m,.8)},l.NC("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),tx=registerColor("breadcrumb.background",{light:eu,dark:eu,hcDark:eu,hcLight:eu},l.NC("breadcrumbsBackground","Background color of breadcrumb items.")),tN=registerColor("breadcrumb.focusForeground",{light:darken(m,.2),dark:lighten(m,.1),hcDark:lighten(m,.1),hcLight:lighten(m,.1)},l.NC("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),tE=registerColor("breadcrumb.activeSelectionForeground",{light:darken(m,.2),dark:lighten(m,.1),hcDark:lighten(m,.1),hcLight:lighten(m,.1)},l.NC("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));registerColor("breadcrumbPicker.background",{light:ep,dark:ep,hcDark:ep,hcLight:ep},l.NC("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));let tI=r.Il.fromHex("#40C8AE").transparent(.5),tT=r.Il.fromHex("#40A6FF").transparent(.5),tM=r.Il.fromHex("#606060").transparent(.4),tR=registerColor("merge.currentHeaderBackground",{dark:tI,light:tI,hcDark:null,hcLight:null},l.NC("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("merge.currentContentBackground",{dark:transparent(tR,.4),light:transparent(tR,.4),hcDark:transparent(tR,.4),hcLight:transparent(tR,.4)},l.NC("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);let tA=registerColor("merge.incomingHeaderBackground",{dark:tT,light:tT,hcDark:null,hcLight:null},l.NC("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("merge.incomingContentBackground",{dark:transparent(tA,.4),light:transparent(tA,.4),hcDark:transparent(tA,.4),hcLight:transparent(tA,.4)},l.NC("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);let tP=registerColor("merge.commonHeaderBackground",{dark:tM,light:tM,hcDark:null,hcLight:null},l.NC("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("merge.commonContentBackground",{dark:transparent(tP,.4),light:transparent(tP,.4),hcDark:transparent(tP,.4),hcLight:transparent(tP,.4)},l.NC("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);let tO=registerColor("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},l.NC("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));registerColor("editorOverviewRuler.currentContentForeground",{dark:transparent(tR,1),light:transparent(tR,1),hcDark:tO,hcLight:tO},l.NC("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),registerColor("editorOverviewRuler.incomingContentForeground",{dark:transparent(tA,1),light:transparent(tA,1),hcDark:tO,hcLight:tO},l.NC("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),registerColor("editorOverviewRuler.commonContentForeground",{dark:transparent(tP,1),light:transparent(tP,1),hcDark:tO,hcLight:tO},l.NC("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));let tF=registerColor("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},l.NC("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),tB=registerColor("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},l.NC("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),tW=registerColor("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},l.NC("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),tV=registerColor("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},l.NC("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),tH=registerColor("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},l.NC("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),tz=registerColor("minimap.infoHighlight",{dark:ed,light:ed,hcDark:eh,hcLight:eh},l.NC("minimapInfo","Minimap marker color for infos.")),tU=registerColor("minimap.warningHighlight",{dark:ea,light:ea,hcDark:el,hcLight:el},l.NC("overviewRuleWarning","Minimap marker color for warnings.")),tK=registerColor("minimap.errorHighlight",{dark:new r.Il(new r.VS(255,18,18,.7)),light:new r.Il(new r.VS(255,18,18,.7)),hcDark:new r.Il(new r.VS(255,50,50,1)),hcLight:"#B5200D"},l.NC("minimapError","Minimap marker color for errors.")),tj=registerColor("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},l.NC("minimapBackground","Minimap background color.")),tq=registerColor("minimap.foregroundOpacity",{dark:r.Il.fromHex("#000f"),light:r.Il.fromHex("#000f"),hcDark:r.Il.fromHex("#000f"),hcLight:r.Il.fromHex("#000f")},l.NC("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));registerColor("minimapSlider.background",{light:transparent(ee,.5),dark:transparent(ee,.5),hcDark:transparent(ee,.5),hcLight:transparent(ee,.5)},l.NC("minimapSliderBackground","Minimap slider background color.")),registerColor("minimapSlider.hoverBackground",{light:transparent(et,.5),dark:transparent(et,.5),hcDark:transparent(et,.5),hcLight:transparent(et,.5)},l.NC("minimapSliderHoverBackground","Minimap slider background color when hovering.")),registerColor("minimapSlider.activeBackground",{light:transparent(ei,.5),dark:transparent(ei,.5),hcDark:transparent(ei,.5),hcLight:transparent(ei,.5)},l.NC("minimapSliderActiveBackground","Minimap slider background color when clicked on."));let t$=registerColor("problemsErrorIcon.foreground",{dark:eo,light:eo,hcDark:eo,hcLight:eo},l.NC("problemsErrorIconForeground","The color used for the problems error icon.")),tG=registerColor("problemsWarningIcon.foreground",{dark:ea,light:ea,hcDark:ea,hcLight:ea},l.NC("problemsWarningIconForeground","The color used for the problems warning icon.")),tQ=registerColor("problemsInfoIcon.foreground",{dark:ed,light:ed,hcDark:ed,hcLight:ed},l.NC("problemsInfoIconForeground","The color used for the problems info icon."));function executeTransform(e,t){var i,o,s,l;switch(e.op){case 0:return null===(i=resolveColorValue(e.value,t))||void 0===i?void 0:i.darken(e.factor);case 1:return null===(o=resolveColorValue(e.value,t))||void 0===o?void 0:o.lighten(e.factor);case 2:return null===(s=resolveColorValue(e.value,t))||void 0===s?void 0:s.transparent(e.factor);case 3:{let i=resolveColorValue(e.background,t);if(!i)return resolveColorValue(e.value,t);return null===(l=resolveColorValue(e.value,t))||void 0===l?void 0:l.makeOpaque(i)}case 4:for(let i of e.values){let e=resolveColorValue(i,t);if(e)return e}return;case 6:return resolveColorValue(t.defines(e.if)?e.then:e.else,t);case 5:{let i=resolveColorValue(e.value,t);if(!i)return;let n=resolveColorValue(e.background,t);if(!n)return i.transparent(e.factor*e.transparency);return i.isDarkerThan(n)?r.Il.getLighterColor(i,n,e.factor).transparent(e.transparency):r.Il.getDarkerColor(i,n,e.factor).transparent(e.transparency)}default:throw(0,n.vE)(e)}}function darken(e,t){return{op:0,value:e,factor:t}}function lighten(e,t){return{op:1,value:e,factor:t}}function transparent(e,t){return{op:2,value:e,factor:t}}function oneOf(...e){return{op:4,values:e}}function ifDefinedThenElse(e,t,i){return{op:6,if:e,then:t,else:i}}function lessProminent(e,t,i,n){return{op:5,value:e,background:t,factor:i,transparency:n}}function resolveColorValue(e,t){if(null===e);else if("string"==typeof e)return"#"===e[0]?r.Il.fromHex(e):t.getColor(e);else if(e instanceof r.Il)return e;else if("object"==typeof e)return executeTransform(e,t)}registerColor("charts.foreground",{dark:m,light:m,hcDark:m,hcLight:m},l.NC("chartsForeground","The foreground color used in charts.")),registerColor("charts.lines",{dark:transparent(m,.5),light:transparent(m,.5),hcDark:transparent(m,.5),hcLight:transparent(m,.5)},l.NC("chartsLines","The color used for horizontal lines in charts.")),registerColor("charts.red",{dark:eo,light:eo,hcDark:eo,hcLight:eo},l.NC("chartsRed","The red color used in chart visualizations.")),registerColor("charts.blue",{dark:ed,light:ed,hcDark:ed,hcLight:ed},l.NC("chartsBlue","The blue color used in chart visualizations.")),registerColor("charts.yellow",{dark:ea,light:ea,hcDark:ea,hcLight:ea},l.NC("chartsYellow","The yellow color used in chart visualizations.")),registerColor("charts.orange",{dark:tW,light:tW,hcDark:tW,hcLight:tW},l.NC("chartsOrange","The orange color used in chart visualizations.")),registerColor("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},l.NC("chartsGreen","The green color used in chart visualizations.")),registerColor("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},l.NC("chartsPurple","The purple color used in chart visualizations."));let tZ="vscode://schemas/workbench-colors",tY=c.B.as(d.I.JSONContribution);tY.registerSchema(tZ,g.getColorSchema());let tJ=new o.pY(()=>tY.notifySchemaChanged(tZ),200);g.onDidChangeSchema(()=>{tJ.isScheduled()||tJ.schedule()})},96440:function(e,t,i){"use strict";i.d(t,{Ks:function(){return getIconRegistry},q5:function(){return registerIcon},s_:function(){return S}});var n,o,r=i(66614),s=i(84530),l=i(98847),d=i(57605),c=i(16877),u=i(31568),g=i(46157),m=i(98753),f=i(76924);!function(e){function getDefinition(e,t){let i=e.defaults;for(;l.k.isThemeIcon(i);){let e=_.getIcon(i.id);if(!e)return;i=e.defaults}return i}e.getDefinition=getDefinition}(n||(n={})),function(e){function toJSONObject(e){return{weight:e.weight,style:e.style,src:e.src.map(e=>({format:e.format,location:e.location.toString()}))}}function fromJSONObject(e){let stringOrUndef=e=>(0,c.HD)(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every(e=>(0,c.HD)(e.format)&&(0,c.HD)(e.location)))return{weight:stringOrUndef(e.weight),style:stringOrUndef(e.style),src:e.src.map(e=>({format:e.format,location:u.o.parse(e.location)}))}}e.toJSONObject=toJSONObject,e.fromJSONObject=fromJSONObject}(o||(o={}));let IconRegistry=class IconRegistry{constructor(){this._onDidChange=new d.Q5,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,g.NC)("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,g.NC)("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${l.k.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){let o=this.iconsById[e];if(o){if(i&&!o.description){o.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;let t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=i),this._onDidChange.fire()}return o}this.iconsById[e]={id:e,description:i,defaults:t,deprecationMessage:n};let r={$ref:"#/definitions/icons"};return n&&(r.deprecationMessage=n),i&&(r.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=r,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){let sorter=(e,t)=>e.id.localeCompare(t.id),classNames=e=>{for(;l.k.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:""}`},e=[];e.push("| preview     | identifier                        | default codicon ID                | description"),e.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let t=Object.keys(this.iconsById).map(e=>this.iconsById[e]);for(let i of t.filter(e=>!!e.description).sort(sorter))e.push(`|<i class="${classNames(i)}"></i>|${i.id}|${l.k.isThemeIcon(i.defaults)?i.defaults.id:i.id}|${i.description||""}|`);for(let i of(e.push("| preview     | identifier                        "),e.push("| ----------- | --------------------------------- |"),t.filter(e=>!l.k.isThemeIcon(e.defaults)).sort(sorter)))e.push(`|<i class="${classNames(i)}"></i>|${i.id}|`);return e.join("\n")}};let _=new IconRegistry;function registerIcon(e,t,i,n){return _.registerIcon(e,t,i,n)}function getIconRegistry(){return _}f.B.add("base.contributions.icons",_),function(){let e=(0,s.u)();for(let t in e){let i="\\"+e[t].toString(16);_.registerIcon(t,{fontCharacter:i})}}();let v="vscode://schemas/icons",C=f.B.as(m.I.JSONContribution);C.registerSchema(v,_.getIconSchema());let b=new r.pY(()=>C.notifySchemaChanged(v),200);_.onDidChange(()=>{b.isScheduled()||b.schedule()});let S=registerIcon("widget-close",s.l.close,(0,g.NC)("widgetClose","Icon for the close action in widgets."));registerIcon("goto-previous-location",s.l.arrowUp,(0,g.NC)("previousChangeIcon","Icon for goto previous editor location.")),registerIcon("goto-next-location",s.l.arrowDown,(0,g.NC)("nextChangeIcon","Icon for goto next editor location.")),l.k.modify(s.l.sync,"spin"),l.k.modify(s.l.loading,"spin")},21799:function(e,t,i){"use strict";var n,o;function isHighContrast(e){return e===n.HIGH_CONTRAST_DARK||e===n.HIGH_CONTRAST_LIGHT}function isDark(e){return e===n.DARK||e===n.HIGH_CONTRAST_DARK}i.d(t,{_T:function(){return isDark},c3:function(){return isHighContrast},eL:function(){return n}}),(o=n||(n={})).DARK="dark",o.LIGHT="light",o.HIGH_CONTRAST_DARK="hcDark",o.HIGH_CONTRAST_LIGHT="hcLight"},93672:function(e,t,i){"use strict";i.d(t,{EN:function(){return themeColorFromId},IP:function(){return c},Ic:function(){return registerThemingParticipant},XE:function(){return d},bB:function(){return Themable},m6:function(){return getThemeTypeSelector}});var n=i(57605),o=i(87932),r=i(27989),s=i(76924),l=i(21799);let d=(0,r.yh)("themeService");function themeColorFromId(e){return{id:e}}function getThemeTypeSelector(e){switch(e){case l.eL.DARK:return"vs-dark";case l.eL.HIGH_CONTRAST_DARK:return"hc-black";case l.eL.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}let c={ThemingContribution:"base.contributions.theming"};let ThemingRegistry=class ThemingRegistry{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new n.Q5}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),(0,o.OF)(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}};let u=new ThemingRegistry;function registerThemingParticipant(e){return u.onColorThemeChange(e)}s.B.add(c.ThemingContribution,u);let Themable=class Themable extends o.JT{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(e=>this.onThemeChange(e)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}},30264:function(e,t,i){"use strict";i.d(t,{Xt:function(){return UndoRedoGroup},YO:function(){return ResourceEditStackSnapshot},gJ:function(){return UndoRedoSource},tJ:function(){return o}});var n=i(27989);let o=(0,n.yh)("undoRedoService");let ResourceEditStackSnapshot=class ResourceEditStackSnapshot{constructor(e,t){this.resource=e,this.elements=t}};let UndoRedoGroup=class UndoRedoGroup{constructor(){this.id=UndoRedoGroup._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}};UndoRedoGroup._ID=0,UndoRedoGroup.None=new UndoRedoGroup;let UndoRedoSource=class UndoRedoSource{constructor(){this.id=UndoRedoSource._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}};UndoRedoSource._ID=0,UndoRedoSource.None=new UndoRedoSource},32693:function(e,t,i){"use strict";i.d(t,{A6:function(){return u},c$:function(){return isEmptyWorkspaceIdentifier},eb:function(){return isSingleFolderWorkspaceIdentifier},ec:function(){return l},md:function(){return WorkspaceFolder},p$:function(){return g},uT:function(){return toWorkspaceIdentifier},x:function(){return isStandaloneEditorWorkspace}});var n=i(46157),o=i(51777);i(74286);var r=i(31568),s=i(27989);let l=(0,s.yh)("contextService");function isSingleFolderWorkspaceIdentifier(e){return"string"==typeof(null==e?void 0:e.id)&&r.o.isUri(e.uri)}function isEmptyWorkspaceIdentifier(e){return"string"==typeof(null==e?void 0:e.id)&&!isSingleFolderWorkspaceIdentifier(e)&&!isWorkspaceIdentifier(e)}let d={id:"ext-dev"},c={id:"empty-window"};function toWorkspaceIdentifier(e,t){return"string"==typeof e||void 0===e?"string"==typeof e?{id:(0,o.EZ)(e)}:t?d:c:e.configuration?{id:e.id,configPath:e.configuration}:1===e.folders.length?{id:e.id,uri:e.folders[0].uri}:{id:e.id}}function isWorkspaceIdentifier(e){return"string"==typeof(null==e?void 0:e.id)&&r.o.isUri(e.configPath)}let WorkspaceFolder=class WorkspaceFolder{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};let u="code-workspace";(0,n.NC)("codeWorkspace","Code Workspace");let g="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function isStandaloneEditorWorkspace(e){return e.id===g}},17958:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var n=i(27989);let o=(0,n.yh)("workspaceTrustManagementService")},56627:function(){},85140:function(){},31097:function(){},13139:function(){},16849:function(){},4565:function(){},12223:function(){},19166:function(){},39422:function(){},56323:function(){},74407:function(){},43209:function(){},63080:function(){},50301:function(){},48505:function(){},78537:function(){},29487:function(){},89994:function(){},65836:function(){},8784:function(){},99369:function(){},27115:function(){},36908:function(){},88585:function(){},97117:function(){},85333:function(){},87782:function(){},79709:function(){},24797:function(){},85736:function(){},76141:function(){},2125:function(){},97591:function(){},57992:function(){},88790:function(){},81038:function(){},13901:function(){},95698:function(){},90285:function(){},77983:function(){},50566:function(){},34117:function(){},54591:function(){},56831:function(){},43:function(){},81150:function(){},51032:function(){},65117:function(){},42001:function(){},61904:function(){},53507:function(){},29970:function(){},54920:function(){},18723:function(){},35268:function(){},17477:function(){},23084:function(){},29392:function(){},34285:function(){},31815:function(){},55811:function(){},24781:function(){},58555:function(){},65148:function(){},79831:function(){},1691:function(){},68871:function(){},80983:function(){},74356:function(){},27409:function(){},32167:function(){},58723:function(){},16978:function(){},992:function(){},59295:function(){},41531:function(){},38815:function(){},38537:function(){},69082:function(){},57156:function(){},37442:function(){},83901:function(){},78977:function(){},76259:function(){},59053:function(){},23097:function(){},30931:function(){},79296:function(){},73055:function(){},20745:function(){},98663:function(){},41668:function(){},1973:function(e,t,i){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=i(82038),o=i(33916);function p(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var r="function"==typeof Object.is?Object.is:p,s=o.useSyncExternalStore,l=n.useRef,d=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,n,o){var g=l(null);if(null===g.current){var m={hasValue:!1,value:null};g.current=m}else m=g.current;var f=s(e,(g=c(function(){function a(t){if(!l){if(l=!0,e=t,t=n(t),void 0!==o&&m.hasValue){var i=m.value;if(o(i,t))return s=i}return s=t}if(i=s,r(e,t))return i;var d=n(t);return void 0!==o&&o(i,d)?i:(e=t,s=d)}var e,s,l=!1,d=void 0===i?null:i;return[function(){return a(t())},null===d?void 0:function(){return a(d())}]},[t,i,n,o]))[0],g[1]);return d(function(){m.hasValue=!0,m.value=f},[f]),u(f),f}},40698:function(e,t,i){"use strict";e.exports=i(1973)},83093:function(e,t,i){"use strict";i.d(t,{EH:function(){return ClientSideSuspense},pf:function(){return createLiveblocksContext},m1:function(){return createRoomContext}});var n=i(77948),o=i(82038);let nanoid=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var r=i(33916),s=i(40698);function ClientSideSuspense(e){let[t,i]=o.useState(!1);return o.useEffect(()=>{i(!0)},[]),o.createElement(o.Suspense,{fallback:e.fallback},t?e.children():e.fallback)}function selectedInboxNotifications(e){let t=(0,n.Wy)(e);return Object.values(t.inboxNotifications).sort((e,t)=>t.notifiedAt.getTime()-e.notifiedAt.getTime())}function retryError(e,t){t>=5||setTimeout(()=>{e()},5e3*Math.pow(2,t))}var l=class extends Error{constructor(e,t){super("Create thread failed."),this.cause=e,this.context=t,this.name="CreateThreadError"}},d=class extends Error{constructor(e,t){super("Edit thread metadata failed."),this.cause=e,this.context=t,this.name="EditThreadMetadataError"}},c=class extends Error{constructor(e,t){super("Create comment failed."),this.cause=e,this.context=t,this.name="CreateCommentError"}},u=class extends Error{constructor(e,t){super("Edit comment failed."),this.cause=e,this.context=t,this.name="EditCommentError"}},g=class extends Error{constructor(e,t){super("Delete comment failed."),this.cause=e,this.context=t,this.name="DeleteCommentError"}},m=class extends Error{constructor(e,t){super("Add reaction failed."),this.cause=e,this.context=t,this.name="AddReactionError"}},f=class extends Error{constructor(e,t){super("Remove reaction failed."),this.cause=e,this.context=t,this.name="RemoveReactionError"}},_=class extends Error{constructor(e,t){super("Mark inbox notification as read failed."),this.cause=e,this.context=t,this.name="MarkInboxNotificationAsReadError"}},v=class extends Error{constructor(e,t){super("Update notification settings failed."),this.cause=e,this.context=t,this.name="UpdateNotificationSettingsError"}};function createOptimisticId(e){return`${e}_${nanoid()}`}function createThreadId(){return createOptimisticId("th")}function selectNotificationSettings(e,t){let{notificationSettings:i}=(0,n.Wy)(t);return(0,n.nn)(i[e])}function selectedThreads(e,t,i){let o=(0,n.Wy)(t),r=Object.values(o.threads).filter(t=>{if(t.roomId!==e||void 0!==t.deletedAt)return!1;let n=i.query;if(!n)return!0;for(let e in n.metadata)if(t.metadata[e]!==n.metadata[e])return!1;return!0});return r.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime())}function useInitial(e){return(0,o.useState)(e)[0]}function useLatest(e){let t=(0,o.useRef)(e);return(0,o.useEffect)(()=>{t.current=e},[e]),t}function useRerender(){let[,e]=(0,o.useReducer)(e=>e+1,0);return e}var noop=()=>{},identity=e=>e;function useSyncExternalStore(e,t,i){return(0,s.useSyncExternalStoreWithSelector)(e,t,i,identity)}var C=Object.freeze([]);function alwaysEmptyList(){return C}function alwaysNull(){return null}function makeMutationContext(e){let t="This mutation cannot be used until connected to the Liveblocks room";return{get storage(){let i=e.getStorageSnapshot();if(null===i)throw Error(t);return i},get self(){let i=e.getSelf();if(null===i)throw Error(t);return i},get others(){let i=e.getOthers();if(null===e.getSelf())throw Error(t);return i},setMyPresence:e.updatePresence}}var b=o.createContext(null);function createRoomContext(e,t){if(t?.resolveUsers)throw Error("The 'resolveUsers' option has moved to 'createClient' from '@liveblocks/client'. Please refer to our Upgrade Guide to learn more, see https://liveblocks.io/docs/platform/upgrading/1.10.");if(t?.resolveMentionSuggestions)throw Error("The 'resolveMentionSuggestions' option has moved to 'createClient' from '@liveblocks/client'. Please refer to our Upgrade Guide to learn more, see https://liveblocks.io/docs/platform/upgrading/1.10.");let i=o.createContext(null),r=(0,n.Zb)(),C=createSharedContext(e);function RoomProviderOuter(t){let[i]=o.useState(()=>new Map),n=o.useCallback((t,n)=>{let o=i.get(t);if(o)return o;let r=e.enterRoom(t,n),s=r.leave;return r.leave=()=>{s(),i.delete(t)},i.set(t,r),r},[i]);return o.createElement(RoomProviderInner,{...t,stableEnterRoom:n})}function RoomProviderInner(e){let{id:t,stableEnterRoom:r}=e,s=useInitial({initialPresence:e.initialPresence,initialStorage:e.initialStorage,unstable_batchedUpdates:e.unstable_batchedUpdates,autoConnect:e.autoConnect??e.shouldInitiallyConnect??"undefined"!=typeof window}),[{room:l},d]=o.useState(()=>r(t,{...s,autoConnect:!1}));return o.useEffect(()=>{async function handleCommentEvent(e){let t=await l[n.W_].comments.getThread({threadId:e.threadId});if(!t){y.deleteThread(e.threadId);return}let{thread:i,inboxNotification:o}=t,r=y.get().threads[e.threadId];switch(e.type){case n.yO.COMMENT_EDITED:case n.yO.THREAD_METADATA_UPDATED:case n.yO.COMMENT_REACTION_ADDED:case n.yO.COMMENT_REACTION_REMOVED:case n.yO.COMMENT_DELETED:if(!r)break;y.updateThreadAndNotification(i,o);break;case n.yO.COMMENT_CREATED:y.updateThreadAndNotification(i,o)}}return l.events.comments.subscribe(e=>void handleCommentEvent(e))},[l]),o.useEffect(()=>{getThreadsUpdates(l.id)},[l.id]),o.useEffect(()=>{function handleIsOnline(){getThreadsUpdates(l.id)}return window.addEventListener("online",handleIsOnline),()=>{window.removeEventListener("online",handleIsOnline)}},[l.id]),o.useEffect(()=>{let e=r(t,s);d(e);let{room:i,leave:n}=e;return s.autoConnect&&i.connect(),()=>{n()}},[t,s,r]),o.createElement(i.Provider,{value:l},o.createElement(b.Provider,{value:I},e.children))}function connectionIdSelector(e){return e.map(e=>e.connectionId)}function useRoom(){let e=o.useContext(i);if(null===e)throw Error("RoomProvider is missing from the React tree.");return e}function useStatus(){let e=useRoom(),t=e.events.status.subscribe,i=e.getStatus,n=e.getStatus;return useSyncExternalStore(t,i,n)}function useMyPresence(){let e=useRoom(),t=e.events.myPresence.subscribe,i=e.getPresence,n=useSyncExternalStore(t,i,i),o=e.updatePresence;return[n,o]}function useUpdateMyPresence(){return useRoom().updatePresence}function useOthers(e,t){let i=useRoom(),n=i.events.others.subscribe,o=i.getOthers,r=alwaysEmptyList;return(0,s.useSyncExternalStoreWithSelector)(n,o,r,e??identity,t)}function useOthersConnectionIds(){return useOthers(connectionIdSelector,n.Xd)}function useOthersMapped(e,t){let i=o.useCallback(t=>t.map(t=>[t.connectionId,e(t)]),[e]),n=o.useCallback((e,i)=>{let n=t??Object.is;return e.length===i.length&&e.every((e,t)=>{let o=i[t];return e[0]===o[0]&&n(e[1],o[1])})},[t]);return useOthers(i,n)}let S=Symbol();function useOther(e,t,i){let n=o.useCallback(i=>{let n=i.find(t=>t.connectionId===e);return void 0!==n?t(n):S},[e,t]),r=o.useCallback((e,t)=>{if(e===S||t===S)return e===t;let n=i??Object.is;return n(e,t)},[i]),s=useOthers(n,r);if(s===S)throw Error(`No such other user with connection id ${e} exists`);return s}function useBroadcastEvent(){let e=useRoom();return o.useCallback((t,i={shouldQueueEventIfNotReady:!1})=>{e.broadcastEvent(t,i)},[e])}function useOthersListener(e){let t=useRoom(),i=useLatest(e);o.useEffect(()=>t.events.others.subscribe(e=>i.current(e)),[t,i])}function useLostConnectionListener(e){let t=useRoom(),i=useLatest(e);o.useEffect(()=>t.events.lostConnection.subscribe(e=>i.current(e)),[t,i])}function useErrorListener(e){let t=useRoom(),i=useLatest(e);o.useEffect(()=>t.events.error.subscribe(e=>i.current(e)),[t,i])}function useEventListener(e){let t=useRoom(),i=useLatest(e);o.useEffect(()=>t.events.customEvent.subscribe(e=>{i.current(e)}),[t,i])}function useSelf(e,t){let i=useRoom(),n=i.events.self.subscribe,r=i.getSelf,l=e??identity,d=o.useCallback(e=>null!==e?l(e):null,[l]),c=alwaysNull;return(0,s.useSyncExternalStoreWithSelector)(n,r,c,d,t)}function useMutableStorageRoot(){let e=useRoom(),t=e.events.storageDidLoad.subscribeOnce,i=e.getStorageSnapshot,n=alwaysNull;return useSyncExternalStore(t,i,n)}function useStorageRoot(){return[useMutableStorageRoot()]}function useHistory(){return useRoom().history}function useUndo(){return useHistory().undo}function useRedo(){return useHistory().redo}function useCanUndo(){let e=useRoom(),t=e.events.history.subscribe,i=e.history.canUndo;return useSyncExternalStore(t,i,i)}function useCanRedo(){let e=useRoom(),t=e.events.history.subscribe,i=e.history.canRedo;return useSyncExternalStore(t,i,i)}function useBatch(){return useRoom().batch}function useLegacyKey(e){let t=useRoom(),i=useMutableStorageRoot(),r=useRerender();return(o.useEffect(()=>{let o;if(null===i)return;let s=i.get(e);function subscribeToCurr(){o=(0,n.I6)(s)?t.subscribe(s,r):void 0}function onRootChange(){let t=i.get(e);t!==s&&(o?.(),s=t,subscribeToCurr(),r())}subscribeToCurr(),r();let l=t.subscribe(i,onRootChange);return()=>{l(),o?.()}},[i,t,e,r]),null===i)?null:i.get(e)}function useStorage(e,t){let i=useRoom(),n=useMutableStorageRoot(),r=o.useCallback(t=>null!==t?e(t):null,[e]),l=o.useCallback(e=>null!==n?i.subscribe(n,e,{isDeep:!0}):noop,[i,n]),d=o.useCallback(()=>{if(null===n)return null;{let e=n.toImmutable();return e}},[n]),c=alwaysNull;return(0,s.useSyncExternalStoreWithSelector)(l,d,c,r,t)}function ensureNotServerSide(){if("undefined"==typeof window)throw Error("You cannot use the Suspense version of this hook on the server side. Make sure to only call them on the client side.\nFor tips, see https://liveblocks.io/docs/api-reference/liveblocks-react#suspense-avoid-ssr")}function useSuspendUntilStorageLoaded(){let e=useRoom();if(null===e.getStorageSnapshot())throw ensureNotServerSide(),new Promise(t=>{e.events.storageDidLoad.subscribeOnce(()=>t())})}function useSuspendUntilPresenceLoaded(){let e=useRoom();if(null===e.getSelf())throw ensureNotServerSide(),new Promise(t=>{e.events.self.subscribeOnce(()=>t()),e.events.status.subscribeOnce(()=>t())})}function useMutation(e,t){let i=useRoom();return o.useMemo(()=>(...t)=>i.batch(()=>e(makeMutationContext(i),...t)),[i,...t])}function useStorageSuspense(e,t){return useSuspendUntilStorageLoaded(),useStorage(e,t)}function useSelfSuspense(e,t){return useSuspendUntilPresenceLoaded(),useSelf(e,t)}function useOthersSuspense(e,t){return useSuspendUntilPresenceLoaded(),useOthers(e,t)}function useOthersConnectionIdsSuspense(){return useSuspendUntilPresenceLoaded(),useOthersConnectionIds()}function useOthersMappedSuspense(e,t){return useSuspendUntilPresenceLoaded(),useOthersMapped(e,t)}function useOtherSuspense(e,t,i){return useSuspendUntilPresenceLoaded(),useOther(e,t,i)}function useLegacyKeySuspense(e){return useSuspendUntilStorageLoaded(),useLegacyKey(e)}let y=e[n.W_].cacheStore;function onMutationFailure(e,t,i){if(y.set(e=>({...e,optimisticUpdates:e.optimisticUpdates.filter(e=>e.id!==t)})),e instanceof n.iz){let t=handleApiError(e);r.notify(i(t));return}if(e instanceof n.VB){handleApiError(e);return}throw e}let w=new Map,L=new Map,k=(0,n.x3)(refreshThreadsAndNotifications);async function refreshThreadsAndNotifications(){let t=[];e[n.W_].getRoomIds().map(i=>{let n=e.getRoom(i);null!==n&&t.push(getThreadsUpdates(n.id))}),await Promise.allSettled(t)}function incrementQuerySubscribers(e){let t=w.get(e)??0;w.set(e,t+1),k.start(3e5)}function decrementQuerySubscribers(e){let t=w.get(e);if(void 0===t||t<=0){n.iV.warn(`Internal unexpected behavior. Cannot decrease subscriber count for query "${e}"`);return}w.set(e,t-1);let i=0;for(let e of w.values())i+=e;i<=0&&k.stop()}async function getThreadsAndInboxNotifications(e,t,i,{retryCount:o}={retryCount:0}){let r=L.get(t);if(void 0!==r)return r;let s=e[n.W_].comments.getThreads(i);L.set(t,s),y.setQueryState(t,{isLoading:!0});try{let i=await s;y.updateThreadsAndNotifications(i.threads,i.inboxNotifications,i.deletedThreads,i.deletedInboxNotifications,t);let n=D.get(e.id);(void 0===n||n>i.meta.requestedAt)&&D.set(e.id,i.meta.requestedAt),k.start(3e5)}catch(n){L.delete(t),retryError(()=>{getThreadsAndInboxNotifications(e,t,i,{retryCount:o+1})},o),y.setQueryState(t,{isLoading:!1,error:n});return}}let D=new Map,x=new Map;async function getThreadsUpdates(t){let i=e.getRoom(t);if(null===i)return;let o=D.get(i.id);if(void 0===o)return;let r=x.get(i.id)??!1;if(!0!==r)try{x.set(i.id,!0);let e=await i[n.W_].comments.getThreads({since:o});setTimeout(()=>{x.set(i.id,!1)},2e3),y.updateThreadsAndNotifications(e.threads,e.inboxNotifications,e.deletedThreads,e.deletedInboxNotifications),D.set(i.id,e.meta.requestedAt)}catch(e){x.set(i.id,!1);return}}function handleScrollToCommentOnLoad(e,t,i){if(!1===t||!0===e)return;let n="undefined"!=typeof window;if(!n)return;let o=window.location.hash,r=o.slice(1);if(!r.startsWith("cm_"))return;let s=document.getElementById(r);if(null===s)return;let l=i.threads.flatMap(e=>e.comments),d=l.some(e=>e.id===r);d&&s.scrollIntoView()}function useThreads(e={query:{metadata:{}}}){let{scrollOnLoad:t=!0}=e,i=useRoom(),n=o.useMemo(()=>generateQueryKey(i.id,e.query),[i,e]);o.useEffect(()=>(getThreadsAndInboxNotifications(i,n,e),incrementQuerySubscribers(n),()=>decrementQuerySubscribers(n)),[i,n]);let r=o.useCallback(t=>{let o=t.queries[n];return void 0===o||o.isLoading?{isLoading:!0}:{threads:selectedThreads(i.id,t,e),isLoading:!1,error:o.error}},[i,n]),l=(0,s.useSyncExternalStoreWithSelector)(y.subscribe,y.get,y.get,r);return o.useEffect(()=>{!0!==l.isLoading&&handleScrollToCommentOnLoad(l.isLoading,t,l)},[l.isLoading]),l}function useThreadsSuspense(e={query:{metadata:{}}}){let{scrollOnLoad:t=!0}=e,i=useRoom(),n=o.useMemo(()=>generateQueryKey(i.id,e.query),[i,e]),r=y.get().queries[n];if(void 0===r||r.isLoading)throw getThreadsAndInboxNotifications(i,n,e);if(r.error)throw r.error;let l=o.useCallback(t=>({threads:selectedThreads(i.id,t,e),isLoading:!1}),[i,n]);o.useEffect(()=>(incrementQuerySubscribers(n),()=>{decrementQuerySubscribers(n)}),[n]);let d=(0,s.useSyncExternalStoreWithSelector)(y.subscribe,y.get,y.get,l);return o.useEffect(()=>{handleScrollToCommentOnLoad(d.isLoading,t,d)},[d.isLoading]),d}function useCreateThread(){let e=useRoom();return o.useCallback(t=>{let i=t.body,o="metadata"in t?t.metadata:{},r=createThreadId(),s=createOptimisticId("cm"),d=new Date,c={id:s,threadId:r,roomId:e.id,createdAt:d,type:"comment",userId:getCurrentUserId(e),body:i,reactions:[]},u={id:r,type:"thread",createdAt:d,updatedAt:d,roomId:e.id,metadata:o,comments:[c]},g=nanoid();return y.pushOptimisticUpdate({type:"create-thread",thread:u,id:g}),e[n.W_].comments.createThread({threadId:r,commentId:s,body:i,metadata:o}).then(e=>{y.set(t=>({...t,threads:{...t.threads,[r]:e},optimisticUpdates:t.optimisticUpdates.filter(e=>e.id!==g)}))},t=>onMutationFailure(t,g,t=>new l(t,{roomId:e.id,threadId:r,commentId:s,body:i,metadata:o}))),u},[e])}function useEditThreadMetadata(){let e=useRoom();return o.useCallback(t=>{if(!("metadata"in t))return;let i=t.threadId,o=t.metadata,r=new Date,s=nanoid();y.pushOptimisticUpdate({type:"edit-thread-metadata",metadata:o,id:s,threadId:i,updatedAt:r}),e[n.W_].comments.editThreadMetadata({metadata:o,threadId:i}).then(e=>{y.set(t=>{let n=t.threads[i],o=t.optimisticUpdates.filter(e=>e.id!==s);return void 0===n||void 0!==n.deletedAt||n.updatedAt&&n.updatedAt>r?{...t,optimisticUpdates:o}:{...t,threads:{...t.threads,[i]:{...n,metadata:e}},optimisticUpdates:o}})},t=>onMutationFailure(t,s,t=>new d(t,{roomId:e.id,threadId:i,metadata:o})))},[e])}function useAddReaction(){let e=useRoom();return o.useCallback(({threadId:t,commentId:i,emoji:o})=>{let r=new Date,s=getCurrentUserId(e),l=nanoid();y.pushOptimisticUpdate({type:"add-reaction",threadId:t,commentId:i,reaction:{emoji:o,userId:s,createdAt:r},id:l}),e[n.W_].comments.addReaction({threadId:t,commentId:i,emoji:o}).then(e=>{y.set(o=>{let r=o.threads[t],s=o.optimisticUpdates.filter(e=>e.id!==l);return void 0===r?{...o,optimisticUpdates:s}:{...o,threads:{...o.threads,[t]:(0,n.rU)(r,i,e)},optimisticUpdates:s}})},n=>onMutationFailure(n,l,n=>new m(n,{roomId:e.id,threadId:t,commentId:i,emoji:o})))},[e])}function useRemoveReaction(){let e=useRoom();return o.useCallback(({threadId:t,commentId:i,emoji:o})=>{let r=getCurrentUserId(e),s=new Date,l=nanoid();y.pushOptimisticUpdate({type:"remove-reaction",threadId:t,commentId:i,emoji:o,userId:r,removedAt:s,id:l}),e[n.W_].comments.removeReaction({threadId:t,commentId:i,emoji:o}).then(()=>{y.set(e=>{let d=e.threads[t],c=e.optimisticUpdates.filter(e=>e.id!==l);return void 0===d?{...e,optimisticUpdates:c}:{...e,threads:{...e.threads,[t]:(0,n.WO)(d,i,o,r,s)},optimisticUpdates:c}})},n=>onMutationFailure(n,l,n=>new f(n,{roomId:e.id,threadId:t,commentId:i,emoji:o})))},[e])}function useCreateComment(){let e=useRoom();return o.useCallback(({threadId:t,body:i})=>{let o=createOptimisticId("cm"),r=new Date,s={id:o,threadId:t,roomId:e.id,type:"comment",createdAt:r,userId:getCurrentUserId(e),body:i,reactions:[]},l=nanoid();return y.pushOptimisticUpdate({type:"create-comment",comment:s,id:l}),e[n.W_].comments.createComment({threadId:t,commentId:o,body:i}).then(e=>{y.set(i=>{let o=i.threads[t],r=i.optimisticUpdates.filter(e=>e.id!==l);if(void 0===o)return{...i,optimisticUpdates:r};let s=Object.values(i.inboxNotifications).find(e=>e.threadId===t),d=void 0!==s?{...i.inboxNotifications,[s.id]:{...s,notifiedAt:e.createdAt,readAt:e.createdAt}}:i.inboxNotifications;return{...i,threads:{...i.threads,[t]:(0,n.sE)(o,e)},inboxNotifications:d,optimisticUpdates:r}})},n=>onMutationFailure(n,l,n=>new c(n,{roomId:e.id,threadId:t,commentId:o,body:i}))),s},[e])}function useEditComment(){let e=useRoom();return o.useCallback(({threadId:t,commentId:i,body:o})=>{let r=new Date,s=nanoid(),l=y.get().threads[t];if(void 0===l){n.iV.warn(`Internal unexpected behavior. Cannot edit comment in thread "${t}" because the thread does not exist in the cache.`);return}let d=l.comments.find(e=>e.id===i);if(void 0===d||void 0!==d.deletedAt){n.iV.warn(`Internal unexpected behavior. Cannot edit comment "${i}" in thread "${t}" because the comment does not exist in the cache.`);return}y.pushOptimisticUpdate({type:"edit-comment",comment:{...d,editedAt:r,body:o},id:s}),e[n.W_].comments.editComment({threadId:t,commentId:i,body:o}).then(e=>{y.set(i=>{let o=i.threads[t],r=i.optimisticUpdates.filter(e=>e.id!==s);return void 0===o?{...i,optimisticUpdates:r}:{...i,threads:{...i.threads,[t]:(0,n.sE)(o,e)},optimisticUpdates:r}})},n=>onMutationFailure(n,s,n=>new u(n,{roomId:e.id,threadId:t,commentId:i,body:o})))},[e])}function useDeleteComment(){let e=useRoom();return o.useCallback(({threadId:t,commentId:i})=>{let o=new Date,r=nanoid();y.pushOptimisticUpdate({type:"delete-comment",threadId:t,commentId:i,deletedAt:o,id:r}),e[n.W_].comments.deleteComment({threadId:t,commentId:i}).then(()=>{y.set(e=>{let s=e.threads[t],l=e.optimisticUpdates.filter(e=>e.id!==r);return void 0===s?{...e,optimisticUpdates:l}:{...e,threads:{...e.threads,[t]:(0,n.YF)(s,i,o)},optimisticUpdates:l}})},n=>onMutationFailure(n,r,n=>new g(n,{roomId:e.id,threadId:t,commentId:i})))},[e])}let N=e[n.W_].resolveMentionSuggestions,E=new Map;function useMentionSuggestions(e){let t=useRoom(),[i,r]=o.useState(),s=o.useRef();return o.useEffect(()=>{let i;if(void 0===e||!N)return;let o={text:e,roomId:t.id},l=(0,n.Pz)(o),d=!1,getMentionSuggestions=async()=>{try{s.current=performance.now();let e=await N(o);d||(r(e),E.set(l,e))}catch(e){n.iV.error(e?.message)}};return E.has(l)?r(E.get(l)):!s.current||Math.abs(performance.now()-s.current)>500?getMentionSuggestions():i=window.setTimeout(()=>{getMentionSuggestions()},500),()=>{d=!0,window.clearTimeout(i)}},[t.id,e]),i}function useThreadSubscription(e){let t=o.useCallback(t=>{let i=selectedInboxNotifications(t).find(t=>t.threadId===e),n=t.threads[e];return void 0===i||void 0===n?{status:"not-subscribed"}:{status:"subscribed",unreadSince:i.readAt}},[e]);return(0,s.useSyncExternalStoreWithSelector)(y.subscribe,y.get,y.get,t)}function useMarkThreadAsRead(){let e=useRoom();return o.useCallback(t=>{let i=Object.values(y.get().inboxNotifications).find(e=>e.threadId===t);if(!i)return;let o=nanoid(),r=new Date;y.pushOptimisticUpdate({type:"mark-inbox-notification-as-read",id:o,inboxNotificationId:i.id,readAt:r}),e[n.W_].notifications.markInboxNotificationAsRead(i.id).then(()=>{y.set(e=>({...e,inboxNotifications:{...e.inboxNotifications,[i.id]:{...i,readAt:r}},optimisticUpdates:e.optimisticUpdates.filter(e=>e.id!==o)}))},e=>{onMutationFailure(e,o,e=>new _(e,{inboxNotificationId:i.id}))})},[e])}function makeNotificationSettingsQueryKey(e){return`${e}:NOTIFICATION_SETTINGS`}async function getInboxNotificationSettings(e,t,{retryCount:i}={retryCount:0}){let o=L.get(t);if(void 0!==o)return o;try{let i=e[n.W_].notifications.getRoomNotificationSettings();L.set(t,i),y.setQueryState(t,{isLoading:!0});let o=await i;y.updateRoomInboxNotificationSettings(e.id,o,t)}catch(n){L.delete(t),retryError(()=>{getInboxNotificationSettings(e,t,{retryCount:i+1})},i),y.setQueryState(t,{isLoading:!1,error:n});return}}function useRoomNotificationSettings(){let e=useRoom();o.useEffect(()=>{let t=makeNotificationSettingsQueryKey(e.id);getInboxNotificationSettings(e,t)},[e]);let t=useUpdateRoomNotificationSettings(),i=o.useCallback(t=>{let i=t.queries[makeNotificationSettingsQueryKey(e.id)];return void 0===i||i.isLoading?{isLoading:!0}:void 0!==i.error?{isLoading:!1,error:i.error}:{isLoading:!1,settings:selectNotificationSettings(e.id,t)}},[e]),n=(0,s.useSyncExternalStoreWithSelector)(y.subscribe,y.get,y.get,i);return o.useMemo(()=>[n,t],[n,t])}function useRoomNotificationSettingsSuspense(){let e=useUpdateRoomNotificationSettings(),t=useRoom(),i=makeNotificationSettingsQueryKey(t.id),n=y.get().queries[i];if(void 0===n||n.isLoading)throw getInboxNotificationSettings(t,i);if(n.error)throw n.error;let r=o.useCallback(e=>({isLoading:!1,settings:selectNotificationSettings(t.id,e)}),[t]),l=(0,s.useSyncExternalStoreWithSelector)(y.subscribe,y.get,y.get,r);return o.useMemo(()=>[l,e],[l,e])}function useUpdateRoomNotificationSettings(){let e=useRoom();return o.useCallback(t=>{let i=nanoid();y.pushOptimisticUpdate({id:i,type:"update-notification-settings",roomId:e.id,settings:t}),e[n.W_].notifications.updateRoomNotificationSettings(t).then(t=>{y.set(n=>({...n,notificationSettings:{[e.id]:t},optimisticUpdates:n.optimisticUpdates.filter(e=>e.id!==i)}))},t=>onMutationFailure(t,i,t=>new v(t,{roomId:e.id})))},[e])}function useCurrentUserId(){return useSelf(e=>"string"==typeof e.id?e.id:null)}let I={RoomContext:i,RoomProvider:RoomProviderOuter,useRoom,useStatus,useBatch,useBroadcastEvent,useOthersListener,useLostConnectionListener,useErrorListener,useEventListener,useHistory,useUndo,useRedo,useCanRedo,useCanUndo,useList:useLegacyKey,useMap:useLegacyKey,useObject:useLegacyKey,useStorageRoot,useStorage,useSelf,useMyPresence,useUpdateMyPresence,useOthers,useOthersMapped,useOthersConnectionIds,useOther,useMutation,useThreads,useCreateThread,useEditThreadMetadata,useCreateComment,useEditComment,useDeleteComment,useAddReaction,useRemoveReaction,useMarkThreadAsRead,useThreadSubscription,useRoomNotificationSettings,useUpdateRoomNotificationSettings,...C,suspense:{RoomContext:i,RoomProvider:RoomProviderOuter,useRoom,useStatus,useBatch,useBroadcastEvent,useOthersListener,useLostConnectionListener,useErrorListener,useEventListener,useHistory,useUndo,useRedo,useCanRedo,useCanUndo,useList:useLegacyKeySuspense,useMap:useLegacyKeySuspense,useObject:useLegacyKeySuspense,useStorageRoot,useStorage:useStorageSuspense,useSelf:useSelfSuspense,useMyPresence,useUpdateMyPresence,useOthers:useOthersSuspense,useOthersMapped:useOthersMappedSuspense,useOthersConnectionIds:useOthersConnectionIdsSuspense,useOther:useOtherSuspense,useMutation,useThreads:useThreadsSuspense,useCreateThread,useEditThreadMetadata,useCreateComment,useEditComment,useDeleteComment,useAddReaction,useRemoveReaction,useMarkThreadAsRead,useThreadSubscription,useRoomNotificationSettings:useRoomNotificationSettingsSuspense,useUpdateRoomNotificationSettings,...C.suspense},[n.W_]:{useCurrentUserId,hasResolveMentionSuggestions:void 0!==N,useMentionSuggestions}};return Object.defineProperty(I,n.W_,{enumerable:!1})}function getCurrentUserId(e){let t=e.getSelf();return null===t||void 0===t.id?"anonymous":t.id}function handleApiError(e){let t=`Request failed with status ${e.status}: ${e.message}`;if(e.details?.error==="FORBIDDEN"){let i=[t,e.details.suggestion,e.details.docs].filter(Boolean).join("\n");n.iV.error(i)}return Error(t)}function generateQueryKey(e,t){return`${e}-${(0,n.Pz)(t??{})}`}var S=Error("resolveUsers didn't return anything for this user ID."),y=Error("resolveRoomsInfo didn't return anything for this room ID.");function createSharedContext(e){let t=e[n.W_].usersStore,i=e[n.W_].roomsInfoStore;return{useUser:function(e){let i=(0,o.useCallback)(()=>t.getState(e),[e]);(0,o.useEffect)(()=>{t.get(e)},[e]);let n=(0,r.useSyncExternalStore)(t.subscribe,i,i);return n?{isLoading:n.isLoading,user:n.data,error:n.isLoading||n.data||n.error?n.error:S}:{isLoading:!0}},useRoomInfo:function(e){let t=(0,o.useCallback)(()=>i.getState(e),[e]);(0,o.useEffect)(()=>{i.get(e)},[e]);let n=(0,r.useSyncExternalStore)(i.subscribe,t,t);return n?{isLoading:n.isLoading,info:n.data,error:n.isLoading||n.data||n.error?n.error:y}:{isLoading:!0}},suspense:{useUser:function(e){let i=(0,o.useCallback)(()=>t.getState(e),[e]),n=i();if(!n||n.isLoading)throw t.get(e);if(n.error)throw n.error;if(!n.data)throw S;let s=(0,r.useSyncExternalStore)(t.subscribe,i,i);return{isLoading:!1,user:s?.data,error:s?.error}},useRoomInfo:function(e){let t=(0,o.useCallback)(()=>i.getState(e),[e]),n=t();if(!n||n.isLoading)throw i.get(e);if(n.error)throw n.error;if(!n.data)throw y;let s=(0,r.useSyncExternalStore)(i.subscribe,t,t);return{isLoading:!1,info:s?.data,error:s?.error}}}}}var w=(0,o.createContext)(null),L="INBOX_NOTIFICATIONS";function createLiveblocksContext(e){let t;let i=createSharedContext(e),l=e[n.W_].cacheStore,d=e[n.W_].notifications;function LiveblocksProvider(e){return o.createElement(w.Provider,{value:f},e.children)}let c=null,u=0,g=(0,n.x3)(refreshThreadsAndNotifications);function refreshThreadsAndNotifications(){return d.getInboxNotifications({since:t}).then(e=>{t=e.meta.requestedAt,l.updateThreadsAndNotifications(e.threads,e.inboxNotifications,e.deletedThreads,e.deletedInboxNotifications,L)},()=>{})}function incrementInboxNotificationsSubscribers(){u++,g.start(6e4)}function decrementInboxNotificationsSubscribers(){if(u<=0){console.warn(`Internal unexpected behavior. Cannot decrease subscriber count for query "${L}"`);return}--u<=0&&g.stop()}async function fetchInboxNotifications({retryCount:e}={retryCount:0}){if(null!==c)return c;l.setQueryState(L,{isLoading:!0});try{c=d.getInboxNotifications();let e=await c;l.updateThreadsAndNotifications(e.threads,e.inboxNotifications,e.deletedThreads,e.deletedInboxNotifications,L),(void 0===t||t>e.meta.requestedAt)&&(t=e.meta.requestedAt),g.start(6e4)}catch(t){c=null,retryError(()=>{fetchInboxNotifications({retryCount:e+1})},e),l.setQueryState(L,{isLoading:!1,error:t})}}function useInboxNotificationsSelectorCallback(e){let t=e.queries[L];return void 0===t||t.isLoading?{isLoading:!0}:void 0!==t.error?{error:t.error,isLoading:!1}:{inboxNotifications:selectedInboxNotifications(e),isLoading:!1}}function useInboxNotifications(){(0,o.useEffect)(()=>(fetchInboxNotifications(),incrementInboxNotificationsSubscribers(),()=>decrementInboxNotificationsSubscribers()),[]);let e=(0,s.useSyncExternalStoreWithSelector)(l.subscribe,l.get,l.get,useInboxNotificationsSelectorCallback);return e}function useInboxNotificationsSuspenseSelector(e){return{inboxNotifications:selectedInboxNotifications(e),isLoading:!1}}function useInboxNotificationsSuspense(){let e=l.get().queries[L];if(void 0===e||e.isLoading)throw fetchInboxNotifications();if(void 0!==e.error)throw e.error;return o.useEffect(()=>(incrementInboxNotificationsSubscribers(),()=>{decrementInboxNotificationsSubscribers()}),[]),(0,s.useSyncExternalStoreWithSelector)(l.subscribe,l.get,l.get,useInboxNotificationsSuspenseSelector)}function selectUnreadInboxNotificationsCount(e){let t=0;for(let i of selectedInboxNotifications(e))(null===i.readAt||i.readAt<i.notifiedAt)&&t++;return t}function useUnreadInboxNotificationsCountSelector(e){let t=e.queries[L];return void 0===t||t.isLoading?{isLoading:!0}:void 0!==t.error?{error:t.error,isLoading:!1}:{isLoading:!1,count:selectUnreadInboxNotificationsCount(e)}}function useUnreadInboxNotificationsCount(){return(0,o.useEffect)(()=>(fetchInboxNotifications(),incrementInboxNotificationsSubscribers(),()=>decrementInboxNotificationsSubscribers()),[]),(0,s.useSyncExternalStoreWithSelector)(l.subscribe,l.get,l.get,useUnreadInboxNotificationsCountSelector)}function useUnreadInboxNotificationsCountSuspenseSelector(e){return{isLoading:!1,count:selectUnreadInboxNotificationsCount(e)}}function useUnreadInboxNotificationsCountSuspense(){let e=l.get().queries[L];if(void 0===e||e.isLoading)throw fetchInboxNotifications();return o.useEffect(()=>(incrementInboxNotificationsSubscribers(),()=>{decrementInboxNotificationsSubscribers()}),[]),(0,s.useSyncExternalStoreWithSelector)(l.subscribe,l.get,l.get,useUnreadInboxNotificationsCountSuspenseSelector)}function useMarkInboxNotificationAsRead(){return(0,o.useCallback)(e=>{let t=nanoid(),i=new Date;l.pushOptimisticUpdate({type:"mark-inbox-notification-as-read",id:t,inboxNotificationId:e,readAt:i}),d.markInboxNotificationAsRead(e).then(()=>{l.set(n=>{let o=n.inboxNotifications[e];return void 0===o?{...n,optimisticUpdates:n.optimisticUpdates.filter(e=>e.id!==t)}:{...n,inboxNotifications:{...n.inboxNotifications,[e]:{...o,readAt:i}},optimisticUpdates:n.optimisticUpdates.filter(e=>e.id!==t)}})},()=>{l.set(e=>({...e,optimisticUpdates:e.optimisticUpdates.filter(e=>e.id!==t)}))})},[])}function useMarkAllInboxNotificationsAsRead(){return(0,o.useCallback)(()=>{let e=nanoid(),t=new Date;l.pushOptimisticUpdate({type:"mark-inbox-notifications-as-read",id:e,readAt:t}),d.markAllInboxNotificationsAsRead().then(()=>{l.set(i=>({...i,inboxNotifications:Object.fromEntries(Array.from(Object.entries(i.inboxNotifications)).map(([e,i])=>[e,{...i,readAt:t}])),optimisticUpdates:i.optimisticUpdates.filter(t=>t.id!==e)}))},()=>{l.set(t=>({...t,optimisticUpdates:t.optimisticUpdates.filter(t=>t.id!==e)}))})},[])}function useThreadFromCache(e){let t=(0,o.useCallback)(t=>{let i=t.threads[e];if(void 0===i)throw Error(`Internal error: thread with id "${e}" not found in cache`);return i},[e]);return(0,s.useSyncExternalStoreWithSelector)(l.subscribe,l.get,l.get,t)}let m=e[n.W_].currentUserIdStore;function useCurrentUserId(){return(0,r.useSyncExternalStore)(m.subscribe,m.get,m.get)}let f={LiveblocksProvider,useInboxNotifications,useUnreadInboxNotificationsCount,useMarkInboxNotificationAsRead,useMarkAllInboxNotificationsAsRead,...i,suspense:{LiveblocksProvider,useInboxNotifications:useInboxNotificationsSuspense,useUnreadInboxNotificationsCount:useUnreadInboxNotificationsCountSuspense,useMarkInboxNotificationAsRead,useMarkAllInboxNotificationsAsRead,...i.suspense},[n.W_]:{useThreadFromCache,useCurrentUserId}};return Object.defineProperty(f,n.W_,{enumerable:!1})}(0,n.l8)("@liveblocks/react","1.11.1","esm")},11472:function(e,t,i){"use strict";let n;i.d(t,{Z:function(){return P}});var o=i(77948),r=i(67850).lW;let s="3.7.7",l="function"==typeof r,d="function"==typeof TextDecoder?new TextDecoder:void 0,c="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),g=(n={},u.forEach((e,t)=>n[e]=t),n),m=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),_="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),_mkUriSafe=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),_tidyB64=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=e=>{let t,i,n,o,r="",s=e.length%3;for(let s=0;s<e.length;){if((i=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw TypeError("invalid character found");r+=u[(t=i<<16|n<<8|o)>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return s?r.slice(0,s-3)+"===".substring(s):r},v="function"==typeof btoa?e=>btoa(e):l?e=>r.from(e,"binary").toString("base64"):btoaPolyfill,C=l?e=>r.from(e).toString("base64"):e=>{let t=[];for(let i=0,n=e.length;i<n;i+=4096)t.push(f.apply(null,e.subarray(i,i+4096)));return v(t.join(""))},fromUint8Array=(e,t=!1)=>t?_mkUriSafe(C(e)):C(e),cb_utob=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?f(192|t>>>6)+f(128|63&t):f(224|t>>>12&15)+f(128|t>>>6&63)+f(128|63&t)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return f(240|t>>>18&7)+f(128|t>>>12&63)+f(128|t>>>6&63)+f(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=e=>e.replace(b,cb_utob),S=l?e=>r.from(e,"utf8").toString("base64"):c?e=>C(c.encode(e)):e=>v(utob(e)),encode=(e,t=!1)=>t?_mkUriSafe(S(e)):S(e),base64_encodeURI=e=>encode(e,!0),y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return f((t>>>10)+55296)+f((1023&t)+56320);case 3:return f((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return f((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=e=>e.replace(y,cb_btou),atobPolyfill=e=>{if(e=e.replace(/\s+/g,""),!m.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,i="",n,o;for(let r=0;r<e.length;)t=g[e.charAt(r++)]<<18|g[e.charAt(r++)]<<12|(n=g[e.charAt(r++)])<<6|(o=g[e.charAt(r++)]),i+=64===n?f(t>>16&255):64===o?f(t>>16&255,t>>8&255):f(t>>16&255,t>>8&255,255&t);return i},w="function"==typeof atob?e=>atob(_tidyB64(e)):l?e=>r.from(e,"base64").toString("binary"):atobPolyfill,L=l?e=>_(r.from(e,"base64")):e=>_(w(e).split("").map(e=>e.charCodeAt(0))),toUint8Array=e=>L(_unURI(e)),k=l?e=>r.from(e,"base64").toString("utf8"):d?e=>d.decode(L(e)):e=>btou(w(e)),_unURI=e=>_tidyB64(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),decode=e=>k(_unURI(e)),_noEnum=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){let _add=(e,t)=>Object.defineProperty(String.prototype,e,_noEnum(t));_add("fromBase64",function(){return decode(this)}),_add("toBase64",function(e){return encode(this,e)}),_add("toBase64URI",function(){return encode(this,!0)}),_add("toBase64URL",function(){return encode(this,!0)}),_add("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){let _add=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(t));_add("toBase64",function(e){return fromUint8Array(this,e)}),_add("toBase64URI",function(){return fromUint8Array(this,!0)}),_add("toBase64URL",function(){return fromUint8Array(this,!0)})},D={version:s,VERSION:s,atob:w,atobPolyfill:atobPolyfill,btoa:v,btoaPolyfill:btoaPolyfill,fromBase64:decode,toBase64:encode,encode:encode,encodeURI:base64_encodeURI,encodeURL:base64_encodeURI,utob:utob,btou:btou,decode:decode,isValid:e=>{if("string"!=typeof e)return!1;let t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:fromUint8Array,toUint8Array:toUint8Array,extendString:extendString,extendUint8Array:extendUint8Array,extendBuiltins:()=>{extendString(),extendUint8Array()}};var x=i(13869),create=()=>new Map,setIfUndefined=(e,t,i)=>{let n=e.get(t);return void 0===n&&e.set(t,n=i()),n},create2=()=>new Set,N=Array.from,E=class{constructor(){this._observers=create()}on(e,t){setIfUndefined(this._observers,e,create2).add(t)}once(e,t){let _f=(...i)=>{this.off(e,_f),t(...i)};this.on(e,_f)}off(e,t){let i=this._observers.get(e);void 0!==i&&(i.delete(t),0===i.size&&this._observers.delete(e))}emit(e,t){return N((this._observers.get(e)||create()).values()).forEach(e=>e(...t))}destroy(){this._observers=create()}},I="__yjs",T="__yjs_clientid",M=class extends E{constructor(e,t){super(),this.states=new Map,this.actorToClientMap=new Map,this.meta=new Map,this._checkInterval=0,this.doc=e,this.room=t,this.room.updatePresence({[T]:this.doc.clientID}),this.othersUnsub=this.room.events.others.subscribe(e=>{let t;if(this.rebuildActorToClientMap(e.others),"leave"===e.type){let i=this.actorToClientMap.get(e.user.connectionId);void 0!==i&&(t={added:[],updated:[],removed:[i]}),this.rebuildActorToClientMap(e.others)}if("enter"===e.type||"update"===e.type){this.rebuildActorToClientMap(e.others);let i=this.actorToClientMap.get(e.user.connectionId);void 0!==i&&(t={added:"enter"===e.type?[i]:[],updated:"update"===e.type?[i]:[],removed:[]})}void 0!==t&&(this.emit("change",[t,"presence"]),this.emit("update",[t,"presence"]))})}rebuildActorToClientMap(e){this.actorToClientMap.clear(),e.forEach(e=>{void 0!==e.presence[T]&&this.actorToClientMap.set(e.connectionId,e.presence[T])})}destroy(){this.emit("destroy",[this]),this.othersUnsub(),this.setLocalState(null),super.destroy()}getLocalState(){let e=this.room.getPresence();return 0===Object.keys(e).length||void 0===e[I]?null:e[I]}setLocalState(e){let t=this.room.getSelf()?.presence;if(null===e){if(void 0===t)return;this.room.updatePresence({...t,[I]:null}),this.emit("update",[{added:[],updated:[],removed:[this.doc.clientID]},"local"]);return}let i=t?.[I],n=void 0===i?[this.doc.clientID]:[],o=void 0===i?[]:[this.doc.clientID];this.room.updatePresence({[I]:{...i||{},...e||{}}}),this.emit("update",[{added:n,updated:o,removed:[]},"local"])}setLocalStateField(e,t){let i=this.room.getSelf()?.presence[I];this.room.updatePresence({[I]:{...i||{},[e]:t}})}getStates(){let e=this.room.getOthers(),t=e.reduce((e,t)=>{let i=t.presence[I],n=t.presence[T];return void 0!==i&&void 0!==n&&e.set(n,i||{}),e},new Map),i=this.room.getSelf()?.presence[I];return void 0!==i&&t.set(this.doc.clientID,i),t}},R=class extends E{constructor({doc:e,isRoot:t,updateDoc:i,fetchDoc:n}){super(),this.unsubscribers=[],this._synced=!1,this.handleServerUpdate=({update:e,stateVector:t})=>{if(x.NG(this.doc,D.toUint8Array(e),"backend"),t){try{let e=x.D$(this.doc,D.toUint8Array(t));this.updateRoomDoc(D.fromUint8Array(e))}catch(e){console.warn(e)}this.synced=!0}},this.syncDoc=()=>{this.synced=!1;let e=D.fromUint8Array(x.gJ(this.doc));this.fetchRoomDoc(e)},this.updateHandler=(e,t)=>{if("backend"!==t){let t=D.fromUint8Array(e);this.updateRoomDoc(t)}},this.doc=e,this.doc.on("update",this.updateHandler),this.updateRoomDoc=e=>{i(e,t?void 0:this.doc.guid)},this.fetchRoomDoc=e=>{n(e,t?void 0:this.doc.guid)},this.syncDoc()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this.doc.off("update",this.updateHandler),this.unsubscribers.forEach(e=>e()),this._observers=new Map,this.doc.destroy()}};(0,o.l8)("@liveblocks/yjs","1.11.1","esm");var A={autoloadSubdocs:!1},P=class extends E{constructor(e,t,i=A){super(),this.unsubscribers=[],this.subdocHandlers=new Map,this.handleSubdocs=({loaded:e,removed:t,added:i})=>{if(e.forEach(this.createSubdocHandler),this.options.autoloadSubdocs)for(let e of i)this.subdocHandlers.has(e.guid)||e.load();for(let e of t)this.subdocHandlers.has(e.guid)&&(this.subdocHandlers.get(e.guid)?.destroy(),this.subdocHandlers.delete(e.guid))},this.updateDoc=(e,t)=>{this.room.updateYDoc(e,t)},this.fetchDoc=(e,t)=>{this.room.fetchYDoc(e,t)},this.createSubdocHandler=e=>{if(this.subdocHandlers.has(e.guid)){this.subdocHandlers.get(e.guid)?.syncDoc();return}let t=new R({doc:e,isRoot:!1,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc});this.subdocHandlers.set(e.guid,t)},this.loadSubdoc=e=>{for(let t of this.rootDoc.subdocs)if(t.guid===e)return t.load(),!0;return!1},this.syncDoc=()=>{for(let[e,t]of(this.rootDocHandler.syncDoc(),this.subdocHandlers))t.syncDoc()},this.rootDoc=t,this.room=e,this.options=i,this.rootDocHandler=new R({doc:t,isRoot:!0,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc}),this.awareness=new M(this.rootDoc,this.room),this.unsubscribers.push(this.room.events.status.subscribe(e=>{"connected"===e?this.rootDocHandler.syncDoc():this.rootDocHandler.synced=!1})),this.unsubscribers.push(this.room.events.ydoc.subscribe(e=>{let{type:t}=e;if(t===o.Ze.UPDATE_YDOC)return;let{stateVector:i,update:n,guid:r}=e;void 0!==r?this.subdocHandlers.get(r)?.handleServerUpdate({update:n,stateVector:i}):this.rootDocHandler.handleServerUpdate({update:n,stateVector:i})})),this.rootDocHandler.on("synced",()=>{let e=this.rootDocHandler.synced;for(let[e,t]of this.subdocHandlers)t.syncDoc();this.emit("synced",[e]),this.emit("sync",[e])}),this.rootDoc.on("subdocs",this.handleSubdocs),this.syncDoc()}get synced(){return this.rootDocHandler.synced}destroy(){for(let[e,t]of(this.unsubscribers.forEach(e=>e()),this.awareness.destroy(),this.rootDocHandler.destroy(),this._observers=new Map,this.subdocHandlers))t.destroy();this.subdocHandlers.clear(),super.destroy()}disconnect(){}connect(){}}},12047:function(e,t,i){"use strict";i.d(t,{Dp:function(){return n},Z$:function(){return last},kJ:function(){return o},s7:function(){return appendTo}});let last=e=>e[e.length-1],appendTo=(e,t)=>{for(let i=0;i<t.length;i++)e.push(t[i])},n=Array.from,o=Array.isArray},5244:function(e,t,i){"use strict";i.d(t,{$2:function(){return g},CY:function(){return r},Ko:function(){return s},Qn:function(){return o},RP:function(){return f},Tg:function(){return _},Vw:function(){return n},cq:function(){return l},jS:function(){return m},kr:function(){return u},rc:function(){return d},x1:function(){return c}});let n=1,o=2,r=4,s=8,l=32,d=64,c=128,u=31,g=63,m=127,f=2147483647,_=4294967295},23214:function(e,t,i){"use strict";i.d(t,{f9:function(){return copyUint8Array}}),i(83595);var n=i(88334),o=i(67850).lW;let createUint8ArrayFromLen=e=>new Uint8Array(e),createUint8ArrayViewFromArrayBuffer=(e,t,i)=>new Uint8Array(e,t,i);n.jU||(e=>o.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")),n.jU||(e=>{let t=o.from(e,"base64");return createUint8ArrayViewFromArrayBuffer(t.buffer,t.byteOffset,t.byteLength)});let copyUint8Array=e=>{let t=createUint8ArrayFromLen(e.byteLength);return t.set(e),t}},46467:function(e,t,i){"use strict";i.d(t,{HN:function(){return readVarUint8Array},UF:function(){return UintOptRleDecoder},XW:function(){return RleDecoder},dD:function(){return IntDiffOptRleDecoder},kf:function(){return u},kj:function(){return readUint8},l1:function(){return createDecoder},sO:function(){return StringDecoder},v_:function(){return readAny},yg:function(){return readVarUint}});var n=i(5244),o=i(62282),r=i(87583),s=i(83595),l=i(97546);let d=l.Ue("Unexpected end of array"),c=l.Ue("Integer out of Range");let Decoder=class Decoder{constructor(e){this.arr=e,this.pos=0}};let createDecoder=e=>new Decoder(e),hasContent=e=>e.pos!==e.arr.length,readUint8Array=(e,t)=>{let i=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,i},readVarUint8Array=e=>readUint8Array(e,readVarUint(e)),readUint8=e=>e.arr[e.pos++],readVarUint=e=>{let t=0,i=1,o=e.arr.length;for(;e.pos<o;){let o=e.arr[e.pos++];if(t+=(o&n.jS)*i,i*=128,o<n.x1)return t;if(t>r.YM)throw c}throw d},readVarInt=e=>{let t=e.arr[e.pos++],i=t&n.$2,o=64,s=(t&n.rc)>0?-1:1;if((t&n.x1)==0)return s*i;let l=e.arr.length;for(;e.pos<l;){if(i+=((t=e.arr[e.pos++])&n.jS)*o,o*=128,t<n.x1)return s*i;if(i>r.YM)throw c}throw d},u=s.CO?e=>s.CO.decode(readVarUint8Array(e)):e=>{let t=readVarUint(e);if(0===t)return"";{let i=String.fromCodePoint(readUint8(e));if(--t<100)for(;t--;)i+=String.fromCodePoint(readUint8(e));else for(;t>0;){let n=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,i+=String.fromCodePoint.apply(null,o),t-=n}return decodeURIComponent(escape(i))}},readFromDataView=(e,t)=>{let i=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,i},g=[e=>void 0,e=>null,readVarInt,e=>readFromDataView(e,4).getFloat32(0,!1),e=>readFromDataView(e,8).getFloat64(0,!1),e=>readFromDataView(e,8).getBigInt64(0,!1),e=>!1,e=>!0,u,e=>{let t=readVarUint(e),i={};for(let n=0;n<t;n++){let t=u(e);i[t]=readAny(e)}return i},e=>{let t=readVarUint(e),i=[];for(let n=0;n<t;n++)i.push(readAny(e));return i},readVarUint8Array],readAny=e=>g[127-readUint8(e)](e);let RleDecoder=class RleDecoder extends Decoder{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),hasContent(this)?this.count=readVarUint(this)+1:this.count=-1),this.count--,this.s}};let UintOptRleDecoder=class UintOptRleDecoder extends Decoder{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=readVarInt(this);let e=o.GR(this.s);this.count=1,e&&(this.s=-this.s,this.count=readVarUint(this)+2)}return this.count--,this.s}};let IntDiffOptRleDecoder=class IntDiffOptRleDecoder extends Decoder{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=readVarInt(this),t=1&e;this.diff=o.GW(e/2),this.count=1,t&&(this.count=readVarUint(this)+2)}return this.s+=this.diff,this.count--,this.s}};let StringDecoder=class StringDecoder{constructor(e){this.decoder=new UintOptRleDecoder(e),this.str=u(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},68123:function(e,t,i){"use strict";i.d(t,{$F:function(){return d},EM:function(){return writeAny},GF:function(){return RleEncoder},HE:function(){return UintOptRleEncoder},HK:function(){return writeUint8Array},Mf:function(){return createEncoder},TS:function(){return StringEncoder},_f:function(){return toUint8Array},mP:function(){return writeVarUint8Array},sX:function(){return IntDiffOptRleEncoder},uE:function(){return writeVarUint},uw:function(){return g}});var n=i(62282),o=i(87583),r=i(5244),s=i(83595),l=i(12047);let Encoder=class Encoder{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};let createEncoder=()=>new Encoder,length=e=>{let t=e.cpos;for(let i=0;i<e.bufs.length;i++)t+=e.bufs[i].length;return t},toUint8Array=e=>{let t=new Uint8Array(length(e)),i=0;for(let n=0;n<e.bufs.length;n++){let o=e.bufs[n];t.set(o,i),i+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),i),t},verifyLen=(e,t)=>{let i=e.cbuf.length;i-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*n.Fp(i,t)),e.cpos=0)},write=(e,t)=>{let i=e.cbuf.length;e.cpos===i&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*i),e.cpos=0),e.cbuf[e.cpos++]=t},d=write,writeVarUint=(e,t)=>{for(;t>r.jS;)write(e,r.x1|r.jS&t),t=n.GW(t/128);write(e,r.jS&t)},writeVarInt=(e,t)=>{let i=n.GR(t);for(i&&(t=-t),write(e,(t>r.$2?r.x1:0)|(i?r.rc:0)|r.$2&t),t=n.GW(t/64);t>0;)write(e,(t>r.jS?r.x1:0)|r.jS&t),t=n.GW(t/128)},c=new Uint8Array(3e4),u=c.length/3,g=s.YZ&&s.YZ.encodeInto?(e,t)=>{if(t.length<u){let i=s.YZ.encodeInto(t,c).written||0;writeVarUint(e,i);for(let t=0;t<i;t++)write(e,c[t])}else writeVarUint8Array(e,s.lz(t))}:(e,t)=>{let i=unescape(encodeURIComponent(t)),n=i.length;writeVarUint(e,n);for(let t=0;t<n;t++)write(e,i.codePointAt(t))},writeUint8Array=(e,t)=>{let i=e.cbuf.length,o=e.cpos,r=n.VV(i-o,t.length),s=t.length-r;e.cbuf.set(t.subarray(0,r),o),e.cpos+=r,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n.Fp(2*i,s)),e.cbuf.set(t.subarray(r)),e.cpos=s)},writeVarUint8Array=(e,t)=>{writeVarUint(e,t.byteLength),writeUint8Array(e,t)},writeOnDataView=(e,t)=>{verifyLen(e,t);let i=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,i},writeFloat32=(e,t)=>writeOnDataView(e,4).setFloat32(0,t,!1),writeFloat64=(e,t)=>writeOnDataView(e,8).setFloat64(0,t,!1),writeBigInt64=(e,t)=>writeOnDataView(e,8).setBigInt64(0,t,!1),m=new DataView(new ArrayBuffer(4)),isFloat32=e=>(m.setFloat32(0,e),m.getFloat32(0)===e),writeAny=(e,t)=>{switch(typeof t){case"string":write(e,119),g(e,t);break;case"number":o.U(t)&&n.Wn(t)<=r.RP?(write(e,125),writeVarInt(e,t)):isFloat32(t)?(write(e,124),writeFloat32(e,t)):(write(e,123),writeFloat64(e,t));break;case"bigint":write(e,122),writeBigInt64(e,t);break;case"object":if(null===t)write(e,126);else if(l.kJ(t)){write(e,117),writeVarUint(e,t.length);for(let i=0;i<t.length;i++)writeAny(e,t[i])}else if(t instanceof Uint8Array)write(e,116),writeVarUint8Array(e,t);else{write(e,118);let i=Object.keys(t);writeVarUint(e,i.length);for(let n=0;n<i.length;n++){let o=i[n];g(e,o),writeAny(e,t[o])}}break;case"boolean":write(e,t?120:121);break;default:write(e,127)}};let RleEncoder=class RleEncoder extends Encoder{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&writeVarUint(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}};let flushUintOptRleEncoder=e=>{e.count>0&&(writeVarInt(e.encoder,1===e.count?e.s:-e.s),e.count>1&&writeVarUint(e.encoder,e.count-2))};let UintOptRleEncoder=class UintOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0}write(e){this.s===e?this.count++:(flushUintOptRleEncoder(this),this.count=1,this.s=e)}toUint8Array(){return flushUintOptRleEncoder(this),toUint8Array(this.encoder)}};let flushIntDiffOptRleEncoder=e=>{if(e.count>0){let t=2*e.diff+(1===e.count?0:1);writeVarInt(e.encoder,t),e.count>1&&writeVarUint(e.encoder,e.count-2)}};let IntDiffOptRleEncoder=class IntDiffOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(flushIntDiffOptRleEncoder(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return flushIntDiffOptRleEncoder(this),toUint8Array(this.encoder)}};let StringEncoder=class StringEncoder{constructor(){this.sarr=[],this.s="",this.lensE=new UintOptRleEncoder}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new Encoder;return this.sarr.push(this.s),this.s="",g(e,this.sarr.join("")),writeUint8Array(e,this.lensE.toUint8Array()),toUint8Array(e)}}},88334:function(e,t,i){"use strict";let n;i.d(t,{jU:function(){return m},hH:function(){return v}});var o,r=i(26219),s=i(83595);let undefinedToNull=e=>void 0===e?null:e;let VarStoragePolyfill=class VarStoragePolyfill{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}};let l=new VarStoragePolyfill;try{"undefined"!=typeof localStorage&&localStorage&&(l=localStorage)}catch(e){}let d=l;var c=i(50475),u=i(55406);let g=void 0!==u&&u.release&&/node|io\.js/.test(u.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==u?u:0),m="undefined"!=typeof window&&"undefined"!=typeof document&&!g;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let f=[],computeParams=()=>{if(void 0===n){if(g){n=r.Ue();let e=u.argv,t=null;for(let i=0;i<e.length;i++){let o=e[i];"-"===o[0]?(null!==t&&n.set(t,""),t=o):null!==t?(n.set(t,o),t=null):f.push(o)}null!==t&&n.set(t,"")}else"object"==typeof location?(n=r.Ue(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,i]=e.split("=");n.set(`--${s.NF(t,"-")}`,i),n.set(`-${s.NF(t,"-")}`,i)}})):n=r.Ue()}return n},hasParam=e=>computeParams().has(e),getVariable=e=>g?undefinedToNull(u.env[e.toUpperCase().replaceAll("-","_")]):undefinedToNull(d.getItem(e));hasParam("--"+(o="production"))||getVariable(o);let _=g&&c.gB(u.env.FORCE_COLOR,["true","1","2"]),v=!hasParam("no-colors")&&(!g||u.stdout.isTTY||_)&&(!g||hasParam("color")||_||null!==getVariable("COLORTERM")||(getVariable("TERM")||"").includes("color"))},97546:function(e,t,i){"use strict";i.d(t,{Nw:function(){return methodUnimplemented},Ue:function(){return create},zR:function(){return unexpectedCase}});let create=e=>Error(e),methodUnimplemented=()=>{throw create("Method unimplemented")},unexpectedCase=()=>{throw create("Unexpected case")}},50475:function(e,t,i){"use strict";i.d(t,{PP:function(){return callAll},gB:function(){return isOneOf},id:function(){return id}});var n=i(12047);let callAll=(e,t,i=0)=>{try{for(;i<e.length;i++)e[i](...t)}finally{i<e.length&&callAll(e,t,i+1)}},id=e=>e,isOneOf=(e,t)=>t.includes(e);n.kJ},97233:function(e,t,i){"use strict";i.d(t,{BG:function(){return iteratorFilter},CA:function(){return iteratorMap}});let createIterator=e=>({[Symbol.iterator](){return this},next:e}),iteratorFilter=(e,t)=>createIterator(()=>{let i;do i=e.next();while(!i.done&&!t(i.value));return i}),iteratorMap=(e,t)=>createIterator(()=>{let{done:i,value:n}=e.next();return{done:i,value:i?void 0:t(n)}})},29453:function(e,t,i){"use strict";i.d(t,{Ej:function(){return l},Pl:function(){return r},ZA:function(){return c},s7:function(){return d},ud:function(){return m},Wd:function(){return g},hM:function(){return u},YW:function(){return s},WO:function(){return f},_X:function(){return computeNoColorLoggingArgs}});let n=Symbol,o=Date.now,r=n(),s=n(),l=n(),d=n(),c=n(),u=n(),g=n(),m=n(),f=n(),computeNoColorLoggingArgs=e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],i=[],n=0;for(;n<e.length;n++){let o=e[n];void 0===o?t.push("undefined"):o.constructor===String||o.constructor===Number?t.push(o):o.constructor===Object&&i.push(JSON.stringify(o))}return i};o()},25202:function(e,t,i){"use strict";i.d(t,{S0:function(){return print}});var n=i(88334),o=i(39242);let Pair=class Pair{constructor(e,t){this.left=e,this.right=t}};let create=(e,t)=>new Pair(e,t);var r=i(26219);let s="undefined"!=typeof document?document:{};"undefined"!=typeof DOMParser&&new DOMParser;let mapToStyleString=e=>r.UI(e,(e,t)=>`${t}:${e};`).join("");s.ELEMENT_NODE,s.TEXT_NODE,s.CDATA_SECTION_NODE,s.COMMENT_NODE,s.DOCUMENT_NODE,s.DOCUMENT_TYPE_NODE,s.DOCUMENT_FRAGMENT_NODE;var l=i(29453);let d={[l.Pl]:create("font-weight","bold"),[l.YW]:create("font-weight","normal"),[l.Ej]:create("color","blue"),[l.ZA]:create("color","green"),[l.s7]:create("color","grey"),[l.hM]:create("color","red"),[l.Wd]:create("color","purple"),[l.ud]:create("color","orange"),[l.WO]:create("color","black")},c=n.hH?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],i=[],n=r.Ue(),o=[],s=0;for(;s<e.length;s++){let o=e[s],r=d[o];if(void 0!==r)n.set(r.left,r.right);else{if(void 0===o)break;if(o.constructor===String||o.constructor===Number){let e=mapToStyleString(n);s>0||e.length>0?(t.push("%c"+o),i.push(e)):t.push(o)}else break}}for(s>0&&(o=i).unshift(t.join(""));s<e.length;s++){let t=e[s];t instanceof Symbol||o.push(t)}return o}:l._X,print=(...e)=>{console.log(...c(e)),u.forEach(t=>t.print(e))},u=o.Ue()},26219:function(e,t,i){"use strict";i.d(t,{JG:function(){return copy},UI:function(){return map},Ue:function(){return create},Yj:function(){return any},Yu:function(){return setIfUndefined}});let create=()=>new Map,copy=e=>{let t=create();return e.forEach((e,i)=>{t.set(i,e)}),t},setIfUndefined=(e,t,i)=>{let n=e.get(t);return void 0===n&&e.set(t,n=i()),n},map=(e,t)=>{let i=[];for(let[n,o]of e)i.push(t(o,n));return i},any=(e,t)=>{for(let[i,n]of e)if(t(n,i))return!0;return!1}},62282:function(e,t,i){"use strict";i.d(t,{Fp:function(){return max},GR:function(){return isNegativeZero},GW:function(){return n},VV:function(){return min},Wn:function(){return o}});let n=Math.floor,o=Math.abs,min=(e,t)=>e<t?e:t,max=(e,t)=>e>t?e:t,isNegativeZero=e=>0!==e?e<0:1/e<0},87583:function(e,t,i){"use strict";i.d(t,{U:function(){return s},YM:function(){return r}});var n=i(62282),o=i(5244);let r=Number.MAX_SAFE_INTEGER;o.RP,o.Tg;let s=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&n.GW(e)===e)},17032:function(e,t,i){"use strict";i.d(t,{$m:function(){return equalFlat},Ed:function(){return forEach},f0:function(){return n},xb:function(){return isEmpty}});let n=Object.assign,o=Object.keys,forEach=(e,t)=>{for(let i in e)t(e[i],i)},length=e=>o(e).length,isEmpty=e=>{for(let t in e)return!1;return!0},every=(e,t)=>{for(let i in e)if(!t(e[i],i))return!1;return!0},hasProperty=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),equalFlat=(e,t)=>e===t||length(e)===length(t)&&every(e,(e,i)=>(void 0!==e||hasProperty(t,i))&&t[i]===e)},7103:function(e,t,i){"use strict";i.d(t,{g:function(){return ObservableV2}});var n=i(26219),o=i(39242),r=i(12047);let ObservableV2=class ObservableV2{constructor(){this._observers=n.Ue()}on(e,t){return n.Yu(this._observers,e,o.Ue).add(t),t}once(e,t){let _f=(...i)=>{this.off(e,_f),t(...i)};this.on(e,_f)}off(e,t){let i=this._observers.get(e);void 0!==i&&(i.delete(t),0===i.size&&this._observers.delete(e))}emit(e,t){return r.Dp((this._observers.get(e)||n.Ue()).values()).forEach(e=>e(...t))}destroy(){this._observers=n.Ue()}}},21814:function(e,t,i){"use strict";i.d(t,{Ue:function(){return create}});let create=e=>new Promise(e);Promise.all.bind(Promise)},85169:function(e,t,i){"use strict";i.d(t,{U7:function(){return uint32},k$:function(){return uuidv4}}),crypto.subtle;let n=crypto.getRandomValues.bind(crypto),uint32=()=>n(new Uint32Array(1))[0],uuidv4=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^uint32()&15>>e/4).toString(16))},39242:function(e,t,i){"use strict";i.d(t,{Ue:function(){return create}});let create=()=>new Set},83595:function(e,t,i){"use strict";i.d(t,{CO:function(){return d},IK:function(){return n},NF:function(){return fromCamelCase},YZ:function(){return s},lz:function(){return l}});let n=String.fromCharCode;n(65535);let toLowerCase=e=>e.toLowerCase(),o=/^\s*/g,trimLeft=e=>e.replace(o,""),r=/([A-Z])/g,fromCamelCase=(e,t)=>trimLeft(e.replace(r,e=>`${t}${toLowerCase(e)}`)),s="undefined"!=typeof TextEncoder?new TextEncoder:null,l=s?e=>s.encode(e):e=>{let t=unescape(encodeURIComponent(e)),i=t.length,n=new Uint8Array(i);for(let e=0;e<i;e++)n[e]=t.codePointAt(e);return n},d="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});d&&1===d.decode(new Uint8Array).length&&(d=null)},91132:function(e,t,i){"use strict";let n,o,r;i.d(t,{K:function(){return MonacoBinding}});var s,l,d,c,u,g,m,f,_,v,C,b,S,y,w,L,k,D,x,N,E,I,T,M,R,A,P,O,F,B,W,V,H,z,U,K,j,q,G,Q,Z,Y,J,X,ee,et,ei,en,eo,er,es,ea,el,ed,eh,ec,eu,eg,ep,em,ef,e_,ev,eC,eb,eS,ey,ew,eL,ek,eD,ex,eN,eE,eI,eT,eM,eR,eA,eP,eO,eF,eB,eW,eV,eH,ez,eU,eK,ej,eq,e$,eG,eQ,eZ,eY,eJ,eX,e0,e1,e2,e5,e4,e3,e6=i(13869),e7=i(50445),e9=Object.defineProperty,e8=Object.getOwnPropertyDescriptor,te=Object.getOwnPropertyNames,tt=Object.prototype.hasOwnProperty,__copyProps=(e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of te(t))tt.call(e,o)||o===i||e9(e,o,{get:()=>t[o],enumerable:!(n=e8(t,o))||n.enumerable});return e},ti={};__copyProps(ti,e7,"default"),s&&__copyProps(s,e7,"default");var tn={},to={},tr=class _LazyLanguageLoader{static getOrCreate(e){return to[e]||(to[e]=new _LazyLanguageLoader(e)),to[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,tn[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function registerLanguage(e){let t=e.id;tn[t]=e,ti.languages.register(e);let i=tr.getOrCreate(t);ti.languages.registerTokensProviderFactory(t,{create:async()=>{let e=await i.load();return e.language}}),ti.languages.onLanguageEncountered(t,async()=>{let e=await i.load();ti.languages.setLanguageConfiguration(t,e.conf)})}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>i.e(4991).then(i.bind(i,24991))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>i.e(3769).then(i.bind(i,43769))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>i.e(3352).then(i.bind(i,83352))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>i.e(4582).then(i.bind(i,54582))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>i.e(6055).then(i.bind(i,86055))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>i.e(3871).then(i.bind(i,43871))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>i.e(9422).then(i.bind(i,79422))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>i.e(6254).then(i.bind(i,56254))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>i.e(9592).then(i.bind(i,89592))}),registerLanguage({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>i.e(9592).then(i.bind(i,89592))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>i.e(1970).then(i.bind(i,11970))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>i.e(804).then(i.bind(i,70804))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>i.e(3727).then(i.bind(i,3727))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>i.e(9055).then(i.bind(i,19055))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>i.e(6937).then(i.bind(i,16937))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>i.e(7510).then(i.bind(i,7510))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>i.e(7429).then(i.bind(i,37429))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>i.e(2443).then(i.bind(i,94427))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>i.e(3116).then(i.bind(i,63116))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>i.e(4513).then(i.bind(i,4513))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagAutoInterpolationDollar)}),registerLanguage({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagAngleInterpolationDollar)}),registerLanguage({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagBracketInterpolationDollar)}),registerLanguage({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagAngleInterpolationBracket)}),registerLanguage({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagBracketInterpolationBracket)}),registerLanguage({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagAutoInterpolationDollar)}),registerLanguage({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>i.e(8247).then(i.bind(i,98247)).then(e=>e.TagAutoInterpolationBracket)}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>i.e(9752).then(i.bind(i,19752))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>i.e(2312).then(i.bind(i,42312))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>i.e(8928).then(i.bind(i,8928))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>i.e(6173).then(i.bind(i,76173))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>i.e(3040).then(i.bind(i,33040))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>i.e(399).then(i.bind(i,20399))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>i.e(713).then(i.bind(i,80713))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>i.e(6912).then(i.bind(i,76912))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>i.e(9397).then(i.bind(i,69397))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>i.e(6083).then(i.bind(i,56083))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>i.e(8271).then(i.bind(i,8271))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>i.e(532).then(i.bind(i,70532))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>i.e(4122).then(i.bind(i,94122))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>i.e(2198).then(i.bind(i,72198))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>i.e(5367).then(i.bind(i,65367))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>i.e(2745).then(i.bind(i,12745))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>i.e(7778).then(i.bind(i,57778))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>i.e(9474).then(i.bind(i,99474))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>i.e(2315).then(i.bind(i,82315))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>i.e(7782).then(i.bind(i,77782))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>i.e(8640).then(i.bind(i,28640))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>i.e(3567).then(i.bind(i,53567))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>i.e(1612).then(i.bind(i,41612))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>i.e(8366).then(i.bind(i,78366))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>i.e(2061).then(i.bind(i,62061))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>i.e(7597).then(i.bind(i,87597))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"pla",extensions:[".pla"],loader:()=>i.e(8463).then(i.bind(i,88463))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>i.e(8338).then(i.bind(i,8338))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>i.e(8966).then(i.bind(i,98966))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>i.e(5968).then(i.bind(i,85968))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>i.e(1775).then(i.bind(i,31775))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>i.e(6218).then(i.bind(i,36218))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>i.e(4918).then(i.bind(i,4918))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>i.e(1803).then(i.bind(i,31803))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>i.e(3324).then(i.bind(i,43324))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>i.e(2057).then(i.bind(i,52057))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>i.e(7674).then(i.bind(i,87674))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>i.e(8452).then(i.bind(i,88452))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>i.e(5207).then(i.bind(i,45207))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>i.e(9203).then(i.bind(i,59203))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>i.e(6499).then(i.bind(i,66499))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>i.e(2997).then(i.bind(i,2997))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>i.e(45).then(i.bind(i,90045))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>i.e(7360).then(i.bind(i,87360))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>i.e(6546).then(i.bind(i,46546))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>i.e(2554).then(i.bind(i,12554))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>i.e(2093).then(i.bind(i,92093))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>i.e(3350).then(i.bind(i,93350))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>i.e(7471).then(i.bind(i,87471))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>i.e(6275).then(i.bind(i,16275))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>i.e(7381).then(i.bind(i,7381))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>i.e(4258).then(i.bind(i,4258))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>i.e(6898).then(i.bind(i,76898))}),registerLanguage({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>i.e(6898).then(i.bind(i,76898))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>i.e(2390).then(i.bind(i,72390))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>i.e(832).then(i.bind(i,50832))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>i.e(7256).then(i.bind(i,97256))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>i.e(8024).then(i.bind(i,88024))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>i.e(5828).then(i.bind(i,75828))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>i.e(2627).then(i.bind(i,32627))}),/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/registerLanguage({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>i.e(3215).then(i.bind(i,73215))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var ts=Object.defineProperty,ta=Object.getOwnPropertyDescriptor,tl=Object.getOwnPropertyNames,td=Object.prototype.hasOwnProperty,monaco_contribution_copyProps=(e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of tl(t))td.call(e,o)||o===i||ts(e,o,{get:()=>t[o],enumerable:!(n=ta(t,o))||n.enumerable});return e},th={};monaco_contribution_copyProps(th,e7,"default"),l&&monaco_contribution_copyProps(l,e7,"default");var tc=class{constructor(e,t,i){this._onDidChange=new th.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},tu={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},tg={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},tp=new tc("css",tu,tg),tm=new tc("scss",tu,tg),tf=new tc("less",tu,tg);function getMode(){return i.e(4117).then(i.bind(i,54117))}th.languages.css={cssDefaults:tp,lessDefaults:tf,scssDefaults:tm},th.languages.onLanguage("less",()=>{getMode().then(e=>e.setupMode(tf))}),th.languages.onLanguage("scss",()=>{getMode().then(e=>e.setupMode(tm))}),th.languages.onLanguage("css",()=>{getMode().then(e=>e.setupMode(tp))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var t_=Object.defineProperty,tv=Object.getOwnPropertyDescriptor,tC=Object.getOwnPropertyNames,tb=Object.prototype.hasOwnProperty,html_monaco_contribution_copyProps=(e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of tC(t))tb.call(e,o)||o===i||t_(e,o,{get:()=>t[o],enumerable:!(n=tv(t,o))||n.enumerable});return e},tS={};html_monaco_contribution_copyProps(tS,e7,"default"),d&&html_monaco_contribution_copyProps(d,e7,"default");var ty=class{constructor(e,t,i){this._onDidChange=new tS.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},tw={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function getConfigurationDefault(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===tL,documentFormattingEdits:e===tL,documentRangeFormattingEdits:e===tL}}var tL="html",tk="handlebars",tD="razor",tx=registerHTMLLanguageService(tL,tw,getConfigurationDefault(tL)),tN=tx.defaults,tE=registerHTMLLanguageService(tk,tw,getConfigurationDefault(tk)),tI=tE.defaults,tT=registerHTMLLanguageService(tD,tw,getConfigurationDefault(tD)),tM=tT.defaults;function monaco_contribution_getMode(){return i.e(9400).then(i.bind(i,39400))}function registerHTMLLanguageService(e,t=tw,i=getConfigurationDefault(e)){let n;let o=new ty(e,t,i),r=tS.languages.onLanguage(e,async()=>{n=(await monaco_contribution_getMode()).setupMode(o)});return{defaults:o,dispose(){r.dispose(),n?.dispose(),n=void 0}}}tS.languages.html={htmlDefaults:tN,razorDefaults:tM,handlebarDefaults:tI,htmlLanguageService:tx,handlebarLanguageService:tE,razorLanguageService:tT,registerHTMLLanguageService};/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.47.0(69991d66135e4a1fc1cf0b1ac4ad25d429866a0d)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var tR=new class{constructor(e,t,i){this._onDidChange=new e7.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0});function json_monaco_contribution_getMode(){return i.e(4693).then(i.bind(i,44693))}e7.languages.json={jsonDefaults:tR,getWorker:()=>json_monaco_contribution_getMode().then(e=>e.getWorker())},e7.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),e7.languages.onLanguage("json",()=>{json_monaco_contribution_getMode().then(e=>e.setupMode(tR))}),i(13558);var tA=i(36986),tP=i(10419),tO=i(70687),tF=i(84530),tB=i(38981),tW=i(86992),tV=i(73800),tH=i(97240),tz=i(46157),tU=i(31798),tK=i(56143),tj=i(78559),tq=i(7193);i(89476);let ToggleCollapseUnchangedRegions=class ToggleCollapseUnchangedRegions extends tU.Ke{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:(0,tz.vv)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:tF.l.map,toggled:tq.Ao.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:tq.Ao.has("isInDiffEditor"),menu:{when:tq.Ao.has("isInDiffEditor"),id:tU.eH.EditorTitle,order:22,group:"navigation"}})}run(e,...t){let i=e.get(tj.Ui),n=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",n)}};(0,tU.r1)(ToggleCollapseUnchangedRegions);let ToggleShowMovedCodeBlocks=class ToggleShowMovedCodeBlocks extends tU.Ke{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:(0,tz.vv)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:tq.Ao.has("isInDiffEditor")})}run(e,...t){let i=e.get(tj.Ui),n=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",n)}};(0,tU.r1)(ToggleShowMovedCodeBlocks);let ToggleUseInlineViewWhenSpaceIsLimited=class ToggleUseInlineViewWhenSpaceIsLimited extends tU.Ke{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:(0,tz.vv)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:tq.Ao.has("isInDiffEditor")})}run(e,...t){let i=e.get(tj.Ui),n=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",n)}};(0,tU.r1)(ToggleUseInlineViewWhenSpaceIsLimited),tU.BH.appendMenuItem(tU.eH.EditorTitle,{command:{id:new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,title:(0,tz.NC)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:tq.Ao.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:tq.Ao.has("isInDiffEditor")},order:11,group:"1_diff",when:tq.Ao.and(tH.u.diffEditorRenderSideBySideInlineBreakpointReached,tq.Ao.has("isInDiffEditor"))}),tU.BH.appendMenuItem(tU.eH.EditorTitle,{command:{id:new ToggleShowMovedCodeBlocks().desc.id,title:(0,tz.NC)("showMoves","Show Moved Code Blocks"),icon:tF.l.move,toggled:tq.cP.create("config.diffEditor.experimental.showMoves",!0),precondition:tq.Ao.has("isInDiffEditor")},order:10,group:"1_diff",when:tq.Ao.has("isInDiffEditor")});let t$=(0,tz.vv)("diffEditor","Diff Editor");let SwitchSide=class SwitchSide extends tB.x1{constructor(){super({id:"diffEditor.switchSide",title:(0,tz.vv)("switchSide","Switch Side"),icon:tF.l.arrowSwap,precondition:tq.Ao.has("isInDiffEditor"),f1:!0,category:t$})}runEditorCommand(e,t,i){let n=findFocusedDiffEditor(e);if(n instanceof tV.p){if(i&&i.dryRun)return{destinationSelection:n.mapToOtherSide().destinationSelection};n.switchSide()}}};(0,tU.r1)(SwitchSide);let ExitCompareMove=class ExitCompareMove extends tB.x1{constructor(){super({id:"diffEditor.exitCompareMove",title:(0,tz.vv)("exitCompareMove","Exit Compare Move"),icon:tF.l.close,precondition:tH.u.comparingMovedCode,f1:!1,category:t$,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){let n=findFocusedDiffEditor(e);n instanceof tV.p&&n.exitCompareMove()}};(0,tU.r1)(ExitCompareMove);let CollapseAllUnchangedRegions=class CollapseAllUnchangedRegions extends tB.x1{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:(0,tz.vv)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:tF.l.fold,precondition:tq.Ao.has("isInDiffEditor"),f1:!0,category:t$})}runEditorCommand(e,t,...i){let n=findFocusedDiffEditor(e);n instanceof tV.p&&n.collapseAllUnchangedRegions()}};(0,tU.r1)(CollapseAllUnchangedRegions);let ShowAllUnchangedRegions=class ShowAllUnchangedRegions extends tB.x1{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:(0,tz.vv)("showAllUnchangedRegions","Show All Unchanged Regions"),icon:tF.l.unfold,precondition:tq.Ao.has("isInDiffEditor"),f1:!0,category:t$})}runEditorCommand(e,t,...i){let n=findFocusedDiffEditor(e);n instanceof tV.p&&n.showAllUnchangedRegions()}};(0,tU.r1)(ShowAllUnchangedRegions);let tG=(0,tz.vv)("accessibleDiffViewer","Accessible Diff Viewer");let AccessibleDiffViewerNext=class AccessibleDiffViewerNext extends tU.Ke{constructor(){super({id:AccessibleDiffViewerNext.id,title:(0,tz.vv)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:tG,precondition:tq.Ao.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){let t=findFocusedDiffEditor(e);null==t||t.accessibleDiffViewerNext()}};AccessibleDiffViewerNext.id="editor.action.accessibleDiffViewer.next",tU.BH.appendMenuItem(tU.eH.EditorTitle,{command:{id:AccessibleDiffViewerNext.id,title:(0,tz.NC)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:tq.Ao.has("isInDiffEditor")},order:10,group:"2_diff",when:tq.Ao.and(tH.u.accessibleDiffViewerVisible.negate(),tq.Ao.has("isInDiffEditor"))});let AccessibleDiffViewerPrev=class AccessibleDiffViewerPrev extends tU.Ke{constructor(){super({id:AccessibleDiffViewerPrev.id,title:(0,tz.vv)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:tG,precondition:tq.Ao.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){let t=findFocusedDiffEditor(e);null==t||t.accessibleDiffViewerPrev()}};function findFocusedDiffEditor(e){let t=e.get(tW.$),i=t.listDiffEditors(),n=(0,tO.vY)();if(n)for(let e of i){let t=e.getContainerDomNode();if(isElementOrParentOf(t,n))return e}return null}function isElementOrParentOf(e,t){let i=t;for(;i;){if(i===e)return!0;i=i.parentElement}return!1}AccessibleDiffViewerPrev.id="editor.action.accessibleDiffViewer.prev",tK.P.registerCommandAlias("editor.action.diffReview.next",AccessibleDiffViewerNext.id),(0,tU.r1)(AccessibleDiffViewerNext),tK.P.registerCommandAlias("editor.action.diffReview.prev",AccessibleDiffViewerPrev.id),(0,tU.r1)(AccessibleDiffViewerPrev);var tQ=i(93864),tZ=i(72914),tY=i(27082);i(61904);var tJ=i(45841);let tX=new tq.uy("selectionAnchorSet",!1),t0=W=class{static get(e){return e.getContribution(W.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=tX.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){let e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(tJ.Y.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new tZ.W5().appendText((0,tz.NC)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,tQ.Z9)((0,tz.NC)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){let t=this.editor.getPosition();this.editor.setSelection(tJ.Y.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){let e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};t0.ID="editor.contrib.selectionAnchorController",t0=W=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(c=tq.i6,function(e,t){c(e,t,1)})],t0);let SetSelectionAnchor=class SetSelectionAnchor extends tB.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,tz.NC)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2080),weight:100}})}async run(e,t){var i;null===(i=t0.get(t))||void 0===i||i.setSelectionAnchor()}};let GoToSelectionAnchor=class GoToSelectionAnchor extends tB.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,tz.NC)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:tX})}async run(e,t){var i;null===(i=t0.get(t))||void 0===i||i.goToSelectionAnchor()}};let SelectFromAnchorToCursor=class SelectFromAnchorToCursor extends tB.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,tz.NC)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:tX,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2089),weight:100}})}async run(e,t){var i;null===(i=t0.get(t))||void 0===i||i.selectFromAnchorToCursor()}};let CancelSelectionAnchor=class CancelSelectionAnchor extends tB.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,tz.NC)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:tX,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;null===(i=t0.get(t))||void 0===i||i.cancelSelectionAnchor()}};(0,tB._K)(t0.ID,t0,4),(0,tB.Qr)(SetSelectionAnchor),(0,tB.Qr)(GoToSelectionAnchor),(0,tB.Qr)(SelectFromAnchorToCursor),(0,tB.Qr)(CancelSelectionAnchor);var t1=i(66614),t2=i(87932);i(53507);var t5=i(11953),t4=i(30822),t3=i(86809),t6=i(26792),t7=i(45815),t9=i(93672);let t8=(0,t7.P6G)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},tz.NC("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));let JumpToBracketAction=class JumpToBracketAction extends tB.R6{constructor(){super({id:"editor.action.jumpToBracket",label:tz.NC("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;null===(i=BracketMatchingController.get(t))||void 0===i||i.jumpToBracket()}};let SelectToBracketAction=class SelectToBracketAction extends tB.R6{constructor(){super({id:"editor.action.selectToBracket",label:tz.NC("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:tz.vv("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var n;let o=!0;i&&!1===i.selectBrackets&&(o=!1),null===(n=BracketMatchingController.get(t))||void 0===n||n.selectToBracket(o)}};let RemoveBracketsAction=class RemoveBracketsAction extends tB.R6{constructor(){super({id:"editor.action.removeBrackets",label:tz.NC("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;null===(i=BracketMatchingController.get(t))||void 0===i||i.removeBrackets(this.id)}};let BracketsData=class BracketsData{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}};let BracketMatchingController=class BracketMatchingController extends t2.JT{static get(e){return e.getContribution(BracketMatchingController.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new t1.pY(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(e=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(e=>{e.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getSelections().map(t=>{let i=t.getStartPosition(),n=e.bracketPairs.matchBracket(i),o=null;if(n)n[0].containsPosition(i)&&!n[1].containsPosition(i)?o=n[1].getStartPosition():n[1].containsPosition(i)&&(o=n[0].getStartPosition());else{let t=e.bracketPairs.findEnclosingBrackets(i);if(t)o=t[1].getStartPosition();else{let t=e.bracketPairs.findNextBracket(i);t&&t.range&&(o=t.range.getStartPosition())}}return o?new tJ.Y(o.lineNumber,o.column,o.lineNumber,o.column):new tJ.Y(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(n=>{let o=n.getStartPosition(),r=t.bracketPairs.matchBracket(o);if(!r&&!(r=t.bracketPairs.findEnclosingBrackets(o))){let e=t.bracketPairs.findNextBracket(o);e&&e.range&&(r=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let s=null,l=null;if(r){r.sort(t4.e.compareRangesUsingStarts);let[t,i]=r;if(s=e?t.getStartPosition():t.getEndPosition(),l=e?i.getEndPosition():i.getStartPosition(),i.containsPosition(o)){let e=s;s=l,l=e}}s&&l&&i.push(new tJ.Y(s.lineNumber,s.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;let t=this._editor.getModel();this._editor.getSelections().forEach(i=>{let n=i.getPosition(),o=t.bracketPairs.matchBracket(n);o||(o=t.bracketPairs.findEnclosingBrackets(n)),o&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:o[0],text:""},{range:o[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();let e=[],t=0;for(let i of this._lastBracketsData){let n=i.brackets;n&&(e[t++]={range:n[0],options:i.options},e[t++]={range:n[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}let e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}let t=this._editor.getModel(),i=t.getVersionId(),n=[];this._lastVersionId===i&&(n=this._lastBracketsData);let o=[],r=0;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.isEmpty()&&(o[r++]=i.getStartPosition())}o.length>1&&o.sort(t5.L.compare);let s=[],l=0,d=0,c=n.length;for(let e=0,i=o.length;e<i;e++){let i=o[e];for(;d<c&&n[d].position.isBefore(i);)d++;if(d<c&&n[d].position.equals(i))s[l++]=n[d];else{let e=t.bracketPairs.matchBracket(i,20),n=BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;e||"always"!==this._matchBrackets||(e=t.bracketPairs.findEnclosingBrackets(i,20),n=BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),s[l++]=new BracketsData(i,e,n)}}this._lastBracketsData=s,this._lastVersionId=i}};BracketMatchingController.ID="editor.contrib.bracketMatchingController",BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=t6.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,t9.EN)(t8),position:t3.sh.Center}}),BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=t6.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,tB._K)(BracketMatchingController.ID,BracketMatchingController,1),(0,tB.Qr)(SelectToBracketAction),(0,tB.Qr)(JumpToBracketAction),(0,tB.Qr)(RemoveBracketsAction),tU.BH.appendMenuItem(tU.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:tz.NC({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});let MoveCaretCommand=class MoveCaretCommand{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;let i=this._selection.startLineNumber,n=this._selection.startColumn,o=this._selection.endColumn;if((!this._isMovingLeft||1!==n)&&(this._isMovingLeft||o!==e.getLineMaxColumn(i))){if(this._isMovingLeft){let r=new t4.e(i,n-1,i,n),s=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new t4.e(i,o,i,o),s)}else{let r=new t4.e(i,o,i,o+1),s=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new t4.e(i,n,i,n),s)}}}computeCursorState(e,t){return this._isMovingLeft?new tJ.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new tJ.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}};let MoveCaretAction=class MoveCaretAction extends tB.R6{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let i=[],n=t.getSelections();for(let e of n)i.push(new MoveCaretCommand(e,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}};let MoveCaretLeftAction=class MoveCaretLeftAction extends MoveCaretAction{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:tz.NC("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:tH.u.writable})}};let MoveCaretRightAction=class MoveCaretRightAction extends MoveCaretAction{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:tz.NC("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:tH.u.writable})}};(0,tB.Qr)(MoveCaretLeftAction),(0,tB.Qr)(MoveCaretRightAction);var ie=i(71708),it=i(42040);let TransposeLettersAction=class TransposeLettersAction extends tB.R6{constructor(){super({id:"editor.action.transposeLetters",label:tz.NC("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let i=t.getModel(),n=[],o=t.getSelections();for(let e of o){if(!e.isEmpty())continue;let t=e.startLineNumber,o=e.startColumn,r=i.getLineMaxColumn(t);if(1===t&&(1===o||2===o&&2===r))continue;let s=o===r?e.getPosition():it.o.rightPosition(i,e.getPosition().lineNumber,e.getPosition().column),l=it.o.leftPosition(i,s),d=it.o.leftPosition(i,l),c=i.getValueInRange(t4.e.fromPositions(d,l)),u=i.getValueInRange(t4.e.fromPositions(l,s)),g=t4.e.fromPositions(d,s);n.push(new ie.T4(g,u+c))}n.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop())}};(0,tB.Qr)(TransposeLettersAction);var ii=i(1215),io=i(88059),ir=i(60309),ia=i(34794),il=i(50885);let ih=function(){let e;if("object"==typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID.bind(crypto);e="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};let t=new Uint8Array(16),i=[];for(let e=0;e<256;e++)i.push(e.toString(16).padStart(2,"0"));return function(){e(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;let n=0;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}}();function createStringDataTransferItem(e){return{asString:async()=>e,asFile:()=>void 0,value:"string"==typeof e?e:void 0}}function createFileDataTransferItem(e,t,i){let n={id:ih(),name:e,uri:t,data:i};return{asString:async()=>"",asFile:()=>n,value:void 0}}let VSDataTransfer=class VSDataTransfer{constructor(){this._entries=new Map}get size(){let e=0;for(let t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){let t=[...this._entries.keys()];return il.$.some(this,([e,t])=>t.asFile())&&t.push("files"),matchesMimeType_normalized(normalizeMimeType(e),t)}get(e){var t;return null===(t=this._entries.get(this.toKey(e)))||void 0===t?void 0:t[0]}append(e,t){let i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(let[e,t]of this._entries)for(let i of t)yield[e,i]}toKey(e){return normalizeMimeType(e)}};function normalizeMimeType(e){return e.toLowerCase()}function matchesMimeType(e,t){return matchesMimeType_normalized(normalizeMimeType(e),t.map(normalizeMimeType))}function matchesMimeType_normalized(e,t){if("*/*"===e)return t.length>0;if(t.includes(e))return!0;let i=e.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!i)return!1;let[n,o,r]=i;return"*"===r&&t.some(e=>e.startsWith(o+"/"))}let ic=Object.freeze({create:e=>(0,ia.EB)(e.map(e=>e.toString())).join("\r\n"),split:e=>e.split("\r\n"),parse:e=>ic.split(e).filter(e=>!e.startsWith("#"))});var iu=i(23171),ig=i(41256),ip=i(31568),im=i(76924);let i_={EDITORS:"CodeEditors",FILES:"CodeFiles"};let DragAndDropContributionRegistry=class DragAndDropContributionRegistry{};im.B.add("workbench.contributions.dragAndDrop",new DragAndDropContributionRegistry);let LocalSelectionTransfer=class LocalSelectionTransfer{constructor(){}static getInstance(){return LocalSelectionTransfer.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};function toVSDataTransfer(e){let t=new VSDataTransfer;for(let i of e.items){let e=i.type;if("string"===i.kind){let n=new Promise(e=>i.getAsString(e));t.append(e,createStringDataTransferItem(n))}else if("file"===i.kind){let n=i.getAsFile();n&&t.append(e,createFileDataTransferItemFromFile(n))}}return t}function createFileDataTransferItemFromFile(e){let t=e.path?ip.o.parse(e.path):void 0;return createFileDataTransferItem(e.name,t,async()=>new Uint8Array(await e.arrayBuffer()))}LocalSelectionTransfer.INSTANCE=new LocalSelectionTransfer;let iv=Object.freeze([i_.EDITORS,i_.FILES,ig.g.RESOURCES,ig.g.INTERNAL_URI_LIST]);function toExternalVSDataTransfer(e,t=!1){let i=toVSDataTransfer(e),n=i.get(ig.g.INTERNAL_URI_LIST);if(n)i.replace(iu.v.uriList,n);else if(t||!i.has(iu.v.uriList)){let t=[];for(let i of e.items){let e=i.getAsFile();if(e){let i=e.path;try{i?t.push(ip.o.file(i).toString()):t.push(ip.o.parse(e.name,!0).toString())}catch(e){}}}t.length&&i.replace(iu.v.uriList,createStringDataTransferItem(ic.create(t)))}for(let e of iv)i.delete(e);return i}var iC=i(65496),ib=i(67379);let Scanner=class Scanner{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){let e;if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let t=this.pos,i=0,n=this.value.charCodeAt(t);if("number"==typeof(e=Scanner._table[n]))return this.pos+=1,{type:e,pos:t,len:1};if(Scanner.isDigitCharacter(n)){e=8;do i+=1,n=this.value.charCodeAt(t+i);while(Scanner.isDigitCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}if(Scanner.isVariableCharacter(n)){e=9;do n=this.value.charCodeAt(t+ ++i);while(Scanner.isVariableCharacter(n)||Scanner.isDigitCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}e=10;do i+=1,n=this.value.charCodeAt(t+i);while(!isNaN(n)&&void 0===Scanner._table[n]&&!Scanner.isDigitCharacter(n)&&!Scanner.isVariableCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}};Scanner._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};let Marker=class Marker{constructor(){this._children=[]}appendChild(e){return e instanceof Text&&this._children[this._children.length-1]instanceof Text?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.slice(0);o.splice(n,1,...t),i._children=o,function _fixParent(e,t){for(let i of e)i.parent=t,_fixParent(i.children,i)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof TextmateSnippet)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}};let Text=class Text extends Marker{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Text(this.value)}};let TransformableMarker=class TransformableMarker extends Marker{};let Placeholder=class Placeholder extends TransformableMarker{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return 0===this.index}get choice(){return 1===this._children.length&&this._children[0]instanceof Choice?this._children[0]:void 0}clone(){let e=new Placeholder(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(e=>e.clone()),e}};let Choice=class Choice extends Marker{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Text&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Choice;return this.options.forEach(e.appendChild,e),e}};let Transform=class Transform extends Marker{constructor(){super(...arguments),this.regexp=RegExp("")}resolve(e){let t=this,i=!1,n=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(e=>e instanceof FormatString&&!!e.elseValue)&&(n=this._replace([])),n}_replace(e){let t="";for(let i of this._children)if(i instanceof FormatString){let n=e[i.index]||"";t+=n=i.resolve(n)}else t+=i.toString();return t}toString(){return""}clone(){let e=new Transform;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(e=>e.clone()),e}};let FormatString=class FormatString extends Marker{constructor(e,t,i,n){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}resolve(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""}_toPascalCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map(e=>e.charAt(0).toUpperCase()+e.substr(1)).join(""):e}_toCamelCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map((e,t)=>0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)).join(""):e}clone(){let e=new FormatString(this.index,this.shorthandName,this.ifValue,this.elseValue);return e}};let Variable=class Variable extends TransformableMarker{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Text(t)],!0)}clone(){let e=new Variable(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(e=>e.clone()),e}};function walk(e,t){let i=[...e];for(;i.length>0;){let e=i.shift(),n=t(e);if(!n)break;i.unshift(...e.children)}}let TextmateSnippet=class TextmateSnippet extends Marker{get placeholderInfo(){if(!this._placeholders){let e;let t=[];this.walk(function(i){return i instanceof Placeholder&&(t.push(i),e=!e||e.index<i.index?i:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return(this.walk(n=>n===e?(i=!0,!1):(t+=n.len(),!0)),i)?t:-1}fullLen(e){let t=0;return walk([e],e=>(t+=e.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:i}=e;for(;i;)i instanceof Placeholder&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Variable&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new TextmateSnippet;return this._children=this.children.map(e=>e.clone()),e}walk(e){walk(this.children,e)}};let SnippetParser=class SnippetParser{constructor(){this._scanner=new Scanner,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){let n=new TextmateSnippet;return this.parseFragment(e,n),this.ensureFinalTabstop(n,null!=i&&i,null!=t&&t),n}parseFragment(e,t){let i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););let n=new Map,o=[];t.walk(e=>(e instanceof Placeholder&&(e.isFinalTabstop?n.set(0,void 0):!n.has(e.index)&&e.children.length>0?n.set(e.index,e.children):o.push(e)),!0));let fillInIncompletePlaceholder=(e,i)=>{let o=n.get(e.index);if(!o)return;let r=new Placeholder(e.index);for(let t of(r.transform=e.transform,o)){let e=t.clone();r.appendChild(e),e instanceof Placeholder&&n.has(e.index)&&!i.has(e.index)&&(i.add(e.index),fillInIncompletePlaceholder(e,i),i.delete(e.index))}t.replace(e,[r])},r=new Set;for(let e of o)fillInIncompletePlaceholder(e,r);return t.children.slice(i)}ensureFinalTabstop(e,t,i){if(t||i&&e.placeholders.length>0){let t=e.placeholders.find(e=>0===e.index);t||e.appendChild(new Placeholder(0))}}_accept(e,t){if(void 0===e||this._token.type===e){let e=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),e}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let t=this._token;for(;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){let e=this._scanner.next();if(0!==e.type&&4!==e.type&&5!==e.type)return!1}this._token=this._scanner.next()}let i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Text(t)),!0)}_parseTabstopOrVariableName(e){let t;let i=this._token,n=this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0));return n?(e.appendChild(/^\d+$/.test(t)?new Placeholder(Number(t)):new Variable(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;let i=this._token,n=this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0));if(!n)return this._backTo(i);let o=new Placeholder(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Text("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let t=new Choice;for(;;){if(this._parseChoiceElement(t)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(t),this._accept(4)))return e.appendChild(o),!0}return this._backTo(i),!1}}else if(this._accept(6))return this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1);else if(this._accept(4))return e.appendChild(o),!0;else return this._backTo(i)}_parseChoiceElement(e){let t=this._token,i=[];for(;;){let e;if(2===this._token.type||7===this._token.type)break;if(!(e=(e=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||e:this._accept(void 0,!0)))return this._backTo(t),!1;i.push(e)}return 0===i.length?(this._backTo(t),!1):(e.appendChild(new Text(i.join(""))),!0)}_parseComplexVariable(e){let t;let i=this._token,n=this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0));if(!n)return this._backTo(i);let o=new Variable(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Text("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1);else if(this._accept(4))return e.appendChild(o),!0;else return this._backTo(i)}_parseTransform(e){let t=new Transform,i="",n="";for(;;){let e;if(this._accept(6))break;if(e=this._accept(5,!0)){i+=e=this._accept(6,!0)||e;continue}if(14!==this._token.type){i+=this._accept(void 0,!0);continue}return!1}for(;;){let e;if(this._accept(6))break;if(e=this._accept(5,!0)){e=this._accept(5,!0)||this._accept(6,!0)||e,t.appendChild(new Text(e));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,n)}catch(e){return!1}return e.transform=t,!0}_parseFormatString(e){let t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);let n=this._accept(8,!0);if(!n)return this._backTo(t),!1;if(!i||this._accept(4))return e.appendChild(new FormatString(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){let i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new FormatString(Number(n),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){let t=this._until(4);if(t)return e.appendChild(new FormatString(Number(n),void 0,t,void 0)),!0}else if(this._accept(12)){let t=this._until(4);if(t)return e.appendChild(new FormatString(Number(n),void 0,void 0,t)),!0}else if(this._accept(13)){let t=this._until(1);if(t){let i=this._until(4);if(i)return e.appendChild(new FormatString(Number(n),void 0,t,i)),!0}}else{let t=this._until(4);if(t)return e.appendChild(new FormatString(Number(n),void 0,void 0,t)),!0}return this._backTo(t),!1}_parseAnything(e){return 14!==this._token.type&&(e.appendChild(new Text(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}};function createCombinedWorkspaceEdit(e,t,i){var n,o,r,s;return("string"==typeof i.insertText?""===i.insertText:""===i.insertText.snippet)?{edits:null!==(o=null===(n=i.additionalEdit)||void 0===n?void 0:n.edits)&&void 0!==o?o:[]}:{edits:[...t.map(t=>new iC.Gl(e,{range:t,text:"string"==typeof i.insertText?SnippetParser.escape(i.insertText)+"$0":i.insertText.snippet,insertAsSnippet:!0})),...null!==(s=null===(r=i.additionalEdit)||void 0===r?void 0:r.edits)&&void 0!==s?s:[]]}}function sortEditsByYieldTo(e){var t;function yieldsTo(e,t){return"providerId"in e&&e.providerId===t.providerId||"mimeType"in e&&e.mimeType===t.handledMimeType}let i=new Map;for(let n of e)for(let o of null!==(t=n.yieldTo)&&void 0!==t?t:[])for(let t of e)if(t!==n&&yieldsTo(o,t)){let e=i.get(n);e||(e=[],i.set(n,e)),e.push(t)}if(!i.size)return Array.from(e);let n=new Set,o=[];function visit(e){if(!e.length)return[];let t=e[0];if(o.includes(t))return console.warn(`Yield to cycle detected for ${t.providerId}`),e;if(n.has(t))return visit(e.slice(1));let r=[],s=i.get(t);return s&&(o.push(t),r=visit(s),o.pop()),n.add(t),[...r,t,...visit(e.slice(1))]}return visit(Array.from(e))}var iS=i(20101),iy=i(45837),iw=i(98847);i(74356);var iL=i(27989);let ik=t6.qx.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:iy.B4,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});let InlineProgressWidget=class InlineProgressWidget extends t2.JT{constructor(e,t,i,n,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=tO.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;let t=tO.$("span.icon");this.domNode.append(t),t.classList.add(...iw.k.asClassNameArray(tF.l.loading),"codicon-modifier-spin");let updateSize=()=>{let e=this.editor.getOption(67);this.domNode.style.height=`${e}px`,this.domNode.style.width=`${Math.ceil(.8*e)}px`};updateSize(),this._register(this.editor.onDidChangeConfiguration(e=>{(e.hasChanged(52)||e.hasChanged(67))&&updateSize()})),this._register(tO.nm(this.domNode,tO.tw.CLICK,e=>{this.delegate.cancel()}))}getId(){return InlineProgressWidget.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};InlineProgressWidget.baseId="editor.widget.inlineProgressWidget";let iD=class extends t2.JT{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new t2.XK),this._currentWidget=new t2.XK,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}async showWhile(e,t,i){let n=this._operationIdPool++;this._currentOperation=n,this.clear(),this._showPromise.value=(0,t1.Vg)(()=>{let n=t4.e.fromPositions(e),o=this._currentDecorations.set([{range:n,options:ik}]);o.length>0&&(this._currentWidget.value=this._instantiationService.createInstance(InlineProgressWidget,this.id,this._editor,n,t,i))},this._showDelay);try{return await i}finally{this._currentOperation===n&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};iD=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(u=iL.TG,function(e,t){u(e,t,2)})],iD);var ix=i(19695),iN=i(26248),iE=i(4175),iI=i(49216),iT=i(9252),iM=i(57605);i(17477);var iR=i(64252),iA=i(18333),postEditWidget_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},postEditWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let iP=V=class extends t2.JT{constructor(e,t,i,n,o,r,s,l,d,c){super(),this.typeId=e,this.editor=t,this.showCommand=n,this.range=o,this.edits=r,this.onSelectNewEdit=s,this._contextMenuService=l,this._keybindingService=c,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(d),this.visibleContext.set(!0),this._register((0,t2.OF)(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register((0,t2.OF)(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(e=>{o.containsPosition(e.position)||this.dispose()})),this._register(iM.ju.runAndSubscribe(c.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var e;let t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?` (${t})`:"")}create(){this.domNode=tO.$(".post-edit-widget"),this.button=this._register(new iI.z(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(tO.nm(this.domNode,tO.tw.CLICK,()=>this.showSelector()))}getId(){return V.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{let e=tO.i(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>(0,iT.xw)({id:"",label:e.label,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}};iP.baseId="editor.widget.postEditWidget",iP=V=postEditWidget_decorate([postEditWidget_param(7,iR.i),postEditWidget_param(8,tq.i6),postEditWidget_param(9,iA.d)],iP);let iO=class extends t2.JT{constructor(e,t,i,n,o,r){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=n,this._instantiationService=o,this._bulkEditService=r,this._currentWidget=this._register(new t2.XK),this._register(iM.ju.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,n){let o,r;let s=this._editor.getModel();if(!s||!e.length)return;let l=t.allEdits[t.activeEditIndex];if(!l)return;let d=createCombinedWorkspaceEdit(s.uri,e,l),c=e[0],u=s.deltaDecorations([],[{range:c,options:{description:"paste-line-suffix",stickiness:0}}]);try{o=await this._bulkEditService.apply(d,{editor:this._editor,token:n}),r=s.getDecorationRange(u[0])}finally{s.deltaDecorations(u,[])}i&&o.isApplied&&t.allEdits.length>1&&this.show(null!=r?r:c,t,async o=>{let r=this._editor.getModel();r&&(await r.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:o,allEdits:t.allEdits},i,n))})}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(iP,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}};iO=postEditWidget_decorate([postEditWidget_param(4,iL.TG),postEditWidget_param(5,iC.vu)],iO);var iF=i(7519);i(58723);var iB=i(7927),iW=i(60048),messageController_param=function(e,t){return function(i,n){t(i,n,e)}};let iV=H=class{static get(e){return e.getContribution(H.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new t2.XK,this._messageListeners=new t2.SL,this._mouseOverMessage=!1,this._editor=e,this._visible=H.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;null===(e=this._message)||void 0===e||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,tQ.Z9)((0,tZ.Fr)(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=(0,tZ.Fr)(e)?(0,iF.ap)(e,{actionHandler:{callback:t=>{this.closeMessage(),(0,iB.N)(this._openerService,t,(0,tZ.Fr)(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new MessageWidget(this._editor,t,"string"==typeof e?e:this._message.element),this._messageListeners.add(iM.ju.debounce(this._editor.onDidBlurEditorText,(e,t)=>t,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&tO.jg(tO.vY(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(tO.nm(this._messageWidget.value.getDomNode(),tO.tw.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(tO.nm(this._messageWidget.value.getDomNode(),tO.tw.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0)),this._messageListeners.add(this._editor.onMouseMove(e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new t4.e(t.lineNumber-3,1,e.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value))}};iV.ID="editor.contrib.messageController",iV.MESSAGE_VISIBLE=new tq.uy("messageVisible",!1,tz.NC("messageVisible","Whether the editor is currently showing an inline message")),iV=H=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([messageController_param(1,tq.i6),messageController_param(2,iW.v)],iV);let iH=tB._l.bindToContribution(iV.get);(0,tB.fK)(new iH({id:"leaveEditorMessage",precondition:iV.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));let MessageWidget=class MessageWidget{static fadeOut(e){let dispose=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",dispose)},t=setTimeout(dispose,110);return e.getDomNode().addEventListener("animationend",dispose),e.getDomNode().classList.add("fadeOut"),{dispose}}constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";let o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);let r=document.createElement("div");"string"==typeof n?(r.classList.add("message"),r.textContent=n):(n.classList.add("message"),r.appendChild(n)),this._domNode.appendChild(r);let s=document.createElement("div");s.classList.add("anchor","below"),this._domNode.appendChild(s),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}};(0,tB._K)(iV.ID,iV,4);var copyPasteController_param=function(e,t){return function(i,n){t(i,n,e)}};let iz="editor.changePasteType",iU=new tq.uy("pasteWidgetVisible",!1,(0,tz.NC)("pasteWidgetVisible","Whether the paste widget is showing")),iK="application/vnd.code.copyMetadata",ij=z=class extends t2.JT{static get(e){return e.getContribution(z.ID)}constructor(e,t,i,n,o,r,s){super(),this._bulkEditService=i,this._clipboardService=n,this._languageFeaturesService=o,this._quickInputService=r,this._progressService=s,this._editor=e;let l=e.getContainerDomNode();this._register((0,tO.nm)(l,"copy",e=>this.handleCopy(e))),this._register((0,tO.nm)(l,"cut",e=>this.handleCopy(e))),this._register((0,tO.nm)(l,"paste",e=>this.handlePaste(e),!0)),this._pasteProgressManager=this._register(new iD("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(iO,"pasteIntoEditor",e,iU,{id:iz,label:(0,tz.NC)("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},(0,tO.uP)().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var t,i;if(!this._editor.hasTextFocus()||(io.$L&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled()))return;let n=this._editor.getModel(),o=this._editor.getSelections();if(!n||!(null==o?void 0:o.length))return;let r=this._editor.getOption(37),s=o,l=1===o.length&&o[0].isEmpty();if(l){if(!r)return;s=[new t4.e(s[0].startLineNumber,1,s[0].startLineNumber,1+n.getLineLength(s[0].startLineNumber))]}let d=null===(t=this._editor._getViewModel())||void 0===t?void 0:t.getPlainTextToCopy(o,r,io.ED),c=Array.isArray(d)?d:null,u={multicursorText:c,pasteOnNewLine:l,mode:null},g=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter(e=>!!e.prepareDocumentPaste);if(!g.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:u});return}let m=toVSDataTransfer(e.clipboardData),f=g.flatMap(e=>{var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]}),_=ih();this.setCopyMetadata(e.clipboardData,{id:_,providerCopyMimeTypes:f,defaultPastePayload:u});let v=(0,t1.PG)(async e=>{let t=(0,ia.kX)(await Promise.all(g.map(async t=>{try{return await t.prepareDocumentPaste(n,s,m,e)}catch(e){console.error(e);return}})));for(let e of(t.reverse(),t))for(let[t,i]of e)m.replace(t,i);return m});null===(i=this._currentCopyOperation)||void 0===i||i.dataTransferPromise.cancel(),this._currentCopyOperation={handle:_,dataTransferPromise:v}}async handlePaste(e){var t,i,n,o,r;if(!e.clipboardData||!this._editor.hasTextFocus())return;null===(t=iV.get(this._editor))||void 0===t||t.closeMessage(),null===(i=this._currentPasteOperation)||void 0===i||i.cancel(),this._currentPasteOperation=void 0;let s=this._editor.getModel(),l=this._editor.getSelections();if(!(null==l?void 0:l.length)||!s||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;let d=this.fetchCopyMetadata(e),c=toExternalVSDataTransfer(e.clipboardData);c.delete(iK);let u=[...e.clipboardData.types,...null!==(n=null==d?void 0:d.providerCopyMimeTypes)&&void 0!==n?n:[],iu.v.uriList],g=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter(e=>{var t,i;return(null===(t=this._pasteAsActionContext)||void 0===t||!t.preferredId||this._pasteAsActionContext.preferredId===e.id)&&(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some(e=>matchesMimeType(e,u)))});if(!g.length){(null===(o=this._pasteAsActionContext)||void 0===o?void 0:o.preferredId)&&this.showPasteAsNoEditMessage(l,null===(r=this._pasteAsActionContext)||void 0===r?void 0:r.preferredId);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,g,l,c,d,{trigger:"explicit",only:this._pasteAsActionContext.preferredId}):this.doPasteInline(g,l,c,d,{trigger:"implicit"})}showPasteAsNoEditMessage(e,t){var i;null===(i=iV.get(this._editor))||void 0===i||i.showMessage((0,tz.NC)("pasteAsError","No paste edits for '{0}' found",t),e[0].getStartPosition())}doPasteInline(e,t,i,n,o){let r=(0,t1.PG)(async s=>{let l=this._editor;if(!l.hasModel())return;let d=l.getModel(),c=new iS.Dl(l,3,void 0,s);try{if(await this.mergeInDataFromCopy(i,n,c.token),c.token.isCancellationRequested)return;let r=e.filter(e=>isSupportedPasteProvider(e,i));if(!r.length||1===r.length&&"text"===r[0].id){await this.applyDefaultPasteHandler(i,n,c.token);return}let s=await this.getPasteEdits(r,i,d,t,o,c.token);if(c.token.isCancellationRequested)return;if(1===s.length&&"text"===s[0].providerId){await this.applyDefaultPasteHandler(i,n,c.token);return}if(s.length){let e="afterPaste"===l.getOption(85).showPasteSelector;return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:s},e,c.token)}await this.applyDefaultPasteHandler(i,n,c.token)}finally{c.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,tz.NC)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),r),this._currentPasteOperation=r}showPasteAsPick(e,t,i,n,o,r){let s=(0,t1.PG)(async l=>{let d=this._editor;if(!d.hasModel())return;let c=d.getModel(),u=new iS.Dl(d,3,void 0,l);try{let s;if(await this.mergeInDataFromCopy(n,o,u.token),u.token.isCancellationRequested)return;let l=t.filter(e=>isSupportedPasteProvider(e,n));e&&(l=l.filter(t=>t.id===e));let d=await this.getPasteEdits(l,n,c,i,r,u.token);if(u.token.isCancellationRequested)return;if(!d.length){r.only&&this.showPasteAsNoEditMessage(i,r.only);return}if(e)s=d.at(0);else{let e=await this._quickInputService.pick(d.map(e=>({label:e.label,description:e.providerId,detail:e.detail,edit:e})),{placeHolder:(0,tz.NC)("pasteAsPickerPlaceholder","Select Paste Action")});s=null==e?void 0:e.edit}if(!s)return;let g=createCombinedWorkspaceEdit(c.uri,i,s);await this._bulkEditService.apply(g,{editor:this._editor})}finally{u.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:(0,tz.NC)("pasteAsProgress","Running paste handlers")},()=>s)}setCopyMetadata(e,t){e.setData(iK,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;let i=e.clipboardData.getData(iK);if(i)try{return JSON.parse(i)}catch(e){return}let[n,o]=ir.b6.getTextData(e.clipboardData);if(o)return{defaultPastePayload:{mode:o.mode,multicursorText:null!==(t=o.multicursorText)&&void 0!==t?t:null,pasteOnNewLine:!!o.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var n;if((null==t?void 0:t.id)&&(null===(n=this._currentCopyOperation)||void 0===n?void 0:n.handle)===t.id){let t=await this._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(let[i,n]of t)e.replace(i,n)}if(!e.has(iu.v.uriList)){let t=await this._clipboardService.readResources();if(i.isCancellationRequested)return;t.length&&e.append(iu.v.uriList,createStringDataTransferItem(ic.create(t)))}}async getPasteEdits(e,t,i,n,o,r){let s=await (0,t1.eP)(Promise.all(e.map(async e=>{var s;try{let l=await (null===(s=e.provideDocumentPasteEdits)||void 0===s?void 0:s.call(e,i,n,t,o,r));if(l)return{...l,providerId:e.id}}catch(e){console.error(e)}})),r),l=(0,ia.kX)(null!=s?s:[]);return sortEditsByYieldTo(l)}async applyDefaultPasteHandler(e,t,i){var n,o,r;let s=null!==(n=e.get(iu.v.text))&&void 0!==n?n:e.get("text");if(!s)return;let l=await s.asString();if(i.isCancellationRequested)return;let d={text:l,pasteOnNewLine:null!==(o=null==t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==o&&o,multicursorText:null!==(r=null==t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==r?r:null,mode:null};this._editor.trigger("keyboard","paste",d)}};function isSupportedPasteProvider(e,t){var i;return!!(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some(e=>t.matches(e)))}ij.ID="editor.contrib.copyPasteActionController",ij=z=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([copyPasteController_param(1,iL.TG),copyPasteController_param(2,iC.vu),copyPasteController_param(3,ix.p),copyPasteController_param(4,ib.p),copyPasteController_param(5,iE.eJ),copyPasteController_param(6,iN.R9)],ij);let iq="9_cutcopypaste",i$=io.tY||document.queryCommandSupported("cut"),iG=io.tY||document.queryCommandSupported("copy"),iQ=void 0!==navigator.clipboard&&!ii.vU||document.queryCommandSupported("paste");function registerCommand(e){return e.register(),e}let iZ=i$?registerCommand(new tB.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:io.tY?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:tU.eH.MenubarEditMenu,group:"2_ccp",title:tz.NC({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:tU.eH.EditorContext,group:iq,title:tz.NC("actions.clipboard.cutLabel","Cut"),when:tH.u.writable,order:1},{menuId:tU.eH.CommandPalette,group:"",title:tz.NC("actions.clipboard.cutLabel","Cut"),order:1},{menuId:tU.eH.SimpleEditorContext,group:iq,title:tz.NC("actions.clipboard.cutLabel","Cut"),when:tH.u.writable,order:1}]})):void 0,iY=iG?registerCommand(new tB.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:io.tY?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:tU.eH.MenubarEditMenu,group:"2_ccp",title:tz.NC({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:tU.eH.EditorContext,group:iq,title:tz.NC("actions.clipboard.copyLabel","Copy"),order:2},{menuId:tU.eH.CommandPalette,group:"",title:tz.NC("actions.clipboard.copyLabel","Copy"),order:1},{menuId:tU.eH.SimpleEditorContext,group:iq,title:tz.NC("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;tU.BH.appendMenuItem(tU.eH.MenubarEditMenu,{submenu:tU.eH.MenubarCopy,title:tz.vv("copy as","Copy As"),group:"2_ccp",order:3}),tU.BH.appendMenuItem(tU.eH.EditorContext,{submenu:tU.eH.EditorContextCopy,title:tz.vv("copy as","Copy As"),group:iq,order:3}),tU.BH.appendMenuItem(tU.eH.EditorContext,{submenu:tU.eH.EditorContextShare,title:tz.vv("share","Share"),group:"11_share",order:-1,when:tq.Ao.and(tq.Ao.notEquals("resourceScheme","output"),tH.u.editorTextFocus)}),tU.BH.appendMenuItem(tU.eH.EditorTitleContext,{submenu:tU.eH.EditorTitleContextShare,title:tz.vv("share","Share"),group:"11_share",order:-1}),tU.BH.appendMenuItem(tU.eH.ExplorerContext,{submenu:tU.eH.ExplorerContextShare,title:tz.vv("share","Share"),group:"11_share",order:-1});let iJ=iQ?registerCommand(new tB.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:io.tY?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:tU.eH.MenubarEditMenu,group:"2_ccp",title:tz.NC({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:tU.eH.EditorContext,group:iq,title:tz.NC("actions.clipboard.pasteLabel","Paste"),when:tH.u.writable,order:4},{menuId:tU.eH.CommandPalette,group:"",title:tz.NC("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:tU.eH.SimpleEditorContext,group:iq,title:tz.NC("actions.clipboard.pasteLabel","Paste"),when:tH.u.writable,order:4}]})):void 0;let ExecCommandCopyWithSyntaxHighlightingAction=class ExecCommandCopyWithSyntaxHighlightingAction extends tB.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:tz.NC("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;let i=t.getOption(37);!i&&t.getSelection().isEmpty()||(ir.RA.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),ir.RA.forceCopyWithSyntaxHighlighting=!1)}};function registerExecCommandImpl(e,t){e&&(e.addImplementation(1e4,"code-editor",(e,i)=>{let n=e.get(tW.$).getFocusedCodeEditor();if(n&&n.hasTextFocus()){let e=n.getOption(37),i=n.getSelection();return!!(i&&i.isEmpty())&&!e||(n.getContainerDomNode().ownerDocument.execCommand(t),!0)}return!1}),e.addImplementation(0,"generic-dom",(e,i)=>((0,tO.uP)().execCommand(t),!0)))}registerExecCommandImpl(iZ,"cut"),registerExecCommandImpl(iY,"copy"),iJ&&(iJ.addImplementation(1e4,"code-editor",(e,t)=>{var i,n;let o=e.get(tW.$),r=e.get(ix.p),s=o.getFocusedCodeEditor();if(s&&s.hasTextFocus()){let e=s.getContainerDomNode().ownerDocument.execCommand("paste");return e?null!==(n=null===(i=ij.get(s))||void 0===i?void 0:i.finishedPaste())&&void 0!==n?n:Promise.resolve():!io.$L||(async()=>{let e=await r.readText();if(""!==e){let t=ir.Nl.INSTANCE.get(e),i=!1,n=null,o=null;t&&(i=s.getOption(37)&&!!t.isFromEmptySelection,n=void 0!==t.multicursorText?t.multicursorText:null,o=t.mode),s.trigger("keyboard","paste",{text:e,pasteOnNewLine:i,multicursorText:n,mode:o})}})()}return!1}),iJ.addImplementation(0,"generic-dom",(e,t)=>((0,tO.uP)().execCommand("paste"),!0))),iG&&(0,tB.Qr)(ExecCommandCopyWithSyntaxHighlightingAction);var iX=i(76058),i0=i(45828),i1=i(17861),i2=i(52025),i5=i(1480),i4=i(85363);let CodeActionKind=class CodeActionKind{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+CodeActionKind.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new CodeActionKind(this.value+CodeActionKind.sep+e)}};function mayIncludeActionsOfKind(e,t){return!(e.include&&!e.include.intersects(t)||e.excludes&&e.excludes.some(i=>excludesAction(t,i,e.include))||!e.includeSourceActions&&CodeActionKind.Source.contains(t))}function filtersAction(e,t){let i=t.kind?new CodeActionKind(t.kind):void 0;return!(e.include&&(!i||!e.include.contains(i))||e.excludes&&i&&e.excludes.some(t=>excludesAction(i,t,e.include))||!e.includeSourceActions&&i&&CodeActionKind.Source.contains(i))&&(!e.onlyIncludePreferredActions||!!t.isPreferred)}function excludesAction(e,t,i){return!(!t.contains(e)||i&&t.contains(i))}CodeActionKind.sep=".",CodeActionKind.None=new CodeActionKind("@@none@@"),CodeActionKind.Empty=new CodeActionKind(""),CodeActionKind.QuickFix=new CodeActionKind("quickfix"),CodeActionKind.Refactor=new CodeActionKind("refactor"),CodeActionKind.RefactorExtract=CodeActionKind.Refactor.append("extract"),CodeActionKind.RefactorInline=CodeActionKind.Refactor.append("inline"),CodeActionKind.RefactorMove=CodeActionKind.Refactor.append("move"),CodeActionKind.RefactorRewrite=CodeActionKind.Refactor.append("rewrite"),CodeActionKind.Notebook=new CodeActionKind("notebook"),CodeActionKind.Source=new CodeActionKind("source"),CodeActionKind.SourceOrganizeImports=CodeActionKind.Source.append("organizeImports"),CodeActionKind.SourceFixAll=CodeActionKind.Source.append("fixAll"),CodeActionKind.SurroundWith=CodeActionKind.Refactor.append("surround"),(g=U||(U={})).Refactor="refactor",g.RefactorPreview="refactor preview",g.Lightbulb="lightbulb",g.Default="other (default)",g.SourceAction="source action",g.QuickFix="quick fix action",g.FixAll="fix all",g.OrganizeImports="organize imports",g.AutoFix="auto fix",g.QuickFixHover="quick fix hover window",g.OnSave="save participants",g.ProblemsView="problems view";let CodeActionCommandArgs=class CodeActionCommandArgs{static fromUser(e,t){return e&&"object"==typeof e?new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(e,t.kind),CodeActionCommandArgs.getApplyFromUser(e,t.apply),CodeActionCommandArgs.getPreferredUser(e)):new CodeActionCommandArgs(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"==typeof e.kind?new CodeActionKind(e.kind):t}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}};let CodeActionItem=class CodeActionItem{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=await this.provider.resolveCodeAction(this.action,e)}catch(e){(0,i1.Cp)(e)}t&&(this.action.edit=t.edit)}return this}};let i3="editor.action.codeAction",i6="editor.action.quickFix",i7="editor.action.autoFix",i9="editor.action.refactor",i8="editor.action.sourceAction",ne="editor.action.organizeImports",nt="editor.action.fixAll";let ManagedCodeActionSet=class ManagedCodeActionSet extends t2.JT{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:(0,ia.Of)(e.diagnostics)?(0,ia.Of)(t.diagnostics)?ManagedCodeActionSet.codeActionsPreferredComparator(e,t):-1:(0,ia.Of)(t.diagnostics)?1:ManagedCodeActionSet.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(ManagedCodeActionSet.codeActionsComparator),this.validActions=this.allActions.filter(({action:e})=>!e.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&CodeActionKind.QuickFix.contains(new CodeActionKind(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}};let ni={actions:[],documentation:void 0};async function getCodeActions(e,t,i,n,o,r){var s;let l=n.filter||{},d={...l,excludes:[...l.excludes||[],CodeActionKind.Notebook]},c={only:null===(s=l.include)||void 0===s?void 0:s.value,trigger:n.type},u=new iS.YQ(t,r),g=2===n.type,m=getCodeActionProviders(e,t,g?d:l),f=new t2.SL,_=m.map(async e=>{try{o.report(e);let n=await e.provideCodeActions(t,i,c,u.token);if(n&&f.add(n),u.token.isCancellationRequested)return ni;let r=((null==n?void 0:n.actions)||[]).filter(e=>e&&filtersAction(l,e)),s=getDocumentationFromProvider(e,r,l.include);return{actions:r.map(t=>new CodeActionItem(t,e)),documentation:s}}catch(e){if((0,i1.n2)(e))throw e;return(0,i1.Cp)(e),ni}}),v=e.onDidChange(()=>{let i=e.all(t);(0,ia.fS)(i,m)||u.cancel()});try{let i=await Promise.all(_),o=i.map(e=>e.actions).flat(),r=[...(0,ia.kX)(i.map(e=>e.documentation)),...getAdditionalDocumentationForShowingActions(e,t,n,o)];return new ManagedCodeActionSet(o,r,f)}finally{v.dispose(),u.dispose()}}function getCodeActionProviders(e,t,i){return e.all(t).filter(e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some(e=>mayIncludeActionsOfKind(i,new CodeActionKind(e))))}function*getAdditionalDocumentationForShowingActions(e,t,i,n){var o,r,s;if(t&&n.length)for(let l of e.all(t))l._getAdditionalMenuItems&&(yield*null===(o=l._getAdditionalMenuItems)||void 0===o?void 0:o.call(l,{trigger:i.type,only:null===(s=null===(r=i.filter)||void 0===r?void 0:r.include)||void 0===s?void 0:s.value},n.map(e=>e.action)))}function getDocumentationFromProvider(e,t,i){if(!e.documentation)return;let n=e.documentation.map(e=>({kind:new CodeActionKind(e.kind),command:e.command}));if(i){let e;for(let t of n)t.kind.contains(i)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null==e?void 0:e.command}for(let e of t)if(e.kind){for(let t of n)if(t.kind.contains(new CodeActionKind(e.kind)))return t.command}}async function applyCodeAction(e,t,i,n,o=i0.T.None){var r;let s=e.get(iC.vu),l=e.get(tK.H),d=e.get(i4.b),c=e.get(i5.lT);if(d.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:i}),await t.resolve(o),!o.isCancellationRequested){if(null===(r=t.action.edit)||void 0===r?void 0:r.edits.length){let e=await s.apply(t.action.edit,{editor:null==n?void 0:n.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:i!==K.OnSave,showPreview:null==n?void 0:n.preview});if(!e.isApplied)return}if(t.action.command)try{await l.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(t){let e=asMessage(t);c.error("string"==typeof e?e:tz.NC("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}}function asMessage(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(m=K||(K={})).OnSave="onSave",m.FromProblemsView="fromProblemsView",m.FromCodeActions="fromCodeActions",m.FromAILightbulb="fromAILightbulb",tK.P.registerCommand("_executeCodeActionProvider",async function(e,t,i,n,o){if(!(t instanceof ip.o))throw(0,i1.b1)();let{codeActionProvider:r}=e.get(ib.p),s=e.get(i2.q).getModel(t);if(!s)throw(0,i1.b1)();let l=tJ.Y.isISelection(i)?tJ.Y.liftSelection(i):t4.e.isIRange(i)?s.validateRange(i):void 0;if(!l)throw(0,i1.b1)();let d="string"==typeof n?new CodeActionKind(n):void 0,c=await getCodeActions(r,s,l,{type:1,triggerAction:U.Default,filter:{includeSourceActions:!0,include:d}},iN.Ex.None,i0.T.None),u=[],g=Math.min(c.validActions.length,"number"==typeof o?o:0);for(let e=0;e<g;e++)u.push(c.validActions[e].resolve(i0.T.None));try{return await Promise.all(u),c.validActions.map(e=>e.action)}finally{setTimeout(()=>c.dispose(),100)}});var nn=i(10612);let no=j=class{constructor(e){this.keybindingService=e}getResolver(){let e=new nn.o(()=>this.keybindingService.getKeybindings().filter(e=>j.codeActionCommands.indexOf(e.command)>=0).filter(e=>e.resolvedKeybinding).map(e=>{let t=e.commandArgs;return e.command===ne?t={kind:CodeActionKind.SourceOrganizeImports.value}:e.command===nt&&(t={kind:CodeActionKind.SourceFixAll.value}),{resolvedKeybinding:e.resolvedKeybinding,...CodeActionCommandArgs.fromUser(t,{kind:CodeActionKind.None,apply:"never"})}}));return t=>{if(t.kind){let i=this.bestKeybindingForCodeAction(t,e.value);return null==i?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;let i=new CodeActionKind(e.kind);return t.filter(e=>e.kind.contains(i)).filter(t=>!t.preferred||e.isPreferred).reduceRight((e,t)=>e?e.kind.contains(t.kind)?t:e:t,void 0)}};no.codeActionCommands=[i9,i3,i8,ne,nt],no=j=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(f=iA.d,function(e,t){f(e,t,0)})],no),i(16849),i(13139),i(69082),(0,t7.P6G)("symbolIcon.arrayForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.booleanForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,tz.NC)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.colorForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.constantForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,tz.NC)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,tz.NC)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,tz.NC)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,tz.NC)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,tz.NC)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.fileForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.folderForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,tz.NC)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,tz.NC)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.keyForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.keywordForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,tz.NC)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.moduleForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.namespaceForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.nullForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.numberForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.objectForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.operatorForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.packageForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.propertyForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.referenceForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.snippetForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.stringForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.structForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.textForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.typeParameterForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.unitForeground",{dark:t7.dRz,light:t7.dRz,hcDark:t7.dRz,hcLight:t7.dRz},(0,tz.NC)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,t7.P6G)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,tz.NC)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));let nr=Object.freeze({kind:CodeActionKind.Empty,title:(0,tz.NC)("codeAction.widget.id.more","More Actions...")}),ns=Object.freeze([{kind:CodeActionKind.QuickFix,title:(0,tz.NC)("codeAction.widget.id.quickfix","Quick Fix")},{kind:CodeActionKind.RefactorExtract,title:(0,tz.NC)("codeAction.widget.id.extract","Extract"),icon:tF.l.wrench},{kind:CodeActionKind.RefactorInline,title:(0,tz.NC)("codeAction.widget.id.inline","Inline"),icon:tF.l.wrench},{kind:CodeActionKind.RefactorRewrite,title:(0,tz.NC)("codeAction.widget.id.convert","Rewrite"),icon:tF.l.wrench},{kind:CodeActionKind.RefactorMove,title:(0,tz.NC)("codeAction.widget.id.move","Move"),icon:tF.l.wrench},{kind:CodeActionKind.SurroundWith,title:(0,tz.NC)("codeAction.widget.id.surround","Surround With"),icon:tF.l.surroundWith},{kind:CodeActionKind.Source,title:(0,tz.NC)("codeAction.widget.id.source","Source Action"),icon:tF.l.symbolFile},nr]);function toMenuItems(e,t,i){if(!t)return e.map(e=>{var t;return{kind:"action",item:e,group:nr,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!(null===(t=e.action.edit)||void 0===t?void 0:t.edits.length)}});let n=ns.map(e=>({group:e,actions:[]}));for(let t of e){let e=t.action.kind?new CodeActionKind(t.action.kind):CodeActionKind.None;for(let i of n)if(i.group.kind.contains(e)){i.actions.push(t);break}}let o=[];for(let e of n)if(e.actions.length)for(let t of(o.push({kind:"header",group:e.group}),e.actions)){let n=e.group;o.push({kind:"action",item:t,group:t.action.isAI?{title:n.title,kind:n.kind,icon:tF.l.sparkle}:n,label:t.action.title,disabled:!!t.action.disabled,keybinding:i(t.action)})}return o}var na=i(33482);i(29970);var nl=i(23839),lightBulbWidget_param=function(e,t){return function(i,n){t(i,n,e)}};!function(e){e.Hidden={type:0};let Showing=class Showing{constructor(e,t,i,n){this.actions=e,this.trigger=t,this.editorPosition=i,this.widgetPosition=n,this.type=1}};e.Showing=Showing}(G||(G={}));let nd=q=class extends t2.JT{constructor(e,t,i){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new iM.Q5),this.onClick=this._onClick.event,this._state=G.Hidden,this._iconClasses=[],this._domNode=tO.$("div.lightBulbWidget"),this._register(na.o.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(e=>{let t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()})),this._register(tO.GQ(this._domNode,e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();let{top:t,height:i}=tO.i(this._domNode),n=this._editor.getOption(67),o=Math.floor(n/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(o+=n),this._onClick.fire({x:e.posx,y:t+i+o,actions:this.state.actions,trigger:this.state.trigger})})),this._register(tO.nm(this._domNode,"mouseenter",e=>{(1&e.buttons)==1&&this.hide()})),this._register(iM.ju.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var e,t,i,n;this._preferredKbLabel=null!==(t=null===(e=this._keybindingService.lookupKeybinding(i7))||void 0===e?void 0:e.getLabel())&&void 0!==t?t:void 0,this._quickFixKbLabel=null!==(n=null===(i=this._keybindingService.lookupKeybinding(i6))||void 0===i?void 0:i.getLabel())&&void 0!==n?n:void 0,this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.hide();let n=this._editor.getOptions();if(!n.get(65).enabled)return this.hide();let o=this._editor.getModel();if(!o)return this.hide();let{lineNumber:r,column:s}=o.validatePosition(i),l=o.getOptions().tabSize,d=this._editor.getOptions().get(50),c=o.getLineContent(r),u=(0,nl.q)(c,l),g=d.spaceWidth*u>22,isFolded=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1),m=r,f=1;if(!g){if(r>1&&!isFolded(r-1))m-=1;else if(r<o.getLineCount()&&!isFolded(r+1))m+=1;else if(s*d.spaceWidth<22)return this.hide();f=/^\S\s*$/.test(o.getLineContent(m))?2:1}this.state=new G.Showing(e,t,i,{position:{lineNumber:m,column:f},preference:q._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==G.Hidden&&(this.state=G.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){let e;if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],1!==this.state.type)return;let t=!1;this.state.actions.allAIFixes?(e=tF.l.sparkleFilled,1===this.state.actions.validActions.length&&(t=!0)):e=this.state.actions.hasAutoFix?this.state.actions.hasAIFix?tF.l.lightbulbSparkleAutofix:tF.l.lightbulbAutofix:this.state.actions.hasAIFix?tF.l.lightbulbSparkle:tF.l.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=iw.k.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateLightbulbTitle(e,t){1===this.state.type&&(t?this.title=tz.NC("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=tz.NC("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=tz.NC("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=tz.NC("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}};nd.ID="editor.contrib.lightbulbWidget",nd._posPref=[0],nd=q=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([lightBulbWidget_param(1,iA.d),lightBulbWidget_param(2,tK.H)],nd);var nh=i(83367);i(79296);var nc=i(835),nu=i(88660),ng=i(4179),actionList_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},actionList_param=function(e,t){return function(i,n){t(i,n,e)}};let np="acceptSelectedCodeAction",nm="previewSelectedCodeAction";let HeaderRenderer=class HeaderRenderer{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");let t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){var n,o;i.text.textContent=null!==(o=null===(n=e.group)||void 0===n?void 0:n.title)&&void 0!==o?o:""}disposeTemplate(e){}};let nf=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);let t=document.createElement("div");t.className="icon",e.append(t);let i=document.createElement("span");i.className="title",e.append(i);let n=new nc.e(e,io.OS);return{container:e,icon:t,text:i,keybinding:n}}renderElement(e,t,i){var n,o,r;if((null===(n=e.group)||void 0===n?void 0:n.icon)?(i.icon.className=iw.k.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=(0,t7.n_1)(e.group.icon.color.id))):(i.icon.className=iw.k.asClassName(tF.l.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=stripNewlines(e.label),i.keybinding.set(e.keybinding),tO.iJ(!!e.keybinding,i.keybinding.element);let s=null===(o=this._keybindingService.lookupKeybinding(np))||void 0===o?void 0:o.getLabel(),l=null===(r=this._keybindingService.lookupKeybinding(nm))||void 0===r?void 0:r.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:s&&l?this._supportsPreview&&e.canPreview?i.container.title=(0,tz.NC)({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to apply, Shift+F2 to preview"']},"{0} to apply, {1} to preview",s,l):i.container.title=(0,tz.NC)({key:"label",comment:['placeholder is a keybinding, e.g "F2 to apply"']},"{0} to apply",s):i.container.title=""}disposeTemplate(e){}};nf=actionList_decorate([actionList_param(1,iA.d)],nf);let AcceptSelectedEvent=class AcceptSelectedEvent extends UIEvent{constructor(){super("acceptSelectedAction")}};let PreviewSelectedEvent=class PreviewSelectedEvent extends UIEvent{constructor(){super("previewSelectedAction")}};function getKeyboardNavigationLabel(e){if("action"===e.kind)return e.label}let n_=class extends t2.JT{constructor(e,t,i,n,o,r){super(),this._delegate=n,this._contextViewService=o,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new i0.A),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList"),this._list=this._register(new nu.aV(e,this.domNode,{getHeight:e=>"header"===e.kind?this._headerLineHeight:this._actionLineHeight,getTemplateId:e=>e.kind},[new nf(t,this._keybindingService),new HeaderRenderer],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel},accessibilityProvider:{getAriaLabel:e=>{if("action"===e.kind){let t=e.label?stripNewlines(null==e?void 0:e.label):"";return e.disabled&&(t=(0,tz.NC)({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",t,e.disabled)),t}return null},getWidgetAriaLabel:()=>(0,tz.NC)({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:e=>"action"===e.kind?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(ng.O2),this._register(this._list.onMouseClick(e=>this.onListClick(e))),this._register(this._list.onMouseOver(e=>this.onListHover(e))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(e=>this.onListSelection(e))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&"action"===e.kind}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){let t=this._allMenuItems.filter(e=>"header"===e.kind).length,i=this._allMenuItems.length*this._actionLineHeight,n=i+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(n);let o=e;if(this._allMenuItems.length>=50)o=380;else{let t=this._allMenuItems.map((e,t)=>{let i=this.domNode.ownerDocument.getElementById(this._list.getElementID(t));if(i){i.style.width="auto";let e=i.getBoundingClientRect().width;return i.style.width="",e}return 0});o=Math.max(...t,e)}let r=Math.min(n,.7*this.domNode.ownerDocument.body.clientHeight);return this._list.layout(r,o),this.domNode.style.height=`${r}px`,this._list.domFocus(),o}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){let t=this._list.getFocus();if(0===t.length)return;let i=t[0],n=this._list.element(i);if(!this.focusCondition(n))return;let o=e?new PreviewSelectedEvent:new AcceptSelectedEvent;this._list.setSelection([i],o)}onListSelection(e){if(!e.elements.length)return;let t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof PreviewSelectedEvent):this._list.setSelection([])}onFocus(){var e,t;let i=this._list.getFocus();if(0===i.length)return;let n=i[0],o=this._list.element(n);null===(t=(e=this._delegate).onFocus)||void 0===t||t.call(e,o.item)}async onListHover(e){let t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&"action"===t.kind){let e=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=e?e.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus("number"==typeof e.index?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};function stripNewlines(e){return e.replace(/\r\n|\r|\n/g," ")}n_=actionList_decorate([actionList_param(4,iR.u),actionList_param(5,iA.d)],n_);var nv=i(95026),actionWidget_param=function(e,t){return function(i,n){t(i,n,e)}};(0,t7.P6G)("actionBar.toggledBackground",{dark:t7.XEs,light:t7.XEs,hcDark:t7.XEs,hcLight:t7.XEs},(0,tz.NC)("actionBar.toggledBackground","Background color for toggled action items in action bar."));let nC={Visible:new tq.uy("codeActionMenuVisible",!1,(0,tz.NC)("codeActionMenuVisible","Whether the action widget list is visible"))},nb=(0,iL.yh)("actionWidgetService"),nS=class extends t2.JT{get isVisible(){return nC.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new t2.XK)}show(e,t,i,n,o,r,s){let l=nC.Visible.bindTo(this._contextKeyService),d=this._instantiationService.createInstance(n_,e,t,i,n);this._contextViewService.showContextView({getAnchor:()=>o,render:e=>(l.set(!0),this._renderWidget(e,d,null!=s?s:[])),onHide:e=>{l.reset(),this._onWidgetClosed(e)}},r,!1)}acceptSelected(e){var t;null===(t=this._list.value)||void 0===t||t.acceptSelected(e)}focusPrevious(){var e,t;null===(t=null===(e=this._list)||void 0===e?void 0:e.value)||void 0===t||t.focusPrevious()}focusNext(){var e,t;null===(t=null===(e=this._list)||void 0===e?void 0:e.value)||void 0===t||t.focusNext()}hide(){var e;null===(e=this._list.value)||void 0===e||e.hide(),this._list.clear()}_renderWidget(e,t,i){var n;let o=document.createElement("div");if(o.classList.add("action-widget"),e.appendChild(o),this._list.value=t,this._list.value)o.appendChild(this._list.value.domNode);else throw Error("List has no value");let r=new t2.SL,s=document.createElement("div"),l=e.appendChild(s);l.classList.add("context-view-block"),r.add(tO.nm(l,tO.tw.MOUSE_DOWN,e=>e.stopPropagation()));let d=document.createElement("div"),c=e.appendChild(d);c.classList.add("context-view-pointerBlock"),r.add(tO.nm(c,tO.tw.POINTER_MOVE,()=>c.remove())),r.add(tO.nm(c,tO.tw.MOUSE_DOWN,()=>c.remove()));let u=0;if(i.length){let e=this._createActionBar(".action-widget-action-bar",i);e&&(o.appendChild(e.getContainer().parentElement),r.add(e),u=e.getContainer().offsetWidth)}let g=null===(n=this._list.value)||void 0===n?void 0:n.layout(u);o.style.width=`${g}px`;let m=r.add(tO.go(e));return r.add(m.onDidBlur(()=>this.hide())),r}_createActionBar(e,t){if(!t.length)return;let i=tO.$(e),n=new nh.o(i);return n.push(t,{icon:!1,label:!0}),n}_onWidgetClosed(e){var t;null===(t=this._list.value)||void 0===t||t.hide(e)}};nS=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([actionWidget_param(0,iR.u),actionWidget_param(1,tq.i6),actionWidget_param(2,iL.TG)],nS),(0,nv.z)(nb,nS,1),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:"hideCodeActionWidget",title:(0,tz.vv)("hideCodeActionWidget.title","Hide action widget"),precondition:nC.Visible,keybinding:{weight:1100,primary:9,secondary:[1033]}})}run(e){e.get(nb).hide()}}),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:"selectPrevCodeAction",title:(0,tz.vv)("selectPrevCodeAction.title","Select previous action"),precondition:nC.Visible,keybinding:{weight:1100,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(e){let t=e.get(nb);t instanceof nS&&t.focusPrevious()}}),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:"selectNextCodeAction",title:(0,tz.vv)("selectNextCodeAction.title","Select next action"),precondition:nC.Visible,keybinding:{weight:1100,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(e){let t=e.get(nb);t instanceof nS&&t.focusNext()}}),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:np,title:(0,tz.vv)("acceptSelected.title","Accept selected action"),precondition:nC.Visible,keybinding:{weight:1100,primary:3,secondary:[2137]}})}run(e){let t=e.get(nb);t instanceof nS&&t.acceptSelected()}}),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:nm,title:(0,tz.vv)("previewSelected.title","Preview selected action"),precondition:nC.Visible,keybinding:{weight:1100,primary:2051}})}run(e){let t=e.get(nb);t instanceof nS&&t.acceptSelected(!0)}});var ny=i(24070),nw=i(21799),nL=i(67590),nk=i(69350);let nD=new tq.uy("supportedCodeAction",""),nx="_typescript.applyFixAllCodeAction";let CodeActionOracle=class CodeActionOracle extends t2.JT{constructor(e,t,i,n=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new t1._F),this._register(this._markerService.onMarkerChanged(e=>this._onMarkerChanges(e))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){let t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){let t=this._editor.getModel();t&&e.some(e=>(0,nL.Xy)(e,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:U.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;let t=this._editor.getSelection();if(1===e.type)return t;let i=this._editor.getOption(65).enabled;if(i!==nk.$r.Off){if(i===nk.$r.On);else if(i===nk.$r.OnCode){let e=t.isEmpty();if(!e)return t;let i=this._editor.getModel(),{lineNumber:n,column:o}=t.getPosition(),r=i.getLineContent(n);if(0===r.length)return;if(1===o){if(/\s/.test(r[0]))return}else if(o===i.getLineMaxColumn(n)){if(/\s/.test(r[r.length-1]))return}else if(/\s/.test(r[o-2])&&/\s/.test(r[o-1]))return}return t}}};!function(e){e.Empty={type:0};let Triggered=class Triggered{constructor(e,t,i){this.trigger=e,this.position=t,this._cancellablePromise=i,this.type=1,this.actions=i.catch(e=>{if((0,i1.n2)(e))return nN;throw e})}cancel(){this._cancellablePromise.cancel()}};e.Triggered=Triggered}(Q||(Q={}));let nN=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});let CodeActionModel=class CodeActionModel extends t2.JT{constructor(e,t,i,n,o,r){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=o,this._configurationService=r,this._codeActionOracle=this._register(new t2.XK),this._state=Q.Empty,this._onDidChangeState=this._register(new iM.Q5),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=nD.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(Q.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;let t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:null==t?void 0:t.uri})}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(Q.Empty);let e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(91)){let t=this._registry.all(e).flatMap(e=>{var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]});this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new CodeActionOracle(this._editor,this._markerService,t=>{var i;if(!t){this.setState(Q.Empty);return}let n=t.selection.getStartPosition(),o=(0,t1.PG)(async i=>{var n,o,r,s,l,d,c,u,g,m;if(this._settingEnabledNearbyQuickfixes()&&1===t.trigger.type&&(t.trigger.triggerAction===U.QuickFix||(null===(o=null===(n=t.trigger.filter)||void 0===n?void 0:n.include)||void 0===o?void 0:o.contains(CodeActionKind.QuickFix)))){let n=await getCodeActions(this._registry,e,t.selection,t.trigger,iN.Ex.None,i),o=[...n.allActions];if(i.isCancellationRequested)return nN;let f=null===(r=n.validActions)||void 0===r?void 0:r.some(e=>!!e.action.kind&&CodeActionKind.QuickFix.contains(new CodeActionKind(e.action.kind))),_=this._markerService.read({resource:e.uri});if(f){for(let e of n.validActions)(null===(l=null===(s=e.action.command)||void 0===s?void 0:s.arguments)||void 0===l?void 0:l.some(e=>"string"==typeof e&&e.includes(nx)))&&(e.action.diagnostics=[..._.filter(e=>e.relatedInformation)]);return{validActions:n.validActions,allActions:o,documentation:n.documentation,hasAutoFix:n.hasAutoFix,hasAIFix:n.hasAIFix,allAIFixes:n.allAIFixes,dispose:()=>{n.dispose()}}}if(!f&&_.length>0){let r=t.selection.getPosition(),s=r,l=Number.MAX_VALUE,f=[...n.validActions];for(let v of _){let C=v.endColumn,b=v.endLineNumber,S=v.startLineNumber;if(b===r.lineNumber||S===r.lineNumber){s=new t5.L(b,C);let v={type:t.trigger.type,triggerAction:t.trigger.triggerAction,filter:{include:(null===(d=t.trigger.filter)||void 0===d?void 0:d.include)?null===(c=t.trigger.filter)||void 0===c?void 0:c.include:CodeActionKind.QuickFix},autoApply:t.trigger.autoApply,context:{notAvailableMessage:(null===(u=t.trigger.context)||void 0===u?void 0:u.notAvailableMessage)||"",position:s}},S=new tJ.Y(s.lineNumber,s.column,s.lineNumber,s.column),y=await getCodeActions(this._registry,e,S,v,iN.Ex.None,i);if(0!==y.validActions.length){for(let e of y.validActions)(null===(m=null===(g=e.action.command)||void 0===g?void 0:g.arguments)||void 0===m?void 0:m.some(e=>"string"==typeof e&&e.includes(nx)))&&(e.action.diagnostics=[..._.filter(e=>e.relatedInformation)]);0===n.allActions.length&&o.push(...y.allActions),Math.abs(r.column-C)<l?f.unshift(...y.validActions):f.push(...y.validActions)}l=Math.abs(r.column-C)}}let v=f.filter((e,t,i)=>i.findIndex(t=>t.action.title===e.action.title)===t);return v.sort((e,t)=>e.action.isPreferred&&!t.action.isPreferred?-1:!e.action.isPreferred&&t.action.isPreferred?1:e.action.isAI&&!t.action.isAI?1:!e.action.isAI&&t.action.isAI?-1:0),{validActions:v,allActions:o,documentation:n.documentation,hasAutoFix:n.hasAutoFix,hasAIFix:n.hasAIFix,allAIFixes:n.allAIFixes,dispose:()=>{n.dispose()}}}}return getCodeActions(this._registry,e,t.selection,t.trigger,iN.Ex.None,i)});1===t.trigger.type&&(null===(i=this._progressService)||void 0===i||i.showWhile(o,250)),this.setState(new Q.Triggered(t.trigger,n,o))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:U.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||this._disposed||this._onDidChangeState.fire(e))}};var codeActionController_param=function(e,t){return function(i,n){t(i,n,e)}};let nE=Z=class extends t2.JT{static get(e){return e.getContribution(Z.ID)}constructor(e,t,i,n,o,r,s,l,d,c){super(),this._commandService=s,this._configurationService=l,this._actionWidgetService=d,this._instantiationService=c,this._activeCodeActions=this._register(new t2.XK),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new CodeActionModel(this._editor,o.codeActionProvider,t,i,r,l)),this._register(this._model.onDidChangeState(e=>this.update(e))),this._lightBulbWidget=new nn.o(()=>{let e=this._editor.getContribution(nd.ID);return e&&this._register(e.onClick(e=>this.showCodeActionsFromLightbulb(e.actions,e))),e}),this._resolver=n.createInstance(no),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&1===e.validActions.length){let t=e.validActions[0],i=t.action.command;i&&"inlineChat.start"===i.id&&i.arguments&&i.arguments.length>=1&&(i.arguments[0]={...i.arguments[0],autoSend:!1}),await this._applyCodeAction(t,!1,!1,K.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,n){var o;if(!this._editor.hasModel())return;null===(o=iV.get(this._editor))||void 0===o||o.closeMessage();let r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:n,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,n){try{await this._instantiationService.invokeFunction(applyCodeAction,e,n,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:U.QuickFix,filter:{}})}}async update(e){var t,i,n,o,r,s,l;let d;if(1!==e.type){null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide();return}try{d=await e.actions}catch(e){(0,i1.dL)(e);return}if(!this._disposed){if(null===(i=this._lightBulbWidget.value)||void 0===i||i.update(d,e.trigger,e.position),1===e.trigger.type){if(null===(n=e.trigger.filter)||void 0===n?void 0:n.include){let t=this.tryGetValidActionToApply(e.trigger,d);if(t){try{null===(o=this._lightBulbWidget.value)||void 0===o||o.hide(),await this._applyCodeAction(t,!1,!1,K.FromCodeActions)}finally{d.dispose()}return}if(e.trigger.context){let t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,d);if(t&&t.action.disabled){null===(r=iV.get(this._editor))||void 0===r||r.showMessage(t.action.disabled,e.trigger.context.position),d.dispose();return}}}let t=!!(null===(s=e.trigger.filter)||void 0===s?void 0:s.include);if(e.trigger.context&&(!d.allActions.length||!t&&!d.validActions.length)){null===(l=iV.get(this._editor))||void 0===l||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=d,d.dispose();return}this._activeCodeActions.value=d,this.showCodeActionList(d,this.toCoords(e.position),{includeDisabledActions:t,fromLightbulb:!1})}else this._actionWidgetService.isVisible?d.dispose():this._activeCodeActions.value=d}}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&("first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length))return t.allActions.find(({action:e})=>e.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&("first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length))return t.validActions[0]}async showCodeActionList(e,t,i){let n=this._editor.createDecorationsCollection(),o=this._editor.getDomNode();if(!o)return;let r=i.includeDisabledActions&&(this._showDisabled||0===e.validActions.length)?e.allActions:e.validActions;if(!r.length)return;let s=t5.L.isIPosition(t)?this.toCoords(t):t;this._actionWidgetService.show("codeActionWidget",!0,toMenuItems(r,this._shouldShowHeaders(),this._resolver.getResolver()),{onSelect:async(e,t)=>{this._applyCodeAction(e,!0,!!t,K.FromCodeActions),this._actionWidgetService.hide(),n.clear()},onHide:()=>{var e;null===(e=this._editor)||void 0===e||e.focus(),n.clear()},onHover:async(e,t)=>{var i;if(!t.isCancellationRequested)return{canPreview:!!(null===(i=e.action.edit)||void 0===i?void 0:i.edits.length)}},onFocus:e=>{var t,i;if(e&&e.action){let o=e.action.ranges,r=e.action.diagnostics;if(n.clear(),o&&o.length>0){let e=r&&(null==r?void 0:r.length)>1?r.map(e=>({range:e,options:Z.DECORATION})):o.map(e=>({range:e,options:Z.DECORATION}));n.set(e)}else if(r&&r.length>0){let e=r.map(e=>({range:e,options:Z.DECORATION}));n.set(e);let o=r[0];if(o.startLineNumber&&o.startColumn){let e=null===(i=null===(t=this._editor.getModel())||void 0===t?void 0:t.getWordAtPosition({lineNumber:o.startLineNumber,column:o.startColumn}))||void 0===i?void 0:i.word;tQ.i7((0,tz.NC)("editingNewSelection","Context: {0} at line {1} and column {2}.",e,o.startLineNumber,o.startColumn))}}}else n.clear()}},s,o,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();let t=this._editor.getScrolledVisiblePosition(e),i=(0,tO.i)(this._editor.getDomNode()),n=i.left+t.left,o=i.top+t.top+t.height;return{x:n,y:o}}_shouldShowHeaders(){var e;let t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null==t?void 0:t.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];let n=e.documentation.map(e=>{var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:()=>{var t;return this._commandService.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}}});return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&n.push(this._showDisabled?{id:"hideMoreActions",label:(0,tz.NC)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:(0,tz.NC)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),n}};function contextKeyForSupportedActions(e){return tq.Ao.regex(nD.keys()[0],RegExp("(\\s|^)"+(0,iy.ec)(e.value)+"\\b"))}nE.ID="editor.contrib.codeActionController",nE.DECORATION=t6.qx.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),nE=Z=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([codeActionController_param(1,ny.lT),codeActionController_param(2,tq.i6),codeActionController_param(3,iL.TG),codeActionController_param(4,ib.p),codeActionController_param(5,iN.ek),codeActionController_param(6,tK.H),codeActionController_param(7,tj.Ui),codeActionController_param(8,nb),codeActionController_param(9,iL.TG)],nE),(0,t9.Ic)((e,t)=>{var i;(i=e.getColor(t7.MUv))&&t.addRule(`.monaco-editor .quickfix-edit-highlight { background-color: ${i}; }`);let n=e.getColor(t7.EiJ);n&&t.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${(0,nw.c3)(e.type)?"dotted":"solid"} ${n}; box-sizing: border-box; }`)});let nI={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:tz.NC("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:tz.NC("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[tz.NC("args.schema.apply.first","Always apply the first returned code action."),tz.NC("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),tz.NC("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:tz.NC("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function triggerCodeActionsForEditorSelection(e,t,i,n,o=U.Default){if(e.hasModel()){let r=nE.get(e);null==r||r.manualTriggerAtCurrentPosition(t,o,i,n)}}let QuickFixAction=class QuickFixAction extends tB.R6{constructor(){super({id:i6,label:tz.NC("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:tq.Ao.and(tH.u.writable,tH.u.hasCodeActionsProvider),kbOpts:{kbExpr:tH.u.textInputFocus,primary:2137,weight:100}})}run(e,t){return triggerCodeActionsForEditorSelection(t,tz.NC("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,U.QuickFix)}};let CodeActionCommand=class CodeActionCommand extends tB._l{constructor(){super({id:i3,precondition:tq.Ao.and(tH.u.writable,tH.u.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:nI}]}})}runEditorCommand(e,t,i){let n=CodeActionCommandArgs.fromUser(i,{kind:CodeActionKind.Empty,apply:"ifSingle"});return triggerCodeActionsForEditorSelection(t,"string"==typeof(null==i?void 0:i.kind)?n.preferred?tz.NC("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):tz.NC("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):n.preferred?tz.NC("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):tz.NC("editor.action.codeAction.noneMessage","No code actions available"),{include:n.kind,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}};let RefactorAction=class RefactorAction extends tB.R6{constructor(){super({id:i9,label:tz.NC("refactor.label","Refactor..."),alias:"Refactor...",precondition:tq.Ao.and(tH.u.writable,tH.u.hasCodeActionsProvider),kbOpts:{kbExpr:tH.u.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:tq.Ao.and(tH.u.writable,contextKeyForSupportedActions(CodeActionKind.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:nI}]}})}run(e,t,i){let n=CodeActionCommandArgs.fromUser(i,{kind:CodeActionKind.Refactor,apply:"never"});return triggerCodeActionsForEditorSelection(t,"string"==typeof(null==i?void 0:i.kind)?n.preferred?tz.NC("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):tz.NC("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):n.preferred?tz.NC("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):tz.NC("editor.action.refactor.noneMessage","No refactorings available"),{include:CodeActionKind.Refactor.contains(n.kind)?n.kind:CodeActionKind.None,onlyIncludePreferredActions:n.preferred},n.apply,U.Refactor)}};let SourceAction=class SourceAction extends tB.R6{constructor(){super({id:i8,label:tz.NC("source.label","Source Action..."),alias:"Source Action...",precondition:tq.Ao.and(tH.u.writable,tH.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:tq.Ao.and(tH.u.writable,contextKeyForSupportedActions(CodeActionKind.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:nI}]}})}run(e,t,i){let n=CodeActionCommandArgs.fromUser(i,{kind:CodeActionKind.Source,apply:"never"});return triggerCodeActionsForEditorSelection(t,"string"==typeof(null==i?void 0:i.kind)?n.preferred?tz.NC("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):tz.NC("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):n.preferred?tz.NC("editor.action.source.noneMessage.preferred","No preferred source actions available"):tz.NC("editor.action.source.noneMessage","No source actions available"),{include:CodeActionKind.Source.contains(n.kind)?n.kind:CodeActionKind.None,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply,U.SourceAction)}};let OrganizeImportsAction=class OrganizeImportsAction extends tB.R6{constructor(){super({id:ne,label:tz.NC("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:tq.Ao.and(tH.u.writable,contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),kbOpts:{kbExpr:tH.u.textInputFocus,primary:1581,weight:100}})}run(e,t){return triggerCodeActionsForEditorSelection(t,tz.NC("editor.action.organize.noneMessage","No organize imports action available"),{include:CodeActionKind.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",U.OrganizeImports)}};let FixAllAction=class FixAllAction extends tB.R6{constructor(){super({id:nt,label:tz.NC("fixAll.label","Fix All"),alias:"Fix All",precondition:tq.Ao.and(tH.u.writable,contextKeyForSupportedActions(CodeActionKind.SourceFixAll))})}run(e,t){return triggerCodeActionsForEditorSelection(t,tz.NC("fixAll.noneMessage","No fix all action available"),{include:CodeActionKind.SourceFixAll,includeSourceActions:!0},"ifSingle",U.FixAll)}};let AutoFixAction=class AutoFixAction extends tB.R6{constructor(){super({id:i7,label:tz.NC("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:tq.Ao.and(tH.u.writable,contextKeyForSupportedActions(CodeActionKind.QuickFix)),kbOpts:{kbExpr:tH.u.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return triggerCodeActionsForEditorSelection(t,tz.NC("editor.action.autoFix.noneMessage","No auto fixes available"),{include:CodeActionKind.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",U.AutoFix)}};var nT=i(61529);(0,tB._K)(nE.ID,nE,3),(0,tB._K)(nd.ID,nd,4),(0,tB.Qr)(QuickFixAction),(0,tB.Qr)(RefactorAction),(0,tB.Qr)(SourceAction),(0,tB.Qr)(OrganizeImportsAction),(0,tB.Qr)(AutoFixAction),(0,tB.Qr)(FixAllAction),(0,tB.fK)(new CodeActionCommand),im.B.as(nT.IP.Configuration).registerConfiguration({...iX.wk,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:tz.NC("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}),im.B.as(nT.IP.Configuration).registerConfiguration({...iX.wk,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:tz.NC("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});var nM=i(6162),nR=i(16877);let CodeLensModel=class CodeLensModel{constructor(){this.lenses=[],this._disposables=new t2.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){for(let i of(this._disposables.add(e),e.lenses))this.lenses.push({symbol:i,provider:t})}};async function getCodeLensModel(e,t,i){let n=e.ordered(t),o=new Map,r=new CodeLensModel,s=n.map(async(e,n)=>{o.set(e,n);try{let n=await Promise.resolve(e.provideCodeLenses(t,i));n&&r.add(n,e)}catch(e){(0,i1.Cp)(e)}});return await Promise.all(s),r.lenses=r.lenses.sort((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:o.get(e.provider)<o.get(t.provider)?-1:o.get(e.provider)>o.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0),r}tK.P.registerCommand("_executeCodeLensProvider",function(e,...t){let[i,n]=t;(0,nR.p_)(ip.o.isUri(i)),(0,nR.p_)("number"==typeof n||!n);let{codeLensProvider:o}=e.get(ib.p),r=e.get(i2.q).getModel(i);if(!r)throw(0,i1.b1)();let s=[],l=new t2.SL;return getCodeLensModel(o,r,i0.T.None).then(e=>{l.add(e);let t=[];for(let i of e.lenses)null==n||i.symbol.command?s.push(i.symbol):n-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(r,i.symbol,i0.T.None)).then(e=>s.push(e||i.symbol)));return Promise.all(t)}).then(()=>s).finally(()=>{setTimeout(()=>l.dispose(),100)})});var nA=i(30619),nP=i(19263),nO=i(58990);let nF=(0,iL.yh)("ICodeLensCache");let CacheItem=class CacheItem{constructor(e,t){this.lineCount=e,this.data=t}};let nB=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw Error("not supported")}},this._cache=new nA.z6(20,.75),(0,tO.se)(nO.Ex,()=>e.remove("codelens/cache",1));let t="codelens/cache2",i=e.get(t,1,"{}");this._deserialize(i),iM.ju.once(e.onWillSaveState)(i=>{i.reason===nP.fk.SHUTDOWN&&e.store(t,this._serialize(),1,1)})}put(e,t){let i=t.lenses.map(e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}}),n=new CodeLensModel;n.add({lenses:i,dispose:()=>{}},this._fakeProvider);let o=new CacheItem(e.getLineCount(),n);this._cache.set(e.uri.toString(),o)}get(e){let t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){let e=Object.create(null);for(let[t,i]of this._cache){let n=new Set;for(let e of i.data.lenses)n.add(e.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...n.values()]}}return JSON.stringify(e)}_deserialize(e){try{let t=JSON.parse(e);for(let e in t){let i=t[e],n=[];for(let e of i.lines)n.push({range:new t4.e(e,1,e,11)});let o=new CodeLensModel;o.add({lenses:n,dispose(){}},this._fakeProvider),this._cache.set(e,new CacheItem(i.lineCount,o))}}catch(e){}}};nB=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(_=nP.Uy,function(e,t){_(e,t,0)})],nB),(0,nv.z)(nF,nB,1);var nW=i(45776);i(54920);let CodeLensViewZone=class CodeLensViewZone{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}};let CodeLensContentWidget=class CodeLensContentWidget{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${CodeLensContentWidget._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();let i=[],n=!1;for(let t=0;t<e.length;t++){let o=e[t];if(o&&(n=!0,o.command)){let n=(0,nW.T)(o.command.title.trim());if(o.command.id){let e=`c${CodeLensContentWidget._idPool++}`;i.push(tO.$("a",{id:e,title:o.command.tooltip,role:"button"},...n)),this._commands.set(e,o.command)}else i.push(tO.$("span",{title:o.command.tooltip},...n));t+1<e.length&&i.push(tO.$("span",void 0,"\xa0|\xa0"))}}n?(tO.mc(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):tO.mc(this._domNode,tO.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){let t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};CodeLensContentWidget._idPool=0;let CodeLensHelper=class CodeLensHelper{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,i=t.length;e<i;e++)this._addDecorationsCallbacks[e](t[e])}};let nV=t6.qx.register({collapseOnReplaceEdit:!0,description:"codelens"});let CodeLensWidget=class CodeLensWidget{constructor(e,t,i,n,o,r){let s;this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let l=[];this._data.forEach((e,t)=>{e.symbol.command&&l.push(e.symbol),i.addDecoration({range:e.symbol.range,options:nV},e=>this._decorationIds[t]=e),s=s?t4.e.plusRange(s,e.symbol.range):t4.e.lift(e.symbol.range)}),this._viewZone=new CodeLensViewZone(s.startLineNumber-1,o,r),this._viewZoneId=n.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new CodeLensContentWidget(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null==t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{let i=this._editor.getModel().getDecorationRange(e),n=this._data[t].symbol;return!!(i&&t4.e.isEmpty(n.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((e,i)=>{t.addDecoration({range:e.symbol.range,options:nV},e=>this._decorationIds[i]=e)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){let i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){let i=e[t];if(i){let{symbol:e}=this._data[t];e.command=i.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){let e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){let t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}};var nH=i(26438),codelensController_param=function(e,t){return function(i,n){t(i,n,e)}};let nz=class{constructor(e,t,i,n,o,r){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=o,this._codeLensCache=r,this._disposables=new t2.SL,this._localToDispose=new t2.SL,this._lenses=[],this._oldCodeLensModels=new t2.SL,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new t1.pY(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&this._updateLensStyle(),e.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}_getLayoutInfo(){let e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52)),t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){let{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),n=this._editor.getOption(50),{style:o}=this._editor.getContainerDomNode();o.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),o.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),o.setProperty("--vscode-editorCodeLens-fontFeatureSettings",n.fontFeatureSettings),i&&(o.setProperty("--vscode-editorCodeLens-fontFamily",i),o.setProperty("--vscode-editorCodeLens-fontFamilyDefault",nk.hL.fontFamily)),this._editor.changeViewZones(t=>{for(let i of this._lenses)i.updateHeight(e,t)})}_localDispose(){var e,t,i;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(i=this._currentCodeLensModel)||void 0===i||i.dispose()}_onModelChange(){this._localDispose();let e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;let t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&(0,t1.Vg)(()=>{let i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},3e4,this._localToDispose);return}for(let t of this._languageFeaturesService.codeLensProvider.all(e))if("function"==typeof t.onDidChange){let e=t.onDidChange(()=>i.schedule());this._localToDispose.add(e)}let i=new t1.pY(()=>{var t;let n=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,t1.PG)(t=>getCodeLensModel(this._languageFeaturesService.codeLensProvider,e,t)),this._getCodeLensModelPromise.then(t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);let o=this._provideCodeLensDebounce.update(e,Date.now()-n);i.delay=o,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()},i1.dL)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add((0,t2.OF)(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var e;this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{let i=[],n=-1;this._lenses.forEach(e=>{e.isValid()&&n!==e.getLineNumber()?(e.update(t),n=e.getLineNumber()):i.push(e)});let o=new CodeLensHelper;i.forEach(e=>{e.dispose(o,t),this._lenses.splice(this._lenses.indexOf(e),1)}),o.commit(e)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add((0,t2.OF)(()=>{if(this._editor.getModel()){let e=nM.Z.capture(this._editor);this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{this._disposeAllLenses(e,t)})}),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(e=>{if(9!==e.target.type)return;let t=e.target.element;if((null==t?void 0:t.tagName)==="SPAN"&&(t=t.parentElement),(null==t?void 0:t.tagName)==="A")for(let e of this._lenses){let i=e.getCommand(t);if(i){this._commandService.executeCommand(i.id,...i.arguments||[]).catch(e=>this._notificationService.error(e));break}}})),i.schedule()}_disposeAllLenses(e,t){let i=new CodeLensHelper;for(let e of this._lenses)e.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){let t;if(!this._editor.hasModel())return;let i=this._editor.getModel().getLineCount(),n=[];for(let o of e.lenses){let e=o.symbol.range.startLineNumber;e<1||e>i||(t&&t[t.length-1].symbol.range.startLineNumber===e?t.push(o):(t=[o],n.push(t)))}if(!n.length&&!this._lenses.length)return;let o=nM.Z.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{let i=new CodeLensHelper,o=0,s=0;for(;s<n.length&&o<this._lenses.length;){let e=n[s][0].symbol.range.startLineNumber,l=this._lenses[o].getLineNumber();l<e?(this._lenses[o].dispose(i,t),this._lenses.splice(o,1)):l===e?(this._lenses[o].updateCodeLensSymbols(n[s],i),s++,o++):(this._lenses.splice(o,0,new CodeLensWidget(n[s],this._editor,i,t,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),o++,s++)}for(;o<this._lenses.length;)this._lenses[o].dispose(i,t),this._lenses.splice(o,1);for(;s<n.length;)this._lenses.push(new CodeLensWidget(n[s],this._editor,i,t,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),s++;i.commit(e)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){let e=this._editor.getModel();e&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;let t=this._editor.getModel();if(!t)return;let i=[],n=[];if(this._lenses.forEach(e=>{let o=e.computeIfNecessary(t);o&&(i.push(o),n.push(e))}),0===i.length)return;let o=Date.now(),r=(0,t1.PG)(e=>{let o=i.map((i,o)=>{let r=Array(i.length),s=i.map((i,n)=>i.symbol.command||"function"!=typeof i.provider.resolveCodeLens?(r[n]=i.symbol,Promise.resolve(void 0)):Promise.resolve(i.provider.resolveCodeLens(t,i.symbol,e)).then(e=>{r[n]=e},i1.Cp));return Promise.all(s).then(()=>{e.isCancellationRequested||n[o].isDisposed()||n[o].updateCommands(r)})});return Promise.all(o)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{let e=this._resolveCodeLensesDebounce.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},e=>{(0,i1.dL)(e),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(null===(e=this._currentCodeLensModel)||void 0===e?void 0:e.isDisposed)?void 0:this._currentCodeLensModel}};nz.ID="css.editor.codeLens",nz=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([codelensController_param(1,ib.p),codelensController_param(2,nH.A),codelensController_param(3,tK.H),codelensController_param(4,i5.lT),codelensController_param(5,nF)],nz),(0,tB._K)(nz.ID,nz,1),(0,tB.Qr)(class extends tB.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:tH.u.hasCodeLensProvider,label:(0,tz.NC)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;let i=e.get(iE.eJ),n=e.get(tK.H),o=e.get(i5.lT),r=t.getSelection().positionLineNumber,s=t.getContribution(nz.ID);if(!s)return;let l=await s.getModel();if(!l)return;let d=[];for(let e of l.lenses)e.symbol.command&&e.symbol.range.startLineNumber===r&&d.push({label:e.symbol.command.title,command:e.symbol.command});if(0===d.length)return;let c=await i.pick(d,{canPickMany:!1,placeHolder:(0,tz.NC)("placeHolder","Select a command")});if(!c)return;let u=c.command;if(l.isDisposed){let e=await s.getModel(),t=null==e?void 0:e.lenses.find(e=>{var t;return e.symbol.range.startLineNumber===r&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===u.title});if(!t||!t.symbol.command)return;u=t.symbol.command}try{await n.executeCommand(u.id,...u.arguments||[])}catch(e){o.error(e)}}});var nU=i(50164),nK=i(38345),nj=i(82410),nq=i(92241),n$=i(68903),nG=i(97238),defaultDocumentColorProvider_param=function(e,t){return function(i,n){t(i,n,e)}};let DefaultDocumentColorProvider=class DefaultDocumentColorProvider{constructor(e,t){this._editorWorkerClient=new nq.Q8(e,!1,"editorWorkerService",t)}async provideDocumentColors(e,t){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){let n=t.range,o=t.color,r=o.alpha,s=new nU.Il(new nU.VS(Math.round(255*o.red),Math.round(255*o.green),Math.round(255*o.blue),r)),l=r?nU.Il.Format.CSS.formatRGB(s):nU.Il.Format.CSS.formatRGBA(s),d=r?nU.Il.Format.CSS.formatHSL(s):nU.Il.Format.CSS.formatHSLA(s),c=r?nU.Il.Format.CSS.formatHex(s):nU.Il.Format.CSS.formatHexA(s),u=[];return u.push({label:l,textEdit:{range:n,text:l}}),u.push({label:d,textEdit:{range:n,text:d}}),u.push({label:c,textEdit:{range:n,text:c}}),u}};let nQ=class extends t2.JT{constructor(e,t,i){super(),this._register(i.colorProvider.register("*",new DefaultDocumentColorProvider(e,t)))}};async function getColors(e,t,i,n=!0){return _findColorData(new ColorDataCollector,e,t,i,n)}function getColorPresentations(e,t,i,n){return Promise.resolve(i.provideColorPresentations(e,t,n))}nQ=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([defaultDocumentColorProvider_param(0,i2.q),defaultDocumentColorProvider_param(1,n$.c_),defaultDocumentColorProvider_param(2,ib.p)],nQ),(0,nG.y)(nQ);let ColorDataCollector=class ColorDataCollector{constructor(){}async compute(e,t,i,n){let o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(let t of o)n.push({colorInfo:t,provider:e});return Array.isArray(o)}};let ExtColorDataCollector=class ExtColorDataCollector{constructor(){}async compute(e,t,i,n){let o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(let e of o)n.push({range:e.range,color:[e.color.red,e.color.green,e.color.blue,e.color.alpha]});return Array.isArray(o)}};let ColorPresentationsCollector=class ColorPresentationsCollector{constructor(e){this.colorInfo=e}async compute(e,t,i,n){let o=await e.provideColorPresentations(t,this.colorInfo,i0.T.None);return Array.isArray(o)&&n.push(...o),Array.isArray(o)}};async function _findColorData(e,t,i,n,o){let r,s=!1,l=[],d=t.ordered(i);for(let t=d.length-1;t>=0;t--){let o=d[t];if(o instanceof DefaultDocumentColorProvider)r=o;else try{await e.compute(o,i,n,l)&&(s=!0)}catch(e){(0,i1.Cp)(e)}}return s?l:r&&o?(await e.compute(r,i,n,l),l):[]}function _setupColorCommand(e,t){let{colorProvider:i}=e.get(ib.p),n=e.get(i2.q).getModel(t);if(!n)throw(0,i1.b1)();let o=e.get(tj.Ui).getValue("editor.defaultColorDecorators",{resource:t});return{model:n,colorProviderRegistry:i,isDefaultColorDecoratorsEnabled:o}}tK.P.registerCommand("_executeDocumentColorProvider",function(e,...t){let[i]=t;if(!(i instanceof ip.o))throw(0,i1.b1)();let{model:n,colorProviderRegistry:o,isDefaultColorDecoratorsEnabled:r}=_setupColorCommand(e,i);return _findColorData(new ExtColorDataCollector,o,n,i0.T.None,r)}),tK.P.registerCommand("_executeColorPresentationProvider",function(e,...t){let[i,n]=t,{uri:o,range:r}=n;if(!(o instanceof ip.o)||!Array.isArray(i)||4!==i.length||!t4.e.isIRange(r))throw(0,i1.b1)();let{model:s,colorProviderRegistry:l,isDefaultColorDecoratorsEnabled:d}=_setupColorCommand(e,o),[c,u,g,m]=i;return _findColorData(new ColorPresentationsCollector({range:r,color:{red:c,green:u,blue:g,alpha:m}}),l,s,i0.T.None,d)});var colorDetector_param=function(e,t){return function(i,n){t(i,n,e)}};let nZ=Object.create({}),nY=Y=class extends t2.JT{constructor(e,t,i,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new t2.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new nj.t7(this._editor),this._decoratorLimitReporter=new DecoratorLimitReporter,this._colorDecorationClassRefs=this._register(new t2.SL),this._debounceInformation=n.for(i.colorProvider,"Document Colors",{min:Y.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(e=>{let t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(146);let i=t!==this._isColorDecoratorsEnabled||e.hasChanged(21),n=e.hasChanged(146);(i||n)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(146),this.updateColors()}isEnabled(){let e=this._editor.getModel();if(!e)return!1;let t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&"object"==typeof i){let e=i.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;let e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new t1._F,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=(0,t1.PG)(async e=>{let t=this._editor.getModel();if(!t)return[];let i=new nK.G(!1),n=await getColors(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),n});try{let e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,i1.dL)(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){let t=e.map(e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:t6.qx.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((t,i)=>this._colorDatas.set(t,e[i]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[],i=this._editor.getOption(21);for(let n=0;n<e.length&&t.length<i;n++){let{red:i,green:o,blue:r,alpha:s}=e[n].colorInfo.color,l=new nU.VS(Math.round(255*i),Math.round(255*o),Math.round(255*r),s),d=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,c=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:iy.B4,inlineClassName:`${c.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:nZ}}})}let n=i<e.length&&i;this._decoratorLimitReporter.update(e.length,n),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){let t=this._editor.getModel();if(!t)return null;let i=t.getDecorationsInRange(t4.e.fromPositions(e,e)).filter(e=>this._colorDatas.has(e.id));return 0===i.length?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};nY.ID="editor.contrib.colorDetector",nY.RECOMPUTE_TIME=1e3,nY=Y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([colorDetector_param(1,tj.Ui),colorDetector_param(2,ib.p),colorDetector_param(3,nH.A)],nY);let DecoratorLimitReporter=class DecoratorLimitReporter{constructor(){this._onDidChange=new iM.Q5,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}};(0,tB._K)(nY.ID,nY,1);let ColorPickerModel=class ColorPickerModel{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new iM.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new iM.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new iM.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){i=e;break}if(-1===i){let e=t.split("(")[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){i=t;break}}-1!==i&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}};var nJ=i(79994),nX=i(14046),n0=i(21413);i(18723);var n1=i(96440);let n2=tO.$;let ColorPickerHeader=class ColorPickerHeader extends t2.JT{constructor(e,t,i,n=!1){super(),this.model=t,this.showingStandaloneColorPicker=n,this._closeButton=null,this._domNode=n2(".colorpicker-header"),tO.R3(e,this._domNode),this._pickedColorNode=tO.R3(this._domNode,n2(".picked-color")),tO.R3(this._pickedColorNode,n2("span.codicon.codicon-color-mode")),this._pickedColorPresentation=tO.R3(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");let o=(0,tz.NC)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",o),this._originalColorNode=tO.R3(this._domNode,n2(".original-color")),this._originalColorNode.style.backgroundColor=nU.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(t7.yJx)||nU.Il.white,this._register(i.onDidColorThemeChange(e=>{this.backgroundColor=e.getColor(t7.yJx)||nU.Il.white})),this._register(tO.nm(this._pickedColorNode,tO.tw.CLICK,()=>this.model.selectNextColorPresentation())),this._register(tO.nm(this._originalColorNode,tO.tw.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=nU.Il.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new CloseButton(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=nU.Il.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}};let CloseButton=class CloseButton extends t2.JT{constructor(e){super(),this._onClicked=this._register(new iM.Q5),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),tO.R3(e,this._button);let t=document.createElement("div");t.classList.add("close-button-inner-div"),tO.R3(this._button,t);let i=tO.R3(t,n2(".button"+iw.k.asCSSSelector((0,n1.q5)("color-picker-close",tF.l.close,(0,tz.NC)("closeIcon","Icon to close the color picker")))));i.classList.add("close-icon"),this._register(tO.nm(this._button,tO.tw.CLICK,()=>{this._onClicked.fire()}))}};let ColorPickerBody=class ColorPickerBody extends t2.JT{constructor(e,t,i,n=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=n2(".colorpicker-body"),tO.R3(e,this._domNode),this._saturationBox=new SaturationBox(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new OpacityStrip(this._domNode,this.model,n),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new HueStrip(this._domNode,this.model,n),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),n&&(this._insertButton=this._register(new InsertButton(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){let i=this.model.color.hsva;this.model.color=new nU.Il(new nU.tx(i.h,e,t,i.a))}onDidOpacityChange(e){let t=this.model.color.hsva;this.model.color=new nU.Il(new nU.tx(t.h,t.s,t.v,e))}onDidHueChange(e){let t=this.model.color.hsva,i=(1-e)*360;this.model.color=new nU.Il(new nU.tx(360===i?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}};let SaturationBox=class SaturationBox extends t2.JT{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new iM.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new iM.Q5,this.onColorFlushed=this._onColorFlushed.event,this._domNode=n2(".saturation-wrap"),tO.R3(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",tO.R3(this._domNode,this._canvas),this.selection=n2(".saturation-selection"),tO.R3(this._domNode,this.selection),this.layout(),this._register(tO.nm(this._domNode,tO.tw.POINTER_DOWN,e=>this.onPointerDown(e))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new nX.C);let t=tO.i(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top),()=>null);let i=tO.nm(e.target.ownerDocument,tO.tw.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){let i=Math.max(0,Math.min(1,e/this.width)),n=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,n),this._onDidChange.fire({s:i,v:n})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();let e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){let e=this.model.color.hsva,t=new nU.Il(new nU.tx(e.h,1,1,1)),i=this._canvas.getContext("2d"),n=i.createLinearGradient(0,0,this._canvas.width,0);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)");let o=i.createLinearGradient(0,0,0,this._canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=nU.Il.Format.CSS.format(t),i.fill(),i.fillStyle=n,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();let t=e.hsva;this.paintSelection(t.s,t.v)}};let Strip=class Strip extends t2.JT{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new iM.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new iM.Q5,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=tO.R3(e,n2(".standalone-strip")),this.overlay=tO.R3(this.domNode,n2(".standalone-overlay"))):(this.domNode=tO.R3(e,n2(".strip")),this.overlay=tO.R3(this.domNode,n2(".overlay"))),this.slider=tO.R3(this.domNode,n2(".slider")),this.slider.style.top="0px",this._register(tO.nm(this.domNode,tO.tw.POINTER_DOWN,e=>this.onPointerDown(e))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;let e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){let t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._register(new nX.C),i=tO.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,e=>this.onDidChangeTop(e.pageY-i.top),()=>null);let n=tO.nm(e.target.ownerDocument,tO.tw.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){let t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}};let OpacityStrip=class OpacityStrip extends Strip{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);let{r:t,g:i,b:n}=e.rgba,o=new nU.Il(new nU.VS(t,i,n,1)),r=new nU.Il(new nU.VS(t,i,n,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}};let HueStrip=class HueStrip extends Strip{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}};let InsertButton=class InsertButton extends t2.JT{constructor(e){super(),this._onClicked=this._register(new iM.Q5),this.onClicked=this._onClicked.event,this._button=tO.R3(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(tO.nm(this._button,tO.tw.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}};let ColorPickerWidget=class ColorPickerWidget extends n0.${constructor(e,t,i,n,o=!1){super(),this.model=t,this.pixelRatio=i,this._register(nJ.T.getInstance(tO.Jj(e)).onDidChange(()=>this.layout()));let r=n2(".colorpicker-widget");e.appendChild(r),this.header=this._register(new ColorPickerHeader(r,this.model,n,o)),this.body=this._register(new ColorPickerBody(r,this.model,this.pixelRatio,o))}layout(){this.body.layout()}};var colorHoverParticipant_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},colorHoverParticipant_param=function(e,t){return function(i,n){t(i,n,e)}};let ColorHover=class ColorHover{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};let n5=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return t1.Aq.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];let n=nY.get(this._editor);if(!n)return[];for(let e of t){if(!n.isColorDecoration(e))continue;let t=n.getColorData(e.range.getStartPosition());if(t){let e=await _createColorHover(this,this._editor.getModel(),t.colorInfo,t.provider);return[e]}}return[]}renderHoverParts(e,t){return renderHoverParts(this,this._editor,this._themeService,t,e)}};n5=colorHoverParticipant_decorate([colorHoverParticipant_param(1,t9.XE)],n5);let StandaloneColorPickerHover=class StandaloneColorPickerHover{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n}};let n4=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel())return null;let n=nY.get(this._editor);if(!n)return null;let o=await getColors(i,this._editor.getModel(),i0.T.None),r=null,s=null;for(let t of o){let i=t.colorInfo;t4.e.containsRange(i.range,e.range)&&(r=i,s=t.provider)}let l=null!=r?r:e,d=null!=s?s:t,c=!!r;return{colorHover:await _createColorHover(this,this._editor.getModel(),l,d),foundInEditor:c}}async updateEditorModel(e){if(!this._editor.hasModel())return;let t=e.model,i=new t4.e(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await _updateColorPresentations(this._editor.getModel(),t,this._color,i,e),i=_updateEditorModel(this._editor,i,t))}renderHoverParts(e,t){return renderHoverParts(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};async function _createColorHover(e,t,i,n){let o=t.getValueInRange(i.range),{red:r,green:s,blue:l,alpha:d}=i.color,c=new nU.VS(Math.round(255*r),Math.round(255*s),Math.round(255*l),d),u=new nU.Il(c),g=await getColorPresentations(t,i,n,i0.T.None),m=new ColorPickerModel(u,[],0);return(m.colorPresentations=g||[],m.guessColorPresentation(u,o),e instanceof n5)?new ColorHover(e,t4.e.lift(i.range),m,n):new StandaloneColorPickerHover(e,t4.e.lift(i.range),m,n)}function renderHoverParts(e,t,i,n,o){if(0===n.length||!t.hasModel())return t2.JT.None;if(o.setMinimumDimensions){let e=t.getOption(67)+8;o.setMinimumDimensions(new tO.Ro(302,e))}let r=new t2.SL,s=n[0],l=t.getModel(),d=s.model,c=r.add(new ColorPickerWidget(o.fragment,d,t.getOption(142),i,e instanceof n4));o.setColorPicker(c);let u=!1,g=new t4.e(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn);if(e instanceof n4){let t=n[0].model.color;e.color=t,_updateColorPresentations(l,d,t,g,s),r.add(d.onColorFlushed(t=>{e.color=t}))}else r.add(d.onColorFlushed(async e=>{await _updateColorPresentations(l,d,e,g,s),u=!0,g=_updateEditorModel(t,g,d)}));return r.add(d.onDidChangeColor(e=>{_updateColorPresentations(l,d,e,g,s)})),r.add(t.onDidChangeModelContent(e=>{u?u=!1:(o.hide(),t.focus())})),r}function _updateEditorModel(e,t,i){var n,o;let r=[],s=null!==(n=i.presentation.textEdit)&&void 0!==n?n:{range:t,text:i.presentation.label,forceMoveMarkers:!1};r.push(s),i.presentation.additionalTextEdits&&r.push(...i.presentation.additionalTextEdits);let l=t4.e.lift(s.range),d=e.getModel()._setTrackedRange(null,l,3);return e.executeEdits("colorpicker",r),e.pushUndoStop(),null!==(o=e.getModel()._getTrackedRange(d))&&void 0!==o?o:l}async function _updateColorPresentations(e,t,i,n,o){let r=await getColorPresentations(e,{range:n,color:{red:i.rgba.r/255,green:i.rgba.g/255,blue:i.rgba.b/255,alpha:i.rgba.a}},o.provider,i0.T.None);t.colorPresentations=r||[]}n4=colorHoverParticipant_decorate([colorHoverParticipant_param(1,t9.XE)],n4);var n3=i(84634);i(55811);var n6=i(72403);let ClickLinkMouseEvent=class ClickLinkMouseEvent{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=!!e.event[t.triggerModifier],this.hasSideBySideModifier=!!e.event[t.triggerSideBySideModifier],this.isNoneOrSingleMouseDown=e.event.detail<=1}};let ClickLinkKeyboardEvent=class ClickLinkKeyboardEvent{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=!!e[t.triggerModifier]}};let ClickLinkOptions=class ClickLinkOptions{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}};function createOptions(e){return"altKey"===e?io.dz?new ClickLinkOptions(57,"metaKey",6,"altKey"):new ClickLinkOptions(5,"ctrlKey",6,"altKey"):io.dz?new ClickLinkOptions(6,"altKey",57,"metaKey"):new ClickLinkOptions(6,"altKey",5,"ctrlKey")}let ClickLinkGesture=class ClickLinkGesture extends t2.JT{constructor(e,t){var i;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new iM.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new iM.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new iM.Q5),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=null!==(i=null==t?void 0:t.extractLineNumberFromMouseEvent)&&void 0!==i?i:e=>e.target.position?e.target.position.lineNumber:0,this._opts=createOptions(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(e=>{if(e.hasChanged(78)){let e=createOptions(this._editor.getOption(78));this._opts.equals(e)||(this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire())}})),this._register(this._editor.onMouseMove(e=>this._onEditorMouseMove(new ClickLinkMouseEvent(e,this._opts)))),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(new ClickLinkMouseEvent(e,this._opts)))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(new ClickLinkMouseEvent(e,this._opts)))),this._register(this._editor.onKeyDown(e=>this._onEditorKeyDown(new ClickLinkKeyboardEvent(e,this._opts)))),this._register(this._editor.onKeyUp(e=>this._onEditorKeyUp(new ClickLinkKeyboardEvent(e,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(e=>this._onDidChangeCursorSelection(e))),this._register(this._editor.onDidChangeModel(e=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){let t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}};var n7=i(56660);i(992);var n9=i(39938),embeddedCodeEditorWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let n8=class extends tP.Gm{constructor(e,t,i,n,o,r,s,l,d,c,u,g,m){super(e,{...n.getRawOptions(),overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()},i,o,r,s,l,d,c,u,g,m),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(e=>this._onParentConfigurationChanged(e)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){n7.jB(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};n8=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([embeddedCodeEditorWidget_param(4,iL.TG),embeddedCodeEditorWidget_param(5,tW.$),embeddedCodeEditorWidget_param(6,tK.H),embeddedCodeEditorWidget_param(7,tq.i6),embeddedCodeEditorWidget_param(8,t9.XE),embeddedCodeEditorWidget_param(9,i5.lT),embeddedCodeEditorWidget_param(10,n9.F),embeddedCodeEditorWidget_param(11,n$.c_),embeddedCodeEditorWidget_param(12,ib.p)],n8);var oe=i(46474),ot=i(79614);i(78977);let oi=new nU.Il(new nU.VS(0,122,204)),on={showArrow:!0,showFrame:!0,className:"",frameColor:oi,arrowColor:oi,keepEditorSelection:!1};let ViewZoneDelegate=class ViewZoneDelegate{constructor(e,t,i,n,o,r,s,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=n,this.showInHiddenAreas=s,this.ordinal=l,this._onDomNodeTop=o,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}};let OverlayWidgetDelegate=class OverlayWidgetDelegate{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}};let Arrow=class Arrow{constructor(e){this._editor=e,this._ruleName=Arrow._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),tO.uN(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){tO.uN(this._ruleName),tO.fk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){1===e.column&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:t4.e.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};Arrow._IdGenerator=new ot.R(".arrow-decoration-");let ZoneWidget=class ZoneWidget{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new t2.SL,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=n7.I8(t),n7.jB(this.options,on,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(e=>{let t=this._getWidth(e);this.domNode.style.width=t+"px",this.domNode.style.left=this._getLeft(e)+"px",this._onWidth(t)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Arrow(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;let i=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(i))}null===(t=this._resizeSash)||void 0===t||t.layout()}get position(){let e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){let i=t4.e.isIRange(e)?t4.e.lift(e):t4.e.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:t6.qx.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),null===(e=this._arrow)||void 0===e||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){let e=this.editor.getOption(67),t=0;return this.options.showArrow&&(t+=2*Math.round(e/3)),this.options.showFrame&&(t+=2*Math.round(e/9)),t}_showImpl(e,t){let i=e.getStartPosition(),n=this.editor.getLayoutInfo(),o=this._getWidth(n);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(n)+"px";let r=document.createElement("div");r.style.overflow="hidden";let s=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){let e=Math.max(12,this.editor.getLayoutInfo().height/s*.8);t=Math.min(t,e)}let l=0,d=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(s/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(d=Math.round(s/9)),this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new ViewZoneDelegate(r,i.lineNumber,i.column,t,e=>this._onViewZoneTop(e),e=>this._onViewZoneHeight(e),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=e.addZone(this._viewZone),this._overlayWidget=new OverlayWidgetDelegate("vs.editor.contrib.zoneWidget"+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){let e=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=e+"px",this.container.style.borderBottomWidth=e+"px"}let c=t*s-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=c+"px",this.container.style.overflow="hidden"),this._doLayout(c,o),this.options.keepEditorSelection||this.editor.setSelection(e);let u=this.editor.getModel();if(u){let t=u.validateRange(new t4.e(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(t,t.startLineNumber===u.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){let e;this._resizeSash||(this._resizeSash=this._disposables.add(new oe.g(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let i=(t.currentY-e.startY)/this.editor.getOption(67),n=e.heightInLines+(i<0?Math.ceil(i):Math.floor(i));n>5&&n<35&&this._relayout(n)}})))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){let e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}};var oo=i(51765),peekView_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},peekView_param=function(e,t){return function(i,n){t(i,n,e)}};let os=(0,iL.yh)("IPeekViewService");(0,nv.z)(os,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,t){let i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose()),this._widgets.set(e,{widget:t,listener:t.onDidClose(()=>{let i=this._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),this._widgets.delete(e))})})}},1),(v=J||(J={})).inPeekEditor=new tq.uy("inReferenceSearchEditor",!0,tz.NC("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),v.notInPeekEditor=v.inPeekEditor.toNegated();let oa=class{constructor(e,t){e instanceof n8&&J.inPeekEditor.bindTo(t)}dispose(){}};function getOuterEditor(e){let t=e.get(tW.$).getFocusedCodeEditor();return t instanceof n8?t.getParentEditor():t}oa.ID="editor.contrib.referenceController",oa=peekView_decorate([peekView_param(1,tq.i6)],oa),(0,tB._K)(oa.ID,oa,0);let ol={headerBackgroundColor:nU.Il.white,primaryHeadingColor:nU.Il.fromHex("#333333"),secondaryHeadingColor:nU.Il.fromHex("#6c6c6cb3")},od=class extends ZoneWidget{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new iM.Q5,this.onDidClose=this._onDidClose.event,n7.jB(this.options,ol,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=tO.$(".head"),this._bodyElement=tO.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=tO.$(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),tO.mu(this._titleElement,"click",e=>this._onTitleClick(e))),tO.R3(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=tO.$("span.filename"),this._secondaryHeading=tO.$("span.dirname"),this._metaHeading=tO.$("span.meta"),tO.R3(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);let i=tO.$(".peekview-actions");tO.R3(this._headElement,i);let n=this._getActionBarOptions();this._actionbarWidget=new nh.o(i,n),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new iT.aU("peekview.close",tz.NC("label.close","Close"),iw.k.asClassName(tF.l.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:oo.Id.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:tO.PO(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,tO.$Z(this._metaHeading)):tO.Cp(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}let i=Math.ceil(1.2*this.editor.getOption(67)),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};od=peekView_decorate([peekView_param(2,iL.TG)],od);let oh=(0,t7.P6G)("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:nU.Il.black,hcLight:nU.Il.white},tz.NC("peekViewTitleBackground","Background color of the peek view title area.")),oc=(0,t7.P6G)("peekViewTitleLabel.foreground",{dark:nU.Il.white,light:nU.Il.black,hcDark:nU.Il.white,hcLight:t7.NOs},tz.NC("peekViewTitleForeground","Color of the peek view title.")),ou=(0,t7.P6G)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},tz.NC("peekViewTitleInfoForeground","Color of the peek view title info.")),og=(0,t7.P6G)("peekView.border",{dark:t7.c63,light:t7.c63,hcDark:t7.lRK,hcLight:t7.lRK},tz.NC("peekViewBorder","Color of the peek view borders and arrow.")),op=(0,t7.P6G)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:nU.Il.black,hcLight:nU.Il.white},tz.NC("peekViewResultsBackground","Background color of the peek view result list."));(0,t7.P6G)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:nU.Il.white,hcLight:t7.NOs},tz.NC("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),(0,t7.P6G)("peekViewResult.fileForeground",{dark:nU.Il.white,light:"#1E1E1E",hcDark:nU.Il.white,hcLight:t7.NOs},tz.NC("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),(0,t7.P6G)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},tz.NC("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),(0,t7.P6G)("peekViewResult.selectionForeground",{dark:nU.Il.white,light:"#6C6C6C",hcDark:nU.Il.white,hcLight:t7.NOs},tz.NC("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));let om=(0,t7.P6G)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:nU.Il.black,hcLight:nU.Il.white},tz.NC("peekViewEditorBackground","Background color of the peek view editor."));(0,t7.P6G)("peekViewEditorGutter.background",{dark:om,light:om,hcDark:om,hcLight:om},tz.NC("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),(0,t7.P6G)("peekViewEditorStickyScroll.background",{dark:om,light:om,hcDark:om,hcLight:om},tz.NC("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),(0,t7.P6G)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},tz.NC("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),(0,t7.P6G)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},tz.NC("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),(0,t7.P6G)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:t7.xL1,hcLight:t7.xL1},tz.NC("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var o_=i(64676),ov=i(7530),oC=i(37139),ob=i(66870);let OneReference=class OneReference{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=ot.a.nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;let t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,tz.NC)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,(0,nL.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn):(0,tz.NC)("aria.oneReference","in {0} on line {1} at column {2}",(0,nL.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}};let FilePreview=class FilePreview{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){let i=this._modelReference.object.textEditorModel;if(!i)return;let{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:s}=e,l=i.getWordUntilPosition({lineNumber:n,column:o-t}),d=new t4.e(n,l.startColumn,n,o),c=new t4.e(r,s,r,1073741824),u=i.getValueInRange(d).replace(/^\s+/,""),g=i.getValueInRange(e),m=i.getValueInRange(c).replace(/\s+$/,"");return{value:u+g+m,highlight:{start:u.length,end:u.length+g.length}}}};let FileReferences=class FileReferences{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new nA.Y9}dispose(){(0,t2.B9)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){let e=this.children.length;return 1===e?(0,tz.NC)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,nL.EZ)(this.uri),this.uri.fsPath):(0,tz.NC)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,nL.EZ)(this.uri),this.uri.fsPath)}async resolve(e){if(0!==this._previews.size)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{let i=await e.createModelReference(t.uri);this._previews.set(t.uri,new FilePreview(i))}catch(e){(0,i1.dL)(e)}return this}};let ReferencesModel=class ReferencesModel{constructor(e,t){let i;this.groups=[],this.references=[],this._onDidChangeReferenceRange=new iM.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;let[n]=e;for(let t of(e.sort(ReferencesModel._compareReferences),e))if(i&&nL.SF.isEqual(i.uri,t.uri,!0)||(i=new FileReferences(this,t.uri),this.groups.push(i)),0===i.children.length||0!==ReferencesModel._compareReferences(t,i.children[i.children.length-1])){let e=new OneReference(n===t,i,t,e=>this._onDidChangeReferenceRange.fire(e));this.references.push(e),i.children.push(e)}}dispose(){(0,t2.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new ReferencesModel(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,tz.NC)("aria.result.0","No results found"):1===this.references.length?(0,tz.NC)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,tz.NC)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,tz.NC)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.length,r=i.parent.groups.length;return 1===r||t&&n+1<o||!t&&n>0?(n=t?(n+1)%o:(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t)?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1])}nearestReference(e,t){let i=this.references.map((i,n)=>({idx:n,prefixLen:iy.Mh(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)})).sort((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(let i of this.references)if(i.uri.toString()===e.toString()&&t4.e.containsPosition(i.range,t))return i}firstReference(){for(let e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return nL.SF.compare(e.uri,t.uri)||t4.e.compareRangesUsingStarts(e.range,t.range)}};var oS=i(36118),oy=i(95998);i(24781);var ow=i(36281),oL=i(18179),oD=i(20007),ox=i(9049),oN=i(61171),oE=i(15786),referencesTree_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},referencesTree_param=function(e,t){return function(i,n){t(i,n,e)}};let oI=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof ReferencesModel||e instanceof FileReferences}getChildren(e){if(e instanceof ReferencesModel)return e.groups;if(e instanceof FileReferences)return e.resolve(this._resolverService).then(e=>e.children);throw Error("bad tree")}};oI=referencesTree_decorate([referencesTree_param(0,n6.S)],oI);let Delegate=class Delegate{getHeight(){return 23}getTemplateId(e){return e instanceof FileReferences?oR.id:OneReferenceRenderer.id}};let oT=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof OneReference){let i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return(0,nL.EZ)(e.uri)}};oT=referencesTree_decorate([referencesTree_param(0,iA.d)],oT);let IdentityProvider=class IdentityProvider{getId(e){return e instanceof OneReference?e.id:e.uri}};let oM=class extends t2.JT{constructor(e,t){super(),this._labelService=t;let i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new ox.g(i,{supportHighlights:!0})),this.badge=new oL.Z(tO.R3(i,tO.$(".count")),{},ng.ku),e.appendChild(i)}set(e,t){let i=(0,nL.XX)(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});let n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat((0,tz.NC)("referencesCount","{0} references",n)):this.badge.setTitleFormat((0,tz.NC)("referenceCount","{0} reference",n))}};oM=referencesTree_decorate([referencesTree_param(1,oE.e)],oM);let oR=X=class{constructor(e){this._instantiationService=e,this.templateId=X.id}renderTemplate(e){return this._instantiationService.createInstance(oM,e)}renderElement(e,t,i){i.set(e.element,(0,oN.mB)(e.filterData))}disposeTemplate(e){e.dispose()}};oR.id="FileReferencesRenderer",oR=X=referencesTree_decorate([referencesTree_param(0,iL.TG)],oR);let OneReferenceTemplate=class OneReferenceTemplate{constructor(e){this.label=new oD.q(e)}set(e,t){var i;let n=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(n&&n.value){let{value:e,highlight:i}=n;t&&!oN.CL.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,oN.mB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${(0,nL.EZ)(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}};let OneReferenceRenderer=class OneReferenceRenderer{constructor(){this.templateId=OneReferenceRenderer.id}renderTemplate(e){return new OneReferenceTemplate(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}};OneReferenceRenderer.id="OneReferenceRenderer";let AccessibilityProvider=class AccessibilityProvider{getWidgetAriaLabel(){return(0,tz.NC)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}};var oA=i(30264),referencesWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let DecorationsManager=class DecorationsManager{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new t2.SL,this._callOnModelChange=new t2.SL,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();let e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));let t=[],i=[];for(let n=0,o=e.children.length;n<o;n++){let o=e.children[n];this._decorationIgnoreSet.has(o.id)||o.uri.toString()!==this._editor.getModel().uri.toString()||(t.push({range:o.range,options:DecorationsManager.DecorationOptions}),i.push(n))}this._editor.changeDecorations(n=>{let o=n.deltaDecorations([],t);for(let t=0;t<o.length;t++)this._decorations.set(o[t],e.children[i[t]])})}_onDecorationChanged(){let e=[],t=this._editor.getModel();if(t){for(let[i,n]of this._decorations){let o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!t4.e.equalsRange(o,n.range)){if(t4.e.spansMultipleLines(o))r=!0;else{let e=n.range.endColumn-n.range.startColumn,t=o.endColumn-o.startColumn;e!==t&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};DecorationsManager.DecorationOptions=t6.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});let LayoutData=class LayoutData{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{let n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:i||18}}};let ReferencesTree=class ReferencesTree extends ob.ls{};let oP=class extends od{constructor(e,t,i,n,o,r,s,l,d,c,u,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=s,this._uriLabel=l,this._undoRedoService=d,this._keybindingService=c,this._languageService=u,this._languageConfigurationService=g,this._disposeOnNewModel=new t2.SL,this._callOnDispose=new t2.SL,this._onDidSelectReference=new iM.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new tO.Ro(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,t2.B9)(this._preview),(0,t2.B9)(this._previewNotAvailableMessage),(0,t2.B9)(this._tree),(0,t2.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){let t=e.getColor(og)||nU.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(oh)||nU.Il.transparent,primaryHeadingColor:e.getColor(oc),secondaryHeadingColor:e.getColor(ou)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=tO.R3(e,tO.$("div.messages")),tO.Cp(this._messageContainer),this._splitView=new oS.z(e,{orientation:1}),this._previewContainer=tO.R3(e,tO.$("div.preview.inline")),this._preview=this._instantiationService.createInstance(n8,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),tO.Cp(this._previewContainer),this._previewNotAvailableMessage=new t6.yO(tz.NC("missingPreviewMessage","no preview available"),ow.bd,t6.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=tO.R3(e,tO.$("div.ref-tree.inline"));let t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new AccessibilityProvider,keyboardNavigationLabelProvider:this._instantiationService.createInstance(oT),identityProvider:new IdentityProvider,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:op}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(tO.mu(this._treeContainer,"keydown",e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(ReferencesTree,"ReferencesWidget",this._treeContainer,new Delegate,[this._instantiationService.createInstance(oR),this._instantiationService.createInstance(OneReferenceRenderer)],this._instantiationService.createInstance(oI),t),this._splitView.addView({onDidChange:iM.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},oS.M.Distribute),this._splitView.addView({onDidChange:iM.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},oS.M.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let onEvent=(e,t)=>{e instanceof OneReference&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen(e=>{e.sideBySide?onEvent(e.element,"side"):e.editorOptions.pinned?onEvent(e.element,"goto"):onEvent(e.element,"show")}),tO.Cp(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new tO.Ro(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return(this._disposeOnNewModel.clear(),this._model=e,this._model)?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=tz.NC("noResults","No results"),tO.$Z(this._messageContainer),Promise.resolve(void 0)):(tO.Cp(this._messageContainer),this._decorationsManager=new DecorationsManager(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{let{event:t,target:i}=e;if(2!==t.detail)return;let n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),tO.$Z(this._treeContainer),tO.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){let[e]=this._tree.getFocus();return e instanceof OneReference?e:e instanceof FileReferences&&e.children.length>0?e.children[0]:void 0}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==oy.lg.inMemory?this.setTitle((0,nL.Hx)(e.uri),this._uriLabel.getUriLabel((0,nL.XX)(e.uri))):this.setTitle(tz.NC("peekView.alternateTitle","References"));let i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent)),this._tree.reveal(e);let n=await i;if(!this._model){n.dispose();return}(0,t2.B9)(this._previewModelReference);let o=n.object;if(o){let t=this._preview.getModel()===o.textEditorModel?0:1,i=t4.e.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}};oP=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([referencesWidget_param(3,t9.XE),referencesWidget_param(4,n6.S),referencesWidget_param(5,iL.TG),referencesWidget_param(6,os),referencesWidget_param(7,oE.e),referencesWidget_param(8,oA.tJ),referencesWidget_param(9,iA.d),referencesWidget_param(10,n3.O),referencesWidget_param(11,n$.c_)],oP);var oO=i(59980),referencesController_param=function(e,t){return function(i,n){t(i,n,e)}};let oF=new tq.uy("referenceSearchVisible",!1,tz.NC("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),oB=ee=class{static get(e){return e.getContribution(ee.ID)}constructor(e,t,i,n,o,r,s,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=s,this._configurationService=l,this._disposables=new t2.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=oF.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));let o="peekViewLayout",r=LayoutData.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(oP,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(tz.NC("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(e=>{let{element:t,kind:n}=e;if(t)switch(n){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t,!0):this.openReference(t,!1,!0)}}));let s=++this._requestIdPool;t.then(t=>{var i;if(s!==this._requestIdPool||!this._widget){t.dispose();return}return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(tz.NC("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new t5.L(e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then(()=>{this._widget&&"editor"===this._editor.getOption(87)&&this._widget.focusOnPreviewEditor()})}})},e=>{this._notificationService.error(e)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;let t=this._widget.position;if(!t)return;let i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;let n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();await this._widget.setSelection(n),await this._gotoReference(n,!1),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}async revealReference(e){this._editor.hasModel()&&this._model&&this._widget&&await this._widget.revealReference(e)}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var i;null===(i=this._widget)||void 0===i||i.hide(),this._ignoreModelChangeEvent=!0;let n=t4.e.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:n,selectionSource:"code.jump",pinned:t}},this._editor).then(e=>{var t;if(this._ignoreModelChangeEvent=!1,!e||!this._widget){this.closeWidget();return}if(this._editor===e)this._widget.show(n),this._widget.focusOnReferenceTree();else{let i=ee.get(e),o=this._model.clone();this.closeWidget(),e.focus(),null==i||i.toggleWidget(n,(0,t1.PG)(e=>Promise.resolve(o)),null!==(t=this._peekMode)&&void 0!==t&&t)}},e=>{this._ignoreModelChangeEvent=!1,(0,i1.dL)(e)})}openReference(e,t,i){t||this.closeWidget();let{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}};function withController(e,t){let i=getOuterEditor(e);if(!i)return;let n=oB.get(i);n&&t(n)}oB.ID="editor.contrib.referencesController",oB=ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([referencesController_param(2,tq.i6),referencesController_param(3,tW.$),referencesController_param(4,i5.lT),referencesController_param(5,iL.TG),referencesController_param(6,nP.Uy),referencesController_param(7,tj.Ui)],oB),oC.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,tY.gx)(2089,60),when:tq.Ao.or(oF,J.inPeekEditor),handler(e){withController(e,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),oC.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:tq.Ao.or(oF,J.inPeekEditor),handler(e){withController(e,e=>{e.goToNextOrPreviousReference(!0)})}}),oC.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:tq.Ao.or(oF,J.inPeekEditor),handler(e){withController(e,e=>{e.goToNextOrPreviousReference(!1)})}}),tK.P.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),tK.P.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),tK.P.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),tK.P.registerCommand("closeReferenceSearch",e=>withController(e,e=>e.closeWidget())),oC.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:tq.Ao.and(J.inPeekEditor,tq.Ao.not("config.editor.stablePeek"))}),oC.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:tq.Ao.and(oF,tq.Ao.not("config.editor.stablePeek"),tq.Ao.or(tH.u.editorTextFocus,oO.Ul.negate()))}),oC.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:tq.Ao.and(oF,ob.CQ,ob.PS.negate(),ob.uJ.negate()),handler(e){var t;let i=e.get(ob.Lw),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof OneReference&&withController(e,e=>e.revealReference(n[0]))}}),oC.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:tq.Ao.and(oF,ob.CQ,ob.PS.negate(),ob.uJ.negate()),handler(e){var t;let i=e.get(ob.Lw),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof OneReference&&withController(e,e=>e.openReference(n[0],!0,!0))}}),tK.P.registerCommand("openReference",e=>{var t;let i=e.get(ob.Lw),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof OneReference&&withController(e,e=>e.openReference(n[0],!1,!0))});var symbolNavigation_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},symbolNavigation_param=function(e,t){return function(i,n){t(i,n,e)}};let oW=new tq.uy("hasSymbols",!1,(0,tz.NC)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),oV=(0,iL.yh)("ISymbolNavigationService"),oH=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=oW.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){let t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();let i=new oz(this._editorService),n=i.onDidChange(e=>{if(this._ignoreEditorChange)return;let i=this._editorService.getActiveCodeEditor();if(!i)return;let n=i.getModel(),o=i.getPosition();if(!n||!o)return;let r=!1,s=!1;for(let e of t.references)if((0,nL.Xy)(e.uri,n.uri))r=!0,s=s||t4.e.containsPosition(e.range,o);else if(r)break;r&&s||this.reset()});this._currentState=(0,t2.F8)(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;let t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:t4.e.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();let t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,tz.NC)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,tz.NC)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};oH=symbolNavigation_decorate([symbolNavigation_param(0,tq.i6),symbolNavigation_param(1,tW.$),symbolNavigation_param(2,i5.lT),symbolNavigation_param(3,iA.d)],oH),(0,nv.z)(oV,oH,1),(0,tB.fK)(new class extends tB._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:oW,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(oV).revealNext(t)}}),oC.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:oW,primary:9,handler(e){e.get(oV).reset()}});let oz=class{constructor(e){this._listener=new Map,this._disposables=new t2.SL,this._onDidChange=new iM.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,t2.B9)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,t2.F8)(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};async function getLocationLinks(e,t,i,n){let o=i.ordered(e),r=o.map(i=>Promise.resolve(n(i,e,t)).then(void 0,e=>{(0,i1.Cp)(e)})),s=await Promise.all(r);return(0,ia.kX)(s.flat())}function getDefinitionsAtPosition(e,t,i,n){return getLocationLinks(t,i,e,(e,t,i)=>e.provideDefinition(t,i,n))}function getDeclarationsAtPosition(e,t,i,n){return getLocationLinks(t,i,e,(e,t,i)=>e.provideDeclaration(t,i,n))}function getImplementationsAtPosition(e,t,i,n){return getLocationLinks(t,i,e,(e,t,i)=>e.provideImplementation(t,i,n))}function getTypeDefinitionsAtPosition(e,t,i,n){return getLocationLinks(t,i,e,(e,t,i)=>e.provideTypeDefinition(t,i,n))}function getReferencesAtPosition(e,t,i,n,o){return getLocationLinks(t,i,e,async(e,t,i)=>{let r=await e.provideReferences(t,i,{includeDeclaration:!0},o);if(!n||!r||2!==r.length)return r;let s=await e.provideReferences(t,i,{includeDeclaration:!1},o);return s&&1===s.length?s:r})}async function _sortedAndDeduped(e){let t=await e(),i=new ReferencesModel(t,""),n=i.references.map(e=>e.link);return i.dispose(),n}oz=symbolNavigation_decorate([symbolNavigation_param(0,tW.$)],oz),(0,tB.sb)("_executeDefinitionProvider",(e,t,i)=>{let n=e.get(ib.p),o=getDefinitionsAtPosition(n.definitionProvider,t,i,i0.T.None);return _sortedAndDeduped(()=>o)}),(0,tB.sb)("_executeTypeDefinitionProvider",(e,t,i)=>{let n=e.get(ib.p),o=getTypeDefinitionsAtPosition(n.typeDefinitionProvider,t,i,i0.T.None);return _sortedAndDeduped(()=>o)}),(0,tB.sb)("_executeDeclarationProvider",(e,t,i)=>{let n=e.get(ib.p),o=getDeclarationsAtPosition(n.declarationProvider,t,i,i0.T.None);return _sortedAndDeduped(()=>o)}),(0,tB.sb)("_executeReferenceProvider",(e,t,i)=>{let n=e.get(ib.p),o=getReferencesAtPosition(n.referenceProvider,t,i,!1,i0.T.None);return _sortedAndDeduped(()=>o)}),(0,tB.sb)("_executeImplementationProvider",(e,t,i)=>{let n=e.get(ib.p),o=getImplementationsAtPosition(n.implementationProvider,t,i,i0.T.None);return _sortedAndDeduped(()=>o)}),tU.BH.appendMenuItem(tU.eH.EditorContext,{submenu:tU.eH.EditorContextPeek,title:tz.NC("peek.submenu","Peek"),group:"navigation",order:100});let SymbolNavigationAnchor=class SymbolNavigationAnchor{static is(e){return!!e&&"object"==typeof e&&!!(e instanceof SymbolNavigationAnchor||t5.L.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}};let SymbolNavigationAction=class SymbolNavigationAction extends tB.x1{static all(){return SymbolNavigationAction._allSymbolNavigationCommands.values()}static _patchConfig(e){let t={...e,f1:!0};if(t.menu)for(let i of il.$.wrap(t.menu))(i.id===tU.eH.EditorContext||i.id===tU.eH.EditorContextPeek)&&(i.when=tq.Ao.and(e.precondition,i.when));return t}constructor(e,t){super(SymbolNavigationAction._patchConfig(t)),this.configuration=e,SymbolNavigationAction._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,n){if(!t.hasModel())return Promise.resolve(void 0);let o=e.get(i5.lT),r=e.get(tW.$),s=e.get(iN.ek),l=e.get(oV),d=e.get(ib.p),c=e.get(iL.TG),u=t.getModel(),g=t.getPosition(),m=SymbolNavigationAnchor.is(i)?i:new SymbolNavigationAnchor(u,g),f=new iS.Dl(t,5),_=(0,t1.eP)(this._getLocationModel(d,m.model,m.position,f.token),f.token).then(async e=>{var o;let s;if(!e||f.token.isCancellationRequested)return;if((0,tQ.Z9)(e.ariaMessage),e.referenceAt(u.uri,g)){let e=this._getAlternativeCommand(t);!SymbolNavigationAction._activeAlternativeCommands.has(e)&&SymbolNavigationAction._allSymbolNavigationCommands.has(e)&&(s=SymbolNavigationAction._allSymbolNavigationCommands.get(e))}let d=e.references.length;if(0===d){if(!this.configuration.muteMessage){let e=u.getWordAtPosition(g);null===(o=iV.get(t))||void 0===o||o.showMessage(this._getNoResultFoundMessage(e),g)}}else{if(1!==d||!s)return this._onResult(r,l,t,e,n);SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id),c.invokeFunction(e=>s.runEditorCommand(e,t,i,n).finally(()=>{SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id)}))}},e=>{o.error(e)}).finally(()=>{f.dispose()});return s.showWhile(_,250),_}async _onResult(e,t,i,n,o){let r=this._getGoToPreference(i);if(i instanceof n8||!this.configuration.openInPeek&&("peek"!==r||!(n.references.length>1))){let s=n.firstReference(),l=n.references.length>1&&"gotoAndPeek"===r,d=await this._openReference(i,e,s,this.configuration.openToSide,!l);l&&d?this._openInPeek(d,n,o):n.dispose(),"goto"===r&&t.put(s)}else this._openInPeek(i,n,o)}async _openReference(e,t,i,n,o){let r;if((0,ov.vx)(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;let s=await t.openCodeEditor({resource:i.uri,options:{selection:t4.e.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,n);if(s){if(o){let e=s.getModel(),t=s.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{s.getModel()===e&&t.clear()},350)}return s}}_openInPeek(e,t,i){let n=oB.get(e);n&&e.hasModel()?n.toggleWidget(null!=i?i:e.getSelection(),(0,t1.PG)(e=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};SymbolNavigationAction._allSymbolNavigationCommands=new Map,SymbolNavigationAction._activeAlternativeCommands=new Set;let DefinitionAction=class DefinitionAction extends SymbolNavigationAction{async _getLocationModel(e,t,i,n){return new ReferencesModel(await getDefinitionsAtPosition(e.definitionProvider,t,i,n),tz.NC("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?tz.NC("noResultWord","No definition found for '{0}'",e.word):tz.NC("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}};(0,tU.r1)(((et=class extends DefinitionAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:et.id,title:{...tz.vv("actions.goToDecl.label","Go to Definition"),mnemonicTitle:tz.NC({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:tH.u.hasDefinitionProvider,keybinding:[{when:tH.u.editorTextFocus,primary:70,weight:100},{when:tq.Ao.and(tH.u.editorTextFocus,oO.Pf),primary:2118,weight:100}],menu:[{id:tU.eH.EditorContext,group:"navigation",order:1.1},{id:tU.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),tK.P.registerCommandAlias("editor.action.goToDeclaration",et.id)}}).id="editor.action.revealDefinition",et)),(0,tU.r1)(((ei=class extends DefinitionAction{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:ei.id,title:tz.vv("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:tq.Ao.and(tH.u.hasDefinitionProvider,tH.u.isInEmbeddedEditor.toNegated()),keybinding:[{when:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,70),weight:100},{when:tq.Ao.and(tH.u.editorTextFocus,oO.Pf),primary:(0,tY.gx)(2089,2118),weight:100}]}),tK.P.registerCommandAlias("editor.action.openDeclarationToTheSide",ei.id)}}).id="editor.action.revealDefinitionAside",ei)),(0,tU.r1)(((en=class extends DefinitionAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:en.id,title:tz.vv("actions.previewDecl.label","Peek Definition"),precondition:tq.Ao.and(tH.u.hasDefinitionProvider,J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated()),keybinding:{when:tH.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:tU.eH.EditorContextPeek,group:"peek",order:2}}),tK.P.registerCommandAlias("editor.action.previewDeclaration",en.id)}}).id="editor.action.peekDefinition",en));let DeclarationAction=class DeclarationAction extends SymbolNavigationAction{async _getLocationModel(e,t,i,n){return new ReferencesModel(await getDeclarationsAtPosition(e.declarationProvider,t,i,n),tz.NC("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?tz.NC("decl.noResultWord","No declaration found for '{0}'",e.word):tz.NC("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}};(0,tU.r1)(((eo=class extends DeclarationAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:eo.id,title:{...tz.vv("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:tz.NC({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:tq.Ao.and(tH.u.hasDeclarationProvider,tH.u.isInEmbeddedEditor.toNegated()),menu:[{id:tU.eH.EditorContext,group:"navigation",order:1.3},{id:tU.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?tz.NC("decl.noResultWord","No declaration found for '{0}'",e.word):tz.NC("decl.generic.noResults","No declaration found")}}).id="editor.action.revealDeclaration",eo)),(0,tU.r1)(class extends DeclarationAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:tz.vv("actions.peekDecl.label","Peek Declaration"),precondition:tq.Ao.and(tH.u.hasDeclarationProvider,J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated()),menu:{id:tU.eH.EditorContextPeek,group:"peek",order:3}})}});let TypeDefinitionAction=class TypeDefinitionAction extends SymbolNavigationAction{async _getLocationModel(e,t,i,n){return new ReferencesModel(await getTypeDefinitionsAtPosition(e.typeDefinitionProvider,t,i,n),tz.NC("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?tz.NC("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):tz.NC("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}};(0,tU.r1)(((er=class extends TypeDefinitionAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:er.ID,title:{...tz.vv("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:tz.NC({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:tH.u.hasTypeDefinitionProvider,keybinding:{when:tH.u.editorTextFocus,primary:0,weight:100},menu:[{id:tU.eH.EditorContext,group:"navigation",order:1.4},{id:tU.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}).ID="editor.action.goToTypeDefinition",er)),(0,tU.r1)(((es=class extends TypeDefinitionAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:es.ID,title:tz.vv("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:tq.Ao.and(tH.u.hasTypeDefinitionProvider,J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated()),menu:{id:tU.eH.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",es));let ImplementationAction=class ImplementationAction extends SymbolNavigationAction{async _getLocationModel(e,t,i,n){return new ReferencesModel(await getImplementationsAtPosition(e.implementationProvider,t,i,n),tz.NC("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?tz.NC("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):tz.NC("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}};(0,tU.r1)(((ea=class extends ImplementationAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ea.ID,title:{...tz.vv("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:tz.NC({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:tH.u.hasImplementationProvider,keybinding:{when:tH.u.editorTextFocus,primary:2118,weight:100},menu:[{id:tU.eH.EditorContext,group:"navigation",order:1.45},{id:tU.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}).ID="editor.action.goToImplementation",ea)),(0,tU.r1)(((el=class extends ImplementationAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:el.ID,title:tz.vv("actions.peekImplementation.label","Peek Implementations"),precondition:tq.Ao.and(tH.u.hasImplementationProvider,J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated()),keybinding:{when:tH.u.editorTextFocus,primary:3142,weight:100},menu:{id:tU.eH.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",el));let ReferencesAction=class ReferencesAction extends SymbolNavigationAction{_getNoResultFoundMessage(e){return e?tz.NC("references.no","No references found for '{0}'",e.word):tz.NC("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}};(0,tU.r1)(class extends ReferencesAction{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...tz.vv("goToReferences.label","Go to References"),mnemonicTitle:tz.NC({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:tq.Ao.and(tH.u.hasReferenceProvider,J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated()),keybinding:{when:tH.u.editorTextFocus,primary:1094,weight:100},menu:[{id:tU.eH.EditorContext,group:"navigation",order:1.45},{id:tU.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,n){return new ReferencesModel(await getReferencesAtPosition(e.referenceProvider,t,i,!0,n),tz.NC("ref.title","References"))}}),(0,tU.r1)(class extends ReferencesAction{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:tz.vv("references.action.label","Peek References"),precondition:tq.Ao.and(tH.u.hasReferenceProvider,J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated()),menu:{id:tU.eH.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,n){return new ReferencesModel(await getReferencesAtPosition(e.referenceProvider,t,i,!1,n),tz.NC("ref.title","References"))}});let GenericGoToLocationAction=class GenericGoToLocationAction extends SymbolNavigationAction{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:tz.vv("label.generic","Go to Any Symbol"),precondition:tq.Ao.and(J.notInPeekEditor,tH.u.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,n){return new ReferencesModel(this._references,tz.NC("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&tz.NC("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}};tK.P.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ip.o},{name:"position",description:"The position at which to start",constraint:t5.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(e,t,i,n,o,r,s)=>{(0,nR.p_)(ip.o.isUri(t)),(0,nR.p_)(t5.L.isIPosition(i)),(0,nR.p_)(Array.isArray(n)),(0,nR.p_)(void 0===o||"string"==typeof o),(0,nR.p_)(void 0===s||"boolean"==typeof s);let l=e.get(tW.$),d=await l.openCodeEditor({resource:t},l.getFocusedCodeEditor());if((0,o_.CL)(d))return d.setPosition(i),d.revealPositionInCenterIfOutsideViewport(i,0),d.invokeWithinContext(e=>{let t=new class extends GenericGoToLocationAction{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!r,openInPeek:!!s,openToSide:!1},n,o);e.get(iL.TG).invokeFunction(t.run.bind(t),d)})}}),tK.P.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ip.o},{name:"position",description:"The position at which to start",constraint:t5.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(e,t,i,n,o)=>{e.get(tK.H).executeCommand("editor.action.goToLocations",t,i,n,o,void 0,!0)}}),tK.P.registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{(0,nR.p_)(ip.o.isUri(t)),(0,nR.p_)(t5.L.isIPosition(i));let n=e.get(ib.p),o=e.get(tW.$);return o.openCodeEditor({resource:t},o.getFocusedCodeEditor()).then(e=>{if(!(0,o_.CL)(e)||!e.hasModel())return;let t=oB.get(e);if(!t)return;let o=(0,t1.PG)(t=>getReferencesAtPosition(n.referenceProvider,e.getModel(),t5.L.lift(i),!1,t).then(e=>new ReferencesModel(e,tz.NC("ref.title","References")))),r=new t4.e(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(r,o,!1))})}}),tK.P.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var goToDefinitionAtPosition_param=function(e,t){return function(i,n){t(i,n,e)}};let oU=ed=class{constructor(e,t,i,n){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=n,this.toUnhook=new t2.SL,this.toUnhookForKeyboard=new t2.SL,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();let o=new ClickLinkGesture(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([e,t])=>{this.startFindDefinitionFromMouse(e,null!=t?t:void 0)})),this.toUnhook.add(o.onExecute(e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch(e=>{(0,i1.dL)(e)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(ed.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}let i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var t;let i;this.toUnhookForKeyboard.clear();let n=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!n){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return;this.currentWordAtPosition=n;let o=new iS.yy(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,t1.PG)(t=>this.findDefinition(e,t));try{i=await this.previousPromise}catch(e){(0,i1.dL)(e);return}if(!i||!i.length||!o.validate(this.editor)){this.removeLinkDecorations();return}let r=i[0].originSelectionRange?t4.e.lift(i[0].originSelectionRange):new t4.e(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);if(i.length>1){let e=r;for(let{originSelectionRange:t}of i)t&&(e=t4.e.plusRange(e,t));this.addDecoration(e,new tZ.W5().appendText(tz.NC("multipleResults","Click to show {0} definitions.",i.length)))}else{let e=i[0];if(!e.uri)return;this.textModelResolverService.createModelReference(e.uri).then(t=>{if(!t.object||!t.object.textEditorModel){t.dispose();return}let{object:{textEditorModel:i}}=t,{startLineNumber:n}=e.range;if(n<1||n>i.getLineCount()){t.dispose();return}let o=this.getPreviewValue(i,n,e),s=this.languageService.guessLanguageIdByFilepathOrFirstLine(i.uri);this.addDecoration(r,o?new tZ.W5().appendCodeblock(s||"",o):void 0),t.dispose()})}}getPreviewValue(e,t,i){let n=i.range,o=n.endLineNumber-n.startLineNumber;o>=ed.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(e,t));let r=this.stripIndentationFromPreviewRange(e,t,n);return r}stripIndentationFromPreviewRange(e,t,i){let n=e.getLineFirstNonWhitespaceColumn(t),o=n;for(let n=t+1;n<i.endLineNumber;n++){let t=e.getLineFirstNonWhitespaceColumn(n);o=Math.min(o,t)}let r=e.getValueInRange(i).replace(RegExp(`^\\s{${o-1}}`,"gm"),"").trim();return r}getPreviewRangeBasedOnIndentation(e,t){let i=e.getLineFirstNonWhitespaceColumn(t),n=Math.min(e.getLineCount(),t+ed.MAX_SOURCE_PREVIEW_LINES),o=t+1;for(;o<n;o++){let t=e.getLineFirstNonWhitespaceColumn(o);if(i===t)break}return new t4.e(t,1,o+1,1)}addDecoration(e,t){this.linkDecorations.set([{range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}}])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&6===e.target.type&&!((null===(i=e.target.detail.injectedText)||void 0===i?void 0:i.options)instanceof t6.HS)&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){let i=this.editor.getModel();return i?getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider,i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(e=>{let i=!t&&this.editor.getOption(88)&&!this.isInPeekEditor(e),n=new DefinitionAction({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0});return n.run(e)})}isInPeekEditor(e){let t=e.get(tq.i6);return J.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};oU.ID="editor.contrib.gotodefinitionatposition",oU.MAX_SOURCE_PREVIEW_LINES=8,oU=ed=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([goToDefinitionAtPosition_param(1,n6.S),goToDefinitionAtPosition_param(2,n3.O),goToDefinitionAtPosition_param(3,ib.p)],oU),(0,tB._K)(oU.ID,oU,2);var oK=i(95678);let HoverResult=class HoverResult{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}};let HoverOperation=class HoverOperation extends t2.JT{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new iM.Q5),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new t1.pY(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new t1.pY(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new t1.pY(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,t1.zS)(e=>this._computer.computeAsync(e)),(async()=>{try{for await(let e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(3===this._state||4===this._state)&&this._setState(0)}catch(e){(0,i1.dL)(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){3===this._state&&this._setState(4)}_fireResult(){if(1===this._state||2===this._state)return;let e=0===this._state,t=4===this._state;this._onResult.fire(new HoverResult(this._result.slice(0),e,t))}start(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}};let HoverRangeAnchor=class HoverRangeAnchor{constructor(e,t,i,n){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=n,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}};let HoverForeignElementAnchor=class HoverForeignElementAnchor{constructor(e,t,i,n,o,r){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=n,this.initialMousePosY=o,this.supportsMarkerHover=r,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}};let oj=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};let ResizableHTMLElement=class ResizableHTMLElement{constructor(){let e;this._onDidWillResize=new iM.Q5,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new iM.Q5,this.onDidResize=this._onDidResize.event,this._sashListener=new t2.SL,this._size=new tO.Ro(0,0),this._minSize=new tO.Ro(0,0),this._maxSize=new tO.Ro(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new oe.g(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new oe.g(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new oe.g(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:oe.l.North}),this._southSash=new oe.g(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:oe.l.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let t=0,i=0;this._sashListener.add(iM.ju.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{void 0===e&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(iM.ju.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{void 0!==e&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(n=>{e&&(i=n.currentX-n.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(n=>{e&&(i=-(n.currentX-n.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(n=>{e&&(t=-(n.currentY-n.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(n=>{e&&(t=n.currentY-n.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(iM.ju.any(this._eastSash.onDidReset,this._westSash.onDidReset)(e=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(iM.ju.any(this._northSash.onDidReset,this._southSash.onDidReset)(e=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,n){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=n?3:0}layout(e=this.size.height,t=this.size.width){let{height:i,width:n}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(n,Math.min(r,t));let s=new tO.Ro(t,e);tO.Ro.equals(s,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=s,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}};let ResizableContentWidget=class ResizableContentWidget extends t2.JT{constructor(e,t=new tO.Ro(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new ResizableHTMLElement),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=tO.Ro.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(e=>{this._resize(new tO.Ro(e.dimension.width,e.dimension.height)),e.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(null===(e=this._contentPosition)||void 0===e?void 0:e.position)?t5.L.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){let t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;let n=tO.i(t);return n.top+i.top-30}_availableVerticalSpaceBelow(e){let t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;let n=tO.i(t),o=tO.D6(t.ownerDocument.body),r=n.top+i.top+i.height;return o.height-r-24}_findPositionPreference(e,t){var i,n;let o;let r=Math.min(null!==(i=this._availableVerticalSpaceBelow(t))&&void 0!==i?i:1/0,e),s=Math.min(null!==(n=this._availableVerticalSpaceAbove(t))&&void 0!==n?n:1/0,e),l=Math.min(e,Math.min(Math.max(s,r),e));return 1==(o=this._editor.getOption(60).above?l<=s?1:2:l<=r?2:1)?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),o}_resize(e){this._resizableNode.layout(e.height,e.width)}};var contentHover_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},contentHover_param=function(e,t){return function(i,n){t(i,n,e)}};let oq=tO.$,o$=eh=class extends t2.JT{constructor(e,t,i){for(let n of(super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._widget=this._register(this._instantiationService.createInstance(oG,this._editor)),this._participants=[],oj.getAll()))this._participants.push(this._instantiationService.createInstance(n,this._editor));this._participants.sort((e,t)=>e.hoverOrdinal-t.hoverOrdinal),this._computer=new ContentHoverComputer(this._editor,this._participants),this._hoverOperation=this._register(new HoverOperation(this._editor,this._computer)),this._register(this._hoverOperation.onResult(e=>{if(!this._computer.anchor)return;let t=e.hasLoadingMessage?this._addLoadingMessage(e.value):e.value;this._withResult(new contentHover_HoverResult(this._computer.anchor,t,e.isComplete))})),this._register(tO.mu(this._widget.getDomNode(),"keydown",e=>{e.equals(9)&&this.hide()})),this._register(ov.RW.onDidChange(()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,n,o){if(!this._widget.position||!this._currentResult)return!!e&&(this._startHoverOperationIfNecessary(e,t,i,n,!1),!0);let r=this._editor.getOption(60).sticky,s=r&&o&&this._widget.isMouseGettingCloser(o.event.posx,o.event.posy);return s?(e&&this._startHoverOperationIfNecessary(e,t,i,n,!0),!0):e?!!(e&&this._currentResult.anchor.equals(e))||(e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?this._setCurrentResult(this._currentResult.filter(e)):this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,n,o){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=n,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=o,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&0===e.messages.length&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}_addLoadingMessage(e){if(this._computer.anchor){for(let t of this._participants)if(t.createLoadingMessage){let i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}}return e}_withResult(e){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!e.isComplete||this._computer.insistOnKeepingHoverVisible&&0===e.messages.length)||this._setCurrentResult(e)}_renderMessages(e,t){let{showAtPosition:i,showAtSecondaryPosition:n,highlightRange:o}=eh.computeHoverRanges(this._editor,e.range,t),r=new t2.SL,s=r.add(new oQ(this._keybindingService)),l=document.createDocumentFragment(),d=null,c={fragment:l,statusBar:s,setColorPicker:e=>d=e,onContentsChanged:()=>this._widget.onContentsChanged(),setMinimumDimensions:e=>this._widget.setMinimumDimensions(e),hide:()=>this.hide()};for(let e of this._participants){let i=t.filter(t=>t.owner===e);i.length>0&&r.add(e.renderHoverParts(c,i))}let u=t.some(e=>e.isBeforeContent);if(s.hasContent&&l.appendChild(s.hoverElement),l.hasChildNodes()){if(o){let e=this._editor.createDecorationsCollection();e.set([{range:o,options:eh._DECORATION_OPTIONS}]),r.add((0,t2.OF)(()=>{e.clear()}))}this._widget.showAt(l,new ContentHoverVisibleData(e.initialMousePosX,e.initialMousePosY,d,i,n,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,u,r))}else r.dispose()}static computeHoverRanges(e,t,i){let n=1;if(e.hasModel()){let i=e._getViewModel(),o=i.coordinatesConverter,r=o.convertModelRangeToViewRange(t),s=new t5.L(r.startLineNumber,i.getLineMinColumn(r.startLineNumber));n=o.convertViewPositionToModelPosition(s).column}let o=t.startLineNumber,r=t.startColumn,s=i[0].range,l=null;for(let e of i)s=t4.e.plusRange(s,e.range),e.range.startLineNumber===o&&e.range.endLineNumber===o&&(r=Math.max(Math.min(r,e.range.startColumn),n)),e.forceShowAtRange&&(l=e.range);let d=l?l.getStartPosition():new t5.L(o,t.startColumn),c=l?l.getStartPosition():new t5.L(o,r);return{showAtPosition:d,showAtSecondaryPosition:c,highlightRange:s}}showsOrWillShow(e){if(this._widget.isResizing)return!0;let t=[];for(let i of this._participants)if(i.suggestHoverAnchor){let n=i.suggestHoverAnchor(e);n&&t.push(n)}let i=e.target;if(6===i.type&&t.push(new HoverRangeAnchor(0,i.range,e.event.posx,e.event.posy)),7===i.type){let n=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!i.detail.isAfterLines&&"number"==typeof i.detail.horizontalDistanceToText&&i.detail.horizontalDistanceToText<n&&t.push(new HoverRangeAnchor(0,i.range,e.event.posx,e.event.posy))}return 0===t.length?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort((e,t)=>t.priority-e.priority),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,i,n){this._startShowingOrUpdateHover(new HoverRangeAnchor(0,e,void 0,void 0),t,i,n,null)}containsNode(e){return!!e&&this._widget.getDomNode().contains(e)}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}get widget(){return this._widget}};o$._DECORATION_OPTIONS=t6.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),o$=eh=contentHover_decorate([contentHover_param(1,iL.TG),contentHover_param(2,iA.d)],o$);let contentHover_HoverResult=class contentHover_HoverResult{constructor(e,t,i){this.anchor=e,this.messages=t,this.isComplete=i}filter(e){let t=this.messages.filter(t=>t.isValidForHoverAnchor(e));return t.length===this.messages.length?this:new FilteredHoverResult(this,this.anchor,t,this.isComplete)}};let FilteredHoverResult=class FilteredHoverResult extends contentHover_HoverResult{constructor(e,t,i,n){super(t,i,n),this.original=e}filter(e){return this.original.filter(e)}};let ContentHoverVisibleData=class ContentHoverVisibleData{constructor(e,t,i,n,o,r,s,l,d,c){this.initialMousePosX=e,this.initialMousePosY=t,this.colorPicker=i,this.showAtPosition=n,this.showAtSecondaryPosition=o,this.preferAbove=r,this.stoleFocus=s,this.source=l,this.isBeforeContent=d,this.disposables=c,this.closestMouseDistance=void 0}};let oG=ec=class extends ResizableContentWidget{get isColorPickerVisible(){var e;return!!(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}get isVisibleFromKeyboard(){var e;return(null===(e=this._visibleData)||void 0===e?void 0:e.source)===1}get isVisible(){var e;return null!==(e=this._hoverVisibleKey.get())&&void 0!==e&&e}get isFocused(){var e;return null!==(e=this._hoverFocusedKey.get())&&void 0!==e&&e}constructor(e,t,i,n,o){let r=e.getOption(67)+8,s=new tO.Ro(150,r);super(e,s),this._configurationService=i,this._accessibilityService=n,this._keybindingService=o,this._hover=this._register(new oK.c8),this._minimumSize=s,this._hoverVisibleKey=tH.u.hoverVisible.bindTo(t),this._hoverFocusedKey=tH.u.hoverFocused.bindTo(t),tO.R3(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(50)&&this._updateFont()}));let l=this._register(tO.go(this._resizableNode.domNode));this._register(l.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(l.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setHoverData(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),null===(e=this._visibleData)||void 0===e||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return ec.ID}static _applyDimensions(e,t,i){let n="number"==typeof t?`${t}px`:t,o="number"==typeof i?`${i}px`:i;e.style.width=n,e.style.height=o}_setContentsDomNodeDimensions(e,t){let i=this._hover.contentsDomNode;return ec._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){let i=this._hover.containerDomNode;return ec._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){let n="number"==typeof t?`${t}px`:t,o="number"==typeof i?`${i}px`:i;e.style.maxWidth=n,e.style.maxHeight=o}_setHoverWidgetMaxDimensions(e,t){ec._applyMaxDimensions(this._hover.contentsDomNode,e,t),ec._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth","number"==typeof e?`${e}px`:e),this._layoutContentWidget()}_hasHorizontalScrollbar(){let e=this._hover.scrollbar.getScrollDimensions(),t=e.scrollWidth>e.width;return t}_adjustContentsBottomPadding(){let e=this._hover.contentsDomNode,t=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;e.style.paddingBottom!==t&&(e.style.paddingBottom=t)}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");let t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._setContentsDomNodeDimensions(t,i-10))}_updateResizableNodeMaxDimensions(){var e,t;let i=null!==(e=this._findMaximumRenderingWidth())&&void 0!==e?e:1/0,n=null!==(t=this._findMaximumRenderingHeight())&&void 0!==t?t:1/0;this._resizableNode.maxSize=new tO.Ro(i,n),this._setHoverWidgetMaxDimensions(i,n)}_resize(e){var t,i;ec._lastDimensions=new tO.Ro(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),null===(i=null===(t=this._visibleData)||void 0===t?void 0:t.colorPicker)||void 0===i||i.layout()}_findAvailableSpaceVertically(){var e;let t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition;if(t)return 1===this._positionPreference?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){let e=this._findAvailableSpaceVertically();if(!e)return;let t=6;return Array.from(this._hover.contentsDomNode.children).forEach(e=>{t+=e.clientHeight}),this._hasHorizontalScrollbar()&&(t+=10),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");let e=Array.from(this._hover.contentsDomNode.children).some(e=>e.scrollWidth>e.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;let e=this._isHoverTextOverflowing(),t=void 0===this._contentWidth?0:this._contentWidth-2;if(!e&&!(this._hover.containerDomNode.clientWidth<t))return this._hover.containerDomNode.clientWidth+2;{let e=tO.D6(this._hover.containerDomNode.ownerDocument.body).width;return e-14}}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(void 0===this._visibleData.initialMousePosX||void 0===this._visibleData.initialMousePosY)return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;let i=tO.i(this.getDomNode());void 0===this._visibleData.closestMouseDistance&&(this._visibleData.closestMouseDistance=computeDistanceFromPointToRectangle(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,i.left,i.top,i.width,i.height));let n=computeDistanceFromPointToRectangle(e,t,i.left,i.top,i.width,i.height);return!(n>this._visibleData.closestMouseDistance+4)&&(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,n),!0)}_setHoverData(e){var t;null===(t=this._visibleData)||void 0===t||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){let{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`;let n=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));n.forEach(e=>this._editor.applyFontInfo(e))}_updateContent(e){let t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){let e=Math.max(this._editor.getLayoutInfo().height/4,250,ec._lastDimensions.height),t=Math.max(.66*this._editor.getLayoutInfo().width,500,ec._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[null!==(e=this._positionPreference)&&void 0!==e?e:1]}:null}showAt(e,t){var i,n,o,r;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);let s=tO.wn(this._hover.containerDomNode),l=t.showAtPosition;this._positionPreference=null!==(i=this._findPositionPreference(s,l))&&void 0!==i?i:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),null===(n=t.colorPicker)||void 0===n||n.layout();let d=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode,c=d&&(0,oK.uX)(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null!==(r=null===(o=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===o?void 0:o.getAriaLabel())&&void 0!==r?r:"");c&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+c)}hide(){if(!this._visibleData)return;let e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new tO.Ro(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){let e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}_adjustHoverHeightForScrollbar(e){var t;let i=this._hover.containerDomNode,n=this._hover.contentsDomNode,o=null!==(t=this._findMaximumRenderingHeight())&&void 0!==t?t:1/0;this._setContainerDomNodeDimensions(tO.w(i),Math.min(o,e)),this._setContentsDomNodeDimensions(tO.w(n),Math.min(o,e-10))}setMinimumDimensions(e){this._minimumSize=new tO.Ro(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){let e=void 0===this._contentWidth?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new tO.Ro(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();let t=this._hover.containerDomNode,i=tO.wn(t),n=tO.w(t);if(this._resizableNode.layout(i,n),this._setHoverWidgetDimensions(n,i),i=tO.wn(t),n=tO.w(t),this._contentWidth=n,this._updateMinimumWidth(),this._resizableNode.layout(i,n),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._adjustHoverHeightForScrollbar(i)),null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition){let e=tO.wn(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(e,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){let e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-30})}scrollRight(){let e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+30})}pageUp(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};oG.ID="editor.contrib.resizableContentHoverWidget",oG._lastDimensions=new tO.Ro(0,0),oG=ec=contentHover_decorate([contentHover_param(1,tq.i6),contentHover_param(2,tj.Ui),contentHover_param(3,n9.F),contentHover_param(4,iA.d)],oG);let oQ=class extends t2.JT{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=oq("div.hover-row.status-bar"),this.actionsElement=tO.R3(this.hoverElement,oq("div.actions"))}addAction(e){let t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(oK.Sr.render(this.actionsElement,e,i))}append(e){let t=tO.R3(this.actionsElement,e);return this._hasContent=!0,t}};oQ=contentHover_decorate([contentHover_param(0,iA.d)],oQ);let ContentHoverComputer=class ContentHoverComputer{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(1!==t.type&&!t.supportsMarkerHover)return[];let i=e.getModel(),n=t.range.startLineNumber;if(n>i.getLineCount())return[];let o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(e=>{if(e.options.isWholeLine)return!0;let i=e.range.startLineNumber===n?e.range.startColumn:1,r=e.range.endLineNumber===n?e.range.endColumn:o;if(e.options.showIfCollapsed){if(i>t.range.startColumn+1||t.range.endColumn-1>r)return!1}else if(i>t.range.startColumn||t.range.endColumn>r)return!1;return!0})}computeAsync(e){let t=this._anchor;if(!this._editor.hasModel()||!t)return t1.Aq.EMPTY;let i=ContentHoverComputer._getLineDecorations(this._editor,t);return t1.Aq.merge(this._participants.map(n=>n.computeAsync?n.computeAsync(t,i,e):t1.Aq.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];let e=ContentHoverComputer._getLineDecorations(this._editor,this._anchor),t=[];for(let i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,ia.kX)(t)}};function computeDistanceFromPointToRectangle(e,t,i,n,o,r){let s=Math.max(Math.abs(e-(i+o/2))-o/2,0),l=Math.max(Math.abs(t-(n+r/2))-r/2,0);return Math.sqrt(s*s+l*l)}let oZ=tO.$;let MarginHoverWidget=class MarginHoverWidget extends t2.JT{constructor(e,t,i){super(),this._renderDisposeables=this._register(new t2.SL),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new oK.c8),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new iB.$({editor:this._editor},t,i)),this._computer=new MarginHoverComputer(this._editor),this._hoverOperation=this._register(new HoverOperation(this._editor,this._computer)),this._register(this._hoverOperation.onResult(e=>{this._withResult(e.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(50)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return MarginHoverWidget.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){let e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e,t){(this._computer.lineNumber!==e||this._computer.lane!==t)&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();let i=document.createDocumentFragment();for(let e of t){let t=oZ("div.hover-row.markdown-hover"),n=tO.R3(t,oZ("div.hover-contents")),o=this._renderDisposeables.add(this._markdownRenderer.render(e.value));n.appendChild(o.element),i.appendChild(t)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));let t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),o=this._editor.getOption(67),r=this._hover.containerDomNode.clientHeight,s=t.glyphMarginLeft+t.glyphMarginWidth+("lineNo"===this._computer.lane?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${s}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(i-n-(r-o)/2),0)}px`}};MarginHoverWidget.ID="editor.contrib.modesGlyphHoverWidget";let MarginHoverComputer=class MarginHoverComputer{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=t3.U.Center}computeSync(){var e,t;let toHoverMessage=e=>({value:e}),i=this._editor.getLineDecorations(this._lineNumber),n=[],o="lineNo"===this._laneOrLine;if(!i)return n;for(let r of i){let i=null!==(t=null===(e=r.options.glyphMargin)||void 0===e?void 0:e.position)&&void 0!==t?t:t3.U.Center;if(!o&&i!==this._laneOrLine)continue;let s=o?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;!s||(0,tZ.CP)(s)||n.push(...(0,ia._2)(s).map(toHoverMessage))}return n}};let HoverProviderResult=class HoverProviderResult{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}};async function executeProvider(e,t,i,n,o){try{let r=await Promise.resolve(e.provideHover(i,n,o));if(r&&isValid(r))return new HoverProviderResult(e,r,t)}catch(e){(0,i1.Cp)(e)}}function getHover(e,t,i,n){let o=e.ordered(t),r=o.map((e,o)=>executeProvider(e,o,t,i,n));return t1.Aq.fromPromises(r).coalesce()}function getHoverPromise(e,t,i,n){return getHover(e,t,i,n).map(e=>e.hover).toPromise()}function isValid(e){let t=void 0!==e.range,i=void 0!==e.contents&&e.contents&&e.contents.length>0;return t&&i}(0,tB.sb)("_executeHoverProvider",(e,t,i)=>{let n=e.get(ib.p);return getHoverPromise(n.hoverProvider,t,i,i0.T.None)});var markdownHoverParticipant_param=function(e,t){return function(i,n){t(i,n,e)}};let oY=tO.$;let MarkdownHover=class MarkdownHover{constructor(e,t,i,n,o){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=n,this.ordinal=o}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};let oJ=class{constructor(e,t,i,n,o){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=n,this._languageFeaturesService=o,this.hoverOrdinal=3}createLoadingMessage(e){return new MarkdownHover(this,e.range,[new tZ.W5().appendText(tz.NC("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];let i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[],s=1e3,l=i.getLineLength(n),d=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._editor.getOption(117),u=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d}),g=!1;c>=0&&l>c&&e.range.startColumn>=c&&(g=!0,r.push(new MarkdownHover(this,e.range,[{value:tz.NC("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,s++))),!g&&"number"==typeof u&&l>=u&&r.push(new MarkdownHover(this,e.range,[{value:tz.NC("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,s++));let m=!1;for(let i of t){let t=i.range.startLineNumber===n?i.range.startColumn:1,l=i.range.endLineNumber===n?i.range.endColumn:o,d=i.options.hoverMessage;if(!d||(0,tZ.CP)(d))continue;i.options.beforeContentClassName&&(m=!0);let c=new t4.e(e.range.startLineNumber,t,e.range.startLineNumber,l);r.push(new MarkdownHover(this,c,(0,ia._2)(d),m,s++))}return r}computeAsync(e,t,i){if(!this._editor.hasModel()||1!==e.type)return t1.Aq.EMPTY;let n=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(n))return t1.Aq.EMPTY;let o=new t5.L(e.range.startLineNumber,e.range.startColumn);return getHover(this._languageFeaturesService.hoverProvider,n,o,i).filter(e=>!(0,tZ.CP)(e.hover.contents)).map(t=>{let i=t.hover.range?t4.e.lift(t.hover.range):e.range;return new MarkdownHover(this,i,t.hover.contents,!1,t.ordinal)})}renderHoverParts(e,t){return renderMarkdownHovers(e,t,this._editor,this._languageService,this._openerService)}};function renderMarkdownHovers(e,t,i,n,o){t.sort((e,t)=>e.ordinal-t.ordinal);let r=new t2.SL;for(let s of t)for(let t of s.contents){if((0,tZ.CP)(t))continue;let s=oY("div.hover-row.markdown-hover"),l=tO.R3(s,oY("div.hover-contents")),d=r.add(new iB.$({editor:i},n,o));r.add(d.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",e.onContentsChanged()}));let c=r.add(d.render(t));l.appendChild(c.element),e.fragment.appendChild(s)}return r}oJ=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([markdownHoverParticipant_param(1,n3.O),markdownHoverParticipant_param(2,iW.v),markdownHoverParticipant_param(3,tj.Ui),markdownHoverParticipant_param(4,ib.p)],oJ);var oX=i(1039),o0=i(68324),markerNavigationService_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},markerNavigationService_param=function(e,t){return function(i,n){t(i,n,e)}};let MarkerCoordinate=class MarkerCoordinate{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}};let o1=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new iM.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new t2.SL,this._markers=[],this._nextIdx=-1,ip.o.isUri(e)?this._resourceFilter=t=>t.toString()===e.toString():e&&(this._resourceFilter=e);let n=this._configService.getValue("problems.sortOrder"),compareMarker=(e,t)=>{let i=(0,iy.qu)(e.resource.toString(),t.resource.toString());return 0===i&&(i="position"===n?t4.e.compareRangesUsingStarts(e,t)||ny.ZL.compare(e.severity,t.severity):ny.ZL.compare(e.severity,t.severity)||t4.e.compareRangesUsingStarts(e,t)),i},updateMarker=()=>{this._markers=this._markerService.read({resource:ip.o.isUri(e)?e:void 0,severities:ny.ZL.Error|ny.ZL.Warning|ny.ZL.Info}),"function"==typeof e&&(this._markers=this._markers.filter(e=>this._resourceFilter(e.resource))),this._markers.sort(compareMarker)};updateMarker(),this._dispoables.add(t.onMarkerChanged(e=>{(!this._resourceFilter||e.some(e=>this._resourceFilter(e)))&&(updateMarker(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!!this._resourceFilter&&!!e&&this._resourceFilter(e)}get selected(){let e=this._markers[this._nextIdx];return e&&new MarkerCoordinate(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex(t=>t.resource.toString()===e.uri.toString());o<0&&(o=(0,ia.ry)(this._markers,{resource:e.uri},(e,t)=>(0,iy.qu)(e.resource.toString(),t.resource.toString())))<0&&(o=~o);for(let i=o;i<this._markers.length;i++){let o=t4.e.lift(this._markers[i]);if(o.isEmpty()){let t=e.getWordAtPosition(o.getStartPosition());t&&(o=new t4.e(o.startLineNumber,t.startColumn,o.startLineNumber,t.endColumn))}if(t&&(o.containsPosition(t)||t.isBeforeOrEqual(o.getStartPosition()))){this._nextIdx=i,n=!0;break}if(this._markers[i].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let n=this._nextIdx;return -1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(t=>t.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(t4.e.containsPosition(this._markers[i],t))return new MarkerCoordinate(this._markers[i],i+1,this._markers.length)}}};o1=markerNavigationService_decorate([markerNavigationService_param(1,ny.lT),markerNavigationService_param(2,tj.Ui)],o1);let o2=(0,iL.yh)("IMarkerNavigationService"),o5=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new o0.S}getMarkerList(e){for(let t of this._provider){let i=t.getMarkerList(e);if(i)return i}return new o1(e,this._markerService,this._configService)}};o5=markerNavigationService_decorate([markerNavigationService_param(0,ny.lT),markerNavigationService_param(1,tj.Ui)],o5),(0,nv.z)(o2,o5,1);var o4=i(80064);i(31815),i(41668);var o3=i(37466);!function(e){function className(e){switch(e){case o3.Z.Ignore:return"severity-ignore "+iw.k.asClassName(tF.l.info);case o3.Z.Info:return iw.k.asClassName(tF.l.info);case o3.Z.Warning:return iw.k.asClassName(tF.l.warning);case o3.Z.Error:return iw.k.asClassName(tF.l.error);default:return""}}e.className=className}(eu||(eu={}));var gotoErrorWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let gotoErrorWidget_MessageWidget=class gotoErrorWidget_MessageWidget{constructor(e,t,i,n,o){this._openerService=n,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new t2.SL,this._editor=t;let r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(tO.mu(this._relatedBlock,"click",e=>{e.preventDefault();let t=this._relatedDiagnostics.get(e.target);t&&i(t)})),this._scrollable=new o4.NB(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(e=>{r.style.left=`-${e.scrollLeft}px`,r.style.top=`-${e.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){(0,t2.B9)(this._disposables)}update(e){let{source:t,message:i,relatedInformation:n,code:o}=e,r=((null==t?void 0:t.length)||0)+2;o&&("string"==typeof o?r+=o.length:r+=o.value.length);let s=(0,iy.uq)(i);for(let e of(this._lines=s.length,this._longestLineLength=0,s))this._longestLineLength=Math.max(e.length+r,this._longestLineLength);tO.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(let e of s)(l=document.createElement("div")).innerText=e,""===e&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){let e=document.createElement("span");if(e.classList.add("details"),l.appendChild(e),t){let i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(o){if("string"==typeof o){let t=document.createElement("span");t.innerText=`(${o})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=tO.$("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};let t=tO.R3(this._codeLink,tO.$("span"));t.innerText=o.value,e.appendChild(this._codeLink)}}}if(tO.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,ia.Of)(n)){let e=this._relatedBlock.appendChild(document.createElement("div"));for(let t of(e.style.paddingTop=`${Math.floor(.66*this._editor.getOption(67))}px`,this._lines+=1,n)){let i=document.createElement("div"),n=document.createElement("a");n.classList.add("filename"),n.innerText=`${this._labelService.getUriBasenameLabel(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,n.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(n,t);let o=document.createElement("span");o.innerText=t.message,i.appendChild(n),i.appendChild(o),this._lines+=1,e.appendChild(i)}}let d=this._editor.getOption(50),c=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case ny.ZL.Error:t=tz.NC("Error","Error");break;case ny.ZL.Warning:t=tz.NC("Warning","Warning");break;case ny.ZL.Info:t=tz.NC("Info","Info");break;case ny.ZL.Hint:t=tz.NC("Hint","Hint")}let i=tz.NC("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){let t=n.getLineContent(e.startLineNumber);i=`${t}, ${i}`}return i}};let o6=eg=class extends od{constructor(e,t,i,n,o,r,s){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=r,this._labelService=s,this._callOnDispose=new t2.SL,this._onDidSelectRelatedInformation=new iM.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=ny.ZL.Warning,this._backgroundColor=nU.Il.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(rs);let t=re,i=rt;this._severity===ny.ZL.Warning?(t=ri,i=rn):this._severity===ny.ZL.Info&&(t=ro,i=rr);let n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(oc),secondaryHeadingColor:e.getColor(ou)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e=>this.editor.focus()));let t=[],i=this._menuService.createMenu(eg.TitleMenu,this._contextKeyService);(0,oo.vr)(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=tO.R3(e,tO.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new gotoErrorWidget_MessageWidget(this._container,this.editor,e=>this._onDidSelectRelatedInformation.fire(e),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=t4.e.lift(e),o=this.editor.getPosition(),r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());let s=this.editor.getModel();if(s){let e=i>1?tz.NC("problems","{0} of {1} problems",t,i):tz.NC("change","{0} of {1} problem",t,i);this.setTitle((0,nL.EZ)(s.uri),e)}this._icon.className=`codicon ${eu.className(ny.ZL.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};o6.TitleMenu=new tU.eH("gotoErrorTitleMenu"),o6=eg=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([gotoErrorWidget_param(1,t9.XE),gotoErrorWidget_param(2,iW.v),gotoErrorWidget_param(3,tU.co),gotoErrorWidget_param(4,iL.TG),gotoErrorWidget_param(5,tq.i6),gotoErrorWidget_param(6,oE.e)],o6);let o7=(0,t7.kwl)(t7.lXJ,t7.b6y),o9=(0,t7.kwl)(t7.uoC,t7.pW3),o8=(0,t7.kwl)(t7.c63,t7.T83),re=(0,t7.P6G)("editorMarkerNavigationError.background",{dark:o7,light:o7,hcDark:t7.lRK,hcLight:t7.lRK},tz.NC("editorMarkerNavigationError","Editor marker navigation widget error color.")),rt=(0,t7.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,t7.ZnX)(re,.1),light:(0,t7.ZnX)(re,.1),hcDark:null,hcLight:null},tz.NC("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),ri=(0,t7.P6G)("editorMarkerNavigationWarning.background",{dark:o9,light:o9,hcDark:t7.lRK,hcLight:t7.lRK},tz.NC("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),rn=(0,t7.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,t7.ZnX)(ri,.1),light:(0,t7.ZnX)(ri,.1),hcDark:"#0C141F",hcLight:(0,t7.ZnX)(ri,.2)},tz.NC("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),ro=(0,t7.P6G)("editorMarkerNavigationInfo.background",{dark:o8,light:o8,hcDark:t7.lRK,hcLight:t7.lRK},tz.NC("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),rr=(0,t7.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,t7.ZnX)(ro,.1),light:(0,t7.ZnX)(ro,.1),hcDark:null,hcLight:null},tz.NC("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),rs=(0,t7.P6G)("editorMarkerNavigation.background",{dark:t7.cvW,light:t7.cvW,hcDark:t7.cvW,hcLight:t7.cvW},tz.NC("editorMarkerNavigationBackground","Editor marker navigation widget background."));var gotoError_param=function(e,t){return function(i,n){t(i,n,e)}};let ra=ep=class{static get(e){return e.getContribution(ep.ID)}constructor(e,t,i,n,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=o,this._sessionDispoables=new t2.SL,this._editor=e,this._widgetVisible=rl.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(o6,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e=>{var t,i,n;(null===(t=this._model)||void 0===t?void 0:t.selected)&&t4.e.containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(n=this._model)||void 0===n||n.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;let e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:t4.e.lift(e).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){let t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new t5.L(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,n;if(this._editor.hasModel()){let o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();let r=await this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&(null===(i=ep.get(r))||void 0===i||i.close(),null===(n=ep.get(r))||void 0===n||n.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}};ra.ID="editor.contrib.markerController",ra=ep=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([gotoError_param(1,o2),gotoError_param(2,tq.i6),gotoError_param(3,tW.$),gotoError_param(4,iL.TG)],ra);let MarkerNavigationAction=class MarkerNavigationAction extends tB.R6{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&(null===(i=ra.get(t))||void 0===i||i.nagivate(this._next,this._multiFile))}};let NextMarkerAction=class NextMarkerAction extends MarkerNavigationAction{constructor(){super(!0,!1,{id:NextMarkerAction.ID,label:NextMarkerAction.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:578,weight:100},menuOpts:{menuId:o6.TitleMenu,title:NextMarkerAction.LABEL,icon:(0,n1.q5)("marker-navigation-next",tF.l.arrowDown,tz.NC("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};NextMarkerAction.ID="editor.action.marker.next",NextMarkerAction.LABEL=tz.NC("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");let PrevMarkerAction=class PrevMarkerAction extends MarkerNavigationAction{constructor(){super(!1,!1,{id:PrevMarkerAction.ID,label:PrevMarkerAction.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:1602,weight:100},menuOpts:{menuId:o6.TitleMenu,title:PrevMarkerAction.LABEL,icon:(0,n1.q5)("marker-navigation-previous",tF.l.arrowUp,tz.NC("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};PrevMarkerAction.ID="editor.action.marker.prev",PrevMarkerAction.LABEL=tz.NC("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");let NextMarkerInFilesAction=class NextMarkerInFilesAction extends MarkerNavigationAction{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:tz.NC("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:66,weight:100},menuOpts:{menuId:tU.eH.MenubarGoMenu,title:tz.NC({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}};let PrevMarkerInFilesAction=class PrevMarkerInFilesAction extends MarkerNavigationAction{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:tz.NC("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:1090,weight:100},menuOpts:{menuId:tU.eH.MenubarGoMenu,title:tz.NC({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}};(0,tB._K)(ra.ID,ra,4),(0,tB.Qr)(NextMarkerAction),(0,tB.Qr)(PrevMarkerAction),(0,tB.Qr)(NextMarkerInFilesAction),(0,tB.Qr)(PrevMarkerInFilesAction);let rl=new tq.uy("markersNavigationVisible",!1),rd=tB._l.bindToContribution(ra.get);(0,tB.fK)(new rd({id:"closeMarkersNavigation",precondition:rl,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:tH.u.focus,primary:9,secondary:[1033]}}));var markerHoverParticipant_param=function(e,t){return function(i,n){t(i,n,e)}};let rh=tO.$;let MarkerHover=class MarkerHover{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};let rc={type:1,filter:{include:CodeActionKind.QuickFix},triggerAction:U.QuickFixHover},ru=class{constructor(e,t,i,n){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=n,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type&&!e.supportsMarkerHover)return[];let i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(let s of t){let t=s.range.startLineNumber===n?s.range.startColumn:1,l=s.range.endLineNumber===n?s.range.endColumn:o,d=this._markerDecorationsService.getMarker(i.uri,s);if(!d)continue;let c=new t4.e(e.range.startLineNumber,t,e.range.startLineNumber,l);r.push(new MarkerHover(this,c,d))}return r}renderHoverParts(e,t){if(!t.length)return t2.JT.None;let i=new t2.SL;t.forEach(t=>e.fragment.appendChild(this.renderMarkerHover(t,i)));let n=1===t.length?t[0]:t.sort((e,t)=>ny.ZL.compare(e.marker.severity,t.marker.severity))[0];return this.renderMarkerStatusbar(e,n,i),i}renderMarkerHover(e,t){let i=rh("div.hover-row"),n=tO.R3(i,rh("div.marker.hover-contents")),{source:o,message:r,code:s,relatedInformation:l}=e.marker;this._editor.applyFontInfo(n);let d=tO.R3(n,rh("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=r,o||s){if(s&&"string"!=typeof s){let e=rh("span");if(o){let t=tO.R3(e,rh("span"));t.innerText=o}let i=tO.R3(e,rh("a.code-link"));i.setAttribute("href",s.target.toString()),t.add(tO.nm(i,"click",e=>{this._openerService.open(s.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}));let r=tO.R3(i,rh("span"));r.innerText=s.value;let l=tO.R3(n,e);l.style.opacity="0.6",l.style.paddingLeft="6px"}else{let e=tO.R3(n,rh("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=o&&s?`${o}(${s})`:o||`(${s})`}}if((0,ia.Of)(l))for(let{message:e,resource:i,startLineNumber:o,startColumn:r}of l){let s=tO.R3(n,rh("div"));s.style.marginTop="8px";let l=tO.R3(s,rh("a"));l.innerText=`${(0,nL.EZ)(i)}(${o}, ${r}): `,l.style.cursor="pointer",t.add(tO.nm(l,"click",e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(i,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:o,startColumn:r}}}).catch(i1.dL)}));let d=tO.R3(s,rh("span"));d.innerText=e,this._editor.applyFontInfo(d)}return i}renderMarkerStatusbar(e,t,i){if(t.marker.severity===ny.ZL.Error||t.marker.severity===ny.ZL.Warning||t.marker.severity===ny.ZL.Info){let i=ra.get(this._editor);i&&e.statusBar.addAction({label:tz.NC("view problem","View Problem"),commandId:NextMarkerAction.ID,run:()=>{e.hide(),i.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(91)){let n=e.statusBar.append(rh("div"));this.recentMarkerCodeActionsInfo&&(ny.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===ny.H0.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=tz.NC("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);let o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?t2.JT.None:(0,t1.Vg)(()=>n.textContent=tz.NC("checkingForQuickFixes","Checking for quick fixes..."),200,i);n.textContent||(n.textContent=String.fromCharCode(160));let r=this.getCodeActions(t.marker);i.add((0,t2.OF)(()=>r.cancel())),r.then(r=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:r.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){r.dispose(),n.textContent=tz.NC("noQuickFixes","No quick fixes available");return}n.style.display="none";let s=!1;i.add((0,t2.OF)(()=>{s||r.dispose()})),e.statusBar.addAction({label:tz.NC("quick fixes","Quick Fix..."),commandId:i6,run:t=>{s=!0;let i=nE.get(this._editor),n=tO.i(t);e.hide(),null==i||i.showCodeActions(rc,r,{x:n.left,y:n.top,width:n.width,height:n.height})}})},i1.dL)}}getCodeActions(e){return(0,t1.PG)(t=>getCodeActions(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new t4.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),rc,iN.Ex.None,t))}};ru=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([markerHoverParticipant_param(1,oX.i),markerHoverParticipant_param(2,iW.v),markerHoverParticipant_param(3,ib.p)],ru);var rg=i(48953),rp=i(98557);i(1691);let rm="editor.action.inlineSuggest.commit",rf="editor.action.inlineSuggest.showPrevious",r_="editor.action.inlineSuggest.showNext";var rv=i(19950),inlineCompletionsHintsWidget_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},inlineCompletionsHintsWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let rC=class extends t2.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>"always"===this.editor.getOption(62).showToolbar),this.sessionPosition=void 0,this.position=(0,rp.nK)(this,e=>{var t,i,n;let o=null===(t=this.model.read(e))||void 0===t?void 0:t.primaryGhostText.read(e);if(!this.alwaysShowToolbar.read(e)||!o||0===o.parts.length)return this.sessionPosition=void 0,null;let r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);let s=new t5.L(o.lineNumber,Math.min(r,null!==(n=null===(i=this.sessionPosition)||void 0===i?void 0:i.column)&&void 0!==n?n:Number.MAX_SAFE_INTEGER));return this.sessionPosition=s,s}),this._register((0,rp.gp)((t,i)=>{let n=this.model.read(t);if(!n||!this.alwaysShowToolbar.read(t))return;let o=i.add(this.instantiationService.createInstance(ry,this.editor,!0,this.position,n.selectedInlineCompletionIndex,n.inlineCompletionsCount,n.selectedInlineCompletion.map(e=>{var t;return null!==(t=null==e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]})));e.addContentWidget(o),i.add((0,t2.OF)(()=>e.removeContentWidget(o))),i.add((0,rp.EH)(e=>{let t=this.position.read(e);t&&n.lastTriggerKind.read(e)!==ov.bw.Explicit&&n.triggerExplicitly()}))}))}};rC=inlineCompletionsHintsWidget_decorate([inlineCompletionsHintsWidget_param(2,iL.TG)],rC);let rb=(0,n1.q5)("inline-suggestion-hints-next",tF.l.chevronRight,(0,tz.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),rS=(0,n1.q5)("inline-suggestion-hints-previous",tF.l.chevronLeft,(0,tz.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),ry=em=class extends t2.JT{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){let n=new iT.aU(e,t,i,!0,()=>this._commandService.executeCommand(e)),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService),r=t;return o&&(r=(0,tz.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),n.tooltip=r,n}constructor(e,t,i,n,o,r,s,l,d,c,u){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=n,this._suggestionCount=o,this._extraCommands=r,this._commandService=s,this.keybindingService=d,this._contextKeyService=c,this._menuService=u,this.id=`InlineSuggestionHintsContentWidget${em.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,tO.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,tO.h)("div@toolBar")]),this.previousAction=this.createCommandAction(rf,(0,tz.NC)("previous","Previous"),iw.k.asClassName(rS)),this.availableSuggestionCountAction=new iT.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(r_,(0,tz.NC)("next","Next"),iw.k.asClassName(rb)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(tU.eH.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new t1.pY(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new t1.pY(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.lastCommands=[],this.toolBar=this._register(l.createInstance(rw,this.nodes.toolBar,tU.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>{if(e instanceof tU.U8)return l.createInstance(StatusBarViewItem,e,void 0);if(e===this.availableSuggestionCountAction){let t=new ActionViewItemWithClassName(void 0,e,{label:!0,icon:!1});return t.setClass("availableSuggestionCount"),t}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(e=>{em._dropDownVisible=e})),this._register((0,rp.EH)(e=>{this._position.read(e),this.editor.layoutContentWidget(this)})),this._register((0,rp.EH)(e=>{let t=this._suggestionCount.read(e),i=this._currentSuggestionIdx.read(e);void 0!==t?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${i+1}/${t}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),void 0!==t&&t>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register((0,rp.EH)(e=>{let t=this._extraCommands.read(e);if((0,ia.fS)(this.lastCommands,t))return;this.lastCommands=t;let i=t.map(e=>({class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:t=>this._commandService.executeCommand(e.id)}));for(let[e,t]of this.inlineCompletionsActionsMenus.getActions())for(let e of t)e instanceof tU.U8&&i.push(e);i.length>0&&i.unshift(new iT.Z0),this.toolBar.setAdditionalSecondaryActions(i)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};ry._dropDownVisible=!1,ry.id=0,ry=em=inlineCompletionsHintsWidget_decorate([inlineCompletionsHintsWidget_param(6,tK.H),inlineCompletionsHintsWidget_param(7,iL.TG),inlineCompletionsHintsWidget_param(8,iA.d),inlineCompletionsHintsWidget_param(9,tq.i6),inlineCompletionsHintsWidget_param(10,tU.co)],ry);let ActionViewItemWithClassName=class ActionViewItemWithClassName extends rg.gU{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}};let StatusBarViewItem=class StatusBarViewItem extends oo.Mm{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){let t=(0,tO.h)("div.keybinding").root,i=new nc.e(t,io.OS,{disableTitle:!0,...nc.F});i.set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}};let rw=class extends rv.T{constructor(e,t,i,n,o,r,s,l){super(e,{resetMenu:t,...i},n,o,r,s,l),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,i,n,o,r,s;let l=[],d=[];(0,oo.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:l,secondary:d},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(o=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(s=null===(r=this.options2)||void 0===r?void 0:r.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),d.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,d)}setPrependedPrimaryActions(e){(0,ia.fS)(this.prependedPrimaryActions,e,(e,t)=>e===t)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){(0,ia.fS)(this.additionalActions,e,(e,t)=>e===t)||(this.additionalActions=e,this.updateToolbar())}};rw=inlineCompletionsHintsWidget_decorate([inlineCompletionsHintsWidget_param(3,tU.co),inlineCompletionsHintsWidget_param(4,tq.i6),inlineCompletionsHintsWidget_param(5,iR.i),inlineCompletionsHintsWidget_param(6,iA.d),inlineCompletionsHintsWidget_param(7,i4.b)],rw),i(58555);var hover_param=function(e,t){return function(i,n){t(i,n,e)}};let rL=ef=class extends t2.JT{constructor(e,t,i,n,o){super(),this._editor=e,this._instantiationService=t,this._openerService=i,this._languageService=n,this._keybindingService=o,this._listenersStore=new t2.SL,this._hoverState={mouseDown:!1,contentHoverFocused:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new t1.pY(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(ef.ID)}_hookListeners(){let e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.delay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._listenersStore.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))):(this._listenersStore.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._listenersStore.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))),this._listenersStore.add(this._editor.onMouseLeave(e=>this._onEditorMouseLeave(e))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){var t;this._hoverState.mouseDown=!0;let i=e.target;if(9===i.type&&i.detail===oG.ID){this._hoverState.contentHoverFocused=!0;return}(12!==i.type||i.detail!==MarginHoverWidget.ID)&&(12!==i.type&&(this._hoverState.contentHoverFocused=!1),null!==(t=this._contentWidget)&&void 0!==t&&t.widget.isResizing||this._hideWidgets())}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){var t,i;this._cancelScheduler();let n=e.event.browserEvent.relatedTarget;(null===(t=this._contentWidget)||void 0===t?void 0:t.widget.isResizing)||(null===(i=this._contentWidget)||void 0===i?void 0:i.containsNode(n))||this._hideWidgets()}_isMouseOverWidget(e){var t,i,n,o,r;let s=e.target,l=this._hoverSettings.sticky;return!!(l&&9===s.type&&s.detail===oG.ID||l&&(null===(t=this._contentWidget)||void 0===t?void 0:t.containsNode(null===(i=e.event.browserEvent.view)||void 0===i?void 0:i.document.activeElement))&&!(null===(o=null===(n=e.event.browserEvent.view)||void 0===n?void 0:n.getSelection())||void 0===o?void 0:o.isCollapsed))||!l&&9===s.type&&s.detail===oG.ID&&null!==(r=this._contentWidget)&&void 0!==r&&!!r.isColorPickerVisible||!!l&&12===s.type&&s.detail===MarginHoverWidget.ID}_onEditorMouseMove(e){var t,i,n,o;if(this._mouseMoveEvent=e,(null===(t=this._contentWidget)||void 0===t?void 0:t.isFocused)||(null===(i=this._contentWidget)||void 0===i?void 0:i.isResizing)||this._hoverState.mouseDown&&this._hoverState.contentHoverFocused)return;let r=this._hoverSettings.sticky;if(r&&(null===(n=this._contentWidget)||void 0===n?void 0:n.isVisibleFromKeyboard))return;let s=this._isMouseOverWidget(e);if(s){this._reactToEditorMouseMoveRunner.cancel();return}let l=this._hoverSettings.hidingDelay;if((null===(o=this._contentWidget)||void 0===o?void 0:o.isVisible)&&r&&l>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(l);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var t,i,n,o;if(!e)return;let r=e.target,s=null===(t=r.element)||void 0===t?void 0:t.classList.contains("colorpicker-color-decoration"),l=this._editor.getOption(147),d=this._hoverSettings.enabled,c=this._hoverState.activatedByDecoratorClick;if(s&&("click"===l&&!c||"hover"===l&&!d||"clickAndHover"===l&&!d&&!c)||!s&&!d&&!c){this._hideWidgets();return}let u=this._getOrCreateContentWidget();if(u.showsOrWillShow(e)){null===(i=this._glyphWidget)||void 0===i||i.hide();return}if(2===r.type&&r.position&&r.detail.glyphMarginLane){null===(n=this._contentWidget)||void 0===n||n.hide();let e=this._getOrCreateGlyphWidget();e.startShowingAt(r.position.lineNumber,r.detail.glyphMarginLane);return}if(3===r.type&&r.position){null===(o=this._contentWidget)||void 0===o||o.hide();let e=this._getOrCreateGlyphWidget();e.startShowingAt(r.position.lineNumber,"lineNo");return}this._hideWidgets()}_onKeyDown(e){var t;if(!this._editor.hasModel())return;let i=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=1===i.kind||2===i.kind&&"editor.action.showHover"===i.commandId&&(null===(t=this._contentWidget)||void 0===t?void 0:t.isVisible);5===e.keyCode||6===e.keyCode||57===e.keyCode||4===e.keyCode||n||this._hideWidgets()}_hideWidgets(){var e,t,i;this._hoverState.mouseDown&&this._hoverState.contentHoverFocused&&null!==(e=this._contentWidget)&&void 0!==e&&e.isColorPickerVisible||ry.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,this._hoverState.contentHoverFocused=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(o$,this._editor)),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=new MarginHoverWidget(this._editor,this._languageService,this._openerService)),this._glyphWidget}showContentHover(e,t,i,n,o=!1){this._hoverState.activatedByDecoratorClick=o,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,n)}focus(){var e;null===(e=this._contentWidget)||void 0===e||e.focus()}scrollUp(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollUp()}scrollDown(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollDown()}scrollLeft(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollLeft()}scrollRight(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollRight()}pageUp(){var e;null===(e=this._contentWidget)||void 0===e||e.pageUp()}pageDown(){var e;null===(e=this._contentWidget)||void 0===e||e.pageDown()}goToTop(){var e;null===(e=this._contentWidget)||void 0===e||e.goToTop()}goToBottom(){var e;null===(e=this._contentWidget)||void 0===e||e.goToBottom()}get isColorPickerVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isVisible}dispose(){var e,t;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};rL.ID="editor.contrib.hover",rL=ef=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([hover_param(1,iL.TG),hover_param(2,iW.v),hover_param(3,n3.O),hover_param(4,iA.d)],rL),(C=e_||(e_={})).NoAutoFocus="noAutoFocus",C.FocusIfVisible="focusIfVisible",C.AutoFocusImmediately="autoFocusImmediately";let ShowOrFocusHoverAction=class ShowOrFocusHoverAction extends tB.R6{constructor(){super({id:"editor.action.showHover",label:tz.NC({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[e_.NoAutoFocus,e_.FocusIfVisible,e_.AutoFocusImmediately],enumDescriptions:[tz.NC("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),tz.NC("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),tz.NC("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:e_.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;let n=rL.get(t);if(!n)return;let o=null==i?void 0:i.focus,r=e_.FocusIfVisible;Object.values(e_).includes(o)?r=o:"boolean"==typeof o&&o&&(r=e_.AutoFocusImmediately);let showContentHover=e=>{let i=t.getPosition(),o=new t4.e(i.lineNumber,i.column,i.lineNumber,i.column);n.showContentHover(o,1,1,e)},s=2===t.getOption(2);n.isHoverVisible?r!==e_.NoAutoFocus?n.focus():showContentHover(s):showContentHover(s||r===e_.AutoFocusImmediately)}};let ShowDefinitionPreviewHoverAction=class ShowDefinitionPreviewHoverAction extends tB.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:tz.NC({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=rL.get(t);if(!i)return;let n=t.getPosition();if(!n)return;let o=new t4.e(n.lineNumber,n.column,n.lineNumber,n.column),r=oU.get(t);if(!r)return;let s=r.startFindDefinitionFromCursor(n);s.then(()=>{i.showContentHover(o,1,1,!0)})}};let ScrollUpHoverAction=class ScrollUpHoverAction extends tB.R6{constructor(){super({id:"editor.action.scrollUpHover",label:tz.NC({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:16,weight:100}})}run(e,t){let i=rL.get(t);i&&i.scrollUp()}};let ScrollDownHoverAction=class ScrollDownHoverAction extends tB.R6{constructor(){super({id:"editor.action.scrollDownHover",label:tz.NC({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:18,weight:100}})}run(e,t){let i=rL.get(t);i&&i.scrollDown()}};let ScrollLeftHoverAction=class ScrollLeftHoverAction extends tB.R6{constructor(){super({id:"editor.action.scrollLeftHover",label:tz.NC({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:15,weight:100}})}run(e,t){let i=rL.get(t);i&&i.scrollLeft()}};let ScrollRightHoverAction=class ScrollRightHoverAction extends tB.R6{constructor(){super({id:"editor.action.scrollRightHover",label:tz.NC({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:17,weight:100}})}run(e,t){let i=rL.get(t);i&&i.scrollRight()}};let PageUpHoverAction=class PageUpHoverAction extends tB.R6{constructor(){super({id:"editor.action.pageUpHover",label:tz.NC({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:11,secondary:[528],weight:100}})}run(e,t){let i=rL.get(t);i&&i.pageUp()}};let PageDownHoverAction=class PageDownHoverAction extends tB.R6{constructor(){super({id:"editor.action.pageDownHover",label:tz.NC({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:12,secondary:[530],weight:100}})}run(e,t){let i=rL.get(t);i&&i.pageDown()}};let GoToTopHoverAction=class GoToTopHoverAction extends tB.R6{constructor(){super({id:"editor.action.goToTopHover",label:tz.NC({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(e,t){let i=rL.get(t);i&&i.goToTop()}};let GoToBottomHoverAction=class GoToBottomHoverAction extends tB.R6{constructor(){super({id:"editor.action.goToBottomHover",label:tz.NC({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:tH.u.hoverFocused,kbOpts:{kbExpr:tH.u.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(e,t){let i=rL.get(t);i&&i.goToBottom()}};(0,tB._K)(rL.ID,rL,2),(0,tB.Qr)(ShowOrFocusHoverAction),(0,tB.Qr)(ShowDefinitionPreviewHoverAction),(0,tB.Qr)(ScrollUpHoverAction),(0,tB.Qr)(ScrollDownHoverAction),(0,tB.Qr)(ScrollLeftHoverAction),(0,tB.Qr)(ScrollRightHoverAction),(0,tB.Qr)(PageUpHoverAction),(0,tB.Qr)(PageDownHoverAction),(0,tB.Qr)(GoToTopHoverAction),(0,tB.Qr)(GoToBottomHoverAction),oj.register(oJ),oj.register(ru),(0,t9.Ic)((e,t)=>{let i=e.getColor(t7.CNo);i&&(t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`))});let ColorContribution=class ColorContribution extends t2.JT{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(e=>this.onMouseDown(e)))}dispose(){super.dispose()}onMouseDown(e){let t=this._editor.getOption(147);if("click"!==t&&"clickAndHover"!==t)return;let i=e.target;if(6!==i.type||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==nZ||!i.range)return;let n=this._editor.getContribution(rL.ID);if(n&&!n.isColorPickerVisible){let e=new t4.e(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);n.showContentHover(e,1,0,!1,!0)}}};ColorContribution.ID="editor.contrib.colorContribution",(0,tB._K)(ColorContribution.ID,ColorContribution,2),oj.register(n5);var standaloneColorPickerWidget_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},standaloneColorPickerWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let rk=ev=class extends t2.JT{constructor(e,t,i,n,o,r,s){super(),this._editor=e,this._modelService=i,this._keybindingService=n,this._instantiationService=o,this._languageFeatureService=r,this._languageConfigurationService=s,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=tH.u.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=tH.u.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new rD(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}insertColor(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}static get(e){return e.getContribution(ev.ID)}};rk.ID="editor.contrib.standaloneColorPickerController",rk=ev=standaloneColorPickerWidget_decorate([standaloneColorPickerWidget_param(1,tq.i6),standaloneColorPickerWidget_param(2,i2.q),standaloneColorPickerWidget_param(3,iA.d),standaloneColorPickerWidget_param(4,iL.TG),standaloneColorPickerWidget_param(5,ib.p),standaloneColorPickerWidget_param(6,n$.c_)],rk),(0,tB._K)(rk.ID,rk,1);let rD=eC=class extends t2.JT{constructor(e,t,i,n,o,r,s,l){var d;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._modelService=o,this._keybindingService=r,this._languageFeaturesService=s,this._languageConfigurationService=l,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new iM.Q5),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=n.createInstance(n4,this._editor),this._position=null===(d=this._editor._getViewModel())||void 0===d?void 0:d.getPrimaryCursorState().modelState.position;let c=this._editor.getSelection(),u=c?{startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(tO.go(this._body));this._register(g.onDidBlur(e=>{this.hide()})),this._register(g.onDidFocus(e=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(e=>{var t;let i=null===(t=e.target.element)||void 0===t?void 0:t.classList;i&&i.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(e=>{this._render(e.value,e.foundInEditor)})),this._start(u),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return eC.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;let e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){let t=await this._computeAsync(e);t&&this._onResult.fire(new StandaloneColorPickerResult(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;let t=await this._standaloneColorPickerParticipant.createColorHover({range:e,color:{red:0,green:0,blue:0,alpha:1}},new DefaultDocumentColorProvider(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return t?{result:t.colorHover,foundInEditor:t.foundInEditor}:null}_render(e,t){let i;let n=document.createDocumentFragment(),o=this._register(new oQ(this._keybindingService));if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts({fragment:n,statusBar:o,setColorPicker:e=>i=e,onContentsChanged:()=>{},hide:()=>this.hide()},[e])),void 0===i)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(n),i.layout();let r=i.body,s=r.saturationBox.domNode.clientWidth,l=r.domNode.clientWidth-s-22-8,d=i.body.enterButton;null==d||d.onClicked(()=>{this.updateEditor(),this.hide()});let c=i.header,u=c.pickedColorNode;u.style.width=s+8+"px";let g=c.originalColorNode;g.style.width=l+"px";let m=i.header.closeButton;null==m||m.onClicked(()=>{this.hide()}),t&&(d&&(d.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};rD.ID="editor.contrib.standaloneColorPickerWidget",rD=eC=standaloneColorPickerWidget_decorate([standaloneColorPickerWidget_param(3,iL.TG),standaloneColorPickerWidget_param(4,i2.q),standaloneColorPickerWidget_param(5,iA.d),standaloneColorPickerWidget_param(6,ib.p),standaloneColorPickerWidget_param(7,n$.c_)],rD);let StandaloneColorPickerResult=class StandaloneColorPickerResult{constructor(e,t){this.value=e,this.foundInEditor=t}};let ShowOrFocusStandaloneColorPicker=class ShowOrFocusStandaloneColorPicker extends tB.x1{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...(0,tz.vv)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,tz.NC)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:tU.eH.CommandPalette}]})}runEditorCommand(e,t){var i;null===(i=rk.get(t))||void 0===i||i.showOrFocus()}};let HideStandaloneColorPicker=class HideStandaloneColorPicker extends tB.R6{constructor(){super({id:"editor.action.hideColorPicker",label:(0,tz.NC)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:tH.u.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var i;null===(i=rk.get(t))||void 0===i||i.hide()}};let InsertColorWithStandaloneColorPicker=class InsertColorWithStandaloneColorPicker extends tB.R6{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,tz.NC)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:tH.u.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var i;null===(i=rk.get(t))||void 0===i||i.insertColor()}};(0,tB.Qr)(HideStandaloneColorPicker),(0,tB.Qr)(InsertColorWithStandaloneColorPicker),(0,tU.r1)(ShowOrFocusStandaloneColorPicker);var rx=i(78659);let BlockCommentCommand=class BlockCommentCommand{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;let n=t.length,o=e.length;if(i+n>o)return!1;for(let o=0;o<n;o++){let n=e.charCodeAt(i+o),r=t.charCodeAt(o);if(n!==r&&(!(n>=65)||!(n<=90)||n+32!==r)&&(!(r>=65)||!(r<=90)||r+32!==n))return!1}return!0}_createOperationsForBlockComment(e,t,i,n,o,r){let s;let l=e.startLineNumber,d=e.startColumn,c=e.endLineNumber,u=e.endColumn,g=o.getLineContent(l),m=o.getLineContent(c),f=g.lastIndexOf(t,d-1+t.length),_=m.indexOf(i,u-1-i.length);if(-1!==f&&-1!==_){if(l===c){let e=g.substring(f+t.length,_);e.indexOf(i)>=0&&(f=-1,_=-1)}else{let e=g.substring(f+t.length),n=m.substring(0,_);(e.indexOf(i)>=0||n.indexOf(i)>=0)&&(f=-1,_=-1)}}for(let o of(-1!==f&&-1!==_?(n&&f+t.length<g.length&&32===g.charCodeAt(f+t.length)&&(t+=" "),n&&_>0&&32===m.charCodeAt(_-1)&&(i=" "+i,_-=1),s=BlockCommentCommand._createRemoveBlockCommentOperations(new t4.e(l,f+t.length+1,c,_+1),t,i)):(s=BlockCommentCommand._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=1===s.length?i:null),s))r.addTrackedEditOperation(o.range,o.text)}static _createRemoveBlockCommentOperations(e,t,i){let n=[];return t4.e.isEmpty(e)?n.push(rx.h.delete(new t4.e(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(n.push(rx.h.delete(new t4.e(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),n.push(rx.h.delete(new t4.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),n}static _createAddBlockCommentOperations(e,t,i,n){let o=[];return t4.e.isEmpty(e)?o.push(rx.h.replace(new t4.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(rx.h.insert(new t5.L(e.startLineNumber,e.startColumn),t+(n?" ":""))),o.push(rx.h.insert(new t5.L(e.endLineNumber,e.endColumn),(n?" ":"")+i))),o}getEditOperations(e,t){let i=this._selection.startLineNumber,n=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);let o=e.getLanguageIdAtPosition(i,n),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;r&&r.blockCommentStartToken&&r.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){let i=t.getInverseEditOperations();if(2===i.length){let e=i[0],t=i[1];return new tJ.Y(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{let e=i[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new tJ.Y(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}};let LineCommentCommand=class LineCommentCommand{constructor(e,t,i,n,o,r,s){this.languageConfigurationService=e,this._selection=t,this._tabSize=i,this._type=n,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,i,n){e.tokenization.tokenizeIfCheap(t);let o=e.getLanguageIdAtPosition(t,1),r=n.getLanguageConfiguration(o).comments,s=r?r.lineCommentToken:null;if(!s)return null;let l=[];for(let e=0,n=i-t+1;e<n;e++)l[e]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return l}static _analyzeLines(e,t,i,n,o,r,s,l){let d,c=!0;d=0===e||1!==e;for(let l=0,u=n.length;l<u;l++){let u=n[l],g=o+l;if(g===o&&s){u.ignore=!0;continue}let m=i.getLineContent(g),f=iy.LC(m);if(-1===f){u.ignore=r,u.commentStrOffset=m.length;continue}if(c=!1,u.ignore=!1,u.commentStrOffset=f,d&&!BlockCommentCommand._haystackHasNeedleAtOffset(m,u.commentStr,f)&&(0===e?d=!1:1===e||(u.ignore=!0)),d&&t){let e=f+u.commentStrLength;e<m.length&&32===m.charCodeAt(e)&&(u.commentStrLength+=1)}}if(0===e&&c){d=!1;for(let e=0,t=n.length;e<t;e++)n[e].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:n}}static _gatherPreflightData(e,t,i,n,o,r,s,l){let d=LineCommentCommand._gatherPreflightCommentStrings(i,n,o,l);return null===d?{supported:!1}:LineCommentCommand._analyzeLines(e,t,i,d,n,r,s,l)}_executeLineComments(e,t,i,n){let o;i.shouldRemoveComments?o=LineCommentCommand._createRemoveLineCommentsOperations(i.lines,n.startLineNumber):(LineCommentCommand._normalizeInsertionPoint(e,i.lines,n.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(i.lines,n.startLineNumber));let r=new t5.L(n.positionLineNumber,n.positionColumn);for(let i=0,n=o.length;i<n;i++)if(t.addEditOperation(o[i].range,o[i].text),t4.e.isEmpty(o[i].range)&&t4.e.getStartPosition(o[i].range).equals(r)){let t=e.getLineContent(r.lineNumber);t.length+1===r.column&&(this._deltaColumn=(o[i].text||"").length)}this._selectionId=t.trackSelection(n)}_attemptRemoveBlockComment(e,t,i,n){let o=t.startLineNumber,r=t.endLineNumber,s=n.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),l=e.getLineContent(o).lastIndexOf(i,s-1),d=e.getLineContent(r).indexOf(n,t.endColumn-1-i.length);return(-1!==l&&-1===d&&(d=e.getLineContent(o).indexOf(n,l+i.length),r=o),-1===l&&-1!==d&&(l=e.getLineContent(r).lastIndexOf(i,d),o=r),t.isEmpty()&&(-1===l||-1===d)&&-1!==(l=e.getLineContent(o).indexOf(i))&&(d=e.getLineContent(o).indexOf(n,l+i.length)),-1!==l&&32===e.getLineContent(o).charCodeAt(l+i.length)&&(i+=" "),-1!==d&&32===e.getLineContent(r).charCodeAt(d-1)&&(n=" "+n,d-=1),-1!==l&&-1!==d)?BlockCommentCommand._createRemoveBlockCommentOperations(new t4.e(o,l+i.length+1,r,d+1),i,n):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);let n=e.getLanguageIdAtPosition(i.startLineNumber,1),o=this.languageConfigurationService.getLanguageConfiguration(n).comments;if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;let r=o.blockCommentStartToken,s=o.blockCommentEndToken,l=this._attemptRemoveBlockComment(e,i,r,s);if(!l){if(i.isEmpty()){let t=e.getLineContent(i.startLineNumber),n=iy.LC(t);-1===n&&(n=t.length),l=BlockCommentCommand._createAddBlockCommentOperations(new t4.e(i.startLineNumber,n+1,i.startLineNumber,t.length+1),r,s,this._insertSpace)}else l=BlockCommentCommand._createAddBlockCommentOperations(new t4.e(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,s,this._insertSpace);1===l.length&&(this._deltaColumn=r.length+1)}for(let e of(this._selectionId=t.trackSelection(i),l))t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new t4.e(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":"\n"),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=LineCommentCommand._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return n.supported?this._executeLineComments(e,t,n,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new tJ.Y(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let i=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];o.ignore||i.push(rx.h.delete(new t4.e(t+n,o.commentStrOffset+1,t+n,o.commentStrOffset+o.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){let i=[],n=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){let r=e[o];r.ignore||i.push(rx.h.insert(new t5.L(t+o,r.commentStrOffset+1),r.commentStr+n))}return i}static nextVisibleColumn(e,t,i,n){return i?e+(t-e%t):e+n}static _normalizeInsertionPoint(e,t,i,n){let o,r,s=1073741824;for(let o=0,r=t.length;o<r;o++){if(t[o].ignore)continue;let r=e.getLineContent(i+o),l=0;for(let e=0,i=t[o].commentStrOffset;l<s&&e<i;e++)l=LineCommentCommand.nextVisibleColumn(l,n,9===r.charCodeAt(e),1);l<s&&(s=l)}s=Math.floor(s/n)*n;for(let l=0,d=t.length;l<d;l++){if(t[l].ignore)continue;let d=e.getLineContent(i+l),c=0;for(o=0,r=t[l].commentStrOffset;c<s&&o<r;o++)c=LineCommentCommand.nextVisibleColumn(c,n,9===d.charCodeAt(o),1);c>s?t[l].commentStrOffset=o-1:t[l].commentStrOffset=o}}};let CommentLineAction=class CommentLineAction extends tB.R6{constructor(e,t){super(t),this._type=e}run(e,t){let i=e.get(n$.c_);if(!t.hasModel())return;let n=t.getModel(),o=[],r=n.getOptions(),s=t.getOption(23),l=t.getSelections().map((e,t)=>({selection:e,index:t,ignoreFirstLine:!1}));l.sort((e,t)=>t4.e.compareRangesUsingStarts(e.selection,t.selection));let d=l[0];for(let e=1;e<l.length;e++){let t=l[e];d.selection.endLineNumber===t.selection.startLineNumber&&(d.index<t.index?t.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=t))}for(let e of l)o.push(new LineCommentCommand(i,e.selection,r.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}};let ToggleCommentLineAction=class ToggleCommentLineAction extends CommentLineAction{constructor(){super(0,{id:"editor.action.commentLine",label:tz.NC("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:tU.eH.MenubarEditMenu,group:"5_insert",title:tz.NC({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}};let AddLineCommentAction=class AddLineCommentAction extends CommentLineAction{constructor(){super(1,{id:"editor.action.addCommentLine",label:tz.NC("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2081),weight:100}})}};let RemoveLineCommentAction=class RemoveLineCommentAction extends CommentLineAction{constructor(){super(2,{id:"editor.action.removeCommentLine",label:tz.NC("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2099),weight:100}})}};let BlockCommentAction=class BlockCommentAction extends tB.R6{constructor(){super({id:"editor.action.blockComment",label:tz.NC("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:tU.eH.MenubarEditMenu,group:"5_insert",title:tz.NC({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){let i=e.get(n$.c_);if(!t.hasModel())return;let n=t.getOption(23),o=[],r=t.getSelections();for(let e of r)o.push(new BlockCommentCommand(e,n.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}};(0,tB.Qr)(ToggleCommentLineAction),(0,tB.Qr)(AddLineCommentAction),(0,tB.Qr)(RemoveLineCommentAction),(0,tB.Qr)(BlockCommentAction);var rN=i(32693),contextmenu_param=function(e,t){return function(i,n){t(i,n,e)}};let rE=eb=class{static get(e){return e.getContribution(eb.ID)}constructor(e,t,i,n,o,r,s,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=o,this._menuService=r,this._configurationService=s,this._workspaceContextService=l,this._toDispose=new t2.SL,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(e=>this._onContextMenu(e))),this._toDispose.add(this._editor.onMouseWheel(e=>{if(this._contextMenuIsBeingShownCount>0){let t=this._contextViewService.getContextViewElement(),i=e.srcElement;i.shadowRoot&&tO.Ay(t)===i.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(e=>{this._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(12===e.target.type||6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(let i of this._editor.getSelections())if(i.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;let t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?tU.eH.SimpleEditorContext:tU.eH.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){let i=[],n=this._menuService.createMenu(t,this._contextKeyService),o=n.getActions({arg:e.uri});for(let t of(n.dispose(),o)){let[,n]=t,o=0;for(let t of n)if(t instanceof tU.NZ){let n=this._getMenuActions(e,t.item.submenu);n.length>0&&(i.push(new iT.wY(t.id,t.label,n)),o++)}else i.push(t),o++;o&&i.push(new iT.Z0)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;let i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let n=t;if(!n){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),t=tO.i(this._editor.getDomNode()),i=t.left+e.left,o=t.top+e.top+e.height;n={x:i,y:o}}let o=this._editor.getOption(127)&&!io.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getDomNode():void 0,getAnchor:()=>n,getActions:()=>e,getActionViewItem:e=>{let t=this._keybindingFor(e);return t?new rg.gU(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0}):"function"==typeof e.getActionViewItem?e.getActionViewItem():new rg.gU(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||(0,rN.x)(this._workspaceContextService.getWorkspace()))return;let t=this._editor.getOption(73),i=0,createAction=e=>({id:`menu-action-${++i}`,label:e.label,tooltip:"",class:void 0,enabled:void 0===e.enabled||e.enabled,checked:e.checked,run:e.run}),createSubmenuAction=(e,t)=>new iT.wY(`menu-action-${++i}`,e,t,void 0),createEnumAction=(e,t,i,n,o)=>{if(!t)return createAction({label:e,enabled:t,run:()=>{}});let createRunner=e=>()=>{this._configurationService.updateValue(i,e)},r=[];for(let e of o)r.push(createAction({label:e.label,checked:n===e.value,run:createRunner(e.value)}));return createSubmenuAction(e,r)},n=[];n.push(createAction({label:tz.NC("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),n.push(new iT.Z0),n.push(createAction({label:tz.NC("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),n.push(createEnumAction(tz.NC("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:tz.NC("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:tz.NC("context.minimap.size.fill","Fill"),value:"fill"},{label:tz.NC("context.minimap.size.fit","Fit"),value:"fit"}])),n.push(createEnumAction(tz.NC("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:tz.NC("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:tz.NC("context.minimap.slider.always","Always"),value:"always"}]));let o=this._editor.getOption(127)&&!io.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>n,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};rE.ID="editor.contrib.contextmenu",rE=eb=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([contextmenu_param(1,iR.i),contextmenu_param(2,iR.u),contextmenu_param(3,tq.i6),contextmenu_param(4,iA.d),contextmenu_param(5,tU.co),contextmenu_param(6,tj.Ui),contextmenu_param(7,rN.ec)],rE);let ShowContextMenu=class ShowContextMenu extends tB.R6{constructor(){super({id:"editor.action.showContextMenu",label:tz.NC("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;null===(i=rE.get(t))||void 0===i||i.showContextMenu()}};(0,tB._K)(rE.ID,rE,2),(0,tB.Qr)(ShowContextMenu);let CursorState=class CursorState{constructor(e){this.selections=e}equals(e){let t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}};let StackElement=class StackElement{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}};let CursorUndoRedoController=class CursorUndoRedoController extends t2.JT{static get(e){return e.getContribution(CursorUndoRedoController.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(e=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(e=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;let i=new CursorState(t.oldSelections),n=this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i);!n&&(this._undoStack.push(new StackElement(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};CursorUndoRedoController.ID="editor.contrib.cursorUndoRedoController";let CursorUndo=class CursorUndo extends tB.R6{constructor(){super({id:"cursorUndo",label:tz.NC("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var n;null===(n=CursorUndoRedoController.get(t))||void 0===n||n.cursorUndo()}};let CursorRedo=class CursorRedo extends tB.R6{constructor(){super({id:"cursorRedo",label:tz.NC("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var n;null===(n=CursorUndoRedoController.get(t))||void 0===n||n.cursorRedo()}};(0,tB._K)(CursorUndoRedoController.ID,CursorUndoRedoController,0),(0,tB.Qr)(CursorUndo),(0,tB.Qr)(CursorRedo),i(35268);let DragAndDropCommand=class DragAndDropCommand{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){let i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new t4.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new tJ.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new tJ.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new tJ.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new tJ.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new tJ.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}};function hasTriggerModifier(e){return io.dz?e.altKey:e.ctrlKey}let DragAndDropController=class DragAndDropController extends t2.JT{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._register(this._editor.onMouseDrag(e=>this._onEditorMouseDrag(e))),this._register(this._editor.onMouseDrop(e=>this._onEditorMouseDrop(e))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(e=>this.onEditorKeyDown(e))),this._register(this._editor.onKeyUp(e=>this.onEditorKeyUp(e))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!(!this._editor.getOption(35)||this._editor.getOption(22))&&(hasTriggerModifier(e)&&(this._modifierPressed=!0),this._mouseDown&&hasTriggerModifier(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!(!this._editor.getOption(35)||this._editor.getOption(22))&&(hasTriggerModifier(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===DragAndDropController.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(null===this._dragSelection){let e=this._editor.getSelections()||[],i=e.filter(e=>t.position&&e.containsPosition(t.position));if(1!==i.length)return;this._dragSelection=i[0]}hasTriggerModifier(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new t5.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){let e=this._editor.getSelection();if(e){let{selectionStartLineNumber:n,selectionStartColumn:o}=e;i=[new tJ.Y(n,o,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(e=>e.containsPosition(t)?new tJ.Y(t.lineNumber,t.column,t.lineNumber,t.column):e);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(hasTriggerModifier(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(DragAndDropController.ID,new DragAndDropCommand(this._dragSelection,t,hasTriggerModifier(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new t4.e(e.lineNumber,e.column,e.lineNumber,e.column),options:DragAndDropController._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};DragAndDropController.ID="editor.contrib.dragAndDrop",DragAndDropController.TRIGGER_KEY_VALUE=io.dz?6:5,DragAndDropController._DECORATION_OPTIONS=t6.qx.register({description:"dnd-target",className:"dnd-target"}),(0,tB._K)(DragAndDropController.ID,DragAndDropController,2);var defaultProviders_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},defaultProviders_param=function(e,t){return function(i,n){t(i,n,e)}};let rI=(0,tz.NC)("builtIn","Built-in");let SimplePasteAndDropProvider=class SimplePasteAndDropProvider{async provideDocumentPasteEdits(e,t,i,n,o){let r=await this.getEdit(i,o);return r?{insertText:r.insertText,label:r.label,detail:r.detail,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}:void 0}async provideDocumentOnDropEdits(e,t,i,n){let o=await this.getEdit(i,n);return o?{insertText:o.insertText,label:o.label,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}:void 0}};let DefaultTextProvider=class DefaultTextProvider extends SimplePasteAndDropProvider{constructor(){super(...arguments),this.id="text",this.dropMimeTypes=[iu.v.text],this.pasteMimeTypes=[iu.v.text]}async getEdit(e,t){let i=e.get(iu.v.text);if(!i||e.has(iu.v.uriList))return;let n=await i.asString();return{handledMimeType:iu.v.text,label:(0,tz.NC)("text.label","Insert Plain Text"),detail:rI,insertText:n}}};let PathProvider=class PathProvider extends SimplePasteAndDropProvider{constructor(){super(...arguments),this.id="uri",this.dropMimeTypes=[iu.v.uriList],this.pasteMimeTypes=[iu.v.uriList]}async getEdit(e,t){let i;let n=await extractUriList(e);if(!n.length||t.isCancellationRequested)return;let o=0,r=n.map(({uri:e,originalText:t})=>e.scheme===oy.lg.file?e.fsPath:(o++,t)).join(" ");return i=o>0?n.length>1?(0,tz.NC)("defaultDropProvider.uriList.uris","Insert Uris"):(0,tz.NC)("defaultDropProvider.uriList.uri","Insert Uri"):n.length>1?(0,tz.NC)("defaultDropProvider.uriList.paths","Insert Paths"):(0,tz.NC)("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:iu.v.uriList,insertText:r,label:i,detail:rI}}};let rT=class extends SimplePasteAndDropProvider{constructor(e){super(),this._workspaceContextService=e,this.id="relativePath",this.dropMimeTypes=[iu.v.uriList],this.pasteMimeTypes=[iu.v.uriList]}async getEdit(e,t){let i=await extractUriList(e);if(!i.length||t.isCancellationRequested)return;let n=(0,ia.kX)(i.map(({uri:e})=>{let t=this._workspaceContextService.getWorkspaceFolder(e);return t?(0,nL.lX)(t.uri,e):void 0}));if(n.length)return{handledMimeType:iu.v.uriList,insertText:n.join(" "),label:i.length>1?(0,tz.NC)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,tz.NC)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:rI}}};rT=defaultProviders_decorate([defaultProviders_param(0,rN.ec)],rT);let PasteHtmlProvider=class PasteHtmlProvider{constructor(){this.id="html",this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:iu.v.text}]}async provideDocumentPasteEdits(e,t,i,n,o){if("explicit"!==n.trigger&&n.only!==this.id)return;let r=i.get("text/html"),s=await (null==r?void 0:r.asString());if(s&&!o.isCancellationRequested)return{insertText:s,yieldTo:this._yieldTo,label:(0,tz.NC)("pasteHtmlLabel","Insert HTML"),detail:rI}}};async function extractUriList(e){let t=e.get(iu.v.uriList);if(!t)return[];let i=await t.asString(),n=[];for(let e of ic.parse(i))try{n.push({uri:ip.o.parse(e),originalText:e})}catch(e){}return n}let rM=class extends t2.JT{constructor(e,t){super(),this._register(e.documentOnDropEditProvider.register("*",new DefaultTextProvider)),this._register(e.documentOnDropEditProvider.register("*",new PathProvider)),this._register(e.documentOnDropEditProvider.register("*",new rT(t)))}};rM=defaultProviders_decorate([defaultProviders_param(0,ib.p),defaultProviders_param(1,rN.ec)],rM);let rR=class extends t2.JT{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new DefaultTextProvider)),this._register(e.documentPasteEditProvider.register("*",new PathProvider)),this._register(e.documentPasteEditProvider.register("*",new rT(t))),this._register(e.documentPasteEditProvider.register("*",new PasteHtmlProvider))}};rR=defaultProviders_decorate([defaultProviders_param(0,ib.p),defaultProviders_param(1,rN.ec)],rR),(0,tB._K)(ij.ID,ij,0),(0,nG.y)(rR),(0,tB.fK)(new class extends tB._l{constructor(){super({id:iz,precondition:iU,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t,i){var n;return null===(n=ij.get(t))||void 0===n?void 0:n.changePasteType()}}),(0,tB.Qr)(class extends tB.R6{constructor(){super({id:"editor.action.pasteAs",label:tz.NC("pasteAs","Paste As..."),alias:"Paste As...",precondition:tH.u.writable,metadata:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:tz.NC("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}run(e,t,i){var n;let o="string"==typeof(null==i?void 0:i.id)?i.id:void 0;return null===(n=ij.get(t))||void 0===n?void 0:n.pasteAs(o)}}),(0,tB.Qr)(class extends tB.R6{constructor(){super({id:"editor.action.pasteAsText",label:tz.NC("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:tH.u.writable})}run(e,t,i){var n;return null===(n=ij.get(t))||void 0===n?void 0:n.pasteAs("text")}});let TreeViewsDnDService=class TreeViewsDnDService{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){let t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}};let DraggedTreeItemsIdentifier=class DraggedTreeItemsIdentifier{constructor(e){this.identifier=e}};let rA=(0,iL.yh)("treeViewsDndService");(0,nv.z)(rA,TreeViewsDnDService,1);var dropIntoEditorController_param=function(e,t){return function(i,n){t(i,n,e)}};let rP="editor.experimental.dropIntoEditor.defaultProvider",rO="editor.changeDropType",rF=new tq.uy("dropWidgetVisible",!1,(0,tz.NC)("dropWidgetVisible","Whether the drop widget is showing")),rB=eS=class extends t2.JT{static get(e){return e.getContribution(eS.ID)}constructor(e,t,i,n,o){super(),this._configService=i,this._languageFeaturesService=n,this._treeViewsDragAndDropService=o,this.treeItemsTransfer=LocalSelectionTransfer.getInstance(),this._dropProgressManager=this._register(t.createInstance(iD,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(iO,"dropIntoEditor",e,rF,{id:rO,label:(0,tz.NC)("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(t=>this.onDropIntoEditor(e,t.position,t.event)))}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var n;if(!i.dataTransfer||!e.hasModel())return;null===(n=this._currentOperation)||void 0===n||n.cancel(),e.focus(),e.setPosition(t);let o=(0,t1.PG)(async n=>{let r=new iS.Dl(e,1,void 0,n);try{let o=await this.extractDataTransferData(i);if(0===o.size||r.token.isCancellationRequested)return;let s=e.getModel();if(!s)return;let l=this._languageFeaturesService.documentOnDropEditProvider.ordered(s).filter(e=>!e.dropMimeTypes||e.dropMimeTypes.some(e=>o.matches(e))),d=await this.getDropEdits(l,s,t,o,r);if(r.token.isCancellationRequested)return;if(d.length){let i=this.getInitialActiveEditIndex(s,d),o="afterDrop"===e.getOption(36).showDropSelector;await this._postDropWidgetManager.applyEditAndShowIfNeeded([t4.e.fromPositions(t)],{activeEditIndex:i,allEdits:d},o,n)}}finally{r.dispose(),this._currentOperation===o&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,(0,tz.NC)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),o),this._currentOperation=o}async getDropEdits(e,t,i,n,o){let r=await (0,t1.eP)(Promise.all(e.map(async e=>{try{let r=await e.provideDocumentOnDropEdits(t,i,n,o.token);if(r)return{...r,providerId:e.id}}catch(e){console.error(e)}})),o.token),s=(0,ia.kX)(null!=r?r:[]);return sortEditsByYieldTo(s)}getInitialActiveEditIndex(e,t){let i=this._configService.getValue(rP,{resource:e.uri});for(let[e,n]of Object.entries(i)){let i=t.findIndex(t=>n===t.providerId&&t.handledMimeType&&matchesMimeType(e,[t.handledMimeType]));if(i>=0)return i}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new VSDataTransfer;let t=toExternalVSDataTransfer(e.dataTransfer);if(this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)){let e=this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);if(Array.isArray(e))for(let i of e){let e=await this._treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(e)for(let[i,n]of e)t.replace(i,n)}}return t}};rB.ID="editor.contrib.dropIntoEditorController",rB=eS=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([dropIntoEditorController_param(1,iL.TG),dropIntoEditorController_param(2,tj.Ui),dropIntoEditorController_param(3,ib.p),dropIntoEditorController_param(4,rA)],rB),(0,tB._K)(rB.ID,rB,2),(0,tB.fK)(new class extends tB._l{constructor(){super({id:rO,precondition:rF,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t,i){var n;null===(n=rB.get(t))||void 0===n||n.changeDropType()}}),(0,nG.y)(rM),im.B.as(nT.IP.Configuration).registerConfiguration({...iX.wk,properties:{[rP]:{type:"object",scope:5,description:tz.NC("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});var rW=i(1173),rV=i(34850),rH=i(49987);let FindDecorations=class FindDecorations{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){let e=this._findScopeDecorationIds.map(e=>this._editor.getModel().getDecorationRange(e)).filter(e=>!!e);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){let t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){let t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(let e of t){let t=e.options;if(t===FindDecorations._FIND_MATCH_DECORATION||t===FindDecorations._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(e.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let n=0,o=this._decorations.length;n<o;n++){let o=this._editor.getModel().getDecorationRange(this._decorations[n]);if(e.equalsRange(o)){t=this._decorations[n],i=n+1;break}}return(null!==this._highlightedDecorationId||null!==t)&&this._editor.changeDecorations(e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,FindDecorations._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,FindDecorations._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){let e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new t4.e(i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,FindDecorations._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let n=FindDecorations._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){n=FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;let t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height,r=Math.max(2,Math.ceil(3/(i/t))),s=e[0].range.startLineNumber,l=e[0].range.endLineNumber;for(let t=1,i=e.length;t<i;t++){let i=e[t].range;l+r>=i.startLineNumber?i.endLineNumber>l&&(l=i.endLineNumber):(o.push({range:new t4.e(s,1,l,1),options:FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),s=i.startLineNumber,l=i.endLineNumber)}o.push({range:new t4.e(s,1,l,1),options:FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let r=Array(e.length);for(let t=0,i=e.length;t<i;t++)r[t]={range:e[t].range,options:n};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(e=>i.removeDecoration(e)),this._findScopeDecorationIds=[]),(null==t?void 0:t.length)&&(this._findScopeDecorationIds=t.map(e=>i.addDecoration(e,FindDecorations._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.endLineNumber>e.lineNumber)&&(n.endLineNumber<e.lineNumber||!(n.endColumn>e.column)))return n}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){let i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.startLineNumber<e.lineNumber)&&(n.startLineNumber>e.lineNumber||!(n.startColumn<e.column)))return n}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=(e=e.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};FindDecorations._CURRENT_FIND_MATCH_DECORATION=t6.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,t9.EN)(t7.Fm_),position:t3.sh.Center},minimap:{color:(0,t9.EN)(t7.SUY),position:t3.F5.Inline}}),FindDecorations._FIND_MATCH_DECORATION=t6.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,t9.EN)(t7.Fm_),position:t3.sh.Center},minimap:{color:(0,t9.EN)(t7.SUY),position:t3.F5.Inline}}),FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION=t6.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION=t6.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,t9.EN)(t7.Fm_),position:t3.sh.Center}}),FindDecorations._RANGE_HIGHLIGHT_DECORATION=t6.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),FindDecorations._FIND_SCOPE_DECORATION=t6.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});let ReplaceAllCommand=class ReplaceAllCommand{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort((e,t)=>t4.e.compareRangesUsingStarts(e.range,t.range));let i=[],n=e[0];for(let t=1;t<e.length;t++)n.range.endLineNumber===e[t].range.startLineNumber&&n.range.endColumn===e[t].range.startColumn?(n.range=n.range.plusRange(e[t].range),n.text=n.text+e[t].text):(i.push(n),n=e[t]);for(let e of(i.push(n),i))t.addEditOperation(e.range,e.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}};function buildReplaceStringWithCasePreserved(e,t){if(!e||""===e[0])return t;{let i=validateSpecificSpecialCharacter(e,t,"-"),n=validateSpecificSpecialCharacter(e,t,"_");return i&&!n?buildReplaceStringForSpecificSpecialCharacter(e,t,"-"):!i&&n?buildReplaceStringForSpecificSpecialCharacter(e,t,"_"):e[0].toUpperCase()===e[0]?t.toUpperCase():e[0].toLowerCase()===e[0]?t.toLowerCase():iy.Kw(e[0][0])&&t.length>0?t[0].toUpperCase()+t.substr(1):e[0][0].toUpperCase()!==e[0][0]&&t.length>0?t[0].toLowerCase()+t.substr(1):t}}function validateSpecificSpecialCharacter(e,t,i){let n=-1!==e[0].indexOf(i)&&-1!==t.indexOf(i);return n&&e[0].split(i).length===t.split(i).length}function buildReplaceStringForSpecificSpecialCharacter(e,t,i){let n=t.split(i),o=e[0].split(i),r="";return n.forEach((e,t)=>{r+=buildReplaceStringWithCasePreserved([o[t]],e)+i}),r.slice(0,-1)}let StaticValueReplacePattern=class StaticValueReplacePattern{constructor(e){this.staticValue=e,this.kind=0}};let DynamicPiecesReplacePattern=class DynamicPiecesReplacePattern{constructor(e){this.pieces=e,this.kind=1}};let ReplacePattern=class ReplacePattern{static fromStaticValue(e){return new ReplacePattern([ReplacePiece.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new StaticValueReplacePattern(e[0].staticValue):this._state=new DynamicPiecesReplacePattern(e):this._state=new StaticValueReplacePattern("")}buildReplaceString(e,t){if(0===this._state.kind)return t?buildReplaceStringWithCasePreserved(e,this._state.staticValue):this._state.staticValue;let i="";for(let t=0,n=this._state.pieces.length;t<n;t++){let n=this._state.pieces[t];if(null!==n.staticValue){i+=n.staticValue;continue}let o=ReplacePattern._substitute(n.matchIndex,e);if(null!==n.caseOps&&n.caseOps.length>0){let e=[],t=n.caseOps.length,i=0;for(let r=0,s=o.length;r<s;r++){if(i>=t){e.push(o.slice(r));break}switch(n.caseOps[i]){case"U":e.push(o[r].toUpperCase());break;case"u":e.push(o[r].toUpperCase()),i++;break;case"L":e.push(o[r].toLowerCase());break;case"l":e.push(o[r].toLowerCase()),i++;break;default:e.push(o[r])}}o=e.join("")}i+=o}return i}static _substitute(e,t){if(null===t)return"";if(0===e)return t[0];let i="";for(;e>0;){if(e<t.length){let n=t[e]||"";return n+i}i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}};let ReplacePiece=class ReplacePiece{static staticValue(e){return new ReplacePiece(e,-1,null)}static caseOps(e,t){return new ReplacePiece(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}};let ReplacePieceBuilder=class ReplacePieceBuilder{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=ReplacePiece.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=ReplacePiece.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=ReplacePiece.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new ReplacePattern(this._result)}};function parseReplaceString(e){if(!e||0===e.length)return new ReplacePattern(null);let t=[],i=new ReplacePieceBuilder(e);for(let n=0,o=e.length;n<o;n++){let r=e.charCodeAt(n);if(92===r){if(++n>=o)break;let r=e.charCodeAt(n);switch(r){case 92:i.emitUnchanged(n-1),i.emitStatic("\\",n+1);break;case 110:i.emitUnchanged(n-1),i.emitStatic("\n",n+1);break;case 116:i.emitUnchanged(n-1),i.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(n-1),i.emitStatic("",n+1),t.push(String.fromCharCode(r))}continue}if(36===r){if(++n>=o)break;let r=e.charCodeAt(n);if(36===r){i.emitUnchanged(n-1),i.emitStatic("$",n+1);continue}if(48===r||38===r){i.emitUnchanged(n-1),i.emitMatchIndex(0,n+1,t),t.length=0;continue}if(49<=r&&r<=57){let s=r-48;if(n+1<o){let o=e.charCodeAt(n+1);if(48<=o&&o<=57){n++,s=10*s+(o-48),i.emitUnchanged(n-2),i.emitMatchIndex(s,n+1,t),t.length=0;continue}}i.emitUnchanged(n-1),i.emitMatchIndex(s,n+1,t),t.length=0;continue}}}return i.finalize()}let rz=new tq.uy("findWidgetVisible",!1);rz.toNegated();let rU=new tq.uy("findInputFocussed",!1),rK=new tq.uy("replaceInputFocussed",!1),rj={primary:545,mac:{primary:2593}},rq={primary:565,mac:{primary:2613}},r$={primary:560,mac:{primary:2608}},rG={primary:554,mac:{primary:2602}},rQ={primary:558,mac:{primary:2606}},rZ={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"};let FindModelBoundToEditorModel=class FindModelBoundToEditorModel{constructor(e,t){this._toDispose=new t2.SL,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new t1._F,this._decorations=new FindDecorations(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new t1.pY(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(e=>{(3===e.reason||5===e.reason||6===e.reason)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,t2.B9)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){let t=this._editor.getModel();t.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;void 0!==t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map(e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new t4.e(e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e}));let n=this._findMatches(i,!1,19999);this._decorations.set(n,i);let o=this._editor.getSelection(),r=this._decorations.getCurrentMatchesPosition(o);if(0===r&&n.length>0){let e=(0,rV.J_)(n.map(e=>e.range),e=>t4.e.compareRangesUsingStarts(e,o)>=0);r=e>0?e-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:n}=e,o=this._editor.getModel();return t||1===n?(1===i?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new t5.L(i,n)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){let t=this._decorations.matchAfterPosition(e);t&&this._setCurrentFindMatch(t);return}if(19999>this._decorations.getCount()){let t=this._decorations.matchBeforePosition(e);t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),t=this._decorations.matchBeforePosition(e)),t&&this._setCurrentFindMatch(t);return}if(this._cannotFind())return;let i=this._decorations.getFindScope(),n=FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),i);n.getEndPosition().isBefore(e)&&(e=n.getEndPosition()),e.isBefore(n.getStartPosition())&&(e=n.getEndPosition());let{lineNumber:o,column:r}=e,s=this._editor.getModel(),l=new t5.L(o,r),d=s.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(130):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),d=s.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(130):null,!1)),d){if(!t&&!n.containsRange(d.range))return this._moveToPrevMatch(d.range.getStartPosition(),!0);this._setCurrentFindMatch(d.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:n}=e,o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new t5.L(i,n)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){let t=this._decorations.matchBeforePosition(e);t&&this._setCurrentFindMatch(t);return}if(19999>this._decorations.getCount()){let t=this._decorations.matchAfterPosition(e);t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),t&&this._setCurrentFindMatch(t);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,n=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),r=FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());let{lineNumber:s,column:l}=e,d=this._editor.getModel(),c=new t5.L(s,l),u=d.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(130):null,t);return(i&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),u=d.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(130):null,t)),u)?n||r.containsRange(u.range)?u:this._getNextMatch(u.range.getEndPosition(),t,i,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){let t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?parseReplaceString(this._state.replaceString):ReplacePattern.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i){if(t.equalsRange(i.range)){let n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new ie.T4(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new t5.L(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}}_findMatches(e,t,i){let n=(e||[null]).map(e=>FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(),e));return this._editor.getModel().findMatches(this._state.searchString,n,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(130):null,t,i)}replaceAll(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=19999?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){let e;let t=new rH.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(130):null),i=t.parseSearchRequest();if(!i)return;let n=i.regex;if(!n.multiline){let e="mu";n.ignoreCase&&(e+="i"),n.global&&(e+="g"),n=new RegExp(n.source,e)}let o=this._editor.getModel(),r=o.getValue(1),s=o.getFullModelRange(),l=this._getReplacePattern(),d=this._state.preserveCase;e=l.hasReplacementPatterns||d?r.replace(n,function(){return l.buildReplaceString(arguments,d)}):r.replace(n,l.buildReplaceString(null,d));let c=new ie.hP(s,e,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(e){let t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[];for(let e=0,o=i.length;e<o;e++)n[e]=t.buildReplaceString(i[e].matches,this._state.preserveCase);let o=new ReplaceAllCommand(this._editor.getSelection(),i.map(e=>e.range),n);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824),i=t.map(e=>new tJ.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)),n=this._editor.getSelection();for(let e=0,t=i.length;e<t;e++){let t=i[e];if(t.equalsRange(n)){i=[n].concat(i.slice(0,e)).concat(i.slice(e+1));break}}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}};i(23084);var rY=i(17214);let FindOptionsWidget=class FindOptionsWidget extends n0.${constructor(e,t,i){super(),this._hideSoon=this._register(new t1.pY(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");let n={inputActiveOptionBorder:(0,t7.n_1)(t7.PRb),inputActiveOptionForeground:(0,t7.n_1)(t7.Pvw),inputActiveOptionBackground:(0,t7.n_1)(t7.XEs)};this.caseSensitive=this._register(new rY.rk({appendTitle:this._keybindingLabelFor(rZ.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,...n})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new rY.Qx({appendTitle:this._keybindingLabelFor(rZ.ToggleWholeWordCommand),isChecked:this._state.wholeWord,...n})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new rY.eH({appendTitle:this._keybindingLabelFor(rZ.ToggleRegexCommand),isChecked:this._state.isRegex,...n})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()})),this._register(tO.nm(this._domNode,tO.tw.MOUSE_LEAVE,e=>this._onMouseLeave())),this._register(tO.nm(this._domNode,"mouseover",e=>this._onMouseOver()))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return FindOptionsWidget.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};function effectiveOptionValue(e,t){return 1===e||2!==e&&t}FindOptionsWidget.ID="editor.contrib.findOptionsWidget";let FindReplaceState=class FindReplaceState extends t2.JT{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return effectiveOptionValue(this._isRegexOverride,this._isRegex)}get wholeWord(){return effectiveOptionValue(this._wholeWordOverride,this._wholeWord)}get matchCase(){return effectiveOptionValue(this._matchCaseOverride,this._matchCase)}get preserveCase(){return effectiveOptionValue(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new iM.Q5),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){let n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),void 0===i||t4.e.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0),o&&this._onFindReplaceStateChange.fire(n)}change(e,t,i=!0){var n;let o={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1,s=this.isRegex,l=this.wholeWord,d=this.matchCase,c=this.preserveCase;void 0!==e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,r=!0),void 0!==e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,r=!0),void 0!==e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,r=!0),void 0!==e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),void 0!==e.isRegex&&(this._isRegex=e.isRegex),void 0!==e.wholeWord&&(this._wholeWord=e.wholeWord),void 0!==e.matchCase&&(this._matchCase=e.matchCase),void 0!==e.preserveCase&&(this._preserveCase=e.preserveCase),void 0===e.searchScope||(null===(n=e.searchScope)||void 0===n?void 0:n.every(e=>{var t;return null===(t=this._searchScope)||void 0===t?void 0:t.some(t=>!t4.e.equalsRange(t,e))}))||(this._searchScope=e.searchScope,o.searchScope=!0,r=!0),void 0!==e.loop&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,r=!0),void 0!==e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,o.isSearching=!0,r=!0),void 0!==e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,o.filters=!0,r=!0),this._isRegexOverride=void 0!==e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride=void 0!==e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride=void 0!==e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride=void 0!==e.preserveCaseOverride?e.preserveCaseOverride:0,s!==this.isRegex&&(r=!0,o.isRegex=!0),l!==this.wholeWord&&(r=!0,o.wholeWord=!0),d!==this.matchCase&&(r=!0,o.matchCase=!0),c!==this.preserveCase&&(r=!0,o.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=19999}};var rJ=i(24311);i(29392);var rX=i(43811),r0=i(61313);i(39422);let r1=tz.NC("defaultLabel","input"),r2=tz.NC("label.preserveCaseToggle","Preserve Case");let PreserveCaseToggle=class PreserveCaseToggle extends rJ.Z{constructor(e){super({icon:tF.l.preserveCase,title:r2+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};let ReplaceInput=class ReplaceInput extends n0.${constructor(e,t,i,n){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new iM.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new iM.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new iM.Q5),this._onInput=this._register(new iM.Q5),this._onKeyUp=this._register(new iM.Q5),this._onPreserveCaseKeyDown=this._register(new iM.Q5),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||r1;let o=n.appendPreserveCaseLabel||"",r=n.history||[],s=!!n.flexibleHeight,l=!!n.flexibleWidth,d=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new r0.pG(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:n.showHistoryHint,flexibleHeight:s,flexibleWidth:l,flexibleMaxHeight:d,inputBoxStyles:n.inputBoxStyles})),this.preserveCase=this._register(new PreserveCaseToggle({appendTitle:o,isChecked:!1,...n.toggleStyles})),this._register(this.preserveCase.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(e=>{this._onPreserveCaseKeyDown.fire(e)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let c=[this.preserveCase.domNode];this.onkeydown(this.domNode,e=>{if(e.equals(15)||e.equals(17)||e.equals(9)){let t=c.indexOf(this.domNode.ownerDocument.activeElement);if(t>=0){let i=-1;e.equals(17)?i=(t+1)%c.length:e.equals(15)&&(i=0===t?c.length-1:t-1),e.equals(9)?(c[t].blur(),this.inputBox.focus()):i>=0&&c[i].focus(),tO.zB.stop(e,!0)}}});let u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),null==e||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,e=>this._onKeyDown.fire(e)),this.onkeyup(this.inputBox.inputElement,e=>this._onKeyUp.fire(e)),this.oninput(this.inputBox.inputElement,e=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,e=>this._onMouseDown.fire(e))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;null===(e=this.inputBox)||void 0===e||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}};var contextScopedHistoryWidget_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},contextScopedHistoryWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let r5=new tq.uy("suggestWidgetVisible",!1,(0,tz.NC)("suggestWidgetVisible","Whether suggestion are visible")),r4="historyNavigationWidgetFocus",r3="historyNavigationForwardsEnabled",r6="historyNavigationBackwardsEnabled",r7=[];function registerAndCreateHistoryNavigationContext(e,t){if(r7.includes(t))throw Error("Cannot register the same widget multiple times");r7.push(t);let i=new t2.SL,n=new tq.uy(r4,!1).bindTo(e),r=new tq.uy(r3,!0).bindTo(e),s=new tq.uy(r6,!0).bindTo(e),onDidFocus=()=>{n.set(!0),o=t},onDidBlur=()=>{n.set(!1),o===t&&(o=void 0)};return(0,tO.H9)(t.element)&&onDidFocus(),i.add(t.onDidFocus(()=>onDidFocus())),i.add(t.onDidBlur(()=>onDidBlur())),i.add((0,t2.OF)(()=>{r7.splice(r7.indexOf(t),1),onDidBlur()})),{historyNavigationForwardsEnablement:r,historyNavigationBackwardsEnablement:s,dispose(){i.dispose()}}}let r9=class extends rX.V{constructor(e,t,i,n){super(e,t,i);let o=this._register(n.createScoped(this.inputBox.element));this._register(registerAndCreateHistoryNavigationContext(o,this.inputBox))}};r9=contextScopedHistoryWidget_decorate([contextScopedHistoryWidget_param(3,tq.i6)],r9);let r8=class extends ReplaceInput{constructor(e,t,i,n,o=!1){super(e,t,o,i);let r=this._register(n.createScoped(this.inputBox.element));this._register(registerAndCreateHistoryNavigationContext(r,this.inputBox))}};function showHistoryKeybindingHint(e){var t,i;return(null===(t=e.lookupKeybinding("history.showPrevious"))||void 0===t?void 0:t.getElectronAccelerator())==="Up"&&(null===(i=e.lookupKeybinding("history.showNext"))||void 0===i?void 0:i.getElectronAccelerator())==="Down"}r8=contextScopedHistoryWidget_decorate([contextScopedHistoryWidget_param(3,tq.i6)],r8),oC.W.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:tq.Ao.and(tq.Ao.has(r4),tq.Ao.equals(r6,!0),tq.Ao.not("isComposing"),r5.isEqualTo(!1)),primary:16,secondary:[528],handler:e=>{null==o||o.showPreviousValue()}}),oC.W.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:tq.Ao.and(tq.Ao.has(r4),tq.Ao.equals(r3,!0),tq.Ao.not("isComposing"),r5.isEqualTo(!1)),primary:18,secondary:[530],handler:e=>{null==o||o.showNextValue()}});let se=(0,n1.q5)("find-selection",tF.l.selection,tz.NC("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),st=(0,n1.q5)("find-collapsed",tF.l.chevronRight,tz.NC("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),si=(0,n1.q5)("find-expanded",tF.l.chevronDown,tz.NC("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),sn=(0,n1.q5)("find-replace",tF.l.replace,tz.NC("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),so=(0,n1.q5)("find-replace-all",tF.l.replaceAll,tz.NC("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),sr=(0,n1.q5)("find-previous-match",tF.l.arrowUp,tz.NC("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),ss=(0,n1.q5)("find-next-match",tF.l.arrowDown,tz.NC("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),sa=tz.NC("label.findDialog","Find / Replace"),sl=tz.NC("label.find","Find"),sd=tz.NC("placeholder.find","Find"),sh=tz.NC("label.previousMatchButton","Previous Match"),sc=tz.NC("label.nextMatchButton","Next Match"),su=tz.NC("label.toggleSelectionFind","Find in Selection"),sg=tz.NC("label.closeButton","Close"),sp=tz.NC("label.replace","Replace"),sm=tz.NC("placeholder.replace","Replace"),sf=tz.NC("label.replaceButton","Replace"),s_=tz.NC("label.replaceAllButton","Replace All"),sv=tz.NC("label.toggleReplaceButton","Toggle Replace"),sC=tz.NC("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",19999),sb=tz.NC("label.matchesLocation","{0} of {1}"),sS=tz.NC("label.noResults","No results"),sy=69,sw="ctrlEnterReplaceAll.windows.donotask",sL=io.dz?256:2048;let FindWidgetViewZone=class FindWidgetViewZone{constructor(e){this.afterLineNumber=e,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}};function stopPropagationForMultiLineUpwards(e,t,i){let n=!!t.match(/\n/);if(i&&n&&i.selectionStart>0){e.stopPropagation();return}}function stopPropagationForMultiLineDownwards(e,t,i){let n=!!t.match(/\n/);if(i&&n&&i.selectionEnd<i.value.length){e.stopPropagation();return}}let FindWidget=class FindWidget extends n0.${constructor(e,t,i,n,o,r,s,l,d){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=o,this._contextKeyService=r,this._storageService=l,this._notificationService=d,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(sw,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new t1.vp(500),this._register((0,t2.OF)(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(e=>{if(e.hasChanged(91)&&(this._codeEditor.getOption(91)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(144)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(41)){let e=this._codeEditor.getOption(41).loop;this._state.change({loop:e},!1);let t=this._codeEditor.getOption(41).addExtraSpaceOnTop;t&&!this._viewZone&&(this._viewZone=new FindWidgetViewZone(0),this._showViewZone()),!t&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){let e=await this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}})),this._findInputFocused=rU.bindTo(r),this._findFocusTracker=this._register(tO.go(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=rK.bindTo(r),this._replaceFocusTracker=this._register(tO.go(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new FindWidgetViewZone(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(e=>{if(e.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return FindWidget.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(91)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=tO.w(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,i1.dL)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=sy+"px",this._state.matchesCount>=19999?this._matchesCount.title=sC:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=19999&&(t+="+");let i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=iy.WU(sb,i,t)}else e=sS;this._matchesCount.appendChild(document.createTextNode(e)),(0,tQ.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),sy=Math.max(sy,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===sS)return""===i?tz.NC("ariaSearchNoResultEmpty","{0} found",e):tz.NC("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){let n=tz.NC("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();if(o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1){let e=o.getLineContent(t.startLineNumber);return`${e}, ${n}`}return n}return tz.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(91);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;let e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{let t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){let i=this._codeEditor.getDomNode();if(i){let n=tO.i(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=n.left+(o?o.left:0),s=o?o.top:0;if(this._viewZone&&s<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);let i=tO.xQ(this._domNode).left;r>i&&(t=!1);let o=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition()),s=n.left+(o?o.left:0);s>i&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){let t=this._codeEditor.getOption(41).addExtraSpaceOnTop;if(!t){this._removeViewZone();return}if(!this._isVisible)return;let i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones(t=>{i.heightInPx=this._getHeight(),this._viewZoneId=t.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible)return;let t=this._codeEditor.getOption(41).addExtraSpaceOnTop;if(!t)return;void 0===this._viewZone&&(this._viewZone=new FindWidgetViewZone(0));let i=this._viewZone;this._codeEditor.changeViewZones(t=>{if(void 0!==this._viewZoneId){let n=this._getHeight();if(n===i.heightInPx)return;let o=n-i.heightInPx;i.heightInPx=n,t.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}{let n=this._getHeight();if((n-=this._codeEditor.getOption(84).top)<=0)return;i.heightInPx=n,this._viewZoneId=t.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+n)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;let e=this._codeEditor.getLayoutInfo(),t=e.contentWidth;if(t<=0){this._domNode.classList.add("hiddenEditor");return}this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");let i=e.width,n=e.minimap.minimapWidth,o=!1,r=!1,s=!1;if(this._resized){let e=tO.w(this._domNode);if(e>419){this._domNode.style.maxWidth=`${i-28-n-15}px`,this._replaceInput.width=tO.w(this._findInput.domNode);return}}if(447+n>=i&&(r=!0),447+n-sy>=i&&(s=!0),447+n-sy>=i+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",s),this._domNode.classList.toggle("reduced-find-widget",r),s||o||(this._domNode.style.maxWidth=`${i-28-n-15}px`),this._findInput.layout({collapsedFindWidget:o,narrowFindWidget:s,reducedFindWidget:r}),this._resized){let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=tO.w(this._findInput.domNode))}_getHeight(){let e;return e=4+(this._findInput.inputBox.height+2),this._isReplaceVisible&&(e+=4+(this._replaceInput.inputBox.height+2)),e+=4}_tryUpdateHeight(){let e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));let t=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||t4.e.equalsRange(e,t)?null:e}).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(3|sL)){if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}this._findInput.inputBox.insertAtCursor("\n"),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}return e.equals(16)?stopPropagationForMultiLineUpwards(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?stopPropagationForMultiLineDownwards(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){if(e.equals(3|sL)){if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}io.ED&&io.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(tz.NC("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(sw,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n"),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}return e.equals(16)?stopPropagationForMultiLineUpwards(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?stopPropagationForMultiLineDownwards(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new r9(null,this._contextViewProvider,{width:221,label:sl,placeholder:sd,appendCaseSensitiveLabel:this._keybindingLabelFor(rZ.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(rZ.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(rZ.ToggleRegexCommand),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return RegExp(e,"gu"),null}catch(e){return{content:e.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>showHistoryKeybindingHint(this._keybindingService),inputBoxStyles:ng.Hc,toggleStyles:ng.pl},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(e=>this._onFindInputKeyDown(e))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())})),this._register(this._findInput.onRegexKeyDown(e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(e=>{this._tryUpdateHeight()&&this._showViewZone()})),io.IJ&&this._register(this._findInput.onMouseDown(e=>this._onFindInputMouseDown(e))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new SimpleButton({label:sh+this._keybindingLabelFor(rZ.PreviousMatchFindAction),icon:sr,onTrigger:()=>{(0,nR.cW)(this._codeEditor.getAction(rZ.PreviousMatchFindAction)).run().then(void 0,i1.dL)}})),this._nextBtn=this._register(new SimpleButton({label:sc+this._keybindingLabelFor(rZ.NextMatchFindAction),icon:ss,onTrigger:()=>{(0,nR.cW)(this._codeEditor.getAction(rZ.NextMatchFindAction)).run().then(void 0,i1.dL)}}));let e=document.createElement("div");e.className="find-part",e.appendChild(this._findInput.domNode);let t=document.createElement("div");t.className="find-actions",e.appendChild(t),t.appendChild(this._matchesCount),t.appendChild(this._prevBtn.domNode),t.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new rJ.Z({icon:se,title:su+this._keybindingLabelFor(rZ.ToggleSearchScopeCommand),isChecked:!1,inputActiveOptionBackground:(0,t7.n_1)(t7.XEs),inputActiveOptionBorder:(0,t7.n_1)(t7.PRb),inputActiveOptionForeground:(0,t7.n_1)(t7.Pvw)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();(e=e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty())?null:e).filter(e=>!!e)).length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)})),t.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new SimpleButton({label:sg+this._keybindingLabelFor(rZ.CloseFindWidgetCommand),icon:n1.s_,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),this._replaceInput=this._register(new r8(null,void 0,{label:sp,placeholder:sm,appendPreserveCaseLabel:this._keybindingLabelFor(rZ.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>showHistoryKeybindingHint(this._keybindingService),inputBoxStyles:ng.Hc,toggleStyles:ng.pl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(e=>this._onReplaceInputKeyDown(e))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())})),this._replaceBtn=this._register(new SimpleButton({label:sf+this._keybindingLabelFor(rZ.ReplaceOneAction),icon:sn,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new SimpleButton({label:s_+this._keybindingLabelFor(rZ.ReplaceAllAction),icon:so,onTrigger:()=>{this._controller.replaceAll()}}));let i=document.createElement("div");i.className="replace-part",i.appendChild(this._replaceInput.domNode);let n=document.createElement("div");n.className="replace-actions",i.appendChild(n),n.appendChild(this._replaceBtn.domNode),n.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new SimpleButton({label:sv,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=tO.w(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=sa,this._domNode.role="dialog",this._domNode.style.width="419px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(e),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(i),this._resizeSash=this._register(new oe.g(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let o=419;this._register(this._resizeSash.onDidStart(()=>{o=tO.w(this._domNode)})),this._register(this._resizeSash.onDidChange(e=>{this._resized=!0;let t=o+e.startX-e.currentX;if(t<419)return;let i=parseFloat(tO.Dx(this._domNode).maxWidth)||0;t>i||(this._domNode.style.width=`${t}px`,this._isReplaceVisible&&(this._replaceInput.width=tO.w(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{let e=tO.w(this._domNode);if(e<419)return;let t=419;if(!this._resized||419===e){let e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${t}px`,this._isReplaceVisible&&(this._replaceInput.width=tO.w(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){let e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}};FindWidget.ID="editor.contrib.findWidget";let SimpleButton=class SimpleButton extends n0.${constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+iw.k.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,e=>{this._opts.onTrigger(),e.preventDefault()}),this.onkeydown(this._domNode,e=>{var t,i;if(e.equals(10)||e.equals(3)){this._opts.onTrigger(),e.preventDefault();return}null===(i=(t=this._opts).onKeyDown)||void 0===i||i.call(t,e)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...iw.k.asClassNameArray(st)),this._domNode.classList.add(...iw.k.asClassNameArray(si))):(this._domNode.classList.remove(...iw.k.asClassNameArray(si)),this._domNode.classList.add(...iw.k.asClassNameArray(st)))}};(0,t9.Ic)((e,t)=>{let i=e.getColor(t7.EiJ);i&&t.addRule(`.monaco-editor .findMatch { border: 1px ${(0,nw.c3)(e.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`);let n=e.getColor(t7.gkn);n&&t.addRule(`.monaco-editor .findScope { border: 1px ${(0,nw.c3)(e.type)?"dashed":"solid"} ${n}; }`);let o=e.getColor(t7.lRK);o&&t.addRule(`.monaco-editor .find-widget { border: 1px solid ${o}; }`)});var findController_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},findController_param=function(e,t){return function(i,n){t(i,n,e)}};function getSelectionSearchString(e,t="single",i=!1){if(!e.hasModel())return null;let n=e.getSelection();if("single"===t&&n.startLineNumber===n.endLineNumber||"multiple"===t){if(n.isEmpty()){let t=e.getConfiguredWordAtPosition(n.getStartPosition());if(t&&!1===i)return t.word}else if(524288>e.getModel().getValueLengthInRange(n))return e.getModel().getValueInRange(n)}return null}let sk=ey=class extends t2.JT{get editor(){return this._editor}static get(e){return e.getContribution(ey.ID)}constructor(e,t,i,n,o){super(),this._editor=e,this._findWidgetVisible=rz.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._notificationService=o,this._updateHistoryDelayer=new t1.vp(500),this._state=this._register(new FindReplaceState),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!rU.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();(e=e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty())?null:e).filter(e=>!!e)).length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=iy.ec(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;let i={...t,isRevealed:!0};if("single"===e.seedSearchStringFromSelection){let t=getSelectionSearchString(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);t&&(this._state.isRegex?i.searchString=iy.ec(t):i.searchString=t)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){let t=getSelectionSearchString(this._editor,e.seedSearchStringFromSelection);t&&(i.searchString=t)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){let e=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(i.searchString=e)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some(e=>!e.isEmpty())&&(i.searchScope=e)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new FindModelBoundToEditorModel(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}goToMatch(e){return!!this._model&&(this._model.moveToMatch(e),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){var e;return!!this._model&&((null===(e=this._editor.getModel())||void 0===e?void 0:e.isTooLargeForHeapOperation())?(this._notificationService.warn(tz.NC("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0))}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};sk.ID="editor.contrib.findController",sk=ey=findController_decorate([findController_param(1,tq.i6),findController_param(2,nP.Uy),findController_param(3,ix.p),findController_param(4,i5.lT)],sk);let sD=class extends sk{constructor(e,t,i,n,o,r,s,l){super(e,i,s,l,r),this._contextViewService=t,this._keybindingService=n,this._themeService=o,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();let i=this._editor.getSelection(),n=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":n=!0;break;case"never":n=!1;break;case"multiline":{let e=!!i&&i.startLineNumber!==i.endLineNumber;n=e}}e.updateSearchScope=e.updateSearchScope||n,await super._start(e,t),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new FindWidget(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new FindOptionsWidget(this._editor,this._state,this._keybindingService))}};sD=findController_decorate([findController_param(1,iR.u),findController_param(2,tq.i6),findController_param(3,iA.d),findController_param(4,t9.XE),findController_param(5,i5.lT),findController_param(6,nP.Uy),findController_param(7,ix.p)],sD);let sx=(0,tB.rn)(new tB.jY({id:rZ.StartFindAction,label:tz.NC("startFindAction","Find"),alias:"Find",precondition:tq.Ao.or(tH.u.focus,tq.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:tU.eH.MenubarEditMenu,group:"3_find",title:tz.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));sx.addImplementation(0,(e,t,i)=>{let n=sk.get(t);return!!n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})});let sN={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};let StartFindWithArgsAction=class StartFindWithArgsAction extends tB.R6{constructor(){super({id:rZ.StartFindWithArgs,label:tz.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:sN})}async run(e,t,i){let n=sk.get(t);if(n){let e=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===n.getState().searchString.length&&"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null==i?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},e),n.setGlobalBufferTerm(n.getState().searchString)}}};let StartFindWithSelectionAction=class StartFindWithSelectionAction extends tB.R6{constructor(){super({id:rZ.StartFindWithSelection,label:tz.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){let i=sk.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}};let MatchFindAction=class MatchFindAction extends tB.R6{async run(e,t){let i=sk.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===i.getState().searchString.length&&"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}};let NextMatchFindAction=class NextMatchFindAction extends MatchFindAction{constructor(){super({id:rZ.NextMatchFindAction,label:tz.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:tH.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:tq.Ao.and(tH.u.focus,rU),primary:3,weight:100}]})}_run(e){let t=e.moveToNextMatch();return!!t&&(e.editor.pushUndoStop(),!0)}};let PreviousMatchFindAction=class PreviousMatchFindAction extends MatchFindAction{constructor(){super({id:rZ.PreviousMatchFindAction,label:tz.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:tH.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:tq.Ao.and(tH.u.focus,rU),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}};let MoveToMatchFindAction=class MoveToMatchFindAction extends tB.R6{constructor(){super({id:rZ.GoToMatchFindAction,label:tz.NC("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:rz}),this._highlightDecorations=[]}run(e,t,i){let n=sk.get(t);if(!n)return;let o=n.getState().matchesCount;if(o<1){let t=e.get(i5.lT);t.notify({severity:i5.zb.Warning,message:tz.NC("findMatchAction.noResults","No matches. Try searching for something else.")});return}let r=e.get(iE.eJ),s=r.createInputBox();s.placeholder=tz.NC("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);let toFindMatchIndex=e=>{let t=parseInt(e);if(isNaN(t))return;let i=n.getState().matchesCount;return t>0&&t<=i?t-1:t<0&&t>=-i?i+t:void 0},updatePickerAndEditor=e=>{let i=toFindMatchIndex(e);if("number"==typeof i){s.validationMessage=void 0,n.goToMatch(i);let e=n.getState().currentMatch;e&&this.addDecorations(t,e)}else s.validationMessage=tz.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",n.getState().matchesCount),this.clearDecorations(t)};s.onDidChangeValue(e=>{updatePickerAndEditor(e)}),s.onDidAccept(()=>{let e=toFindMatchIndex(s.value);"number"==typeof e?(n.goToMatch(e),s.hide()):s.validationMessage=tz.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",n.getState().matchesCount)}),s.onDidHide(()=>{this.clearDecorations(t),s.dispose()}),s.show()}clearDecorations(e){e.changeDecorations(e=>{this._highlightDecorations=e.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(e=>{this._highlightDecorations=e.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,t9.EN)(rW.m9),position:t3.sh.Full}}}])})}};let SelectionMatchFindAction=class SelectionMatchFindAction extends tB.R6{async run(e,t){let i=sk.get(t);if(!i)return;let n=getSelectionSearchString(t,"single",!1);n&&i.setSearchString(n),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}};let NextSelectionMatchFindAction=class NextSelectionMatchFindAction extends SelectionMatchFindAction{constructor(){super({id:rZ.NextSelectionMatchFindAction,label:tz.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}};let PreviousSelectionMatchFindAction=class PreviousSelectionMatchFindAction extends SelectionMatchFindAction{constructor(){super({id:rZ.PreviousSelectionMatchFindAction,label:tz.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}};let sE=(0,tB.rn)(new tB.jY({id:rZ.StartFindReplaceAction,label:tz.NC("startReplace","Replace"),alias:"Replace",precondition:tq.Ao.or(tH.u.focus,tq.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:tU.eH.MenubarEditMenu,group:"3_find",title:tz.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));sE.addImplementation(0,(e,t,i)=>{if(!t.hasModel()||t.getOption(91))return!1;let n=sk.get(t);if(!n)return!1;let o=t.getSelection(),r=n.isFindInputFocused(),s=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&"never"!==t.getOption(41).seedSearchStringFromSelection&&!r;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(41).seedSearchStringFromSelection,shouldFocus:r||s?2:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})}),(0,tB._K)(sk.ID,sD,0),(0,tB.Qr)(StartFindWithArgsAction),(0,tB.Qr)(StartFindWithSelectionAction),(0,tB.Qr)(NextMatchFindAction),(0,tB.Qr)(PreviousMatchFindAction),(0,tB.Qr)(MoveToMatchFindAction),(0,tB.Qr)(NextSelectionMatchFindAction),(0,tB.Qr)(PreviousSelectionMatchFindAction);let sI=tB._l.bindToContribution(sk.get);(0,tB.fK)(new sI({id:rZ.CloseFindWidgetCommand,precondition:rz,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:tq.Ao.and(tH.u.focus,tq.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,tB.fK)(new sI({id:rZ.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:rj.primary,mac:rj.mac,win:rj.win,linux:rj.linux}})),(0,tB.fK)(new sI({id:rZ.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:rq.primary,mac:rq.mac,win:rq.win,linux:rq.linux}})),(0,tB.fK)(new sI({id:rZ.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:r$.primary,mac:r$.mac,win:r$.win,linux:r$.linux}})),(0,tB.fK)(new sI({id:rZ.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:rG.primary,mac:rG.mac,win:rG.win,linux:rG.linux}})),(0,tB.fK)(new sI({id:rZ.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:rQ.primary,mac:rQ.mac,win:rQ.win,linux:rQ.linux}})),(0,tB.fK)(new sI({id:rZ.ReplaceOneAction,precondition:rz,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:3094}})),(0,tB.fK)(new sI({id:rZ.ReplaceOneAction,precondition:rz,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:tq.Ao.and(tH.u.focus,rK),primary:3}})),(0,tB.fK)(new sI({id:rZ.ReplaceAllAction,precondition:rz,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:2563}})),(0,tB.fK)(new sI({id:rZ.ReplaceAllAction,precondition:rz,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:tq.Ao.and(tH.u.focus,rK),primary:void 0,mac:{primary:2051}}})),(0,tB.fK)(new sI({id:rZ.SelectAllMatchesAction,precondition:rz,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:tH.u.focus,primary:515}})),i(34285);let sT={0:" ",1:"u",2:"r"};let BitField=class BitField{constructor(e){this._states=new Uint32Array(Math.ceil(e/32))}get(e){return(this._states[e/32|0]&1<<e%32)!=0}set(e,t){let i=e/32|0,n=e%32,o=this._states[i];t?this._states[i]=o|1<<n:this._states[i]=o&~(1<<n)}};let FoldingRegions=class FoldingRegions{constructor(e,t,i){if(e.length!==t.length||e.length>65535)throw Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new BitField(e.length),this._userDefinedStates=new BitField(e.length),this._recoveredStates=new BitField(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],isInsideLast=(t,i)=>{let n=e[e.length-1];return this.getStartLineNumber(n)<=t&&this.getEndLineNumber(n)>=i};for(let t=0,i=this._startIndexes.length;t<i;t++){let i=this._startIndexes[t],n=this._endIndexes[t];if(i>16777215||n>16777215)throw Error("startLineNumber or endLineNumber must not exceed 16777215");for(;e.length>0&&!isInsideLast(i,n);)e.pop();let o=e.length>0?e[e.length-1]:-1;e.push(t),this._startIndexes[t]=i+((255&o)<<24),this._endIndexes[t]=n+((65280&o)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return 16777215&this._startIndexes[e]}getEndLineNumber(e){return 16777215&this._endIndexes[e]}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){1===t?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):2===t?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new FoldingRegion(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((4278190080&this._startIndexes[e])>>>24)+((4278190080&this._endIndexes[e])>>>16);return 65535===t?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return -1;for(;t<i;){let n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){let i=this.getEndLineNumber(t);if(i>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return -1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${sT[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:16777215&this._startIndexes[e],endLineNumber:16777215&this._endIndexes[e],type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){let t=e.length,i=new Uint32Array(t),n=new Uint32Array(t),o=[],r=!1;for(let s=0;s<t;s++){let t=e[s];i[s]=t.startLineNumber,n[s]=t.endLineNumber,o.push(t.type),t.type&&(r=!0)}r||(o=void 0);let s=new FoldingRegions(i,n,o);for(let i=0;i<t;i++)e[i].isCollapsed&&s.setCollapsed(i,!0),s.setSource(i,e[i].source);return s}static sanitizeAndMerge(e,t,i){let n;i=null!=i?i:Number.MAX_VALUE;let getIndexedFunction=(e,t)=>Array.isArray(e)?i=>i<t?e[i]:void 0:i=>i<t?e.toFoldRange(i):void 0,o=getIndexedFunction(e,e.length),r=getIndexedFunction(t,t.length),s=0,l=0,d=o(0),c=r(0),u=[],g=0,m=[];for(;d||c;){let e;if(c&&(!d||d.startLineNumber>=c.startLineNumber))d&&d.startLineNumber===c.startLineNumber?(1===c.source?e=c:((e=d).isCollapsed=c.isCollapsed&&d.endLineNumber===c.endLineNumber,e.source=0),d=o(++s)):(e=c,c.isCollapsed&&0===c.source&&(e.source=2)),c=r(++l);else{let t=l,i=c;for(;;){if(!i||i.startLineNumber>d.endLineNumber){e=d;break}if(1===i.source&&i.endLineNumber>d.endLineNumber)break;i=r(++t)}d=o(++s)}if(e){for(;n&&n.endLineNumber<e.startLineNumber;)n=u.pop();e.endLineNumber>e.startLineNumber&&e.startLineNumber>g&&e.endLineNumber<=i&&(!n||n.endLineNumber>=e.endLineNumber)&&(m.push(e),g=e.startLineNumber,n&&u.push(n),n=e)}}return m}};let FoldingRegion=class FoldingRegion{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}};var sM=i(22256);let FoldingModel=class FoldingModel{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new iM.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new FoldingRegions(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);let t={};this._decorationProvider.changeDecorations(i=>{let n=0,o=-1,r=-1,updateDecorationsUntil=e=>{for(;n<e;){let e=this._regions.getEndLineNumber(n),t=this._regions.isCollapsed(n);if(e<=o){let o=0!==this.regions.getSource(n);i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(t,e<=r,o))}t&&e>r&&(r=e),n++}};for(let i of e){let e=i.regionIndex,n=this._editorDecorationIds[e];if(n&&!t[n]){t[n]=!0,updateDecorationsUntil(e);let i=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,i),o=Math.max(o,this._regions.getEndLineNumber(e))}}updateDecorationsUntil(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){let t=[],intersects=t=>{for(let i of e)if(!(i.startLineNumber>t.endLineNumber||t.startLineNumber>i.endLineNumber))return!0;return!1};for(let e=0;e<this._regions.length;e++){let i=this._regions.toFoldRange(e);0!==i.source&&intersects(i)||t.push(i)}this.updatePost(FoldingRegions.fromFoldRanges(t))}update(e,t=[]){let i=this._currentFoldedOrManualRanges(t),n=FoldingRegions.sanitizeAndMerge(e,i,this._textModel.getLineCount());this.updatePost(FoldingRegions.fromFoldRanges(n))}updatePost(e){let t=[],i=-1;for(let n=0,o=e.length;n<o;n++){let o=e.getStartLineNumber(n),r=e.getEndLineNumber(n),s=e.isCollapsed(n),l=0!==e.getSource(n),d={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:r,endColumn:this._textModel.getLineMaxColumn(r)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(s,r<=i,l)}),s&&r>i&&(i=r)}this._decorationProvider.changeDecorations(e=>this._editorDecorationIds=e.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){let isBlocked=(t,i)=>{for(let n of e)if(t<n&&n<=i)return!0;return!1},t=[];for(let e=0,i=this._regions.length;e<i;e++){let i=this.regions.isCollapsed(e),n=this.regions.getSource(e);if(i||0!==n){let o=this._regions.toFoldRange(e),r=this._textModel.getDecorationRange(this._editorDecorationIds[e]);r&&(i&&isBlocked(r.startLineNumber,r.endLineNumber)&&(i=!1),t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:o.type,isCollapsed:i,source:n}))}}return t}getMemento(){let e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let n=0,o=e.length;n<o;n++){let o=e[n];if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;let r=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:r})}return t.length>0?t:void 0}applyMemento(e){var t,i;if(!Array.isArray(e))return;let n=[],o=this._textModel.getLineCount();for(let r of e){if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>o)continue;let e=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);r.checksum&&e!==r.checksum||n.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:void 0,isCollapsed:null===(t=r.isCollapsed)||void 0===t||t,source:null!==(i=r.source)&&void 0!==i?i:0})}let r=FoldingRegions.sanitizeAndMerge(this._regions,n,o);this.updatePost(FoldingRegions.fromFoldRanges(r))}_getLinesChecksum(e,t){let i=(0,sM.vp)(this._textModel.getLineContent(e)+this._textModel.getLineContent(t));return i%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let n=this._regions.findRange(e),o=1;for(;n>=0;){let e=this._regions.toRegion(n);(!t||t(e,o))&&i.push(e),o++,n=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],n=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){let e=[];for(let r=n,s=this._regions.length;r<s;r++){let n=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<o){for(;e.length>0&&!n.containedBy(e[e.length-1]);)e.pop();e.push(n),t(n,e.length)&&i.push(n)}else break}}else for(let e=n,r=this._regions.length;e<r;e++){let n=this._regions.toRegion(e);if(this._regions.getStartLineNumber(e)<o)(!t||t(n))&&i.push(n);else break}return i}};function toggleCollapseState(e,t,i){let n=[];for(let o of i){let i=e.getRegionAtLine(o);if(i){let o=!i.isCollapsed;if(n.push(i),t>1){let r=e.getRegionsInside(i,(e,i)=>e.isCollapsed!==o&&i<t);n.push(...r)}}}e.toggleCollapseState(n)}function setCollapseStateLevelsDown(e,t,i=Number.MAX_VALUE,n){let o=[];if(n&&n.length>0)for(let r of n){let n=e.getRegionAtLine(r);if(n&&(n.isCollapsed!==t&&o.push(n),i>1)){let r=e.getRegionsInside(n,(e,n)=>e.isCollapsed!==t&&n<i);o.push(...r)}}else{let n=e.getRegionsInside(null,(e,n)=>e.isCollapsed!==t&&n<i);o.push(...n)}e.toggleCollapseState(o)}function setCollapseStateLevelsUp(e,t,i,n){let o=[];for(let r of n){let n=e.getAllRegionsAtLine(r,(e,n)=>e.isCollapsed!==t&&n<=i);o.push(...n)}e.toggleCollapseState(o)}function setCollapseStateUp(e,t,i){let n=[];for(let o of i){let i=e.getAllRegionsAtLine(o,e=>e.isCollapsed!==t);i.length>0&&n.push(i[0])}e.toggleCollapseState(n)}function setCollapseStateAtLevel(e,t,i,n){let o=e.getRegionsInside(null,(e,o)=>o===t&&e.isCollapsed!==i&&!n.some(t=>e.containsLine(t)));e.toggleCollapseState(o)}function setCollapseStateForRest(e,t,i){let n=[];for(let t of i){let i=e.getAllRegionsAtLine(t,void 0);i.length>0&&n.push(i[0])}let o=e.getRegionsInside(null,e=>n.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t);e.toggleCollapseState(o)}function setCollapseStateForMatchingLines(e,t,i){let n=e.textModel,o=e.regions,r=[];for(let e=o.length-1;e>=0;e--)if(i!==o.isCollapsed(e)){let i=o.getStartLineNumber(e);t.test(n.getLineContent(i))&&r.push(o.toRegion(e))}e.toggleCollapseState(r)}function setCollapseStateForType(e,t,i){let n=e.regions,o=[];for(let e=n.length-1;e>=0;e--)i!==n.isCollapsed(e)&&t===n.getType(e)&&o.push(n.toRegion(e));e.toggleCollapseState(o)}function getParentFoldLine(e,t){let i=null,n=t.getRegionAtLine(e);if(null!==n&&e===(i=n.startLineNumber)){let e=n.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function getPreviousFoldLine(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,n=0;for(-1!==e&&(n=t.regions.getStartLineNumber(i.parentIndex));null!==i;)if(i.regionIndex>0){if((i=t.regions.toRegion(i.regionIndex-1)).startLineNumber<=n)break;if(i.parentIndex===e)return i.startLineNumber}else break}}else if(t.regions.length>0)for(i=t.regions.toRegion(t.regions.length-1);null!==i;){if(i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}return null}function getNextFoldLine(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){let e=i.parentIndex,n=0;if(-1!==e)n=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;n=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==i;)if(i.regionIndex<t.regions.length){if((i=t.regions.toRegion(i.regionIndex+1)).startLineNumber>=n)break;if(i.parentIndex===e)return i.startLineNumber}else break}else if(t.regions.length>0)for(i=t.regions.toRegion(0);null!==i;){if(i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}return null}var sR=i(98883);let HiddenRangeModel=class HiddenRangeModel{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new iM.Q5,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(e=>e.range.endLineNumber!==e.range.startLineNumber||0!==(0,sR.Q)(e.text)[0]))}updateHiddenRanges(){let e=!1,t=[],i=0,n=0,o=Number.MAX_VALUE,r=-1,s=this._foldingModel.regions;for(;i<s.length;i++){if(!s.isCollapsed(i))continue;let l=s.getStartLineNumber(i)+1,d=s.getEndLineNumber(i);o<=l&&d<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===l&&this._hiddenRanges[n].endLineNumber===d?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new t4.e(l,1,d,1))),o=l,r=d)}(this._hasLineChanges||e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==findRange(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,n=null,adjustLine=e=>(n&&isInside(e,n)||(n=findRange(this._hiddenRanges,e)),n)?n.startLineNumber-1:null;for(let n=0,o=e.length;n<o;n++){let o=e[n],r=adjustLine(o.startLineNumber);r&&(o=o.setStartPosition(r,i.getLineMaxColumn(r)),t=!0);let s=adjustLine(o.endLineNumber);s&&(o=o.setEndPosition(s,i.getLineMaxColumn(s)),t=!0),e[n]=o}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}};function isInside(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}function findRange(e,t){let i=(0,rV.J_)(e,e=>t<e.startLineNumber)-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}let IndentRangeProvider=class IndentRangeProvider{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id="indent"}dispose(){}compute(e){let t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,n=t&&t.markers;return Promise.resolve(computeRanges(this.editorModel,i,n,this.foldingRangesLimit))}};let RangesCollector=class RangesCollector{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>16777215||t>16777215)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){let t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,n=0;i>=0;i--,n++)e[n]=this._startIndexes[i],t[n]=this._endIndexes[i];return new FoldingRegions(e,t)}{this._foldingRangesLimit.update(this._length,t);let i=0,n=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let o=this._indentOccurrences[e];if(o){if(o+i>t){n=e;break}i+=o}}let o=e.getOptions().tabSize,r=new Uint32Array(t),s=new Uint32Array(t);for(let l=this._length-1,d=0;l>=0;l--){let c=this._startIndexes[l],u=e.getLineContent(c),g=(0,nl.q)(u,o);(g<n||g===n&&i++<t)&&(r[d]=c,s[d]=this._endIndexes[l],d++)}return new FoldingRegions(r,s)}}};let sA={limit:5e3,update:()=>{}};function computeRanges(e,t,i,n=sA){let o;let r=e.getOptions().tabSize,s=new RangesCollector(n);i&&(o=RegExp(`(${i.start.source})|(?:${i.end.source})`));let l=[],d=e.getLineCount()+1;l.push({indent:-1,endAbove:d,line:d});for(let i=e.getLineCount();i>0;i--){let n;let d=e.getLineContent(i),c=(0,nl.q)(d,r),u=l[l.length-1];if(-1===c){t&&(u.endAbove=i);continue}if(o&&(n=d.match(o))){if(n[1]){let e=l.length-1;for(;e>0&&-2!==l[e].indent;)e--;if(e>0){l.length=e+1,u=l[e],s.insertFirst(i,u.line,c),u.line=i,u.indent=c,u.endAbove=i;continue}}else{l.push({indent:-2,endAbove:i,line:i});continue}}if(u.indent>c){do l.pop(),u=l[l.length-1];while(u.indent>c);let e=u.endAbove-1;e-i>=1&&s.insertFirst(i,e,c)}u.indent===c?u.endAbove=i:l.push({indent:c,endAbove:i,line:i})}return s.toIndentRanges(e)}let sP=(0,t7.P6G)("editor.foldBackground",{light:(0,t7.ZnX)(t7.hEj,.3),dark:(0,t7.ZnX)(t7.hEj,.3),hcDark:null,hcLight:null},(0,tz.NC)("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,t7.P6G)("editorGutter.foldingControlForeground",{dark:t7.XZx,light:t7.XZx,hcDark:t7.XZx,hcLight:t7.XZx},(0,tz.NC)("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));let sO=(0,n1.q5)("folding-expanded",tF.l.chevronDown,(0,tz.NC)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),sF=(0,n1.q5)("folding-collapsed",tF.l.chevronRight,(0,tz.NC)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),sB=(0,n1.q5)("folding-manual-collapsed",sF,(0,tz.NC)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),sW=(0,n1.q5)("folding-manual-expanded",sO,(0,tz.NC)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),sV={color:(0,t9.EN)(sP),position:t3.F5.Inline},sH=(0,tz.NC)("linesCollapsed","Click to expand the range."),sz=(0,tz.NC)("linesExpanded","Click to collapse the range.");let FoldingDecorationProvider=class FoldingDecorationProvider{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?FoldingDecorationProvider.HIDDEN_RANGE_DECORATION:"never"===this.showFoldingControls?e?this.showFoldingHighlights?FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION:"mouseover"===this.showFoldingControls?i?FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION:FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION=t6.qx.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:sH,firstLineDecorationClassName:iw.k.asClassName(sF)}),FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=t6.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:sV,isWholeLine:!0,linesDecorationsTooltip:sH,firstLineDecorationClassName:iw.k.asClassName(sF)}),FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION=t6.qx.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:sH,firstLineDecorationClassName:iw.k.asClassName(sB)}),FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=t6.qx.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:sV,isWholeLine:!0,linesDecorationsTooltip:sH,firstLineDecorationClassName:iw.k.asClassName(sB)}),FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=t6.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:sH}),FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=t6.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:sV,isWholeLine:!0,linesDecorationsTooltip:sH}),FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION=t6.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+iw.k.asClassName(sO),linesDecorationsTooltip:sz}),FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=t6.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:iw.k.asClassName(sO),linesDecorationsTooltip:sz}),FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION=t6.qx.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+iw.k.asClassName(sW),linesDecorationsTooltip:sz}),FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=t6.qx.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:iw.k.asClassName(sW),linesDecorationsTooltip:sz}),FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION=t6.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),FoldingDecorationProvider.HIDDEN_RANGE_DECORATION=t6.qx.register({description:"folding-hidden-range-decoration",stickiness:1});let sU={};let SyntaxRangeProvider=class SyntaxRangeProvider{constructor(e,t,i,n,o){for(let r of(this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=n,this.fallbackRangeProvider=o,this.id="syntax",this.disposables=new t2.SL,o&&this.disposables.add(o),t))"function"==typeof r.onDidChange&&this.disposables.add(r.onDidChange(i))}compute(e){return collectSyntaxRanges(this.providers,this.editorModel,e).then(t=>{var i,n;if(t){let e=sanitizeRanges(t,this.foldingRangesLimit);return e}return null!==(n=null===(i=this.fallbackRangeProvider)||void 0===i?void 0:i.compute(e))&&void 0!==n?n:null})}dispose(){this.disposables.dispose()}};function collectSyntaxRanges(e,t,i){let n=null,o=e.map((e,o)=>Promise.resolve(e.provideFoldingRanges(t,sU,i)).then(e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(n)||(n=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&n.push({start:t.start,end:t.end,rank:o,kind:t.kind})}},i1.Cp));return Promise.all(o).then(e=>n)}let syntaxRangeProvider_RangesCollector=class syntaxRangeProvider_RangesCollector{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>16777215||t>16777215)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=n,this._types[o]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){let e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new FoldingRegions(e,t,this._types)}{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let n=0;n<this._nestingLevelCounts.length;n++){let o=this._nestingLevelCounts[n];if(o){if(o+t>e){i=n;break}t+=o}}let n=new Uint32Array(e),o=new Uint32Array(e),r=[];for(let s=0,l=0;s<this._length;s++){let d=this._nestingLevels[s];(d<i||d===i&&t++<e)&&(n[l]=this._startIndexes[s],o[l]=this._endIndexes[s],r[l]=this._types[s],l++)}return new FoldingRegions(n,o,r)}}};function sanitizeRanges(e,t){let i;let n=e.sort((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i}),o=new syntaxRangeProvider_RangesCollector(t),r=[];for(let e of n)if(i){if(e.start>i.start){if(e.end<=i.end)r.push(i),i=e,o.add(e.start,e.end,e.kind&&e.kind.value,r.length);else{if(e.start>i.end){do i=r.pop();while(i&&e.start>i.end);i&&r.push(i),i=e}o.add(e.start,e.end,e.kind&&e.kind.value,r.length)}}}else i=e,o.add(e.start,e.end,e.kind&&e.kind.value,r.length);return o.toIndentRanges()}var folding_param=function(e,t){return function(i,n){t(i,n,e)}};let sK=new tq.uy("foldingEnabled",!1),sj=ew=class extends t2.JT{static get(e){return e.getContribution(ew.ID)}static getFoldingRangeProviders(e,t){var i,n;let o=e.foldingRangeProvider.ordered(t);return null!==(n=null===(i=ew._foldingRangeSelector)||void 0===i?void 0:i.call(ew,o,t))&&void 0!==n?n:o}constructor(e,t,i,n,o,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this.localToDispose=this._register(new t2.SL),this.editor=e,this._foldingLimitReporter=new RangesLimitReporter(e);let s=this.editor.getOptions();this._isEnabled=s.get(43),this._useFoldingProviders="indentation"!==s.get(44),this._unfoldOnClickAfterEndOfLine=s.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=s.get(46),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new FoldingDecorationProvider(e),this.foldingDecorationProvider.showFoldingControls=s.get(110),this.foldingDecorationProvider.showFoldingHighlights=s.get(45),this.foldingEnabled=sK.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(47)&&this.onModelChanged(),e.hasChanged(110)||e.hasChanged(45)){let e=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=e.get(110),this.foldingDecorationProvider.showFoldingHighlights=e.get(45),this.triggerFoldingModelChanged()}e.hasChanged(44)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(44),this.onFoldingStrategyChanged()),e.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),e.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization())&&this.hiddenRangeModel&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new FoldingModel(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new HiddenRangeModel(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new t1.vp(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new t1.pY(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(e=>this.onDidChangeModelContent(e))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{var e,t;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),null===(e=this.updateScheduler)||void 0===e||e.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,null===(t=this.rangeProvider)||void 0===t||t.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;null===(e=this.rangeProvider)||void 0===e||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;let t=new IndentRangeProvider(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){let i=ew.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new SyntaxRangeProvider(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;null===(t=this.hiddenRangeModel)||void 0===t||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{let e=this.foldingModel;if(!e)return null;let t=new nK.G,i=this.getRangeProvider(e.textModel),n=this.foldingRegionPromise=(0,t1.PG)(e=>i.compute(e));return n.then(i=>{if(i&&n===this.foldingRegionPromise){let n;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let e=i.setCollapsedAllOfType(ov.AD.Imports.value,!0);e&&(n=nM.Z.capture(this.editor),this._currentModelHasFoldedImports=e)}let o=this.editor.getSelections(),r=o?o.map(e=>e.startLineNumber):[];e.update(i,r),null==n||n.restore(this.editor);let s=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=s)}return e})}).then(void 0,e=>((0,i1.dL)(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){let e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let n of t){let t=n.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}}).then(void 0,i1.dL)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;let t=e.target.range,i=!1;switch(e.target.type){case 4:{let t=e.target.detail,n=e.target.element.offsetLeft,o=t.offsetX-n;if(o<4)return;i=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){let t=e.target.detail;if(!t.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){let t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==i)return;if(n){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||o.startColumn!==e.getLineMaxColumn(i))return}let r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){let o=r.isCollapsed;if(n||o){let n=e.event.altKey,s=[];if(n){let e=t.getRegionsInside(null,e=>!e.containedBy(r)&&!r.containedBy(e));for(let t of e)t.isCollapsed&&s.push(t);0===s.length&&(s=e)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(let e of t.getRegionsInside(r))e.isCollapsed===o&&s.push(e);(o||!i||0===s.length)&&s.push(r)}t.toggleCollapseState(s),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};sj.ID="editor.contrib.folding",sj=ew=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([folding_param(1,tq.i6),folding_param(2,n$.c_),folding_param(3,i5.lT),folding_param(4,nH.A),folding_param(5,ib.p)],sj);let RangesLimitReporter=class RangesLimitReporter{constructor(e){this.editor=e,this._onDidChange=new iM.Q5,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}};let FoldingAction=class FoldingAction extends tB.R6{runEditorCommand(e,t,i){let n=e.get(n$.c_),o=sj.get(t);if(!o)return;let r=o.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(e=>{if(e){this.invoke(o,e,t,i,n);let r=t.getSelection();r&&o.reveal(r.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}};function foldingArgumentsConstraint(e){return!!(nR.o8(e)||nR.Kn(e)&&(nR.o8(e.levels)||nR.hj(e.levels))&&(nR.o8(e.direction)||nR.HD(e.direction))&&(nR.o8(e.selectionLines)||Array.isArray(e.selectionLines)&&e.selectionLines.every(nR.hj)))}let UnfoldAction=class UnfoldAction extends FoldingAction{constructor(){super({id:"editor.unfold",label:tz.NC("unfoldAction.label","Unfold"),alias:"Unfold",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:foldingArgumentsConstraint,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){let o=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&"up"===n.direction?setCollapseStateLevelsUp(t,!1,o,r):setCollapseStateLevelsDown(t,!1,o,r)}};let UnFoldRecursivelyAction=class UnFoldRecursivelyAction extends FoldingAction{constructor(){super({id:"editor.unfoldRecursively",label:tz.NC("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2142),weight:100}})}invoke(e,t,i,n){setCollapseStateLevelsDown(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}};let FoldAction=class FoldAction extends FoldingAction{constructor(){super({id:"editor.fold",label:tz.NC("foldAction.label","Fold"),alias:"Fold",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:foldingArgumentsConstraint,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){let o=this.getLineNumbers(n,i),r=n&&n.levels,s=n&&n.direction;"number"!=typeof r&&"string"!=typeof s?setCollapseStateUp(t,!0,o):"up"===s?setCollapseStateLevelsUp(t,!0,r||1,o):setCollapseStateLevelsDown(t,!0,r||1,o)}};let ToggleFoldAction=class ToggleFoldAction extends FoldingAction{constructor(){super({id:"editor.toggleFold",label:tz.NC("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2090),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);toggleCollapseState(t,1,n)}};let FoldRecursivelyAction=class FoldRecursivelyAction extends FoldingAction{constructor(){super({id:"editor.foldRecursively",label:tz.NC("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2140),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);setCollapseStateLevelsDown(t,!0,Number.MAX_VALUE,n)}};let FoldAllBlockCommentsAction=class FoldAllBlockCommentsAction extends FoldingAction{constructor(){super({id:"editor.foldAllBlockComments",label:tz.NC("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2138),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())setCollapseStateForType(t,ov.AD.Comment.value,!0);else{let e=i.getModel();if(!e)return;let n=o.getLanguageConfiguration(e.getLanguageId()).comments;if(n&&n.blockCommentStartToken){let e=RegExp("^\\s*"+(0,iy.ec)(n.blockCommentStartToken));setCollapseStateForMatchingLines(t,e,!0)}}}};let FoldAllRegionsAction=class FoldAllRegionsAction extends FoldingAction{constructor(){super({id:"editor.foldAllMarkerRegions",label:tz.NC("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2077),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())setCollapseStateForType(t,ov.AD.Region.value,!0);else{let e=i.getModel();if(!e)return;let n=o.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(n&&n.markers&&n.markers.start){let e=new RegExp(n.markers.start);setCollapseStateForMatchingLines(t,e,!0)}}}};let UnfoldAllRegionsAction=class UnfoldAllRegionsAction extends FoldingAction{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:tz.NC("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2078),weight:100}})}invoke(e,t,i,n,o){if(t.regions.hasTypes())setCollapseStateForType(t,ov.AD.Region.value,!1);else{let e=i.getModel();if(!e)return;let n=o.getLanguageConfiguration(e.getLanguageId()).foldingRules;if(n&&n.markers&&n.markers.start){let e=new RegExp(n.markers.start);setCollapseStateForMatchingLines(t,e,!1)}}}};let FoldAllExceptAction=class FoldAllExceptAction extends FoldingAction{constructor(){super({id:"editor.foldAllExcept",label:tz.NC("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2136),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);setCollapseStateForRest(t,!0,n)}};let UnfoldAllExceptAction=class UnfoldAllExceptAction extends FoldingAction{constructor(){super({id:"editor.unfoldAllExcept",label:tz.NC("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2134),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);setCollapseStateForRest(t,!1,n)}};let FoldAllAction=class FoldAllAction extends FoldingAction{constructor(){super({id:"editor.foldAll",label:tz.NC("foldAllAction.label","Fold All"),alias:"Fold All",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2069),weight:100}})}invoke(e,t,i){setCollapseStateLevelsDown(t,!0)}};let UnfoldAllAction=class UnfoldAllAction extends FoldingAction{constructor(){super({id:"editor.unfoldAll",label:tz.NC("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2088),weight:100}})}invoke(e,t,i){setCollapseStateLevelsDown(t,!1)}};let FoldLevelAction=class FoldLevelAction extends FoldingAction{getFoldingLevel(){return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length))}invoke(e,t,i){setCollapseStateAtLevel(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}};FoldLevelAction.ID_PREFIX="editor.foldLevel",FoldLevelAction.ID=e=>FoldLevelAction.ID_PREFIX+e;let GotoParentFoldAction=class GotoParentFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoParentFold",label:tz.NC("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=getParentFoldLine(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}};let GotoPreviousFoldAction=class GotoPreviousFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoPreviousFold",label:tz.NC("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=getPreviousFoldLine(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}};let GotoNextFoldAction=class GotoNextFoldAction extends FoldingAction{constructor(){super({id:"editor.gotoNextFold",label:tz.NC("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=getNextFoldLine(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}};let FoldRangeFromSelectionAction=class FoldRangeFromSelectionAction extends FoldingAction{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:tz.NC("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2135),weight:100}})}invoke(e,t,i){var n;let o=[],r=i.getSelections();if(r){for(let e of r){let t=e.endLineNumber;1===e.endColumn&&--t,t>e.startLineNumber&&(o.push({startLineNumber:e.startLineNumber,endLineNumber:t,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:e.startLineNumber,startColumn:1,endLineNumber:e.startLineNumber,endColumn:1}))}if(o.length>0){o.sort((e,t)=>e.startLineNumber-t.startLineNumber);let e=FoldingRegions.sanitizeAndMerge(t.regions,o,null===(n=i.getModel())||void 0===n?void 0:n.getLineCount());t.updatePost(FoldingRegions.fromFoldRanges(e))}}}};let RemoveFoldRangeFromSelectionAction=class RemoveFoldRangeFromSelectionAction extends FoldingAction{constructor(){super({id:"editor.removeManualFoldingRanges",label:tz.NC("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2137),weight:100}})}invoke(e,t,i){let n=i.getSelections();if(n){let i=[];for(let e of n){let{startLineNumber:t,endLineNumber:n}=e;i.push(n>=t?{startLineNumber:t,endLineNumber:n}:{endLineNumber:n,startLineNumber:t})}t.removeManualRanges(i),e.triggerFoldingModelChanged()}}};(0,tB._K)(sj.ID,sj,0),(0,tB.Qr)(UnfoldAction),(0,tB.Qr)(UnFoldRecursivelyAction),(0,tB.Qr)(FoldAction),(0,tB.Qr)(FoldRecursivelyAction),(0,tB.Qr)(FoldAllAction),(0,tB.Qr)(UnfoldAllAction),(0,tB.Qr)(FoldAllBlockCommentsAction),(0,tB.Qr)(FoldAllRegionsAction),(0,tB.Qr)(UnfoldAllRegionsAction),(0,tB.Qr)(FoldAllExceptAction),(0,tB.Qr)(UnfoldAllExceptAction),(0,tB.Qr)(ToggleFoldAction),(0,tB.Qr)(GotoParentFoldAction),(0,tB.Qr)(GotoPreviousFoldAction),(0,tB.Qr)(GotoNextFoldAction),(0,tB.Qr)(FoldRangeFromSelectionAction),(0,tB.Qr)(RemoveFoldRangeFromSelectionAction);for(let e=1;e<=7;e++)(0,tB.QG)(new FoldLevelAction({id:FoldLevelAction.ID(e),label:tz.NC("foldLevelAction.label","Fold Level {0}",e),alias:`Fold Level ${e}`,precondition:sK,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2048|21+e),weight:100}}));tK.P.registerCommand("_executeFoldingRangeProvider",async function(e,...t){let[i]=t;if(!(i instanceof ip.o))throw(0,i1.b1)();let n=e.get(ib.p),o=e.get(i2.q).getModel(i);if(!o)throw(0,i1.b1)();let r=e.get(tj.Ui);if(!r.getValue("editor.folding",{resource:i}))return[];let s=e.get(n$.c_),l=r.getValue("editor.foldingStrategy",{resource:i}),d={get limit(){return r.getValue("editor.foldingMaximumRegions",{resource:i})},update:(e,t)=>{}},c=new IndentRangeProvider(o,s,d),u=c;if("indentation"!==l){let e=sj.getFoldingRangeProviders(n,o);e.length&&(u=new SyntaxRangeProvider(o,e,()=>{},d,c))}let g=await u.compute(i0.T.None),m=[];try{if(g)for(let e=0;e<g.length;e++){let t=g.getType(e);m.push({start:g.getStartLineNumber(e),end:g.getEndLineNumber(e),kind:t?ov.AD.fromValue(t):void 0})}return m}finally{u.dispose()}});var sq=i(22903);let EditorFontZoomIn=class EditorFontZoomIn extends tB.R6{constructor(){super({id:"editor.action.fontZoomIn",label:tz.NC("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){sq.C.setZoomLevel(sq.C.getZoomLevel()+1)}};let EditorFontZoomOut=class EditorFontZoomOut extends tB.R6{constructor(){super({id:"editor.action.fontZoomOut",label:tz.NC("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){sq.C.setZoomLevel(sq.C.getZoomLevel()-1)}};let EditorFontZoomReset=class EditorFontZoomReset extends tB.R6{constructor(){super({id:"editor.action.fontZoomReset",label:tz.NC("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){sq.C.setZoomLevel(0)}};(0,tB.Qr)(EditorFontZoomIn),(0,tB.Qr)(EditorFontZoomOut),(0,tB.Qr)(EditorFontZoomReset);var s$=i(33848),sG=i(2068),sQ=i(15934),sZ=i(24238),sY=i(54316),formatActions_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},formatActions_param=function(e,t){return function(i,n){t(i,n,e)}};let sJ=class{constructor(e,t,i,n){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=n,this._disposables=new t2.SL,this._sessionDisposables=new t2.SL,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(e=>{e.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;let e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new s$.q;for(let e of t.autoFormatTriggerCharacters)i.add(e.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let t=this._editor.getModel(),i=this._editor.getPosition(),n=new i0.A,o=this._editor.onDidChangeModelContent(e=>{if(e.isFlush){n.cancel(),o.dispose();return}for(let t=0,r=e.changes.length;t<r;t++){let r=e.changes[t];if(r.range.endLineNumber<=i.lineNumber){n.cancel(),o.dispose();return}}});(0,sQ.Qs)(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),n.token).then(e=>{!n.token.isCancellationRequested&&(0,ia.Of)(e)&&(this._accessibilitySignalService.playSignal(sY.iP.format,{userGesture:!1}),sZ.V.execute(this._editor,e,!0))}).finally(()=>{o.dispose()})}};sJ.ID="editor.contrib.autoFormat",sJ=formatActions_decorate([formatActions_param(1,ib.p),formatActions_param(2,sG.p),formatActions_param(3,sY.IV)],sJ);let sX=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new t2.SL,this._callOnModel=new t2.SL,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&!(this.editor.getSelections().length>1)&&this._instantiationService.invokeFunction(sQ.x$,this.editor,e,2,iN.Ex.None,i0.T.None,!1).catch(i1.dL)}};sX.ID="editor.contrib.formatOnPaste",sX=formatActions_decorate([formatActions_param(1,ib.p),formatActions_param(2,iL.TG)],sX);let FormatDocumentAction=class FormatDocumentAction extends tB.R6{constructor(){super({id:"editor.action.formatDocument",label:tz.NC("formatDocument.label","Format Document"),alias:"Format Document",precondition:tq.Ao.and(tH.u.notInCompositeEditor,tH.u.writable,tH.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){let i=e.get(iL.TG),n=e.get(iN.ek);await n.showWhile(i.invokeFunction(sQ.Qq,t,1,iN.Ex.None,i0.T.None,!0),250)}}};let FormatSelectionAction=class FormatSelectionAction extends tB.R6{constructor(){super({id:"editor.action.formatSelection",label:tz.NC("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:tq.Ao.and(tH.u.writable,tH.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2084),weight:100},contextMenuOpts:{when:tH.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;let i=e.get(iL.TG),n=t.getModel(),o=t.getSelections().map(e=>e.isEmpty()?new t4.e(e.startLineNumber,1,e.startLineNumber,n.getLineMaxColumn(e.startLineNumber)):e),r=e.get(iN.ek);await r.showWhile(i.invokeFunction(sQ.x$,t,o,1,iN.Ex.None,i0.T.None,!0),250)}};(0,tB._K)(sJ.ID,sJ,2),(0,tB._K)(sX.ID,sX,2),(0,tB.Qr)(FormatDocumentAction),(0,tB.Qr)(FormatSelectionAction),tK.P.registerCommand("editor.action.format",async e=>{let t=e.get(tW.$).getFocusedCodeEditor();if(!t||!t.hasModel())return;let i=e.get(tK.H);t.getSelection().isEmpty()?await i.executeCommand("editor.action.formatDocument"):await i.executeCommand("editor.action.formatSelection")});var outlineModel_param=function(e,t){return function(i,n){t(i,n,e)}};let TreeElement=class TreeElement{remove(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}static findId(e,t){let i;"string"==typeof e?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,void 0!==t.children.get(i)&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let e=0;void 0!==t.children.get(n);e++)n=`${i}_${e}`;return n}static empty(e){return 0===e.children.size}};let OutlineElement=class OutlineElement extends TreeElement{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}};let OutlineGroup=class OutlineGroup extends TreeElement{constructor(e,t,i,n){super(),this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}};let OutlineModel=class OutlineModel extends TreeElement{static create(e,t,i){let n=new i0.A(i),o=new OutlineModel(t.uri),r=e.ordered(t),s=r.map((e,i)=>{var r;let s=TreeElement.findId(`provider_${i}`,o),l=new OutlineGroup(s,o,null!==(r=e.displayName)&&void 0!==r?r:"Unknown Outline Provider",i);return Promise.resolve(e.provideDocumentSymbols(t,n.token)).then(e=>{for(let t of e||[])OutlineModel._makeOutlineElement(t,l);return l},e=>((0,i1.Cp)(e),l)).then(e=>{TreeElement.empty(e)?e.remove():o._groups.set(s,e)})}),l=e.onDidChange(()=>{let i=e.ordered(t);(0,ia.fS)(i,r)||n.cancel()});return Promise.all(s).then(()=>n.token.isCancellationRequested&&!i.isCancellationRequested?OutlineModel.create(e,t,i):o._compact()).finally(()=>{n.dispose(),l.dispose(),n.dispose()})}static _makeOutlineElement(e,t){let i=TreeElement.findId(e,t),n=new OutlineElement(i,t,e);if(e.children)for(let t of e.children)OutlineModel._makeOutlineElement(t,n);t.children.set(n.id,n)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(let[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{let e=il.$.first(this._groups.values());for(let[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){let e=[];for(let t of this.children.values())t instanceof OutlineElement?e.push(t.symbol):e.push(...il.$.map(t.children.values(),e=>e.symbol));return e.sort((e,t)=>t4.e.compareRangesUsingStarts(e.range,t.range))}asListOfDocumentSymbols(){let e=this.getTopLevelSymbols(),t=[];return OutlineModel._flattenDocumentSymbols(t,e,""),t.sort((e,t)=>t5.L.compare(t4.e.getStartPosition(e.range),t4.e.getStartPosition(t.range))||t5.L.compare(t4.e.getEndPosition(t.range),t4.e.getEndPosition(e.range)))}static _flattenDocumentSymbols(e,t,i){for(let n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&OutlineModel._flattenDocumentSymbols(e,n.children,n.name)}};let s0=(0,iL.yh)("IOutlineModelService"),s1=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new t2.SL,this._cache=new nA.z6(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(e=>{this._cache.delete(e.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){let i=this._languageFeaturesService.documentSymbolProvider,n=i.ordered(e),o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!(0,ia.fS)(o.provider,n)){let t=new i0.A;o={versionId:e.getVersionId(),provider:n,promiseCnt:0,source:t,promise:OutlineModel.create(i,e,t.token),model:void 0},this._cache.set(e.id,o);let r=Date.now();o.promise.then(t=>{o.model=t,this._debounceInformation.update(e,Date.now()-r)}).catch(t=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;let r=t.onCancellationRequested(()=>{0==--o.promiseCnt&&(o.source.cancel(),this._cache.delete(e.id))});try{return await o.promise}finally{r.dispose()}}};s1=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([outlineModel_param(0,ib.p),outlineModel_param(1,nH.A),outlineModel_param(2,i2.q)],s1),(0,nv.z)(s0,s1,1),tK.P.registerCommand("_executeDocumentSymbolProvider",async function(e,...t){let[i]=t;(0,nR.p_)(ip.o.isUri(i));let n=e.get(s0),o=e.get(n6.S),r=await o.createModelReference(i);try{return(await n.getOrCreate(r.object.textEditorModel,i0.T.None)).getTopLevelSymbols()}finally{r.dispose()}});var s2=i(1877),s5=i(77393);let InlineCompletionContextKeys=class InlineCompletionContextKeys extends t2.JT{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=InlineCompletionContextKeys.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=InlineCompletionContextKeys.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=InlineCompletionContextKeys.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,rp.EH)(e=>{let t=this.model.read(e),i=null==t?void 0:t.state.read(e),n=!!(null==i?void 0:i.inlineCompletion)&&(null==i?void 0:i.primaryGhostText)!==void 0&&!(null==i?void 0:i.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(n),(null==i?void 0:i.primaryGhostText)&&(null==i?void 0:i.inlineCompletion)&&this.suppressSuggestions.set(i.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register((0,rp.EH)(e=>{let t=this.model.read(e),i=!1,n=!0,o=null==t?void 0:t.primaryGhostText.read(e);if((null==t?void 0:t.selectedSuggestItem)&&o&&o.parts.length>0){let{column:e,lines:r}=o.parts[0],s=r[0],l=t.textModel.getLineIndentColumn(o.lineNumber);if(e<=l){let e=(0,iy.LC)(s);-1===e&&(e=s.length-1),i=e>0;let o=t.textModel.getOptions().tabSize,r=s5.i.visibleColumnFromColumn(s,e+1,o);n=r<o}}this.inlineCompletionSuggestsIndentation.set(i),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}))}};InlineCompletionContextKeys.inlineSuggestionVisible=new tq.uy("inlineSuggestionVisible",!1,(0,tz.NC)("inlineSuggestionVisible","Whether an inline suggestion is visible")),InlineCompletionContextKeys.inlineSuggestionHasIndentation=new tq.uy("inlineSuggestionHasIndentation",!1,(0,tz.NC)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize=new tq.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,tz.NC)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),InlineCompletionContextKeys.suppressSuggestions=new tq.uy("inlineSuggestionSuppressSuggestions",void 0,(0,tz.NC)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));var s4=i(76883);i(79831);var s3=i(38679),s6=i(53778),s7=i(46338),s9=i(76320),s8=i(50296);function applyEdits(e,t){let i=new PositionOffsetTransformer(e),n=t.map(e=>{let t=t4.e.lift(e.range);return{startOffset:i.getOffset(t.getStartPosition()),endOffset:i.getOffset(t.getEndPosition()),text:e.text}});for(let t of(n.sort((e,t)=>t.startOffset-e.startOffset),n))e=e.substring(0,t.startOffset)+t.text+e.substring(t.endOffset);return e}let PositionOffsetTransformer=class PositionOffsetTransformer{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}};let ae=[];function getReadonlyEmptyArray(){return ae}let ColumnRange=class ColumnRange{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new i1.he(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new t4.e(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}};function applyObservableDecorations(e,t){let i=new t2.SL,n=e.createDecorationsCollection();return i.add((0,rp.UV)({debugName:()=>`Apply decorations from ${t.debugName}`},e=>{let i=t.read(e);n.set(i)})),i.add({dispose:()=>{n.clear()}}),i}function addPositions(e,t){return new t5.L(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}function subtractPositions(e,t){return new t5.L(e.lineNumber-t.lineNumber+1,e.lineNumber-t.lineNumber==0?e.column-t.column+1:e.column)}function lengthOfText(e){let t=1,i=1;for(let n of e)"\n"===n?(t++,i=1):i++;return new t5.L(t,i)}function getNewRanges(e){var t;let i=[],n=0,o=0,r=0;for(let s of e){let e=null!==(t=s.text)&&void 0!==t?t:"",l=lengthOfText(e),d=t5.L.lift({lineNumber:s.range.startLineNumber+o,column:s.range.startColumn+(s.range.startLineNumber===n?r:0)}),c=addPositions(d,l);i.push(t4.e.fromPositions(d,c)),o+=l.lineNumber-s.range.endLineNumber+s.range.startLineNumber-1,r=c.column-s.range.endColumn,n=s.range.endLineNumber}return i}let Permutation=class Permutation{constructor(e){this._indexMap=e}static createSortPermutation(e,t){let i=Array.from(e.keys()).sort((i,n)=>t(e[i],e[n]));return new Permutation(i)}apply(e){return e.map((t,i)=>e[this._indexMap[i]])}inverse(){let e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new Permutation(e)}};let GhostText=class GhostText{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(0===this.parts.length)return"";let t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1),n=applyEdits(i,this.parts.map(e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")})));return n.substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>0===e.lines.length)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}};let GhostTextPart=class GhostTextPart{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=(0,iy.uq)(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}};let GhostTextReplacement=class GhostTextReplacement{constructor(e,t,i,n=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=n,this.parts=[new GhostTextPart(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=(0,iy.uq)(this.text)}renderForScreenReader(e){return this.newLines.join("\n")}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>0===e.lines.length)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}};function ghostTextsOrReplacementsEqual(e,t){return(0,ia.fS)(e,t,ghostTextOrReplacementEquals)}function ghostTextOrReplacementEquals(e,t){return e===t||!!e&&!!t&&(e instanceof GhostText&&t instanceof GhostText||e instanceof GhostTextReplacement&&t instanceof GhostTextReplacement)&&e.equals(t)}let at="ghost-text",ai=class extends t2.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,rp.uh)(this,!1),this.currentTextModel=(0,rp.rD)(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,rp.nK)(this,e=>{let t;if(this.isDisposed.read(e))return;let i=this.currentTextModel.read(e);if(i!==this.model.targetTextModel.read(e))return;let n=this.model.ghostText.read(e);if(!n)return;let o=n instanceof GhostTextReplacement?n.columnRange:void 0,r=[],s=[];function addToAdditionalLines(e,t){if(s.length>0){let i=s[s.length-1];t&&i.decorations.push(new s9.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(let i of e)s.push({content:i,decorations:t?[new s9.Kp(1,i.length+1,t,0)]:[]})}let l=i.getLineContent(n.lineNumber),d=0;for(let e of n.parts){let i=e.lines;void 0===t?(r.push({column:e.column,text:i[0],preview:e.preview}),i=i.slice(1)):addToAdditionalLines([l.substring(d,e.column-1)],void 0),i.length>0&&(addToAdditionalLines(i,at),void 0===t&&e.column<=l.length&&(t=e.column)),d=e.column-1}void 0!==t&&addToAdditionalLines([l.substring(d)],void 0);let c=void 0!==t?new ColumnRange(t,l.length+1):void 0;return{replacedRange:o,inlineTexts:r,additionalLines:s,hiddenRange:c,lineNumber:n.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(e),targetTextModel:i}}),this.decorations=(0,rp.nK)(this,e=>{let t=this.uiState.read(e);if(!t)return[];let i=[];for(let e of(t.replacedRange&&i.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),t.hiddenRange&&i.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),t.inlineTexts))i.push({range:t4.e.fromPositions(new t5.L(t.lineNumber,e.column)),options:{description:at,after:{content:e.text,inlineClassName:e.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:t3.RM.Left},showIfCollapsed:!0}});return i}),this.additionalLinesWidget=this._register(new AdditionalLinesWidget(this.editor,this.languageService.languageIdCodec,(0,rp.nK)(e=>{let t=this.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0}))),this._register((0,t2.OF)(()=>{this.isDisposed.set(!0,void 0)})),this._register(applyObservableDecorations(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};ai=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(b=n3.O,function(e,t){b(e,t,2)})],ai);let AdditionalLinesWidget=class AdditionalLinesWidget extends t2.JT{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=(0,rp.aq)("editorOptionChanged",iM.ju.filter(this.editor.onDidChangeConfiguration,e=>e.hasChanged(33)||e.hasChanged(117)||e.hasChanged(99)||e.hasChanged(94)||e.hasChanged(51)||e.hasChanged(50)||e.hasChanged(67))),this._register((0,rp.EH)(e=>{let t=this.lines.read(e);this.editorOptionsChanged.read(e),t?this.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){let n=this.editor.getModel();if(!n)return;let{tabSize:o}=n.getOptions();this.editor.changeViewZones(n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);let r=Math.max(t.length,i);if(r>0){let i=document.createElement("div");renderLines(i,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:r,domNode:i,afterColumnAffinity:1})}})}};function renderLines(e,t,i,n,o){let r=n.get(33),s=n.get(117),l=n.get(94),d=n.get(51),c=n.get(50),u=n.get(67),g=new s6.HT(1e4);g.appendString('<div class="suggest-preview-text">');for(let e=0,n=i.length;e<n;e++){let n=i[e],m=n.content;g.appendString('<div class="view-line'),g.appendString('" style="top:'),g.appendString(String(e*u)),g.appendString('px;width:1000000px;">');let f=iy.$i(m),_=iy.Ut(m),v=s7.A.createEmpty(m,o);(0,s8.d1)(new s8.IJ(c.isMonospace&&!r,c.canUseHalfwidthRightwardsArrow,m,!1,f,_,0,v,n.decorations,t,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,s,"none",l,d!==nk.n0.OFF,null),g),g.appendString("</div>")}g.appendString("</div>"),(0,s3.N)(e,c);let m=g.build(),f=an?an.createHTML(m):m;e.innerHTML=f}let an=(0,s4.Z)("editorGhostText",{createHTML:e=>e});var ao=i(77853),ar=i(88590),as=i(1511),aa=i(41096),al=i(99852),ad=i(27402);function fixBracketsInLine(e,t){let i=new al.FE,n=new ar.Z(i,e=>t.getLanguageConfiguration(e)),o=new ad.xH(new StaticTokenizerSource([e]),n),r=(0,aa.w)(o,[],void 0,!0),s="",l=e.getLineContent();function processNode(e,t){if(2===e.kind){if(processNode(e.openingBracket,t),t=(0,as.Ii)(t,e.openingBracket.length),e.child&&(processNode(e.child,t),t=(0,as.Ii)(t,e.child.length)),e.closingBracket)processNode(e.closingBracket,t),t=(0,as.Ii)(t,e.closingBracket.length);else{let t=n.getSingleLanguageBracketTokens(e.openingBracket.languageId),i=t.findClosingTokenText(e.openingBracket.bracketIds);s+=i}}else if(3===e.kind);else if(0===e.kind||1===e.kind)s+=l.substring((0,as.F_)(t),(0,as.F_)((0,as.Ii)(t,e.length)));else if(4===e.kind)for(let i of e.children)processNode(i,t),t=(0,as.Ii)(t,i.length)}return processNode(r,as.xl),s}let StaticTokenizerSource=class StaticTokenizerSource{constructor(e){this.lines=e,this.tokenization={getLineTokens:e=>this.lines[e-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}};async function provideInlineCompletions(e,t,i,n,o=i0.T.None,r){let s=getDefaultRange(t,i),l=e.all(i),d=new nA.ri;for(let e of l)e.groupId&&d.add(e.groupId,e);function getPreferredProviders(e){if(!e.yieldsToGroupIds)return[];let t=[];for(let i of e.yieldsToGroupIds||[]){let e=d.get(i);for(let i of e)t.push(i)}return t}let c=new Map,u=new Set;function findPreferredProviderCircle(e,t){if(t=[...t,e],u.has(e))return t;u.add(e);try{let i=getPreferredProviders(e);for(let e of i){let i=findPreferredProviderCircle(e,t);if(i)return i}}finally{u.delete(e)}}function processProvider(e){let r=c.get(e);if(r)return r;let s=findPreferredProviderCircle(e,[]);s&&(0,i1.Cp)(Error(`Inline completions: cyclic yield-to dependency detected. Path: ${s.map(e=>e.toString?e.toString():""+e).join(" -> ")}`));let l=new t1.CR;return c.set(e,l.p),(async()=>{if(!s){let t=getPreferredProviders(e);for(let e of t){let t=await processProvider(e);if(t&&t.items.length>0)return}}try{let r=await e.provideInlineCompletions(i,t,n,o);return r}catch(e){(0,i1.Cp)(e);return}})().then(e=>l.complete(e),e=>l.error(e)),l.p}let g=await Promise.all(l.map(async e=>({provider:e,completions:await processProvider(e)}))),m=new Map,f=[];for(let e of g){let t=e.completions;if(!t)continue;let n=new InlineCompletionList(t,e.provider);for(let e of(f.push(n),t.items)){let t=InlineCompletionItem.from(e,n,s,i,r);m.set(t.hash(),t)}}return new InlineCompletionProviderResult(Array.from(m.values()),new Set(m.keys()),f)}let InlineCompletionProviderResult=class InlineCompletionProviderResult{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(let e of this.providerResults)e.removeRef()}};let InlineCompletionList=class InlineCompletionList{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,0===this.refCount&&this.provider.freeInlineCompletions(this.inlineCompletions)}};let InlineCompletionItem=class InlineCompletionItem{static from(e,t,i,n,o){let r,s;let l=e.range?t4.e.lift(e.range):i;if("string"==typeof e.insertText){if(r=e.insertText,o&&e.completeBracketPairs){r=closeBrackets(r,l.getStartPosition(),n,o);let t=r.length-e.insertText.length;0!==t&&(l=new t4.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+t))}s=void 0}else if("snippet"in e.insertText){let t=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=closeBrackets(e.insertText.snippet,l.getStartPosition(),n,o);let i=e.insertText.snippet.length-t;0!==i&&(l=new t4.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+i))}let i=new SnippetParser().parse(e.insertText.snippet);1===i.children.length&&i.children[0]instanceof Text?(r=i.children[0].value,s=void 0):(r=i.toString(),s={snippet:e.insertText.snippet,range:l})}else(0,ao.vE)(e.insertText);return new InlineCompletionItem(r,e.command,l,r,s,e.additionalTextEdits||getReadonlyEmptyArray(),e,t)}constructor(e,t,i,n,o,r,s,l){this.filterText=e,this.command=t,this.range=i,this.insertText=n,this.snippetInfo=o,this.additionalTextEdits=r,this.sourceInlineCompletion=s,this.source=l,n=(e=e.replace(/\r\n|\r/g,"\n")).replace(/\r\n|\r/g,"\n")}withRange(e){return new InlineCompletionItem(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}};function getDefaultRange(e,t){let i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new t4.e(e.lineNumber,i.startColumn,e.lineNumber,n):t4.e.fromPositions(e,e.with(void 0,n))}function closeBrackets(e,t,i,n){let o=i.getLineContent(t.lineNumber).substring(0,t.column-1),r=o+e,s=i.tokenization.tokenizeLineWithEdit(t,r.length-(t.column-1),e),l=null==s?void 0:s.sliceAndInflate(t.column-1,r.length,0);if(!l)return e;let d=fixBracketsInLine(l,n);return d}var ah=i(17405);let SingleTextEdit=class SingleTextEdit{constructor(e,t){this.range=e,this.text=t}removeCommonPrefix(e,t){let i=t?this.range.intersectRanges(t):this.range;if(!i)return this;let n=e.getValueInRange(i,1),o=(0,iy.Mh)(n,this.text),r=addPositions(this.range.getStartPosition(),lengthOfText(n.substring(0,o))),s=this.text.substring(o),l=t4.e.fromPositions(r,this.range.getEndPosition());return new SingleTextEdit(l,s)}augments(e){return this.text.startsWith(e.text)&&rangeExtends(this.range,e.range)}computeGhostText(e,t,i,n=0){let o=this.removeCommonPrefix(e);if(o.range.endLineNumber!==o.range.startLineNumber)return;let r=e.getLineContent(o.range.startLineNumber),s=(0,iy.V8)(r).length,l=o.range.startColumn-1<=s;if(l){let e=(0,iy.V8)(o.text).length,t=r.substring(o.range.startColumn-1,s),[i,n]=[o.range.getStartPosition(),o.range.getEndPosition()],l=i.column+t.length<=n.column?i.delta(0,t.length):n,d=t4.e.fromPositions(l,n),c=o.text.startsWith(t)?o.text.substring(t.length):o.text.substring(e);o=new SingleTextEdit(d,c)}let d=e.getValueInRange(o.range),c=cachingDiff(d,o.text);if(!c)return;let u=o.range.startLineNumber,g=[];if("prefix"===t){let e=c.filter(e=>0===e.originalLength);if(e.length>1||1===e.length&&e[0].originalStart!==d.length)return}let m=o.text.length-n;for(let e of c){let n=o.range.startColumn+e.originalStart+e.originalLength;if("subwordSmart"===t&&i&&i.lineNumber===o.range.startLineNumber&&n<i.column||e.originalLength>0)return;if(0===e.modifiedLength)continue;let r=e.modifiedStart+e.modifiedLength,s=Math.max(e.modifiedStart,Math.min(r,m)),l=o.text.substring(e.modifiedStart,s),d=o.text.substring(s,Math.max(e.modifiedStart,r));l.length>0&&g.push(new GhostTextPart(n,l,!1)),d.length>0&&g.push(new GhostTextPart(n,d,!0))}return new GhostText(u,g)}};function rangeExtends(e,t){return t.getStartPosition().equals(e.getStartPosition())&&t.getEndPosition().isBeforeOrEqual(e.getEndPosition())}function cachingDiff(e,t){if((null==r?void 0:r.originalValue)===e&&(null==r?void 0:r.newValue)===t)return null==r?void 0:r.changes;{let i=smartDiff(e,t,!0);if(i){let n=deletedCharacters(i);if(n>0){let o=smartDiff(e,t,!1);o&&deletedCharacters(o)<n&&(i=o)}}return r={originalValue:e,newValue:t,changes:i},i}}function deletedCharacters(e){let t=0;for(let i of e)t+=i.originalLength;return t}function smartDiff(e,t,i){if(e.length>5e3||t.length>5e3)return;function getMaxCharCode(e){let t=0;for(let i=0,n=e.length;i<n;i++){let n=e.charCodeAt(i);n>t&&(t=n)}return t}let n=Math.max(getMaxCharCode(e),getMaxCharCode(t));function getUniqueCharCode(e){if(e<0)throw Error("unexpected");return n+e+1}function getElements(e){let t=0,n=0,o=new Int32Array(e.length);for(let r=0,s=e.length;r<s;r++)if(i&&"("===e[r]){let e=100*n+t;o[r]=getUniqueCharCode(2*e),t++}else if(i&&")"===e[r]){t=Math.max(t-1,0);let e=100*n+t;o[r]=getUniqueCharCode(2*e+1),0===t&&n++}else o[r]=e.charCodeAt(r);return o}let o=getElements(e),r=getElements(t);return new ah.Hs({getElements:()=>o},{getElements:()=>r}).ComputeDiff(!1).changes}var inlineCompletionsSource_param=function(e,t){return function(i,n){t(i,n,e)}};let ac=class extends t2.JT{constructor(e,t,i,n,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=n,this.languageConfigurationService=o,this._updateOperation=this._register(new t2.XK),this.inlineCompletions=(0,rp.DN)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,rp.DN)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){var n,o;let r=new UpdateRequest(e,t,this.textModel.getVersionId()),s=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(null===(n=this._updateOperation.value)||void 0===n?void 0:n.request.satisfies(r))return this._updateOperation.value.promise;if(null===(o=s.get())||void 0===o?void 0:o.request.satisfies(r))return Promise.resolve(!0);let l=!!this._updateOperation.value;this._updateOperation.clear();let d=new i0.A,c=(async()=>{let n=l||t.triggerKind===ov.bw.Automatic;if(n&&await wait(this._debounceValue.get(this.textModel),d.token),d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;let o=new Date,c=await provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,d.token,this.languageConfigurationService);if(d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;let u=new Date;this._debounceValue.update(this.textModel,u.getTime()-o.getTime());let g=new UpToDateInlineCompletions(c,r,this.textModel,this.versionId);if(i){let t=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!c.has(t)&&g.prepend(i.inlineCompletion,t.range,!0)}return this._updateOperation.clear(),(0,rp.PS)(e=>{s.set(g,e)}),!0})(),u=new UpdateOperation(r,d,c);return this._updateOperation.value=u,c}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(null===(t=this._updateOperation.value)||void 0===t?void 0:t.request.context.selectedSuggestionInfo)&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};function wait(e,t){return new Promise(i=>{let n;let o=setTimeout(()=>{n&&n.dispose(),i()},e);t&&(n=t.onCancellationRequested(()=>{clearTimeout(o),n&&n.dispose(),i()}))})}ac=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inlineCompletionsSource_param(3,ib.p),inlineCompletionsSource_param(4,n$.c_)],ac);let UpdateRequest=class UpdateRequest{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&equals(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(e,t)=>e.equals(t))&&(e.context.triggerKind===ov.bw.Automatic||this.context.triggerKind===ov.bw.Explicit)&&this.versionId===e.versionId}};function equals(e,t,i){return e&&t?i(e,t):e===t}let UpdateOperation=class UpdateOperation{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}};let UpToDateInlineCompletions=class UpToDateInlineCompletions{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,n){this.inlineCompletionProviderResult=e,this.request=t,this.textModel=i,this.versionId=n,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=(0,rp.nK)(this,e=>{this.versionId.read(e);let t=!1;for(let e of this._inlineCompletions)t=t||e._updateRange(this.textModel);return t&&this._rangeVersionIdValue++,this._rangeVersionIdValue});let o=i.deltaDecorations([],e.completions.map(e=>({range:e.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((e,t)=>new InlineCompletionWithUpdatedRange(e,o[t],this._rangeVersionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,0===this._refCount)for(let e of(setTimeout(()=>{this.textModel.isDisposed()||this.textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose(),this._prependedInlineCompletionItems))e.source.removeRef()}prepend(e,t,i){i&&e.source.addRef();let n=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new InlineCompletionWithUpdatedRange(e,n,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}};let InlineCompletionWithUpdatedRange=class InlineCompletionWithUpdatedRange{get forwardStable(){var e;return null!==(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)&&void 0!==e&&e}constructor(e,t,i,n){this.inlineCompletion=e,this.decorationId=t,this.rangeVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=null!=n?n:e.range}toInlineCompletion(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}toSingleTextEdit(e){return new SingleTextEdit(this._getUpdatedRange(e),this.inlineCompletion.insertText)}isVisible(e,t,i){let n=this._toFilterTextReplacement(i).removeCommonPrefix(e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(i).getStartPosition())||t.lineNumber!==n.range.startLineNumber)return!1;let o=e.getValueInRange(n.range,1),r=n.text,s=Math.max(0,t.column-n.range.startColumn),l=r.substring(0,s),d=r.substring(s),c=o.substring(0,s),u=o.substring(s),g=e.getLineIndentColumn(n.range.startLineNumber);return n.range.startColumn<=g&&(0===(c=c.trimStart()).length&&(u=u.trimStart()),0===(l=l.trimStart()).length&&(d=d.trimStart())),l.startsWith(c)&&!!(0,oN.Sy)(u,d)}canBeReused(e,t){let i=this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0);return i}_toFilterTextReplacement(e){return new SingleTextEdit(this._getUpdatedRange(e),this.inlineCompletion.filterText)}_isSmallerThanOriginal(e){return inlineCompletionsSource_length(this._getUpdatedRange(e)).isBefore(inlineCompletionsSource_length(this.inlineCompletion.range))}_getUpdatedRange(e){return this.rangeVersion.read(e),this._updatedRange}_updateRange(e){let t=e.getDecorationRange(this.decorationId);return t?!this._updatedRange.equalsRange(t)&&(this._updatedRange=t,!0):(this._isValid=!1,!0)}};function inlineCompletionsSource_length(e){return e.startLineNumber===e.endLineNumber?new t5.L(1,1+e.endColumn-e.startColumn):new t5.L(1+e.endLineNumber-e.startLineNumber,e.endColumn)}let au={Visible:r5,HasFocusedSuggestion:new tq.uy("suggestWidgetHasFocusedSuggestion",!1,(0,tz.NC)("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new tq.uy("suggestWidgetDetailsVisible",!1,(0,tz.NC)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new tq.uy("suggestWidgetMultipleSuggestions",!1,(0,tz.NC)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new tq.uy("suggestionMakesTextEdit",!0,(0,tz.NC)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new tq.uy("acceptSuggestionOnEnter",!0,(0,tz.NC)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new tq.uy("suggestionHasInsertAndReplaceRange",!1,(0,tz.NC)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new tq.uy("suggestionInsertMode",void 0,{type:"string",description:(0,tz.NC)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new tq.uy("suggestionCanResolve",!1,(0,tz.NC)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},ag=new tU.eH("suggestWidgetStatusBar");let CompletionItem=class CompletionItem{constructor(e,t,i,n){var o;this.position=e,this.completion=t,this.container=i,this.provider=n,this.isInvalid=!1,this.score=oN.CL.Default,this.distance=0,this.textLabel="string"==typeof t.label?t.label:null===(o=t.label)||void 0===o?void 0:o.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,t4.e.isIRange(t.range)?(this.editStart=new t5.L(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new t5.L(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new t5.L(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||t4.e.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new t5.L(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new t5.L(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new t5.L(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||t4.e.spansMultipleLines(t.range.insert)||t4.e.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),"function"!=typeof n.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return void 0!==this._resolveDuration}get resolveDuration(){return void 0!==this._resolveDuration?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){let t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new nK.G(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(e=>{Object.assign(this.completion,e),this._resolveDuration=i.elapsed()},e=>{(0,i1.n2)(e)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}};let CompletionOptions=class CompletionOptions{constructor(e=2,t=new Set,i=new Set,n=new Map,o=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=n,this.showDeprecated=o}};function getSnippetSuggestSupport(){return n}CompletionOptions.default=new CompletionOptions;let CompletionItemModel=class CompletionItemModel{constructor(e,t,i,n){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=n}};async function provideSuggestionItems(e,t,i,o=CompletionOptions.default,r={triggerKind:0},s=i0.T.None){let l=new nK.G;i=i.clone();let d=t.getWordAtPosition(i),c=d?new t4.e(i.lineNumber,d.startColumn,i.lineNumber,d.endColumn):t4.e.fromPositions(i),u={replace:c,insert:c.setEndPosition(i.lineNumber,i.column)},g=[],m=new t2.SL,f=[],_=!1,onCompletionList=(e,t,n)=>{var r,s,l;let d=!1;if(!t)return d;for(let n of t.suggestions)if(!o.kindFilter.has(n.kind)){if(!o.showDeprecated&&(null===(r=null==n?void 0:n.tags)||void 0===r?void 0:r.includes(1)))continue;n.range||(n.range=u),n.sortText||(n.sortText="string"==typeof n.label?n.label:n.label.label),!_&&n.insertTextRules&&4&n.insertTextRules&&(_=SnippetParser.guessNeedsClipboard(n.insertText)),g.push(new CompletionItem(i,n,t,e)),d=!0}return(0,t2.Wf)(t)&&m.add(t),f.push({providerName:null!==(s=e._debugDisplayName)&&void 0!==s?s:"unknown_provider",elapsedProvider:null!==(l=t.duration)&&void 0!==l?l:-1,elapsedOverall:n.elapsed()}),d},v=(async()=>{if(!n||o.kindFilter.has(27))return;let e=o.providerItemsToReuse.get(n);if(e){e.forEach(e=>g.push(e));return}if(o.providerFilter.size>0&&!o.providerFilter.has(n))return;let l=new nK.G,d=await n.provideCompletionItems(t,i,r,s);onCompletionList(n,d,l)})();for(let n of e.orderedGroups(t)){let e=!1;if(await Promise.all(n.map(async n=>{if(o.providerItemsToReuse.has(n)){let t=o.providerItemsToReuse.get(n);t.forEach(e=>g.push(e)),e=e||t.length>0;return}if(!(o.providerFilter.size>0)||o.providerFilter.has(n))try{let o=new nK.G,l=await n.provideCompletionItems(t,i,r,s);e=onCompletionList(n,l,o)||e}catch(e){(0,i1.Cp)(e)}})),e||s.isCancellationRequested)break}return(await v,s.isCancellationRequested)?(m.dispose(),Promise.reject(new i1.FU)):new CompletionItemModel(g.sort(getSuggestionComparator(o.snippetSortOrder)),_,{entries:f,elapsed:l.elapsed()},m)}function defaultComparator(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return -1;if(e.sortTextLow>t.sortTextLow)return 1}return e.textLabel<t.textLabel?-1:e.textLabel>t.textLabel?1:e.completion.kind-t.completion.kind}function snippetUpComparator(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return -1;if(27===t.completion.kind)return 1}return defaultComparator(e,t)}function snippetDownComparator(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return -1}return defaultComparator(e,t)}let ap=new Map;function getSuggestionComparator(e){return ap.get(e)}function showSimpleSuggestions(e,t){var i;null===(i=e.getContribution("editor.contrib.suggestController"))||void 0===i||i.triggerSuggest(new Set().add(t),void 0,!0)}ap.set(0,snippetUpComparator),ap.set(2,snippetDownComparator),ap.set(1,defaultComparator),tK.P.registerCommand("_executeCompletionItemProvider",async(e,...t)=>{let[i,n,o,r]=t;(0,nR.p_)(ip.o.isUri(i)),(0,nR.p_)(t5.L.isIPosition(n)),(0,nR.p_)("string"==typeof o||!o),(0,nR.p_)("number"==typeof r||!r);let{completionProvider:s}=e.get(ib.p),l=await e.get(n6.S).createModelReference(i);try{let e={incomplete:!1,suggestions:[]},t=[],i=l.object.textEditorModel.validatePosition(n),d=await provideSuggestionItems(s,l.object.textEditorModel,i,void 0,{triggerCharacter:null!=o?o:void 0,triggerKind:o?1:0});for(let i of d.items)t.length<(null!=r?r:0)&&t.push(i.resolve(i0.T.None)),e.incomplete=e.incomplete||i.container.incomplete,e.suggestions.push(i.completion);try{return await Promise.all(t),e}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{l.dispose()}});let QuickSuggestionsOptions=class QuickSuggestionsOptions{static isAllOff(e){return"off"===e.other&&"off"===e.comments&&"off"===e.strings}static isAllOn(e){return"on"===e.other&&"on"===e.comments&&"on"===e.strings}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}};var am=i(96927);i(41531);var af=i(32019);function normalizeDriveLetter(e,t=io.ED){return(0,af.oP)(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}Object.create(null);var a_=i(51777);Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});let CompositeSnippetVariableResolver=class CompositeSnippetVariableResolver{constructor(e){this._delegates=e}resolve(e){for(let t of this._delegates){let i=t.resolve(e);if(void 0!==i)return i}}};let SelectionBasedVariableResolver=class SelectionBasedVariableResolver{constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}resolve(e){let{name:t}=e;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){let t=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!t&&this._overtypingCapturer){let e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(t=e.value,i=e.multiline)}if(t&&i&&e.snippet){let i=this._model.getLineContent(this._selection.startLineNumber),n=(0,iy.V8)(i,0,this._selection.startColumn-1),o=n;e.snippet.walk(t=>t!==e&&(t instanceof Text&&(o=(0,iy.V8)((0,iy.uq)(t.value).pop())),!0));let r=(0,iy.Mh)(o,n);t=t.replace(/(\r\n|\r|\n)(.*)/g,(e,t,i)=>`${t}${o.substr(r)}${i}`)}return t}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){let e=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return e&&e.word||void 0}if("TM_LINE_INDEX"===t)return String(this._selection.positionLineNumber-1);if("TM_LINE_NUMBER"===t)return String(this._selection.positionLineNumber);if("CURSOR_INDEX"===t)return String(this._selectionIdx);if("CURSOR_NUMBER"===t)return String(this._selectionIdx+1)}};let ModelBasedVariableResolver=class ModelBasedVariableResolver{constructor(e,t){this._labelService=e,this._model=t}resolve(e){let{name:t}=e;if("TM_FILENAME"===t)return a_.EZ(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){let e=a_.EZ(this._model.uri.fsPath),t=e.lastIndexOf(".");return t<=0?e:e.slice(0,t)}return"TM_DIRECTORY"===t?"."===a_.XX(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,nL.XX)(this._model.uri)):"TM_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}};let ClipboardBasedVariableResolver=class ClipboardBasedVariableResolver{constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}resolve(e){if("CLIPBOARD"!==e.name)return;let t=this._readClipboardText();if(t){if(this._spread){let e=t.split(/\r\n|\n|\r/).filter(e=>!(0,iy.m5)(e));if(e.length===this._selectionCount)return e[this._selectionIdx]}return t}}};let av=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){let{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(n){if("LINE_COMMENT"===t)return n.lineCommentToken||void 0;if("BLOCK_COMMENT_START"===t)return n.blockCommentStartToken||void 0;if("BLOCK_COMMENT_END"===t)return n.blockCommentEndToken||void 0}}};av=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(S=n$.c_,function(e,t){S(e,t,2)})],av);let TimeBasedVariableResolver=class TimeBasedVariableResolver{constructor(){this._date=new Date}resolve(e){let{name:t}=e;if("CURRENT_YEAR"===t)return String(this._date.getFullYear());if("CURRENT_YEAR_SHORT"===t)return String(this._date.getFullYear()).slice(-2);if("CURRENT_MONTH"===t)return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if("CURRENT_DATE"===t)return String(this._date.getDate().valueOf()).padStart(2,"0");if("CURRENT_HOUR"===t)return String(this._date.getHours().valueOf()).padStart(2,"0");if("CURRENT_MINUTE"===t)return String(this._date.getMinutes().valueOf()).padStart(2,"0");if("CURRENT_SECOND"===t)return String(this._date.getSeconds().valueOf()).padStart(2,"0");else if("CURRENT_DAY_NAME"===t)return TimeBasedVariableResolver.dayNames[this._date.getDay()];else if("CURRENT_DAY_NAME_SHORT"===t)return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];else if("CURRENT_MONTH_NAME"===t)return TimeBasedVariableResolver.monthNames[this._date.getMonth()];else if("CURRENT_MONTH_NAME_SHORT"===t)return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];else if("CURRENT_SECONDS_UNIX"===t)return String(Math.floor(this._date.getTime()/1e3));else if("CURRENT_TIMEZONE_OFFSET"===t){let e=this._date.getTimezoneOffset(),t=Math.trunc(Math.abs(e/60)),i=Math.abs(e)-60*t;return(e>0?"-":"+")+(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)}}};TimeBasedVariableResolver.dayNames=[tz.NC("Sunday","Sunday"),tz.NC("Monday","Monday"),tz.NC("Tuesday","Tuesday"),tz.NC("Wednesday","Wednesday"),tz.NC("Thursday","Thursday"),tz.NC("Friday","Friday"),tz.NC("Saturday","Saturday")],TimeBasedVariableResolver.dayNamesShort=[tz.NC("SundayShort","Sun"),tz.NC("MondayShort","Mon"),tz.NC("TuesdayShort","Tue"),tz.NC("WednesdayShort","Wed"),tz.NC("ThursdayShort","Thu"),tz.NC("FridayShort","Fri"),tz.NC("SaturdayShort","Sat")],TimeBasedVariableResolver.monthNames=[tz.NC("January","January"),tz.NC("February","February"),tz.NC("March","March"),tz.NC("April","April"),tz.NC("May","May"),tz.NC("June","June"),tz.NC("July","July"),tz.NC("August","August"),tz.NC("September","September"),tz.NC("October","October"),tz.NC("November","November"),tz.NC("December","December")],TimeBasedVariableResolver.monthNamesShort=[tz.NC("JanuaryShort","Jan"),tz.NC("FebruaryShort","Feb"),tz.NC("MarchShort","Mar"),tz.NC("AprilShort","Apr"),tz.NC("MayShort","May"),tz.NC("JuneShort","Jun"),tz.NC("JulyShort","Jul"),tz.NC("AugustShort","Aug"),tz.NC("SeptemberShort","Sep"),tz.NC("OctoberShort","Oct"),tz.NC("NovemberShort","Nov"),tz.NC("DecemberShort","Dec")];let WorkspaceBasedVariableResolver=class WorkspaceBasedVariableResolver{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;let t=(0,rN.uT)(this._workspaceService.getWorkspace());return(0,rN.c$)(t)?void 0:"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0}_resolveWorkspaceName(e){if((0,rN.eb)(e))return a_.EZ(e.uri.path);let t=a_.EZ(e.configPath.path);return t.endsWith(rN.A6)&&(t=t.substr(0,t.length-rN.A6.length-1)),t}_resoveWorkspacePath(e){if((0,rN.eb)(e))return normalizeDriveLetter(e.uri.fsPath);let t=a_.EZ(e.configPath.path),i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?normalizeDriveLetter(i):"/"}};let RandomBasedVariableResolver=class RandomBasedVariableResolver{resolve(e){let{name:t}=e;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?ih():void 0}};let OneSnippet=class OneSnippet{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,ia.vM)(t.placeholders,Placeholder.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(-1===this._offset)throw Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let e=this._editor.getModel();this._editor.changeDecorations(t=>{for(let i of this._snippet.placeholders){let n=this._snippet.offset(i),o=this._snippet.fullLen(i),r=t4.e.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+o)),s=i.isFinalTabstop?OneSnippet._decor.inactiveFinal:OneSnippet._decor.inactive,l=t.addDecoration(r,s);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let e=[];for(let t of this._placeholderGroups[this._placeholderGroupsIdx])if(t.transform){let i=this._placeholderDecorations.get(t),n=this._editor.getModel().getDecorationRange(i),o=this._editor.getModel().getValueInRange(n),r=t.transform.resolve(o).split(/\r\n|\r|\n/);for(let e=1;e<r.length;e++)r[e]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+r[e]);e.push(rx.h.replace(n,r.join(this._editor.getModel().getEOL())))}e.length>0&&this._editor.executeEdits("snippet.placeholderTransform",e)}let t=!1;!0===e&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):!1===e&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);let i=this._editor.getModel().changeDecorations(e=>{let i=new Set,n=[];for(let o of this._placeholderGroups[this._placeholderGroupsIdx]){let r=this._placeholderDecorations.get(o),s=this._editor.getModel().getDecorationRange(r);for(let l of(n.push(new tJ.Y(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(o),e.changeDecorationOptions(r,o.isFinalTabstop?OneSnippet._decor.activeFinal:OneSnippet._decor.active),i.add(o),this._snippet.enclosingPlaceholders(o))){let t=this._placeholderDecorations.get(l);e.changeDecorationOptions(t,l.isFinalTabstop?OneSnippet._decor.activeFinal:OneSnippet._decor.active),i.add(l)}}for(let[t,n]of this._placeholderDecorations)i.has(t)||e.changeDecorationOptions(n,t.isFinalTabstop?OneSnippet._decor.inactiveFinal:OneSnippet._decor.inactive);return n});return t?this.move(e):null!=i?i:[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Placeholder){let e=this._placeholderDecorations.get(t),i=this._editor.getModel().getDecorationRange(e);if(i.isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(0===this._snippet.placeholders.length)return!0;if(1===this._snippet.placeholders.length){let[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){let e=new Map;for(let t of this._placeholderGroups){let i;for(let n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));let t=this._placeholderDecorations.get(n),o=this._editor.getModel().getDecorationRange(t);if(!o){e.delete(n.index);break}i.push(o)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;let e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(null==e?void 0:e.choice))return;let t=this._placeholderDecorations.get(e);if(!t)return;let i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>!(e=t instanceof Choice)),e}merge(e){let t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(let n of this._placeholderGroups[this._placeholderGroupsIdx]){let o=e.shift();console.assert(-1!==o._offset),console.assert(!o._placeholderDecorations);let r=o._snippet.placeholderInfo.last.index;for(let e of o._snippet.placeholderInfo.all)e.isFinalTabstop?e.index=n.index+(r+1)/this._nestingLevel:e.index=n.index+e.index/this._nestingLevel;this._snippet.replace(n,o._snippet.children);let s=this._placeholderDecorations.get(n);for(let e of(i.removeDecoration(s),this._placeholderDecorations.delete(n),o._snippet.placeholders)){let n=o._snippet.offset(e),r=o._snippet.fullLen(e),s=t4.e.fromPositions(t.getPositionAt(o._offset+n),t.getPositionAt(o._offset+n+r)),l=i.addDecoration(s,OneSnippet._decor.inactive);this._placeholderDecorations.set(e,l)}}this._placeholderGroups=(0,ia.vM)(this._snippet.placeholders,Placeholder.compareByIndex)})}};OneSnippet._decor={active:t6.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:t6.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:t6.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:t6.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let aC={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},ab=eL=class{static adjustWhitespace(e,t,i,n,o){let r;let s=e.getLineContent(t.lineNumber),l=(0,iy.V8)(s,0,t.column-1);return n.walk(t=>{if(!(t instanceof Text)||t.parent instanceof Choice||o&&!o.has(t))return!0;let s=t.value.split(/\r\n|\r|\n/);if(i){let i=n.offset(t);if(0===i)s[0]=e.normalizeIndentation(s[0]);else{r=null!=r?r:n.toString();let t=r.charCodeAt(i-1);(10===t||13===t)&&(s[0]=e.normalizeIndentation(l+s[0]))}for(let t=1;t<s.length;t++)s[t]=e.normalizeIndentation(l+s[t])}let d=s.join(e.getEOL());return d!==t.value&&(t.parent.replace(t,[new Text(d)]),r=void 0),!0}),l}static adjustSelection(e,t,i,n){if(0!==i||0!==n){let{positionLineNumber:o,positionColumn:r}=t,s=e.validateRange({startLineNumber:o,startColumn:r-i,endLineNumber:o,endColumn:r+n});t=tJ.Y.createWithDirection(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,n,o,r,s,l,d){let c=[],u=[];if(!e.hasModel())return{edits:c,snippets:u};let g=e.getModel(),m=e.invokeWithinContext(e=>e.get(rN.ec)),f=e.invokeWithinContext(e=>new ModelBasedVariableResolver(e.get(oE.e),g)),readClipboardText=()=>s,_=g.getValueInRange(eL.adjustSelection(g,e.getSelection(),i,0)),v=g.getValueInRange(eL.adjustSelection(g,e.getSelection(),0,n)),C=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),b=e.getSelections().map((e,t)=>({selection:e,idx:t})).sort((e,t)=>t4.e.compareRangesUsingStarts(e.selection,t.selection));for(let{selection:s,idx:S}of b){let y=eL.adjustSelection(g,s,i,0),w=eL.adjustSelection(g,s,0,n);_!==g.getValueInRange(y)&&(y=s),v!==g.getValueInRange(w)&&(w=s);let L=s.setStartPosition(y.startLineNumber,y.startColumn).setEndPosition(w.endLineNumber,w.endColumn),k=new SnippetParser().parse(t,!0,o),D=L.getStartPosition(),x=eL.adjustWhitespace(g,D,r||S>0&&C!==g.getLineFirstNonWhitespaceColumn(s.positionLineNumber),k);k.resolveVariables(new CompositeSnippetVariableResolver([f,new ClipboardBasedVariableResolver(readClipboardText,S,b.length,"spread"===e.getOption(79)),new SelectionBasedVariableResolver(g,s,S,l),new av(g,s,d),new TimeBasedVariableResolver,new WorkspaceBasedVariableResolver(m),new RandomBasedVariableResolver])),c[S]=rx.h.replace(L,k.toString()),c[S].identifier={major:S,minor:0},c[S]._isTracked=!0,u[S]=new OneSnippet(e,k,x)}return{edits:c,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,i,n,o,r,s){if(!e.hasModel()||0===t.length)return{edits:[],snippets:[]};let l=[],d=e.getModel(),c=new SnippetParser,u=new TextmateSnippet,g=new CompositeSnippetVariableResolver([e.invokeWithinContext(e=>new ModelBasedVariableResolver(e.get(oE.e),d)),new ClipboardBasedVariableResolver(()=>o,0,e.getSelections().length,"spread"===e.getOption(79)),new SelectionBasedVariableResolver(d,e.getSelection(),0,r),new av(d,e.getSelection(),s),new TimeBasedVariableResolver,new WorkspaceBasedVariableResolver(e.invokeWithinContext(e=>e.get(rN.ec))),new RandomBasedVariableResolver]);t=t.sort((e,t)=>t4.e.compareRangesUsingStarts(e.range,t.range));let m=0;for(let e=0;e<t.length;e++){let{range:i,template:n}=t[e];if(e>0){let n=t[e-1].range,o=t4.e.fromPositions(n.getEndPosition(),i.getStartPosition()),r=new Text(d.getValueInRange(o));u.appendChild(r),m+=r.value.length}let o=c.parseFragment(n,u);eL.adjustWhitespace(d,i.getStartPosition(),!0,u,new Set(o)),u.resolveVariables(g);let r=u.toString(),s=r.slice(m);m=r.length;let f=rx.h.replace(i,s);f.identifier={major:e,minor:0},f._isTracked=!0,l.push(f)}return c.ensureFinalTabstop(u,i,!0),{edits:l,snippets:[new OneSnippet(e,u,"")]}}constructor(e,t,i=aC,n){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=n,this._templateMerges=[],this._snippets=[]}dispose(){(0,t2.B9)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:e,snippets:t}="string"==typeof this._template?eL.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):eL.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,e=>{let i=e.filter(e=>!!e.identifier);for(let e=0;e<t.length;e++)t[e].initialize(i[e].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(e=>tJ.Y.fromPositions(e.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=aC){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);let{edits:i,snippets:n}=eL.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,e=>{let t=e.filter(e=>!!e.identifier);for(let e=0;e<n.length;e++)n[e].initialize(t[e].textChange);let i=n[0].isTrivialSnippet;if(!i){for(let e of this._snippets)e.merge(n);console.assert(0===n.length)}return this._snippets[0].hasPlaceholder&&!i?this._move(void 0):t.map(e=>tJ.Y.fromPositions(e.range.getEndPosition()))})}next(){let e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){let e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){let t=[];for(let i of this._snippets){let n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(let i of this._snippets){let n=i.computePossibleSelections();if(0===t.size){for(let[i,o]of n)for(let n of(o.sort(t4.e.compareRangesUsingStarts),e))if(o[0].containsRange(n)){t.set(i,[]);break}}if(0===t.size)return!1;t.forEach((e,t)=>{e.push(...n.get(t))})}for(let[i,n]of(e.sort(t4.e.compareRangesUsingStarts),t)){if(n.length!==e.length){t.delete(i);continue}n.sort(t4.e.compareRangesUsingStarts);for(let o=0;o<n.length;o++)if(!n[o].containsRange(e[o])){t.delete(i);continue}}return t.size>0}};ab=eL=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(y=n$.c_,function(e,t){y(e,t,3)})],ab);var snippetController2_param=function(e,t){return function(i,n){t(i,n,e)}};let aS={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},ay=ek=class{static get(e){return e.getContribution(ek.ID)}constructor(e,t,i,n,o){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=o,this._snippetListener=new t2.SL,this._modelVersionId=-1,this._inSnippet=ek.InSnippetMode.bindTo(n),this._hasNextTabstop=ek.HasNextTabstop.bindTo(n),this._hasPrevTabstop=ek.HasPrevTabstop.bindTo(n)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,void 0===t?aS:{...aS,...t})}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&"string"!=typeof e&&this.cancel(),this._session?((0,nR.p_)("string"==typeof e),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new ab(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),null===(i=this._session)||void 0===i?void 0:i.hasChoice){let e;let t={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(e,t)=>{if(!this._session||e!==this._editor.getModel()||!t5.L.equals(this._editor.getPosition(),t))return;let{activeChoice:i}=this._session;if(!i||0===i.choice.options.length)return;let n=e.getValueInRange(i.range),o=!!i.choice.options.find(e=>e.value===n),r=[];for(let e=0;e<i.choice.options.length;e++){let t=i.choice.options[e];r.push({kind:13,label:t.value,insertText:t.value,sortText:"a".repeat(e+1),range:i.range,filterText:o?`${n}_${t.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,tz.NC)("next","Go to next placeholder...")}})}return{suggestions:r}}},i=this._editor.getModel(),n=!1;this._choiceCompletions={provider:t,enable:()=>{n||(e=this._languageFeaturesService.completionProvider.register({language:i.getLanguageId(),pattern:i.uri.fsPath,scheme:i.uri.scheme,exclusive:!0},t),this._snippetListener.add(e),n=!0)},disable:()=>{null==e||e.dispose(),n=!1}}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(e=>e.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){return this._session&&this._editor.hasModel()?this._modelVersionId!==this._editor.getModel().getAlternativeVersionId()&&this._session.hasPlaceholder?this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders()?(this._editor.getModel().pushStackElement(),this.cancel()):void(this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()):this.cancel():void 0}_handleChoice(){var e;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{activeChoice:t}=this._session;if(!t||!this._choiceCompletions){null===(e=this._choiceCompletions)||void 0===e||e.disable(),this._currentChoice=void 0;return}this._currentChoice!==t.choice&&(this._currentChoice=t.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{showSimpleSuggestions(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,null===(t=this._session)||void 0===t||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;null===(e=this._session)||void 0===e||e.prev(),this._updateState()}next(){var e;null===(e=this._session)||void 0===e||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};ay.ID="snippetController2",ay.InSnippetMode=new tq.uy("inSnippetMode",!1,(0,tz.NC)("inSnippetMode","Whether the editor in current in snippet mode")),ay.HasNextTabstop=new tq.uy("hasNextTabstop",!1,(0,tz.NC)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),ay.HasPrevTabstop=new tq.uy("hasPrevTabstop",!1,(0,tz.NC)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),ay=ek=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([snippetController2_param(1,am.VZ),snippetController2_param(2,ib.p),snippetController2_param(3,tq.i6),snippetController2_param(4,n$.c_)],ay),(0,tB._K)(ay.ID,ay,4);let aw=tB._l.bindToContribution(ay.get);(0,tB.fK)(new aw({id:"jumpToNextSnippetPlaceholder",precondition:tq.Ao.and(ay.InSnippetMode,ay.HasNextTabstop),handler:e=>e.next(),kbOpts:{weight:130,kbExpr:tH.u.editorTextFocus,primary:2}})),(0,tB.fK)(new aw({id:"jumpToPrevSnippetPlaceholder",precondition:tq.Ao.and(ay.InSnippetMode,ay.HasPrevTabstop),handler:e=>e.prev(),kbOpts:{weight:130,kbExpr:tH.u.editorTextFocus,primary:1026}})),(0,tB.fK)(new aw({id:"leaveSnippet",precondition:ay.InSnippetMode,handler:e=>e.cancel(!0),kbOpts:{weight:130,kbExpr:tH.u.editorTextFocus,primary:9,secondary:[1033]}})),(0,tB.fK)(new aw({id:"acceptSnippet",precondition:ay.InSnippetMode,handler:e=>e.finish()}));var inlineCompletionsModel_param=function(e,t){return function(i,n){t(i,n,e)}};(w=eD||(eD={}))[w.Undo=0]="Undo",w[w.Redo=1]="Redo",w[w.AcceptWord=2]="AcceptWord",w[w.Other=3]="Other";let aL=class extends t2.JT{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,n,o,r,s,l,d,c,u,g){let m;super(),this.textModel=e,this.selectedSuggestItem=t,this.textModelVersionId=i,this._positions=n,this._debounceValue=o,this._suggestPreviewEnabled=r,this._suggestPreviewMode=s,this._inlineSuggestMode=l,this._enabled=d,this._instantiationService=c,this._commandService=u,this._languageConfigurationService=g,this._source=this._register(this._instantiationService.createInstance(ac,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=(0,rp.uh)(this,!1),this._forceUpdateSignal=(0,rp.GN)("forceUpdate"),this._selectedInlineCompletionId=(0,rp.uh)(this,void 0),this._primaryPosition=(0,rp.nK)(this,e=>{var t;return null!==(t=this._positions.read(e)[0])&&void 0!==t?t:new t5.L(1,1)}),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([eD.Redo,eD.Undo,eD.AcceptWord]),this._fetchInlineCompletions=(0,rp.aK)({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:ov.bw.Automatic}),handleChange:(e,t)=>(e.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(e.change)?t.preserveCurrentCompletion=!0:e.didChange(this._forceUpdateSignal)&&(t.inlineCompletionTriggerKind=e.change),!0)},(e,t)=>{this._forceUpdateSignal.read(e);let i=this._enabled.read(e)&&this.selectedSuggestItem.read(e)||this._isActive.read(e);if(!i){this._source.cancelUpdate();return}this.textModelVersionId.read(e);let n=this.selectedInlineCompletion.get(),o=t.preserveCurrentCompletion||(null==n?void 0:n.forwardStable)?n:void 0,r=this._source.suggestWidgetInlineCompletions.get(),s=this.selectedSuggestItem.read(e);if(r&&!s){let e=this._source.inlineCompletions.get();(0,rp.PS)(t=>{(!e||r.request.versionId>e.request.versionId)&&this._source.inlineCompletions.set(r.clone(),t),this._source.clearSuggestWidgetInlineCompletions(t)})}let l=this._primaryPosition.read(e),d={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:null==s?void 0:s.toSelectedSuggestionInfo()};return this._source.fetch(l,d,o)}),this._filteredInlineCompletionItems=(0,rp.nK)(this,e=>{let t=this._source.inlineCompletions.read(e);if(!t)return[];let i=this._primaryPosition.read(e),n=t.inlineCompletions.filter(t=>t.isVisible(this.textModel,i,e));return n}),this.selectedInlineCompletionIndex=(0,rp.nK)(this,e=>{let t=this._selectedInlineCompletionId.read(e),i=this._filteredInlineCompletionItems.read(e),n=void 0===this._selectedInlineCompletionId?-1:i.findIndex(e=>e.semanticId===t);return -1===n?(this._selectedInlineCompletionId.set(void 0,void 0),0):n}),this.selectedInlineCompletion=(0,rp.nK)(this,e=>{let t=this._filteredInlineCompletionItems.read(e),i=this.selectedInlineCompletionIndex.read(e);return t[i]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,e=>null==e?void 0:e.request.context.triggerKind),this.inlineCompletionsCount=(0,rp.nK)(this,e=>this.lastTriggerKind.read(e)===ov.bw.Explicit?this._filteredInlineCompletionItems.read(e).length:void 0),this.state=(0,rp.bk)({owner:this,equalityComparer:(e,t)=>e&&t?ghostTextsOrReplacementsEqual(e.ghostTexts,t.ghostTexts)&&e.inlineCompletion===t.inlineCompletion&&e.suggestItem===t.suggestItem:e===t},e=>{var t,i;let n=this.textModel,o=this.selectedSuggestItem.read(e);if(o){let r=o.toSingleTextEdit().removeCommonPrefix(n),s=this._computeAugmentation(r,e),l=this._suggestPreviewEnabled.read(e);if(!l&&!s)return;let d=null!==(t=null==s?void 0:s.edit)&&void 0!==t?t:r,c=s?s.edit.text.length-r.text.length:0,u=this._suggestPreviewMode.read(e),g=this._positions.read(e),m=[d,...getSecondaryEdits(this.textModel,g,d)],f=m.map((e,t)=>e.computeGhostText(n,u,g[t],c)).filter(nR.$K),_=null!==(i=f[0])&&void 0!==i?i:new GhostText(d.range.endLineNumber,[]);return{edits:m,primaryGhostText:_,ghostTexts:f,inlineCompletion:null==s?void 0:s.completion,suggestItem:o}}{if(!this._isActive.read(e))return;let t=this.selectedInlineCompletion.read(e);if(!t)return;let i=t.toSingleTextEdit(e),o=this._inlineSuggestMode.read(e),r=this._positions.read(e),s=[i,...getSecondaryEdits(this.textModel,r,i)],l=s.map((e,t)=>e.computeGhostText(n,o,r[t],0)).filter(nR.$K);if(!l[0])return;return{edits:s,primaryGhostText:l[0],ghostTexts:l,inlineCompletion:t,suggestItem:void 0}}}),this.ghostTexts=(0,rp.bk)({owner:this,equalityComparer:ghostTextsOrReplacementsEqual},e=>{let t=this.state.read(e);if(t)return t.ghostTexts}),this.primaryGhostText=(0,rp.bk)({owner:this,equalityComparer:ghostTextOrReplacementEquals},e=>{let t=this.state.read(e);if(t)return null==t?void 0:t.primaryGhostText}),this._register((0,rp.jx)(this._fetchInlineCompletions)),this._register((0,rp.EH)(e=>{var t,i;let n=this.state.read(e),o=null==n?void 0:n.inlineCompletion;if((null==o?void 0:o.semanticId)!==(null==m?void 0:m.semanticId)&&(m=o,o)){let e=o.inlineCompletion,n=e.source;null===(i=(t=n.provider).handleItemDidShow)||void 0===i||i.call(t,n.inlineCompletions,e.sourceInlineCompletion,e.insertText)}}))}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletions.get()}async triggerExplicitly(e){(0,rp.c8)(e,e=>{this._isActive.set(!0,e),this._forceUpdateSignal.trigger(e,ov.bw.Explicit)}),await this._fetchInlineCompletions.get()}stop(e){(0,rp.c8)(e,e=>{this._isActive.set(!1,e),this._source.clear(e)})}_computeAugmentation(e,t){let i=this.textModel,n=this._source.suggestWidgetInlineCompletions.read(t),o=n?n.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(nR.$K),r=(0,rV.Fr)(o,n=>{let o=n.toSingleTextEdit(t);return(o=o.removeCommonPrefix(i,t4.e.fromPositions(o.range.getStartPosition(),e.range.getEndPosition()))).augments(e)?{completion:n,edit:o}:void 0});return r}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();let t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){let i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var t;if(e.getModel()!==this.textModel)throw new i1.he;let i=this.state.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return;let n=i.inlineCompletion.toInlineCompletion(void 0);if(e.pushUndoStop(),n.snippetInfo)e.executeEdits("inlineSuggestion.accept",[rx.h.replaceMove(n.range,""),...n.additionalTextEdits]),e.setPosition(n.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),null===(t=ay.get(e))||void 0===t||t.insert(n.snippetInfo.snippet,{undoStopBefore:!1});else{let t=i.edits,o=getEndPositionsAfterApplying(t).map(e=>tJ.Y.fromPositions(e));e.executeEdits("inlineSuggestion.accept",[...t.map(e=>rx.h.replaceMove(e.range,e.text)),...n.additionalTextEdits]),e.setSelections(o,"inlineCompletionAccept")}n.command&&n.source.addRef(),(0,rp.PS)(e=>{this._source.clear(e),this._isActive.set(!1,e)}),n.command&&(await this._commandService.executeCommand(n.command.id,...n.command.arguments||[]).then(void 0,i1.Cp),n.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(e,t)=>{let i=this.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),n=this._languageConfigurationService.getLanguageConfiguration(i),o=new RegExp(n.wordDefinition.source,n.wordDefinition.flags.replace("g","")),r=t.match(o),s=0;s=r&&void 0!==r.index?0===r.index?r[0].length:r.index:t.length;let l=/\s+/g.exec(t);return l&&void 0!==l.index&&l.index+l[0].length<s&&(s=l.index+l[0].length),s})}async acceptNextLine(e){await this._acceptNext(e,(e,t)=>{let i=t.match(/\n/);return i&&void 0!==i.index?i.index+1:t.length})}async _acceptNext(e,t){if(e.getModel()!==this.textModel)throw new i1.he;let i=this.state.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return;let n=i.primaryGhostText,o=i.inlineCompletion.toInlineCompletion(void 0);if(o.snippetInfo||o.filterText!==o.insertText){await this.accept(e);return}let r=n.parts[0],s=new t5.L(n.lineNumber,r.column),l=r.text,d=t(s,l);if(d===l.length&&1===n.parts.length){this.accept(e);return}let c=l.substring(0,d),u=this._positions.get(),g=u[0];o.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();let t=t4.e.fromPositions(g,s),i=e.getModel().getValueInRange(t)+c,n=new SingleTextEdit(t,i),o=[n,...getSecondaryEdits(this.textModel,u,n)],r=getEndPositionsAfterApplying(o).map(e=>tJ.Y.fromPositions(e));e.executeEdits("inlineSuggestion.accept",o.map(e=>rx.h.replaceMove(e.range,e.text))),e.setSelections(r,"inlineCompletionPartialAccept")}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){let t=t4.e.fromPositions(o.range.getStartPosition(),addPositions(s,lengthOfText(c))),i=e.getModel().getValueInRange(t,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,i.length)}}finally{o.source.removeRef()}}handleSuggestAccepted(e){var t,i;let n=e.toSingleTextEdit().removeCommonPrefix(this.textModel),o=this._computeAugmentation(n,void 0);if(!o)return;let r=o.completion.inlineCompletion;null===(i=(t=r.source.provider).handlePartialAccept)||void 0===i||i.call(t,r.source.inlineCompletions,r.sourceInlineCompletion,n.text.length)}};function getSecondaryEdits(e,t,i){if(1===t.length)return[];let n=t[0],o=t.slice(1),r=i.range.getStartPosition(),s=i.range.getEndPosition(),l=e.getValueInRange(t4.e.fromPositions(n,s)),d=subtractPositions(n,r);if(d.lineNumber<1)return(0,i1.dL)(new i1.he(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${n.toString()} and ${r.toString()}`)),[];let c=substringPos(i.text,d);return o.map(t=>{let i=addPositions(subtractPositions(t,r),s),n=e.getValueInRange(t4.e.fromPositions(t,i)),o=(0,iy.Mh)(l,n),d=t4.e.fromPositions(t,t.delta(0,o));return new SingleTextEdit(d,c)})}function substringPos(e,t){let i="",n=(0,iy.Fw)(e);for(let e=t.lineNumber-1;e<n.length;e++)i+=n[e].substring(e===t.lineNumber-1?t.column-1:0);return i}function getEndPositionsAfterApplying(e){let t=Permutation.createSortPermutation(e,(e,t)=>t4.e.compareRangesUsingStarts(e.range,t.range)),i=getNewRanges(t.apply(e)),n=t.inverse().apply(i);return n.map(e=>e.getEndPosition())}aL=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inlineCompletionsModel_param(9,iL.TG),inlineCompletionsModel_param(10,tK.H),inlineCompletionsModel_param(11,n$.c_)],aL);var ak=i(32155),aD=i(74286),suggestMemory_param=function(e,t){return function(i,n){t(i,n,e)}};let Memory=class Memory{constructor(e){this.name=e}select(e,t,i){if(0===i.length)return 0;let n=i[0].score[0];for(let e=0;e<i.length;e++){let{score:t,completion:o}=i[e];if(t[0]!==n)break;if(o.preselect)return e}return 0}};let NoMemory=class NoMemory extends Memory{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}};let LRUMemory=class LRUMemory extends Memory{constructor(){super("recentlyUsed"),this._cache=new nA.z6(300,.66),this._seq=0}memorize(e,t,i){let n=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(0===i.length)return 0;let n=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(n))return super.select(e,t,i);let o=i[0].score[0],r=-1,s=-1;for(let t=0;t<i.length&&i[t].score[0]===o;t++){let n=`${e.getLanguageId()}/${i[t].textLabel}`,o=this._cache.peek(n);if(o&&o.touch>s&&o.type===i[t].completion.kind&&o.insertText===i[t].completion.insertText&&(s=o.touch,r=t),i[t].completion.preselect)return t}return -1!==r?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){for(let[t,i]of(this._cache.clear(),e))i.touch=0,i.type="number"==typeof i.type?i.type:ov.gX.fromString(i.type),this._cache.set(t,i);this._seq=this._cache.size}};let PrefixMemory=class PrefixMemory extends Memory{constructor(){super("recentlyUsedByPrefix"),this._trie=aD.Id.forStrings(),this._seq=0}memorize(e,t,i){let{word:n}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${n}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){let{word:n}=e.getWordUntilPosition(t);if(!n)return super.select(e,t,i);let o=`${e.getLanguageId()}/${n}`,r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let e=0;e<i.length;e++){let{kind:t,insertText:n}=i[e].completion;if(t===r.type&&n===r.insertText)return e}return super.select(e,t,i)}toJSON(){let e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((e,t)=>-(e[1].touch-t[1].touch)).forEach((e,t)=>e[1].touch=t),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0)for(let[t,i]of(this._seq=e[0][1].touch+1,e))i.type="number"==typeof i.type?i.type:ov.gX.fromString(i.type),this._trie.set(t,i)}};let ax=ex=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new t2.SL,this._persistSoon=new t1.pY(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(e=>{e.reason===nP.fk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var i;let n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if((null===(i=this._strategy)||void 0===i?void 0:i.name)!==n){this._saveState();let e=ex._strategyCtors.get(n)||NoMemory;this._strategy=new e;try{let e=this._configService.getValue("editor.suggest.shareSuggestSelections"),t=this._storageService.get(`${ex._storagePrefix}/${n}`,e?0:1);t&&this._strategy.fromJSON(JSON.parse(t))}catch(e){}}return this._strategy}_saveState(){if(this._strategy){let e=this._configService.getValue("editor.suggest.shareSuggestSelections"),t=JSON.stringify(this._strategy);this._storageService.store(`${ex._storagePrefix}/${this._strategy.name}`,t,e?0:1,1)}}};ax._strategyCtors=new Map([["recentlyUsedByPrefix",PrefixMemory],["recentlyUsed",LRUMemory],["first",NoMemory]]),ax._storagePrefix="suggest/memories",ax=ex=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([suggestMemory_param(0,nP.Uy),suggestMemory_param(1,tj.Ui)],ax);let aN=(0,iL.yh)("ISuggestMemories");(0,nv.z)(aN,ax,1);let aE=eN=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=eN.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(e=>e.hasChanged(123)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}_update(){let e="on"===this._editor.getOption(123);if(this._enabled!==e){if(this._enabled=e,this._enabled){let checkForWordEnd=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let e=this._editor.getModel(),t=this._editor.getSelection(),i=e.getWordAtPosition(t.getStartPosition());if(!i){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(i.endColumn===t.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(checkForWordEnd),checkForWordEnd()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}}};aE.AtEnd=new tq.uy("atEndOfWord",!1),aE=eN=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(L=tq.i6,function(e,t){L(e,t,1)})],aE);let aI=eE=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=eE.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(0===e.items.length){this.reset();return}let n=eE._moveIndex(!0,e,t);if(n===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let n=i;for(let o=t.items.length;o>0&&(n=(n+t.items.length+(e?1:-1))%t.items.length)!==i&&t.items[n].completion.additionalTextEdits;o--);return n}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=eE._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};aI.OtherSuggestions=new tq.uy("hasOtherSuggestions",!1),aI=eE=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(k=tq.i6,function(e,t){k(e,t,1)})],aI);let CommitCharacterController=class CommitCharacterController{constructor(e,t,i,n){this._disposables=new t2.SL,this._disposables.add(i.onDidSuggest(e=>{0===e.completionModel.items.length&&this.reset()})),this._disposables.add(i.onDidCancel(e=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()&&0!==i.state){let t=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!(0,ia.Of)(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;let t=new s$.q;for(let i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}};let BracketSelectionRangeProvider=class BracketSelectionRangeProvider{async provideSelectionRanges(e,t){let i=[];for(let n of t){let t=[];i.push(t);let o=new Map;await new Promise(t=>BracketSelectionRangeProvider._bracketsRightYield(t,0,e,n,o)),await new Promise(i=>BracketSelectionRangeProvider._bracketsLeftYield(i,0,e,n,o,t))}return i}static _bracketsRightYield(e,t,i,n,o){let r=new Map,s=Date.now();for(;;){if(t>=BracketSelectionRangeProvider._maxRounds||!n){e();break}let l=i.bracketPairs.findNextBracket(n);if(!l){e();break}let d=Date.now()-s;if(d>BracketSelectionRangeProvider._maxDuration){setTimeout(()=>BracketSelectionRangeProvider._bracketsRightYield(e,t+1,i,n,o));break}if(l.bracketInfo.isOpeningBracket){let e=l.bracketInfo.bracketText,t=r.has(e)?r.get(e):0;r.set(e,t+1)}else{let e=l.bracketInfo.getOpeningBrackets()[0].bracketText,t=r.has(e)?r.get(e):0;if(t-=1,r.set(e,Math.max(0,t)),t<0){let t=o.get(e);t||(t=new o0.S,o.set(e,t)),t.push(l.range)}}n=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,o,r){let s=new Map,l=Date.now();for(;;){if(t>=BracketSelectionRangeProvider._maxRounds&&0===o.size||!n){e();break}let d=i.bracketPairs.findPrevBracket(n);if(!d){e();break}let c=Date.now()-l;if(c>BracketSelectionRangeProvider._maxDuration){setTimeout(()=>BracketSelectionRangeProvider._bracketsLeftYield(e,t+1,i,n,o,r));break}if(d.bracketInfo.isOpeningBracket){let e=d.bracketInfo.bracketText,t=s.has(e)?s.get(e):0;if(t-=1,s.set(e,Math.max(0,t)),t<0){let t=o.get(e);if(t){let n=t.shift();0===t.size&&o.delete(e);let s=t4.e.fromPositions(d.range.getEndPosition(),n.getStartPosition()),l=t4.e.fromPositions(d.range.getStartPosition(),n.getEndPosition());r.push({range:s}),r.push({range:l}),BracketSelectionRangeProvider._addBracketLeading(i,l,r)}}}else{let e=d.bracketInfo.getOpeningBrackets()[0].bracketText,t=s.has(e)?s.get(e):0;s.set(e,t+1)}n=d.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;let n=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(n);0!==o&&o!==t.startColumn&&(i.push({range:t4.e.fromPositions(new t5.L(n,o),t.getEndPosition())}),i.push({range:t4.e.fromPositions(new t5.L(n,1),t.getEndPosition())}));let r=n-1;if(r>0){let n=e.getLineFirstNonWhitespaceColumn(r);n===t.startColumn&&n!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:t4.e.fromPositions(new t5.L(r,n),t.getEndPosition())}),i.push({range:t4.e.fromPositions(new t5.L(r,1),t.getEndPosition())}))}}};BracketSelectionRangeProvider._maxDuration=30,BracketSelectionRangeProvider._maxRounds=2;let WordDistance=class WordDistance{static async create(e,t){if(!t.getOption(118).localityBonus||!t.hasModel())return WordDistance.None;let i=t.getModel(),n=t.getPosition();if(!e.canComputeWordRanges(i.uri))return WordDistance.None;let[o]=await new BracketSelectionRangeProvider().provideSelectionRanges(i,[n]);if(0===o.length)return WordDistance.None;let r=await e.computeWordRanges(i.uri,o[0].range);if(!r)return WordDistance.None;let s=i.getWordUntilPosition(n);return delete r[s.word],new class extends WordDistance{distance(e,i){if(!n.equals(t.getPosition()))return 0;if(17===i.kind)return 2097152;let s="string"==typeof i.label?i.label:i.label.label,l=r[s];if((0,ia.XY)(l))return 2097152;let d=(0,ia.ry)(l,t4.e.fromPositions(e),t4.e.compareRangesUsingStarts),c=d>=0?l[d]:l[Math.max(0,~d-1)],u=o.length;for(let e of o){if(!t4.e.containsRange(e.range,c))break;u-=1}return u}}}};WordDistance.None=new class extends WordDistance{distance(){return 0}};let LineContext=class LineContext{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};let CompletionModel=class CompletionModel{constructor(e,t,i,n,o,r,s=oN.mX.default,l){this.clipboardText=l,this._snippetCompareFn=CompletionModel._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=n,this._options=o,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=s,"top"===r?this._snippetCompareFn=CompletionModel._compareCompletionItemsSnippetsUp:"bottom"===r&&(this._snippetCompareFn=CompletionModel._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();let e=new Set;for(let[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;let e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext,n="",o="",r=1===this._refilterKind?this._items:this._filteredItems,s=[],l=!this._options.filterGraceful||r.length>2e3?oN.EW:oN.l7;for(let d=0;d<r.length;d++){let c=r[d];if(c.isInvalid)continue;let u=this._itemsByProvider.get(c.provider);u?u.push(c):this._itemsByProvider.set(c.provider,[c]);let g=c.position.column-c.editStart.column,m=g+i-(c.position.column-this._column);if(n.length!==m&&(o=(n=0===m?"":t.slice(-m)).toLowerCase()),c.word=n,0===m)c.score=oN.CL.Default;else{let e=0;for(;e<g;){let t=n.charCodeAt(e);if(32===t||9===t)e+=1;else break}if(e>=m)c.score=oN.CL.Default;else if("string"==typeof c.completion.filterText){let t=l(n,o,e,c.completion.filterText,c.filterTextLow,0,this._fuzzyScoreOptions);if(!t)continue;0===(0,iy.zY)(c.completion.filterText,c.textLabel)?c.score=t:(c.score=(0,oN.jB)(n,o,e,c.textLabel,c.labelLow,0),c.score[0]=t[0])}else{let t=l(n,o,e,c.textLabel,c.labelLow,0,this._fuzzyScoreOptions);if(!t)continue;c.score=t}}c.idx=d,c.distance=this._wordDistance.distance(c.position,c.completion),s.push(c),e.push(c.textLabel.length)}this._filteredItems=s.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,ia.HW)(e.length-.85,e,(e,t)=>e-t):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return -1}return CompletionModel._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return -1;if(27===t.completion.kind)return 1}return CompletionModel._compareCompletionItems(e,t)}};var aT=i(77680),suggestModel_param=function(e,t){return function(i,n){t(i,n,e)}};let suggestModel_LineContext=class suggestModel_LineContext{static shouldAutoTrigger(e){if(!e.hasModel())return!1;let t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);let n=t.getWordAtPosition(i);return!!(n&&(n.endColumn===i.column||n.startColumn+1===i.column)&&isNaN(Number(n.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}};function canShowQuickSuggest(e,t,i){if(!t.getContextKeyValue(InlineCompletionContextKeys.inlineSuggestionVisible.key))return!0;let n=t.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);return void 0!==n?!n:!e.getOption(62).suppressSuggestions}function canShowSuggestOnTriggerCharacters(e,t,i){if(!t.getContextKeyValue("inlineSuggestionVisible"))return!0;let n=t.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);return void 0!==n?!n:!e.getOption(62).suppressSuggestions}let aM=eI=class{constructor(e,t,i,n,o,r,s,l,d){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=n,this._logService=o,this._contextKeyService=r,this._configurationService=s,this._languageFeaturesService=l,this._envService=d,this._toDispose=new t2.SL,this._triggerCharacterListener=new t2.SL,this._triggerQuickSuggest=new t1._F,this._triggerState=void 0,this._completionDisposables=new t2.SL,this._onDidCancel=new iM.Q5,this._onDidTrigger=new iM.Q5,this._onDidSuggest=new iM.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new tJ.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(e=>{c||this._onCursorChange(e)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{c||void 0===this._triggerState||this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){(0,t2.B9)(this._triggerCharacterListener),(0,t2.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(91)||!this._editor.hasModel()||!this._editor.getOption(121))return;let e=new Map;for(let t of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let i of t.triggerCharacters||[]){let n=e.get(i);n||((n=new Set).add(getSnippetSuggestSupport()),e.set(i,n)),n.add(t)}let checkTriggerCharacter=t=>{var i;if(!canShowSuggestOnTriggerCharacters(this._editor,this._contextKeyService,this._configurationService)||suggestModel_LineContext.shouldAutoTrigger(this._editor))return;if(!t){let e=this._editor.getPosition(),i=this._editor.getModel();t=i.getLineContent(e.lineNumber).substr(0,e.column-1)}let n="";(0,iy.YK)(t.charCodeAt(t.length-1))?(0,iy.ZG)(t.charCodeAt(t.length-2))&&(n=t.substr(t.length-2)):n=t.charAt(t.length-1);let o=e.get(n);if(o){let e=new Map;if(this._completionModel)for(let[t,i]of this._completionModel.getItemsByProvider())o.has(t)||e.set(t,i);this.trigger({auto:!0,triggerKind:1,triggerCharacter:n,retrigger:!!this._completionModel,clipboardText:null===(i=this._completionModel)||void 0===i?void 0:i.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:e}})}};this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>checkTriggerCharacter()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;void 0!==this._triggerState&&(this._triggerQuickSuggest.cancel(),null===(t=this._requestToken)||void 0===t||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){void 0!==this._triggerState&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}_onCursorChange(e){if(!this._editor.hasModel())return;let t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source){this.cancel();return}void 0===this._triggerState&&0===e.reason?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():void 0!==this._triggerState&&3===e.reason&&this._refilterCompletionItems()}_onCompositionEnd(){void 0===this._triggerState?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;QuickSuggestionsOptions.isAllOff(this._editor.getOption(89))||this._editor.getOption(118).snippetsPreventQuickSuggestions&&(null===(e=ay.get(this._editor))||void 0===e?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(void 0!==this._triggerState||!suggestModel_LineContext.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(89);if(!QuickSuggestionsOptions.isAllOff(i)){if(!QuickSuggestionsOptions.isAllOn(i)){e.tokenization.tokenizeIfCheap(t.lineNumber);let n=e.tokenization.getLineTokens(t.lineNumber),o=n.getStandardTokenType(n.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if("on"!==QuickSuggestionsOptions.valueFor(i,o))return}canShowQuickSuggest(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0})}},this._editor.getOption(90)))}_refilterCompletionItems(){(0,nR.p_)(this._editor.hasModel()),(0,nR.p_)(void 0!==this._triggerState);let e=this._editor.getModel(),t=this._editor.getPosition(),i=new suggestModel_LineContext(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var t,i,n,o,r,s;if(!this._editor.hasModel())return;let l=this._editor.getModel(),d=new suggestModel_LineContext(l,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:null!==(t=e.shy)&&void 0!==t&&t,position:this._editor.getPosition()}),this._context=d;let c={triggerKind:null!==(i=e.triggerKind)&&void 0!==i?i:0};e.triggerCharacter&&(c={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new i0.A;let u=this._editor.getOption(112),g=1;switch(u){case"top":g=0;break;case"bottom":g=2}let{itemKind:m,showDeprecated:f}=eI.createSuggestFilter(this._editor),_=new CompletionOptions(g,null!==(o=null===(n=e.completionOptions)||void 0===n?void 0:n.kindFilter)&&void 0!==o?o:m,null===(r=e.completionOptions)||void 0===r?void 0:r.providerFilter,null===(s=e.completionOptions)||void 0===s?void 0:s.providerItemsToReuse,f),v=WordDistance.create(this._editorWorkerService,this._editor),C=provideSuggestionItems(this._languageFeaturesService.completionProvider,l,this._editor.getPosition(),_,c,this._requestToken.token);Promise.all([C,v]).then(async([t,i])=>{var n;if(null===(n=this._requestToken)||void 0===n||n.dispose(),!this._editor.hasModel())return;let o=null==e?void 0:e.clipboardText;if(!o&&t.needsClipboard&&(o=await this._clipboardService.readText()),void 0===this._triggerState)return;let r=this._editor.getModel(),s=new suggestModel_LineContext(r,this._editor.getPosition(),e),l={...oN.mX.default,firstMatchCanBeWeak:!this._editor.getOption(118).matchOnWordStartOnly};if(this._completionModel=new CompletionModel(t.items,this._context.column,{leadingLineContent:s.leadingLineContent,characterCountDelta:s.column-this._context.column},i,this._editor.getOption(118),this._editor.getOption(112),l,o),this._completionDisposables.add(t.disposable),this._onNewContext(s),this._reportDurationsTelemetry(t.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(let e of t.items)e.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${e.provider._debugDisplayName}`,e.completion)}).catch(i1.dL)}_reportDurationsTelemetry(e){this._telemetryGate++%230==0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){let t=new Set,i=e.getOption(112);"none"===i&&t.add(27);let n=e.getOption(118);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber||(0,iy.V8)(e.leadingLineContent)!==(0,iy.V8)(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){let e=suggestModel_LineContext.shouldAutoTrigger(this._editor);if(e&&this._context){let e=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:e}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&0!==e.leadingWord.word.length){let e=new Map,t=new Set;for(let[i,n]of this._completionModel.getItemsByProvider())n.length>0&&n[0].container.incomplete?t.add(i):e.set(i,n);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:t,providerItemsToReuse:e}})}else{let t=this._completionModel.lineContext,i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){let n=suggestModel_LineContext.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(n&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto||(this._completionModel.lineContext=t,(i=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};aM=eI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([suggestModel_param(1,sG.p),suggestModel_param(2,ix.p),suggestModel_param(3,i4.b),suggestModel_param(4,am.VZ),suggestModel_param(5,tq.i6),suggestModel_param(6,tj.Ui),suggestModel_param(7,ib.p),suggestModel_param(8,aT.Y)],aM);let OvertypingCapturer=class OvertypingCapturer{constructor(e,t){this._disposables=new t2.SL,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;let t=e.getSelections(),i=t.length,n=!1;for(let e=0;e<i;e++)if(!t[e].isEmpty()){n=!0;break}if(!n){0!==this._lastOvertyped.length&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];let o=e.getModel();for(let e=0;e<i;e++){let i=t[e];if(o.getValueLengthInRange(i)>OvertypingCapturer._maxSelectionLength)return;this._lastOvertyped[e]={value:o.getValueInRange(i),multiline:i.startLineNumber!==i.endLineNumber}}})),this._disposables.add(t.onDidTrigger(e=>{this._locked=!0})),this._disposables.add(t.onDidCancel(e=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};OvertypingCapturer._maxSelectionLength=51200;var aR=i(78007);i(38537);var suggestWidgetStatus_param=function(e,t){return function(i,n){t(i,n,e)}};let suggestWidgetStatus_StatusBarViewItem=class suggestWidgetStatus_StatusBarViewItem extends oo.Mm{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=(0,tz.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,suggestWidgetStatus_StatusBarViewItem.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"⏎")}};let aA=class{constructor(e,t,i,n,o){this._menuId=t,this._menuService=n,this._contextKeyService=o,this._menuDisposables=new t2.SL,this.element=tO.R3(e,tO.$(".suggest-status-bar"));let actionViewItemProvider=e=>e instanceof tU.U8?i.createInstance(suggestWidgetStatus_StatusBarViewItem,e,void 0):void 0;this._leftActions=new nh.o(this.element,{actionViewItemProvider}),this._rightActions=new nh.o(this.element,{actionViewItemProvider}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){let e=this._menuService.createMenu(this._menuId,this._contextKeyService),renderMenu=()=>{let t=[],i=[];for(let[n,o]of e.getActions())"left"===n?t.push(...o):i.push(...o);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>renderMenu())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};function canExpandCompletionItem(e){return!!e&&!!(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}aA=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([suggestWidgetStatus_param(2,iL.TG),suggestWidgetStatus_param(3,tU.co),suggestWidgetStatus_param(4,tq.i6)],aA);let aP=class{constructor(e,t){this._editor=e,this._onDidClose=new iM.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new iM.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new t2.SL,this._renderDisposeable=new t2.SL,this._borderWidth=1,this._size=new tO.Ro(330,0),this.domNode=tO.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(iB.$,{editor:e}),this._body=tO.$(".body"),this._scrollbar=new o4.s$(this._body,{alwaysConsumeMouseWheel:!0}),tO.R3(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=tO.R3(this._body,tO.$(".header")),this._close=tO.R3(this._header,tO.$("span"+iw.k.asCSSSelector(tF.l.close))),this._close.title=tz.NC("details.close","Close"),this._type=tO.R3(this._header,tO.$("p.type")),this._docs=tO.R3(this._body,tO.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),n=e.get(119)||t.fontSize,o=e.get(120)||t.lineHeight,r=t.fontWeight,s=`${n}px`,l=`${o}px`;this.domNode.style.fontSize=s,this.domNode.style.lineHeight=`${o/n}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){let e=this._editor.getOption(120)||this._editor.getOption(50).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=tz.NC("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,n;this._renderDisposeable.clear();let{detail:o,documentation:r}=e.completion;if(t){let t="";t+=`score: ${e.score[0]}
prefix: ${null!==(i=e.word)&&void 0!==i?i:"(no prefix)"}
word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
distance: ${e.distance} (localityBonus-setting)
index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
commit_chars: ${null===(n=e.completion.commitCharacters)||void 0===n?void 0:n.join("")}
`,r=new tZ.W5().appendCodeblock("empty",t),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!canExpandCompletionItem(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){let e=o.length>1e5?`${o.substr(0,1e5)}…`:o;this._type.textContent=e,this._type.title=e,tO.$Z(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(e))}else tO.PO(this._type),this._type.title="",tO.Cp(this._type),this.domNode.classList.add("no-type");if(tO.PO(this._docs),"string"==typeof r)this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),tO.PO(this._docs);let e=this._markdownRenderer.render(r);this._docs.appendChild(e.element),this._renderDisposeable.add(e),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){let i=new tO.Ro(e,t);tO.Ro.equals(i,this._size)||(this._size=i,tO.dp(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};aP=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(D=iL.TG,function(e,t){D(e,t,1)})],aP);let SuggestDetailsOverlay=class SuggestDetailsOverlay{constructor(e,t){let i,n;this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new t2.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new ResizableHTMLElement,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let o=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,n=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(e=>{if(i&&n){this.widget.layout(e.dimension.width,e.dimension.height);let t=!1;e.west&&(r=n.width-e.dimension.width,t=!0),e.north&&(o=n.height-e.dimension.height,t=!0),t&&this._applyTopLeft({top:i.top+o,left:i.left+r})}e.done&&(i=void 0,n=void 0,o=0,r=0,this._userSize=e.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var e;this._anchorBox&&this._placeAtAnchor(this._anchorBox,null!==(e=this._userSize)&&void 0!==e?e:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var i;let n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,null!==(i=this._userSize)&&void 0!==i?i:this.widget.size,t)}_placeAtAnchor(e,t,i){var n;let o,r;let s=tO.D6(this.getDomNode().ownerDocument.body),l=this.widget.getLayoutInfo(),d=new tO.Ro(220,2*l.lineHeight),c=e.top,u=function(){let i=s.width-(e.left+e.width+l.borderWidth+l.horizontalPadding),n=-l.borderWidth+e.left+e.width,o=new tO.Ro(i,s.height-e.top-l.borderHeight-l.verticalPadding),r=o.with(void 0,e.top+e.height-l.borderHeight-l.verticalPadding);return{top:c,left:n,fit:i-t.width,maxSizeTop:o,maxSizeBottom:r,minSize:d.with(Math.min(i,d.width))}}(),g=function(){let i=e.left-l.borderWidth-l.horizontalPadding,n=Math.max(l.horizontalPadding,e.left-t.width-l.borderWidth),o=new tO.Ro(i,s.height-e.top-l.borderHeight-l.verticalPadding),r=o.with(void 0,e.top+e.height-l.borderHeight-l.verticalPadding);return{top:c,left:n,fit:i-t.width,maxSizeTop:o,maxSizeBottom:r,minSize:d.with(Math.min(i,d.width))}}(),m=function(){let i=e.left,n=-l.borderWidth+e.top+e.height,o=new tO.Ro(e.width-l.borderHeight,s.height-e.top-e.height-l.verticalPadding);return{top:n,left:i,fit:o.height-t.height,maxSizeBottom:o,maxSizeTop:o,minSize:d.with(o.width)}}(),f=[u,g,m],_=null!==(n=f.find(e=>e.fit>=0))&&void 0!==n?n:f.sort((e,t)=>t.fit-e.fit)[0],v=e.top+e.height-l.borderHeight,C=t.height,b=Math.max(_.maxSizeTop.height,_.maxSizeBottom.height);C>b&&(C=b),i?C<=_.maxSizeTop.height?(o=!0,r=_.maxSizeTop):(o=!1,r=_.maxSizeBottom):C<=_.maxSizeBottom.height?(o=!1,r=_.maxSizeBottom):(o=!0,r=_.maxSizeTop);let{top:S,left:y}=_;!o&&C>e.height&&(S=v-C);let w=this._editor.getDomNode();if(w){let e=w.getBoundingClientRect();S-=e.top,y-=e.left}this._applyTopLeft({left:y,top:S}),this._resizable.enableSashes(!o,_===u,o,_!==u),this._resizable.minSize=_.minSize,this._resizable.maxSize=r,this._resizable.layout(C,Math.min(r.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}};(x=eT||(eT={}))[x.FILE=0]="FILE",x[x.FOLDER=1]="FOLDER",x[x.ROOT_FOLDER=2]="ROOT_FOLDER";let aO=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function getIconClasses(e,t,i,n,o){if(o)return[`codicon-${o.id}`,"predefined-file-icon"];let r=n===eT.ROOT_FOLDER?["rootfolder-icon"]:n===eT.FOLDER?["folder-icon"]:["file-icon"];if(i){let o;if(i.scheme===oy.lg.data){let e=nL.Vb.parseMetaData(i);o=e.get(nL.Vb.META_DATA_LABEL)}else{let e=i.path.match(aO);e?(o=cssEscape(e[2].toLowerCase()),e[1]&&r.push(`${cssEscape(e[1].toLowerCase())}-name-dir-icon`)):o=cssEscape(i.authority.toLowerCase())}if(n===eT.ROOT_FOLDER)r.push(`${o}-root-name-folder-icon`);else if(n===eT.FOLDER)r.push(`${o}-name-folder-icon`);else{if(o){if(r.push(`${o}-name-file-icon`),r.push("name-file-icon"),o.length<=255){let e=o.split(".");for(let t=1;t<e.length;t++)r.push(`${e.slice(t).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}let n=detectLanguageId(e,t,i);n&&r.push(`${cssEscape(n)}-lang-file-icon`)}}return r}function detectLanguageId(e,t,i){if(!i)return null;let n=null;if(i.scheme===oy.lg.data){let e=nL.Vb.parseMetaData(i),o=e.get(nL.Vb.META_DATA_MIME);o&&(n=t.getLanguageIdByMimeType(o))}else{let t=e.getModel(i);t&&(n=t.getLanguageId())}return n&&n!==ow.bd?n:t.guessLanguageIdByFilepathOrFirstLine(i)}function cssEscape(e){return e.replace(/[\11\12\14\15\40]/g,"/")}var suggestWidgetRenderer_param=function(e,t){return function(i,n){t(i,n,e)}};function getAriaId(e){return`suggest-aria-id:${e}`}let aF=(0,n1.q5)("suggest-more-info",tF.l.chevronRight,tz.NC("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),aB=new((eM=class{extract(e,t){if(e.textLabel.match(eM._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(eM._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){let i="string"==typeof e.completion.documentation?e.completion.documentation:e.completion.documentation.value,n=eM._regexRelaxed.exec(i);if(n&&(0===n.index||n.index+n[0].length===i.length))return t[0]=n[0],!0}return!1}})._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,eM._regexStrict=RegExp(`^${eM._regexRelaxed.source}$`,"i"),eM),aW=class{constructor(e,t,i,n){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=n,this._onDidToggleDetails=new iM.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){let t=new t2.SL;e.classList.add("show-file-icons");let i=(0,tO.R3)(e,(0,tO.$)(".icon")),n=(0,tO.R3)(i,(0,tO.$)("span.colorspan")),o=(0,tO.R3)(e,(0,tO.$)(".contents")),r=(0,tO.R3)(o,(0,tO.$)(".main")),s=(0,tO.R3)(r,(0,tO.$)(".icon-label.codicon")),l=(0,tO.R3)(r,(0,tO.$)("span.left")),d=(0,tO.R3)(r,(0,tO.$)("span.right")),c=new ox.g(l,{supportHighlights:!0,supportIcons:!0});t.add(c);let u=(0,tO.R3)(l,(0,tO.$)("span.signature-label")),g=(0,tO.R3)(l,(0,tO.$)("span.qualifier-label")),m=(0,tO.R3)(d,(0,tO.$)("span.details-label")),f=(0,tO.R3)(d,(0,tO.$)("span.readMore"+iw.k.asCSSSelector(aF)));return f.title=tz.NC("readMore","Read More"),{root:e,left:l,right:d,icon:i,colorspan:n,iconLabel:c,iconContainer:s,parametersLabel:u,qualifierLabel:g,detailsLabel:m,readMore:f,disposables:t,configureFont:()=>{let t=this._editor.getOptions(),n=t.get(50),o=n.getMassagedFontFamily(),s=n.fontFeatureSettings,l=t.get(119)||n.fontSize,d=t.get(120)||n.lineHeight,c=n.fontWeight,u=n.letterSpacing,g=`${l}px`,m=`${d}px`,_=`${u}px`;e.style.fontSize=g,e.style.fontWeight=c,e.style.letterSpacing=_,r.style.fontFamily=o,r.style.fontFeatureSettings=s,r.style.lineHeight=m,i.style.height=m,i.style.width=m,f.style.height=m,f.style.width=m}}}renderElement(e,t,i){i.configureFont();let{completion:n}=e;i.root.id=getAriaId(t),i.colorspan.style.backgroundColor="";let o={labelEscapeNewLines:!0,matches:(0,oN.mB)(e.score)},r=[];if(19===n.kind&&aB.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(20===n.kind&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";let t=getIconClasses(this._modelService,this._languageService,ip.o.from({scheme:"fake",path:e.textLabel}),eT.FILE),r=getIconClasses(this._modelService,this._languageService,ip.o.from({scheme:"fake",path:n.detail}),eT.FILE);o.extraClasses=t.length>r.length?t:r}else 23===n.kind&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=[getIconClasses(this._modelService,this._languageService,ip.o.from({scheme:"fake",path:e.textLabel}),eT.FOLDER),getIconClasses(this._modelService,this._languageService,ip.o.from({scheme:"fake",path:n.detail}),eT.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...iw.k.asClassNameArray(ov.gX.toIcon(n.kind))));n.tags&&n.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),"string"==typeof n.label?(i.parametersLabel.textContent="",i.detailsLabel.textContent=stripNewLines(n.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=stripNewLines(n.label.detail||""),i.detailsLabel.textContent=stripNewLines(n.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(118).showInlineDetails?(0,tO.$Z)(i.detailsLabel):(0,tO.Cp)(i.detailsLabel),canExpandCompletionItem(e)?(i.right.classList.add("can-expand-details"),(0,tO.$Z)(i.readMore),i.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},i.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),(0,tO.Cp)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};function stripNewLines(e){return e.replace(/\r\n|\r|\n/g,"")}aW=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([suggestWidgetRenderer_param(1,i2.q),suggestWidgetRenderer_param(2,n3.O),suggestWidgetRenderer_param(3,t9.XE)],aW);var suggestWidget_param=function(e,t){return function(i,n){t(i,n,e)}};(0,t7.P6G)("editorSuggestWidget.background",{dark:t7.D0T,light:t7.D0T,hcDark:t7.D0T,hcLight:t7.D0T},tz.NC("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,t7.P6G)("editorSuggestWidget.border",{dark:t7.D1_,light:t7.D1_,hcDark:t7.D1_,hcLight:t7.D1_},tz.NC("editorSuggestWidgetBorder","Border color of the suggest widget."));let aV=(0,t7.P6G)("editorSuggestWidget.foreground",{dark:t7.NOs,light:t7.NOs,hcDark:t7.NOs,hcLight:t7.NOs},tz.NC("editorSuggestWidgetForeground","Foreground color of the suggest widget."));(0,t7.P6G)("editorSuggestWidget.selectedForeground",{dark:t7.NPS,light:t7.NPS,hcDark:t7.NPS,hcLight:t7.NPS},tz.NC("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,t7.P6G)("editorSuggestWidget.selectedIconForeground",{dark:t7.cbQ,light:t7.cbQ,hcDark:t7.cbQ,hcLight:t7.cbQ},tz.NC("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));let aH=(0,t7.P6G)("editorSuggestWidget.selectedBackground",{dark:t7.Vqd,light:t7.Vqd,hcDark:t7.Vqd,hcLight:t7.Vqd},tz.NC("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));(0,t7.P6G)("editorSuggestWidget.highlightForeground",{dark:t7.Gwp,light:t7.Gwp,hcDark:t7.Gwp,hcLight:t7.Gwp},tz.NC("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,t7.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:t7.PX0,light:t7.PX0,hcDark:t7.PX0,hcLight:t7.PX0},tz.NC("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,t7.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,t7.ZnX)(aV,.5),light:(0,t7.ZnX)(aV,.5),hcDark:(0,t7.ZnX)(aV,.5),hcLight:(0,t7.ZnX)(aV,.5)},tz.NC("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));let PersistedWidgetSize=class PersistedWidgetSize{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof n8}`}restore(){var e;let t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{let e=JSON.parse(t);if(tO.Ro.is(e))return tO.Ro.lift(e)}catch(e){}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}};let az=eR=class{constructor(e,t,i,n,o){let r;this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new t2.XK,this._pendingShowDetails=new t2.XK,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new t1._F,this._disposables=new t2.SL,this._onDidSelect=new iM.K3,this._onDidFocus=new iM.K3,this._onDidHide=new iM.Q5,this._onDidShow=new iM.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new iM.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new ResizableHTMLElement,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new SuggestContentWidget(this,e),this._persistedSize=new PersistedWidgetSize(t,e);let ResizeState=class ResizeState{constructor(e,t,i=!1,n=!1){this.persistedSize=e,this.currentSize=t,this.persistHeight=i,this.persistWidth=n}};this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),r=new ResizeState(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(e=>{var t,i,n,o;if(this._resize(e.dimension.width,e.dimension.height),r&&(r.persistHeight=r.persistHeight||!!e.north||!!e.south,r.persistWidth=r.persistWidth||!!e.east||!!e.west),e.done){if(r){let{itemHeight:e,defaultSize:s}=this.getLayoutInfo(),l=Math.round(e/2),{width:d,height:c}=this.element.size;(!r.persistHeight||Math.abs(r.currentSize.height-c)<=l)&&(c=null!==(i=null===(t=r.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:s.height),(!r.persistWidth||Math.abs(r.currentSize.width-d)<=l)&&(d=null!==(o=null===(n=r.persistedSize)||void 0===n?void 0:n.width)&&void 0!==o?o:s.width),this._persistedSize.store(new tO.Ro(d,c))}this._contentWidget.unlockPreference(),r=void 0}})),this._messageElement=tO.R3(this.element.domNode,tO.$(".message")),this._listElement=tO.R3(this.element.domNode,tO.$(".tree"));let s=this._disposables.add(o.createInstance(aP,this.editor));s.onDidClose(this.toggleDetails,this,this._disposables),this._details=new SuggestDetailsOverlay(s,this.editor);let applyIconStyle=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(118).showIcons);applyIconStyle();let l=o.createInstance(aW,this.editor);this._disposables.add(l),this._disposables.add(l.onDidToggleDetails(()=>this.toggleDetails())),this._list=new nu.aV("SuggestWidget",this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>"suggestion"},[l],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>tz.NC("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:e=>{let t=e.textLabel;if("string"!=typeof e.completion.label){let{detail:i,description:n}=e.completion.label;i&&n?t=tz.NC("label.full","{0} {1}, {2}",t,i,n):i?t=tz.NC("label.detail","{0} {1}",t,i):n&&(t=tz.NC("label.desc","{0}, {1}",t,n))}if(!e.isResolved||!this._isDetailsVisible())return t;let{documentation:i,detail:n}=e.completion,o=iy.WU("{0}{1}",n||"",i?"string"==typeof i?i:i.value:"");return tz.NC("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",t,o)}}}),this._list.style((0,ng.TU)({listInactiveFocusBackground:aH,listInactiveFocusOutline:t7.xL1})),this._status=o.createInstance(aA,this.element.domNode,ag);let applyStatusBarStyle=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(118).showStatusBar);applyStatusBarStyle(),this._disposables.add(n.onDidColorThemeChange(e=>this._onThemeChange(e))),this._onThemeChange(n.getColorTheme()),this._disposables.add(this._list.onMouseDown(e=>this._onListMouseDownOrTap(e))),this._disposables.add(this._list.onTap(e=>this._onListMouseDownOrTap(e))),this._disposables.add(this._list.onDidChangeSelection(e=>this._onListSelection(e))),this._disposables.add(this._list.onDidChangeFocus(e=>this._onListFocus(e))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(e=>{e.hasChanged(118)&&(applyStatusBarStyle(),applyIconStyle()),this._completionModel&&(e.hasChanged(50)||e.hasChanged(119)||e.hasChanged(120))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=au.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=au.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=au.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=au.HasFocusedSuggestion.bindTo(i),this._disposables.add(tO.mu(this._details.widget.domNode,"keydown",e=>{this._onDetailsKeydown.fire(e)})),this._disposables.add(this.editor.onMouseDown(e=>this._onEditorMouseDown(e)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){void 0!==e.element&&void 0!==e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){let i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=(0,nw.c3)(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let i=e.elements[0],n=e.indexes[0];i!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(n),this._currentSuggestionDetails=(0,t1.PG)(async e=>{let t=(0,t1.Vg)(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),n=e.onCancellationRequested(()=>t.dispose());try{return await i.resolve(e)}finally{t.dispose(),n.dispose()}}),this._currentSuggestionDetails.then(()=>{n>=this._list.length||i!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[i]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:getAriaId(n)}))}).catch(i1.dL)),this._onDidFocus.fire({item:i,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",4===e),this.element.domNode.classList.remove("message"),e){case 0:tO.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=eR.LOADING_MESSAGE,tO.Cp(this._listElement,this._status.element),tO.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,tQ.i7)(eR.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=eR.NO_SUGGESTIONS_MESSAGE,tO.Cp(this._listElement,this._status.element),tO.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,tQ.i7)(eR.NO_SUGGESTIONS_MESSAGE);break;case 3:case 4:tO.Cp(this._messageElement),tO.$Z(this._listElement,this._status.element),this._show();break;case 5:tO.Cp(this._messageElement),tO.$Z(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,t1.Vg)(()=>this._setState(1),t)))}showSuggestions(e,t,i,n,o){var r,s;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(r=this._loadingTimeout)||void 0===r||r.dispose(),null===(s=this._currentSuggestionDetails)||void 0===s||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state){this._setState(4);return}let l=this._completionModel.items.length,d=0===l;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),d){this._setState(n?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=tO.lI(tO.Jj(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(canExpandCompletionItem(this._list.getFocusedElements()[0])||this._explainMode)&&(3===this._state||5===this._state||4===this._state)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=tO.lI(tO.Jj(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return 4===this._state}_afterRender(e){if(null===e){this._isDetailsVisible()&&this._details.hide();return}2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var t,i,n;if(!this.editor.hasModel()||!this.editor.getDomNode())return;let o=tO.D6(this.element.domNode.ownerDocument.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let s=e.height,l=e.width;if(this._status.element.style.height=`${r.itemHeight}px`,2===this._state||1===this._state)s=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new tO.Ro(l,s),this._contentWidget.setPreference(2);else{let d=o.width-r.borderHeight-2*r.horizontalPadding;l>d&&(l=d);let c=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,u=r.statusBarHeight+this._list.contentHeight+r.borderHeight,g=r.itemHeight+r.statusBarHeight,m=tO.i(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),_=m.top+f.top+f.height,v=Math.min(o.height-_-r.verticalPadding,u),C=m.top+f.top-r.verticalPadding,b=Math.min(C,u),S=Math.min(Math.max(b,v)+r.borderHeight,u);s===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(s=this._cappedHeight.wanted),s<g&&(s=g),s>S&&(s=S),s>v||this._forceRenderingAbove&&C>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),S=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),S=v),this.element.preferredSize=new tO.Ro(c,r.defaultSize.height),this.element.maxSize=new tO.Ro(d,S),this.element.minSize=new tO.Ro(220,g),this._cappedHeight=s===u?{wanted:null!==(n=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==n?n:e.height,capped:s}:void 0}this._resize(l,s)}_resize(e,t){let{width:i,height:n}=this.element.maxSize;e=Math.min(i,e),t=Math.min(n,t);let{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0])===2)}getLayoutInfo(){let e=this.editor.getOption(50),t=(0,aR.uZ)(this.editor.getOption(120)||e.lineHeight,8,1e3),i=this.editor.getOption(118).showStatusBar&&2!==this._state&&1!==this._state?t:0,n=this._details.widget.borderWidth,o=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new tO.Ro(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};az.LOADING_MESSAGE=tz.NC("suggestWidget.loading","Loading..."),az.NO_SUGGESTIONS_MESSAGE=tz.NC("suggestWidget.noSuggestions","No suggestions."),az=eR=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([suggestWidget_param(1,nP.Uy),suggestWidget_param(2,tq.i6),suggestWidget_param(3,t9.XE),suggestWidget_param(4,iL.TG)],az);let SuggestContentWidget=class SuggestContentWidget{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){let{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:n}=this._widget.getLayoutInfo();return new tO.Ro(t+2*i+n,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}};var suggestController_param=function(e,t){return function(i,n){t(i,n,e)}};let LineSuffix=class LineSuffix{constructor(e,t){this._model=e,this._position=t,this._decorationOptions=t6.qx.register({description:"suggest-line-suffix",stickiness:1});let i=e.getLineMaxColumn(t.lineNumber);if(i!==t.column){let i=e.getOffsetAt(t),n=e.getPositionAt(i+1);e.changeDecorations(e=>{this._marker&&e.removeDecoration(this._marker),this._marker=e.addDecoration(t4.e.fromPositions(t,n),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(!this._marker)return this._model.getLineMaxColumn(e.lineNumber)-e.column;{let t=this._model.getDecorationRange(this._marker),i=this._model.getOffsetAt(t.getStartPosition());return i-this._model.getOffsetAt(e)}}};let aU=eA=class{static get(e){return e.getContribution(eA.ID)}constructor(e,t,i,n,o,r,s){this._memoryService=t,this._commandService=i,this._contextKeyService=n,this._instantiationService=o,this._logService=r,this._telemetryService=s,this._lineSuffix=new t2.XK,this._toDispose=new t2.SL,this._selectors=new PriorityRegistry(e=>e.priority),this._onWillInsertSuggestItem=new iM.Q5,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=o.createInstance(aM,this.editor),this._selectors.register({priority:0,select:(e,t,i)=>this._memoryService.select(e,t,i)});let l=au.InsertMode.bindTo(n);l.set(e.getOption(118).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(118).insertMode))),this.widget=this._toDispose.add(new tO.vx((0,tO.Jj)(e.getDomNode()),()=>{let e=this._instantiationService.createInstance(az,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect(e=>this._insertSuggestion(e,0),this));let t=new CommitCharacterController(this.editor,e,this.model,e=>this._insertSuggestion(e,2));this._toDispose.add(t);let i=au.MakesTextEdit.bindTo(this._contextKeyService),n=au.HasInsertAndReplaceRange.bindTo(this._contextKeyService),o=au.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,t2.OF)(()=>{i.reset(),n.reset(),o.reset()})),this._toDispose.add(e.onDidFocus(({item:e})=>{let t=this.editor.getPosition(),r=e.editStart.column,s=t.column,l=!0;if("smart"===this.editor.getOption(1)&&2===this.model.state&&!e.completion.additionalTextEdits&&!(4&e.completion.insertTextRules)&&s-r===e.completion.insertText.length){let i=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:r,endLineNumber:t.lineNumber,endColumn:s});l=i!==e.completion.insertText}i.set(l),n.set(!t5.L.equals(e.editInsertEnd,e.editReplaceEnd)),o.set(!!e.provider.resolveCompletionItem||!!e.completion.documentation||e.completion.detail!==e.completion.label)})),this._toDispose.add(e.onDetailsKeyDown(e=>{if(e.toKeyCodeChord().equals(new ak.$M(!0,!1,!1,!1,33))||io.dz&&e.toKeyCodeChord().equals(new ak.$M(!1,!1,!1,!0,33))){e.stopPropagation();return}e.toKeyCodeChord().isModifierKey()||this.editor.focus()})),e})),this._overtypingCapturer=this._toDispose.add(new tO.vx((0,tO.Jj)(e.getDomNode()),()=>this._toDispose.add(new OvertypingCapturer(this.editor,this.model)))),this._alternatives=this._toDispose.add(new tO.vx((0,tO.Jj)(e.getDomNode()),()=>this._toDispose.add(new aI(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(aE,e)),this._toDispose.add(this.model.onDidTrigger(e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new LineSuffix(this.editor.getModel(),e.position)})),this._toDispose.add(this.model.onDidSuggest(e=>{if(e.triggerOptions.shy)return;let t=-1;for(let i of this._selectors.itemsOrderedByPriorityDesc)if(-1!==(t=i.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items)))break;if(-1===t&&(t=0),0===this.model.state)return;let i=!1;if(e.triggerOptions.auto){let t=this.editor.getOption(118);"never"===t.selectionMode||"always"===t.selectionMode?i="never"===t.selectionMode:"whenTriggerCharacter"===t.selectionMode?i=1!==e.triggerOptions.triggerKind:"whenQuickSuggestion"===t.selectionMode&&(i=1===e.triggerOptions.triggerKind&&!e.triggerOptions.refilter)}this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.triggerOptions.auto,i)})),this._toDispose.add(this.model.onDidCancel(e=>{e.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let d=au.AcceptSuggestionsOnEnter.bindTo(n),updateFromConfig=()=>{let e=this.editor.getOption(1);d.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>updateFromConfig())),updateFromConfig()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let i=ay.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});let n=this.editor.getModel(),o=n.getAlternativeVersionId(),{item:r}=e,s=[],l=new i0.A;1&t||this.editor.pushUndoStop();let d=this.getOverwriteInfo(r,!!(8&t));this._memoryService.memorize(n,this.editor.getPosition(),r);let c=r.isResolved,u=-1,g=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();let e=nM.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(e=>{let t=t4.e.lift(e.range);if(t.startLineNumber===r.position.lineNumber&&t.startColumn>r.position.column){let e=this.editor.getPosition().column-r.position.column,i=t4.e.spansMultipleLines(t)?0:e;t=new t4.e(t.startLineNumber,t.startColumn+e,t.endLineNumber,t.endColumn+i)}return rx.h.replaceMove(t,e.text)})),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!c){let e;let i=new nK.G,o=n.onDidChangeContent(t=>{if(t.isFlush){l.cancel(),o.dispose();return}for(let i of t.changes){let t=t4.e.getEndPosition(i.range);(!e||t5.L.isBefore(t,e))&&(e=t)}}),d=t;t|=2;let c=!1,u=this.editor.onWillType(()=>{u.dispose(),c=!0,2&d||this.editor.pushUndoStop()});s.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(e&&r.completion.additionalTextEdits.some(t=>t5.L.isBefore(e,t4.e.getStartPosition(t.range))))return!1;c&&this.editor.pushUndoStop();let t=nM.Z.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(e=>rx.h.replaceMove(t4.e.lift(e.range),e.text))),t.restoreRelativeVerticalPositionOfCursor(this.editor),(c||!(2&d))&&this.editor.pushUndoStop(),!0}).then(e=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",i.elapsed(),e),g=!0===e?1:!1===e?0:-2}).finally(()=>{o.dispose(),u.dispose()}))}let{insertText:m}=r.completion;if(4&r.completion.insertTextRules||(m=SnippetParser.escape(m)),this.model.cancel(),i.insert(m,{overwriteBefore:d.overwriteBefore,overwriteAfter:d.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&r.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),r.completion.command){if(r.completion.command.id===TriggerSuggestAction.id)this.model.trigger({auto:!0,retrigger:!0});else{let e=new nK.G;s.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(e=>{r.completion.extensionId?(0,i1.Cp)(e):(0,i1.dL)(e)}).finally(()=>{u=e.elapsed()}))}}4&t&&this._alternatives.value.set(e,e=>{for(l.cancel();n.canUndo();){o!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(e,3|(8&t?8:0));break}}),this._alertCompletionItem(r),Promise.all(s).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,n,c,u,g),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,n,o){var r,s,l;0!==Math.floor(100*Math.random())&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:null!==(s=null===(r=e.extensionId)||void 0===r?void 0:r.value)&&void 0!==s?s:"unknown",providerId:null!==(l=e.provider._debugDisplayName)&&void 0!==l?l:"unknown",kind:e.completion.kind,basenameHash:(0,sM.vp)((0,nL.EZ)(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:(0,nL.DZ)(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:n,additionalEditsAsync:o})}getOverwriteInfo(e,t){(0,nR.p_)(this.editor.hasModel());let i="replace"===this.editor.getOption(118).insertMode;t&&(i=!i);let n=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,s=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:n+r,overwriteAfter:o+s}}_alertCompletionItem(e){if((0,ia.Of)(e.completion.additionalTextEdits)){let t=tz.NC("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,tQ.Z9)(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:null!=t&&t,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;let t=this.editor.getPosition(),fallback=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},makesTextEdit=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;let t=this.editor.getPosition(),i=e.editStart.column,n=t.column;if(n-i!==e.completion.insertText.length)return!0;let o=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:i,endLineNumber:t.lineNumber,endColumn:n});return o!==e.completion.insertText};iM.ju.once(this.model.onDidTrigger)(e=>{let t=[];iM.ju.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{(0,t2.B9)(t),fallback()},void 0,t),this.model.onDidSuggest(({completionModel:e})=>{if((0,t2.B9)(t),0===e.items.length){fallback();return}let i=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),n=e.items[i];if(!makesTextEdit(n)){fallback();return}this.editor.pushUndoStop(),this._insertSuggestion({index:i,item:n,model:e},7)},void 0,t)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){let i=this.widget.value.getFocusedItem(),n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};aU.ID="editor.contrib.suggestController",aU=eA=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([suggestController_param(1,aN),suggestController_param(2,tK.H),suggestController_param(3,tq.i6),suggestController_param(4,iL.TG),suggestController_param(5,am.VZ),suggestController_param(6,i4.b)],aU);let PriorityRegistry=class PriorityRegistry{constructor(e){this.prioritySelector=e,this._items=[]}register(e){if(-1!==this._items.indexOf(e))throw Error("Value is already registered");return this._items.push(e),this._items.sort((e,t)=>this.prioritySelector(t)-this.prioritySelector(e)),{dispose:()=>{let t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}};let TriggerSuggestAction=class TriggerSuggestAction extends tB.R6{constructor(){super({id:TriggerSuggestAction.id,label:tz.NC("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:tq.Ao.and(tH.u.writable,tH.u.hasCompletionItemProvider,au.Visible.toNegated()),kbOpts:{kbExpr:tH.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){let n;let o=aU.get(t);o&&(i&&"object"==typeof i&&!0===i.auto&&(n=!0),o.triggerSuggest(void 0,n,void 0))}};TriggerSuggestAction.id="editor.action.triggerSuggest",(0,tB._K)(aU.ID,aU,2),(0,tB.Qr)(TriggerSuggestAction);let aK=tB._l.bindToContribution(aU.get);(0,tB.fK)(new aK({id:"acceptSelectedSuggestion",precondition:tq.Ao.and(au.Visible,au.HasFocusedSuggestion),handler(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:tq.Ao.and(au.Visible,tH.u.textInputFocus),weight:190},{primary:3,kbExpr:tq.Ao.and(au.Visible,tH.u.textInputFocus,au.AcceptSuggestionsOnEnter,au.MakesTextEdit),weight:190}],menuOpts:[{menuId:ag,title:tz.NC("accept.insert","Insert"),group:"left",order:1,when:au.HasInsertAndReplaceRange.toNegated()},{menuId:ag,title:tz.NC("accept.insert","Insert"),group:"left",order:1,when:tq.Ao.and(au.HasInsertAndReplaceRange,au.InsertMode.isEqualTo("insert"))},{menuId:ag,title:tz.NC("accept.replace","Replace"),group:"left",order:1,when:tq.Ao.and(au.HasInsertAndReplaceRange,au.InsertMode.isEqualTo("replace"))}]})),(0,tB.fK)(new aK({id:"acceptAlternativeSelectedSuggestion",precondition:tq.Ao.and(au.Visible,tH.u.textInputFocus,au.HasFocusedSuggestion),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:ag,group:"left",order:2,when:tq.Ao.and(au.HasInsertAndReplaceRange,au.InsertMode.isEqualTo("insert")),title:tz.NC("accept.replace","Replace")},{menuId:ag,group:"left",order:2,when:tq.Ao.and(au.HasInsertAndReplaceRange,au.InsertMode.isEqualTo("replace")),title:tz.NC("accept.insert","Insert")}]})),tK.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,tB.fK)(new aK({id:"hideSuggestWidget",precondition:au.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:9,secondary:[1033]}})),(0,tB.fK)(new aK({id:"selectNextSuggestion",precondition:tq.Ao.and(au.Visible,tq.Ao.or(au.MultipleSuggestions,au.HasFocusedSuggestion.negate())),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,tB.fK)(new aK({id:"selectNextPageSuggestion",precondition:tq.Ao.and(au.Visible,tq.Ao.or(au.MultipleSuggestions,au.HasFocusedSuggestion.negate())),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:12,secondary:[2060]}})),(0,tB.fK)(new aK({id:"selectLastSuggestion",precondition:tq.Ao.and(au.Visible,tq.Ao.or(au.MultipleSuggestions,au.HasFocusedSuggestion.negate())),handler:e=>e.selectLastSuggestion()})),(0,tB.fK)(new aK({id:"selectPrevSuggestion",precondition:tq.Ao.and(au.Visible,tq.Ao.or(au.MultipleSuggestions,au.HasFocusedSuggestion.negate())),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,tB.fK)(new aK({id:"selectPrevPageSuggestion",precondition:tq.Ao.and(au.Visible,tq.Ao.or(au.MultipleSuggestions,au.HasFocusedSuggestion.negate())),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:11,secondary:[2059]}})),(0,tB.fK)(new aK({id:"selectFirstSuggestion",precondition:tq.Ao.and(au.Visible,tq.Ao.or(au.MultipleSuggestions,au.HasFocusedSuggestion.negate())),handler:e=>e.selectFirstSuggestion()})),(0,tB.fK)(new aK({id:"focusSuggestion",precondition:tq.Ao.and(au.Visible,au.HasFocusedSuggestion.negate()),handler:e=>e.focusSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,tB.fK)(new aK({id:"focusAndAcceptSuggestion",precondition:tq.Ao.and(au.Visible,au.HasFocusedSuggestion.negate()),handler:e=>{e.focusSuggestion(),e.acceptSelectedSuggestion(!0,!1)}})),(0,tB.fK)(new aK({id:"toggleSuggestionDetails",precondition:tq.Ao.and(au.Visible,au.HasFocusedSuggestion),handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:ag,group:"right",order:1,when:tq.Ao.and(au.DetailsVisible,au.CanResolve),title:tz.NC("detail.more","show less")},{menuId:ag,group:"right",order:1,when:tq.Ao.and(au.DetailsVisible.toNegated(),au.CanResolve),title:tz.NC("detail.less","show more")}]})),(0,tB.fK)(new aK({id:"toggleExplainMode",precondition:au.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),(0,tB.fK)(new aK({id:"toggleSuggestionFocus",precondition:au.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,tB.fK)(new aK({id:"insertBestCompletion",precondition:tq.Ao.and(tH.u.textInputFocus,tq.Ao.equals("config.editor.tabCompletion","on"),aE.AtEnd,au.Visible.toNegated(),aI.OtherSuggestions.toNegated(),ay.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest((0,nR.Kn)(t)?{fallback:"tab",...t}:{fallback:"tab"})},kbOpts:{weight:190,primary:2}})),(0,tB.fK)(new aK({id:"insertNextSuggestion",precondition:tq.Ao.and(tH.u.textInputFocus,tq.Ao.equals("config.editor.tabCompletion","on"),aI.OtherSuggestions,au.Visible.toNegated(),ay.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:2}})),(0,tB.fK)(new aK({id:"insertPrevSuggestion",precondition:tq.Ao.and(tH.u.textInputFocus,tq.Ao.equals("config.editor.tabCompletion","on"),aI.OtherSuggestions,au.Visible.toNegated(),ay.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:190,kbExpr:tH.u.textInputFocus,primary:1026}})),(0,tB.Qr)(class extends tB.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:tz.NC("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(e,t){var i;null===(i=aU.get(t))||void 0===i||i.resetWidgetSize()}});let SuggestWidgetAdaptor=class SuggestWidgetAdaptor extends t2.JT{get selectedItem(){return this._selectedItem}constructor(e,t,i,n){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=i,this.onWillAccept=n,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=(0,rp.uh)(this,void 0),this._register(e.onKeyDown(e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));let o=aU.get(this.editor);if(o){this._register(o.registerSelector({priority:100,select:(e,t,i)=>{var n;(0,rp.PS)(e=>this.checkModelVersion(e));let r=this.editor.getModel();if(!r)return -1;let s=null===(n=this.suggestControllerPreselector())||void 0===n?void 0:n.removeCommonPrefix(r);if(!s)return -1;let l=t5.L.lift(t),d=i.map((e,t)=>{let i=SuggestItemInfo.fromSuggestion(o,r,l,e,this.isShiftKeyPressed),n=i.toSingleTextEdit().removeCommonPrefix(r),d=s.augments(n);return{index:t,valid:d,prefixLength:n.text.length,suggestItem:e}}).filter(e=>e&&e.valid&&e.prefixLength>0),c=(0,rV.dI)(d,(0,ia.tT)(e=>e.prefixLength,ia.fv));return c?c.index:-1}}));let e=!1,bindToSuggestWidget=()=>{e||(e=!0,this._register(o.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(o.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(o.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(iM.ju.once(o.model.onDidTrigger)(e=>{bindToSuggestWidget()})),this._register(o.onWillInsertSuggestItem(e=>{let t=this.editor.getPosition(),i=this.editor.getModel();if(!t||!i)return;let n=SuggestItemInfo.fromSuggestion(o,i,t,e.item,this.isShiftKeyPressed);this.onWillAccept(n)}))}this.update(this._isActive)}update(e){let t=this.getSuggestItemInfo();this._isActive===e&&suggestItemInfoEquals(this._currentSuggestItemInfo,t)||(this._isActive=e,this._currentSuggestItemInfo=t,(0,rp.PS)(e=>{this.checkModelVersion(e),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,e)}))}getSuggestItemInfo(){let e=aU.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;let t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),n=this.editor.getModel();if(t&&i&&n)return SuggestItemInfo.fromSuggestion(e,n,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){let e=aU.get(this.editor);null==e||e.stopForceRenderingAbove()}forceRenderingAbove(){let e=aU.get(this.editor);null==e||e.forceRenderingAbove()}};let SuggestItemInfo=class SuggestItemInfo{static fromSuggestion(e,t,i,n,o){let{insertText:r}=n.completion,s=!1;if(4&n.completion.insertTextRules){let e=new SnippetParser().parse(r);e.children.length<100&&ab.adjustWhitespace(t,i,!0,e),r=e.toString(),s=!0}let l=e.getOverwriteInfo(n,o);return new SuggestItemInfo(t4.e.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),r,n.completion.kind,s)}constructor(e,t,i,n){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=n}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new ov.ln(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new SingleTextEdit(this.range,this.insertText)}};function suggestItemInfoEquals(e,t){return e===t||!!e&&!!t&&e.equals(t)}var aj=i(9454),inlineCompletionsController_param=function(e,t){return function(i,n){t(i,n,e)}};let aq=eP=class extends t2.JT{static get(e){return e.getContribution(eP.ID)}constructor(e,t,i,n,o,r,s,l,d){let c;super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=n,this._commandService=o,this._debounceService=r,this._languageFeaturesService=s,this._accessibilitySignalService=l,this._keybindingService=d,this.model=this._register((0,rp.DN)("inlineCompletionModel",void 0)),this._textModelVersionId=(0,rp.uh)(this,-1),this._positions=(0,rp.uh)(this,[new t5.L(1,1)]),this._suggestWidgetAdaptor=this._register(new SuggestWidgetAdaptor(this.editor,()=>{var e,t;return null===(t=null===(e=this.model.get())||void 0===e?void 0:e.selectedInlineCompletion.get())||void 0===t?void 0:t.toSingleTextEdit(void 0)},e=>this.updateObservables(e,eD.Other),e=>{(0,rp.PS)(t=>{var i;this.updateObservables(t,eD.Other),null===(i=this.model.get())||void 0===i||i.handleSuggestAccepted(e)})})),this._enabled=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._fontFamily=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._ghostTexts=(0,rp.nK)(this,e=>{var t;let i=this.model.read(e);return null!==(t=null==i?void 0:i.ghostTexts.read(e))&&void 0!==t?t:[]}),this._stablizedGhostTexts=convertItemsToStableObservables(this._ghostTexts,this._store),this._ghostTextWidgets=(0,aj.Zg)(this,this._stablizedGhostTexts,(e,t)=>t.add(this._instantiationService.createInstance(ai,this.editor,{ghostText:e,minReservedLineCount:(0,rp.Dz)(0),targetTextModel:this.model.map(e=>null==e?void 0:e.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._playAccessibilitySignal=(0,rp.GN)(this),this._isReadonly=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(91)),this._textModel=(0,rp.rD)(this.editor.onDidChangeModel,()=>this.editor.getModel()),this._textModelIfWritable=(0,rp.nK)(e=>this._isReadonly.read(e)?void 0:this._textModel.read(e)),this._register(new InlineCompletionContextKeys(this._contextKeyService,this.model)),this._register((0,rp.EH)(i=>{let n=this._textModelIfWritable.read(i);(0,rp.PS)(i=>{if(this.model.set(void 0,i),this.updateObservables(i,eD.Other),n){let o=t.createInstance(aL,n,this._suggestWidgetAdaptor.selectedItem,this._textModelVersionId,this._positions,this._debounceValue,(0,rp.rD)(e.onDidChangeConfiguration,()=>e.getOption(118).preview),(0,rp.rD)(e.onDidChangeConfiguration,()=>e.getOption(118).previewMode),(0,rp.rD)(e.onDidChangeConfiguration,()=>e.getOption(62).mode),this._enabled);this.model.set(o,i)}})}));let u=this._register((0,tO.aU)());this._register((0,rp.EH)(e=>{let t=this._fontFamily.read(e);u.setStyle(""===t||"default"===t?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${t};
}`)}));let getReason=e=>{var t;return e.isUndoing?eD.Undo:e.isRedoing?eD.Redo:(null===(t=this.model.get())||void 0===t?void 0:t.isAcceptingPartially)?eD.AcceptWord:eD.Other};this._register(e.onDidChangeModelContent(e=>(0,rp.PS)(t=>this.updateObservables(t,getReason(e))))),this._register(e.onDidChangeCursorPosition(e=>(0,rp.PS)(t=>{var i;this.updateObservables(t,eD.Other),(3===e.reason||"api"===e.source)&&(null===(i=this.model.get())||void 0===i||i.stop(t))}))),this._register(e.onDidType(()=>(0,rp.PS)(e=>{var t;this.updateObservables(e,eD.Other),this._enabled.get()&&(null===(t=this.model.get())||void 0===t||t.trigger(e))}))),this._register(this._commandService.onDidExecuteCommand(t=>{let i=new Set([tA.wk.Tab.id,tA.wk.DeleteLeft.id,tA.wk.DeleteRight.id,rm,"acceptSelectedSuggestion"]);i.has(t.commandId)&&e.hasTextFocus()&&this._enabled.get()&&(0,rp.PS)(e=>{var t;null===(t=this.model.get())||void 0===t||t.trigger(e)})})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||ry.dropDownVisible||(0,rp.PS)(e=>{var t;null===(t=this.model.get())||void 0===t||t.stop(e)})})),this._register((0,rp.EH)(e=>{var t;let i=null===(t=this.model.read(e))||void 0===t?void 0:t.state.read(e);(null==i?void 0:i.suggestItem)?i.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register((0,t2.OF)(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register((0,rp.nJ)({handleChange:(e,t)=>(e.didChange(this._playAccessibilitySignal)&&(c=void 0),!0)},async e=>{this._playAccessibilitySignal.read(e);let t=this.model.read(e),i=null==t?void 0:t.state.read(e);if(!t||!i||!i.inlineCompletion){c=void 0;return}if(i.inlineCompletion.semanticId!==c){c=i.inlineCompletion.semanticId;let e=t.textModel.getLineContent(i.primaryGhostText.lineNumber);this._accessibilitySignalService.playSignal(sY.iP.inlineSuggestion).then(()=>{this.editor.getOption(8)&&this.provideScreenReaderUpdate(i.primaryGhostText.renderForScreenReader(e))})}})),this._register(new rC(this.editor,this.model,this._instantiationService)),this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}provideScreenReaderUpdate(e){let t;let i=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),n=this._keybindingService.lookupKeybinding("editor.action.accessibleView");!i&&n&&this.editor.getOption(148)&&(t=(0,tz.NC)("showAccessibleViewHint","Inspect this in the accessible view ({0})",n.getAriaLabel())),t?(0,tQ.Z9)(e+", "+t):(0,tQ.Z9)(e)}updateObservables(e,t){var i,n,o;let r=this.editor.getModel();this._textModelVersionId.set(null!==(i=null==r?void 0:r.getVersionId())&&void 0!==i?i:-1,e,t),this._positions.set(null!==(o=null===(n=this.editor.getSelections())||void 0===n?void 0:n.map(e=>e.getPosition()))&&void 0!==o?o:[new t5.L(1,1)],e)}shouldShowHoverAt(e){var t;let i=null===(t=this.model.get())||void 0===t?void 0:t.primaryGhostText.get();return!!i&&i.parts.some(t=>e.containsPosition(new t5.L(i.lineNumber,t.column)))}shouldShowHoverAtViewZone(e){var t,i;return null!==(i=null===(t=this._ghostTextWidgets.get()[0])||void 0===t?void 0:t.ownsViewZone(e))&&void 0!==i&&i}};function convertItemsToStableObservables(e,t){let i=(0,rp.uh)("result",[]),n=[];return t.add((0,rp.EH)(t=>{let o=e.read(t);(0,rp.PS)(e=>{if(o.length!==n.length){n.length=o.length;for(let e=0;e<n.length;e++)n[e]||(n[e]=(0,rp.uh)("item",o[e]));i.set([...n],e)}n.forEach((t,i)=>t.set(o[i],e))})})),i}aq.ID="editor.contrib.inlineCompletionsController",aq=eP=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inlineCompletionsController_param(1,iL.TG),inlineCompletionsController_param(2,tq.i6),inlineCompletionsController_param(3,tj.Ui),inlineCompletionsController_param(4,tK.H),inlineCompletionsController_param(5,nH.A),inlineCompletionsController_param(6,ib.p),inlineCompletionsController_param(7,sY.IV),inlineCompletionsController_param(8,iA.d)],aq);let ShowNextInlineSuggestionAction=class ShowNextInlineSuggestionAction extends tB.R6{constructor(){super({id:ShowNextInlineSuggestionAction.ID,label:tz.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:tq.Ao.and(tH.u.writable,InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var i;let n=aq.get(t);null===(i=null==n?void 0:n.model.get())||void 0===i||i.next()}};ShowNextInlineSuggestionAction.ID=r_;let ShowPreviousInlineSuggestionAction=class ShowPreviousInlineSuggestionAction extends tB.R6{constructor(){super({id:ShowPreviousInlineSuggestionAction.ID,label:tz.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:tq.Ao.and(tH.u.writable,InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var i;let n=aq.get(t);null===(i=null==n?void 0:n.model.get())||void 0===i||i.previous()}};ShowPreviousInlineSuggestionAction.ID=rf;let TriggerInlineSuggestionAction=class TriggerInlineSuggestionAction extends tB.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:tz.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:tH.u.writable})}async run(e,t){let i=aq.get(t);await (0,s2.Hr)(async e=>{var t;await (null===(t=null==i?void 0:i.model.get())||void 0===t?void 0:t.triggerExplicitly(e)),null==i||i.playAccessibilitySignal(e)})}};let AcceptNextWordOfInlineCompletion=class AcceptNextWordOfInlineCompletion extends tB.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:tz.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:tq.Ao.and(tH.u.writable,InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:tq.Ao.and(tH.u.writable,InlineCompletionContextKeys.inlineSuggestionVisible)},menuOpts:[{menuId:tU.eH.InlineSuggestionToolbar,title:tz.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var i;let n=aq.get(t);await (null===(i=null==n?void 0:n.model.get())||void 0===i?void 0:i.acceptNextWord(n.editor))}};let AcceptNextLineOfInlineCompletion=class AcceptNextLineOfInlineCompletion extends tB.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:tz.NC("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:tq.Ao.and(tH.u.writable,InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:tU.eH.InlineSuggestionToolbar,title:tz.NC("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var i;let n=aq.get(t);await (null===(i=null==n?void 0:n.model.get())||void 0===i?void 0:i.acceptNextLine(n.editor))}};let AcceptInlineCompletion=class AcceptInlineCompletion extends tB.R6{constructor(){super({id:rm,label:tz.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:InlineCompletionContextKeys.inlineSuggestionVisible,menuOpts:[{menuId:tU.eH.InlineSuggestionToolbar,title:tz.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:tq.Ao.and(InlineCompletionContextKeys.inlineSuggestionVisible,tH.u.tabMovesFocus.toNegated(),InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize,au.Visible.toNegated(),tH.u.hoverFocused.toNegated())}})}async run(e,t){var i;let n=aq.get(t);n&&(null===(i=n.model.get())||void 0===i||i.accept(n.editor),n.editor.focus())}};let HideInlineCompletion=class HideInlineCompletion extends tB.R6{constructor(){super({id:HideInlineCompletion.ID,label:tz.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:InlineCompletionContextKeys.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){let i=aq.get(t);(0,rp.PS)(e=>{var t;null===(t=null==i?void 0:i.model.get())||void 0===t||t.stop(e)})}};HideInlineCompletion.ID="editor.action.inlineSuggest.hide";let ToggleAlwaysShowInlineSuggestionToolbar=class ToggleAlwaysShowInlineSuggestionToolbar extends tU.Ke{constructor(){super({id:ToggleAlwaysShowInlineSuggestionToolbar.ID,title:tz.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:tU.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:tq.Ao.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){let i=e.get(tj.Ui),n=i.getValue("editor.inlineSuggest.showToolbar");i.updateValue("editor.inlineSuggest.showToolbar","always"===n?"onHover":"always")}};ToggleAlwaysShowInlineSuggestionToolbar.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var hoverParticipant_param=function(e,t){return function(i,n){t(i,n,e)}};let InlineCompletionsHover=class InlineCompletionsHover{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};let a$=class{constructor(e,t,i,n,o,r){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=o,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){let t=aq.get(this._editor);if(!t)return null;let i=e.target;if(8===i.type){let n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new HoverForeignElementAnchor(1e3,this,t4.e.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}if(7===i.type&&t.shouldShowHoverAt(i.range))return new HoverForeignElementAnchor(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){let n=i.detail.mightBeForeignElement;if(n&&t.shouldShowHoverAt(i.range))return new HoverForeignElementAnchor(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("onHover"!==this._editor.getOption(62).showToolbar)return[];let i=aq.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new InlineCompletionsHover(this,e.range,i)]:[]}renderHoverParts(e,t){let i=new t2.SL,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,n,i);let o=n.controller.model.get(),r=this._instantiationService.createInstance(ry,this._editor,!1,(0,rp.Dz)(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.selectedInlineCompletion.map(e=>{var t;return null!==(t=null==e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]}));return e.fragment.appendChild(r.getDomNode()),o.triggerExplicitly(),i.add(r),i}renderScreenReaderText(e,t,i){let n=tO.$,o=n("div.hover-row.markdown-hover"),r=tO.R3(o,n("div.hover-contents",{"aria-live":"assertive"})),s=i.add(new iB.$({editor:this._editor},this._languageService,this._openerService)),render=t=>{i.add(s.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));let n=tz.NC("inlineSuggestionFollows","Suggestion:"),o=i.add(s.render(new tZ.W5().appendText(n).appendCodeblock("text",t)));r.replaceChildren(o.element)};i.add((0,rp.EH)(e=>{var i;let n=null===(i=t.controller.model.read(e))||void 0===i?void 0:i.primaryGhostText.read(e);if(n){let e=this._editor.getModel().getLineContent(n.lineNumber);render(n.renderForScreenReader(e))}else tO.mc(r)})),e.fragment.appendChild(o)}};a$=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([hoverParticipant_param(1,n3.O),hoverParticipant_param(2,iW.v),hoverParticipant_param(3,n9.F),hoverParticipant_param(4,iL.TG),hoverParticipant_param(5,i4.b)],a$),(0,tB._K)(aq.ID,aq,3),(0,tB.Qr)(TriggerInlineSuggestionAction),(0,tB.Qr)(ShowNextInlineSuggestionAction),(0,tB.Qr)(ShowPreviousInlineSuggestionAction),(0,tB.Qr)(AcceptNextWordOfInlineCompletion),(0,tB.Qr)(AcceptNextLineOfInlineCompletion),(0,tB.Qr)(AcceptInlineCompletion),(0,tB.Qr)(HideInlineCompletion),(0,tU.r1)(ToggleAlwaysShowInlineSuggestionToolbar),oj.register(a$);var aG=i(93230);function getSpaceCnt(e,t){let i=0;for(let n=0;n<e.length;n++)"	"===e.charAt(n)?i+=t:i++;return i}function generateIndent(e,t,i){e=e<0?0:e;let n="";if(!i){let i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)n+="	"}for(let t=0;t<e;t++)n+=" ";return n}var aQ=i(99129),aZ=i(9954);function getReindentEditOperations(e,t,i,n,o){let r;if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];let s=t.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!s)return[];for(n=Math.min(n,e.getLineCount());i<=n&&s.unIndentedLinePattern;){let t=e.getLineContent(i);if(!s.unIndentedLinePattern.test(t))break;i++}if(i>n-1)return[];let{tabSize:l,indentSize:d,insertSpaces:c}=e.getOptions(),shiftIndent=(e,t)=>(t=t||1,aG.U.shiftIndent(e,e.length+t,l,d,c)),unshiftIndent=(e,t)=>(t=t||1,aG.U.unshiftIndent(e,e.length+t,l,d,c)),u=[],g=e.getLineContent(i),m=g;if(null!=o){r=o;let e=iy.V8(g);m=r+g.substring(e.length),s.decreaseIndentPattern&&s.decreaseIndentPattern.test(m)&&(m=(r=unshiftIndent(r))+g.substring(e.length)),g!==m&&u.push(rx.h.replaceMove(new tJ.Y(i,1,i,e.length+1),(0,aQ.x)(r,d,c)))}else r=iy.V8(g);let f=r;s.increaseIndentPattern&&s.increaseIndentPattern.test(m)?(f=shiftIndent(f),r=shiftIndent(r)):s.indentNextLinePattern&&s.indentNextLinePattern.test(m)&&(f=shiftIndent(f)),i++;for(let t=i;t<=n;t++){let i=e.getLineContent(t),n=iy.V8(i),o=f+i.substring(n.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(o)&&(f=unshiftIndent(f),r=unshiftIndent(r)),n!==f&&u.push(rx.h.replaceMove(new tJ.Y(t,1,t,n.length+1),(0,aQ.x)(f,d,c))),s.unIndentedLinePattern&&s.unIndentedLinePattern.test(i)||(f=s.increaseIndentPattern&&s.increaseIndentPattern.test(o)?r=shiftIndent(r):s.indentNextLinePattern&&s.indentNextLinePattern.test(o)?shiftIndent(f):r)}return u}let IndentationToSpacesAction=class IndentationToSpacesAction extends tB.R6{constructor(){super({id:IndentationToSpacesAction.ID,label:tz.NC("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:tH.u.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;let r=new IndentationToSpacesCommand(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}};IndentationToSpacesAction.ID="editor.action.indentationToSpaces";let IndentationToTabsAction=class IndentationToTabsAction extends tB.R6{constructor(){super({id:IndentationToTabsAction.ID,label:tz.NC("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:tH.u.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;let r=new IndentationToTabsCommand(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}};IndentationToTabsAction.ID="editor.action.indentationToTabs";let ChangeIndentationSizeAction=class ChangeIndentationSizeAction extends tB.R6{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){let i=e.get(iE.eJ),n=e.get(i2.q),o=t.getModel();if(!o)return;let r=n.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),s=o.getOptions(),l=[1,2,3,4,5,6,7,8].map(e=>({id:e.toString(),label:e.toString(),description:e===r.tabSize&&e===s.tabSize?tz.NC("configuredTabSize","Configured Tab Size"):e===r.tabSize?tz.NC("defaultTabSize","Default Tab Size"):e===s.tabSize?tz.NC("currentTabSize","Current Tab Size"):void 0})),d=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(l,{placeHolder:tz.NC({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[d]}).then(e=>{if(e&&o&&!o.isDisposed()){let t=parseInt(e.label,10);this.displaySizeOnly?o.updateOptions({tabSize:t}):o.updateOptions({tabSize:t,indentSize:t,insertSpaces:this.insertSpaces})}})},50)}};let IndentUsingTabs=class IndentUsingTabs extends ChangeIndentationSizeAction{constructor(){super(!1,!1,{id:IndentUsingTabs.ID,label:tz.NC("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}};IndentUsingTabs.ID="editor.action.indentUsingTabs";let IndentUsingSpaces=class IndentUsingSpaces extends ChangeIndentationSizeAction{constructor(){super(!0,!1,{id:IndentUsingSpaces.ID,label:tz.NC("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}};IndentUsingSpaces.ID="editor.action.indentUsingSpaces";let ChangeTabDisplaySize=class ChangeTabDisplaySize extends ChangeIndentationSizeAction{constructor(){super(!0,!0,{id:ChangeTabDisplaySize.ID,label:tz.NC("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}};ChangeTabDisplaySize.ID="editor.action.changeTabDisplaySize";let DetectIndentation=class DetectIndentation extends tB.R6{constructor(){super({id:DetectIndentation.ID,label:tz.NC("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){let i=e.get(i2.q),n=t.getModel();if(!n)return;let o=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}};DetectIndentation.ID="editor.action.detectIndentation";let ReindentLinesAction=class ReindentLinesAction extends tB.R6{constructor(){super({id:"editor.action.reindentlines",label:tz.NC("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:tH.u.writable})}run(e,t){let i=e.get(n$.c_),n=t.getModel();if(!n)return;let o=getReindentEditOperations(n,i,1,n.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}};let ReindentSelectedLinesAction=class ReindentSelectedLinesAction extends tB.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:tz.NC("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:tH.u.writable})}run(e,t){let i=e.get(n$.c_),n=t.getModel();if(!n)return;let o=t.getSelections();if(null===o)return;let r=[];for(let e of o){let t=e.startLineNumber,o=e.endLineNumber;if(t!==o&&1===e.endColumn&&o--,1===t){if(t===o)continue}else t--;let s=getReindentEditOperations(n,i,t,o);r.push(...s)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}};let AutoIndentOnPasteCommand=class AutoIndentOnPasteCommand{constructor(e,t){for(let i of(this._initialSelection=t,this._edits=[],this._selectionId=null,e))i.range&&"string"==typeof i.text&&this._edits.push(i)}getEditOperations(e,t){for(let e of this._edits)t.addEditOperation(t4.e.lift(e.range),e.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};let aY=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new t2.SL,this.callOnModel=new t2.SL,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(4>this.editor.getOption(12)||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(null===t||t.length>1)return;let i=this.editor.getModel();if(!i||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;let n=this.editor.getOption(12),{tabSize:o,indentSize:r,insertSpaces:s}=i.getOptions(),l=[],d={shiftIndent:e=>aG.U.shiftIndent(e,e.length+1,o,r,s),unshiftIndent:e=>aG.U.unshiftIndent(e,e.length+1,o,r,s)},c=e.startLineNumber;for(;c<=e.endLineNumber;){if(this.shouldIgnoreLine(i,c)){c++;continue}break}if(c>e.endLineNumber)return;let u=i.getLineContent(c);if(!/\S/.test(u.substring(0,e.startColumn-1))){let e=(0,aZ.n8)(n,i,i.getLanguageId(),c,d,this._languageConfigurationService);if(null!==e){let t=iy.V8(u),n=getSpaceCnt(e,o),r=getSpaceCnt(t,o);if(n!==r){let e=generateIndent(n,o,s);l.push({range:new t4.e(c,1,c,t.length+1),text:e}),u=e+u.substr(t.length)}else{let e=(0,aZ.tI)(i,c,this._languageConfigurationService);if(0===e||8===e)return}}}let g=c;for(;c<e.endLineNumber;){if(!/\S/.test(i.getLineContent(c+1))){c++;continue}break}if(c!==e.endLineNumber){let t=(0,aZ.n8)(n,{tokenization:{getLineTokens:e=>i.tokenization.getLineTokens(e),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t)},getLineContent:e=>e===g?u:i.getLineContent(e)},i.getLanguageId(),c+1,d,this._languageConfigurationService);if(null!==t){let n=getSpaceCnt(t,o),r=getSpaceCnt(iy.V8(i.getLineContent(c+1)),o);if(n!==r){let t=n-r;for(let n=c+1;n<=e.endLineNumber;n++){let e=i.getLineContent(n),r=iy.V8(e),d=getSpaceCnt(r,o),c=d+t,u=generateIndent(c,o,s);u!==r&&l.push({range:new t4.e(n,1,n,r.length+1),text:u})}}}}if(l.length>0){this.editor.pushUndoStop();let e=new AutoIndentOnPasteCommand(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);let i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;let n=e.tokenization.getLineTokens(t);if(n.getCount()>0){let e=n.findTokenIndexAtOffset(i);if(e>=0&&1===n.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function getIndentationEditOperations(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let o="";for(let e=0;e<i;e++)o+=" ";let r=RegExp(o,"gi");for(let i=1,s=e.getLineCount();i<=s;i++){let s=e.getLineFirstNonWhitespaceColumn(i);if(0===s&&(s=e.getLineMaxColumn(i)),1===s)continue;let l=new t4.e(i,1,i,s),d=e.getValueInRange(l),c=n?d.replace(/\t/ig,o):d.replace(r,"	");t.addEditOperation(l,c)}}aY.ID="editor.contrib.autoIndentOnPaste",aY=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(N=n$.c_,function(e,t){N(e,t,1)})],aY);let IndentationToSpacesCommand=class IndentationToSpacesCommand{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),getIndentationEditOperations(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};let IndentationToTabsCommand=class IndentationToTabsCommand{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),getIndentationEditOperations(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};(0,tB._K)(aY.ID,aY,2),(0,tB.Qr)(IndentationToSpacesAction),(0,tB.Qr)(IndentationToTabsAction),(0,tB.Qr)(IndentUsingTabs),(0,tB.Qr)(IndentUsingSpaces),(0,tB.Qr)(ChangeTabDisplaySize),(0,tB.Qr)(DetectIndentation),(0,tB.Qr)(ReindentLinesAction),(0,tB.Qr)(ReindentSelectedLinesAction);let InlayHintAnchor=class InlayHintAnchor{constructor(e,t){this.range=e,this.direction=t}};let InlayHintItem=class InlayHintItem{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){let t=new InlayHintItem(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if("function"==typeof this.provider.resolveInlayHint){if(this._currentResolve){if(await this._currentResolve,e.isCancellationRequested)return;return this.resolve(e)}this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){var t,i,n;try{let o=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=null!==(t=null==o?void 0:o.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(i=null==o?void 0:o.label)&&void 0!==i?i:this.hint.label,this.hint.textEdits=null!==(n=null==o?void 0:o.textEdits)&&void 0!==n?n:this.hint.textEdits,this._isResolved=!0}catch(e){(0,i1.Cp)(e),this._isResolved=!1}}};let InlayHintsFragments=class InlayHintsFragments{static async create(e,t,i,n){let o=[],r=e.ordered(t).reverse().map(e=>i.map(async i=>{try{let r=await e.provideInlayHints(t,i,n);((null==r?void 0:r.hints.length)||e.onDidChangeInlayHints)&&o.push([null!=r?r:InlayHintsFragments._emptyInlayHintList,e])}catch(e){(0,i1.Cp)(e)}}));if(await Promise.all(r.flat()),n.isCancellationRequested||t.isDisposed())throw new i1.FU;return new InlayHintsFragments(i,o,t)}constructor(e,t,i){this._disposables=new t2.SL,this.ranges=e,this.provider=new Set;let n=[];for(let[e,o]of t)for(let t of(this._disposables.add(e),this.provider.add(o),e.hints)){let e;let r=i.validatePosition(t.position),s="before",l=InlayHintsFragments._getRangeAtPosition(i,r);l.getStartPosition().isBefore(r)?(e=t4.e.fromPositions(l.getStartPosition(),r),s="after"):(e=t4.e.fromPositions(r,l.getEndPosition()),s="before"),n.push(new InlayHintItem(t,new InlayHintAnchor(e,s),o))}this.items=n.sort((e,t)=>t5.L.compare(e.hint.position,t.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){let i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new t4.e(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);let o=e.tokenization.getLineTokens(i),r=t.column-1,s=o.findTokenIndexAtOffset(r),l=o.getStartOffset(s),d=o.getEndOffset(s);return d-l==1&&(l===r&&s>1?(l=o.getStartOffset(s-1),d=o.getEndOffset(s-1)):d===r&&s<o.getCount()-1&&(l=o.getStartOffset(s+1),d=o.getEndOffset(s+1))),new t4.e(i,l+1,i,d+1)}};function asCommandLink(e){return ip.o.from({scheme:oy.lg.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}async function showGoToContextMenu(e,t,i,n){var o;let r=e.get(n6.S),s=e.get(iR.i),l=e.get(tK.H),d=e.get(iL.TG),c=e.get(i5.lT);if(await n.item.resolve(i0.T.None),!n.part.location)return;let u=n.part.location,g=[],m=new Set(tU.BH.getMenuItems(tU.eH.EditorContext).map(e=>(0,tU.vr)(e)?e.command.id:ih()));for(let e of SymbolNavigationAction.all())m.has(e.desc.id)&&g.push(new iT.aU(e.desc.id,tU.U8.label(e.desc,{renderShortTitle:!0}),void 0,!0,async()=>{let i=await r.createModelReference(u.uri);try{let o=new SymbolNavigationAnchor(i.object.textEditorModel,t4.e.getStartPosition(u.range)),r=n.item.anchor.range;await d.invokeFunction(e.runEditorCommand.bind(e),t,o,r)}finally{i.dispose()}}));if(n.part.command){let{command:e}=n.part;g.push(new iT.Z0),g.push(new iT.aU(e.id,e.title,void 0,!0,async()=>{var t;try{await l.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}catch(e){c.notify({severity:i5.zb.Error,source:n.item.provider.displayName,message:e})}}))}let f=t.getOption(127);s.showContextMenu({domForShadowRoot:f&&null!==(o=t.getDomNode())&&void 0!==o?o:void 0,getAnchor:()=>{let e=tO.i(i);return{x:e.left,y:e.top+e.height+8}},getActions:()=>g,onHide:()=>{t.focus()},autoSelectFirstItem:!0})}async function goToDefinitionWithLocation(e,t,i,n){let o=e.get(n6.S),r=await o.createModelReference(n.uri);await i.invokeWithinContext(async e=>{let o=t.hasSideBySideModifier,s=e.get(tq.i6),l=J.inPeekEditor.getValue(s),d=!o&&i.getOption(88)&&!l,c=new DefinitionAction({openToSide:o,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0});return c.run(e,new SymbolNavigationAnchor(r.object.textEditorModel,t4.e.getStartPosition(n.range)),t4.e.lift(n.range))}),r.dispose()}InlayHintsFragments._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});var inlayHintsController_param=function(e,t){return function(i,n){t(i,n,e)}};let InlayHintsCache=class InlayHintsCache{constructor(){this._entries=new nA.z6(50)}get(e){let t=InlayHintsCache._key(e);return this._entries.get(t)}set(e,t){let i=InlayHintsCache._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}};let aJ=(0,iL.yh)("IInlayHintsCache");(0,nv.z)(aJ,InlayHintsCache,1);let RenderedInlayHintLabelPart=class RenderedInlayHintLabelPart{constructor(e,t){this.item=e,this.index=t}get part(){let e=this.item.hint.label;return"string"==typeof e?{label:e}:e[this.index]}};let ActiveInlayHintInfo=class ActiveInlayHintInfo{constructor(e,t){this.part=e,this.hasTriggerModifier=t}};let aX=eO=class{static get(e){var t;return null!==(t=e.getContribution(eO.ID))&&void 0!==t?t:void 0}constructor(e,t,i,n,o,r,s){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=o,this._notificationService=r,this._instaService=s,this._disposables=new t2.SL,this._sessionDisposables=new t2.SL,this._decorationsMetadata=new Map,this._ruleFactory=new nj.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(e=>{e.hasChanged(140)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){let e;this._sessionDisposables.clear(),this._removeAllDecorations();let t=this._editor.getOption(140);if("off"===t.enabled)return;let i=this._editor.getModel();if(!i||!this._languageFeaturesService.inlayHintsProvider.has(i))return;if("on"===t.enabled)this._activeRenderMode=0;else{let e,i;"onUnlessPressed"===t.enabled?(e=0,i=1):(e=1,i=0),this._activeRenderMode=e,this._sessionDisposables.add(tO._q.getInstance().event(t=>{if(!this._editor.hasModel())return;let n=t.altKey&&t.ctrlKey&&!(t.shiftKey||t.metaKey)?i:e;if(n!==this._activeRenderMode){this._activeRenderMode=n;let e=this._editor.getModel(),t=this._copyInlayHintsWithCurrentAnchor(e);this._updateHintsDecorators([e.getFullModelRange()],t),r.schedule(0)}}))}let n=this._inlayHintsCache.get(i);n&&this._updateHintsDecorators([i.getFullModelRange()],n),this._sessionDisposables.add((0,t2.OF)(()=>{i.isDisposed()||this._cacheHintsForFastRestore(i)}));let o=new Set,r=new t1.pY(async()=>{let t=Date.now();null==e||e.dispose(!0),e=new i0.A;let n=i.onWillDispose(()=>null==e?void 0:e.cancel());try{let n=e.token,s=await InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider,i,this._getHintsRanges(),n);if(r.delay=this._debounceInfo.update(i,Date.now()-t),n.isCancellationRequested){s.dispose();return}for(let e of s.provider)"function"!=typeof e.onDidChangeInlayHints||o.has(e)||(o.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(s),this._updateHintsDecorators(s.ranges,s.items),this._cacheHintsForFastRestore(i)}catch(e){(0,i1.dL)(e)}finally{e.dispose(),n.dispose()}},this._debounceInfo.get(i));this._sessionDisposables.add(r),this._sessionDisposables.add((0,t2.OF)(()=>null==e?void 0:e.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(t=>{null==e||e.cancel();let i=Math.max(r.delay,1250);r.schedule(i)})),this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){let e=new t2.SL,t=e.add(new ClickLinkGesture(this._editor)),i=new t2.SL;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(e=>{let[t]=e,n=this._getInlayHintLabelPart(t),o=this._editor.getModel();if(!n||!o){i.clear();return}let r=new i0.A;i.add((0,t2.OF)(()=>r.dispose(!0))),n.item.resolve(r.token),this._activeInlayHintPart=n.part.command||n.part.location?new ActiveInlayHintInfo(n,t.hasTriggerModifier):void 0;let s=o.validatePosition(n.item.hint.position).lineNumber,l=new t4.e(s,1,s,o.getLineMaxColumn(s)),d=this._getInlineHintsForRange(l);this._updateHintsDecorators([l],d),i.add((0,t2.OF)(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([l],d)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async e=>{let t=this._getInlayHintLabelPart(e);if(t){let i=t.part;i.location?this._instaService.invokeFunction(goToDefinitionWithLocation,e,this._editor,i.location):ov.mY.is(i.command)&&await this._invokeCommand(i.command,t.item)}})),e}_getInlineHintsForRange(e){let t=new Set;for(let i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(2!==t.event.detail)return;let i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(i0.T.None),(0,ia.Of)(i.item.hint.textEdits))){let t=i.item.hint.textEdits.map(e=>rx.h.replace(t4.e.lift(e.range),e.text));this._editor.executeEdits("inlayHint.default",t),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!(e.event.target instanceof HTMLElement))return;let t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(showGoToContextMenu,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var t;if(6!==e.target.type)return;let i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;if(i instanceof t6.HS&&(null==i?void 0:i.attachedData)instanceof RenderedInlayHintLabelPart)return i.attachedData}async _invokeCommand(e,t){var i;try{await this._commandService.executeCommand(e.id,...null!==(i=e.arguments)&&void 0!==i?i:[])}catch(e){this._notificationService.notify({severity:i5.zb.Error,source:t.provider.displayName,message:e})}}_cacheHintsForFastRestore(e){let t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){let t=new Map;for(let[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;let o=e.getDecorationRange(i);if(o){let e=new InlayHintAnchor(o,n.item.anchor.direction),i=n.item.with({anchor:e});t.set(n.item,i)}}return Array.from(t.values())}_getHintsRanges(){let e=this._editor.getModel(),t=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(let n of t.sort(t4.e.compareRangesUsingStarts)){let t=e.validateRange(new t4.e(n.startLineNumber-30,n.startColumn,n.endLineNumber+30,n.endColumn));0!==i.length&&t4.e.areIntersectingOrTouching(i[i.length-1],t)?i[i.length-1]=t4.e.plusRange(i[i.length-1],t):i.push(t)}return i}_updateHintsDecorators(e,t){var i,n;let o=[],addInjectedText=(e,t,i,n,r)=>{let s={content:i,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:n,attachedData:r};o.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:{description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:0===this._activeRenderMode?s:void 0}}})},addInjectedWhitespace=(e,t)=>{let i=this._ruleFactory.createClassNameRef({width:`${r/3|0}px`,display:"inline-block"});addInjectedText(e,i," ",t?t3.RM.Right:t3.RM.None)},{fontSize:r,fontFamily:s,padding:l,isUniform:d}=this._getLayoutInfo(),c="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(c,s);let u={line:0,totalLen:0};for(let e of t){if(u.line!==e.anchor.range.startLineNumber&&(u={line:e.anchor.range.startLineNumber,totalLen:0}),u.totalLen>eO._MAX_LABEL_LEN)continue;e.hint.paddingLeft&&addInjectedWhitespace(e,!1);let t="string"==typeof e.hint.label?[{label:e.hint.label}]:e.hint.label;for(let n=0;n<t.length;n++){let o=t[n],s=0===n,g=n===t.length-1,m={fontSize:`${r}px`,fontFamily:`var(${c}), ${nk.hL.fontFamily}`,verticalAlign:d?"baseline":"middle",unicodeBidi:"isolate"};(0,ia.Of)(e.hint.textEdits)&&(m.cursor="default"),this._fillInColors(m,e.hint),(o.command||o.location)&&(null===(i=this._activeInlayHintPart)||void 0===i?void 0:i.part.item)===e&&this._activeInlayHintPart.part.index===n&&(m.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(m.color=(0,t9.EN)(t7._Yy),m.cursor="pointer")),l&&(s&&g?(m.padding=`1px ${0|Math.max(1,r/4)}px`,m.borderRadius=`${r/4|0}px`):s?(m.padding=`1px 0 1px ${0|Math.max(1,r/4)}px`,m.borderRadius=`${r/4|0}px 0 0 ${r/4|0}px`):g?(m.padding=`1px ${0|Math.max(1,r/4)}px 1px 0`,m.borderRadius=`0 ${r/4|0}px ${r/4|0}px 0`):m.padding="1px 0 1px 0");let f=o.label;u.totalLen+=f.length;let _=!1,v=u.totalLen-eO._MAX_LABEL_LEN;if(v>0&&(f=f.slice(0,-v)+"…",_=!0),addInjectedText(e,this._ruleFactory.createClassNameRef(m),fixSpace(f),g&&!e.hint.paddingRight?t3.RM.Right:t3.RM.None,new RenderedInlayHintLabelPart(e,n)),_)break}if(e.hint.paddingRight&&addInjectedWhitespace(e,!0),o.length>eO._MAX_DECORATORS)break}let g=[];for(let[t,i]of this._decorationsMetadata){let o=null===(n=this._editor.getModel())||void 0===n?void 0:n.getDecorationRange(t);o&&e.some(e=>e.containsRange(o))&&(g.push(t),i.classNameRef.dispose(),this._decorationsMetadata.delete(t))}let m=nM.Z.capture(this._editor);this._editor.changeDecorations(e=>{let t=e.deltaDecorations(g,o.map(e=>e.decoration));for(let e=0;e<t.length;e++){let i=o[e];this._decorationsMetadata.set(t[e],i)}}),m.restore(this._editor)}_fillInColors(e,t){t.kind===ov.gl.Parameter?(e.backgroundColor=(0,t9.EN)(t7.phM),e.color=(0,t9.EN)(t7.HCL)):t.kind===ov.gl.Type?(e.backgroundColor=(0,t9.EN)(t7.bKB),e.color=(0,t9.EN)(t7.hX8)):(e.backgroundColor=(0,t9.EN)(t7.PpC),e.color=(0,t9.EN)(t7.VVv))}_getLayoutInfo(){let e=this._editor.getOption(140),t=e.padding,i=this._editor.getOption(52),n=this._editor.getOption(49),o=e.fontSize;(!o||o<5||o>i)&&(o=i);let r=e.fontFamily||n,s=!t&&r===n&&o===i;return{fontSize:o,fontFamily:r,padding:t,isUniform:s}}_removeAllDecorations(){for(let e of(this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys())),this._decorationsMetadata.values()))e.classNameRef.dispose();this._decorationsMetadata.clear()}};function fixSpace(e){return e.replace(/[ \t]/g,"\xa0")}aX.ID="editor.contrib.InlayHints",aX._MAX_DECORATORS=1500,aX._MAX_LABEL_LEN=43,aX=eO=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inlayHintsController_param(1,ib.p),inlayHintsController_param(2,nH.A),inlayHintsController_param(3,aJ),inlayHintsController_param(4,tK.H),inlayHintsController_param(5,i5.lT),inlayHintsController_param(6,iL.TG)],aX),tK.P.registerCommand("_executeInlayHintProvider",async(e,...t)=>{let[i,n]=t;(0,nR.p_)(ip.o.isUri(i)),(0,nR.p_)(t4.e.isIRange(n));let{inlayHintsProvider:o}=e.get(ib.p),r=await e.get(n6.S).createModelReference(i);try{let e=await InlayHintsFragments.create(o,r.object.textEditorModel,[t4.e.lift(n)],i0.T.None),t=e.items.map(e=>e.hint);return setTimeout(()=>e.dispose(),0),t}finally{r.dispose()}});var inlayHintsHover_param=function(e,t){return function(i,n){t(i,n,e)}};let InlayHintsHoverAnchor=class InlayHintsHoverAnchor extends HoverForeignElementAnchor{constructor(e,t,i,n){super(10,t,e.item.anchor.range,i,n,!0),this.part=e}};let a0=class extends oJ{constructor(e,t,i,n,o,r){super(e,t,i,n,r),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;let i=aX.get(this._editor);if(!i||6!==e.target.type)return null;let n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof t6.HS&&n.attachedData instanceof RenderedInlayHintLabelPart?new InlayHintsHoverAnchor(n.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof InlayHintsHoverAnchor?new t1.Aq(async t=>{let n,o;let{part:r}=e;if(await r.item.resolve(i),i.isCancellationRequested)return;if("string"==typeof r.item.hint.tooltip?n=new tZ.W5().appendText(r.item.hint.tooltip):r.item.hint.tooltip&&(n=r.item.hint.tooltip),n&&t.emitOne(new MarkdownHover(this,e.range,[n],!1,0)),(0,ia.Of)(r.item.hint.textEdits)&&t.emitOne(new MarkdownHover(this,e.range,[new tZ.W5().appendText((0,tz.NC)("hint.dbl","Double-click to insert"))],!1,10001)),"string"==typeof r.part.tooltip?o=new tZ.W5().appendText(r.part.tooltip):r.part.tooltip&&(o=r.part.tooltip),o&&t.emitOne(new MarkdownHover(this,e.range,[o],!1,1)),r.part.location||r.part.command){let i;let n="altKey"===this._editor.getOption(78),o=n?io.dz?(0,tz.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,tz.NC)("links.navigate.kb.meta","ctrl + click"):io.dz?(0,tz.NC)("links.navigate.kb.alt.mac","option + click"):(0,tz.NC)("links.navigate.kb.alt","alt + click");r.part.location&&r.part.command?i=new tZ.W5().appendText((0,tz.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",o)):r.part.location?i=new tZ.W5().appendText((0,tz.NC)("hint.def","Go to Definition ({0})",o)):r.part.command&&(i=new tZ.W5(`[${(0,tz.NC)("hint.cmd","Execute Command")}](${asCommandLink(r.part.command)} "${r.part.command.title}") (${o})`,{isTrusted:!0})),i&&t.emitOne(new MarkdownHover(this,e.range,[i],!1,1e4))}let s=await this._resolveInlayHintLabelPartHover(r,i);for await(let e of s)t.emitOne(e)}):t1.Aq.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return t1.Aq.EMPTY;let{uri:i,range:n}=e.part.location,o=await this._resolverService.createModelReference(i);try{let i=o.object.textEditorModel;if(!this._languageFeaturesService.hoverProvider.has(i))return t1.Aq.EMPTY;return getHover(this._languageFeaturesService.hoverProvider,i,new t5.L(n.startLineNumber,n.startColumn),t).filter(e=>!(0,tZ.CP)(e.hover.contents)).map(t=>new MarkdownHover(this,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal))}finally{o.dispose()}}};a0=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inlayHintsHover_param(1,n3.O),inlayHintsHover_param(2,iW.v),inlayHintsHover_param(3,tj.Ui),inlayHintsHover_param(4,n6.S),inlayHintsHover_param(5,ib.p)],a0),(0,tB._K)(aX.ID,aX,1),oj.register(a0);let InPlaceReplaceCommand=class InPlaceReplaceCommand{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range;return this._originalSelection.isEmpty()?new tJ.Y(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new tJ.Y(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}};i(65148);let a1=eF=class{static get(e){return e.getContribution(eF.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var i;null===(i=this.currentRequest)||void 0===i||i.cancel();let n=this.editor.getSelection(),o=this.editor.getModel();if(!o||!n)return;let r=n;if(r.startLineNumber!==r.endLineNumber)return;let s=new iS.yy(this.editor,5),l=o.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=(0,t1.PG)(e=>this.editorWorkerService.navigateValueSet(l,r,t)),this.currentRequest.then(t=>{var i;if(!t||!t.range||!t.value||!s.validate(this.editor))return;let n=t4.e.lift(t.range),o=t.range,l=t.value.length-(r.endColumn-r.startColumn);o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.startColumn+t.value.length},l>1&&(r=new tJ.Y(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+l-1));let d=new InPlaceReplaceCommand(n,r,t.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,d),this.editor.pushUndoStop(),this.decorations.set([{range:o,options:eF.DECORATION}]),null===(i=this.decorationRemover)||void 0===i||i.cancel(),this.decorationRemover=(0,t1.Vs)(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(i1.dL)}).catch(i1.dL)):Promise.resolve(void 0)}};a1.ID="editor.contrib.inPlaceReplaceController",a1.DECORATION=t6.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),a1=eF=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(E=sG.p,function(e,t){E(e,t,1)})],a1);let InPlaceReplaceUp=class InPlaceReplaceUp extends tB.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:tz.NC("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3159,weight:100}})}run(e,t){let i=a1.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}};let InPlaceReplaceDown=class InPlaceReplaceDown extends tB.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:tz.NC("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3161,weight:100}})}run(e,t){let i=a1.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}};(0,tB._K)(a1.ID,a1,4),(0,tB.Qr)(InPlaceReplaceUp),(0,tB.Qr)(InPlaceReplaceDown);var a2=i(21384);let ExpandLineSelectionAction=class ExpandLineSelectionAction extends tB.R6{constructor(){super({id:"expandLineSelection",label:tz.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:tH.u.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;let n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,a2.P.expandLineSelection(n,n.getCursorStates())),n.revealPrimaryCursor(i.source,!0)}};(0,tB.Qr)(ExpandLineSelectionAction);let TrimTrailingWhitespaceCommand=class TrimTrailingWhitespaceCommand{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let i=trimTrailingWhitespace(e,this._cursors);for(let e=0,n=i.length;e<n;e++){let n=i[e];t.addEditOperation(n.range,n.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};function trimTrailingWhitespace(e,t){t.sort((e,t)=>e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber);for(let e=t.length-2;e>=0;e--)t[e].lineNumber===t[e+1].lineNumber&&t.splice(e,1);let i=[],n=0,o=0,r=t.length;for(let s=1,l=e.getLineCount();s<=l;s++){let l=e.getLineContent(s),d=l.length+1,c=0;if(o<r&&t[o].lineNumber===s&&(c=t[o].column,o++,c===d)||0===l.length)continue;let u=iy.ow(l),g=0;if(-1===u)g=1;else{if(u===l.length-1)continue;g=u+2}g=Math.max(c,g),i[n++]=rx.h.delete(new t4.e(s,g,s,d))}return i}var a5=i(75907);let CopyLinesCommand=class CopyLinesCommand{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=[];for(let t=i.startLineNumber;t<=i.endLineNumber;t++)n.push(e.getLineContent(t));let o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new t4.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new t4.e(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new t4.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=tJ.Y.createWithDirection(e,t,n,o,this._selectionDirection)}return i}};var a4=i(63016),a3=i(28151);let a6=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i||!this._isMovingDown&&1===this._selection.startLineNumber){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let{tabSize:o,indentSize:r,insertSpaces:s}=e.getOptions(),l=this.buildIndentConverter(o,r,s),d={tokenization:{getLineTokens:t=>e.tokenization.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){let i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new t4.e(1,1,1,1),null):(t.addEditOperation(new t4.e(i,1,i,1),e.getLineContent(o)),t.addEditOperation(new t4.e(o,1,o,e.getLineMaxColumn(o)),null)),n=new tJ.Y(o,1,o,1)}else{let i,r;if(this._isMovingDown){i=n.endLineNumber+1,r=e.getLineContent(i),t.addEditOperation(new t4.e(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let c=r;if(this.shouldAutoIndent(e,n)){let u=this.matchEnterRule(e,l,o,i,n.startLineNumber-1);if(null!==u){let t=iy.V8(e.getLineContent(i)),n=u+getSpaceCnt(t,o),l=generateIndent(n,o,s);c=l+this.trimStart(r)}else{d.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);let t=(0,aZ.n8)(this._autoIndent,d,e.getLanguageIdAtPosition(i,1),n.startLineNumber,l,this._languageConfigurationService);if(null!==t){let n=iy.V8(e.getLineContent(i)),l=getSpaceCnt(t,o),d=getSpaceCnt(n,o);if(l!==d){let e=generateIndent(l,o,s);c=e+this.trimStart(r)}}}t.addEditOperation(new t4.e(n.startLineNumber,1,n.startLineNumber,1),c+"\n");let g=this.matchEnterRuleMovingDown(e,l,o,n.startLineNumber,i,c);if(null!==g)0!==g&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,g);else{d.getLineContent=t=>t===n.startLineNumber?c:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);let r=(0,aZ.n8)(this._autoIndent,d,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,l,this._languageConfigurationService);if(null!==r){let i=iy.V8(e.getLineContent(n.startLineNumber)),l=getSpaceCnt(r,o),d=getSpaceCnt(i,o);l!==d&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,l-d)}}}else t.addEditOperation(new t4.e(n.startLineNumber,1,n.startLineNumber,1),c+"\n")}else if(i=n.startLineNumber-1,r=e.getLineContent(i),t.addEditOperation(new t4.e(i,1,i+1,1),null),t.addEditOperation(new t4.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+r),this.shouldAutoIndent(e,n)){d.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);let r=this.matchEnterRule(e,l,o,n.startLineNumber,n.startLineNumber-2);if(null!==r)0!==r&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,r);else{let r=(0,aZ.n8)(this._autoIndent,d,e.getLanguageIdAtPosition(n.startLineNumber,1),i,l,this._languageConfigurationService);if(null!==r){let i=iy.V8(e.getLineContent(n.startLineNumber)),l=getSpaceCnt(r,o),d=getSpaceCnt(i,o);l!==d&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,l-d)}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>aG.U.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>aG.U.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let r=o.indentation;o.indentAction===a4.wU.None?r=o.indentation+o.appendText:o.indentAction===a4.wU.Indent?r=o.indentation+o.appendText:o.indentAction===a4.wU.IndentOutdent?r=o.indentation:o.indentAction===a4.wU.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);let s=e.getLineContent(n);if(this.trimStart(s).indexOf(this.trimStart(r))>=0){let o=iy.V8(e.getLineContent(n)),s=iy.V8(r),l=(0,aZ.tI)(e,n,this._languageConfigurationService);null!==l&&2&l&&(s=t.unshiftIndent(s));let d=getSpaceCnt(s,i),c=getSpaceCnt(o,i);return d-c}}return null}matchEnterRuleMovingDown(e,t,i,n,o,r){if(iy.ow(r)>=0){let r=e.getLineMaxColumn(o),s=(0,a3.A)(this._autoIndent,e,new t4.e(o,r,o,r),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,s)}{let o=n-1;for(;o>=1;){let t=e.getLineContent(o),i=iy.ow(t);if(i>=0)break;o--}if(o<1||n>e.getLineCount())return null;let r=e.getLineMaxColumn(o),s=(0,a3.A)(this._autoIndent,e,new t4.e(o,r,o,r),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,s)}}matchEnterRule(e,t,i,n,o,r){let s=o;for(;s>=1;){let t;t=s===o&&void 0!==r?r:e.getLineContent(s);let i=iy.ow(t);if(i>=0)break;s--}if(s<1||n>e.getLineCount())return null;let l=e.getLineMaxColumn(s),d=(0,a3.A)(this._autoIndent,e,new t4.e(s,l,s,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,d)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;let i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return i===n&&null!==this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport}getIndentEditsOfMovingBlock(e,t,i,n,o,r){for(let s=i.startLineNumber;s<=i.endLineNumber;s++){let l=e.getLineContent(s),d=iy.V8(l),c=getSpaceCnt(d,n),u=c+r,g=generateIndent(u,n,o);g!==d&&(t.addEditOperation(new t4.e(s,1,s,d.length+1),g),s===i.endLineNumber&&i.endColumn<=d.length+1&&""===g&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};a6=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(I=n$.c_,function(e,t){I(e,t,3)})],a6);let SortLinesCommand=class SortLinesCommand{static getCollator(){return SortLinesCommand._COLLATOR||(SortLinesCommand._COLLATOR=new Intl.Collator),SortLinesCommand._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){let i=sortLines(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;let n=getSortData(e,t,i);if(!n)return!1;for(let e=0,t=n.before.length;e<t;e++)if(n.before[e]!==n.after[e])return!0;return!1}};function getSortData(e,t,i){let n=t.startLineNumber,o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;let r=[];for(let t=n;t<=o;t++)r.push(e.getLineContent(t));let s=r.slice(0);return s.sort(SortLinesCommand.getCollator().compare),!0===i&&(s=s.reverse()),{startLineNumber:n,endLineNumber:o,before:r,after:s}}function sortLines(e,t,i){let n=getSortData(e,t,i);return n?rx.h.replace(new t4.e(n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n")):null}SortLinesCommand._COLLATOR=null;let AbstractCopyLinesAction=class AbstractCopyLinesAction extends tB.R6{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;let i=t.getSelections().map((e,t)=>({selection:e,index:t,ignore:!1}));i.sort((e,t)=>t4.e.compareRangesUsingStarts(e.selection,t.selection));let n=i[0];for(let e=1;e<i.length;e++){let t=i[e];n.selection.endLineNumber===t.selection.startLineNumber&&(n.index<t.index?t.ignore=!0:(n.ignore=!0,n=t))}let o=[];for(let e of i)o.push(new CopyLinesCommand(e.selection,this.down,e.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}};let CopyLinesUpAction=class CopyLinesUpAction extends AbstractCopyLinesAction{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:tz.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"2_line",title:tz.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}};let CopyLinesDownAction=class CopyLinesDownAction extends AbstractCopyLinesAction{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:tz.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"2_line",title:tz.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}};let DuplicateSelectionAction=class DuplicateSelectionAction extends tB.R6{constructor(){super({id:"editor.action.duplicateSelection",label:tz.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:tH.u.writable,menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"2_line",title:tz.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;let n=[],o=t.getSelections(),r=t.getModel();for(let e of o)if(e.isEmpty())n.push(new CopyLinesCommand(e,!0));else{let t=new tJ.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn);n.push(new ie.OY(t,r.getValueInRange(e)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}};let AbstractMoveLinesAction=class AbstractMoveLinesAction extends tB.R6{constructor(e,t){super(t),this.down=e}run(e,t){let i=e.get(n$.c_),n=[],o=t.getSelections()||[],r=t.getOption(12);for(let e of o)n.push(new a6(e,this.down,r,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}};let MoveLinesUpAction=class MoveLinesUpAction extends AbstractMoveLinesAction{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:tz.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"2_line",title:tz.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}};let MoveLinesDownAction=class MoveLinesDownAction extends AbstractMoveLinesAction{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:tz.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"2_line",title:tz.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}};let AbstractSortLinesAction=class AbstractSortLinesAction extends tB.R6{constructor(e,t){super(t),this.descending=e}run(e,t){let i=t.getSelections()||[];for(let e of i)if(!SortLinesCommand.canRun(t.getModel(),e,this.descending))return;let n=[];for(let e=0,t=i.length;e<t;e++)n[e]=new SortLinesCommand(i[e],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}};let SortLinesAscendingAction=class SortLinesAscendingAction extends AbstractSortLinesAction{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:tz.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:tH.u.writable})}};let SortLinesDescendingAction=class SortLinesDescendingAction extends AbstractSortLinesAction{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:tz.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:tH.u.writable})}};let DeleteDuplicateLinesAction=class DeleteDuplicateLinesAction extends tB.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:tz.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:tH.u.writable})}run(e,t){if(!t.hasModel())return;let i=t.getModel();if(1===i.getLineCount()&&1===i.getLineMaxColumn(1))return;let n=[],o=[],r=0;for(let e of t.getSelections()){let t=new Set,s=[];for(let n=e.startLineNumber;n<=e.endLineNumber;n++){let e=i.getLineContent(n);t.has(e)||(s.push(e),t.add(e))}let l=new tJ.Y(e.startLineNumber,1,e.endLineNumber,i.getLineMaxColumn(e.endLineNumber)),d=e.startLineNumber-r,c=new tJ.Y(d,1,d+s.length-1,s[s.length-1].length);n.push(rx.h.replace(l,s.join("\n"))),o.push(c),r+=e.endLineNumber-e.startLineNumber+1-s.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}};let TrimTrailingWhitespaceAction=class TrimTrailingWhitespaceAction extends tB.R6{constructor(){super({id:TrimTrailingWhitespaceAction.ID,label:tz.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:(0,tY.gx)(2089,2102),weight:100}})}run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map(e=>new t5.L(e.positionLineNumber,e.positionColumn)));let o=t.getSelection();if(null===o)return;let r=new TrimTrailingWhitespaceCommand(o,n);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}};TrimTrailingWhitespaceAction.ID="editor.action.trimTrailingWhitespace";let DeleteLinesAction=class DeleteLinesAction extends tB.R6{constructor(){super({id:"editor.action.deleteLines",label:tz.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0,r=[],s=[];for(let e=0,t=i.length;e<t;e++){let t=i[e],l=t.startLineNumber,d=t.endLineNumber,c=1,u=n.getLineMaxColumn(d);d<n.getLineCount()?(d+=1,u=1):l>1&&(l-=1,c=n.getLineMaxColumn(l)),r.push(rx.h.replace(new tJ.Y(l,c,d,u),"")),s.push(new tJ.Y(l-o,t.positionColumn,l-o,t.positionColumn)),o+=t.endLineNumber-t.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}});t.sort((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber);let i=[],n=t[0];for(let e=1;e<t.length;e++)n.endLineNumber+1>=t[e].startLineNumber?n.endLineNumber=t[e].endLineNumber:(i.push(n),n=t[e]);return i.push(n),i}};let IndentLinesAction=class IndentLinesAction extends tB.R6{constructor(){super({id:"editor.action.indentLines",label:tz.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2142,weight:100}})}run(e,t){let i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,a5.u6.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}};let OutdentLinesAction=class OutdentLinesAction extends tB.R6{constructor(){super({id:"editor.action.outdentLines",label:tz.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2140,weight:100}})}run(e,t){tA.wk.Outdent.runEditorCommand(e,t,null)}};let InsertLineBeforeAction=class InsertLineBeforeAction extends tB.R6{constructor(){super({id:"editor.action.insertLineBefore",label:tz.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3075,weight:100}})}run(e,t){let i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,a5.u6.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}};let InsertLineAfterAction=class InsertLineAfterAction extends tB.R6{constructor(){super({id:"editor.action.insertLineAfter",label:tz.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2051,weight:100}})}run(e,t){let i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,a5.u6.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}};let AbstractDeleteAllToBoundaryAction=class AbstractDeleteAllToBoundaryAction extends tB.R6{run(e,t){if(!t.hasModel())return;let i=t.getSelection(),n=this._getRangesToDelete(t),o=[];for(let e=0,t=n.length-1;e<t;e++){let t=n[e],i=n[e+1];null===t4.e.intersectRanges(t,i)?o.push(t):n[e+1]=t4.e.plusRange(t,i)}o.push(n[n.length-1]);let r=this._getEndCursorState(i,o),s=o.map(e=>rx.h.replace(e,""));t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}};let DeleteAllLeftAction=class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction{constructor(){super({id:"deleteAllLeft",label:tz.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null,n=[],o=0;return t.forEach(t=>{let r;if(1===t.endColumn&&o>0){let e=t.startLineNumber-o;r=new tJ.Y(e,t.startColumn,e,t.startColumn)}else r=new tJ.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=r:n.push(r)}),i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getSelections();if(null===t)return[];let i=t,n=e.getModel();return null===n?[]:(i.sort(t4.e.compareRangesUsingStarts),i=i.map(e=>{if(!e.isEmpty())return new t4.e(e.startLineNumber,1,e.endLineNumber,e.endColumn);if(1!==e.startColumn)return new t4.e(e.startLineNumber,1,e.startLineNumber,e.startColumn);{let t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineLength(t)+1;return new t4.e(t,i,e.startLineNumber,1)}}))}};let DeleteAllRightAction=class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction{constructor(){super({id:"deleteAllRight",label:tz.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null,n=[];for(let o=0,r=t.length;o<r;o++){let r=t[o],s=new tJ.Y(r.startLineNumber-0,r.startColumn,r.startLineNumber-0,r.startColumn);r.intersectRanges(e)?i=s:n.push(s)}return i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getModel();if(null===t)return[];let i=e.getSelections();if(null===i)return[];let n=i.map(e=>{if(e.isEmpty()){let i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new t4.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new t4.e(e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e});return n.sort(t4.e.compareRangesUsingStarts),n}};let JoinLinesAction=class JoinLinesAction extends tB.R6{constructor(){super({id:"editor.action.joinLines",label:tz.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(t4.e.compareRangesUsingStarts);let o=[],r=i.reduce((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new tJ.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new tJ.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn));o.push(r);let s=t.getModel();if(null===s)return;let l=[],d=[],c=n,u=0;for(let e=0,t=o.length;e<t;e++){let t,i;let r=o[e],g=r.startLineNumber,m=0,f=s.getLineLength(r.endLineNumber)-r.endColumn;if(r.isEmpty()||r.startLineNumber===r.endLineNumber){let e=r.getStartPosition();e.lineNumber<s.getLineCount()?(t=g+1,i=s.getLineMaxColumn(t)):(t=e.lineNumber,i=s.getLineMaxColumn(e.lineNumber))}else t=r.endLineNumber,i=s.getLineMaxColumn(t);let _=s.getLineContent(g);for(let e=g+1;e<=t;e++){let t=s.getLineContent(e),i=s.getLineFirstNonWhitespaceColumn(e);if(i>=1){let e=!0;""===_&&(e=!1),e&&(" "===_.charAt(_.length-1)||"	"===_.charAt(_.length-1))&&(e=!1,_=_.replace(/[\s\uFEFF\xA0]+$/g," "));let n=t.substr(i-1);_+=(e?" ":"")+n,m=e?n.length+1:n.length}else m=0}let v=new t4.e(g,1,t,i);if(!v.isEmpty()){let e;r.isEmpty()?(l.push(rx.h.replace(v,_)),e=new tJ.Y(v.startLineNumber-u,_.length-m+1,g-u,_.length-m+1)):r.startLineNumber===r.endLineNumber?(l.push(rx.h.replace(v,_)),e=new tJ.Y(r.startLineNumber-u,r.startColumn,r.endLineNumber-u,r.endColumn)):(l.push(rx.h.replace(v,_)),e=new tJ.Y(r.startLineNumber-u,r.startColumn,r.startLineNumber-u,_.length-f)),null!==t4.e.intersectRanges(v,n)?c=e:d.push(e)}u+=v.endLineNumber-v.startLineNumber}d.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,l,d),t.pushUndoStop()}};let TransposeAction=class TransposeAction extends tB.R6{constructor(){super({id:"editor.action.transpose",label:tz.NC("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:tH.u.writable})}run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getModel();if(null===n)return;let o=[];for(let e=0,t=i.length;e<t;e++){let t=i[e];if(!t.isEmpty())continue;let r=t.getStartPosition(),s=n.getLineMaxColumn(r.lineNumber);if(r.column>=s){if(r.lineNumber===n.getLineCount())continue;let e=new t4.e(r.lineNumber,Math.max(1,r.column-1),r.lineNumber+1,1),t=n.getValueInRange(e).split("").reverse().join("");o.push(new ie.T4(new tJ.Y(r.lineNumber,Math.max(1,r.column-1),r.lineNumber+1,1),t))}else{let e=new t4.e(r.lineNumber,Math.max(1,r.column-1),r.lineNumber,r.column+1),t=n.getValueInRange(e).split("").reverse().join("");o.push(new ie.hP(e,t,new tJ.Y(r.lineNumber,r.column+1,r.lineNumber,r.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}};let AbstractCaseAction=class AbstractCaseAction extends tB.R6{run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getModel();if(null===n)return;let o=t.getOption(130),r=[];for(let e of i)if(e.isEmpty()){let i=e.getStartPosition(),s=t.getConfiguredWordAtPosition(i);if(!s)continue;let l=new t4.e(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn),d=n.getValueInRange(l);r.push(rx.h.replace(l,this._modifyText(d,o)))}else{let t=n.getValueInRange(e);r.push(rx.h.replace(e,this._modifyText(t,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}};let UpperCaseAction=class UpperCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToUppercase",label:tz.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:tH.u.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}};let LowerCaseAction=class LowerCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToLowercase",label:tz.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:tH.u.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}};let BackwardsCompatibleRegExp=class BackwardsCompatibleRegExp{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}};let TitleCaseAction=class TitleCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToTitlecase",label:tz.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:tH.u.writable})}_modifyText(e,t){let i=TitleCaseAction.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,e=>e.toLocaleUpperCase()):e}};TitleCaseAction.titleBoundary=new BackwardsCompatibleRegExp("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");let SnakeCaseAction=class SnakeCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToSnakecase",label:tz.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:tH.u.writable})}_modifyText(e,t){let i=SnakeCaseAction.caseBoundary.get(),n=SnakeCaseAction.singleLetters.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}};SnakeCaseAction.caseBoundary=new BackwardsCompatibleRegExp("(\\p{Ll})(\\p{Lu})","gmu"),SnakeCaseAction.singleLetters=new BackwardsCompatibleRegExp("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");let CamelCaseAction=class CamelCaseAction extends AbstractCaseAction{constructor(){super({id:"editor.action.transformToCamelcase",label:tz.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:tH.u.writable})}_modifyText(e,t){let i=CamelCaseAction.wordBoundary.get();if(!i)return e;let n=e.split(i),o=n.shift();return o+n.map(e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1)).join("")}};CamelCaseAction.wordBoundary=new BackwardsCompatibleRegExp("[_\\s-]","gm");let KebabCaseAction=class KebabCaseAction extends AbstractCaseAction{static isSupported(){let e=[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(e=>e.isSupported());return e}constructor(){super({id:"editor.action.transformToKebabcase",label:tz.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:tH.u.writable})}_modifyText(e,t){let i=KebabCaseAction.caseBoundary.get(),n=KebabCaseAction.singleLetters.get(),o=KebabCaseAction.underscoreBoundary.get();return i&&n&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase():e}};KebabCaseAction.caseBoundary=new BackwardsCompatibleRegExp("(\\p{Ll})(\\p{Lu})","gmu"),KebabCaseAction.singleLetters=new BackwardsCompatibleRegExp("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),KebabCaseAction.underscoreBoundary=new BackwardsCompatibleRegExp("(\\S)(_)(\\S)","gm"),(0,tB.Qr)(CopyLinesUpAction),(0,tB.Qr)(CopyLinesDownAction),(0,tB.Qr)(DuplicateSelectionAction),(0,tB.Qr)(MoveLinesUpAction),(0,tB.Qr)(MoveLinesDownAction),(0,tB.Qr)(SortLinesAscendingAction),(0,tB.Qr)(SortLinesDescendingAction),(0,tB.Qr)(DeleteDuplicateLinesAction),(0,tB.Qr)(TrimTrailingWhitespaceAction),(0,tB.Qr)(DeleteLinesAction),(0,tB.Qr)(IndentLinesAction),(0,tB.Qr)(OutdentLinesAction),(0,tB.Qr)(InsertLineBeforeAction),(0,tB.Qr)(InsertLineAfterAction),(0,tB.Qr)(DeleteAllLeftAction),(0,tB.Qr)(DeleteAllRightAction),(0,tB.Qr)(JoinLinesAction),(0,tB.Qr)(TransposeAction),(0,tB.Qr)(UpperCaseAction),(0,tB.Qr)(LowerCaseAction),SnakeCaseAction.caseBoundary.isSupported()&&SnakeCaseAction.singleLetters.isSupported()&&(0,tB.Qr)(SnakeCaseAction),CamelCaseAction.wordBoundary.isSupported()&&(0,tB.Qr)(CamelCaseAction),TitleCaseAction.titleBoundary.isSupported()&&(0,tB.Qr)(TitleCaseAction),KebabCaseAction.isSupported()&&(0,tB.Qr)(KebabCaseAction),i(27409);var linkedEditing_param=function(e,t){return function(i,n){t(i,n,e)}};let a7=new tq.uy("LinkedEditingInputVisible",!1),a9=eB=class extends t2.JT{static get(e){return e.getContribution(eB.ID)}constructor(e,t,i,n,o){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new t2.SL),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=a7.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new t2.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(70)||e.hasChanged(93))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){let t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(70)||this._editor.getOption(93))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t))return;this._localToDispose.add(iM.ju.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));let n=new t1.vp(this._debounceInformation.get(t)),triggerRangeUpdate=()=>{var e;this._rangeUpdateTriggerPromise=n.trigger(()=>this.updateRanges(),null!==(e=this._debounceDuration)&&void 0!==e?e:this._debounceInformation.get(t))},o=new t1.vp(0),triggerRangeSync=e=>{this._rangeSyncTriggerPromise=o.trigger(()=>this._syncRanges(e))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{triggerRangeUpdate()})),this._localToDispose.add(this._editor.onDidChangeModelContent(e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){let t=this._currentDecorations.getRange(0);if(t&&e.changes.every(e=>t.intersectRanges(e.range))){triggerRangeSync(this._syncRangesToken);return}}triggerRangeUpdate()})),this._localToDispose.add({dispose:()=>{n.dispose(),o.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||0===this._currentDecorations.length)return;let t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();let n=t.getValueInRange(i);if(this._currentWordPattern){let e=n.match(this._currentWordPattern),t=e?e[0].length:0;if(t!==n.length)return this.clearRanges()}let o=[];for(let e=1,i=this._currentDecorations.length;e<i;e++){let i=this._currentDecorations.getRange(e);if(i){if(i.startLineNumber!==i.endLineNumber)o.push({range:i,text:n});else{let e=t.getValueInRange(i),r=n,s=i.startColumn,l=i.endColumn,d=iy.Mh(e,r);s+=d,e=e.substr(d),r=r.substr(d);let c=iy.P1(e,r);l-=c,e=e.substr(0,e.length-c),r=r.substr(0,r.length-c),(s!==l||0!==r.length)&&o.push({range:new t4.e(i.startLineNumber,s,i.endLineNumber,l),text:r})}}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;let e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}let t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}let i=this._editor.getModel(),n=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===n){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){let e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=n;let o=this._currentRequestCts=new i0.A;try{let e=new nK.G(!1),r=await getLinkedEditingRanges(this._providers,i,t,o.token);if(this._debounceInformation.update(i,e.elapsed()),o!==this._currentRequestCts||(this._currentRequestCts=null,n!==i.getVersionId()))return;let s=[];(null==r?void 0:r.ranges)&&(s=r.ranges),this._currentWordPattern=(null==r?void 0:r.wordPattern)||this._languageWordPattern;let l=!1;for(let e=0,i=s.length;e<i;e++)if(t4.e.containsPosition(s[e],t)){if(l=!0,0!==e){let t=s[e];s.splice(e,1),s.unshift(t)}break}if(!l){this.clearRanges();return}let d=s.map(e=>({range:e,options:eB.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(d),this._syncRangesToken++}catch(e){(0,i1.n2)(e)||(0,i1.dL)(e),this._currentRequestCts!==o&&this._currentRequestCts||this.clearRanges()}}};a9.ID="editor.contrib.linkedEditing",a9.DECORATION=t6.qx.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),a9=eB=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([linkedEditing_param(1,tq.i6),linkedEditing_param(2,ib.p),linkedEditing_param(3,n$.c_),linkedEditing_param(4,nH.A)],a9);let LinkedEditingAction=class LinkedEditingAction extends tB.R6{constructor(){super({id:"editor.action.linkedEditing",label:tz.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:tq.Ao.and(tH.u.writable,tH.u.hasRenameProvider),kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){let i=e.get(tW.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return ip.o.isUri(n)&&t5.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(e=>{e&&(e.setPosition(o),e.invokeWithinContext(t=>(this.reportTelemetry(t,e),this.run(t,e))))},i1.dL):super.runCommand(e,t)}run(e,t){let i=a9.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}};let a8=tB._l.bindToContribution(a9.get);function getLinkedEditingRanges(e,t,i,n){let o=e.ordered(t);return(0,t1.Ps)(o.map(e=>async()=>{try{return await e.provideLinkedEditingRanges(t,i,n)}catch(e){(0,i1.Cp)(e);return}}),e=>!!e&&ia.Of(null==e?void 0:e.ranges))}(0,tB.fK)(new a8({id:"cancelLinkedEditingInput",precondition:a7,handler:e=>e.clearRanges(),kbOpts:{kbExpr:tH.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}})),(0,t7.P6G)("editor.linkedEditingBackground",{dark:nU.Il.fromHex("#f00").transparent(.3),light:nU.Il.fromHex("#f00").transparent(.3),hcDark:nU.Il.fromHex("#f00").transparent(.3),hcLight:nU.Il.white},tz.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type.")),(0,tB.sb)("_executeLinkedEditingProvider",(e,t,i)=>{let{linkedEditingRangeProvider:n}=e.get(ib.p);return getLinkedEditingRanges(n,t,i,i0.T.None)}),(0,tB._K)(a9.ID,a9,1),(0,tB.Qr)(LinkedEditingAction),i(32167);let Link=class Link{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:"function"==typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url)?this.resolve(e):Promise.reject(Error("missing"))):Promise.reject(Error("missing"))}};let LinksList=class LinksList{constructor(e){this._disposables=new t2.SL;let t=[];for(let[i,n]of e){let e=i.links.map(e=>new Link(e,n));t=LinksList._union(t,e),(0,t2.Wf)(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let i,n,o,r;let s=[];for(i=0,o=0,n=e.length,r=t.length;i<n&&o<r;){let n=e[i],r=t[o];if(t4.e.areIntersectingOrTouching(n.range,r.range)){i++;continue}let l=t4.e.compareRangesUsingStarts(n.range,r.range);l<0?(s.push(n),i++):(s.push(r),o++)}for(;i<n;i++)s.push(e[i]);for(;o<r;o++)s.push(t[o]);return s}};function getLinks(e,t,i){let n=[],o=e.ordered(t).reverse().map((e,o)=>Promise.resolve(e.provideLinks(t,i)).then(t=>{t&&(n[o]=[t,e])},i1.Cp));return Promise.all(o).then(()=>{let e=new LinksList((0,ia.kX)(n));return i.isCancellationRequested?(e.dispose(),new LinksList([])):e})}tK.P.registerCommand("_executeLinkProvider",async(e,...t)=>{let[i,n]=t;(0,nR.p_)(i instanceof ip.o),"number"!=typeof n&&(n=0);let{linkProvider:o}=e.get(ib.p),r=e.get(i2.q).getModel(i);if(!r)return[];let s=await getLinks(o,r,i0.T.None);if(!s)return[];for(let e=0;e<Math.min(n,s.links.length);e++)await s.links[e].resolve(i0.T.None);let l=s.links.slice(0);return s.dispose(),l});var links_param=function(e,t){return function(i,n){t(i,n,e)}};let le=eW=class extends t2.JT{static get(e){return e.getContribution(eW.ID)}constructor(e,t,i,n,o){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=n,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new t1.pY(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;let r=this._register(new ClickLinkGesture(e));this._register(r.onMouseMoveOrRelevantKeyDown(([e,t])=>{this._onEditorMouseMove(e,t)})),this._register(r.onExecute(e=>{this.onEditorMouseUp(e)})),this._register(r.onCancel(e=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(e=>{e.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(e=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(e=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(e=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(e=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;let e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,t1.PG)(t=>getLinks(this.providers,e,t));try{let t=new nK.G(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(e){(0,i1.dL)(e)}finally{this.computePromise=null}}}updateDecorations(e){let t="altKey"===this.editor.getOption(78),i=[],n=Object.keys(this.currentOccurrences);for(let e of n){let t=this.currentOccurrences[e];i.push(t.decorationId)}let o=[];if(e)for(let i of e)o.push(LinkOccurrence.decoration(i,t));this.editor.changeDecorations(t=>{let n=t.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let t=0,i=n.length;t<i;t++){let i=new LinkOccurrence(e[t],n[t]);this.currentOccurrences[i.decorationId]=i}})}_onEditorMouseMove(e,t){let i="altKey"===this.editor.getOption(78);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();let t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations(e=>{t.activate(e,i),this.activeLinkDecorationId=t.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){let e="altKey"===this.editor.getOption(78);if(this.activeLinkDecorationId){let t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;let t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;let{link:n}=e;n.resolve(i0.T.None).then(e=>{if("string"==typeof e&&this.editor.hasModel()){let t=this.editor.getModel().uri;if(t.scheme===oy.lg.file&&e.startsWith(`${oy.lg.file}:`)){let i=ip.o.parse(e);if(i.scheme===oy.lg.file){let n=nL.z_(i),o=null;n.startsWith("/./")?o=`.${n.substr(1)}`:n.startsWith("//./")&&(o=`.${n.substr(2)}`),o&&(e=nL.Vo(t,o))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},e=>{let t=e instanceof Error?e.message:e;"invalid"===t?this.notificationService.warn(tz.NC("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):"missing"===t?this.notificationService.warn(tz.NC("missing.url","Failed to open this link because its target is missing.")):(0,i1.dL)(e)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;let t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(let e of t){let t=this.currentOccurrences[e.id];if(t)return t}return null}isEnabled(e,t){return!!(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};le.ID="editor.linkDetector",le=eW=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([links_param(1,iW.v),links_param(2,i5.lT),links_param(3,ib.p),links_param(4,nH.A)],le);let lt={general:t6.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:t6.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};let LinkOccurrence=class LinkOccurrence{static decoration(e,t){return{range:e.range,options:LinkOccurrence._getOptions(e,t,!1)}}static _getOptions(e,t,i){let n={...i?lt.active:lt.general};return n.hoverMessage=getHoverMessage(e,t),n}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,LinkOccurrence._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,LinkOccurrence._getOptions(this.link,t,!1))}};function getHoverMessage(e,t){let i=e.url&&/^command:/i.test(e.url.toString()),n=e.tooltip?e.tooltip:i?tz.NC("links.navigate.executeCmd","Execute command"):tz.NC("links.navigate.follow","Follow link"),o=t?io.dz?tz.NC("links.navigate.kb.meta.mac","cmd + click"):tz.NC("links.navigate.kb.meta","ctrl + click"):io.dz?tz.NC("links.navigate.kb.alt.mac","option + click"):tz.NC("links.navigate.kb.alt","alt + click");if(!e.url)return new tZ.W5().appendText(`${n} (${o})`);{let t="";if(/^command:/i.test(e.url.toString())){let i=e.url.toString().match(/^command:([^?#]+)/);if(i){let e=i[1];t=tz.NC("tooltip.explanation","Execute command {0}",e)}}let i=new tZ.W5("",!0).appendLink(e.url.toString(!0).replace(/ /g,"%20"),n,t).appendMarkdown(` (${o})`);return i}}let OpenLinkAction=class OpenLinkAction extends tB.R6{constructor(){super({id:"editor.action.openLink",label:tz.NC("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let i=le.get(t);if(!i||!t.hasModel())return;let n=t.getSelections();for(let e of n){let t=i.getLinkOccurrence(e.getEndPosition());t&&i.openLinkOccurrence(t,!1)}}};(0,tB._K)(le.ID,le,1),(0,tB.Qr)(OpenLinkAction);let LongLinesHelper=class LongLinesHelper extends t2.JT{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(e=>{let t=this._editor.getOption(117);t>=0&&6===e.target.type&&e.target.position.column>=t&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};LongLinesHelper.ID="editor.contrib.longLinesHelper",(0,tB._K)(LongLinesHelper.ID,LongLinesHelper,2),i(83901);let li=(0,t7.P6G)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},tz.NC("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);(0,t7.P6G)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},tz.NC("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),(0,t7.P6G)("editor.wordHighlightTextBackground",{light:li,dark:li,hcDark:li,hcLight:li},tz.NC("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);let ln=(0,t7.P6G)("editor.wordHighlightBorder",{light:null,dark:null,hcDark:t7.xL1,hcLight:t7.xL1},tz.NC("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));(0,t7.P6G)("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:t7.xL1,hcLight:t7.xL1},tz.NC("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),(0,t7.P6G)("editor.wordHighlightTextBorder",{light:ln,dark:ln,hcDark:ln,hcLight:ln},tz.NC("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));let lo=(0,t7.P6G)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},tz.NC("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),lr=(0,t7.P6G)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},tz.NC("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ls=(0,t7.P6G)("editorOverviewRuler.wordHighlightTextForeground",{dark:t7.SPM,light:t7.SPM,hcDark:t7.SPM,hcLight:t7.SPM},tz.NC("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),la=t6.qx.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,t9.EN)(lr),position:t3.sh.Center},minimap:{color:(0,t9.EN)(t7.IYc),position:t3.F5.Inline}}),ll=t6.qx.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:(0,t9.EN)(ls),position:t3.sh.Center},minimap:{color:(0,t9.EN)(t7.IYc),position:t3.F5.Inline}}),ld=t6.qx.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,t9.EN)(t7.SPM),position:t3.sh.Center},minimap:{color:(0,t9.EN)(t7.IYc),position:t3.F5.Inline}}),lh=t6.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),lc=t6.qx.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,t9.EN)(lo),position:t3.sh.Center},minimap:{color:(0,t9.EN)(t7.IYc),position:t3.F5.Inline}});function getHighlightDecorationOptions(e){return e===ov.MY.Write?la:e===ov.MY.Text?ll:lc}function getSelectionHighlightDecorationOptions(e){return e?lh:ld}function announceCursorChange(e,t){let i=t.filter(t=>!e.find(e=>e.equals(t)));if(i.length>=1){let e=i.map(e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`).join(", "),t=1===i.length?tz.NC("cursorAdded","Cursor added: {0}",e):tz.NC("cursorsAdded","Cursors added: {0}",e);(0,tQ.i7)(t)}}(0,t9.Ic)((e,t)=>{let i=e.getColor(t7.Rzx);i&&t.addRule(`.monaco-editor .selectionHighlight { background-color: ${i.transparent(.5)}; }`)});let InsertCursorAbove=class InsertCursorAbove extends tB.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:tz.NC("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"3_multi",title:tz.NC({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);let o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();let r=o.getCursorStates();o.setCursorStates(i.source,3,a2.P.addCursorUp(o,r,n)),o.revealTopMostCursor(i.source),announceCursorChange(r,o.getCursorStates())}};let InsertCursorBelow=class InsertCursorBelow extends tB.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:tz.NC("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"3_multi",title:tz.NC({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);let o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();let r=o.getCursorStates();o.setCursorStates(i.source,3,a2.P.addCursorDown(o,r,n)),o.revealBottomMostCursor(i.source),announceCursorChange(r,o.getCursorStates())}};let InsertCursorAtEndOfEachLineSelected=class InsertCursorAtEndOfEachLineSelected extends tB.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:tz.NC("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"3_multi",title:tz.NC({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){let e=t.getLineMaxColumn(n);i.push(new tJ.Y(n,e,n,e))}e.endColumn>1&&i.push(new tJ.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;let i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates(),s=[];n.forEach(e=>this.getCursorsForSelection(e,i,s)),s.length>0&&t.setSelections(s),announceCursorChange(r,o.getCursorStates())}};let InsertCursorAtEndOfLineSelected=class InsertCursorAtEndOfLineSelected extends tB.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:tz.NC("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;let i=t.getSelections(),n=t.getModel().getLineCount(),o=[];for(let e=i[0].startLineNumber;e<=n;e++)o.push(new tJ.Y(e,i[0].startColumn,e,i[0].endColumn));let r=t._getViewModel(),s=r.getCursorStates();o.length>0&&t.setSelections(o),announceCursorChange(s,r.getCursorStates())}};let InsertCursorAtTopOfLineSelected=class InsertCursorAtTopOfLineSelected extends tB.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:tz.NC("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;let i=t.getSelections(),n=[];for(let e=i[0].startLineNumber;e>=1;e--)n.push(new tJ.Y(e,i[0].startColumn,e,i[0].endColumn));let o=t._getViewModel(),r=o.getCursorStates();n.length>0&&t.setSelections(n),announceCursorChange(r,o.getCursorStates())}};let MultiCursorSessionResult=class MultiCursorSessionResult{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}};let MultiCursorSession=class MultiCursorSession{static create(e,t){let i,n,o;if(!e.hasModel())return null;let r=t.getState();if(!e.hasTextFocus()&&r.isRevealed&&r.searchString.length>0)return new MultiCursorSession(e,t,!1,r.searchString,r.wholeWord,r.matchCase,null);let s=!1,l=e.getSelections();1===l.length&&l[0].isEmpty()?(s=!0,i=!0,n=!0):(i=r.wholeWord,n=r.matchCase);let d=e.getSelection(),c=null;if(d.isEmpty()){let t=e.getConfiguredWordAtPosition(d.getStartPosition());if(!t)return null;o=t.word,c=new tJ.Y(d.startLineNumber,t.startColumn,d.startLineNumber,t.endColumn)}else o=e.getModel().getValueInRange(d).replace(/\r\n/g,"\n");return new MultiCursorSession(e,t,s,o,i,n,c)}constructor(e,t,i,n,o,r,s){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=r,this.currentMatch=s}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new MultiCursorSessionResult(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new MultiCursorSessionResult(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(130):null,!1);return i?new tJ.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new MultiCursorSessionResult(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new MultiCursorSessionResult(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(130):null,!1);return i?new tJ.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();let t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(130):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(130):null,!1,1073741824)}};let MultiCursorSelectionController=class MultiCursorSelectionController extends t2.JT{static get(e){return e.getContribution(MultiCursorSelectionController.ID)}constructor(e){super(),this._sessionDispose=this._register(new t2.SL),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){let t=MultiCursorSession.create(this._editor,e);if(!t)return;this._session=t;let i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(e=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(e=>{(e.matchCase||e.wholeWord)&&this._endSession()}))}}_endSession(){this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController&&this._session.findController.getState().change({wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0},!1),this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;let i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new tJ.Y(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){let t=this._editor.getSelections();if(t.length>1){let i=e.getState(),n=i.matchCase,o=modelRangesContainSameText(this._editor.getModel(),t,n);if(!o){let e=this._editor.getModel(),i=[];for(let n=0,o=t.length;n<o;n++)i[n]=this._expandEmptyToWord(e,t[n]);this._editor.setSelections(i);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null,i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){let e=this._editor.getModel();t=i.searchScope?e.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(130):null,!1,1073741824):e.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(130):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){let e=this._editor.getSelection();for(let i=0,n=t.length;i<n;i++){let n=t[i],o=n.range.intersectRanges(e);if(o){t[i]=t[0],t[0]=n;break}}this._setSelections(t.map(e=>new tJ.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)))}}};MultiCursorSelectionController.ID="editor.contrib.multiCursorController";let MultiCursorSelectionControllerAction=class MultiCursorSelectionControllerAction extends tB.R6{run(e,t){let i=MultiCursorSelectionController.get(t);if(!i)return;let n=t._getViewModel();if(n){let o=n.getCursorStates(),r=sk.get(t);if(r)this._run(i,r);else{let n=e.get(iL.TG).createInstance(sk,t);this._run(i,n),n.dispose()}announceCursorChange(o,n.getCursorStates())}}};let AddSelectionToNextFindMatchAction=class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:tz.NC("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:2082,weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"3_multi",title:tz.NC({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}};let AddSelectionToPreviousFindMatchAction=class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:tz.NC("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"3_multi",title:tz.NC({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}};let MoveSelectionToNextFindMatchAction=class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:tz.NC("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:(0,tY.gx)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}};let MoveSelectionToPreviousFindMatchAction=class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:tz.NC("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}};let SelectHighlightsAction=class SelectHighlightsAction extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.selectHighlights",label:tz.NC("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:3114,weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"3_multi",title:tz.NC({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}};let CompatChangeAll=class CompatChangeAll extends MultiCursorSelectionControllerAction{constructor(){super({id:"editor.action.changeAll",label:tz.NC("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:tq.Ao.and(tH.u.writable,tH.u.editorTextFocus),kbOpts:{kbExpr:tH.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}};let SelectionHighlighterState=class SelectionHighlighterState{constructor(e,t,i,n,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(t4.e.compareRangesUsingStarts)),this._cachedFindMatches}};let lu=eV=class extends t2.JT{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(108),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new t1.pY(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(108)})),this._register(e.onDidChangeCursorSelection(e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(e=>{this._setState(null)})),this._register(e.onDidChangeModelContent(e=>{this._isEnabled&&this.updateSoon.schedule()}));let i=sk.get(e);i&&this._register(i.getState().onFindReplaceStateChange(e=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(eV._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;let n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;let o=MultiCursorSelectionController.get(i);if(!o)return null;let r=sk.get(i);if(!r)return null;let s=o.getSession(r);if(!s){let e=i.getSelections();if(e.length>1){let t=r.getState(),n=t.matchCase,o=modelRangesContainSameText(i.getModel(),e,n);if(!o)return null}s=MultiCursorSession.create(i,r)}if(!s||s.currentMatch||/^[ \t]+$/.test(s.searchText)||s.searchText.length>200)return null;let l=r.getState(),d=l.matchCase;if(l.isRevealed){let e=l.searchString;d||(e=e.toLowerCase());let t=s.searchText;if(d||(t=t.toLowerCase()),e===t&&s.matchCase===l.matchCase&&s.wholeWord===l.wholeWord&&!l.isRegex)return null}return new SelectionHighlighterState(i.getModel(),s.searchText,s.matchCase,s.wholeWord?i.getOption(130):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;let t=this.editor.getModel();if(t.isTooLargeForTokenization())return;let i=this.state.findMatches(),n=this.editor.getSelections();n.sort(t4.e.compareRangesUsingStarts);let o=[];for(let e=0,t=0,r=i.length,s=n.length;e<r;){let r=i[e];if(t>=s)o.push(r),e++;else{let i=t4.e.compareRangesUsingStarts(r,n[t]);i<0?((n[t].isEmpty()||!t4.e.areIntersecting(r,n[t]))&&o.push(r),e++):(i>0||e++,t++)}}let r="off"!==this.editor.getOption(81),s=this._languageFeaturesService.documentHighlightProvider.has(t)&&r,l=o.map(e=>({range:e,options:getSelectionHighlightDecorationOptions(s)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}};function modelRangesContainSameText(e,t,i){let n=getValueInRange(e,t[0],!i);for(let o=1,r=t.length;o<r;o++){let r=t[o];if(r.isEmpty())return!1;let s=getValueInRange(e,r,!i);if(n!==s)return!1}return!0}function getValueInRange(e,t,i){let n=e.getValueInRange(t);return i?n.toLowerCase():n}lu.ID="editor.contrib.selectionHighlighter",lu=eV=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(T=ib.p,function(e,t){T(e,t,1)})],lu);let FocusNextCursor=class FocusNextCursor extends tB.R6{constructor(){super({id:"editor.action.focusNextCursor",label:tz.NC("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:tz.NC("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;let n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();let o=Array.from(n.getCursorStates()),r=o.shift();r&&(o.push(r),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),announceCursorChange(o,n.getCursorStates()))}};let FocusPreviousCursor=class FocusPreviousCursor extends tB.R6{constructor(){super({id:"editor.action.focusPreviousCursor",label:tz.NC("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:tz.NC("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;let n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();let o=Array.from(n.getCursorStates()),r=o.pop();r&&(o.unshift(r),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),announceCursorChange(o,n.getCursorStates()))}};(0,tB._K)(MultiCursorSelectionController.ID,MultiCursorSelectionController,4),(0,tB._K)(lu.ID,lu,1),(0,tB.Qr)(InsertCursorAbove),(0,tB.Qr)(InsertCursorBelow),(0,tB.Qr)(InsertCursorAtEndOfEachLineSelected),(0,tB.Qr)(AddSelectionToNextFindMatchAction),(0,tB.Qr)(AddSelectionToPreviousFindMatchAction),(0,tB.Qr)(MoveSelectionToNextFindMatchAction),(0,tB.Qr)(MoveSelectionToPreviousFindMatchAction),(0,tB.Qr)(SelectHighlightsAction),(0,tB.Qr)(CompatChangeAll),(0,tB.Qr)(InsertCursorAtEndOfLineSelected),(0,tB.Qr)(InsertCursorAtTopOfLineSelected),(0,tB.Qr)(FocusNextCursor),(0,tB.Qr)(FocusPreviousCursor),i(68871);let lg="inline-edit",lp=class extends t2.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,rp.uh)(this,!1),this.currentTextModel=(0,rp.rD)(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,rp.nK)(this,e=>{var t;let i;if(this.isDisposed.read(e))return;let n=this.currentTextModel.read(e);if(n!==this.model.targetTextModel.read(e))return;let o=this.model.ghostText.read(e);if(!o)return;let r=null===(t=this.model.range)||void 0===t?void 0:t.read(e);r&&r.startLineNumber===r.endLineNumber&&r.startColumn===r.endColumn&&(r=void 0);let s=(!r||r.startLineNumber===r.endLineNumber)&&1===o.parts.length&&1===o.parts[0].lines.length,l=1===o.parts.length&&o.parts[0].lines.every(e=>0===e.length),d=[],c=[];function addToAdditionalLines(e,t){if(c.length>0){let i=c[c.length-1];t&&i.decorations.push(new s9.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(let i of e)c.push({content:i,decorations:t?[new s9.Kp(1,i.length+1,t,0)]:[]})}let u=n.getLineContent(o.lineNumber),g=0;if(!l){for(let e of o.parts){let t=e.lines;r&&!s&&(addToAdditionalLines(t,lg),t=[]),void 0===i?(d.push({column:e.column,text:t[0],preview:e.preview}),t=t.slice(1)):addToAdditionalLines([u.substring(g,e.column-1)],void 0),t.length>0&&(addToAdditionalLines(t,lg),void 0===i&&e.column<=u.length&&(i=e.column)),g=e.column-1}void 0!==i&&addToAdditionalLines([u.substring(g)],void 0)}let m=void 0!==i?new ColumnRange(i,u.length+1):void 0,f=s||!r?o.lineNumber:r.endLineNumber-1;return{inlineTexts:d,additionalLines:c,hiddenRange:m,lineNumber:f,additionalReservedLineCount:this.model.minReservedLineCount.read(e),targetTextModel:n,range:r,isSingleLine:s,isPureRemove:l,backgroundColoring:this.model.backgroundColoring.read(e)}}),this.decorations=(0,rp.nK)(this,e=>{let t=this.uiState.read(e);if(!t)return[];let i=[];if(t.hiddenRange&&i.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),t.range){let e=[];if(t.isSingleLine)e.push(t.range);else if(t.isPureRemove){let i=t.range.endLineNumber-t.range.startLineNumber;for(let n=0;n<i;n++){let i=t.range.startLineNumber+n,o=t.targetTextModel.getLineFirstNonWhitespaceColumn(i),r=t.targetTextModel.getLineLastNonWhitespaceColumn(i),s=new t4.e(i,o,i,r);e.push(s)}}else{let i=t.range.endLineNumber-t.range.startLineNumber;for(let n=0;n<=i;n++){let i=t.range.startLineNumber+n,o=t.targetTextModel.getLineFirstNonWhitespaceColumn(i),r=t.targetTextModel.getLineLastNonWhitespaceColumn(i),s=new t4.e(i,o,i,r);e.push(s)}}let n=t.backgroundColoring?"inline-edit-remove backgroundColoring":"inline-edit-remove";for(let t of e)i.push({range:t,options:{inlineClassName:n,description:"inline-edit-remove"}})}for(let e of t.inlineTexts)i.push({range:t4.e.fromPositions(new t5.L(t.lineNumber,e.column)),options:{description:lg,after:{content:e.text,inlineClassName:e.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:t3.RM.Left},showIfCollapsed:!0}});return i}),this.additionalLinesWidget=this._register(new AdditionalLinesWidget(this.editor,this.languageService.languageIdCodec,(0,rp.nK)(e=>{let t=this.uiState.read(e);return t&&!t.isPureRemove?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0}))),this._register((0,t2.OF)(()=>{this.isDisposed.set(!0,void 0)})),this._register(applyObservableDecorations(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};lp=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(M=n3.O,function(e,t){M(e,t,2)})],lp),i(80983);var inlineEditHintsWidget_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},inlineEditHintsWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let lm=class extends t2.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>"always"===this.editor.getOption(63).showToolbar),this.sessionPosition=void 0,this.position=(0,rp.nK)(this,e=>{var t,i,n;let o=null===(t=this.model.read(e))||void 0===t?void 0:t.widget.model.ghostText.read(e);if(!this.alwaysShowToolbar.read(e)||!o||0===o.parts.length)return this.sessionPosition=void 0,null;let r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);let s=new t5.L(o.lineNumber,Math.min(r,null!==(n=null===(i=this.sessionPosition)||void 0===i?void 0:i.column)&&void 0!==n?n:Number.MAX_SAFE_INTEGER));return this.sessionPosition=s,s}),this._register((0,rp.gp)((t,i)=>{let n=this.model.read(t);if(!n||!this.alwaysShowToolbar.read(t))return;let o=i.add(this.instantiationService.createInstance(lf,this.editor,!0,this.position));e.addContentWidget(o),i.add((0,t2.OF)(()=>e.removeContentWidget(o)))}))}};lm=inlineEditHintsWidget_decorate([inlineEditHintsWidget_param(2,iL.TG)],lm);let lf=eH=class extends t2.JT{constructor(e,t,i,n,o,r){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=o,this._menuService=r,this.id=`InlineEditHintsContentWidget${eH.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,tO.h)("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[(0,tO.h)("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(tU.eH.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(n.createInstance(l_,this.nodes.toolBar,this.editor,tU.eH.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>{if(e instanceof tU.U8)return n.createInstance(inlineEditHintsWidget_StatusBarViewItem,e,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(e=>{eH._dropDownVisible=e})),this._register((0,rp.EH)(e=>{this._position.read(e),this.editor.layoutContentWidget(this)})),this._register((0,rp.EH)(e=>{let t=[];for(let[e,i]of this.inlineCompletionsActionsMenus.getActions())for(let e of i)e instanceof tU.U8&&t.push(e);t.length>0&&t.unshift(new iT.Z0),this.toolBar.setAdditionalSecondaryActions(t)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};lf._dropDownVisible=!1,lf.id=0,lf=eH=inlineEditHintsWidget_decorate([inlineEditHintsWidget_param(3,iL.TG),inlineEditHintsWidget_param(4,tq.i6),inlineEditHintsWidget_param(5,tU.co)],lf);let inlineEditHintsWidget_StatusBarViewItem=class inlineEditHintsWidget_StatusBarViewItem extends oo.Mm{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){let t=(0,tO.h)("div.keybinding").root,i=new nc.e(t,io.OS,{disableTitle:!0,...nc.F});i.set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}};let l_=class extends rv.T{constructor(e,t,i,n,o,r,s,l,d){super(e,{resetMenu:i,...n},o,r,s,l,d),this.editor=t,this.menuId=i,this.options2=n,this.menuService=o,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,i,n,o,r,s;let l=[],d=[];(0,oo.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:l,secondary:d},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(o=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(s=null===(r=this.options2)||void 0===r?void 0:r.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),d.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,d)}setAdditionalSecondaryActions(e){(0,ia.fS)(this.additionalActions,e,(e,t)=>e===t)||(this.additionalActions=e,this.updateToolbar())}};l_=inlineEditHintsWidget_decorate([inlineEditHintsWidget_param(4,tU.co),inlineEditHintsWidget_param(5,tq.i6),inlineEditHintsWidget_param(6,iR.i),inlineEditHintsWidget_param(7,iA.d),inlineEditHintsWidget_param(8,i4.b)],l_);var inlineEditController_param=function(e,t){return function(i,n){t(i,n,e)}};let InlineEditWidget=class InlineEditWidget{constructor(e,t){this.widget=e,this.edit=t}dispose(){this.widget.dispose()}};let lv=ez=class extends t2.JT{static get(e){return e.getContribution(ez.ID)}constructor(e,t,i,n,o,r){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=n,this._commandService=o,this._configurationService=r,this._isVisibleContext=ez.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=ez.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=this._register((0,rp.DN)(this,void 0)),this._isAccepting=!1,this._enabled=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily),this._backgroundColoring=(0,rp.rD)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).backgroundColoring);let s=(0,rp.aq)("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register((0,rp.EH)(t=>{this._enabled.read(t)&&(s.read(t),this.getInlineEdit(e,!0))}));let l=(0,rp.rD)(e.onDidChangeCursorPosition,()=>e.getPosition());this._register((0,rp.EH)(e=>{if(!this._enabled.read(e))return;let t=l.read(e);t&&this.checkCursorPosition(t)})),this._register((0,rp.EH)(t=>{let i=this._currentEdit.read(t);if(this._isCursorAtInlineEditContext.set(!1),!i){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);let n=e.getPosition();n&&this.checkCursorPosition(n)}));let d=(0,rp.aq)("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register((0,rp.EH)(t=>{var i;this._enabled.read(t)&&(d.read(t),this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur||(null===(i=this._currentRequestCts)||void 0===i||i.dispose(),this._currentRequestCts=void 0,this.clear(!1)))}));let c=(0,rp.aq)("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register((0,rp.EH)(t=>{this._enabled.read(t)&&(c.read(t),this.getInlineEdit(e,!0))}));let u=this._register((0,tO.aU)());this._register((0,rp.EH)(e=>{let t=this._fontFamily.read(e);u.setStyle(""===t||"default"===t?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${t};
}`)})),this._register(new lm(this.editor,this._currentEdit,this.instantiationService))}checkCursorPosition(e){var t;if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}let i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.edit;if(!i){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(t4.e.containsPosition(i.range,e))}validateInlineEdit(e,t){var i,n;if(t.text.includes("\n")&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){let o=t.range.startColumn;if(1!==o)return!1;let r=t.range.endLineNumber,s=t.range.endColumn,l=null!==(n=null===(i=e.getModel())||void 0===i?void 0:i.getLineLength(r))&&void 0!==n?n:0;if(s!==l+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);let i=e.getModel();if(!i)return;let n=i.getVersionId(),o=this.languageFeaturesService.inlineEditProvider.all(i);if(0===o.length)return;let r=o[0];this._currentRequestCts=new i0.A;let s=this._currentRequestCts.token,l=t?ov.rn.Automatic:ov.rn.Invoke;if(t&&await inlineEditController_wait(50,s),s.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)return;let d=await r.provideInlineEdit(i,{triggerKind:l},s);if(!(!d||s.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)&&this.validateInlineEdit(e,d))return d}async getInlineEdit(e,t){var i;this._isCursorAtInlineEditContext.set(!1),this.clear(),this._isAccepting=!1;let n=await this.fetchInlineEdit(e,t);if(!n)return;let o=n.range.endLineNumber,r=n.range.endColumn,s=new GhostText(o,[new GhostTextPart(r,n.text,!1)]),l=this.instantiationService.createInstance(lp,this.editor,{ghostText:(0,rp.Dz)(s),minReservedLineCount:(0,rp.Dz)(0),targetTextModel:(0,rp.Dz)(null!==(i=this.editor.getModel())&&void 0!==i?i:void 0),range:(0,rp.Dz)(n.range),backgroundColoring:this._backgroundColoring});this._currentEdit.set(new InlineEditWidget(l,n),void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}accept(){var e;this._isAccepting=!0;let t=null===(e=this._currentEdit.get())||void 0===e?void 0:e.edit;if(!t)return;let i=t.text;t.text.startsWith("\n")&&(i=t.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[rx.h.replace(t4.e.lift(t.range),i)]),t.accepted&&this._commandService.executeCommand(t.accepted.id,...t.accepted.arguments||[]),this.freeEdit(t),this._currentEdit.set(void 0,void 0)}jumpToCurrent(){var e,t;this._jumpBackPosition=null===(e=this.editor.getSelection())||void 0===e?void 0:e.getStartPosition();let i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.edit;if(!i)return;let n=t5.L.lift({lineNumber:i.range.startLineNumber,column:i.range.startColumn});this.editor.setPosition(n),this.editor.revealPositionInCenterIfOutsideViewport(n)}clear(e=!0){var t;let i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.edit;i&&(null==i?void 0:i.rejected)&&!this._isAccepting&&e&&this._commandService.executeCommand(i.rejected.id,...i.rejected.arguments||[]),i&&this.freeEdit(i),this._currentEdit.set(void 0,void 0)}freeEdit(e){let t=this.editor.getModel();if(!t)return;let i=this.languageFeaturesService.inlineEditProvider.all(t);0!==i.length&&i[0].freeInlineEdit(e)}shouldShowHoverAt(e){let t=this._currentEdit.get();if(!t)return!1;let i=t.edit,n=t.widget.model,o=t4.e.containsPosition(i.range,e.getStartPosition())||t4.e.containsPosition(i.range,e.getEndPosition());if(o)return!0;let r=n.ghostText.get();return!!r&&r.parts.some(t=>e.containsPosition(new t5.L(r.lineNumber,t.column)))}shouldShowHoverAtViewZone(e){var t,i;return null!==(i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.widget.ownsViewZone(e))&&void 0!==i&&i}};function inlineEditController_wait(e,t){return new Promise(i=>{let n;let o=setTimeout(()=>{n&&n.dispose(),i()},e);t&&(n=t.onCancellationRequested(()=>{clearTimeout(o),n&&n.dispose(),i()}))})}lv.ID="editor.contrib.inlineEditController",lv.inlineEditVisibleKey="inlineEditVisible",lv.inlineEditVisibleContext=new tq.uy(ez.inlineEditVisibleKey,!1),lv.cursorAtInlineEditKey="cursorAtInlineEdit",lv.cursorAtInlineEditContext=new tq.uy(ez.cursorAtInlineEditKey,!1),lv=ez=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inlineEditController_param(1,iL.TG),inlineEditController_param(2,tq.i6),inlineEditController_param(3,ib.p),inlineEditController_param(4,tK.H),inlineEditController_param(5,tj.Ui)],lv);let AcceptInlineEdit=class AcceptInlineEdit extends tB.R6{constructor(){super({id:"editor.action.inlineEdit.accept",label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:tq.Ao.and(tH.u.writable,lv.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:tq.Ao.and(tH.u.writable,lv.inlineEditVisibleContext,lv.cursorAtInlineEditContext)}],menuOpts:[{menuId:tU.eH.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){let i=lv.get(t);null==i||i.accept()}};let TriggerInlineEdit=class TriggerInlineEdit extends tB.R6{constructor(){let e=tq.Ao.and(tH.u.writable,tq.Ao.not(lv.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){let i=lv.get(t);null==i||i.trigger()}};let JumpToInlineEdit=class JumpToInlineEdit extends tB.R6{constructor(){let e=tq.Ao.and(tH.u.writable,lv.inlineEditVisibleContext,tq.Ao.not(lv.cursorAtInlineEditKey));super({id:"editor.action.inlineEdit.jumpTo",label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:tU.eH.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){let i=lv.get(t);null==i||i.jumpToCurrent()}};let JumpBackInlineEdit=class JumpBackInlineEdit extends tB.R6{constructor(){let e=tq.Ao.and(tH.u.writable,lv.cursorAtInlineEditContext);super({id:"editor.action.inlineEdit.jumpBack",label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:tU.eH.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){let i=lv.get(t);null==i||i.jumpBack()}};let RejectInlineEdit=class RejectInlineEdit extends tB.R6{constructor(){let e=tq.Ao.and(tH.u.writable,lv.inlineEditVisibleContext);super({id:"editor.action.inlineEdit.reject",label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:tU.eH.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){let i=lv.get(t);null==i||i.clear()}};var browser_hoverParticipant_param=function(e,t){return function(i,n){t(i,n,e)}};let InlineEditHover=class InlineEditHover{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}};let lC=class{constructor(e,t,i){this._editor=e,this._instantiationService=t,this._telemetryService=i,this.hoverOrdinal=5}suggestHoverAnchor(e){let t=lv.get(this._editor);if(!t)return null;let i=e.target;if(8===i.type){let n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId)){let t=i.range;return new HoverForeignElementAnchor(1e3,this,t,e.event.posx,e.event.posy,!1)}}if(7===i.type&&t.shouldShowHoverAt(i.range))return new HoverForeignElementAnchor(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){let n=i.detail.mightBeForeignElement;if(n&&t.shouldShowHoverAt(i.range))return new HoverForeignElementAnchor(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("onHover"!==this._editor.getOption(63).showToolbar)return[];let i=lv.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new InlineEditHover(this,e.range,i)]:[]}renderHoverParts(e,t){let i=new t2.SL;this._telemetryService.publicLog2("inlineEditHover.shown");let n=this._instantiationService.createInstance(lf,this._editor,!1,(0,rp.Dz)(null));return e.fragment.appendChild(n.getDomNode()),i.add(n),i}};lC=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([browser_hoverParticipant_param(1,iL.TG),browser_hoverParticipant_param(2,i4.b)],lC),(0,tB.Qr)(AcceptInlineEdit),(0,tB.Qr)(RejectInlineEdit),(0,tB.Qr)(JumpToInlineEdit),(0,tB.Qr)(JumpBackInlineEdit),(0,tB.Qr)(TriggerInlineEdit),(0,tB._K)(lv.ID,lv,3),oj.register(lC);let lb={Visible:new tq.uy("parameterHintsVisible",!1),MultipleSignatures:new tq.uy("parameterHintsMultipleSignatures",!1)};async function provideSignatureHelp(e,t,i,n,o){let r=e.ordered(t);for(let e of r)try{let r=await e.provideSignatureHelp(t,i,o,n);if(r)return r}catch(e){(0,i1.Cp)(e)}}tK.P.registerCommand("_executeSignatureHelpProvider",async(e,...t)=>{let[i,n,o]=t;(0,nR.p_)(ip.o.isUri(i)),(0,nR.p_)(t5.L.isIPosition(n)),(0,nR.p_)("string"==typeof o||!o);let r=e.get(ib.p),s=await e.get(n6.S).createModelReference(i);try{let e=await provideSignatureHelp(r.signatureHelpProvider,s.object.textEditorModel,t5.L.lift(n),{triggerKind:ov.WW.Invoke,isRetrigger:!1,triggerCharacter:o},i0.T.None);if(!e)return;return setTimeout(()=>e.dispose(),0),e.value}finally{s.dispose()}}),function(e){e.Default={type:0};let Pending=class Pending{constructor(e,t){this.request=e,this.previouslyActiveHints=t,this.type=2}};e.Pending=Pending;let Active=class Active{constructor(e){this.hints=e,this.type=1}};e.Active=Active}(eU||(eU={}));let ParameterHintsModel=class ParameterHintsModel extends t2.JT{constructor(e,t,i=ParameterHintsModel.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new iM.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=eU.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new t2.XK),this.triggerChars=new s$.q,this.retriggerChars=new s$.q,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new t1.vp(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(e=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(e=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(e=>this.onCursorChange(e))),this._register(this.editor.onDidChangeModelContent(e=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(e=>this.onDidType(e))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){2===this._state.type&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=eU.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){let i=this.editor.getModel();if(!i||!this.providers.has(i))return;let n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(n),t).catch(i1.dL)}next(){if(1!==this.state.type)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e==e-1,n=this.editor.getOption(86).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?0:t+1)}previous(){if(1!==this.state.type)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=0===t,n=this.editor.getOption(86).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?e-1:t-1)}updateActiveSignature(e){1===this.state.type&&(this.state=new eU.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){let t=1===this.state.type||2===this.state.type,i=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;let n=this._pendingTriggers.reduce(mergeTriggerContexts);this._pendingTriggers=[];let o={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;let r=this.editor.getModel(),s=this.editor.getPosition();this.state=new eU.Pending((0,t1.PG)(e=>provideSignatureHelp(this.providers,r,s,o,e)),i);try{let t=await this.state.request;if(e!==this.triggerId)return null==t||t.dispose(),!1;if(!t||!t.value.signatures||0===t.value.signatures.length)return null==t||t.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1;return this.state=new eU.Active(t.value),this._lastSignatureHelpResult.value=t,this._onChangedHints.fire(this.state.hints),!0}catch(t){return e===this.triggerId&&(this.state=eU.Default),(0,i1.dL)(t),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();let e=this.editor.getModel();if(e)for(let t of this.providers.ordered(e)){for(let e of t.signatureHelpTriggerCharacters||[])if(e.length){let t=e.charCodeAt(0);this.triggerChars.add(t),this.retriggerChars.add(t)}for(let e of t.signatureHelpRetriggerCharacters||[])e.length&&this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;let t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:ov.WW.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:ov.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:ov.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};function mergeTriggerContexts(e,t){switch(t.triggerKind){case ov.WW.Invoke:return t;case ov.WW.ContentChange:return e;case ov.WW.TriggerCharacter:default:return t}}ParameterHintsModel.DEFAULT_DELAY=120,i(16978);var parameterHintsWidget_param=function(e,t){return function(i,n){t(i,n,e)}};let lS=tO.$,ly=(0,n1.q5)("parameter-hints-next",tF.l.chevronDown,tz.NC("parameterHintsNextIcon","Icon for show next parameter hint.")),lw=(0,n1.q5)("parameter-hints-previous",tF.l.chevronUp,tz.NC("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),lL=eK=class extends t2.JT{constructor(e,t,i,n,o){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new t2.SL),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new iB.$({editor:e},o,n)),this.keyVisible=lb.Visible.bindTo(i),this.keyMultipleSignatures=lb.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){let e=lS(".editor-widget.parameter-hints-widget"),t=tO.R3(e,lS(".phwrapper"));t.tabIndex=-1;let i=tO.R3(t,lS(".controls")),n=tO.R3(i,lS(".button"+iw.k.asCSSSelector(lw))),o=tO.R3(i,lS(".overloads")),r=tO.R3(i,lS(".button"+iw.k.asCSSSelector(ly)));this._register(tO.nm(n,"click",e=>{tO.zB.stop(e),this.previous()})),this._register(tO.nm(r,"click",e=>{tO.zB.stop(e),this.next()}));let s=lS(".body"),l=new o4.s$(s,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());let d=tO.R3(s,lS(".signature")),c=tO.R3(s,lS(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:o,docs:c,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(e=>{this.visible&&this.editor.layoutContentWidget(this)}));let updateFont=()=>{if(!this.domNodes)return;let e=this.editor.getOption(50);this.domNodes.element.style.fontSize=`${e.fontSize}px`,this.domNodes.element.style.lineHeight=`${e.lineHeight/e.fontSize}`};updateFont(),this._register(iM.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor),e=>e.filter(e=>e.hasChanged(50)))(updateFont)),this._register(this.editor.onDidLayoutChange(e=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;null===(e=this.domNodes)||void 0===e||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,null===(e=this.domNodes)||void 0===e||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;let i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";let n=e.signatures[e.activeSignature];if(!n)return;let o=tO.R3(this.domNodes.signature,lS(".code")),r=this.editor.getOption(50);o.style.fontSize=`${r.fontSize}px`,o.style.fontFamily=r.fontFamily;let s=n.parameters.length>0,l=null!==(t=n.activeParameter)&&void 0!==t?t:e.activeParameter;if(s)this.renderParameters(o,n,l);else{let e=tO.R3(o,lS("span"));e.textContent=n.label}let d=n.parameters[l];if(null==d?void 0:d.documentation){let e=lS("span.documentation");if("string"==typeof d.documentation)e.textContent=d.documentation;else{let t=this.renderMarkdownDocs(d.documentation);e.appendChild(t.element)}tO.R3(this.domNodes.docs,lS("p",{},e))}if(void 0===n.documentation);else if("string"==typeof n.documentation)tO.R3(this.domNodes.docs,lS("p",{},n.documentation));else{let e=this.renderMarkdownDocs(n.documentation);tO.R3(this.domNodes.docs,e.element)}let c=this.hasDocs(n,d);if(this.domNodes.signature.classList.toggle("has-docs",c),this.domNodes.docs.classList.toggle("empty",!c),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let e="",t=n.parameters[l];e=Array.isArray(t.label)?n.label.substring(t.label[0],t.label[1]):t.label,t.documentation&&(e+="string"==typeof t.documentation?`, ${t.documentation}`:`, ${t.documentation.value}`),n.documentation&&(e+="string"==typeof n.documentation?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==e&&(tQ.Z9(tz.NC("hint","{0}, hint",e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){let t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var e;null===(e=this.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!t&&"string"==typeof t.documentation&&(0,nR.cW)(t.documentation).length>0||!!t&&"object"==typeof t.documentation&&(0,nR.cW)(t.documentation).value.length>0||!!e.documentation&&"string"==typeof e.documentation&&(0,nR.cW)(e.documentation).length>0||!!e.documentation&&"object"==typeof e.documentation&&(0,nR.cW)(e.documentation.value).length>0}renderParameters(e,t,i){let[n,o]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,n);let s=document.createElement("span");s.textContent=t.label.substring(n,o),s.className="parameter active";let l=document.createElement("span");l.textContent=t.label.substring(o),tO.R3(e,r,s,l)}getParameterLabelOffsets(e,t){let i=e.parameters[t];if(!i)return[0,0];if(Array.isArray(i.label))return i.label;if(!i.label.length)return[0,0];{let t=RegExp(`(\\W|^)${(0,iy.ec)(i.label)}(?=\\W|$)`,"g");t.test(e.label);let n=t.lastIndex-i.label.length;return n>=0?[n,t.lastIndex]:[0,0]}}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return eK.ID}updateMaxHeight(){if(!this.domNodes)return;let e=Math.max(this.editor.getLayoutInfo().height/4,250),t=`${e}px`;this.domNodes.element.style.maxHeight=t;let i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};lL.ID="editor.widget.parameterHintsWidget",lL=eK=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([parameterHintsWidget_param(2,tq.i6),parameterHintsWidget_param(3,iW.v),parameterHintsWidget_param(4,n3.O)],lL),(0,t7.P6G)("editorHoverWidget.highlightForeground",{dark:t7.Gwp,light:t7.Gwp,hcDark:t7.Gwp,hcLight:t7.Gwp},tz.NC("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var parameterHints_param=function(e,t){return function(i,n){t(i,n,e)}};let lk=ej=class extends t2.JT{static get(e){return e.getContribution(ej.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new ParameterHintsModel(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(e=>{var t;e?(this.widget.value.show(),this.widget.value.render(e)):null===(t=this.widget.rawValue)||void 0===t||t.hide()})),this.widget=new nn.o(()=>this._register(t.createInstance(lL,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;null===(e=this.widget.rawValue)||void 0===e||e.previous()}next(){var e;null===(e=this.widget.rawValue)||void 0===e||e.next()}trigger(e){this.model.trigger(e,0)}};lk.ID="editor.controller.parameterHints",lk=ej=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([parameterHints_param(1,iL.TG),parameterHints_param(2,ib.p)],lk);let TriggerParameterHintsAction=class TriggerParameterHintsAction extends tB.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:tz.NC("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:tH.u.hasSignatureHelpProvider,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:3082,weight:100}})}run(e,t){let i=lk.get(t);null==i||i.trigger({triggerKind:ov.WW.Invoke})}};(0,tB._K)(lk.ID,lk,2),(0,tB.Qr)(TriggerParameterHintsAction);let lD=tB._l.bindToContribution(lk.get);(0,tB.fK)(new lD({id:"closeParameterHints",precondition:lb.Visible,handler:e=>e.cancel(),kbOpts:{weight:175,kbExpr:tH.u.focus,primary:9,secondary:[1033]}})),(0,tB.fK)(new lD({id:"showPrevParameterHint",precondition:tq.Ao.and(lb.Visible,lb.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:175,kbExpr:tH.u.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,tB.fK)(new lD({id:"showNextParameterHint",precondition:tq.Ao.and(lb.Visible,lb.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:175,kbExpr:tH.u.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var lx=i(39478);i(59295);var renameInputField_param=function(e,t){return function(i,n){t(i,n,e)}};let lN=new tq.uy("renameInputVisible",!1,(0,tz.NC)("renameInputVisible","Whether the rename input widget is visible")),lE=new tq.uy("renameInputFocused",!1,(0,tz.NC)("renameInputFocused","Whether the rename input widget is focused")),lI=class{constructor(e,t,i,n,o,r){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._logService=r,this._disposables=new t2.SL,this.allowEditorOverflow=!0,this._visibleContextKey=lN.bindTo(o),this._focusedContextKey=lE.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,tz.NC)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._disposables.add((0,tO.nm)(this._input,"focus",()=>{this._focusedContextKey.set(!0)})),this._disposables.add((0,tO.nm)(this._input,"blur",()=>{this._focusedContextKey.reset()})),this._domNode.appendChild(this._input),this._candidatesView=this._disposables.add(new CandidatesView(this._domNode,{fontInfo:this._editor.getOption(50),onSelectionChange:()=>this.acceptInput(!1)})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,i,n,o;if(!this._input||!this._domNode)return;let r=e.getColor(t7.rh),s=e.getColor(t7.A42);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(t7.D0T))&&void 0!==t?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.border=s?`1px solid ${s}`:"",this._domNode.style.color=String(null!==(i=e.getColor(t7.zJb))&&void 0!==i?i:""),this._input.style.backgroundColor=String(null!==(n=e.getColor(t7.sEe))&&void 0!==n?n:"");let l=e.getColor(t7.dt_);this._input.style.borderWidth=l?"1px":"0px",this._input.style.borderStyle=l?"solid":"none",this._input.style.borderColor=null!==(o=null==l?void 0:l.toString())&&void 0!==o?o:"none"}_updateFont(){if(!this._input||!this._label||!this._candidatesView)return;let e=this._editor.getOption(50);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._candidatesView.updateFont(e),this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return .8*e}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;let e=(0,tO.D6)(this.getDomNode().ownerDocument.body),t=(0,tO.i)(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;let n=this._editor.getOption(67),{totalHeight:o}=CandidateView.getLayoutInfo({lineHeight:n}),r=this._nPxAvailableBelow>6*o?[2,1]:[1,2];return{position:this._position,preference:r}}beforeRender(){var e,t;let[i,n]=this._acceptKeybindings;return this._label.innerText=(0,tz.NC)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(n))||void 0===t?void 0:t.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){let t;if(this._trace("invoking afterRender, position: ",e?"not null":"null"),null===e){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;(0,nR.p_)(this._candidatesView),(0,nR.p_)(void 0!==this._nPxAvailableAbove),(0,nR.p_)(void 0!==this._nPxAvailableBelow);let i=(0,tO.wn)(this._input),n=(0,tO.wn)(this._label);t=2===e?this._nPxAvailableBelow:this._nPxAvailableAbove,this._candidatesView.layout({height:t-n-i,width:(0,tO.w)(this._input)})}acceptInput(e){var t;this._trace("invoking acceptInput"),null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}cancelInput(e,t){var i;this._trace(`invoking cancelInput, caller: ${t}, _currentCancelInput: ${this._currentAcceptInput?"not undefined":"undefined"}`),null===(i=this._currentCancelInput)||void 0===i||i.call(this,e)}focusNextRenameSuggestion(){var e;null===(e=this._candidatesView)||void 0===e||e.focusNext()}focusPreviousRenameSuggestion(){var e;(null===(e=this._candidatesView)||void 0===e?void 0:e.focusPrevious())||this._input.focus()}getInput(e,t,i,n,o,r,s){this._domNode.classList.toggle("preview",o),this._position=new t5.L(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",n.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);let l=new t2.SL;return l.add((0,t2.OF)(()=>s.dispose(!0))),this._updateRenameCandidates(r,t,s.token),new Promise(e=>{this._currentCancelInput=t=>{var i;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,null===(i=this._candidatesView)||void 0===i||i.clearCandidates(),e(t),!0},this._currentAcceptInput=i=>{let n,r;this._trace("invoking _currentAcceptInput"),(0,nR.p_)(void 0!==this._input),(0,nR.p_)(void 0!==this._candidatesView);let s=this._candidatesView.nCandidates,l=this._candidatesView.focusedCandidate;if(void 0!==l?(this._trace("using new name from renameSuggestion"),n=l,r="renameSuggestion"):(this._trace("using new name from inputField"),n=this._input.value,r="inputField"),n===t||0===n.trim().length){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._candidatesView.clearCandidates(),e({newName:n,wantsPreview:o&&i,source:r,nRenameSuggestions:s})},l.add(s.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),l.add(this._editor.onDidBlurEditorWidget(()=>{var e;return this.cancelInput(!(null===(e=this._domNode)||void 0===e?void 0:e.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show()}).finally(()=>{l.dispose(),this._hide()})}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){let trace=(...e)=>this._trace("_updateRenameCandidates",...e);trace("start");let n=await (0,t1.eP)(Promise.allSettled(e),i);if(void 0===n){trace("returning early - received updateRenameCandidates results - undefined");return}let o=n.flatMap(e=>"fulfilled"===e.status&&(0,nR.$K)(e.value)?e.value:[]);trace(`received updateRenameCandidates results - total (unfiltered) ${o.length} candidates.`);let r=ia.EB(o,e=>e.newSymbolName);trace(`distinct candidates - ${r.length} candidates.`);let s=r.filter(({newSymbolName:e})=>{var i;return e.trim().length>0&&e!==(null===(i=this._input)||void 0===i?void 0:i.value)&&e!==t});if(trace(`valid distinct candidates - ${o.length} candidates.`),s.length<1){trace("returning early - no valid distinct candidates");return}trace("setting candidates"),this._candidatesView.setCandidates(s),trace("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){let e;let t=this._editor.getVisibleRanges();return t.length>0?e=t[0].startLineNumber:(this._logService.warn("RenameInputField#_getTopForPosition: this should not happen - visibleRanges is empty"),e=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(e)}_trace(...e){this._logService.trace("RenameInputField",...e)}};lI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([renameInputField_param(2,t9.XE),renameInputField_param(3,iA.d),renameInputField_param(4,tq.i6),renameInputField_param(5,am.VZ)],lI);let CandidatesView=class CandidatesView{constructor(e,t){this._disposables=new t2.SL,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.style.fontFamily=t.fontInfo.fontFamily,this._listContainer.style.fontWeight=t.fontInfo.fontWeight,this._listContainer.style.fontSize=`${t.fontInfo.fontSize}px`,e.appendChild(this._listContainer);let i=this,n=new class{getTemplateId(e){return"candidate"}getHeight(e){return i._candidateViewHeight}},o=new class{constructor(){this.templateId="candidate"}renderTemplate(e){return new CandidateView(e,{lineHeight:i._lineHeight})}renderElement(e,t,i){i.model=e}disposeTemplate(e){e.dispose()}};this._listWidget=new nu.aV("NewSymbolNameCandidates",this._listContainer,n,[o],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1}),this._disposables.add(this._listWidget.onDidChangeSelection(e=>{e.elements.length>0&&t.onSelectionChange()})),this._disposables.add(this._listWidget.onDidBlur(e=>{this._listWidget.setFocus([])})),this._listWidget.style(ng.O2)}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);let t=this._pickListHeight(e.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,tQ.i7((0,tz.NC)("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(0===this._listWidget.length)return;let e=this._listWidget.getSelectedElements()[0];if(void 0!==e)return e.newSymbolName;let t=this._listWidget.getFocusedElements()[0];if(void 0!==t)return t.newSymbolName}updateFont(e){this._listContainer.style.fontFamily=e.fontFamily,this._listContainer.style.fontWeight=e.fontWeight,this._listContainer.style.fontSize=`${e.fontSize}px`,this._lineHeight=e.lineHeight,this._listWidget.rerender()}focusNext(){0!==this._listWidget.length&&(this._listWidget.isDOMFocused()?this._listWidget.focusNext():(this._listWidget.domFocus(),this._listWidget.focusFirst()),this._listWidget.reveal(this._listWidget.getFocus()[0]))}focusPrevious(){if(0===this._listWidget.length)return!1;this._listWidget.domFocus();let e=this._listWidget.getFocus()[0];return 0!==e&&(this._listWidget.focusPrevious(),this._listWidget.reveal(this._listWidget.getFocus()[0])),e>0}get _candidateViewHeight(){let{totalHeight:e}=CandidateView.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){let t=this._candidateViewHeight*e,i=Math.min(t,this._availableHeight,7*this._candidateViewHeight);return i}_pickListWidth(e){let t=Math.ceil(Math.max(...e.map(e=>e.newSymbolName.length))*this._typicalHalfwidthCharacterWidth),i=Math.max(this._minimumWidth,25+t+10);return i}};let CandidateView=class CandidateView{constructor(e,{lineHeight:t}){this.domNode=document.createElement("div"),this.domNode.style.display="flex",this.domNode.style.alignItems="center",this.domNode.style.height=`${t}px`,this.domNode.style.padding=`${CandidateView._PADDING}px`,this._icon=document.createElement("div"),this._icon.style.display="flex",this._icon.style.alignItems="center",this._icon.style.width=this._icon.style.height=`${.8*t}px`,this.domNode.appendChild(this._icon),this._label=document.createElement("div"),this._icon.style.display="flex",this._icon.style.alignItems="center",this._label.style.marginLeft="5px",this.domNode.appendChild(this._label),e.appendChild(this.domNode)}set model(e){0===this._icon.children.length&&this._icon.appendChild((0,nW.h)(tF.l.sparkle)),this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){let t=e+2*CandidateView._PADDING;return{totalHeight:t}}dispose(){}};CandidateView._PADDING=2;var rename_param=function(e,t){return function(i,n){t(i,n,e)}};let RenameSkeleton=class RenameSkeleton{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){let t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){let i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;let n=await i.resolveRenameLocation(this.model,this.position,e);if(n){if(n.rejectReason){t.push(n.rejectReason);continue}return n}}this._providerRenameIdx=0;let i=this.model.getWordAtPosition(this.position);return i?{range:new t4.e(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:t4.e.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,n){let o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join("\n")};let r=await o.provideRenameEdits(this.model,this.position,e,n);return r?r.rejectReason?this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n):r:this._provideRenameEdits(e,t+1,i.concat(tz.NC("no result","No result.")),n)}};async function rename(e,t,i,n){let o=new RenameSkeleton(t,i,e),r=await o.resolveRenameLocation(i0.T.None);return(null==r?void 0:r.rejectReason)?{edits:[],rejectReason:r.rejectReason}:o.provideRenameEdits(n,i0.T.None)}let lT=eq=class{static get(e){return e.getContribution(eq.ID)}constructor(e,t,i,n,o,r,s,l,d){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=o,this._logService=r,this._configService=s,this._languageFeaturesService=l,this._telemetryService=d,this._disposableStore=new t2.SL,this._cts=new i0.A,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(lI,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var e,t;let i;let n=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new i0.A,!this.editor.hasModel()){n("editor has no model");return}let o=this.editor.getPosition(),r=new RenameSkeleton(this.editor.getModel(),o,this._languageFeaturesService.renameProvider);if(!r.hasProvider()){n("skeleton has no provider");return}let s=new iS.Dl(this.editor,5,void 0,this._cts.token);try{n("resolving rename location");let e=r.resolveRenameLocation(s.token);this._progressService.showWhile(e,250),i=await e,n("resolved rename location")}catch(t){n("resolve rename location failed",JSON.stringify(t,null,"	")),null===(e=iV.get(this.editor))||void 0===e||e.showMessage(t||tz.NC("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),o);return}finally{s.dispose()}if(!i){n("returning early - no loc");return}if(i.rejectReason){n(`returning early - rejected with reason: ${i.rejectReason}`,i.rejectReason),null===(t=iV.get(this.editor))||void 0===t||t.showMessage(i.rejectReason,o);return}if(s.token.isCancellationRequested){n("returning early - cts1 cancelled");return}let l=new iS.Dl(this.editor,5,i.range,this._cts.token),d=this.editor.getModel(),c=new i0.A(l.token),u=this._languageFeaturesService.newSymbolNamesProvider.all(d),g=u.map(e=>e.provideNewSymbolNames(d,i.range,c.token));n(`requested new symbol names from ${u.length} providers`);let m=this.editor.getSelection(),f=0,_=i.text.length;!t4.e.isEmpty(m)&&!t4.e.spansMultipleLines(m)&&t4.e.containsRange(i.range,m)&&(f=Math.max(0,m.startColumn-i.range.startColumn),_=Math.min(i.range.endColumn,m.endColumn)-i.range.startColumn),n("creating rename input field and awaiting its result");let v=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),C=await this._renameInputField.getInput(i.range,i.text,f,_,v,g,c);if(n("received response from rename input field"),u.length>0&&this._reportTelemetry(u.length,d.getLanguageId(),C),"boolean"==typeof C){n(`returning early - rename input field response - ${C}`),C&&this.editor.focus(),l.dispose();return}this.editor.focus(),n("requesting rename edits");let b=(0,t1.eP)(r.provideRenameEdits(C.newName,l.token),l.token).then(async e=>{if(!e){n("returning early - no rename edits result");return}if(!this.editor.hasModel()){n("returning early - no model after rename edits are provided");return}if(e.rejectReason){n(`returning early - rejected with reason: ${e.rejectReason}`),this._notificationService.info(e.rejectReason);return}this.editor.setSelection(t4.e.fromPositions(this.editor.getSelection().getPosition())),n("applying edits"),this._bulkEditService.apply(e,{editor:this.editor,showPreview:C.wantsPreview,label:tz.NC("label","Renaming '{0}' to '{1}'",null==i?void 0:i.text,C.newName),code:"undoredo.rename",quotableLabel:tz.NC("quotableLabel","Renaming {0} to {1}",null==i?void 0:i.text,C.newName),respectAutoSaveConfig:!0}).then(e=>{n("edits applied"),e.ariaSummary&&(0,tQ.Z9)(tz.NC("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",i.text,C.newName,e.ariaSummary))}).catch(e=>{n(`error when applying edits ${JSON.stringify(e,null,"	")}`),this._notificationService.error(tz.NC("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)})},e=>{n("error when providing rename edits",JSON.stringify(e,null,"	")),this._notificationService.error(tz.NC("rename.failed","Rename failed to compute edits")),this._logService.error(e)}).finally(()=>{l.dispose()});return n("returning rename operation"),this._progressService.showWhile(b,250),b}acceptRenameInput(e){this._renameInputField.acceptInput(e)}cancelRenameInput(){this._renameInputField.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameInputField.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameInputField.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){let n="boolean"==typeof i?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.source,nRenameSuggestions:i.nRenameSuggestions,wantsPreview:i.wantsPreview};this._telemetryService.publicLog2("renameInvokedEvent",n)}};lT.ID="editor.contrib.renameController",lT=eq=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([rename_param(1,iL.TG),rename_param(2,i5.lT),rename_param(3,iC.vu),rename_param(4,iN.ek),rename_param(5,am.VZ),rename_param(6,lx.V),rename_param(7,ib.p),rename_param(8,i4.b)],lT);let RenameAction=class RenameAction extends tB.R6{constructor(){super({id:"editor.action.rename",label:tz.NC("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:tq.Ao.and(tH.u.writable,tH.u.hasRenameProvider),kbOpts:{kbExpr:tH.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){let i=e.get(tW.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return ip.o.isUri(n)&&t5.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(e=>{e&&(e.setPosition(o),e.invokeWithinContext(t=>(this.reportTelemetry(t,e),this.run(t,e))))},i1.dL):super.runCommand(e,t)}run(e,t){let i=e.get(am.VZ),n=lT.get(t);return n?(i.trace("[RenameAction] got controller, running..."),n.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}};(0,tB._K)(lT.ID,lT,4),(0,tB.Qr)(RenameAction);let lM=tB._l.bindToContribution(lT.get);(0,tB.fK)(new lM({id:"acceptRenameInput",precondition:lN,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:tq.Ao.and(tH.u.focus,tq.Ao.not("isComposing")),primary:3}})),(0,tB.fK)(new lM({id:"acceptRenameInputWithPreview",precondition:tq.Ao.and(lN,tq.Ao.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:tq.Ao.and(tH.u.focus,tq.Ao.not("isComposing")),primary:1027}})),(0,tB.fK)(new lM({id:"cancelRenameInput",precondition:lN,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:tH.u.focus,primary:9,secondary:[1033]}})),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:"focusNextRenameSuggestion",title:{...tz.vv("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:lN,keybinding:[{primary:2,secondary:[18],weight:199}]})}run(e){let t=e.get(tW.$).getFocusedCodeEditor();if(!t)return;let i=lT.get(t);i&&i.focusNextRenameSuggestion()}}),(0,tU.r1)(class extends tU.Ke{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...tz.vv("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:lN,keybinding:[{when:lE,primary:6,weight:199},{when:lE.toNegated(),primary:1026,secondary:[16],weight:199}]})}run(e){let t=e.get(tW.$).getFocusedCodeEditor();if(!t)return;let i=lT.get(t);i&&i.focusPreviousRenameSuggestion()}}),(0,tB.sb)("_executeDocumentRenameProvider",function(e,t,i,...n){let[o]=n;(0,nR.p_)("string"==typeof o);let{renameProvider:r}=e.get(ib.p);return rename(r,t,i,o)}),(0,tB.sb)("_executePrepareRename",async function(e,t,i){let{renameProvider:n}=e.get(ib.p),o=new RenameSkeleton(t,i,n),r=await o.resolveRenameLocation(i0.T.None);if(null==r?void 0:r.rejectReason)throw Error(r.rejectReason);return r}),im.B.as(nT.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:tz.NC("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var lR=i(19442),lA=i(73126);function reverseEndianness(e){for(let t=0,i=e.length;t<i;t+=4){let i=e[t+0],n=e[t+1],o=e[t+2],r=e[t+3];e[t+0]=r,e[t+1]=o,e[t+2]=n,e[t+3]=i}}function toLittleEndianBuffer(e){let t=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return io.r()||reverseEndianness(t),lA.KN.wrap(t)}function encodeSemanticTokensDto(e){let t=new Uint32Array(encodeSemanticTokensDtoSize(e)),i=0;if(t[i++]=e.id,"full"===e.type)t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else for(let n of(t[i++]=2,t[i++]=e.deltas.length,e.deltas))t[i++]=n.start,t[i++]=n.deleteCount,n.data?(t[i++]=n.data.length,t.set(n.data,i),i+=n.data.length):t[i++]=0;return toLittleEndianBuffer(t)}function encodeSemanticTokensDtoSize(e){let t;if(t=2,"full"===e.type)t+=1+e.data.length;else for(let i of(t+=1+3*e.deltas.length,e.deltas))i.data&&(t+=i.data.length);return t}function isSemanticTokens(e){return e&&!!e.data}function isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}let DocumentSemanticTokensResult=class DocumentSemanticTokensResult{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}};function getDocumentSemanticTokensProviders(e,t){let i=e.orderedGroups(t);return i.length>0?i[0]:[]}async function getDocumentSemanticTokens(e,t,i,n,o){let r=getDocumentSemanticTokensProviders(e,t),s=await Promise.all(r.map(async e=>{let r;let s=null;try{r=await e.provideDocumentSemanticTokens(t,e===i?n:null,o)}catch(e){s=e,r=null}return r&&(isSemanticTokens(r)||isSemanticTokensEdits(r))||(r=null),new DocumentSemanticTokensResult(e,r,s)}));for(let e of s){if(e.error)throw e.error;if(e.tokens)return e}return s.length>0?s[0]:null}function _getDocumentSemanticTokensProviderHighestGroup(e,t){let i=e.orderedGroups(t);return i.length>0?i[0]:null}let DocumentRangeSemanticTokensResult=class DocumentRangeSemanticTokensResult{constructor(e,t){this.provider=e,this.tokens=t}};function hasDocumentRangeSemanticTokensProvider(e,t){return e.has(t)}function getDocumentRangeSemanticTokensProviders(e,t){let i=e.orderedGroups(t);return i.length>0?i[0]:[]}async function getDocumentRangeSemanticTokens(e,t,i,n){let o=getDocumentRangeSemanticTokensProviders(e,t),r=await Promise.all(o.map(async e=>{let o;try{o=await e.provideDocumentRangeSemanticTokens(t,i,n)}catch(e){(0,i1.Cp)(e),o=null}return o&&isSemanticTokens(o)||(o=null),new DocumentRangeSemanticTokensResult(e,o)}));for(let e of r)if(e.tokens)return e;return r.length>0?r[0]:null}tK.P.registerCommand("_provideDocumentSemanticTokensLegend",async(e,...t)=>{let[i]=t;(0,nR.p_)(i instanceof ip.o);let n=e.get(i2.q).getModel(i);if(!n)return;let{documentSemanticTokensProvider:o}=e.get(ib.p),r=_getDocumentSemanticTokensProviderHighestGroup(o,n);return r?r[0].getLegend():e.get(tK.H).executeCommand("_provideDocumentRangeSemanticTokensLegend",i)}),tK.P.registerCommand("_provideDocumentSemanticTokens",async(e,...t)=>{let[i]=t;(0,nR.p_)(i instanceof ip.o);let n=e.get(i2.q).getModel(i);if(!n)return;let{documentSemanticTokensProvider:o}=e.get(ib.p);if(!o.has(n))return e.get(tK.H).executeCommand("_provideDocumentRangeSemanticTokens",i,n.getFullModelRange());let r=await getDocumentSemanticTokens(o,n,null,null,i0.T.None);if(!r)return;let{provider:s,tokens:l}=r;if(!l||!isSemanticTokens(l))return;let d=encodeSemanticTokensDto({id:0,type:"full",data:l.data});return l.resultId&&s.releaseDocumentSemanticTokens(l.resultId),d}),tK.P.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(e,...t)=>{let[i,n]=t;(0,nR.p_)(i instanceof ip.o);let o=e.get(i2.q).getModel(i);if(!o)return;let{documentRangeSemanticTokensProvider:r}=e.get(ib.p),s=getDocumentRangeSemanticTokensProviders(r,o);if(0===s.length)return;if(1===s.length)return s[0].getLegend();if(!n||!t4.e.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),s[0].getLegend();let l=await getDocumentRangeSemanticTokens(r,o,t4.e.lift(n),i0.T.None);if(l)return l.provider.getLegend()}),tK.P.registerCommand("_provideDocumentRangeSemanticTokens",async(e,...t)=>{let[i,n]=t;(0,nR.p_)(i instanceof ip.o),(0,nR.p_)(t4.e.isIRange(n));let o=e.get(i2.q).getModel(i);if(!o)return;let{documentRangeSemanticTokensProvider:r}=e.get(ib.p),s=await getDocumentRangeSemanticTokens(r,o,t4.e.lift(n),i0.T.None);if(s&&s.tokens)return encodeSemanticTokensDto({id:0,type:"full",data:s.tokens.data})});var lP=i(37506);let lO="editor.semanticHighlighting";function isSemanticColoringEnabled(e,t,i){var n;let o=null===(n=i.getValue(lO,{overrideIdentifier:e.getLanguageId(),resource:e.uri}))||void 0===n?void 0:n.enabled;return"boolean"==typeof o?o:t.getColorTheme().semanticHighlighting}var documentSemanticTokens_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},documentSemanticTokens_param=function(e,t){return function(i,n){t(i,n,e)}};let lF=class extends t2.JT{constructor(e,t,i,n,o,r){super(),this._watchers=Object.create(null);let register=t=>{this._watchers[t.uri.toString()]=new lB(t,e,i,o,r)},deregister=(e,t)=>{t.dispose(),delete this._watchers[e.uri.toString()]},handleSettingOrThemeChange=()=>{for(let e of t.getModels()){let t=this._watchers[e.uri.toString()];isSemanticColoringEnabled(e,i,n)?t||register(e):t&&deregister(e,t)}};t.getModels().forEach(e=>{isSemanticColoringEnabled(e,i,n)&&register(e)}),this._register(t.onModelAdded(e=>{isSemanticColoringEnabled(e,i,n)&&register(e)})),this._register(t.onModelRemoved(e=>{let t=this._watchers[e.uri.toString()];t&&deregister(e,t)})),this._register(n.onDidChangeConfiguration(e=>{e.affectsConfiguration(lO)&&handleSettingOrThemeChange()})),this._register(i.onDidColorThemeChange(handleSettingOrThemeChange))}dispose(){for(let e of Object.values(this._watchers))e.dispose();super.dispose()}};lF=documentSemanticTokens_decorate([documentSemanticTokens_param(0,lP.s),documentSemanticTokens_param(1,i2.q),documentSemanticTokens_param(2,t9.XE),documentSemanticTokens_param(3,tj.Ui),documentSemanticTokens_param(4,nH.A),documentSemanticTokens_param(5,ib.p)],lF);let lB=e$=class extends t2.JT{constructor(e,t,i,n,o){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=n.for(this._provider,"DocumentSemanticTokens",{min:e$.REQUEST_MIN_DELAY,max:e$.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new t1.pY(()=>this._fetchDocumentSemanticTokensNow(),e$.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let bindDocumentChangeListeners=()=>{for(let t of((0,t2.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._provider.all(e)))"function"==typeof t.onDidChange&&this._documentProvidersChangeListeners.push(t.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};bindDocumentChangeListeners(),this._register(this._provider.onDidChange(()=>{bindDocumentChangeListeners(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(e=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),(0,t2.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){var e,t;if(this._currentDocumentRequestCancellationTokenSource)return;if(e=this._provider,t=this._model,!e.has(t)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;let i=new i0.A,n=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,o=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=getDocumentSemanticTokens(this._provider,this._model,n,o,i.token);this._currentDocumentRequestCancellationTokenSource=i,this._providersChangedDuringRequest=!1;let s=[],l=this._model.onDidChangeContent(e=>{s.push(e)}),d=new nK.G(!1);r.then(e=>{if(this._debounceInformation.update(this._model,d.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,l.dispose(),e){let{provider:t,tokens:i}=e,n=this._semanticTokensStylingService.getStyling(t);this._setDocumentSemanticTokens(t,i||null,n,s)}else this._setDocumentSemanticTokens(null,null,null,s)},e=>{let t=e&&(i1.n2(e)||"string"==typeof e.message&&-1!==e.message.indexOf("busy"));t||i1.dL(e),this._currentDocumentRequestCancellationTokenSource=null,l.dispose(),(s.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})}static _copy(e,t,i,n,o){o=Math.min(o,i.length-n,e.length-t);for(let r=0;r<o;r++)i[n+r]=e[t+r]}_setDocumentSemanticTokens(e,t,i,n){let o=this._currentDocumentResponse,rescheduleIfNeeded=()=>{(n.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),rescheduleIfNeeded();return}if(isSemanticTokensEdits(t)){if(!o){this._model.tokenization.setSemanticTokens(null,!0);return}if(0===t.edits.length)t={resultId:t.resultId,data:o.data};else{let e=0;for(let i of t.edits)e+=(i.data?i.data.length:0)-i.deleteCount;let n=o.data,r=new Uint32Array(n.length+e),s=n.length,l=r.length;for(let e=t.edits.length-1;e>=0;e--){let d=t.edits[e];if(d.start>n.length){i.warnInvalidEditStart(o.resultId,t.resultId,e,d.start,n.length),this._model.tokenization.setSemanticTokens(null,!0);return}let c=s-(d.start+d.deleteCount);c>0&&(e$._copy(n,s-c,r,l-c,c),l-=c),d.data&&(e$._copy(d.data,0,r,l-d.data.length,d.data.length),l-=d.data.length),s=d.start}s>0&&e$._copy(n,0,r,0,s),t={resultId:t.resultId,data:r}}}if(isSemanticTokens(t)){this._currentDocumentResponse=new SemanticTokensResponse(e,t.resultId,t.data);let o=(0,lR.h)(t,i,this._model.getLanguageId());if(n.length>0)for(let e of n)for(let t of o)for(let i of e.changes)t.applyEdit(i.range,i.text);this._model.tokenization.setSemanticTokens(o,!0)}else this._model.tokenization.setSemanticTokens(null,!0);rescheduleIfNeeded()}};lB.REQUEST_MIN_DELAY=300,lB.REQUEST_MAX_DELAY=2e3,lB=e$=documentSemanticTokens_decorate([documentSemanticTokens_param(1,lP.s),documentSemanticTokens_param(2,t9.XE),documentSemanticTokens_param(3,nH.A),documentSemanticTokens_param(4,ib.p)],lB);let SemanticTokensResponse=class SemanticTokensResponse{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}};(0,nG.y)(lF);var viewportSemanticTokens_param=function(e,t){return function(i,n){t(i,n,e)}};let lW=class extends t2.JT{constructor(e,t,i,n,o,r){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=n,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new t1.pY(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];let scheduleTokenizeViewport=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{scheduleTokenizeViewport()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),scheduleTokenizeViewport()})),this._register(this._editor.onDidChangeModelContent(e=>{this._cancelAll(),scheduleTokenizeViewport()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),scheduleTokenizeViewport()})),this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(lO)&&(this._cancelAll(),scheduleTokenizeViewport())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),scheduleTokenizeViewport()})),scheduleTokenizeViewport()}_cancelAll(){for(let e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;let e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!isSemanticColoringEnabled(e,this._themeService,this._configurationService)||!hasDocumentRangeSemanticTokensProvider(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}let t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(t=>this._requestRange(e,t)))}_requestRange(e,t){let i=e.getVersionId(),n=(0,t1.PG)(i=>Promise.resolve(getDocumentRangeSemanticTokens(this._provider,e,t,i))),o=new nK.G(!1);return n.then(n=>{if(this._debounceInformation.update(e,o.elapsed()),!n||!n.tokens||e.isDisposed()||e.getVersionId()!==i)return;let{provider:r,tokens:s}=n,l=this._semanticTokensStylingService.getStyling(r);e.tokenization.setPartialSemanticTokens(t,(0,lR.h)(s,l,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(n),()=>this._removeOutstandingRequest(n)),n}};lW.ID="editor.contrib.viewportSemanticTokens",lW=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([viewportSemanticTokens_param(1,lP.s),viewportSemanticTokens_param(2,t9.XE),viewportSemanticTokens_param(3,tj.Ui),viewportSemanticTokens_param(4,nH.A),viewportSemanticTokens_param(5,ib.p)],lW),(0,tB._K)(lW.ID,lW,1);let WordSelectionRangeProvider=class WordSelectionRangeProvider{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){let i=[];for(let n of t){let t=[];i.push(t),this.selectSubwords&&this._addInWordRanges(t,e,n),this._addWordRanges(t,e,n),this._addWhitespaceLine(t,e,n),t.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){let n=t.getWordAtPosition(i);if(!n)return;let{word:o,startColumn:r}=n,s=i.column-r,l=s,d=s,c=0;for(;l>=0;l--){let e=o.charCodeAt(l);if(l!==s&&(95===e||45===e)||(0,iy.mK)(e)&&(0,iy.df)(c))break;c=e}for(l+=1;d<o.length;d++){let e=o.charCodeAt(d);if((0,iy.df)(e)&&(0,iy.mK)(c)||95===e||45===e)break;c=e}l<d&&e.push({range:new t4.e(i.lineNumber,r+l,i.lineNumber,r+d)})}_addWordRanges(e,t,i){let n=t.getWordAtPosition(i);n&&e.push({range:new t4.e(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(i.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(i.lineNumber)&&e.push({range:new t4.e(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}};let SelectionRanges=class SelectionRanges{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;let i=new SelectionRanges(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}};let lV=eG=class{static get(e){return e.getContribution(eG.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}async run(e){if(!this._editor.hasModel())return;let t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider,i,t.map(e=>e.getPosition()),this._editor.getOption(113),i0.T.None).then(e=>{var i;if(ia.Of(e)&&e.length===t.length&&this._editor.hasModel()&&ia.fS(this._editor.getSelections(),t,(e,t)=>e.equalsSelection(t))){for(let i=0;i<e.length;i++)e[i]=e[i].filter(e=>e.containsPosition(t[i].getStartPosition())&&e.containsPosition(t[i].getEndPosition())),e[i].unshift(t[i]);this._state=e.map(e=>new SelectionRanges(0,e)),null===(i=this._selectionListener)||void 0===i||i.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var e;this._ignoreSelection||(null===(e=this._selectionListener)||void 0===e||e.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(t=>t.mov(e));let n=this._state.map(e=>tJ.Y.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(n)}finally{this._ignoreSelection=!1}}};lV.ID="editor.contrib.smartSelectController",lV=eG=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(R=ib.p,function(e,t){R(e,t,1)})],lV);let AbstractSmartSelect=class AbstractSmartSelect extends tB.R6{constructor(e,t){super(t),this._forward=e}async run(e,t){let i=lV.get(t);i&&await i.run(this._forward)}};let GrowSelectionAction=class GrowSelectionAction extends AbstractSmartSelect{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:tz.NC("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"1_basic",title:tz.NC({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}};tK.P.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");let ShrinkSelectionAction=class ShrinkSelectionAction extends AbstractSmartSelect{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:tz.NC("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:tU.eH.MenubarSelectionMenu,group:"1_basic",title:tz.NC({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}};async function provideSelectionRanges(e,t,i,n,o){let r=e.all(t).concat(new WordSelectionRangeProvider(n.selectSubwords));1===r.length&&r.unshift(new BracketSelectionRangeProvider);let s=[],l=[];for(let e of r)s.push(Promise.resolve(e.provideSelectionRanges(t,i,o)).then(e=>{if(ia.Of(e)&&e.length===i.length)for(let t=0;t<i.length;t++)for(let n of(l[t]||(l[t]=[]),e[t]))t4.e.isIRange(n.range)&&t4.e.containsPosition(n.range,i[t])&&l[t].push(t4.e.lift(n.range))},i1.Cp));return await Promise.all(s),l.map(e=>{let i;if(0===e.length)return[];e.sort((e,t)=>t5.L.isBefore(e.getStartPosition(),t.getStartPosition())?1:t5.L.isBefore(t.getStartPosition(),e.getStartPosition())?-1:t5.L.isBefore(e.getEndPosition(),t.getEndPosition())?-1:t5.L.isBefore(t.getEndPosition(),e.getEndPosition())?1:0);let o=[];for(let t of e)(!i||t4.e.containsRange(t,i)&&!t4.e.equalsRange(t,i))&&(o.push(t),i=t);if(!n.selectLeadingAndTrailingWhitespace)return o;let r=[o[0]];for(let e=1;e<o.length;e++){let i=o[e-1],n=o[e];if(n.startLineNumber!==i.startLineNumber||n.endLineNumber!==i.endLineNumber){let e=new t4.e(i.startLineNumber,t.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,t.getLineLastNonWhitespaceColumn(i.endLineNumber));e.containsRange(i)&&!e.equalsRange(i)&&n.containsRange(e)&&!n.equalsRange(e)&&r.push(e);let o=new t4.e(i.startLineNumber,1,i.endLineNumber,t.getLineMaxColumn(i.endLineNumber));o.containsRange(i)&&!o.equalsRange(e)&&n.containsRange(o)&&!n.equalsRange(o)&&r.push(o)}r.push(n)}return r})}(0,tB._K)(lV.ID,lV,4),(0,tB.Qr)(GrowSelectionAction),(0,tB.Qr)(ShrinkSelectionAction),tK.P.registerCommand("_executeSelectionRangeProvider",async function(e,...t){let[i,n]=t;(0,nR.p_)(ip.o.isUri(i));let o=e.get(ib.p).selectionRangeProvider,r=await e.get(n6.S).createModelReference(i);try{return provideSelectionRanges(o,r.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},i0.T.None)}finally{r.dispose()}});let lH=Object.freeze({View:(0,tz.vv)("view","View"),Help:(0,tz.vv)("help","Help"),Test:(0,tz.vv)("test","Test"),File:(0,tz.vv)("file","File"),Preferences:(0,tz.vv)("preferences","Preferences"),Developer:(0,tz.vv)({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});i(38815);var lz=i(65982);let StickyScrollWidgetState=class StickyScrollWidgetState{constructor(e,t,i,n=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=n}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&(0,ia.fS)(this.startLineNumbers,e.startLineNumbers)&&(0,ia.fS)(this.endLineNumbers,e.endLineNumbers)}};let lU=(0,s4.Z)("stickyScrollViewLayer",{createHTML:e=>e}),lK="data-sticky-line-index",lj="data-sticky-is-line",lq="data-sticky-is-folding-icon";let StickyScrollWidget=class StickyScrollWidget extends t2.JT{constructor(e){super(),this._editor=e,this._foldingIconStore=new t2.SL,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof n8),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);let updateScrollLeftPosition=()=>{this._linesDomNode.style.left=this._editor.getOption(115).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(115)&&updateScrollLeftPosition(),e.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(e=>{e.scrollLeftChanged&&updateScrollLeftPosition(),e.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{updateScrollLeftPosition(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),updateScrollLeftPosition(),this._register(this._editor.onDidLayoutChange(e=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(void 0===i&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;let n=this._isWidgetHeightZero(e),o=n?void 0:e,r=n?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(o,t,r),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;let t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;let t=[...e.startLineNumbers];null!==e.showEndForLine&&(t[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=t}else this._lastLineRelativePosition=0,this._lineNumbers=[];return 0===t}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(void 0!==t)return t;let i=this._previousState,n=e.startLineNumbers.findIndex(e=>!i.startLineNumbers.includes(e));return -1===n?0:n}_updateWidgetWidth(){let e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){let e=this._renderedStickyLines[t];e.lineNumberDomNode.remove(),e.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(let t of this._renderedStickyLines){let i=t.foldingIcon;i&&i.setVisible(!!e||i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(let e of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(e);let n=this._editor.getLayoutInfo(),o=this._lineNumbers.slice(i);for(let[e,r]of o.entries()){let o=this._renderChildNode(e+i,r,t,n);o&&(this._linesDomNode.appendChild(o.lineDomNode),this._lineNumbersDomNode.appendChild(o.lineNumberDomNode),this._renderedStickyLines.push(o))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));let r=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${r}px`,this._linesDomNodeScrollable.style.height=`${r}px`,this._rootDomNode.style.height=`${r}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(e=>e.scrollWidth))+n.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){let e=this._editor.getOption(110);"mouseover"===e&&(this._foldingIconStore.add(tO.nm(this._lineNumbersDomNode,tO.tw.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(tO.nm(this._lineNumbersDomNode,tO.tw.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,n){let o,r;let s=this._editor._getViewModel();if(!s)return;let l=s.coordinatesConverter.convertModelPositionToViewPosition(new t5.L(t,1)).lineNumber,d=s.getViewLineRenderingData(l),c=this._editor.getOption(68);try{o=s9.Kp.filter(d.inlineDecorations,l,d.minColumn,d.maxColumn)}catch(e){o=[]}let u=new s8.IJ(!0,!0,d.content,d.continuesWithWrappedLine,d.isBasicASCII,d.containsRTL,0,d.tokens,o,d.tabSize,d.startVisibleColumn,1,1,1,500,"none",!0,!0,null),g=new s6.HT(2e3),m=(0,s8.d1)(u,g);r=lU?lU.createHTML(g.build()):g.build();let f=document.createElement("span");f.setAttribute(lK,String(e)),f.setAttribute(lj,""),f.setAttribute("role","listitem"),f.tabIndex=0,f.className="sticky-line-content",f.classList.add(`stickyLine${t}`),f.style.lineHeight=`${this._lineHeight}px`,f.innerHTML=r;let _=document.createElement("span");_.setAttribute(lK,String(e)),_.setAttribute("data-sticky-is-line-number",""),_.className="sticky-line-number",_.style.lineHeight=`${this._lineHeight}px`;let v=n.contentLeft;_.style.width=`${v}px`;let C=document.createElement("span");1===c.renderType||3===c.renderType&&t%10==0?C.innerText=t.toString():2===c.renderType&&(C.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),C.className="sticky-line-number-inner",C.style.lineHeight=`${this._lineHeight}px`,C.style.width=`${n.lineNumbersWidth}px`,C.style.paddingLeft=`${n.lineNumbersLeft}px`,_.appendChild(C);let b=this._renderFoldingIconForLine(i,t);b&&_.appendChild(b.domNode),this._editor.applyFontInfo(f),this._editor.applyFontInfo(C),_.style.lineHeight=`${this._lineHeight}px`,f.style.lineHeight=`${this._lineHeight}px`,_.style.height=`${this._lineHeight}px`,f.style.height=`${this._lineHeight}px`;let S=new RenderedStickyLine(e,t,f,_,b,m.characterMapping,f.scrollWidth);return this._updateTopAndZIndexOfStickyLine(S)}_updateTopAndZIndexOfStickyLine(e){var t;let i=e.index,n=e.lineDomNode,o=e.lineNumberDomNode,r=i===this._lineNumbers.length-1;n.style.zIndex=r?"0":"1",o.style.zIndex=r?"0":"1";let s=`${i*this._lineHeight+this._lastLineRelativePosition+((null===(t=e.foldingIcon)||void 0===t?void 0:t.isCollapsed)?1:0)}px`,l=`${i*this._lineHeight}px`;return n.style.top=r?s:l,o.style.top=r?s:l,e}_renderFoldingIconForLine(e,t){let i=this._editor.getOption(110);if(!e||"never"===i)return;let n=e.regions,o=n.findRange(t),r=n.getStartLineNumber(o),s=t===r;if(!s)return;let l=n.isCollapsed(o),d=new StickyFoldingIcon(l,r,n.getEndLineNumber(o),this._lineHeight);return d.setVisible(!!this._isOnGlyphMargin||l||"always"===i),d.domNode.setAttribute(lq,""),d}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;let t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;let i=(0,lz.dL)(t.characterMapping,e,0);return new t5.L(t.lineNumber,i)}getLineNumberFromChildDomNode(e){var t,i;return null!==(i=null===(t=this._getRenderedStickyLineFromChildDomNode(e))||void 0===t?void 0:t.lineNumber)&&void 0!==i?i:null}_getRenderedStickyLineFromChildDomNode(e){let t=this.getLineIndexFromChildDomNode(e);return null===t||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){let t=this._getAttributeValue(e,lK);return t?parseInt(t,10):null}isInStickyLine(e){let t=this._getAttributeValue(e,lj);return void 0!==t}isInFoldingIconDomNode(e){let t=this._getAttributeValue(e,lq);return void 0!==t}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){let i=e.getAttribute(t);if(null!==i)return i;e=e.parentElement}}};let RenderedStickyLine=class RenderedStickyLine{constructor(e,t,i,n,o,r,s){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=n,this.foldingIcon=o,this.characterMapping=r,this.scrollWidth=s}};let StickyFoldingIcon=class StickyFoldingIcon{constructor(e,t,i,n){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=n,this.domNode=document.createElement("div"),this.domNode.style.width=`${n}px`,this.domNode.style.height=`${n}px`,this.domNode.className=iw.k.asClassName(e?sF:sO)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}};let StickyRange=class StickyRange{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}};let StickyElement=class StickyElement{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}};let StickyModel=class StickyModel{constructor(e,t,i,n){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=n}};var stickyScrollModelProvider_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},stickyScrollModelProvider_param=function(e,t){return function(i,n){t(i,n,e)}};(A=eQ||(eQ={})).OUTLINE_MODEL="outlineModel",A.FOLDING_PROVIDER_MODEL="foldingProviderModel",A.INDENTATION_MODEL="indentationModel",(P=eZ||(eZ={}))[P.VALID=0]="VALID",P[P.INVALID=1]="INVALID",P[P.CANCELED=2]="CANCELED";let l$=class extends t2.JT{constructor(e,t,i,n){super(),this._editor=e,this._languageConfigurationService=t,this._languageFeaturesService=i,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new t1.vp(300)),this._updateOperation=this._register(new t2.SL);let o=new lG(i),r=new lZ(this._editor,i),s=new lQ(this._editor,t);switch(n){case eQ.OUTLINE_MODEL:this._modelProviders.push(o),this._modelProviders.push(r),this._modelProviders.push(s);break;case eQ.FOLDING_PROVIDER_MODEL:this._modelProviders.push(r),this._modelProviders.push(s);break;case eQ.INDENTATION_MODEL:this._modelProviders.push(s)}}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e,t,i){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(let n of this._modelProviders){let{statusPromise:o,modelPromise:r}=n.computeStickyModel(e,t,i);this._modelPromise=r;let s=await o;if(this._modelPromise!==r)break;switch(s){case eZ.CANCELED:return this._updateOperation.clear(),null;case eZ.VALID:return n.stickyModel}}return null}).catch(e=>((0,i1.dL)(e),null))}};l$=stickyScrollModelProvider_decorate([stickyScrollModelProvider_param(1,n$.c_),stickyScrollModelProvider_param(2,ib.p)],l$);let StickyModelCandidateProvider=class StickyModelCandidateProvider{constructor(){this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,eZ.INVALID}computeStickyModel(e,t,i){if(i.isCancellationRequested||!this.isProviderValid(e))return{statusPromise:this._invalid(),modelPromise:null};let n=(0,t1.PG)(i=>this.createModelFromProvider(e,t,i));return{statusPromise:n.then(n=>this.isModelValid(n)?i.isCancellationRequested?eZ.CANCELED:(this._stickyModel=this.createStickyModel(e,t,i,n),eZ.VALID):this._invalid()).then(void 0,e=>((0,i1.dL)(e),eZ.CANCELED)),modelPromise:n}}isModelValid(e){return!0}isProviderValid(e){return!0}};let lG=class extends StickyModelCandidateProvider{constructor(e){super(),this._languageFeaturesService=e}createModelFromProvider(e,t,i){return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider,e,i)}createStickyModel(e,t,i,n){var o;let{stickyOutlineElement:r,providerID:s}=this._stickyModelFromOutlineModel(n,null===(o=this._stickyModel)||void 0===o?void 0:o.outlineProviderId);return new StickyModel(e.uri,t,r,s)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(il.$.first(e.children.values()) instanceof OutlineGroup){let n=il.$.find(e.children.values(),e=>e.id===t);if(n)i=n.children;else{let n,o="",r=-1;for(let[t,i]of e.children.entries()){let e=this._findSumOfRangesOfGroup(i);e>r&&(n=i,r=e,o=i.id)}t=o,i=n.children}}else i=e.children;let n=[],o=Array.from(i.values()).sort((e,t)=>{let i=new StickyRange(e.symbol.range.startLineNumber,e.symbol.range.endLineNumber),n=new StickyRange(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber);return this._comparator(i,n)});for(let e of o)n.push(this._stickyModelFromOutlineElement(e,e.symbol.selectionRange.startLineNumber));let r=new StickyElement(void 0,n,void 0);return{stickyOutlineElement:r,providerID:t}}_stickyModelFromOutlineElement(e,t){let i=[];for(let n of e.children.values())if(n.symbol.selectionRange.startLineNumber!==n.symbol.range.endLineNumber){if(n.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(n,n.symbol.selectionRange.startLineNumber));else for(let e of n.children.values())i.push(this._stickyModelFromOutlineElement(e,n.symbol.selectionRange.startLineNumber))}i.sort((e,t)=>this._comparator(e.range,t.range));let n=new StickyRange(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new StickyElement(n,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(let i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof OutlineElement?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};lG=stickyScrollModelProvider_decorate([stickyScrollModelProvider_param(0,ib.p)],lG);let StickyModelFromCandidateFoldingProvider=class StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider{constructor(e){super(),this._foldingLimitReporter=new RangesLimitReporter(e)}createStickyModel(e,t,i,n){let o=this._fromFoldingRegions(n);return new StickyModel(e.uri,t,o,void 0)}isModelValid(e){return null!==e}_fromFoldingRegions(e){let t=e.length,i=[],n=new StickyElement(void 0,[],void 0);for(let o=0;o<t;o++){let t;let r=e.getParentIndex(o);t=-1!==r?i[r]:n;let s=new StickyElement(new StickyRange(e.getStartLineNumber(o),e.getEndLineNumber(o)+1),[],t);t.children.push(s),i.push(s)}return n}};let lQ=class extends StickyModelFromCandidateFoldingProvider{constructor(e,t){super(e),this._languageConfigurationService=t}createModelFromProvider(e,t,i){let n=new IndentRangeProvider(e,this._languageConfigurationService,this._foldingLimitReporter);return n.compute(i)}};lQ=stickyScrollModelProvider_decorate([stickyScrollModelProvider_param(1,n$.c_)],lQ);let lZ=class extends StickyModelFromCandidateFoldingProvider{constructor(e,t){super(e),this._languageFeaturesService=t}isProviderValid(e){let t=sj.getFoldingRangeProviders(this._languageFeaturesService,e);return t.length>0}createModelFromProvider(e,t,i){let n=sj.getFoldingRangeProviders(this._languageFeaturesService,e),o=new SyntaxRangeProvider(e,n,()=>this.createModelFromProvider(e,t,i),this._foldingLimitReporter,void 0);return o.compute(i)}};lZ=stickyScrollModelProvider_decorate([stickyScrollModelProvider_param(1,ib.p)],lZ);var stickyScrollProvider_param=function(e,t){return function(i,n){t(i,n,e)}};let StickyLineCandidate=class StickyLineCandidate{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}};let lY=class extends t2.JT{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new iM.Q5),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._options=null,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new t2.SL),this._updateSoon=this._register(new t1.pY(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(115)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._stickyModelProvider=null,this._sessionStore.clear(),this._options=this._editor.getOption(115),this._options.enabled&&(this._stickyModelProvider=this._sessionStore.add(new l$(this._editor,this._languageConfigurationService,this._languageFeaturesService,this._options.defaultModel)),this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this.update())}getVersionId(){var e;return null===(e=this._model)||void 0===e?void 0:e.version}async update(){var e;null===(e=this._cts)||void 0===e||e.dispose(!0),this._cts=new i0.A,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}let t=this._editor.getModel(),i=t.getVersionId(),n=await this._stickyModelProvider.update(t,i,e);e.isCancellationRequested||(this._model=n)}updateIndex(e){return -1===e?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,n,o){if(0===t.children.length)return;let r=o,s=[];for(let e=0;e<t.children.length;e++){let i=t.children[e];i.range&&s.push(i.range.startLineNumber)}let l=this.updateIndex((0,ia.ry)(s,e.startLineNumber,(e,t)=>e-t)),d=this.updateIndex((0,ia.ry)(s,e.startLineNumber+n,(e,t)=>e-t));for(let s=l;s<=d;s++){let l=t.children[s];if(!l)return;if(l.range){let t=l.range.startLineNumber,o=l.range.endLineNumber;e.startLineNumber<=o+1&&t-1<=e.endLineNumber&&t!==r&&(r=t,i.push(new StickyLineCandidate(t,o-1,n+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,l,i,n+1,t))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,l,i,n,o)}}getCandidateStickyLinesIntersecting(e){var t,i;if(!(null===(t=this._model)||void 0===t?void 0:t.element))return[];let n=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,n,0,-1);let o=null===(i=this._editor._getViewModel())||void 0===i?void 0:i.getHiddenAreas();if(o)for(let e of o)n=n.filter(t=>!(t.startLineNumber>=e.startLineNumber&&t.endLineNumber<=e.endLineNumber+1));return n}};lY=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([stickyScrollProvider_param(1,ib.p),stickyScrollProvider_param(2,n$.c_)],lY);var lJ=i(31498),stickyScrollController_param=function(e,t){return function(i,n){t(i,n,e)}};let lX=eY=class extends t2.JT{constructor(e,t,i,n,o,r,s){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=n,this._contextKeyService=s,this._sessionStore=new t2.SL,this._foldingModel=null,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._showEndForLine=null,this._stickyScrollWidget=new StickyScrollWidget(this._editor),this._stickyLineCandidateProvider=new lY(this._editor,i,o),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new StickyScrollWidgetState([],[],0),this._onDidResize(),this._readConfiguration();let l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(115)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(110))&&this._readConfiguration()})),this._register(tO.nm(l,tO.tw.CONTEXT_MENU,async e=>{this._onContextMenu(tO.Jj(l),e)})),this._stickyScrollFocusedContextKey=tH.u.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=tH.u.stickyScrollVisible.bindTo(this._contextKeyService);let d=this._register(tO.go(l));this._register(d.onDidBlur(e=>{!1===this._positionRevealed&&0===l.clientHeight?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(d.onDidFocus(e=>{this.focus()})),this._registerMouseListeners(),this._register(tO.nm(l,tO.tw.MOUSE_DOWN,e=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(eY.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),null===(e=this._focusDisposableStore)||void 0===e||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}let e=this._stickyScrollFocusedContextKey.get();!0!==e&&(this._focused=!0,this._focusDisposableStore=new t2.SL,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){let e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(t4.e.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){let e=this._register(new t2.SL),t=this._register(new ClickLinkGesture(this._editor,{extractLineNumberFromMouseEvent:e=>{let t=this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);return t?t.lineNumber:0}})),getMouseEventTarget=e=>{if(!this._editor.hasModel()||12!==e.target.type||e.target.detail!==this._stickyScrollWidget.getId())return null;let t=e.target.element;if(!t||t.innerText!==t.innerHTML)return null;let i=this._stickyScrollWidget.getEditorPositionFromNode(t);return i?{range:new t4.e(i.lineNumber,i.column,i.lineNumber,i.column+t.innerText.length),textElement:t}:null},i=this._stickyScrollWidget.getDomNode();this._register(tO.mu(i,tO.tw.CLICK,e=>{if(e.ctrlKey||e.altKey||e.metaKey||!e.leftButton)return;if(e.shiftKey){let t=this._stickyScrollWidget.getLineIndexFromChildDomNode(e.target);if(null===t)return;let i=new t5.L(this._endLineNumbers[t],1);this._revealLineInCenterIfOutsideViewport(i);return}let t=this._stickyScrollWidget.isInFoldingIconDomNode(e.target);if(t){let t=this._stickyScrollWidget.getLineNumberFromChildDomNode(e.target);this._toggleFoldingRegionForLine(t);return}let i=this._stickyScrollWidget.isInStickyLine(e.target);if(!i)return;let n=this._stickyScrollWidget.getEditorPositionFromNode(e.target);if(!n){let t=this._stickyScrollWidget.getLineNumberFromChildDomNode(e.target);if(null===t)return;n=new t5.L(t,1)}this._revealPosition(n)})),this._register(tO.mu(i,tO.tw.MOUSE_MOVE,e=>{if(e.shiftKey){let t=this._stickyScrollWidget.getLineIndexFromChildDomNode(e.target);if(null===t||null!==this._showEndForLine&&this._showEndForLine===t)return;this._showEndForLine=t,this._renderStickyScroll();return}null!==this._showEndForLine&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(tO.nm(i,tO.tw.MOUSE_LEAVE,e=>{null!==this._showEndForLine&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([t,i])=>{let n;let o=getMouseEventTarget(t);if(!o||!t.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}let{range:r,textElement:s}=o;if(r.equalsRange(this._stickyRangeProjectedOnEditor)){if("underline"===s.style.textDecoration)return}else this._stickyRangeProjectedOnEditor=r,e.clear();let l=new i0.A;e.add((0,t2.OF)(()=>l.dispose(!0))),getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new t5.L(r.startLineNumber,r.startColumn+1),l.token).then(t=>{!l.token.isCancellationRequested&&(0!==t.length?(this._candidateDefinitionsLength=t.length,n!==s?(e.clear(),(n=s).style.textDecoration="underline",e.add((0,t2.OF)(()=>{n.style.textDecoration="none"}))):n||((n=s).style.textDecoration="underline",e.add((0,t2.OF)(()=>{n.style.textDecoration="none"})))):e.clear())})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async e=>{if(12!==e.target.type||e.target.detail!==this._stickyScrollWidget.getId())return;let t=this._stickyScrollWidget.getEditorPositionFromNode(e.target.element);t&&this._editor.hasModel()&&this._stickyRangeProjectedOnEditor&&(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:t.lineNumber,column:1})),this._instaService.invokeFunction(goToDefinitionWithLocation,e,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor}))}))}_onContextMenu(e,t){let i=new lJ.n(e,t);this._contextMenuService.showContextMenu({menuId:tU.eH.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||null===e)return;let t=this._stickyScrollWidget.getRenderedStickyLine(e),i=null==t?void 0:t.foldingIcon;if(!i)return;toggleCollapseState(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;let n=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(n),this._renderStickyScroll(e)}_readConfiguration(){let e=this._editor.getOption(115);if(!1===e.enabled){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(e=>{e.scrollTopChanged&&(this._showEndForLine=null,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(e=>this._onTokensChange(e))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=null,this._renderStickyScroll()})),this._enabled=!0);let t=this._editor.getOption(68);2===t.renderType&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=null,this._renderStickyScroll(0)}))}_needsUpdate(e){let t=this._stickyScrollWidget.getCurrentLines();for(let i of t)for(let t of e.ranges)if(i>=t.fromLineNumber&&i<=t.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){let e=this._editor.getLayoutInfo(),t=e.height/this._editor.getOption(67);this._maxStickyLines=Math.round(.25*t)}async _renderStickyScroll(e){var t,i;let n=this._editor.getModel();if(!n||n.isTooLargeForTokenization()){this._foldingModel=null,this._stickyScrollWidget.setState(void 0,null);return}let o=this._stickyLineCandidateProvider.getVersionId();if(void 0===o||o===n.getVersionId()){if(this._foldingModel=null!==(i=await (null===(t=sj.get(this._editor))||void 0===t?void 0:t.getFoldingModel()))&&void 0!==i?i:null,this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(0!==this._widgetState.startLineNumbers.length),this._focused){if(-1===this._focusedStickyElementIndex)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,-1!==this._focusedStickyElementIndex&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{let t=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];if(this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),0===this._stickyScrollWidget.lineNumberCount)this._focusedStickyElementIndex=-1;else{let e=this._stickyScrollWidget.lineNumbers.includes(t);e||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}}}else this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}}findScrollWidgetState(){let e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(115).maxLineCount),i=this._editor.getScrollTop(),n=0,o=[],r=[],s=this._editor.getVisibleRanges();if(0!==s.length){let l=new StickyRange(s[0].startLineNumber,s[s.length-1].endLineNumber),d=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(let s of d){let l=s.startLineNumber,d=s.endLineNumber,c=s.nestingDepth;if(d-l>0){let s=(c-1)*e,u=c*e,g=this._editor.getBottomForLineNumber(l)-i,m=this._editor.getTopForLineNumber(d)-i,f=this._editor.getBottomForLineNumber(d)-i;if(s>m&&s<=f){o.push(l),r.push(d+1),n=f-u;break}if(u>g&&u<=f&&(o.push(l),r.push(d+1)),o.length===t)break}}}return this._endLineNumbers=r,new StickyScrollWidgetState(o,r,n,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};lX.ID="store.contrib.stickyScrollController",lX=eY=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([stickyScrollController_param(1,iR.i),stickyScrollController_param(2,ib.p),stickyScrollController_param(3,iL.TG),stickyScrollController_param(4,n$.c_),stickyScrollController_param(5,nH.A),stickyScrollController_param(6,tq.i6)],lX);let ToggleStickyScroll=class ToggleStickyScroll extends tU.Ke{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...(0,tz.vv)("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:(0,tz.NC)({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},category:lH.View,toggled:{condition:tq.Ao.equals("config.editor.stickyScroll.enabled",!0),title:(0,tz.NC)("stickyScroll","Sticky Scroll"),mnemonicTitle:(0,tz.NC)({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:tU.eH.CommandPalette},{id:tU.eH.MenubarAppearanceMenu,group:"4_editor",order:3},{id:tU.eH.StickyScrollContext}]})}async run(e){let t=e.get(tj.Ui),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}};let FocusStickyScroll=class FocusStickyScroll extends tB.x1{constructor(){super({id:"editor.action.focusStickyScroll",title:{...(0,tz.vv)("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:(0,tz.NC)({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:tq.Ao.and(tq.Ao.has("config.editor.stickyScroll.enabled"),tH.u.stickyScrollVisible),menu:[{id:tU.eH.CommandPalette}]})}runEditorCommand(e,t){var i;null===(i=lX.get(t))||void 0===i||i.focus()}};let SelectNextStickyScrollLine=class SelectNextStickyScrollLine extends tB.x1{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:(0,tz.vv)("selectNextStickyScrollLine.title","Select next sticky scroll line"),precondition:tH.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:100,primary:18}})}runEditorCommand(e,t){var i;null===(i=lX.get(t))||void 0===i||i.focusNext()}};let SelectPreviousStickyScrollLine=class SelectPreviousStickyScrollLine extends tB.x1{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:(0,tz.vv)("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),precondition:tH.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:100,primary:16}})}runEditorCommand(e,t){var i;null===(i=lX.get(t))||void 0===i||i.focusPrevious()}};let GoToStickyScrollLine=class GoToStickyScrollLine extends tB.x1{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:(0,tz.vv)("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),precondition:tH.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:100,primary:3}})}runEditorCommand(e,t){var i;null===(i=lX.get(t))||void 0===i||i.goToFocused()}};let SelectEditor=class SelectEditor extends tB.x1{constructor(){super({id:"editor.action.selectEditor",title:(0,tz.vv)("selectEditor.title","Select Editor"),precondition:tH.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:100,primary:9}})}runEditorCommand(e,t){var i;null===(i=lX.get(t))||void 0===i||i.selectEditor()}};(0,tB._K)(lX.ID,lX,1),(0,tU.r1)(ToggleStickyScroll),(0,tU.r1)(FocusStickyScroll),(0,tU.r1)(SelectPreviousStickyScrollLine),(0,tU.r1)(SelectNextStickyScrollLine),(0,tU.r1)(GoToStickyScrollLine),(0,tU.r1)(SelectEditor);var suggestInlineCompletions_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},suggestInlineCompletions_param=function(e,t){return function(i,n){t(i,n,e)}};let SuggestInlineCompletion=class SuggestInlineCompletion{constructor(e,t,i,n,o,r){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=n,this.command=o,this.completion=r}};let l0=class extends t2.L6{constructor(e,t,i,n,o,r){super(o.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=n,this._suggestMemoryService=r}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&0===this.completionModel.getIncompleteProvider().size}get items(){var e;let t=[],{items:i}=this.completionModel,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},i),o=il.$.slice(i,n),r=il.$.slice(i,0,n),s=5;for(let i of il.$.concat(o,r)){if(i.score===oN.CL.Default)continue;let n=new t4.e(i.editStart.lineNumber,i.editStart.column,i.editInsertEnd.lineNumber,i.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),o=i.completion.insertTextRules&&4&i.completion.insertTextRules?{snippet:i.completion.insertText}:i.completion.insertText;t.push(new SuggestInlineCompletion(n,o,null!==(e=i.filterTextLow)&&void 0!==e?e:i.labelLow,i.completion.additionalTextEdits,i.completion.command,i)),s-- >=0&&i.resolve(i0.T.None)}return t}};l0=suggestInlineCompletions_decorate([suggestInlineCompletions_param(5,aN)],l0);let l1=class extends t2.JT{constructor(e,t,i,n){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=n,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,n){var o;let r,s,l;if(i.selectedSuggestionInfo)return;for(let t of this._editorService.listCodeEditors())if(t.getModel()===e){r=t;break}if(!r)return;let d=r.getOption(89);if(QuickSuggestionsOptions.isAllOff(d))return;e.tokenization.tokenizeIfCheap(t.lineNumber);let c=e.tokenization.getLineTokens(t.lineNumber),u=c.getStandardTokenType(c.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if("inline"!==QuickSuggestionsOptions.valueFor(d,u))return;let g=e.getWordAtPosition(t);if((null==g?void 0:g.word)||(s=this._getTriggerCharacterInfo(e,t)),!(null==g?void 0:g.word)&&!s||(g||(g=e.getWordUntilPosition(t)),g.endColumn!==t.column))return;let m=e.getValueInRange(new t4.e(t.lineNumber,1,t.lineNumber,t.column));if(!s&&(null===(o=this._lastResult)||void 0===o?void 0:o.canBeReused(e,t.lineNumber,g))){let e=new LineContext(m,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=e,this._lastResult.acquire(),l=this._lastResult}else{let i;let o=await provideSuggestionItems(this._languageFeatureService.completionProvider,e,t,new CompletionOptions(void 0,aM.createSuggestFilter(r).itemKind,null==s?void 0:s.providers),s&&{triggerKind:1,triggerCharacter:s.ch},n);o.needsClipboard&&(i=await this._clipboardService.readText());let d=new CompletionModel(o.items,t.column,new LineContext(m,0),WordDistance.None,r.getOption(118),r.getOption(112),{boostFullMatch:!1,firstMatchCanBeWeak:!1},i);l=new l0(e,t.lineNumber,g,d,o,this._suggestMemoryService)}return this._lastResult=l,l}handleItemDidShow(e,t){t.completion.resolve(i0.T.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var i;let n=e.getValueInRange(t4.e.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),o=new Set;for(let t of this._languageFeatureService.completionProvider.all(e))(null===(i=t.triggerCharacters)||void 0===i?void 0:i.includes(n))&&o.add(t);if(0!==o.size)return{providers:o,ch:n}}};l1=suggestInlineCompletions_decorate([suggestInlineCompletions_param(0,ib.p),suggestInlineCompletions_param(1,ix.p),suggestInlineCompletions_param(2,aN),suggestInlineCompletions_param(3,tW.$)],l1),(0,nG.y)(l1);let ForceRetokenizeAction=class ForceRetokenizeAction extends tB.R6{constructor(){super({id:"editor.action.forceRetokenize",label:tz.NC("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;let i=t.getModel();i.tokenization.resetTokenization();let n=new nK.G;i.tokenization.forceTokenization(i.getLineCount()),n.stop(),console.log(`tokenization took ${n.elapsed()}`)}};(0,tB.Qr)(ForceRetokenizeAction);var l2=i(32884);let ToggleTabFocusModeAction=class ToggleTabFocusModeAction extends tU.Ke{constructor(){super({id:ToggleTabFocusModeAction.ID,title:tz.vv({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(){let e=l2.n.getTabFocusMode(),t=!e;l2.n.setTabFocusMode(t),t?(0,tQ.Z9)(tz.NC("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,tQ.Z9)(tz.NC("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};ToggleTabFocusModeAction.ID="editor.action.toggleTabFocusMode",(0,tU.r1)(ToggleTabFocusModeAction),i(37442);var l5=i(92459),l4=i(37186);i(57156);var l3=i(53426),l6=i(58731);i(20745);let l7=class extends t2.JT{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},n){var o;super(),this._link=t,this._enabled=!0,this.el=(0,tO.R3)(e,(0,tO.$)("a.monaco-link",{tabIndex:null!==(o=t.tabIndex)&&void 0!==o?o:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");let r=this._register(new l3.Y(this.el,"click")),s=this._register(new l3.Y(this.el,"keypress")),l=iM.ju.chain(s.event,e=>e.map(e=>new l6.y(e)).filter(e=>3===e.keyCode)),d=this._register(new l3.Y(this.el,na.t.Tap)).event;this._register(na.o.addTarget(this.el));let c=iM.ju.any(r.event,l,d);this._register(c(e=>{this.enabled&&(tO.zB.stop(e,!0),(null==i?void 0:i.opener)?i.opener(this._link.href):n.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}};l7=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(O=iW.v,function(e,t){O(e,t,3)})],l7);var bannerController_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},bannerController_param=function(e,t){return function(i,n){t(i,n,e)}};let l9=class extends t2.JT{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(l8))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),null===(t=e.onClose)||void 0===t||t.call(e)}}),this._editor.setBanner(this.banner.element,26)}};l9=bannerController_decorate([bannerController_param(1,iL.TG)],l9);let l8=class extends t2.JT{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(iB.$,{}),this.element=(0,tO.$)("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){return e.ariaLabel?e.ariaLabel:"string"==typeof e.message?e.message:void 0}getBannerMessage(e){if("string"==typeof e){let t=(0,tO.$)("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){(0,tO.PO)(this.element)}show(e){(0,tO.PO)(this.element);let t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);let i=(0,tO.R3)(this.element,(0,tO.$)("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild((0,tO.$)(`div${iw.k.asCSSSelector(e.icon)}`));let n=(0,tO.R3)(this.element,(0,tO.$)("div.message-container"));if(n.setAttribute("aria-hidden","true"),n.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=(0,tO.R3)(this.element,(0,tO.$)("div.message-actions-container")),e.actions)for(let t of e.actions)this._register(this.instantiationService.createInstance(l7,this.messageActionsContainer,{...t,tabIndex:-1},{}));let o=(0,tO.R3)(this.element,(0,tO.$)("div.action-container"));this.actionBar=this._register(new nh.o(o)),this.actionBar.push(this._register(new iT.aU("banner.close","Close Banner",iw.k.asClassName(n1.s_),!0,()=>{"function"==typeof e.onClose&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};l8=bannerController_decorate([bannerController_param(0,iL.TG)],l8);var de=i(17958),unicodeHighlighter_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},unicodeHighlighter_param=function(e,t){return function(i,n){t(i,n,e)}};let dt=(0,n1.q5)("extensions-warning-message",tF.l.warning,tz.NC("warningIcon","Icon shown with a warning message in the extensions editor.")),di=class extends t2.JT{constructor(e,t,i,n){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=e=>{if(e&&e.hasMore){let t;if(this._bannerClosed)return;let i=Math.max(e.ambiguousCharacterCount,e.nonBasicAsciiCharacterCount,e.invisibleCharacterCount);if(e.nonBasicAsciiCharacterCount>=i)t={message:tz.NC("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new DisableHighlightingOfNonBasicAsciiCharactersAction};else if(e.ambiguousCharacterCount>=i)t={message:tz.NC("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new DisableHighlightingOfAmbiguousCharactersAction};else if(e.invisibleCharacterCount>=i)t={message:tz.NC("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new DisableHighlightingOfInvisibleCharactersAction};else throw Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:t.message,icon:dt,actions:[{label:t.command.shortLabel,href:`command:${t.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(n.createInstance(l9,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(125),this._register(i.onDidChangeTrust(e=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(125)&&(this._options=e.getOption(125),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;let e=resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(e=>!1===e))return;let t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(e=>e.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(e=>{if("_os"===e){let e=new Intl.NumberFormat().resolvedOptions().locale;return e}return"_vscode"===e?io.dK:e})};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new dn(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new ViewportUnicodeHighlighter(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};function resolveOptions(e,t){return{nonBasicASCII:t.nonBasicASCII===nk.Av?!e:t.nonBasicASCII,ambiguousCharacters:t.ambiguousCharacters,invisibleCharacters:t.invisibleCharacters,includeComments:t.includeComments===nk.Av?!e:t.includeComments,includeStrings:t.includeStrings===nk.Av?!e:t.includeStrings,allowedCharacters:t.allowedCharacters,allowedLocales:t.allowedLocales}}di.ID="editor.contrib.unicodeHighlighter",di=unicodeHighlighter_decorate([unicodeHighlighter_param(1,sG.p),unicodeHighlighter_param(2,de.Y),unicodeHighlighter_param(3,iL.TG)],di);let dn=class extends t2.JT{constructor(e,t,i,n){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new t1.pY(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);let i=[];if(!t.hasMore)for(let e of t.ranges)i.push({range:e,options:Decorations.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel();if(!(0,l4.Fd)(t,e))return null;let i=t.getValueInRange(e.range);return{reason:computeReason(i,this._options),inComment:(0,l4.$t)(t,e),inString:(0,l4.zg)(t,e)}}};dn=unicodeHighlighter_decorate([unicodeHighlighter_param(3,sG.p)],dn);let ViewportUnicodeHighlighter=class ViewportUnicodeHighlighter extends t2.JT{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new t1.pY(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(let t of e){let e=l5.a.computeUnicodeHighlights(this._model,this._options,t);for(let t of e.ranges)i.ranges.push(t);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||e.hasMore}if(!i.hasMore)for(let e of i.ranges)t.push({range:e,options:Decorations.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel(),i=t.getValueInRange(e.range);return(0,l4.Fd)(t,e)?{reason:computeReason(i,this._options),inComment:(0,l4.$t)(t,e),inString:(0,l4.zg)(t,e)}:null}};let dr=tz.NC("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options"),ds=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];let i=this._editor.getModel(),n=this._editor.getContribution(di.ID);if(!n)return[];let o=[],r=new Set,s=300;for(let e of t){let t;let l=n.getDecorationInfo(e);if(!l)continue;let d=i.getValueInRange(e.range),c=d.codePointAt(0),u=formatCodePointMarkdown(c);switch(l.reason.kind){case 0:t=(0,iy.$i)(l.reason.confusableWith)?tz.NC("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",u,formatCodePointMarkdown(l.reason.confusableWith.codePointAt(0))):tz.NC("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",u,formatCodePointMarkdown(l.reason.confusableWith.codePointAt(0)));break;case 1:t=tz.NC("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",u);break;case 2:t=tz.NC("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",u)}if(r.has(t))continue;r.add(t);let g={codePoint:c,reason:l.reason,inComment:l.inComment,inString:l.inString},m=tz.NC("unicodeHighlight.adjustSettings","Adjust settings"),f=`command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(g))}`,_=new tZ.W5("",!0).appendMarkdown(t).appendText(" ").appendLink(f,m,dr);o.push(new MarkdownHover(this,e.range,[_],!1,s++))}return o}renderHoverParts(e,t){return renderMarkdownHovers(e,t,this._editor,this._languageService,this._openerService)}};function codePointToHex(e){return`U+${e.toString(16).padStart(4,"0")}`}function formatCodePointMarkdown(e){let t=`\`${codePointToHex(e)}\``;return iy.vU.isInvisibleCharacter(e)||(t+=` "${renderCodePointAsInlineCode(e)}"`),t}function renderCodePointAsInlineCode(e){return 96===e?"`` ` ``":"`"+String.fromCodePoint(e)+"`"}function computeReason(e,t){return l5.a.computeUnicodeHighlightReason(e,t)}ds=unicodeHighlighter_decorate([unicodeHighlighter_param(1,n3.O),unicodeHighlighter_param(2,iW.v)],ds);let Decorations=class Decorations{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){let i=`${e}${t}`,n=this.map.get(i);return n||(n=t6.qx.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,n)),n}};Decorations.instance=new Decorations;let DisableHighlightingInCommentsAction=class DisableHighlightingInCommentsAction extends tB.R6{constructor(){super({id:DisableHighlightingOfAmbiguousCharactersAction.ID,label:tz.NC("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=tz.NC("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){let n=null==e?void 0:e.get(tj.Ui);n&&this.runAction(n)}async runAction(e){await e.updateValue(nk.qt.includeComments,!1,2)}};let DisableHighlightingInStringsAction=class DisableHighlightingInStringsAction extends tB.R6{constructor(){super({id:DisableHighlightingOfAmbiguousCharactersAction.ID,label:tz.NC("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=tz.NC("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){let n=null==e?void 0:e.get(tj.Ui);n&&this.runAction(n)}async runAction(e){await e.updateValue(nk.qt.includeStrings,!1,2)}};let DisableHighlightingOfAmbiguousCharactersAction=class DisableHighlightingOfAmbiguousCharactersAction extends tB.R6{constructor(){super({id:DisableHighlightingOfAmbiguousCharactersAction.ID,label:tz.NC("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=tz.NC("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){let n=null==e?void 0:e.get(tj.Ui);n&&this.runAction(n)}async runAction(e){await e.updateValue(nk.qt.ambiguousCharacters,!1,2)}};DisableHighlightingOfAmbiguousCharactersAction.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";let DisableHighlightingOfInvisibleCharactersAction=class DisableHighlightingOfInvisibleCharactersAction extends tB.R6{constructor(){super({id:DisableHighlightingOfInvisibleCharactersAction.ID,label:tz.NC("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=tz.NC("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){let n=null==e?void 0:e.get(tj.Ui);n&&this.runAction(n)}async runAction(e){await e.updateValue(nk.qt.invisibleCharacters,!1,2)}};DisableHighlightingOfInvisibleCharactersAction.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";let DisableHighlightingOfNonBasicAsciiCharactersAction=class DisableHighlightingOfNonBasicAsciiCharactersAction extends tB.R6{constructor(){super({id:DisableHighlightingOfNonBasicAsciiCharactersAction.ID,label:tz.NC("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=tz.NC("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){let n=null==e?void 0:e.get(tj.Ui);n&&this.runAction(n)}async runAction(e){await e.updateValue(nk.qt.nonBasicASCII,!1,2)}};DisableHighlightingOfNonBasicAsciiCharactersAction.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";let ShowExcludeOptions=class ShowExcludeOptions extends tB.R6{constructor(){super({id:ShowExcludeOptions.ID,label:tz.NC("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){let{codePoint:n,reason:o,inString:r,inComment:s}=i,l=String.fromCodePoint(n),d=e.get(iE.eJ),c=e.get(tj.Ui);function getExcludeCharFromBeingHighlightedLabel(e){return iy.vU.isInvisibleCharacter(e)?tz.NC("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",codePointToHex(e)):tz.NC("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${codePointToHex(e)} "${l}"`)}let u=[];if(0===o.kind)for(let e of o.notAmbiguousInLocales)u.push({label:tz.NC("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',e),run:async()=>{excludeLocaleFromBeingHighlighted(c,[e])}});if(u.push({label:getExcludeCharFromBeingHighlightedLabel(n),run:()=>excludeCharFromBeingHighlighted(c,[n])}),s){let e=new DisableHighlightingInCommentsAction;u.push({label:e.label,run:async()=>e.runAction(c)})}else if(r){let e=new DisableHighlightingInStringsAction;u.push({label:e.label,run:async()=>e.runAction(c)})}if(0===o.kind){let e=new DisableHighlightingOfAmbiguousCharactersAction;u.push({label:e.label,run:async()=>e.runAction(c)})}else if(1===o.kind){let e=new DisableHighlightingOfInvisibleCharactersAction;u.push({label:e.label,run:async()=>e.runAction(c)})}else if(2===o.kind){let e=new DisableHighlightingOfNonBasicAsciiCharactersAction;u.push({label:e.label,run:async()=>e.runAction(c)})}else expectNever(o);let g=await d.pick(u,{title:dr});g&&await g.run()}};async function excludeCharFromBeingHighlighted(e,t){let i;let n=e.getValue(nk.qt.allowedCharacters);for(let e of(i="object"==typeof n&&n?n:{},t))i[String.fromCodePoint(e)]=!0;await e.updateValue(nk.qt.allowedCharacters,i,2)}async function excludeLocaleFromBeingHighlighted(e,t){var i;let n;let o=null===(i=e.inspect(nk.qt.allowedLocales).user)||void 0===i?void 0:i.value;for(let e of(n="object"==typeof o&&o?Object.assign({},o):{},t))n[e]=!0;await e.updateValue(nk.qt.allowedLocales,n,2)}function expectNever(e){throw Error(`Unexpected value: ${e}`)}ShowExcludeOptions.ID="editor.action.unicodeHighlight.showExcludeOptions",(0,tB.Qr)(DisableHighlightingOfAmbiguousCharactersAction),(0,tB.Qr)(DisableHighlightingOfInvisibleCharactersAction),(0,tB.Qr)(DisableHighlightingOfNonBasicAsciiCharactersAction),(0,tB.Qr)(ShowExcludeOptions),(0,tB._K)(di.ID,di,1),oj.register(ds);var da=i(96049),unusualLineTerminators_param=function(e,t){return function(i,n){t(i,n,e)}};let dl="ignoreUnusualLineTerminators";function writeIgnoreState(e,t,i){e.setModelProperty(t.uri,dl,i)}function readIgnoreState(e,t){return e.getModelProperty(t.uri,dl)}let dd=class extends t2.JT{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(126),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(126)&&(this._config=this._editor.getOption(126),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(e=>{e.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){let e;if("off"===this._config||!this._editor.hasModel())return;let t=this._editor.getModel();if(!t.mightContainUnusualLineTerminators())return;let i=readIgnoreState(this._codeEditorService,t);if(!(!0===i||this._editor.getOption(91))){if("auto"===this._config){t.removeUnusualLineTerminators(this._editor.getSelections());return}if(!this._isPresentingDialog){try{this._isPresentingDialog=!0,e=await this._dialogService.confirm({title:tz.NC("unusualLineTerminators.title","Unusual Line Terminators"),message:tz.NC("unusualLineTerminators.message","Detected unusual line terminators"),detail:tz.NC("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,nL.EZ)(t.uri)),primaryButton:tz.NC({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:tz.NC("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!e.confirmed){writeIgnoreState(this._codeEditorService,t,!0);return}t.removeUnusualLineTerminators(this._editor.getSelections())}}}};dd.ID="editor.contrib.unusualLineTerminatorsDetector",dd=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([unusualLineTerminators_param(1,da.S),unusualLineTerminators_param(2,tW.$)],dd),(0,tB._K)(dd.ID,dd,1);var dh=i(51554),wordHighlighter_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},wordHighlighter_param=function(e,t){return function(i,n){t(i,n,e)}};let dc=new tq.uy("hasWordHighlights",!1);function getOccurrencesAtPosition(e,t,i,n){let o=e.ordered(t);return(0,t1.Ps)(o.map(e=>()=>Promise.resolve(e.provideDocumentHighlights(t,i,n)).then(void 0,i1.Cp)),ia.Of).then(e=>{if(e){let i=new nA.Y9;return i.set(t.uri,e),i}return new nA.Y9})}function getOccurrencesAcrossMultipleModels(e,t,i,n,o,r){let s=e.ordered(t);return(0,t1.Ps)(s.map(e=>()=>{let n=r.filter(e=>(0,t3.pt)(e)).filter(t=>(0,dh.G)(e.selector,t.uri,t.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(e.provideMultiDocumentHighlights(t,i,n,o)).then(void 0,i1.Cp)}),e=>e instanceof nA.Y9&&e.size>0)}let OccurenceAtPositionRequest=class OccurenceAtPositionRequest{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=(0,t1.PG)(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){let i=e.getWordAtPosition(t.getPosition());return i?new t4.e(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){let n=t.startLineNumber,o=t.startColumn,r=t.endColumn,s=this._getCurrentWordRange(e,t),l=!!(this._wordRange&&this._wordRange.equalsRange(s));for(let e=0,t=i.length;!l&&e<t;e++){let t=i.getRange(e);t&&t.startLineNumber===n&&t.startColumn<=o&&t.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}};let SemanticOccurenceAtPositionRequest=class SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest{constructor(e,t,i,n){super(e,t,i),this._providers=n}_compute(e,t,i,n){return getOccurrencesAtPosition(this._providers,e,t.getPosition(),n).then(e=>e||new nA.Y9)}};let MultiModelOccurenceRequest=class MultiModelOccurenceRequest extends OccurenceAtPositionRequest{constructor(e,t,i,n,o){super(e,t,i),this._providers=n,this._otherModels=o}_compute(e,t,i,n){return getOccurrencesAcrossMultipleModels(this._providers,e,t.getPosition(),i,n,this._otherModels).then(e=>e||new nA.Y9)}};let TextualOccurenceRequest=class TextualOccurenceRequest extends OccurenceAtPositionRequest{constructor(e,t,i,n,o){super(e,t,n),this._otherModels=o,this._selectionIsEmpty=t.isEmpty(),this._word=i}_compute(e,t,i,n){return(0,t1.Vs)(250,n).then(()=>{let n;let o=new nA.Y9;if(!(n=this._word?this._word:e.getWordAtPosition(t.getPosition())))return new nA.Y9;let r=[e,...this._otherModels];for(let e of r){if(e.isDisposed())continue;let t=e.findMatches(n.word,!0,!1,!0,i,!1),r=t.map(e=>({range:e.range,kind:ov.MY.Text}));r&&o.set(e.uri,r)}return o})}isValid(e,t,i){let n=t.isEmpty();return this._selectionIsEmpty===n&&super.isValid(e,t,i)}};function computeOccurencesAtPosition(e,t,i,n,o){return e.has(t)?new SemanticOccurenceAtPositionRequest(t,i,o,e):new TextualOccurenceRequest(t,i,n,o,[])}function computeOccurencesMultiModel(e,t,i,n,o,r){return e.has(t)?new MultiModelOccurenceRequest(t,i,o,e,r):new TextualOccurenceRequest(t,i,n,o,r)}(0,tB.sb)("_executeDocumentHighlights",async(e,t,i)=>{let n=e.get(ib.p),o=await getOccurrencesAtPosition(n.documentHighlightProvider,t,i,i0.T.None);return null==o?void 0:o.get(t.uri)});let du=eJ=class{constructor(e,t,i,n,o){this.toUnhook=new t2.SL,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new nA.Y9,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=o,this._hasWordHighlights=dc.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(e=>{this._ignorePositionChangeEvent||"off"===this.occurrencesHighlight||this._onPositionChanged(e)})),this.toUnhook.add(e.onDidFocusEditorText(e=>{"off"!==this.occurrencesHighlight&&(this.workerRequest||this._run())})),this.toUnhook.add(e.onDidChangeModelContent(e=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(e=>{!e.newModelUrl&&e.oldModelUrl?this._stopSingular():eJ.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(e=>{let t=this.editor.getOption(81);this.occurrencesHighlight!==t&&(this.occurrencesHighlight=t,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,eJ.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){"off"!==this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(t4.e.compareRangesUsingStarts)}moveNext(){let e=this._getSortedHighlights(),t=e.findIndex(e=>e.containsPosition(this.editor.getPosition())),i=(t+1)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let t=this._getWord();if(t){let o=this.editor.getModel().getLineContent(n.startLineNumber);(0,tQ.Z9)(`${o}, ${i+1} of ${e.length} for '${t.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),t=e.findIndex(e=>e.containsPosition(this.editor.getPosition())),i=(t-1+e.length)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let t=this._getWord();if(t){let o=this.editor.getModel().getLineContent(n.startLineNumber);(0,tQ.Z9)(`${o}, ${i+1} of ${e.length} for '${t.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;let e=eJ.storedDecorations.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),eJ.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(){let e=this.codeEditorService.listCodeEditors(),t=[];for(let i of e){if(!i.hasModel())continue;let e=eJ.storedDecorations.get(i.getModel().uri);if(!e)continue;i.removeDecorations(e),t.push(i.getModel().uri);let n=dg.get(i);(null==n?void 0:n.wordHighlighter)&&n.wordHighlighter.decorations.length>0&&(n.wordHighlighter.decorations.clear(),n.wordHighlighter.workerRequest=null,n.wordHighlighter._hasWordHighlights.set(!1))}for(let e of t)eJ.storedDecorations.delete(e)}_stopSingular(){var e,t,i,n;this._removeSingleDecorations(),this.editor.hasTextFocus()&&((null===(e=this.editor.getModel())||void 0===e?void 0:e.uri.scheme)!==oy.lg.vscodeNotebookCell&&(null===(i=null===(t=eJ.query)||void 0===t?void 0:t.modelInfo)||void 0===i?void 0:i.model.uri.scheme)!==oy.lg.vscodeNotebookCell?(eJ.query=null,this._run()):(null===(n=eJ.query)||void 0===n?void 0:n.modelInfo)&&(eJ.query.modelInfo=null)),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(){this._removeAllDecorations(),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if("off"===this.occurrencesHighlight||3!==e.reason&&(null===(t=this.editor.getModel())||void 0===t?void 0:t.uri.scheme)!==oy.lg.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];let t=e.uri.scheme===oy.lg.vscodeNotebookCell;if(t){let t=[],i=this.codeEditorService.listCodeEditors();for(let n of i){let i=n.getModel();i&&i!==e&&i.uri.scheme===oy.lg.vscodeNotebookCell&&t.push(i)}return t}let i=[],n=this.codeEditorService.listCodeEditors();for(let t of n){if(!(0,o_.QI)(t))continue;let n=t.getModel();n&&e===n.modified&&i.push(n.modified)}if(i.length)return i;if("singleFile"===this.occurrencesHighlight)return[];for(let t of n){let n=t.getModel(),o=n&&n!==e;o&&i.push(n)}return i}_run(){var e;let t;let i=this.editor.hasTextFocus();if(i){let e=this.editor.getSelection();if(!e||e.startLineNumber!==e.endLineNumber){eJ.query=null,this._stopAll();return}let i=e.startColumn,n=e.endColumn,o=this._getWord();if(!o||o.startColumn>i||o.endColumn<n){eJ.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,e,this.decorations),eJ.query={modelInfo:{model:this.model,selection:e},word:o}}else if(!eJ.query)return;if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let t=++this.workerRequestTokenId;this.workerRequestCompleted=!1;let i=this.getOtherModelsToHighlight(this.editor.getModel());if(!eJ.query.modelInfo||eJ.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(eJ.query.modelInfo.model,eJ.query.modelInfo.selection,eJ.query.word,i),null===(e=this.workerRequest)||void 0===e||e.result.then(e=>{t===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=e||[],this._beginRenderDecorations())},i1.dL)}}computeWithModel(e,t,i,n){return n.length?computeOccurencesMultiModel(this.multiDocumentProviders,e,t,i,this.editor.getOption(130),n):computeOccurencesAtPosition(this.providers,e,t,i,this.editor.getOption(130))}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var e,t,i;this.renderDecorationsTimer=-1;let n=this.codeEditorService.listCodeEditors();for(let o of n){let n=dg.get(o);if(!n)continue;let r=[],s=null===(e=o.getModel())||void 0===e?void 0:e.uri;if(s&&this.workerRequestValue.has(s)){let e=eJ.storedDecorations.get(s),l=this.workerRequestValue.get(s);if(l)for(let e of l)e.range&&r.push({range:e.range,options:getHighlightDecorationOptions(e.kind)});let d=[];o.changeDecorations(t=>{d=t.deltaDecorations(null!=e?e:[],r)}),eJ.storedDecorations=eJ.storedDecorations.set(s,d),r.length>0&&(null===(t=n.wordHighlighter)||void 0===t||t.decorations.set(r),null===(i=n.wordHighlighter)||void 0===i||i._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}};du.storedDecorations=new nA.Y9,du.query=null,du=eJ=wordHighlighter_decorate([wordHighlighter_param(4,tW.$)],du);let dg=eX=class extends t2.JT{static get(e){return e.getContribution(eX.ID)}constructor(e,t,i,n){super(),this._wordHighlighter=null;let createWordHighlighterIfPossible=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new du(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,n))};this._register(e.onDidChangeModel(e=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),createWordHighlighterIfPossible()})),createWordHighlighterIfPossible()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;null===(e=this._wordHighlighter)||void 0===e||e.moveNext()}moveBack(){var e;null===(e=this._wordHighlighter)||void 0===e||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};dg.ID="editor.contrib.wordHighlighter",dg=eX=wordHighlighter_decorate([wordHighlighter_param(1,tq.i6),wordHighlighter_param(2,ib.p),wordHighlighter_param(3,tW.$)],dg);let WordHighlightNavigationAction=class WordHighlightNavigationAction extends tB.R6{constructor(e,t){super(t),this._isNext=e}run(e,t){let i=dg.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}};let NextWordHighlightAction=class NextWordHighlightAction extends WordHighlightNavigationAction{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:tz.NC("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:dc,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:65,weight:100}})}};let PrevWordHighlightAction=class PrevWordHighlightAction extends WordHighlightNavigationAction{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:tz.NC("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:dc,kbOpts:{kbExpr:tH.u.editorTextFocus,primary:1089,weight:100}})}};let TriggerWordHighlightAction=class TriggerWordHighlightAction extends tB.R6{constructor(){super({id:"editor.action.wordHighlight.trigger",label:tz.NC("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:dc.toNegated(),kbOpts:{kbExpr:tH.u.editorTextFocus,primary:0,weight:100}})}run(e,t,i){let n=dg.get(t);n&&n.restoreViewState(!0)}};(0,tB._K)(dg.ID,dg,0),(0,tB.Qr)(NextWordHighlightAction),(0,tB.Qr)(PrevWordHighlightAction),(0,tB.Qr)(TriggerWordHighlightAction);var dp=i(67949),dm=i(66072),df=i(50673);let MoveWordCommand=class MoveWordCommand extends tB._l{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;let n=(0,df.u)(t.getOption(130)),o=t.getModel(),r=t.getSelections(),s=r.map(e=>{let t=new t5.L(e.positionLineNumber,e.positionColumn),i=this._move(n,o,t,this._wordNavigationType);return this._moveTo(e,i,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,s.map(e=>dp.Vi.fromModelSelection(e))),1===s.length){let e=new t5.L(s[0].positionLineNumber,s[0].positionColumn);t.revealPosition(e,0)}}_moveTo(e,t,i){return i?new tJ.Y(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new tJ.Y(t.lineNumber,t.column,t.lineNumber,t.column)}};let WordLeftCommand=class WordLeftCommand extends MoveWordCommand{_move(e,t,i,n){return dm.w.moveWordLeft(e,t,i,n)}};let WordRightCommand=class WordRightCommand extends MoveWordCommand{_move(e,t,i,n){return dm.w.moveWordRight(e,t,i,n)}};let CursorWordStartLeft=class CursorWordStartLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}};let CursorWordEndLeft=class CursorWordEndLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}};let CursorWordLeft=class CursorWordLeft extends WordLeftCommand{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:tq.Ao.and(tH.u.textInputFocus,null===(e=tq.Ao.and(n9.U,oO.cv))||void 0===e?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}};let CursorWordStartLeftSelect=class CursorWordStartLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}};let CursorWordEndLeftSelect=class CursorWordEndLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}};let CursorWordLeftSelect=class CursorWordLeftSelect extends WordLeftCommand{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:tq.Ao.and(tH.u.textInputFocus,null===(e=tq.Ao.and(n9.U,oO.cv))||void 0===e?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}};let CursorWordAccessibilityLeft=class CursorWordAccessibilityLeft extends WordLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,n){return super._move((0,df.u)(nk.BH.wordSeparators.defaultValue),t,i,n)}};let CursorWordAccessibilityLeftSelect=class CursorWordAccessibilityLeftSelect extends WordLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,n){return super._move((0,df.u)(nk.BH.wordSeparators.defaultValue),t,i,n)}};let CursorWordStartRight=class CursorWordStartRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}};let CursorWordEndRight=class CursorWordEndRight extends WordRightCommand{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:tq.Ao.and(tH.u.textInputFocus,null===(e=tq.Ao.and(n9.U,oO.cv))||void 0===e?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}};let CursorWordRight=class CursorWordRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}};let CursorWordStartRightSelect=class CursorWordStartRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}};let CursorWordEndRightSelect=class CursorWordEndRightSelect extends WordRightCommand{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:tq.Ao.and(tH.u.textInputFocus,null===(e=tq.Ao.and(n9.U,oO.cv))||void 0===e?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}};let CursorWordRightSelect=class CursorWordRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}};let CursorWordAccessibilityRight=class CursorWordAccessibilityRight extends WordRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,n){return super._move((0,df.u)(nk.BH.wordSeparators.defaultValue),t,i,n)}};let CursorWordAccessibilityRightSelect=class CursorWordAccessibilityRightSelect extends WordRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,n){return super._move((0,df.u)(nk.BH.wordSeparators.defaultValue),t,i,n)}};let DeleteWordCommand=class DeleteWordCommand extends tB._l{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){let n=e.get(n$.c_);if(!t.hasModel())return;let o=(0,df.u)(t.getOption(130)),r=t.getModel(),s=t.getSelections(),l=t.getOption(6),d=t.getOption(11),c=n.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),g=s.map(e=>{let i=this._delete({wordSeparators:o,model:r,selection:e,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:d,autoClosingPairs:c,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new ie.T4(i,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}};let DeleteWordLeftCommand=class DeleteWordLeftCommand extends DeleteWordCommand{_delete(e,t){let i=dm.w.deleteWordLeft(e,t);return i||new t4.e(1,1,1,1)}};let DeleteWordRightCommand=class DeleteWordRightCommand extends DeleteWordCommand{_delete(e,t){let i=dm.w.deleteWordRight(e,t);if(i)return i;let n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new t4.e(n,o,n,o)}};let DeleteWordStartLeft=class DeleteWordStartLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:tH.u.writable})}};let DeleteWordEndLeft=class DeleteWordEndLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:tH.u.writable})}};let DeleteWordLeft=class DeleteWordLeft extends DeleteWordLeftCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}};let DeleteWordStartRight=class DeleteWordStartRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:tH.u.writable})}};let DeleteWordEndRight=class DeleteWordEndRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:tH.u.writable})}};let DeleteWordRight=class DeleteWordRight extends DeleteWordRightCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}};let DeleteInsideWord=class DeleteInsideWord extends tB.R6{constructor(){super({id:"deleteInsideWord",precondition:tH.u.writable,label:tz.NC("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;let n=(0,df.u)(t.getOption(130)),o=t.getModel(),r=t.getSelections(),s=r.map(e=>{let t=dm.w.deleteInsideWord(n,o,e);return new ie.T4(t,"")});t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}};(0,tB.fK)(new CursorWordStartLeft),(0,tB.fK)(new CursorWordEndLeft),(0,tB.fK)(new CursorWordLeft),(0,tB.fK)(new CursorWordStartLeftSelect),(0,tB.fK)(new CursorWordEndLeftSelect),(0,tB.fK)(new CursorWordLeftSelect),(0,tB.fK)(new CursorWordStartRight),(0,tB.fK)(new CursorWordEndRight),(0,tB.fK)(new CursorWordRight),(0,tB.fK)(new CursorWordStartRightSelect),(0,tB.fK)(new CursorWordEndRightSelect),(0,tB.fK)(new CursorWordRightSelect),(0,tB.fK)(new CursorWordAccessibilityLeft),(0,tB.fK)(new CursorWordAccessibilityLeftSelect),(0,tB.fK)(new CursorWordAccessibilityRight),(0,tB.fK)(new CursorWordAccessibilityRightSelect),(0,tB.fK)(new DeleteWordStartLeft),(0,tB.fK)(new DeleteWordEndLeft),(0,tB.fK)(new DeleteWordLeft),(0,tB.fK)(new DeleteWordStartRight),(0,tB.fK)(new DeleteWordEndRight),(0,tB.fK)(new DeleteWordRight),(0,tB.Qr)(DeleteInsideWord);let DeleteWordPartLeft=class DeleteWordPartLeft extends DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let i=dm.L.deleteWordPartLeft(e);return i||new t4.e(1,1,1,1)}};let DeleteWordPartRight=class DeleteWordPartRight extends DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:tH.u.writable,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let i=dm.L.deleteWordPartRight(e);if(i)return i;let n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new t4.e(n,o,n,o)}};let WordPartLeftCommand=class WordPartLeftCommand extends MoveWordCommand{_move(e,t,i,n){return dm.L.moveWordPartLeft(e,t,i)}};let CursorWordPartLeft=class CursorWordPartLeft extends WordPartLeftCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:783},weight:100}})}};tK.P.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");let CursorWordPartLeftSelect=class CursorWordPartLeftSelect extends WordPartLeftCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}};tK.P.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");let WordPartRightCommand=class WordPartRightCommand extends MoveWordCommand{_move(e,t,i,n){return dm.L.moveWordPartRight(e,t,i)}};let CursorWordPartRight=class CursorWordPartRight extends WordPartRightCommand{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:785},weight:100}})}};let CursorWordPartRightSelect=class CursorWordPartRightSelect extends WordPartRightCommand{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:tH.u.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}};(0,tB.fK)(new DeleteWordPartLeft),(0,tB.fK)(new DeleteWordPartRight),(0,tB.fK)(new CursorWordPartLeft),(0,tB.fK)(new CursorWordPartLeftSelect),(0,tB.fK)(new CursorWordPartRight),(0,tB.fK)(new CursorWordPartRightSelect);let ReadOnlyMessageController=class ReadOnlyMessageController extends t2.JT{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){let e=iV.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(92);t||(t=new tZ.W5(this.editor.isSimpleWidget?tz.NC("editor.simple.readonly","Cannot edit in read-only input"):tz.NC("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};ReadOnlyMessageController.ID="editor.contrib.readOnlyMessageController",(0,tB._K)(ReadOnlyMessageController.ID,ReadOnlyMessageController,2);var d_=i(41212),dv=i(98051),contribution_param=function(e,t){return function(i,n){t(i,n,e)}};let dC=class extends t2.JT{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=(0,rp.uh)(this,void 0);let n=(0,rp.aq)("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),o=(0,rp.aq)("_textModel.onDidChangeContent",iM.ju.debounce(e=>this._textModel.onDidChangeContent(e),()=>void 0,100));this._register((0,rp.gp)(async(e,t)=>{n.read(e),o.read(e);let i=t.add(new dv.t2),r=await this._outlineModelService.getOrCreate(this._textModel,i.token);t.isDisposed||this._currentModel.set(r,void 0)}))}getBreadcrumbItems(e,t){let i=this._currentModel.read(t);if(!i)return[];let n=i.asListOfDocumentSymbols().filter(t=>e.contains(t.range.startLineNumber)&&!e.contains(t.range.endLineNumber));return n.sort((0,ia.BV)((0,ia.tT)(e=>e.range.endLineNumber-e.range.startLineNumber,ia.fv))),n.map(e=>({name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber}))}};dC=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([contribution_param(1,ib.p),contribution_param(2,s0)],dC),d_.O.setBreadcrumbsSourceFactory((e,t)=>t.createInstance(dC,e));var db=i(27);i(76259);let IPadShowKeyboard=class IPadShowKeyboard extends t2.JT{constructor(e){super(),this.editor=e,this.widget=null,io.gn&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){let e=!this.editor.getOption(91);!this.widget&&e?this.widget=new ShowKeyboardWidget(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};IPadShowKeyboard.ID="editor.contrib.iPadShowKeyboard";let ShowKeyboardWidget=class ShowKeyboardWidget extends t2.JT{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(tO.nm(this._domNode,"touchstart",e=>{this.editor.focus()})),this._register(tO.nm(this._domNode,"focus",e=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return ShowKeyboardWidget.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};ShowKeyboardWidget.ID="editor.contrib.ShowKeyboardWidget",(0,tB._K)(IPadShowKeyboard.ID,IPadShowKeyboard,3),i(59053);var dS=i(91957),dy=i(12429),dw=i(63589),inspectTokens_param=function(e,t){return function(i,n){t(i,n,e)}};let dL=e0=class extends t2.JT{static get(e){return e.getContribution(e0.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(e=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(e=>this.stop())),this._register(ov.RW.onDidChange(e=>this.stop())),this._register(this._editor.onKeyUp(e=>9===e.keyCode&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){!this._widget&&this._editor.hasModel()&&(this._widget=new InspectTokensWidget(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};dL.ID="editor.contrib.inspectTokens",dL=e0=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([inspectTokens_param(1,dw.Z),inspectTokens_param(2,n3.O)],dL);let InspectTokens=class InspectTokens extends tB.R6{constructor(){super({id:"editor.action.inspectTokens",label:db.ug.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let i=dL.get(t);null==i||i.launch()}};function renderTokenText(e){let t="";for(let i=0,n=e.length;i<n;i++){let n=e.charCodeAt(i);switch(n){case 9:t+="→";break;case 32:t+="\xb7";break;default:t+=String.fromCharCode(n)}}return t}function getSafeTokenizationSupport(e,t){let i=ov.RW.get(t);if(i)return i;let n=e.encodeLanguageId(t);return{getInitialState:()=>dy.TJ,tokenize:(e,i,n)=>(0,dy.Ri)(t,n),tokenizeEncoded:(e,t,i)=>(0,dy.Dy)(n,i)}}let InspectTokensWidget=class InspectTokensWidget extends t2.JT{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=getSafeTokenizationSupport(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(e=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return InspectTokensWidget._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),i=0;for(let n=t.tokens1.length-1;n>=0;n--){let o=t.tokens1[n];if(e.column-1>=o.offset){i=n;break}}let n=0;for(let i=t.tokens2.length>>>1;i>=0;i--)if(e.column-1>=t.tokens2[i<<1]){n=i;break}let o=this._model.getLineContent(e.lineNumber),r="";if(i<t.tokens1.length){let e=t.tokens1[i].offset,n=i+1<t.tokens1.length?t.tokens1[i+1].offset:o.length;r=o.substring(e,n)}(0,tO.mc)(this._domNode,(0,tO.$)("h2.tm-token",void 0,renderTokenText(r),(0,tO.$)("span.tm-token-length",void 0,`${r.length} ${1===r.length?"char":"chars"}`))),(0,tO.R3)(this._domNode,(0,tO.$)("hr.tokens-inspect-separator",{style:"clear:both"}));let s=(n<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(n<<1)+1]):null;(0,tO.R3)(this._domNode,(0,tO.$)("table.tm-metadata-table",void 0,(0,tO.$)("tbody",void 0,(0,tO.$)("tr",void 0,(0,tO.$)("td.tm-metadata-key",void 0,"language"),(0,tO.$)("td.tm-metadata-value",void 0,`${s?s.languageId:"-?-"}`)),(0,tO.$)("tr",void 0,(0,tO.$)("td.tm-metadata-key",void 0,"token type"),(0,tO.$)("td.tm-metadata-value",void 0,`${s?this._tokenTypeToString(s.tokenType):"-?-"}`)),(0,tO.$)("tr",void 0,(0,tO.$)("td.tm-metadata-key",void 0,"font style"),(0,tO.$)("td.tm-metadata-value",void 0,`${s?this._fontStyleToString(s.fontStyle):"-?-"}`)),(0,tO.$)("tr",void 0,(0,tO.$)("td.tm-metadata-key",void 0,"foreground"),(0,tO.$)("td.tm-metadata-value",void 0,`${s?nU.Il.Format.CSS.formatHex(s.foreground):"-?-"}`)),(0,tO.$)("tr",void 0,(0,tO.$)("td.tm-metadata-key",void 0,"background"),(0,tO.$)("td.tm-metadata-value",void 0,`${s?nU.Il.Format.CSS.formatHex(s.background):"-?-"}`))))),(0,tO.R3)(this._domNode,(0,tO.$)("hr.tokens-inspect-separator")),i<t.tokens1.length&&(0,tO.R3)(this._domNode,(0,tO.$)("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=ov.RW.getColorMap(),i=dS.N.getLanguageId(e),n=dS.N.getTokenType(e),o=dS.N.getFontStyle(e),r=dS.N.getForeground(e),s=dS.N.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:n,fontStyle:o,foreground:t[r],background:t[s]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),8&e&&(t+="strikethrough "),0===t.length&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),n=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:n.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++){let e=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t);t=e.endState}return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};InspectTokensWidget._ID="editor.contrib.inspectTokensWidget",(0,tB._K)(dL.ID,dL,4),(0,tB.Qr)(InspectTokens);var dk=i(34526),helpQuickAccess_param=function(e,t){return function(i,n){t(i,n,e)}};let dD=e1=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=im.B.as(dk.IP.Quickaccess)}provide(e){let t=new t2.SL;return t.add(e.onDidAccept(()=>{let[t]=e.selectedItems;t&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(e=>{let t=this.registry.getQuickAccessProvider(e.substr(e1.PREFIX.length));t&&t.prefix&&t.prefix!==e1.PREFIX&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(e=>e.prefix!==e1.PREFIX),t}getQuickAccessProviders(){let e=this.registry.getQuickAccessProviders().sort((e,t)=>e.prefix.localeCompare(t.prefix)).flatMap(e=>this.createPicks(e));return e}createPicks(e){return e.helpEntries.map(t=>{let i=t.prefix||e.prefix,n=i||"…";return{prefix:i,label:n,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:(0,tz.NC)("helpPickAriaLabel","{0}, {1}",n,t.description),description:t.description}})}};dD.PREFIX="?",dD=e1=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([helpQuickAccess_param(0,iE.eJ),helpQuickAccess_param(1,iA.d)],dD),im.B.as(dk.IP.Quickaccess).registerQuickAccessProvider({ctor:dD,prefix:"",helpEntries:[{description:db.ld.helpQuickAccessActionLabel}]});var dx=i(61080);let AbstractEditorNavigationQuickAccessProvider=class AbstractEditorNavigationQuickAccessProvider{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;let n=new t2.SL;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o=n.add(new t2.XK);return o.value=this.doProvide(e,t),n.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),n}doProvide(e,t){var i;let n=new t2.SL,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){let r={editor:o},s=(0,o_.Pi)(o);if(s){let e=null!==(i=o.saveViewState())&&void 0!==i?i:void 0;n.add(s.onDidChangeCursorPosition(()=>{var t;e=null!==(t=o.saveViewState())&&void 0!==t?t:void 0})),r.restoreViewState=()=>{e&&o===this.activeTextEditorControl&&o.restoreViewState(e)},n.add((0,dx.M)(t.onCancellationRequested)(()=>{var e;return null===(e=r.restoreViewState)||void 0===e?void 0:e.call(r)}))}n.add((0,t2.OF)(()=>this.clearDecorations(o))),n.add(this.provideWithTextEditor(r,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();let i=e.getModel();i&&"getLineContent"in i&&(0,tQ.i7)(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return(0,o_.QI)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(e=>{let i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);let n=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,t9.EN)(rW.m9),position:t3.sh.Full}}}],[o,r]=e.deltaDecorations(i,n);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:r}})}clearDecorations(e){let t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}};let AbstractGotoLineQuickAccessProvider=class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){let t=(0,tz.NC)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,t2.JT.None}provideWithTextEditor(e,t,i){let n=e.editor,o=new t2.SL;o.add(t.onDidAccept(i=>{let[o]=t.selectedItems;if(o){if(!this.isValidLineNumber(n,o.lineNumber))return;this.gotoLocation(e,{range:this.toRange(o.lineNumber,o.column),keyMods:t.keyMods,preserveFocus:i.inBackground}),i.inBackground||t.hide()}}));let updatePickerAndEditor=()=>{let e=this.parsePosition(n,t.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length)),i=this.getPickLabel(n,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,!this.isValidLineNumber(n,e.lineNumber)){this.clearDecorations(n);return}let o=this.toRange(e.lineNumber,e.column);n.revealRangeInCenter(o,0),this.addDecorations(n,o)};updatePickerAndEditor(),o.add(t.onDidChangeValue(()=>updatePickerAndEditor()));let r=(0,o_.Pi)(n);if(r){let e=r.getOptions(),t=e.get(68);2===t.renderType&&(r.updateOptions({lineNumbers:"on"}),o.add((0,t2.OF)(()=>r.updateOptions({lineNumbers:"relative"}))))}return o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){let i=t.split(/,|:|#/).map(e=>parseInt(e,10)).filter(e=>!isNaN(e)),n=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:n+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,tz.NC)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,tz.NC)("gotoLineLabel","Go to line {0}.",t);let n=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?(0,tz.NC)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,o):(0,tz.NC)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!!t&&"number"==typeof t&&t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||"number"!=typeof i)return!1;let n=this.getModel(e);if(!n)return!1;let o={lineNumber:t,column:i};return n.validatePosition(o).equals(o)}lineCount(e){var t,i;return null!==(i=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==i?i:0}};AbstractGotoLineQuickAccessProvider.PREFIX=":";let dN=class extends AbstractGotoLineQuickAccessProvider{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=iM.ju.None}get activeTextEditorControl(){var e;return null!==(e=this.editorService.getFocusedCodeEditor())&&void 0!==e?e:void 0}};dN=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([(F=tW.$,function(e,t){F(e,t,0)})],dN);let GotoLineAction=class GotoLineAction extends tB.R6{constructor(){super({id:GotoLineAction.ID,label:db.qq.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(iE.eJ).quickAccess.show(dN.PREFIX)}};GotoLineAction.ID="editor.action.gotoLine",(0,tB.Qr)(GotoLineAction),im.B.as(dk.IP.Quickaccess).registerQuickAccessProvider({ctor:dN,prefix:dN.PREFIX,helpEntries:[{description:db.qq.gotoLineActionLabel,commandId:GotoLineAction.ID}]});let dE=[void 0,[]];function scoreFuzzy2(e,t,i=0,n=0){return t.values&&t.values.length>1?doScoreFuzzy2Multiple(e,t.values,i,n):doScoreFuzzy2Single(e,t,i,n)}function doScoreFuzzy2Multiple(e,t,i,n){let o=0,r=[];for(let s of t){let[t,l]=doScoreFuzzy2Single(e,s,i,n);if("number"!=typeof t)return dE;o+=t,r.push(...l)}return[o,normalizeMatches(r)]}function doScoreFuzzy2Single(e,t,i,n){let o=(0,oN.EW)(t.original,t.originalLowercase,i,e,e.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return o?[o[0],(0,oN.mB)(o)]:dE}function normalizeMatches(e){let t;let i=e.sort((e,t)=>e.start-t.start),n=[];for(let e of i)t&&matchOverlaps(t,e)?(t.start=Math.min(t.start,e.start),t.end=Math.max(t.end,e.end)):(t=e,n.push(e));return n}function matchOverlaps(e,t){return!(e.end<t.start)&&!(t.end<e.start)}function queryExpectsExactMatch(e){return e.startsWith('"')&&e.endsWith('"')}function prepareQuery(e){let t;"string"!=typeof e&&(e="");let i=e.toLowerCase(),{pathNormalized:n,normalized:o,normalizedLowercase:r}=normalizeQuery(e),s=n.indexOf(a_.ir)>=0,l=queryExpectsExactMatch(e),d=e.split(" ");if(d.length>1)for(let e of d){let i=queryExpectsExactMatch(e),{pathNormalized:n,normalized:o,normalizedLowercase:r}=normalizeQuery(e);o&&(t||(t=[]),t.push({original:e,originalLowercase:e.toLowerCase(),pathNormalized:n,normalized:o,normalizedLowercase:r,expectContiguousMatch:i}))}return{original:e,originalLowercase:i,pathNormalized:n,normalized:o,normalizedLowercase:r,values:t,containsPathSeparator:s,expectContiguousMatch:l}}function normalizeQuery(e){let t;t=io.ED?e.replace(/\//g,a_.ir):e.replace(/\\/g,a_.ir);let i=(0,iy.R1)(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:i,normalizedLowercase:i.toLowerCase()}}function pieceToQuery(e){return Array.isArray(e)?prepareQuery(e.map(e=>e.original).join(" ")):prepareQuery(e.original)}Object.freeze({score:0});var gotoSymbolQuickAccess_param=function(e,t){return function(i,n){t(i,n,e)}};let dI=e2=class extends AbstractEditorNavigationQuickAccessProvider{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,tz.NC)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),t2.JT.None}provideWithTextEditor(e,t,i){let n=e.editor,o=this.getModel(n);return o?this._languageFeaturesService.documentSymbolProvider.has(o)?this.doProvideWithEditorSymbols(e,o,t,i):this.doProvideWithoutEditorSymbols(e,o,t,i):t2.JT.None}doProvideWithoutEditorSymbols(e,t,i,n){let o=new t2.SL;return this.provideLabelPick(i,(0,tz.NC)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>{let r=await this.waitForLanguageSymbolRegistry(t,o);r&&!n.isCancellationRequested&&o.add(this.doProvideWithEditorSymbols(e,t,i,n))})(),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;let i=new t1.CR,n=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(n.dispose(),i.complete(!0))}));return t.add((0,t2.OF)(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,n){var o;let r;let s=e.editor,l=new t2.SL;l.add(i.onDidAccept(t=>{let[n]=i.selectedItems;n&&n.range&&(this.gotoLocation(e,{range:n.range.selection,keyMods:i.keyMods,preserveFocus:t.inBackground}),t.inBackground||i.hide())})),l.add(i.onDidTriggerItemButton(({item:t})=>{t&&t.range&&(this.gotoLocation(e,{range:t.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));let d=this.getDocumentSymbols(t,n),updatePickerItems=async e=>{null==r||r.dispose(!0),i.busy=!1,r=new i0.A(n),i.busy=!0;try{let t=prepareQuery(i.value.substr(e2.PREFIX.length).trim()),o=await this.doGetSymbolPicks(d,t,void 0,r.token);if(n.isCancellationRequested)return;if(o.length>0){if(i.items=o,e&&0===t.original.length){let t=(0,rV.dF)(o,t=>!!("separator"!==t.type&&t.range&&t4.e.containsPosition(t.range.decoration,e)));t&&(i.activeItems=[t])}}else t.original.length>0?this.provideLabelPick(i,(0,tz.NC)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,tz.NC)("noSymbolResults","No editor symbols"))}finally{n.isCancellationRequested||(i.busy=!1)}};return l.add(i.onDidChangeValue(()=>updatePickerItems(void 0))),updatePickerItems(null===(o=s.getSelection())||void 0===o?void 0:o.getPosition()),l.add(i.onDidChangeActive(()=>{let[e]=i.activeItems;e&&e.range&&(s.revealRangeInCenter(e.range.selection,0),this.addDecorations(s,e.range.decoration))})),l}async doGetSymbolPicks(e,t,i,n){var o,r;let s,l,d;let c=await e;if(n.isCancellationRequested)return[];let u=0===t.original.indexOf(e2.SCOPE_PREFIX),g=u?1:0;t.values&&t.values.length>1?(s=pieceToQuery(t.values[0]),l=pieceToQuery(t.values.slice(1))):s=t;let m=null===(r=null===(o=this.options)||void 0===o?void 0:o.openSideBySideDirection)||void 0===r?void 0:r.call(o);m&&(d=[{iconClass:"right"===m?iw.k.asClassName(tF.l.splitHorizontal):iw.k.asClassName(tF.l.splitVertical),tooltip:"right"===m?(0,tz.NC)("openToSide","Open to the Side"):(0,tz.NC)("openToBottom","Open to the Bottom")}]);let f=[];for(let e=0;e<c.length;e++){let n,o,r,u;let m=c[e],_=(0,iy.fy)(m.name),v=`$(${ov.uZ.toIcon(m.kind).id}) ${_}`,C=v.length-_.length,b=m.containerName;if((null==i?void 0:i.extraContainerLabel)&&(b=b?`${i.extraContainerLabel} • ${b}`:i.extraContainerLabel),t.original.length>g){let e=!1;if(s!==t&&([n,o]=scoreFuzzy2(v,{...t,values:void 0},g,C),"number"==typeof n&&(e=!0)),"number"!=typeof n&&([n,o]=scoreFuzzy2(v,s,g,C),"number"!=typeof n))continue;if(!e&&l){if(b&&l.original.length>0&&([r,u]=scoreFuzzy2(b,l)),"number"!=typeof r)continue;"number"==typeof n&&(n+=r)}}let S=m.tags&&m.tags.indexOf(1)>=0;f.push({index:e,kind:m.kind,score:n,label:v,ariaLabel:(0,ov.R4)(m.name,m.kind),description:b,highlights:S?void 0:{label:o,description:u},range:{selection:t4.e.collapseToStart(m.selectionRange),decoration:m.range},strikethrough:S,buttons:d})}let _=f.sort((e,t)=>u?this.compareByKindAndScore(e,t):this.compareByScore(e,t)),v=[];if(u){let e,t;let i=0;function updateLastSeparatorLabel(){t&&"number"==typeof e&&i>0&&(t.label=(0,iy.WU)(dM[e]||dT,i))}for(let n of _)e!==n.kind?(updateLastSeparatorLabel(),e=n.kind,i=1,t={type:"separator"},v.push(t)):i++,v.push(n);updateLastSeparatorLabel()}else _.length>0&&(v=[{label:(0,tz.NC)("symbols","symbols ({0})",f.length),type:"separator"},..._]);return v}compareByScore(e,t){if("number"!=typeof e.score&&"number"==typeof t.score)return 1;if("number"==typeof e.score&&"number"!=typeof t.score)return -1;if("number"==typeof e.score&&"number"==typeof t.score){if(e.score>t.score)return -1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){let i=dM[e.kind]||dT,n=dM[t.kind]||dT,o=i.localeCompare(n);return 0===o?this.compareByScore(e,t):o}async getDocumentSymbols(e,t){let i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}};dI.PREFIX="@",dI.SCOPE_PREFIX=":",dI.PREFIX_BY_CATEGORY=`${e2.PREFIX}${e2.SCOPE_PREFIX}`,dI=e2=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([gotoSymbolQuickAccess_param(0,ib.p),gotoSymbolQuickAccess_param(1,s0)],dI);let dT=(0,tz.NC)("property","properties ({0})"),dM={5:(0,tz.NC)("method","methods ({0})"),11:(0,tz.NC)("function","functions ({0})"),8:(0,tz.NC)("_constructor","constructors ({0})"),12:(0,tz.NC)("variable","variables ({0})"),4:(0,tz.NC)("class","classes ({0})"),22:(0,tz.NC)("struct","structs ({0})"),23:(0,tz.NC)("event","events ({0})"),24:(0,tz.NC)("operator","operators ({0})"),10:(0,tz.NC)("interface","interfaces ({0})"),2:(0,tz.NC)("namespace","namespaces ({0})"),3:(0,tz.NC)("package","packages ({0})"),25:(0,tz.NC)("typeParameter","type parameters ({0})"),1:(0,tz.NC)("modules","modules ({0})"),6:(0,tz.NC)("property","properties ({0})"),9:(0,tz.NC)("enum","enumerations ({0})"),21:(0,tz.NC)("enumMember","enumeration members ({0})"),14:(0,tz.NC)("string","strings ({0})"),0:(0,tz.NC)("file","files ({0})"),17:(0,tz.NC)("array","arrays ({0})"),15:(0,tz.NC)("number","numbers ({0})"),16:(0,tz.NC)("boolean","booleans ({0})"),18:(0,tz.NC)("object","objects ({0})"),19:(0,tz.NC)("key","keys ({0})"),7:(0,tz.NC)("field","fields ({0})"),13:(0,tz.NC)("constant","constants ({0})")};var standaloneGotoSymbolQuickAccess_param=function(e,t){return function(i,n){t(i,n,e)}};let dR=class extends dI{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=iM.ju.None}get activeTextEditorControl(){var e;return null!==(e=this.editorService.getFocusedCodeEditor())&&void 0!==e?e:void 0}};dR=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([standaloneGotoSymbolQuickAccess_param(0,tW.$),standaloneGotoSymbolQuickAccess_param(1,ib.p),standaloneGotoSymbolQuickAccess_param(2,s0)],dR);let GotoSymbolAction=class GotoSymbolAction extends tB.R6{constructor(){super({id:GotoSymbolAction.ID,label:db.aq.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:tH.u.hasDocumentSymbolProvider,kbOpts:{kbExpr:tH.u.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(iE.eJ).quickAccess.show(dI.PREFIX,{itemActivation:iE.jG.NONE})}};GotoSymbolAction.ID="editor.action.quickOutline",(0,tB.Qr)(GotoSymbolAction),im.B.as(dk.IP.Quickaccess).registerQuickAccessProvider({ctor:dR,prefix:dI.PREFIX,helpEntries:[{description:db.aq.quickOutlineActionLabel,prefix:dI.PREFIX,commandId:GotoSymbolAction.ID},{description:db.aq.quickOutlineByCategoryActionLabel,prefix:dI.PREFIX_BY_CATEGORY}]});var dA=i(42385);function exceptionToErrorMessage(e,t){return t&&(e.stack||e.stacktrace)?tz.NC("stackTrace.format","{0}: {1}",detectSystemErrorMessage(e),stackToString(e.stack)||stackToString(e.stacktrace)):detectSystemErrorMessage(e)}function stackToString(e){return Array.isArray(e)?e.join("\n"):e}function detectSystemErrorMessage(e){return"ERR_UNC_HOST_NOT_ALLOWED"===e.code?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?tz.NC("nodeExceptionMessage","A system error occurred ({0})",e.message):e.message||tz.NC("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function toErrorMessage(e=null,t=!1){if(!e)return tz.NC("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){let i=ia.kX(e),n=toErrorMessage(i[0],t);return i.length>1?tz.NC("error.moreErrors","{0} ({1} errors in total)",n,i.length):n}if(nR.HD(e))return e;if(e.detail){let i=e.detail;if(i.error)return exceptionToErrorMessage(i.error,t);if(i.exception)return exceptionToErrorMessage(i.exception,t)}return e.stack?exceptionToErrorMessage(e,t):e.message?e.message:tz.NC("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function countMapFrom(e){var t;let i=new Map;for(let n of e)i.set(n,(null!==(t=i.get(n))&&void 0!==t?t:0)+1);return i}let TfIdfCalculator=class TfIdfCalculator{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){let i=this.computeEmbedding(e),n=new Map,o=[];for(let[e,r]of this.documents){if(t.isCancellationRequested)return[];for(let t of r.chunks){let r=this.computeSimilarityScore(t,i,n);r>0&&o.push({key:e,score:r})}}return o}static termFrequencies(e){return countMapFrom(TfIdfCalculator.splitTerms(e))}static*splitTerms(e){let normalize=e=>e.toLowerCase();for(let[t]of e.matchAll(/\b\p{Letter}[\p{Letter}\d]{2,}\b/gu)){yield normalize(t);let e=t.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(e.length>1)for(let t of e)t.length>2&&/\p{Letter}{3,}/gu.test(t)&&(yield normalize(t))}}updateDocuments(e){var t;for(let{key:t}of e)this.deleteDocument(t);for(let i of e){let e=[];for(let n of i.textChunks){let i=TfIdfCalculator.termFrequencies(n);for(let e of i.keys())this.chunkOccurrences.set(e,(null!==(t=this.chunkOccurrences.get(e))&&void 0!==t?t:0)+1);e.push({text:n,tf:i})}this.chunkCount+=e.length,this.documents.set(i.key,{chunks:e})}return this}deleteDocument(e){let t=this.documents.get(e);if(t)for(let i of(this.documents.delete(e),this.chunkCount-=t.chunks.length,t.chunks))for(let e of i.tf.keys()){let t=this.chunkOccurrences.get(e);if("number"==typeof t){let i=t-1;i<=0?this.chunkOccurrences.delete(e):this.chunkOccurrences.set(e,i)}}}computeSimilarityScore(e,t,i){let n=0;for(let[o,r]of Object.entries(t)){let t=e.tf.get(o);if(!t)continue;let s=i.get(o);"number"!=typeof s&&(s=this.computeIdf(o),i.set(o,s));let l=t*s;n+=l*r}return n}computeEmbedding(e){let t=TfIdfCalculator.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){var t;let i=null!==(t=this.chunkOccurrences.get(e))&&void 0!==t?t:0;return i>0?Math.log((this.chunkCount+1)/i):0}computeTfidf(e){let t=Object.create(null);for(let[i,n]of e){let e=this.computeIdf(i);e>0&&(t[i]=n*e)}return t}};function normalizeTfIdfScores(e){var t,i;let n=e.slice(0);n.sort((e,t)=>t.score-e.score);let o=null!==(i=null===(t=n[0])||void 0===t?void 0:t.score)&&void 0!==i?i:0;if(o>0)for(let e of n)e.score/=o;return n}function isPicksWithActive(e){return Array.isArray(e.items)}function isFastAndSlowPicks(e){return!!e.picks&&e.additionalPicks instanceof Promise}(B=e5||(e5={}))[B.NO_ACTION=0]="NO_ACTION",B[B.CLOSE_PICKER=1]="CLOSE_PICKER",B[B.REFRESH_PICKER=2]="REFRESH_PICKER",B[B.REMOVE_ITEM=3]="REMOVE_ITEM";let PickerQuickAccessProvider=class PickerQuickAccessProvider extends t2.JT{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var n;let o;let r=new t2.SL;e.canAcceptInBackground=!!(null===(n=this.options)||void 0===n?void 0:n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s=r.add(new t2.XK),updatePickerItems=async()=>{var n;let r=s.value=new t2.SL;null==o||o.dispose(!0),e.busy=!1,o=new i0.A(t);let l=o.token,d=e.value.substring(this.prefix.length);(null===(n=this.options)||void 0===n?void 0:n.shouldSkipTrimPickFilter)||(d=d.trim());let c=this._getPicks(d,r,l,i),applyPicks=(t,i)=>{var n;let o,r;if(isPicksWithActive(t)?(o=t.items,r=t.active):o=t,0===o.length){if(i)return!1;(d.length>0||e.hideInput)&&(null===(n=this.options)||void 0===n?void 0:n.noResultsPick)&&(o=(0,nR.mf)(this.options.noResultsPick)?[this.options.noResultsPick(d)]:[this.options.noResultsPick])}return e.items=o,r&&(e.activeItems=[r]),!0},applyFastAndSlowPicks=async t=>{let i=!1,n=!1;await Promise.all([(async()=>{("number"!=typeof t.mergeDelay||(await (0,t1.Vs)(t.mergeDelay),!l.isCancellationRequested))&&(n||(i=applyPicks(t.picks,!0)))})(),(async()=>{e.busy=!0;try{let n,o,r,s;let d=await t.additionalPicks;if(l.isCancellationRequested)return;if(isPicksWithActive(t.picks)?(n=t.picks.items,r=t.picks.active):n=t.picks,isPicksWithActive(d)?(o=d.items,s=d.active):o=d,o.length>0||!i){let t;if(!r&&!s){let i=e.activeItems[0];i&&-1!==n.indexOf(i)&&(t=i)}applyPicks({items:[...n,...o],active:r||s||t})}}finally{l.isCancellationRequested||(e.busy=!1),n=!0}})()])};if(null===c);else if(isFastAndSlowPicks(c))await applyFastAndSlowPicks(c);else if(c instanceof Promise){e.busy=!0;try{let e=await c;if(l.isCancellationRequested)return;isFastAndSlowPicks(e)?await applyFastAndSlowPicks(e):applyPicks(e)}finally{l.isCancellationRequested||(e.busy=!1)}}else applyPicks(c)};return r.add(e.onDidChangeValue(()=>updatePickerItems())),updatePickerItems(),r.add(e.onDidAccept(t=>{let[i]=e.selectedItems;"function"==typeof(null==i?void 0:i.accept)&&(t.inBackground||e.hide(),i.accept(e.keyMods,t))})),r.add(e.onDidTriggerItemButton(async({button:i,item:n})=>{var o,r;if("function"==typeof n.trigger){let s=null!==(r=null===(o=n.buttons)||void 0===o?void 0:o.indexOf(i))&&void 0!==r?r:-1;if(s>=0){let i=n.trigger(s,e.keyMods),o="number"==typeof i?i:await i;if(t.isCancellationRequested)return;switch(o){case e5.NO_ACTION:break;case e5.CLOSE_PICKER:e.hide();break;case e5.REFRESH_PICKER:updatePickerItems();break;case e5.REMOVE_ITEM:{let t=e.items.indexOf(n);if(-1!==t){let i=e.items.slice(),n=i.splice(t,1),o=e.activeItems.filter(e=>e!==n[0]),r=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=i,o&&(e.activeItems=o),e.keepScrollPosition=r}}}}}})),r}};var commandsQuickAccess_decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},commandsQuickAccess_param=function(e,t){return function(i,n){t(i,n,e)}};let dP=e4=class extends PickerQuickAccessProvider{constructor(e,t,i,n,o,r){super(e4.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=n,this.telemetryService=o,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(dO)),this.options=e}async _getPicks(e,t,i,n){var o,r,s,l;let d=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];let c=(0,dx.M)(()=>{let t=new TfIdfCalculator;t.updateDocuments(d.map(e=>({key:e.commandId,textChunks:[this.getTfIdfChunk(e)]})));let n=t.calculateScores(e,i);return normalizeTfIdfScores(n).filter(e=>e.score>e4.TFIDF_THRESHOLD).slice(0,e4.TFIDF_MAX_RESULTS)}),u=[];for(let t of d){let n=null!==(o=e4.WORD_FILTER(e,t.label))&&void 0!==o?o:void 0,s=t.commandAlias&&null!==(r=e4.WORD_FILTER(e,t.commandAlias))&&void 0!==r?r:void 0;if(n||s)t.highlights={label:n,detail:this.options.showAlias?s:void 0},u.push(t);else if(e===t.commandId)u.push(t);else if(e.length>=3){let e=c();if(i.isCancellationRequested)return[];let n=e.find(e=>e.key===t.commandId);n&&(t.tfIdfScore=n.score,u.push(t))}}let g=new Map;for(let e of u){let t=g.get(e.label);t?(e.description=e.commandId,t.description=t.commandId):g.set(e.label,e)}u.sort((e,t)=>{if(e.tfIdfScore&&t.tfIdfScore)return e.tfIdfScore===t.tfIdfScore?e.label.localeCompare(t.label):t.tfIdfScore-e.tfIdfScore;if(e.tfIdfScore)return 1;if(t.tfIdfScore)return -1;let i=this.commandsHistory.peek(e.commandId),n=this.commandsHistory.peek(t.commandId);if(i&&n)return i>n?-1:1;if(i)return -1;if(n)return 1;if(this.options.suggestedCommandIds){let i=this.options.suggestedCommandIds.has(e.commandId),n=this.options.suggestedCommandIds.has(t.commandId);if(i&&n)return 0;if(i)return -1;if(n)return 1}return e.label.localeCompare(t.label)});let m=[],f=!1,_=!0,v=!!this.options.suggestedCommandIds;for(let e=0;e<u.length;e++){let t=u[e];0===e&&this.commandsHistory.peek(t.commandId)&&(m.push({type:"separator",label:(0,tz.NC)("recentlyUsed","recently used")}),f=!0),_&&void 0!==t.tfIdfScore&&(m.push({type:"separator",label:(0,tz.NC)("suggested","similar commands")}),_=!1),v&&void 0===t.tfIdfScore&&!this.commandsHistory.peek(t.commandId)&&(null===(s=this.options.suggestedCommandIds)||void 0===s?void 0:s.has(t.commandId))&&(m.push({type:"separator",label:(0,tz.NC)("commonlyUsed","commonly used")}),f=!0,v=!1),!f||void 0!==t.tfIdfScore||this.commandsHistory.peek(t.commandId)||(null===(l=this.options.suggestedCommandIds)||void 0===l?void 0:l.has(t.commandId))||(m.push({type:"separator",label:(0,tz.NC)("morecCommands","other commands")}),f=!1),m.push(this.toCommandPick(t,n))}return this.hasAdditionalCommandPicks(e,i)?{picks:m,additionalPicks:(async()=>{var t;let o=await this.getAdditionalCommandPicks(d,u,e,i);if(i.isCancellationRequested)return[];let r=o.map(e=>this.toCommandPick(e,n));return _&&(null===(t=r[0])||void 0===t?void 0:t.type)!=="separator"&&r.unshift({type:"separator",label:(0,tz.NC)("suggested","similar commands")}),r})()}:m}toCommandPick(e,t){if("separator"===e.type)return e;let i=this.keybindingService.lookupKeybinding(e.commandId),n=i?(0,tz.NC)("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:n,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var i,n;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:null!==(i=null==t?void 0:t.from)&&void 0!==i?i:"quick open"});try{(null===(n=e.args)||void 0===n?void 0:n.length)?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(t){(0,i1.n2)(t)||this.dialogService.error((0,tz.NC)("canNotRun","Command '{0}' resulted in an error",e.label),toErrorMessage(t))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let n=e;return t&&t!==e&&(n+=` - ${t}`),i&&i.value!==e&&(n+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),n}};dP.PREFIX=">",dP.TFIDF_THRESHOLD=.5,dP.TFIDF_MAX_RESULTS=5,dP.WORD_FILTER=(0,oN.or)(oN.Ji,oN.KZ,oN.ir),dP=e4=commandsQuickAccess_decorate([commandsQuickAccess_param(1,iL.TG),commandsQuickAccess_param(2,iA.d),commandsQuickAccess_param(3,tK.H),commandsQuickAccess_param(4,i4.b),commandsQuickAccess_param(5,da.S)],dP);let dO=e3=class extends t2.JT{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===nP.fk.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){(!e||e.affectsConfiguration("workbench.commandPalette.history"))&&(this.configuredCommandsHistoryLength=e3.getConfiguredCommandHistoryLength(this.configurationService),e3.cache&&e3.cache.limit!==this.configuredCommandsHistoryLength&&(e3.cache.limit=this.configuredCommandsHistoryLength,e3.hasChanges=!0))}load(){let e;let t=this.storageService.get(e3.PREF_KEY_CACHE,0);if(t)try{e=JSON.parse(t)}catch(e){}let i=e3.cache=new nA.z6(this.configuredCommandsHistoryLength,1);e&&(e.usesLRU?e.entries:e.entries.sort((e,t)=>e.value-t.value)).forEach(e=>i.set(e.key,e.value)),e3.counter=this.storageService.getNumber(e3.PREF_KEY_COUNTER,0,e3.counter)}push(e){e3.cache&&(e3.cache.set(e,e3.counter++),e3.hasChanges=!0)}peek(e){var t;return null===(t=e3.cache)||void 0===t?void 0:t.peek(e)}saveState(){if(!e3.cache||!e3.hasChanges)return;let e={usesLRU:!0,entries:[]};e3.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(e3.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(e3.PREF_KEY_COUNTER,e3.counter,0,0),e3.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var t,i;let n=e.getValue(),o=null===(i=null===(t=n.workbench)||void 0===t?void 0:t.commandPalette)||void 0===i?void 0:i.history;return"number"==typeof o?o:e3.DEFAULT_COMMANDS_HISTORY_LENGTH}};dO.DEFAULT_COMMANDS_HISTORY_LENGTH=50,dO.PREF_KEY_CACHE="commandPalette.mru.cache",dO.PREF_KEY_COUNTER="commandPalette.mru.counter",dO.counter=1,dO.hasChanges=!1,dO=e3=commandsQuickAccess_decorate([commandsQuickAccess_param(0,nP.Uy),commandsQuickAccess_param(1,tj.Ui)],dO);let AbstractEditorCommandsQuickAccessProvider=class AbstractEditorCommandsQuickAccessProvider extends dP{constructor(e,t,i,n,o,r){super(e,t,i,n,o,r)}getCodeEditorCommandPicks(){let e=this.activeTextEditorControl;if(!e)return[];let t=[];for(let i of e.getSupportedActions())t.push({commandId:i.id,commandAlias:i.alias,label:(0,dA.x$)(i.label)||i.id});return t}};var standaloneCommandsQuickAccess_param=function(e,t){return function(i,n){t(i,n,e)}};let dF=class extends AbstractEditorCommandsQuickAccessProvider{get activeTextEditorControl(){var e;return null!==(e=this.codeEditorService.getFocusedCodeEditor())&&void 0!==e?e:void 0}constructor(e,t,i,n,o,r){super({showAlias:!1},e,i,n,o,r),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};dF=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([standaloneCommandsQuickAccess_param(0,iL.TG),standaloneCommandsQuickAccess_param(1,tW.$),standaloneCommandsQuickAccess_param(2,iA.d),standaloneCommandsQuickAccess_param(3,tK.H),standaloneCommandsQuickAccess_param(4,i4.b),standaloneCommandsQuickAccess_param(5,da.S)],dF);let standaloneCommandsQuickAccess_GotoLineAction=class standaloneCommandsQuickAccess_GotoLineAction extends tB.R6{constructor(){super({id:standaloneCommandsQuickAccess_GotoLineAction.ID,label:db.UX.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:tH.u.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(iE.eJ).quickAccess.show(dF.PREFIX)}};standaloneCommandsQuickAccess_GotoLineAction.ID="editor.action.quickCommand",(0,tB.Qr)(standaloneCommandsQuickAccess_GotoLineAction),im.B.as(dk.IP.Quickaccess).registerQuickAccessProvider({ctor:dF,prefix:dF.PREFIX,helpEntries:[{description:db.UX.quickCommandHelp,commandId:standaloneCommandsQuickAccess_GotoLineAction.ID}]});var standaloneReferenceSearch_param=function(e,t){return function(i,n){t(i,n,e)}};let dB=class extends oB{constructor(e,t,i,n,o,r,s){super(!0,e,t,i,n,o,r,s)}};dB=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}([standaloneReferenceSearch_param(1,tq.i6),standaloneReferenceSearch_param(2,tW.$),standaloneReferenceSearch_param(3,i5.lT),standaloneReferenceSearch_param(4,iL.TG),standaloneReferenceSearch_param(5,nP.Uy),standaloneReferenceSearch_param(6,tj.Ui)],dB),(0,tB._K)(oB.ID,dB,4);var dW=i(32204);let ToggleHighContrast=class ToggleHighContrast extends tB.R6{constructor(){super({id:"editor.action.toggleHighContrast",label:db.xi.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){let i=e.get(dw.Z),n=i.getColorTheme();(0,nw.c3)(n.type)?(i.setTheme(this._originalThemeName||((0,nw._T)(n.type)?dW.rW:dW.TG)),this._originalThemeName=null):(i.setTheme((0,nw._T)(n.type)?dW.kR:dW.MU),this._originalThemeName=n.themeName)}};(0,tB.Qr)(ToggleHighContrast);var dV=i(97546);let createMutex=()=>{let e=!0;return(t,i)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==i&&i()}};let RelativeSelection=class RelativeSelection{constructor(e,t,i){this.start=e,this.end=t,this.direction=i}};let createRelativeSelection=(e,t,i)=>{let n=e.getSelection();if(null!==n){let e=n.getStartPosition(),o=n.getEndPosition(),r=e6.w$(i,t.getOffsetAt(e)),s=e6.w$(i,t.getOffsetAt(o));return new RelativeSelection(r,s,n.getDirection())}return null},createMonacoSelectionFromRelativeSelection=(e,t,i,n)=>{let o=e6.or(i.start,n),r=e6.or(i.end,n);if(null!==o&&null!==r&&o.type===t&&r.type===t){let t=e.getModel(),n=t.getPositionAt(o.index),s=t.getPositionAt(r.index);return e7.Selection.createWithDirection(n.lineNumber,n.column,s.lineNumber,s.column,i.direction)}return null};let MonacoBinding=class MonacoBinding{constructor(e,t,i=new Set,n=null){this.doc=e.doc,this.ytext=e,this.monacoModel=t,this.editors=i,this.mux=createMutex(),this._savedSelections=new Map,this._beforeTransaction=()=>{this.mux(()=>{this._savedSelections=new Map,i.forEach(i=>{if(i.getModel()===t){let n=createRelativeSelection(i,t,e);null!==n&&this._savedSelections.set(i,n)}})})},this.doc.on("beforeAllTransactions",this._beforeTransaction),this._decorations=new Map,this._rerenderDecorations=()=>{i.forEach(i=>{if(n&&i.getModel()===t){let o=this._decorations.get(i)||[],r=[];n.getStates().forEach((i,n)=>{if(n!==this.doc.clientID&&null!=i.selection&&null!=i.selection.anchor&&null!=i.selection.head){let o=e6.or(i.selection.anchor,this.doc),s=e6.or(i.selection.head,this.doc);if(null!==o&&null!==s&&o.type===e&&s.type===e){let e,i,l,d;o.index<s.index?(e=t.getPositionAt(o.index),i=t.getPositionAt(s.index),l="yRemoteSelectionHead yRemoteSelectionHead-"+n,d=null):(e=t.getPositionAt(s.index),i=t.getPositionAt(o.index),l=null,d="yRemoteSelectionHead yRemoteSelectionHead-"+n),r.push({range:new e7.Range(e.lineNumber,e.column,i.lineNumber,i.column),options:{className:"yRemoteSelection yRemoteSelection-"+n,afterContentClassName:l,beforeContentClassName:d}})}}}),this._decorations.set(i,i.deltaDecorations(o,r))}else this._decorations.delete(i)})},this._ytextObserver=i=>{this.mux(()=>{let n=0;i.delta.forEach(e=>{if(void 0!==e.retain)n+=e.retain;else if(void 0!==e.insert){let i=t.getPositionAt(n),o=new e7.Selection(i.lineNumber,i.column,i.lineNumber,i.column),r=e.insert;t.applyEdits([{range:o,text:r}]),n+=r.length}else if(void 0!==e.delete){let i=t.getPositionAt(n),o=t.getPositionAt(n+e.delete),r=new e7.Selection(i.lineNumber,i.column,o.lineNumber,o.column);t.applyEdits([{range:r,text:""}])}else throw dV.zR()}),this._savedSelections.forEach((t,i)=>{let n=createMonacoSelectionFromRelativeSelection(i,e,t,this.doc);null!==n&&i.setSelection(n)})}),this._rerenderDecorations()},e.observe(this._ytextObserver);{let i=e.toString();t.getValue()!==i&&t.setValue(i)}this._monacoChangeHandler=t.onDidChangeContent(t=>{this.mux(()=>{this.doc.transact(()=>{t.changes.sort((e,t)=>t.rangeOffset-e.rangeOffset).forEach(t=>{e.delete(t.rangeOffset,t.rangeLength),e.insert(t.rangeOffset,t.text)})},this)})}),this._monacoDisposeHandler=t.onWillDispose(()=>{this.destroy()}),n&&(i.forEach(i=>{i.onDidChangeCursorSelection(()=>{if(i.getModel()===t){let o=i.getSelection();if(null===o)return;let r=t.getOffsetAt(o.getStartPosition()),s=t.getOffsetAt(o.getEndPosition());if(o.getDirection()===e7.SelectionDirection.RTL){let e=r;r=s,s=e}n.setLocalStateField("selection",{anchor:e6.w$(e,r),head:e6.w$(e,s)})}}),n.on("change",this._rerenderDecorations)}),this.awareness=n)}destroy(){this._monacoChangeHandler.dispose(),this._monacoDisposeHandler.dispose(),this.ytext.unobserve(this._ytextObserver),this.doc.off("beforeAllTransactions",this._beforeTransaction),this.awareness&&this.awareness.off("change",this._rerenderDecorations)}}}}]);